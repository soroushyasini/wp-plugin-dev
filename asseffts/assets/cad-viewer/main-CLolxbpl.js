function O$(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}const Iy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},V_=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215,0];function nm(t,e,n){return Math.max(e,Math.min(n,t))}const DL=class FL{constructor(){this._colorIndex=256,this._color=null,this._colorName=null}get color(){return this._color}set color(e){e==null?this._color=null:(this._color=Math.round(nm(e,0,256*256*256-1)),this._colorIndex=this.getColorIndexByValue(this._color),this._colorName=this.getColorNameByValue(this._color))}get hexColor(){if(this._color&&this._color>0&&this._color<=16777215){let e=this._color.toString(16).toUpperCase();for(;e.length<6;)e="0"+e;return`0x${e}`}return""}get cssColor(){return`rgb(${this.red},${this.green},${this.blue})`}get red(){return this.color?this.color>>16&255:null}get green(){return this.color?this.color>>8&255:null}get blue(){return this.color?this.color&255:null}get colorIndex(){return this._colorIndex}set colorIndex(e){e==null?this._colorIndex=null:(this._colorIndex=nm(e,0,256),this._colorIndex>0&&this._colorIndex<256?(this._color=V_[e],this._colorName=this.getColorNameByValue(this._color)):(this._color=null,this._colorName=null))}get colorName(){return this._colorName}set colorName(e){if(e){const n=Iy[e.toLowerCase()];n!==void 0?(this._colorName=e,this._color=n,this._colorIndex=this.getColorIndexByValue(this._color)):console.warn("Unknown color: "+e)}else this._colorName=null}get hasColorName(){return this._colorName==null}get hasColorIndex(){return this._colorIndex==null}get isByLayer(){return this.colorIndex==256}setByLayer(){return this.colorIndex=256,this}get isByBlock(){return this.colorIndex==0}setByBlock(){return this.colorIndex=0,this}setScalar(e){return this.setRGB(e,e,e),this}setRGB(e,n,r){const s=Math.round(nm(e,0,255)),i=Math.round(nm(n,0,255)),o=Math.round(nm(r,0,255));return this.color=(s<<16)+(i<<8)+o,this}setColorName(e){const n=Iy[e.toLowerCase()];return n!==void 0?this.color=n:console.warn("Unknown color "+e),this}clone(){const e=new FL;return e.colorIndex=this.colorIndex,e.color=this.color,e._colorName=this._colorName,this}copy(e){return this.colorIndex=e.colorIndex,this.color=e.color,this._colorName=e._colorName,this}equals(e){return e.color==this.color&&e.colorIndex==this.colorIndex&&e._colorName==this._colorName}toString(){return this.isByLayer?"ByLayer":this.isByBlock?"ByBlock":this.colorName?this.colorName:this.hexColor}getColorNameByValue(e){for(const[n,r]of Object.entries(Iy))if(r===e)return n;return null}getColorIndexByValue(e){const n=V_.length-1;for(let r=1;r<n;++r)if(V_[r]===e)return r;return null}};DL.NAMES=Iy;let Gu=DL;const Qo={get ILLEGAL_PARAMETERS(){return new ReferenceError("Illegal Parameters")}};let Tr=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}removeEventListener(e){this.listeners=this.listeners.filter(n=>n!==e)}replaceEventListener(e){this.removeEventListener(e),this.addEventListener(e)}dispatch(e,...n){for(const r of this.listeners)r.call(null,e,...n)}};var N$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function D$(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var BL={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(N$,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),s=["trace","debug","info","warn","error"],i={},o=null;function a(v,y){var g=v[y];if(typeof g.bind=="function")return g.bind(v);try{return Function.prototype.bind.call(g,v)}catch{return function(){return Function.prototype.apply.apply(g,[v,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(v){return v==="debug"&&(v="log"),typeof console===n?!1:v==="trace"&&r?l:console[v]!==void 0?a(console,v):console.log!==void 0?a(console,"log"):e}function u(){for(var v=this.getLevel(),y=0;y<s.length;y++){var g=s[y];this[g]=y<v?e:this.methodFactory(g,v,this.name)}if(this.log=this.debug,typeof console===n&&v<this.levels.SILENT)return"No console available for logging"}function d(v){return function(){typeof console!==n&&(u.call(this),this[v].apply(this,arguments))}}function h(v,y,g){return c(v)||d.apply(this,arguments)}function f(v,y){var g=this,S,_,w,E="loglevel";typeof v=="string"?E+=":"+v:typeof v=="symbol"&&(E=void 0);function C(L){var N=(s[L]||"silent").toUpperCase();if(!(typeof window===n||!E)){try{window.localStorage[E]=N;return}catch{}try{window.document.cookie=encodeURIComponent(E)+"="+N+";"}catch{}}}function T(){var L;if(!(typeof window===n||!E)){try{L=window.localStorage[E]}catch{}if(typeof L===n)try{var N=window.document.cookie,G=encodeURIComponent(E),V=N.indexOf(G+"=");V!==-1&&(L=/^([^;]+)/.exec(N.slice(V+G.length+1))[1])}catch{}return g.levels[L]===void 0&&(L=void 0),L}}function I(){if(!(typeof window===n||!E)){try{window.localStorage.removeItem(E)}catch{}try{window.document.cookie=encodeURIComponent(E)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function k(L){var N=L;if(typeof N=="string"&&g.levels[N.toUpperCase()]!==void 0&&(N=g.levels[N.toUpperCase()]),typeof N=="number"&&N>=0&&N<=g.levels.SILENT)return N;throw new TypeError("log.setLevel() called with invalid level: "+L)}g.name=v,g.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},g.methodFactory=y||h,g.getLevel=function(){return w??_??S},g.setLevel=function(L,N){return w=k(L),N!==!1&&C(w),u.call(g)},g.setDefaultLevel=function(L){_=k(L),T()||g.setLevel(L,!1)},g.resetLevel=function(){w=null,I(),u.call(g)},g.enableAll=function(L){g.setLevel(g.levels.TRACE,L)},g.disableAll=function(L){g.setLevel(g.levels.SILENT,L)},g.rebuild=function(){if(o!==g&&(S=k(o.getLevel())),u.call(g),o===g)for(var L in i)i[L].rebuild()},S=k(o?o.getLevel():"WARN");var M=T();M!=null&&(w=k(M)),u.call(g)}o=new f,o.getLogger=function(v){if(typeof v!="symbol"&&typeof v!="string"||v==="")throw new TypeError("You must supply a name when creating a logger.");var y=i[v];return y||(y=i[v]=new f(v,o.methodFactory)),y};var m=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=m),o},o.getLoggers=function(){return i},o.default=o,o})})(BL);var UL=BL.exports;const F$=D$(UL),B$=O$({__proto__:null,default:F$},[UL]),U$=B$;U$.setLevel("debug");function Gv(t){return t===null||typeof t!="object"?t:Array.isArray(t)?[...t]:{...t}}function cv(t,...e){for(const n of e)if(n)for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&t[r]===void 0&&(t[r]=n[r]);return t}function z$(t,e){return t!=null&&Object.prototype.hasOwnProperty.call(t,e)}function $$(t){return t==null?!0:Array.isArray(t)||typeof t=="string"?t.length===0:t instanceof Map||t instanceof Set?t.size===0:typeof t=="object"?Object.keys(t).length===0:!1}function zm(t,e){if(t===e)return!0;if(t==null||e==null)return t===e;if(typeof t!=typeof e)return!1;if(typeof t!="object")return t===e;if(Array.isArray(t)!==Array.isArray(e))return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(!zm(t[s],e[s]))return!1;return!0}const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(e,s)||!zm(t[s],e[s]))return!1;return!0}let V$=class zL{constructor(e,n){this.events={attrChanged:new Tr,modelChanged:new Tr},this._changing=!1,this._previousAttributes={},this._pending=!1;const r=e||{};n&&cv(r,n),this.attributes=r,this.changed={}}get(e){return this.attributes[e]}set(e,n,r){if(e==null)return this;let s;typeof e=="object"?(s=e,r=n):(s={},s[e]=n),r||(r={});const i=r.unset,o=r.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=Gv(this.attributes),this.changed={});const c=this.attributes,u=this.changed,d=this._previousAttributes;for(const h in s)n=s[h],zm(c[h],n)||a.push(h),zm(d[h],n)?delete u[h]:u[h]=n,i?delete c[h]:c[h]=n;if(!o){a.length&&(this._pending=r);for(let h=0;h<a.length;h++)this.events.attrChanged.dispatch({object:this,attrName:a[h],attrValue:c[a[h]],options:r})}if(l)return this;if(!o)for(;this._pending;)r=this._pending,this._pending=!1,this.events.modelChanged.dispatch({object:this,options:r});return this._pending=!1,this._changing=!1,this}has(e){return this.get(e)!=null}hasChanged(e){return e==null?!$$(this.changed):z$(this.changed,e)}changedAttributes(e){if(!e)return this.hasChanged()?Gv(this.changed):{};const n=this._changing?this._previousAttributes:this.attributes,r={};for(const s in e){const i=e[s];zm(n[s],i)||(r[s]=i)}return r}previous(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]}previousAttributes(){return Gv(this._previousAttributes)}clone(){const e=Gv(this.attributes);return new zL(e)}},XE=class Tm{constructor(){this.entries=new Map}static getInstance(){return Tm.instance||(Tm.instance=new Tm),Tm.instance}collect(e){this.entries.set(e.name,e)}printAll(){for(const[e,n]of this.entries)console.log(`${e}:`),console.log(n.format())}clear(){this.entries.clear()}getAll(){return Array.from(this.entries.values())}getEntry(e){return this.entries.get(e)}remove(e){return this.entries.delete(e)}},H$=class{constructor(e){this.name=e}run(e){throw new Error("run() must be implemented by subclass")}},G$=class{constructor(){this.tasks=[],this.onProgress=()=>{},this.onComplete=()=>{},this.onError=()=>{}}scheduleTask(e){return new Promise((n,r)=>{const s=()=>{Promise.resolve(e()).then(n).catch(r)};typeof window<"u"&&typeof window.requestAnimationFrame=="function"?window.requestAnimationFrame(s):setTimeout(s,0)})}addTask(e){this.tasks.push(e)}setProgressCallback(e){this.onProgress=e}setCompleteCallback(e){this.onComplete=e}setErrorCallback(e){this.onError=e}async run(e){const n=this.tasks.length;let r=e;for(let s=0;s<n;s++){const i=this.tasks[s];try{r=await this.scheduleTask(async()=>{const o=await i.run(r);return this.onProgress((s+1)/n,i),o})}catch(o){this.onError({error:o,taskIndex:s,task:i});return}}this.onComplete(r)}},$L=class{constructor(e,n,r){this._chunkSize=-1,this._minimumChunkSize=50,this._count=e,this._numerOfChunk=n<1?1:n,this._minimumChunkSize=r,this.calculateChunkSize()}get count(){return this._count}get numerOfChunk(){return this._numerOfChunk}get minimumChunkSize(){return this._minimumChunkSize}set minimumChunkSize(e){this._minimumChunkSize=e,this.calculateChunkSize()}get chunkSize(){return this._chunkSize}calculateChunkSize(){let e=this._count/this._numerOfChunk;e<this._minimumChunkSize&&(e=Math.min(this._minimumChunkSize,this._count)),this._chunkSize=e<1?this._count:Math.floor(e)}scheduleTask(e){return new Promise((n,r)=>{const s=()=>{Promise.resolve(e()).then(n).catch(r)};typeof window<"u"&&typeof window.requestAnimationFrame=="function"?window.requestAnimationFrame(s):setTimeout(s,0)})}async processChunk(e){let n=0;const r=async()=>{const s=n,i=Math.min(n+this._chunkSize,this._count);await e(s,i),n=i,n<this._count&&await this.scheduleTask(r)};await r()}};var gi,Wv,Rs,Js,jv,pa,Ni,Fl,ma,rd,Kv,qv,xh,Sh,Yv,Xv,Zv,_o,Bl,ns,Eh,Jv,Jn,Qi,Qv,eo,e0,zc,$c,Qa,t0,Ch,wo,Ul,Th,H_,G_,Vc,Hc,n0,r0,Gc,s0,W_,j_,vi,Wc,yi,Uo,K_,q_,Y_,X_,jc,zo,Mh,i0,Ah,$o,Kc,Vo,qc;(gi={})[gi.None=0]="None",gi[gi.Anonymous=1]="Anonymous",gi[gi.NonConstant=2]="NonConstant",gi[gi.Xref=4]="Xref",gi[gi.XrefOverlay=8]="XrefOverlay",gi[gi.ExternallyDependent=16]="ExternallyDependent",gi[gi.ResolvedOrDependent=32]="ResolvedOrDependent",gi[gi.ReferencedXref=64]="ReferencedXref";(Wv={})[Wv.BYBLOCK=0]="BYBLOCK",Wv[Wv.BYLAYER=256]="BYLAYER";(Rs={})[Rs.Rotated=0]="Rotated",Rs[Rs.Aligned=1]="Aligned",Rs[Rs.Angular=2]="Angular",Rs[Rs.Diameter=3]="Diameter",Rs[Rs.Radius=4]="Radius",Rs[Rs.Angular3Point=5]="Angular3Point",Rs[Rs.Ordinate=6]="Ordinate",Rs[Rs.ReferenceIsExclusive=32]="ReferenceIsExclusive",Rs[Rs.IsOrdinateXTypeFlag=64]="IsOrdinateXTypeFlag",Rs[Rs.IsCustomTextPositionFlag=128]="IsCustomTextPositionFlag";(Js={})[Js.TopLeft=1]="TopLeft",Js[Js.TopCenter=2]="TopCenter",Js[Js.TopRight=3]="TopRight",Js[Js.MiddleLeft=4]="MiddleLeft",Js[Js.MiddleCenter=5]="MiddleCenter",Js[Js.MiddleRight=6]="MiddleRight",Js[Js.BottomLeft=7]="BottomLeft",Js[Js.BottomCenter=8]="BottomCenter",Js[Js.BottomRight=9]="BottomRight";(jv={})[jv.AtLeast=1]="AtLeast",jv[jv.Exact=2]="Exact";var PA=((pa={})[pa.Center=0]="Center",pa[pa.Above=1]="Above",pa[pa.Outside=2]="Outside",pa[pa.JIS=3]="JIS",pa[pa.Below=4]="Below",pa),kh=((Ni={})[Ni.Feet=0]="Feet",Ni[Ni.None=1]="None",Ni[Ni.Inch=2]="Inch",Ni[Ni.FeetAndInch=3]="FeetAndInch",Ni[Ni.Leading=4]="Leading",Ni[Ni.Trailing=8]="Trailing",Ni[Ni.LeadingAndTrailing=12]="LeadingAndTrailing",Ni),W$=((Fl={})[Fl.None=0]="None",Fl[Fl.Leading=1]="Leading",Fl[Fl.Trailing=2]="Trailing",Fl[Fl.LeadingAndTrailing=3]="LeadingAndTrailing",Fl),j$=((ma={})[ma.Center=0]="Center",ma[ma.Left=1]="Left",ma[ma.Right=2]="Right",ma[ma.OverFirst=3]="OverFirst",ma[ma.OverSecond=4]="OverSecond",ma),K$=((rd={})[rd.Bottom=0]="Bottom",rd[rd.Center=1]="Center",rd[rd.Top=2]="Top",rd);(Kv={})[Kv.PatternFill=0]="PatternFill",Kv[Kv.SolidFill=1]="SolidFill";(qv={})[qv.NonAssociative=0]="NonAssociative",qv[qv.Associative=1]="Associative";(xh={})[xh.Normal=0]="Normal",xh[xh.Outer=1]="Outer",xh[xh.Ignore=2]="Ignore";(Sh={})[Sh.UserDefined=0]="UserDefined",Sh[Sh.Predefined=1]="Predefined",Sh[Sh.Custom=2]="Custom";(Yv={})[Yv.NotAnnotated=0]="NotAnnotated",Yv[Yv.Annotated=1]="Annotated";(Xv={})[Xv.Solid=0]="Solid",Xv[Xv.Gradient=1]="Gradient";(Zv={})[Zv.TwoColor=0]="TwoColor",Zv[Zv.OneColor=1]="OneColor";var q$=((_o={})[_o.Default=0]="Default",_o[_o.External=1]="External",_o[_o.Polyline=2]="Polyline",_o[_o.Derived=4]="Derived",_o[_o.Textbox=8]="Textbox",_o[_o.Outermost=16]="Outermost",_o),o0=((Bl={})[Bl.Line=1]="Line",Bl[Bl.Circular=2]="Circular",Bl[Bl.Elliptic=3]="Elliptic",Bl[Bl.Spline=4]="Spline",Bl),Y$=((ns={})[ns.Off=0]="Off",ns[ns.Solid=1]="Solid",ns[ns.Dashed=2]="Dashed",ns[ns.Dotted=3]="Dotted",ns[ns.ShotDash=4]="ShotDash",ns[ns.MediumDash=5]="MediumDash",ns[ns.LongDash=6]="LongDash",ns[ns.DoubleShortDash=7]="DoubleShortDash",ns[ns.DoubleMediumDash=8]="DoubleMediumDash",ns[ns.DoubleLongDash=9]="DoubleLongDash",ns[ns.DoubleMediumLongDash=10]="DoubleMediumLongDash",ns[ns.SparseDot=11]="SparseDot",ns);Y$.Off;(Eh={})[Eh.Standard=-3]="Standard",Eh[Eh.ByLayer=-2]="ByLayer",Eh[Eh.ByBlock=-1]="ByBlock";(Jv={})[Jv.English=0]="English",Jv[Jv.Metric=1]="Metric";(Jn={})[Jn.PERSPECTIVE_MODE=1]="PERSPECTIVE_MODE",Jn[Jn.FRONT_CLIPPING=2]="FRONT_CLIPPING",Jn[Jn.BACK_CLIPPING=4]="BACK_CLIPPING",Jn[Jn.UCS_FOLLOW=8]="UCS_FOLLOW",Jn[Jn.FRONT_CLIP_NOT_AT_EYE=16]="FRONT_CLIP_NOT_AT_EYE",Jn[Jn.UCS_ICON_VISIBILITY=32]="UCS_ICON_VISIBILITY",Jn[Jn.UCS_ICON_AT_ORIGIN=64]="UCS_ICON_AT_ORIGIN",Jn[Jn.FAST_ZOOM=128]="FAST_ZOOM",Jn[Jn.SNAP_MODE=256]="SNAP_MODE",Jn[Jn.GRID_MODE=512]="GRID_MODE",Jn[Jn.ISOMETRIC_SNAP_STYLE=1024]="ISOMETRIC_SNAP_STYLE",Jn[Jn.HIDE_PLOT_MODE=2048]="HIDE_PLOT_MODE",Jn[Jn.K_ISO_PAIR_TOP=4096]="K_ISO_PAIR_TOP",Jn[Jn.K_ISO_PAIR_RIGHT=8192]="K_ISO_PAIR_RIGHT",Jn[Jn.VIEWPORT_ZOOM_LOCKING=16384]="VIEWPORT_ZOOM_LOCKING",Jn[Jn.UNUSED=32768]="UNUSED",Jn[Jn.NON_RECTANGULAR_CLIPPING=65536]="NON_RECTANGULAR_CLIPPING",Jn[Jn.VIEWPORT_OFF=131072]="VIEWPORT_OFF",Jn[Jn.GRID_BEYOND_DRAWING_LIMITS=262144]="GRID_BEYOND_DRAWING_LIMITS",Jn[Jn.ADAPTIVE_GRID_DISPLAY=524288]="ADAPTIVE_GRID_DISPLAY",Jn[Jn.SUBDIVISION_BELOW_SPACING=1048576]="SUBDIVISION_BELOW_SPACING",Jn[Jn.GRID_FOLLOWS_WORKPLANE=2097152]="GRID_FOLLOWS_WORKPLANE";(Qi={})[Qi.OPTIMIZED_2D=0]="OPTIMIZED_2D",Qi[Qi.WIREFRAME=1]="WIREFRAME",Qi[Qi.HIDDEN_LINE=2]="HIDDEN_LINE",Qi[Qi.FLAT_SHADED=3]="FLAT_SHADED",Qi[Qi.GOURAUD_SHADED=4]="GOURAUD_SHADED",Qi[Qi.FLAT_SHADED_WITH_WIREFRAME=5]="FLAT_SHADED_WITH_WIREFRAME",Qi[Qi.GOURAUD_SHADED_WITH_WIREFRAME=6]="GOURAUD_SHADED_WITH_WIREFRAME";(Qv={})[Qv.UCS_UNCHANGED=0]="UCS_UNCHANGED",Qv[Qv.HAS_OWN_UCS=1]="HAS_OWN_UCS";(eo={})[eo.NON_ORTHOGRAPHIC=0]="NON_ORTHOGRAPHIC",eo[eo.TOP=1]="TOP",eo[eo.BOTTOM=2]="BOTTOM",eo[eo.FRONT=3]="FRONT",eo[eo.BACK=4]="BACK",eo[eo.LEFT=5]="LEFT",eo[eo.RIGHT=6]="RIGHT";(e0={})[e0.ONE_DISTANT_LIGHT=0]="ONE_DISTANT_LIGHT",e0[e0.TWO_DISTANT_LIGHTS=1]="TWO_DISTANT_LIGHTS";(zc={})[zc.ByLayer=0]="ByLayer",zc[zc.ByBlock=1]="ByBlock",zc[zc.ByDictionaryDefault=2]="ByDictionaryDefault",zc[zc.ByObject=3]="ByObject";function ir(t,e,n){return t.code===e&&(n==null||t.value===n)}function Er(t){let e={};t.rewind();let n=t.next(),r=n.code;if(e.x=n.value,(n=t.next()).code!==r+10)throw Error("Expected code for point value to be 20 but got "+n.code+".");return e.y=n.value,(n=t.next()).code!==r+20?t.rewind():e.z=n.value,e}let ZE=Symbol();function Qn(t,e){return(n,r,s)=>{let i=function(l,c=!1){return l.reduce((u,d)=>{d.pushContext&&u.push({});let h=u[u.length-1];for(let f of typeof d.code=="number"?[d.code]:d.code){let m=h[f]??(h[f]=[]);d.isMultiple&&m.length&&c&&console.warn(`Snippet ${m[m.length-1].name} for code(${f}) is shadowed by ${d.name}`),m.push(d)}return u},[{}])}(t,r.debug),o=!1,a=i.length-1;for(;!ir(n,0,"EOF");){let l=function(y,g,S){return y.find((_,w)=>{var E;return w>=S&&((E=_[g])==null?void 0:E.length)})}(i,n.code,a),c=l==null?void 0:l[n.code],u=c==null?void 0:c[c.length-1];if(!l||!u){r.rewind();break}u.isMultiple||l[n.code].pop();let{name:d,parser:h,isMultiple:f,isReducible:m}=u,v=h==null?void 0:h(n,r,s);if(v===ZE){r.rewind();break}if(d){let[y,g]=function(S,_){let w=_.split(".");if(!w.length)throw Error("[parserGenerator::getObjectByPath] Invalid empty path");let E=S;for(let C=0;C<w.length-1;++C){let T=Z_(w[C]),I=Z_(w[C+1]);Object.prototype.hasOwnProperty.call(E,T)||(typeof I=="number"?E[T]=[]:E[T]={}),E=E[T]}return[E,Z_(w[w.length-1])]}(s,d);f&&!m?(Object.prototype.hasOwnProperty.call(y,g)||(y[g]=[]),y[g].push(v)):y[g]=v}u.pushContext&&(a-=1),o=!0,n=r.next()}return e&&Object.setPrototypeOf(s,e),o}}function Z_(t){let e=Number.parseInt(t);return Number.isNaN(e)?t:e}function ge({value:t}){return t}function zt(t,e){return Er(e)}function Pr({value:t}){return!!t}let X$=[{code:1001,name:"xdata",parser:VL}];function VL(t,e){var n;if(!ir(t,1001))throw Error("XData must starts with code 1001");let r={appName:t.value,value:[]};t=e.next();let s=[r.value];for(;!ir(t,0,"EOF")&&t.code>=1e3;){let i=s[s.length-1];switch(t.code){case 1002:t.value==="{"?s.push([]):(s.pop(),(n=s[s.length-1])==null||n.push(i));break;case 1e3:case 1004:case 1040:case 1070:case 1071:i.push({type:zl(t.code),value:t.value});break;case 1003:i.push({name:"layer",type:zl(t.code),value:t.value});break;case 1005:i.push({name:"handle",type:zl(t.code),value:t.value});break;case 1010:i.push({type:zl(t.code),value:Er(e)});break;case 1011:i.push({name:"worldSpacePosition",type:zl(t.code),value:Er(e)});break;case 1012:i.push({name:"worldSpaceDisplacement",type:zl(t.code),value:Er(e)});break;case 1013:i.push({name:"worldSpaceDirection",type:zl(t.code),value:Er(e)});break;case 1041:i.push({name:"distance",type:zl(t.code),value:t.value});break;case 1042:i.push({name:"scale",type:zl(t.code),value:t.value})}t=e.next()}return e.rewind(),r}function zl(t){switch(t){case 1e3:case 1003:case 1005:return"string";case 1004:return"hex";case 1040:case 1041:case 1042:return"real";case 1070:return"integer";case 1071:return"long";case 1010:case 1011:case 1012:case 1013:return"point";default:return""}}function $d(t,e,n){for(;ir(t,102);){var r;let s=t.value;if(t=e.next(),!s.startsWith("{")){e.debug&&console.warn(`Invalid application group, expected to start with "{" but received: ${s}`),function(o,a){for(;!ir(o,102)&&!ir(o,0,"EOF");)o=a.next()}(t,e),t=e.next();continue}let i=s.slice(1).trim();n.extensions??(n.extensions={}),(r=n.extensions)[i]??(r[i]=[]),function(o,a,l){for(;!ir(o,102,"}")&&!ir(o,0,"EOF");)l.push(o),o=a.next()}(t,e,n.extensions[i]),t=e.next()}e.rewind()}let Z$=0;function HL(t){if(!t)throw TypeError("entity cannot be undefined or null");t.handle||(t.handle=Z$++)}var J$=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215];function GL(t){return J$[t]}($c={})[$c.CAST_AND_RECEIVE=0]="CAST_AND_RECEIVE",$c[$c.CAST=1]="CAST",$c[$c.RECEIVE=2]="RECEIVE",$c[$c.IGNORE=3]="IGNORE";let Wr=[...X$,{code:284,name:"shadowMode",parser:ge},{code:390,name:"plotStyleHardId",parser:ge},{code:380,name:"plotStyleType",parser:ge},{code:440,name:"transparency",parser:ge},{code:430,name:"colorName",parser:ge},{code:420,name:"color",parser:ge},{code:310,name:"proxyEntity",isMultiple:!0,parser:ge},{code:92,name:"proxyByte",parser:ge},{code:60,name:"isVisible",parser:Pr},{code:48,name:"lineTypeScale",parser:ge},{code:370,name:"lineweight",parser:ge},{code:62,name:"colorIndex",parser(t,e,n){let r=t.value;return r>0&&r<256&&(n.color=GL(Math.abs(r))),r}},{code:347,name:"materialObjectHardId",parser:ge},{code:6,name:"lineType",parser:ge},{code:8,name:"layer",parser:ge},{code:410,name:"layoutTabName",parser:ge},{code:67,name:"isInPaperSpace",parser:Pr},{code:100},{code:160},{code:330,name:"ownerBlockRecordSoftId",parser:ge},{code:102,parser:$d},{code:102,parser:$d},{code:102,parser:$d},{code:5,name:"handle",parser:ge}];function S1(t){return[{code:3,name:t,parser:(e,n,r)=>(r._code3text=(r._code3text??"")+e.value,r._code3text+(r._code1text??"")),isMultiple:!0,isReducible:!0},{code:1,name:t,parser:(e,n,r)=>(r._code1text=e.value,(r._code3text??"")+r._code1text)}]}function WL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let Q$={extrusionDirection:{x:0,y:0,z:1}},eV=[{code:210,name:"extrusionDirection",parser:zt},{code:51,name:"endAngle",parser:ge},{code:50,name:"startAngle",parser:ge},{code:100,name:"subclassMarker",parser:ge},{code:40,name:"radius",parser:ge},{code:10,name:"center",parser:zt},{code:39,name:"thickness",parser:ge},{code:100},...Wr],jL=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){WL(this,"parser",Qn(eV,Q$))}};WL(jL,"ForEntityName","ARC");(Qa={})[Qa.NONE=0]="NONE",Qa[Qa.INVISIBLE=1]="INVISIBLE",Qa[Qa.CONSTANT=2]="CONSTANT",Qa[Qa.VERIFICATION_REQUIRED=4]="VERIFICATION_REQUIRED",Qa[Qa.PRESET=8]="PRESET";(t0={})[t0.MULTILINE=2]="MULTILINE",t0[t0.CONSTANT_MULTILINE=4]="CONSTANT_MULTILINE";(Ch={})[Ch.NONE=0]="NONE",Ch[Ch.MIRRORED_X=2]="MIRRORED_X",Ch[Ch.MIRRORED_Y=4]="MIRRORED_Y";var tV=((wo={})[wo.LEFT=0]="LEFT",wo[wo.CENTER=1]="CENTER",wo[wo.RIGHT=2]="RIGHT",wo[wo.ALIGNED=3]="ALIGNED",wo[wo.MIDDLE=4]="MIDDLE",wo[wo.FIT=5]="FIT",wo),nV=((Ul={})[Ul.BASELINE=0]="BASELINE",Ul[Ul.BOTTOM=1]="BOTTOM",Ul[Ul.MIDDLE=2]="MIDDLE",Ul[Ul.TOP=3]="TOP",Ul);function KL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let qL={thickness:0,rotation:0,xScale:1,obliqueAngle:0,styleName:"STANDARD",generationFlag:0,halign:tV.LEFT,valign:nV.BASELINE,extrusionDirection:{x:0,y:0,z:1}},YL=[{code:73,name:"valign",parser:ge},{code:100},{code:210,name:"extrusionDirection",parser:zt},{code:11,name:"endPoint",parser:zt},{code:72,name:"valign",parser:ge},{code:72,name:"halign",parser:ge},{code:71,name:"generationFlag",parser:ge},{code:7,name:"styleName",parser:ge},{code:51,name:"obliqueAngle",parser:ge},{code:41,name:"xScale",parser:ge},{code:50,name:"rotation",parser:ge},{code:1,name:"text",parser:ge},{code:40,name:"textHeight",parser:ge},{code:10,name:"startPoint",parser:zt},{code:39,name:"thickness",parser:ge},{code:100,name:"subclassMarker",parser:ge},...Wr],XL=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){KL(this,"parser",Qn(YL,qL))}};function ZL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}KL(XL,"ForEntityName","TEXT");let rV={...qL},sV=[{code:2},{code:40,name:"annotationScale",parser:ge},{code:10,name:"alignmentPoint",parser:zt},{code:340,name:"secondaryAttributesHardIds",isMultiple:!0,parser:ge},{code:70,name:"numberOfSecondaryAttributes",parser:ge},{code:70,name:"isReallyLocked",parser:Pr},{code:70,name:"mtextFlag",parser:ge},{code:280,name:"isDuplicatedRecord",parser:Pr},{code:100},{code:280,name:"isLocked",parser:Pr},{code:74,name:"valign",parser:ge},{code:73},{code:70,name:"attributeFlag",parser:ge},{code:2,name:"tag",parser:ge},{code:3,name:"prompt",parser:ge},{code:280},{code:100,name:"subclassMarker",parser:ge},...YL.slice(2)],JL=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){ZL(this,"parser",Qn(sV,rV))}};ZL(JL,"ForEntityName","ATTDEF");(Th={})[Th.LEFT_TO_RIGHT=1]="LEFT_TO_RIGHT",Th[Th.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM",Th[Th.BY_STYLE=5]="BY_STYLE";function iV(t,e){let n={};for(let r of t){let s=e(r);s!=null&&(n[s]??(n[s]=[]),n[s].push(r))}return n}function*vb(t,e=1/0,n=1){for(let r=t;r!==e;r+=n)yield r}function hu(t){return{x:t.x??0,y:t.y??0,z:t.z??0}}function JE(t,e,n){if(ir(e,102))return $d(e,n,t),!0;switch(e.code){case 0:t.type=e.value;break;case 5:t.handle=e.value;break;case 330:t.ownerBlockRecordSoftId=e.value;break;case 67:t.isInPaperSpace=!!e.value;break;case 8:t.layer=e.value;break;case 6:t.lineType=e.value;break;case 347:t.materialObjectHardId=e.value;break;case 62:t.colorIndex=e.value,t.color=GL(Math.abs(e.value));break;case 370:t.lineweight=e.value;break;case 48:t.lineTypeScale=e.value;break;case 60:t.isVisible=!!e.value;break;case 92:t.proxyByte=e.value;break;case 310:t.proxyEntity=e.value;break;case 100:break;case 420:t.color=e.value;break;case 430:t.transparency=e.value;break;case 390:t.plotStyleHardId=e.value;break;case 284:t.shadowMode=e.value;break;case 1001:t.xdata=VL(e,n);break;default:return!1}return!0}function QL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let oV={textStyle:"STANDARD",extrusionDirection:{x:0,y:0,z:1},rotation:0},Py=[{code:46,name:"annotationHeight",parser:ge},{code:101,parser(t,e){(function(n){n.rewind();let r=n.next();if(r.code!==101)throw Error("Bad call for skipEmbeddedObject()");do r=n.next();while(r.code!==0);n.rewind()})(e)}},{code:50,name:"columnHeight",parser:ge},{code:49,name:"columnGutter",parser:ge},{code:48,name:"columnWidth",parser:ge},{code:79,name:"columnAutoHeight",parser:ge},{code:78,name:"columnFlowReversed",parser:ge},{code:76,name:"columnCount",parser:ge},{code:75,name:"columnType",parser:ge},{code:441,name:"backgroundFillTransparency",parser:ge},{code:63,name:"backgroundFillColor",parser:ge},{code:45,name:"fillBoxScale",parser:ge},{code:[...vb(430,440)],name:"backgroundColor",parser:ge},{code:[...vb(420,430)],name:"backgroundColor",parser:ge},{code:90,name:"backgroundFill",parser:ge},{code:44,name:"lineSpacing",parser:ge},{code:73,name:"lineSpacingStyle",parser:ge},{code:50,name:"rotation",parser:ge},{code:43},{code:42},{code:11,name:"direction",parser:zt},{code:210,name:"extrusionDirection",parser:zt},{code:7,name:"styleName",parser:ge},...S1("text"),{code:72,name:"drawingDirection",parser:ge},{code:71,name:"attachmentPoint",parser:ge},{code:41,name:"width",parser:ge},{code:40,name:"height",parser:ge},{code:10,name:"insertionPoint",parser:zt},{code:100,name:"subclassMarker",parser:ge},...Wr],eO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){QL(this,"parser",Qn(Py,oV))}};function tO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}QL(eO,"ForEntityName","MTEXT");let aV={thickness:0,rotation:0,scale:1,obliqueAngle:0,textStyle:"STANDARD",textGenerationFlag:0,horizontalJustification:0,verticalJustification:0,extrusionDirection:{x:0,y:0,z:1}},lV=[...Py.slice(Py.findIndex(({name:t})=>t==="columnType"),Py.findIndex(({name:t})=>t==="subclassMarker")+1),{code:100},{code:0,parser(t){if(!ir(t,0,"MTEXT"))return ZE}},{code:2,name:"definitionTag",parser:ge},{code:40,name:"annotationScale",parser:ge},{code:10,name:"alignmentPoint",parser:zt},{code:340,name:"secondaryAttributesHardId",parser:ge},{code:70,name:"numberOfSecondaryAttributes",parser:ge},{code:70,name:"isReallyLocked",parser:Pr},{code:70,name:"mtextFlag",parser:ge},{code:280,name:"isDuplicatedEntriesKeep",parser:Pr},{code:100},{code:280,name:"lockPositionFlag",parser:Pr},{code:210,name:"extrusionDirection",parser:zt},{code:11,name:"alignmentPoint",parser:zt},{code:74,name:"verticalJustification",parser:ge},{code:72,name:"horizontalJustification",parser:ge},{code:71,name:"textGenerationFlag",parser:ge},{code:7,name:"textStyle",parser:ge},{code:51,name:"obliqueAngle",parser:ge},{code:41,name:"scale",parser:ge},{code:50,name:"rotation",parser:ge},{code:73},{code:70,name:"attributeFlag",parser:ge},{code:2,name:"tag",parser:ge},{code:280},{code:100,name:"subclassMarker",parser:ge},{code:1,name:"text",parser:ge},{code:40,name:"textHeight",parser:ge},{code:10,name:"startPoint",parser:zt},{code:39,name:"thickness",parser:ge},{code:100},...Wr],nO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){tO(this,"parser",Qn(lV,aV))}};function rO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}tO(nO,"ForEntityName","ATTRIB");let cV=[...S1("data"),{code:70,name:"version",parser:ge},{code:100,name:"subclassMarker",parser:ge},...Wr],sO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){rO(this,"parser",Qn(cV))}};function iO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}rO(sO,"ForEntityName","BODY");let uV={thickness:0,extrusionDirection:{x:0,y:0,z:1}},dV=[{code:210,name:"extrusionDirection",parser:zt},{code:40,name:"radius",parser:ge},{code:10,name:"center",parser:zt},{code:39,name:"thickness",parser:ge},{code:100,name:"subclassMarker",parser:ge},...Wr],oO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){iO(this,"parser",Qn(dV,uV))}};iO(oO,"ForEntityName","CIRCLE");let Ry=class{parseEntity(e,n){let r={};for(;!ir(n,0,"EOF");){if(n.code===0){e.rewind();break}(function(s,i,o){switch(i.code){case 100:s.subclassMarker=i.value;break;case 280:s.version=i.value;break;case 2:s.name=i.value;break;case 10:s.definitionPoint=Er(o);break;case 11:s.textPoint=Er(o);break;case 12:s.insertionPoint=Er(o);break;case 13:s.subDefinitionPoint1=Er(o);break;case 14:s.subDefinitionPoint2=Er(o);break;case 15:s.centerPoint=Er(o);break;case 16:s.arcPoint=Er(o);break;case 70:s.dimensionType=i.value;break;case 71:s.attachmentPoint=i.value;break;case 72:s.textLineSpacingStyle=i.value;break;case 40:s.leaderLength=i.value;break;case 41:s.textLineSpacingFactor=i.value;break;case 42:s.measurement=i.value;break;case 1:s.text=i.value;break;case 50:s.rotationAngle=i.value;break;case 52:s.obliqueAngle=i.value;break;case 53:s.textRotation=i.value;break;case 51:s.ocsRotation=i.value;break;case 210:s.extrusionDirection=Er(o);break;case 3:s.styleName=i.value;break;default:JE(s,i,o)}})(r,n,e),n=e.next()}return r}};function aO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}G_="DIMENSION",(H_="ForEntityName")in Ry?Object.defineProperty(Ry,H_,{value:G_,enumerable:!0,configurable:!0,writable:!0}):Ry[H_]=G_;let hV={extrusionDirection:{x:0,y:0,z:1}},fV=[{code:42,name:"endAngle",parser:ge},{code:41,name:"startAngle",parser:ge},{code:40,name:"axisRatio",parser:ge},{code:210,name:"extrusionDirection",parser:zt},{code:11,name:"majorAxisEndPoint",parser:zt},{code:10,name:"center",parser:zt},{code:100,name:"subclassMarker",parser:ge},...Wr],lO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){aO(this,"parser",Qn(fV,hV))}};aO(lO,"ForEntityName","ELLIPSE");(Vc={})[Vc.First=1]="First",Vc[Vc.Second=2]="Second",Vc[Vc.Third=4]="Third",Vc[Vc.Fourth=8]="Fourth";function cO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let pV=[{code:13,name:"vertices.3",parser:zt},{code:12,name:"vertices.2",parser:zt},{code:11,name:"vertices.1",parser:zt},{code:10,name:"vertices.0",parser:zt},{code:100,name:"subclassMarker",parser:ge},...Wr],uO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){cO(this,"parser",Qn(pV))}};cO(uO,"ForEntityName","3DFACE");let dO=[{code:330,name:"sourceBoundaryObjects",parser:ge,isMultiple:!0},{code:97,name:"numberOfSourceBoundaryObjects",parser:ge}],mV=[{code:11,name:"end",parser:zt},{code:10,name:"start",parser:zt}],gV=[{code:73,name:"isCCW",parser:Pr},{code:51,name:"endAngle",parser:ge},{code:50,name:"startAngle",parser:ge},{code:40,name:"radius",parser:ge},{code:10,name:"center",parser:zt}],vV=[{code:73,name:"isCCW",parser:Pr},{code:51,name:"endAngle",parser:ge},{code:50,name:"startAngle",parser:ge},{code:40,name:"lengthOfMinorAxis",parser:ge},{code:11,name:"end",parser:zt},{code:10,name:"center",parser:zt}],yV=[{code:13,name:"endTangent",parser:zt},{code:12,name:"startTangent",parser:zt},{code:11,name:"fitDatum",isMultiple:!0,parser:zt},{code:97,name:"numberOfFitData",parser:ge},{code:10,name:"controlPoints",isMultiple:!0,parser(t,e){let n={...Er(e),weight:1};return(t=e.next()).code===42?n.weight=t.value:e.rewind(),n}},{code:40,name:"knots",isMultiple:!0,parser:ge},{code:96,name:"numberOfControlPoints",parser:ge},{code:95,name:"numberOfKnots",parser:ge},{code:74,name:"isPeriodic",parser:Pr},{code:73,name:"splineFlag",parser:ge},{code:94,name:"degree",parser:ge}],bV={[o0.Line]:mV,[o0.Circular]:gV,[o0.Elliptic]:vV,[o0.Spline]:yV},_V=[...dO,{code:72,name:"edges",parser(t,e){let n={type:t.value},r=Qn(bV[n.type]);if(!r)throw Error(`Invalid edge type ${n.type}`);return r(t=e.next(),e,n),n},isMultiple:!0},{code:93,name:"numberOfEdges",parser:ge}],wV=[...dO,{code:10,name:"vertices",parser(t,e){let n={...Er(e),bulge:0};return(t=e.next()).code===42?n.bulge=t.value:e.rewind(),n},isMultiple:!0},{code:93,name:"numberOfVertices",parser:ge},{code:73,name:"isClosed",parser:Pr},{code:72,name:"hasBulge",parser:Pr}],xV=[{code:49,name:"dashLengths",parser:ge,isMultiple:!0},{code:79,name:"numberOfDashLengths",parser:ge},{code:45,name:"offset",parser:RA},{code:43,name:"base",parser:RA},{code:53,name:"angle",parser:ge}];function RA(t,e){let n=t.code+1,r={x:t.value,y:1};return(t=e.next()).code===n?r.y=t.value:e.rewind(),r}function hO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let SV={extrusionDirection:{x:0,y:0,z:1},gradientRotation:0,colorTint:0},EV=[{code:470},{code:463},{code:462,name:"colorTint",parser:ge},{code:461,name:"gradientDefinition",parser:ge},{code:460,name:"gradientRotation",parser:ge},{code:453,name:"numberOfColors",parser:ge},{code:452,name:"gradientColorFlag",parser:ge},{code:451},{code:450,name:"gradientFlag",parser:ge},{code:10,name:"seedPoints",parser:zt,isMultiple:!0},{code:99},{code:11,name:"offsetVector",parser:zt},{code:98,name:"numberOfSeedPoints",parser:ge},{code:47,name:"pixelSize",parser:ge},{code:53,name:"definitionLines",parser:function(t,e){let n={};return Qn(xV)(t,e,n),n},isMultiple:!0},{code:78,name:"numberOfDefinitionLines",parser:ge},{code:77,name:"isDouble",parser:Pr},{code:73,name:"isAnnotated",parser:Pr},{code:41,name:"patternScale",parser:ge},{code:52,name:"patternAngle",parser:ge},{code:76,name:"patternType",parser:ge},{code:75,name:"hatchStyle",parser:ge},{code:92,name:"boundaryPaths",parser:function(t,e){let n={boundaryPathTypeFlag:t.value},r=n.boundaryPathTypeFlag&q$.Polyline;return t=e.next(),r?Qn(wV)(t,e,n):Qn(_V)(t,e,n),n},isMultiple:!0},{code:91,name:"numberOfBoundaryPaths",parser:ge},{code:71,name:"associativity",parser:ge},{code:63,name:"patternFillColor",parser:ge},{code:70,name:"solidFill",parser:ge},{code:2,name:"patternName",parser:ge},{code:210,name:"extrusionDirection",parser:zt},{code:10,name:"elevationPoint",parser:zt},{code:100,name:"subclassMarker",parser:ge,pushContext:!0},...Wr],fO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){hO(this,"parser",Qn(EV,SV))}};hO(fO,"ForEntityName","HATCH");(Hc={})[Hc.ShowImage=1]="ShowImage",Hc[Hc.ShowImageWhenNotAlignedWithScreen=2]="ShowImageWhenNotAlignedWithScreen",Hc[Hc.UseClippingBoundary=4]="UseClippingBoundary",Hc[Hc.TransparencyIsOn=8]="TransparencyIsOn";(n0={})[n0.Rectangular=1]="Rectangular",n0[n0.Polygonal=2]="Polygonal";(r0={})[r0.Outside=0]="Outside",r0[r0.Inside=1]="Inside";function pO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let CV={brightness:50,contrast:50,fade:0,clippingBoundaryPath:[]},TV=[{code:290,name:"clipMode",parser:ge},{code:14,name:"clippingBoundaryPath",isMultiple:!0,parser:zt},{code:91,name:"countBoundaryPoints",parser:ge},{code:71,name:"clippingBoundaryType",parser:ge},{code:360,name:"imageDefReactorHandle",parser:ge},{code:283,name:"fade",parser:ge},{code:282,name:"contrast",parser:ge},{code:281,name:"brightness",parser:ge},{code:280,name:"isClipped",parser:Pr},{code:70,name:"flags",parser:ge},{code:340,name:"imageDefHandle",parser:ge},{code:13,name:"imageSize",parser:zt},{code:12,name:"vPixel",parser:zt},{code:11,name:"uPixel",parser:zt},{code:10,name:"position",parser:zt},{code:90,name:"version",parser:ge},{code:100,name:"subclassMarker",parser:ge},...Wr],mO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){pO(this,"parser",Qn(TV,CV))}};function gO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}pO(mO,"ForEntityName","IMAGE");let MV={xScale:1,yScale:1,zScale:1,rotation:0,columnCount:0,rowCount:0,columnSpacing:0,rowSpacing:0,extrusionDirection:{x:0,y:0,z:1}},AV=[{code:210,name:"extrusionDirection",parser:zt},{code:45,name:"rowSpacing",parser:ge},{code:44,name:"columnSpacing",parser:ge},{code:71,name:"rowCount",parser:ge},{code:70,name:"columnCount",parser:ge},{code:50,name:"rotation",parser:ge},{code:43,name:"zScale",parser:ge},{code:42,name:"yScale",parser:ge},{code:41,name:"xScale",parser:ge},{code:10,name:"insertionPoint",parser:zt},{code:2,name:"name",parser:ge},{code:66,name:"isVariableAttributes",parser:Pr},{code:100,name:"subclassMarker",parser:ge},...Wr],vO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){gO(this,"parser",Qn(AV,MV))}};function yO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}gO(vO,"ForEntityName","INSERT");let kV={isArrowheadEnabled:!0},IV=[{code:213,name:"offsetFromAnnotation",parser:zt},{code:212,name:"offsetFromBlock",parser:zt},{code:211,name:"horizontalDirection",parser:zt},{code:210,name:"normal",parser:zt},{code:340,name:"associatedAnnotation",parser:ge},{code:77,name:"byBlockColor",parser:ge},{code:10,name:"vertices",parser:zt,isMultiple:!0},{code:76,name:"numberOfVertices",parser:ge},{code:41,name:"textWidth",parser:ge},{code:40,name:"textHeight",parser:ge},{code:75,name:"isHooklineExists",parser:Pr},{code:74,name:"isHooklineSameDirection",parser:Pr},{code:73,name:"leaderCreationFlag",parser:ge},{code:72,name:"isSpline",parser:Pr},{code:71,name:"isArrowheadEnabled",parser:Pr},{code:3,name:"styleName",parser:ge},{code:100,name:"subclassMarker",parser:ge},...Wr],bO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){yO(this,"parser",Qn(IV,kV))}};yO(bO,"ForEntityName","LEADER");(Gc={})[Gc.TextAnnotation=0]="TextAnnotation",Gc[Gc.ToleranceAnnotation=1]="ToleranceAnnotation",Gc[Gc.BlockReferenceAnnotation=2]="BlockReferenceAnnotation",Gc[Gc.NoAnnotation=3]="NoAnnotation";function _O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let PV={thickness:0,extrusionDirection:{x:0,y:0,z:1}},RV=[{code:210,name:"extrusionDirection",parser:zt},{code:11,name:"endPoint",parser:zt},{code:10,name:"startPoint",parser:zt},{code:39,name:"thickness",parser:ge},{code:100,name:"subclassMarker",parser:ge},...Wr],wO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){_O(this,"parser",Qn(RV,PV))}};_O(wO,"ForEntityName","LINE");(s0={})[s0.IS_CLOSED=1]="IS_CLOSED",s0[s0.PLINE_GEN=128]="PLINE_GEN";let LV={flag:0,elevation:0,thickness:0,extrusionDirection:{x:0,y:0,z:1},vertices:[]},OV={bulge:0},NV=[{code:42,name:"bulge",parser:ge},{code:41,name:"endWidth",parser:ge},{code:40,name:"startWidth",parser:ge},{code:91,name:"id",parser:ge},{code:20,name:"y",parser:ge},{code:10,name:"x",parser:ge}],DV=[{code:210,name:"extrusionDirection",parser:zt},{code:10,name:"vertices",isMultiple:!0,parser(t,e){let n={};return Qn(NV,OV)(t,e,n),n}},{code:39,name:"thickness",parser:ge},{code:38,name:"elevation",parser:ge},{code:43,name:"constantWidth",parser:ge},{code:70,name:"flag",parser:ge},{code:90,name:"numberOfVertices",parser:ge},{code:100,name:"subclassMarker",parser:ge},...Wr],Ly=class{parseEntity(e,n){let r={};return Qn(DV,LV)(n,e,r),r}};function xO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}j_="LWPOLYLINE",(W_="ForEntityName")in Ly?Object.defineProperty(Ly,W_,{value:j_,enumerable:!0,configurable:!0,writable:!0}):Ly[W_]=j_;let FV=[{code:90,name:"overridenSubEntityCount",parser:ge},{code:140,name:"edgeCreaseWeights",parser:ge,isMultiple:!0},{code:95,name:"edgeCreaseCount",parser:ge},{code:94,parser(t,e,n){n.edgeCount=t.value,n.edgeIndices=[];for(let r=0;r<n.edgeCount;++r){let s=[];t=e.next(),s[0]=t.value,t=e.next(),s[1]=t.value,n.edgeIndices.push(s)}}},{code:93,parser(t,e,n){n.totalFaceIndices=t.value,n.faceIndices=[];let r=[];for(let i=0;i<n.totalFaceIndices&&!ir(t,0);++i)t=e.next(),r.push(t.value);let s=0;for(;s<r.length;){let i=r[s++],o=[];for(let a=0;a<i;++a)o.push(r[s++]);n.faceIndices.push(o)}}},{code:10,name:"vertices",parser:zt,isMultiple:!0},{code:92,name:"verticesCount",parser:ge},{code:91,name:"subdivisionLevel",parser:ge},{code:40,name:"blendCrease",parser:ge},{code:72,name:"isBlendCreased",parser:Pr},{code:71,name:"version",parser:ge},{code:100,name:"subclassMarker",parser:function({value:t}){return t.trim()},pushContext:!0},...Wr],SO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){xO(this,"parser",Qn(FV))}};function EO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}xO(SO,"ForEntityName","MESH");let BV={thickness:0,extrusionDirection:{x:0,y:0,z:1},angle:0},UV=[{code:50,name:"angle",parser:ge},{code:210,name:"extrusionDirection",parser:zt},{code:39,name:"thickness",parser:ge},{code:10,name:"position",parser:zt},{code:100,name:"subclassMarker",parser:ge},...Wr],CO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){EO(this,"parser",Qn(UV,BV))}};EO(CO,"ForEntityName","POINT");(vi={})[vi.CLOSED_POLYLINE=1]="CLOSED_POLYLINE",vi[vi.CURVE_FIT=2]="CURVE_FIT",vi[vi.SPLINE_FIT=4]="SPLINE_FIT",vi[vi.POLYLINE_3D=8]="POLYLINE_3D",vi[vi.POLYGON_3D=16]="POLYGON_3D",vi[vi.CLOSED_POLYGON=32]="CLOSED_POLYGON",vi[vi.POLYFACE=64]="POLYFACE",vi[vi.CONTINUOUS=128]="CONTINUOUS";(Wc={})[Wc.NONE=0]="NONE",Wc[Wc.QUADRATIC=5]="QUADRATIC",Wc[Wc.CUBIC=6]="CUBIC",Wc[Wc.BEZIER=8]="BEZIER";(yi={})[yi.CREATED_BY_CURVE_FIT=1]="CREATED_BY_CURVE_FIT",yi[yi.TANGENT_DEFINED=2]="TANGENT_DEFINED",yi[yi.NOT_USED=4]="NOT_USED",yi[yi.CREATED_BY_SPLINE_FIT=8]="CREATED_BY_SPLINE_FIT",yi[yi.SPLINE_CONTROL_POINT=16]="SPLINE_CONTROL_POINT",yi[yi.FOR_POLYLINE=32]="FOR_POLYLINE",yi[yi.FOR_POLYGON=64]="FOR_POLYGON",yi[yi.POLYFACE=128]="POLYFACE";function TO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let zV={startWidth:0,endWidth:0,bulge:0},$V=[{code:91,name:"id",parser:ge},{code:[...vb(71,75)],name:"faces",isMultiple:!0,parser:ge},{code:50,name:"tangentDirection",parser:ge},{code:70,name:"flag",parser:ge},{code:42,name:"bulge",parser:ge},{code:41,name:"endWidth",parser:ge},{code:40,name:"startWidth",parser:ge},{code:30,name:"z",parser:ge},{code:20,name:"y",parser:ge},{code:10,name:"x",parser:ge},{code:100,name:"subclassMarker",parser:ge},{code:100},...Wr],QE=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){TO(this,"parser",Qn($V,zV))}};function MO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}TO(QE,"ForEntityName","VERTEX");let VV={thickness:0,flag:0,startWidth:0,endWidth:0,meshMVertexCount:0,meshNVertexCount:0,surfaceMDensity:0,surfaceNDensity:0,smoothType:0,extrusionDirection:{x:0,y:0,z:1},vertices:[]},HV=[{code:0,name:"vertices",isMultiple:!0,parser:(t,e)=>ir(t,0,"VERTEX")?(t=e.next(),new QE().parseEntity(e,t)):ZE},{code:210,name:"extrusionDirection",parser:zt},{code:75,name:"smoothType",parser:ge},{code:74,name:"surfaceNDensity",parser:ge},{code:73,name:"surfaceMDensity",parser:ge},{code:72,name:"meshNVertexCount",parser:ge},{code:71,name:"meshMVertexCount",parser:ge},{code:41,name:"endWidth",parser:ge},{code:40,name:"startWidth",parser:ge},{code:70,name:"flag",parser:ge},{code:39,name:"thickness",parser:ge},{code:30,name:"elevation",parser:ge},{code:20},{code:10},{code:66},{code:100,name:"subclassMarker",parser:ge},...Wr],AO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){MO(this,"parser",Qn(HV,VV))}};function kO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}MO(AO,"ForEntityName","POLYLINE");let GV=[{code:11,name:"direction",parser:zt},{code:10,name:"position",parser:zt},{code:100,name:"subclassMarker",parser:ge},...Wr],IO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){kO(this,"parser",Qn(GV))}};function PO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}kO(IO,"ForEntityName","RAY");let WV=[...S1("data"),{code:70,name:"version",parser:ge},{code:100,name:"subclassMarker",parser:ge},...Wr],RO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){PO(this,"parser",Qn(WV))}};function LO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}PO(RO,"ForEntityName","REGION");let jV={vertices:[],backLineVertices:[]},KV=[{code:360,name:"geometrySettingHardId",parser:ge},{code:12,name:"backLineVertices",isMultiple:!0,parser:zt},{code:93,name:"numberOfBackLineVertices",parser:ge},{code:11,name:"vertices",isMultiple:!0,parser:zt},{code:92,name:"verticesCount",parser:ge},{code:[63,411],name:"indicatorColor",parser:ge},{code:70,name:"indicatorTransparency",parser:ge},{code:41,name:"bottomHeight",parser:ge},{code:40,name:"topHeight",parser:ge},{code:10,name:"verticalDirection",parser:zt},{code:1,name:"name",parser:ge},{code:91,name:"flag",parser:ge},{code:90,name:"state",parser:ge},{code:100,name:"subclassMarker",parser:ge},...Wr],OO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){LO(this,"parser",Qn(KV,jV))}};function NO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}LO(OO,"ForEntityName","SECTION");let qV={points:[],thickness:0,extrusionDirection:{x:0,y:0,z:1}},YV=[{code:210,name:"extrusionDirection",parser:zt},{code:39,name:"thickness",parser:ge},{code:[...vb(10,14)],name:"points",isMultiple:!0,parser:zt},{code:100,name:"subclassMarker",parser:ge},...Wr],DO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){NO(this,"parser",Qn(YV,qV))}};function FO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}NO(DO,"ForEntityName","SOLID");let XV=[{code:350,name:"historyObjectSoftId",parser:ge},{code:100,name:"subclassMarker",parser:ge},...S1("data"),{code:70,name:"version",parser:ge},{code:100},...Wr],BO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){FO(this,"parser",Qn(XV))}};FO(BO,"ForEntityName","3DSOLID");(Uo={})[Uo.NONE=0]="NONE",Uo[Uo.CLOSED=1]="CLOSED",Uo[Uo.PERIODIC=2]="PERIODIC",Uo[Uo.RATIONAL=4]="RATIONAL",Uo[Uo.PLANAR=8]="PLANAR",Uo[Uo.LINEAR=16]="LINEAR";function UO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let ZV={knotTolerance:1e-6,controlTolerance:1e-6,fitTolerance:1e-9,knotValues:[],controlPoints:[],fitPoints:[]},JV=[{code:11,name:"fitPoints",isMultiple:!0,parser:zt},{code:10,name:"controlPoints",isMultiple:!0,parser:zt},{code:41,name:"weights",isMultiple:!0,parser:ge},{code:40,name:"knots",isMultiple:!0,parser:ge},{code:13,name:"endTangent",parser:zt},{code:12,name:"startTangent",parser:zt},{code:44,name:"fitTolerance",parser:ge},{code:43,name:"controlTolerance",parser:ge},{code:42,name:"knotTolerance",parser:ge},{code:74,name:"numberOfFitPoints",parser:ge},{code:73,name:"numberOfControlPoints",parser:ge},{code:72,name:"numberOfKnots",parser:ge},{code:71,name:"degree",parser:ge},{code:70,name:"flag",parser:ge},{code:210,name:"normal",parser:zt},{code:100,name:"subclassMarker",parser:ge},...Wr],zO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){UO(this,"parser",Qn(JV,ZV))}};UO(zO,"ForEntityName","SPLINE");let Oy=class{parseEntity(e,n){let r={};for(;!e.isEOF();){if(n.code===0){e.rewind();break}switch(n.code){case 100:r.subclassMarker=n.value,n=e.next();break;case 2:r.name=n.value,n=e.next();break;case 5:r.handle=n.value,n=e.next();break;case 10:r.startPoint=hu(Er(e)),n=e.lastReadGroup;break;case 11:r.directionVector=hu(Er(e)),n=e.lastReadGroup;break;case 90:r.tableValue=n.value,n=e.next();break;case 91:r.rowCount=n.value,n=e.next();break;case 92:r.columnCount=n.value,n=e.next();break;case 93:r.overrideFlag=n.value,n=e.next();break;case 94:r.borderColorOverrideFlag=n.value,n=e.next();break;case 95:r.borderLineWeightOverrideFlag=n.value,n=e.next();break;case 96:r.borderVisibilityOverrideFlag=n.value,n=e.next();break;case 141:r.rowHeightArr??(r.rowHeightArr=[]),r.rowHeightArr.push(n.value),n=e.next();break;case 142:r.columnWidthArr??(r.columnWidthArr=[]),r.columnWidthArr.push(n.value),n=e.next();break;case 280:r.version=n.value,n=e.next();break;case 310:r.bmpPreview??(r.bmpPreview=""),r.bmpPreview+=n.value,n=e.next();break;case 330:r.ownerDictionaryId=n.value,n=e.next();break;case 342:r.tableStyleId=n.value,n=e.next();break;case 343:r.blockRecordHandle=n.value,n=e.next();break;case 170:r.attachmentPoint=n.value,n=e.next();break;case 171:r.cells??(r.cells=[]),r.cells.push(function(s,i){let o=!1,a=!1,l={};for(;!s.isEOF()&&i.code!==0&&!a;)switch(i.code){case 171:if(o){a=!0;continue}l.cellType=i.value,o=!0,i=s.next();break;case 172:l.flagValue=i.value,i=s.next();break;case 173:l.mergedValue=i.value,i=s.next();break;case 174:l.autoFit=i.value,i=s.next();break;case 175:l.borderWidth=i.value,i=s.next();break;case 176:l.borderHeight=i.value,i=s.next();break;case 91:l.overrideFlag=i.value,i=s.next();break;case 178:l.virtualEdgeFlag=i.value,i=s.next();break;case 145:l.rotation=i.value,i=s.next();break;case 345:l.fieldObjetId=i.value,i=s.next();break;case 340:l.blockTableRecordId=i.value,i=s.next();break;case 146:l.blockScale=i.value,i=s.next();break;case 177:l.blockAttrNum=i.value,i=s.next();break;case 7:l.textStyle=i.value,i=s.next();break;case 140:l.textHeight=i.value,i=s.next();break;case 170:l.attachmentPoint=i.value,i=s.next();break;case 92:l.extendedCellFlags=i.value,i=s.next();break;case 285:l.rightBorderVisibility=!!(i.value??!0),i=s.next();break;case 286:l.bottomBorderVisibility=!!(i.value??!0),i=s.next();break;case 288:l.leftBorderVisibility=!!(i.value??!0),i=s.next();break;case 289:l.topBorderVisibility=!!(i.value??!0),i=s.next();break;case 301:(function(c,u,d){for(;d.code!==304;)switch(d.code){case 301:case 93:case 90:case 94:d=u.next();break;case 1:c.text=d.value,d=u.next();break;case 300:c.attrText=d.value,d=u.next();break;case 302:c.text=d.value?d.value:c.text,d=u.next();break;default:console.log(`Ignore code: ${d.code}, value: ${d.value}`),d=u.next()}})(l,s,i),i=s.next();break;default:return l}return o=!1,a=!1,l}(e,n)),n=e.lastReadGroup;break;default:JE(r,n,e),n=e.next()}}return r}};function $O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}q_="ACAD_TABLE",(K_="ForEntityName")in Oy?Object.defineProperty(Oy,K_,{value:q_,enumerable:!0,configurable:!0,writable:!0}):Oy[K_]=q_;let QV=[{code:11,name:"xAxisDirection",parser:zt},{code:210,name:"extrusionDirection",parser:zt},{code:1,name:"text",parser:ge},{code:10,name:"position",parser:zt},{code:3,name:"styleName",parser:ge},{code:100,name:"subclassMarker",parser:ge},...Wr],VO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){$O(this,"parser",Qn(QV))}};$O(VO,"ForEntityName","TOLERANCE");let Ny=class{parseEntity(t,e){let n={};for(;e!=="EOF";){if(e.code===0){t.rewind();break}!function(r,s,i){if(i==="EOF")return!1;switch(i.code){case 0:return!1;case 8:r.layer=i.value;break;case 100:r.subclassMarker=i.value;break;case 10:r.viewportCenter=hu(Er(s));break;case 40:r.width=i.value;break;case 41:r.height=i.value;break;case 68:r.status=i.value;break;case 69:r.viewportId=i.value;break;case 12:r.displayCenter=Er(s);break;case 13:r.snapBase=Er(s);break;case 14:r.snapSpacing=Er(s);break;case 15:r.gridSpacing=Er(s);break;case 16:r.viewDirection=hu(Er(s));break;case 17:r.targetPoint=hu(Er(s));break;case 42:r.perspectiveLensLength=i.value;break;case 43:r.frontClipZ=i.value;break;case 44:r.backClipZ=i.value;break;case 45:r.viewHeight=i.value;break;case 50:r.snapAngle=i.value;break;case 51:r.viewTwistAngle=i.value;break;case 72:r.circleZoomPercent=i.value;break;case 331:r.frozenLayerIds??(r.frozenLayerIds=[]),r.frozenLayerIds.push(i.value);break;case 90:r.statusBitFlags=i.value;break;case 340:r.clippingBoundaryId=i.value;break;case 1:r.sheetName=i.value;break;case 281:r.renderMode=i.value;break;case 71:r.ucsPerViewport=i.value;break;case 110:r.ucsOrigin=hu(Er(s));break;case 111:r.ucsXAxis=hu(Er(s));break;case 112:r.ucsYAxis=hu(Er(s));break;case 345:r.ucsId=i.value;break;case 346:r.ucsBaseId=i.value;break;case 79:r.orthographicType=i.value;break;case 146:r.elevation=i.value;break;case 170:r.shadePlotMode=i.value;break;case 61:r.majorGridFrequency=i.value;break;case 332:r.backgroundId=i.value;break;case 333:r.shadePlotId=i.value;break;case 348:r.visualStyleId=i.value;break;case 292:r.isDefaultLighting=!!i.value;break;case 282:r.defaultLightingType=i.value;break;case 141:r.brightness=i.value;break;case 142:r.contrast=i.value;break;case 63:case 421:case 431:r.ambientLightColor=i.value;break;case 361:r.sunId=i.value;break;case 335:case 343:case 344:case 91:r.softPointer=i.value}return!0}(n,t,e)&&JE(n,e,t),e=t.next()}return n}};X_="VIEWPORT",(Y_="ForEntityName")in Ny?Object.defineProperty(Ny,Y_,{value:X_,enumerable:!0,configurable:!0,writable:!0}):Ny[Y_]=X_;(jc={})[jc.ShowImage=1]="ShowImage",jc[jc.ShowImageWhenNotAligned=2]="ShowImageWhenNotAligned",jc[jc.UseClippingBoundary=4]="UseClippingBoundary",jc[jc.Transparency=8]="Transparency";function HO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let eH={brightness:50,constrast:50,fade:0},tH=[{code:14,name:"boundary",isMultiple:!0,parser:zt},{code:91,name:"numberOfVertices",parser:ge},{code:71,name:"boundaryType",parser:ge},{code:360,name:"imageDefReactorHardId",parser:ge},{code:283,name:"fade",parser:ge},{code:282,name:"contrast",parser:ge},{code:281,name:"brightness",parser:ge},{code:280,name:"isClipping",parser:Pr},{code:70,name:"displayFlag",parser:ge},{code:340,name:"imageDefHardId",parser:ge},{code:13,name:"imageSize",parser:zt},{code:12,name:"vDirection",parser:zt},{code:11,name:"uDirection",parser:zt},{code:10,name:"position",parser:zt},{code:90,name:"classVersion",parser:ge},{code:100,name:"subclassMarker",parser:ge},...Wr],GO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){HO(this,"parser",Qn(tH,eH))}};function WO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}HO(GO,"ForEntityName","WIPEOUT");let nH=[{code:11,name:"direction",parser:zt},{code:10,name:"position",parser:zt},{code:100,name:"subclassMarker",parser:ge},...Wr],jO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){WO(this,"parser",Qn(nH))}};function KO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}WO(jO,"ForEntityName","XLINE");let rH={},sH=[{code:170,name:"multileaderType",parser:ge},{code:291,name:"doglegEnabled",parser:Pr},{code:40,name:"doglegLength",parser:ge},{code:172,name:"contentType",parser:ge},{code:3,name:"textContent",parser:ge},{code:12,name:"textAnchor",parser:zt},{code:344,name:"blockHandle",parser:ge},{code:15,name:"blockPosition",parser:zt},{code:302,name:"leaderSections",parser:function(t,e,n){let r,s={leaderLines:[]};for(;e.hasNext()&&(r=e.next()).code!==303;)switch(r.code){case 10:s.landingPoint=(r.value,Er(e));break;case 11:s.doglegVector=(r.value,Er(e));break;case 40:s.doglegLength=r.value;break;case 304:s.leaderLines.push(function(i,o,a){let l,c={vertices:[]};for(;o.hasNext()&&(l=o.next()).code!==305;)l.code===10&&c.vertices.push((l.value,Er(o)));return c}(0,e))}return s},isMultiple:!0},...Wr],qO=class{parseEntity(e,n){let r={};return this.parser(n,e,r),r}constructor(){KO(this,"parser",Qn(sH,rH))}};KO(qO,"ForEntityName","MULTILEADER");let iH=Object.fromEntries([jL,JL,nO,sO,oO,Ry,lO,uO,mO,vO,bO,wO,Ly,SO,eO,qO,CO,AO,IO,RO,OO,DO,BO,zO,Oy,XL,VO,fO,QE,Ny,GO,jO].map(t=>[t.ForEntityName,new t]));function YO(t,e){let n=[];for(;!ir(t,0,"EOF");){if(t.code===0){if(t.value==="ENDBLK"||t.value==="ENDSEC"){e.rewind();break}let r=iH[t.value];if(r){let s=t.value;t=e.next();let i=r.parseEntity(e,t);i.type=s,HL(i),n.push(i)}else e.debug&&console.warn(`Unsupported ENTITY type: ${t.value}`)}t=e.next()}return n}function oH(t,e){let n={};for(;!ir(t,0,"EOF")&&!ir(t,0,"ENDSEC");){if(ir(t,0,"BLOCK")){let r=aH(t=e.next(),e);HL(r),r.name&&(n[r.name]=r)}t=e.next()}return n}function aH(t,e){let n={};for(;!ir(t,0,"EOF");){if(ir(t,0,"ENDBLK")){for(t=e.next();!ir(t,0,"EOF");){if(ir(t,100,"AcDbBlockEnd"))return n;t=e.next()}break}switch(t.code){case 1:n.xrefPath=t.value;break;case 2:n.name=t.value;break;case 3:n.name2=t.value;break;case 5:n.handle=t.value;break;case 8:n.layer=t.value;break;case 10:n.position=Er(e);break;case 67:n.paperSpace=!!t.value&&t.value==1;break;case 70:t.value!==0&&(n.type=t.value);break;case 100:break;case 330:n.ownerHandle=t.value;break;case 0:n.entities=YO(t,e)}t=e.next()}return n}function lH(t,e){let n=null,r={};for(;!ir(t,0,"EOF")&&!ir(t,0,"ENDSEC");)t.code===9?n=t.value:t.code===10?r[n]=Er(e):r[n]=t.value,t=e.next();return r}(zo={})[zo.NOT_APPLICABLE=0]="NOT_APPLICABLE",zo[zo.KEEP_EXISTING=1]="KEEP_EXISTING",zo[zo.USE_CLONE=2]="USE_CLONE",zo[zo.XREF_VALUE_NAME=3]="XREF_VALUE_NAME",zo[zo.VALUE_NAME=4]="VALUE_NAME",zo[zo.UNMANGLE_NAME=5]="UNMANGLE_NAME";let eC=[{code:330,name:"ownerObjectId",parser:ge},{code:102,parser:$d},{code:102,parser:$d},{code:102,parser:$d},{code:5,name:"handle",parser:ge}],cH=[{code:3,name:"entries",parser:(t,e)=>{let n={name:t.value};return(t=e.next()).code===350?n.objectSoftId=t.value:t.code===360?n.objectHardId=t.value:e.rewind(),n},isMultiple:!0},{code:281,name:"recordCloneFlag",parser:ge},{code:280,name:"isHardOwned",parser:Pr},{code:100,name:"subclassMarker",parser:ge},...eC],uH=[{code:330,name:"imageDefReactorIdSoft",isMultiple:!0,parser:ge},{code:90,name:"version",parser:ge},{code:1,name:"fileName",parser:ge},{code:10,name:"size",parser:zt},{code:11,name:"sizeOfOnePixel",parser:zt},{code:280,name:"isLoaded",parser:ge},{code:281,name:"resolutionUnits",parser:ge},{code:100,name:"subclassMarker",parser:ge}];(Mh={})[Mh.NOUNIT=0]="NOUNIT",Mh[Mh.CENTIMETERS=2]="CENTIMETERS",Mh[Mh.INCH=5]="INCH";(i0={})[i0.PSLTSCALE=1]="PSLTSCALE",i0[i0.LIMCHECK=2]="LIMCHECK";(Ah={})[Ah.INCHES=0]="INCHES",Ah[Ah.MILLIMETERS=1]="MILLIMETERS",Ah[Ah.PIXELS=2]="PIXELS";($o={})[$o.LAST_SCREEN_DISPLAY=0]="LAST_SCREEN_DISPLAY",$o[$o.DRAWING_EXTENTS=1]="DRAWING_EXTENTS",$o[$o.DRAWING_LIMITS=2]="DRAWING_LIMITS",$o[$o.VIEW_SPECIFIED=3]="VIEW_SPECIFIED",$o[$o.WINDOW_SPECIFIED=4]="WINDOW_SPECIFIED",$o[$o.LAYOUT_INFORMATION=5]="LAYOUT_INFORMATION";(Kc={})[Kc.AS_DISPLAYED=0]="AS_DISPLAYED",Kc[Kc.WIREFRAME=1]="WIREFRAME",Kc[Kc.HIDDEN=2]="HIDDEN",Kc[Kc.RENDERED=3]="RENDERED";(Vo={})[Vo.DRAFT=0]="DRAFT",Vo[Vo.PREVIEW=1]="PREVIEW",Vo[Vo.NORMAL=2]="NORMAL",Vo[Vo.PRESENTATION=3]="PRESENTATION",Vo[Vo.MAXIMUM=4]="MAXIMUM",Vo[Vo.CUSTOM=5]="CUSTOM";let XO=[{code:333,name:"shadePlotId",parser:ge},{code:149,name:"imageOriginY",parser:ge},{code:148,name:"imageOriginX",parser:ge},{code:147,name:"scaleFactor",parser:ge},{code:78,name:"shadePlotCustomDPI",parser:ge},{code:77,name:"shadePlotResolution",parser:ge},{code:76,name:"shadePlotMode",parser:ge},{code:75,name:"standardScaleType",parser:ge},{code:7,name:"currentStyleSheet",parser:ge},{code:74,name:"plotType",parser:ge},{code:73,name:"plotRotation",parser:ge},{code:72,name:"plotPaperUnit",parser:ge},{code:70,name:"layoutFlag",parser:ge},{code:143,name:"printScaleDenominator",parser:ge},{code:142,name:"printScaleNumerator",parser:ge},{code:141,name:"windowAreaYMax",parser:ge},{code:140,name:"windowAreaXMax",parser:ge},{code:49,name:"windowAreaYMin",parser:ge},{code:48,name:"windowAreaXMin",parser:ge},{code:47,name:"plotOriginY",parser:ge},{code:46,name:"plotOriginX",parser:ge},{code:45,name:"paperHeight",parser:ge},{code:44,name:"paperWidth",parser:ge},{code:43,name:"marginTop",parser:ge},{code:42,name:"marginRight",parser:ge},{code:41,name:"marginBottom",parser:ge},{code:40,name:"marginLeft",parser:ge},{code:6,name:"plotViewName",parser:ge},{code:4,name:"paperSize",parser:ge},{code:2,name:"configName",parser:ge},{code:1,name:"pageSetupName",parser:ge},{code:100,name:"subclassMarker",parser:ge},...eC],dH=[{code:346,name:"orthographicUcsId",parser:ge},{code:345,name:"namedUcsId",parser:ge},{code:331,name:"viewportId",parser:ge},{code:330,name:"paperSpaceTableId",parser:ge},{code:76,name:"orthographicType",parser:ge},{code:17,name:"ucsYAxis",parser:zt},{code:16,name:"ucsXAxis",parser:zt},{code:13,name:"ucsOrigin",parser:zt},{code:146,name:"elevation",parser:ge},{code:15,name:"maxExtent",parser:zt},{code:14,name:"minExtent",parser:zt},{code:12,name:"insertionPoint",parser:zt},{code:11,name:"maxLimit",parser:zt},{code:10,name:"minLimit",parser:zt},{code:71,name:"tabOrder",parser:ge},{code:70,name:"controlFlag",parser:ge},{code:1,name:"layoutName",parser:ge},{code:100,name:"subclassMarker",parser:ge},...XO],hH=[{code:40,name:"wcsToOCSTransform",parser:LA},{code:40,name:"ocsToWCSTransform",parser:LA},{code:41,name:"backClippingDistance",parser:ge},{code:73,name:"isBackClipping",parser:Pr,pushContext:!0},{code:40,name:"frontClippingDistance",parser:ge},{code:72,name:"isFrontClipping",parser:Pr,pushContext:!0},{code:71,name:"isClipBoundaryDisplayed",parser:Pr},{code:11,name:"position",parser:zt},{code:210,name:"normal",parser:zt},{code:10,name:"boundaryVertices",parser:zt,isMultiple:!0},{code:70,name:"boundaryCount",parser:ge},{code:100,name:"subclassMarker",parser:ge},{code:100},...eC];function LA(t,e){let n=[];for(let r=0;r<3&&ir(t,40);++r){let s=[];for(let i=0;i<4&&ir(t,40);++i)s.push(t.value),t=e.next();n.push(s)}return e.rewind(),n}let fH={LAYOUT:dH,PLOTSETTINGS:XO,DICTIONARY:cH,SPATIAL_FILTER:hH,IMAGEDEF:uH};function pH(t,e){let n=[];for(;t.code!==0||!["EOF","ENDSEC"].includes(t.value);){let r=t.value,s=fH[r];if(t.code===0&&s!=null&&s.length){let i=Qn(s),o={name:r};i(t=e.next(),e,o)?(n.push(o),t=e.peek()):t=e.next()}else t=e.next()}return{byName:iV(n,({name:r})=>r)}}let Rp=[{code:100,name:"subclassMarker",parser:ge},{code:330,name:"ownerObjectId",parser:ge},{code:102,parser(t,e){for(;!ir(t,0,"EOF")&&!ir(t,102,"}");)t=e.next()}},{code:5,name:"handle",parser:ge}],mH=Qn([{code:310,name:"bmpPreview",parser:ge},{code:281,name:"scalability",parser:ge},{code:280,name:"explodability",parser:ge},{code:70,name:"insertionUnits",parser:ge},{code:340,name:"layoutObjects",parser:ge},{code:2,name:"name",parser:ge},{code:100,name:"subclassMarker",parser:ge},...Rp]),gH=[{name:"DIMPOST",code:3},{name:"DIMAPOST",code:4},{name:"DIMBLK_OBSOLETE",code:5},{name:"DIMBLK1_OBSOLETE",code:6},{name:"DIMBLK2_OBSOLETE",code:7},{name:"DIMSCALE",code:40,defaultValue:1},{name:"DIMASZ",code:41,defaultValue:.25},{name:"DIMEXO",code:42,defaultValue:.625,defaultValueImperial:.0625},{name:"DIMDLI",code:43,defaultValue:3.75,defaultValueImperial:.38},{name:"DIMEXE",code:44,defaultValue:2.25,defaultValueImperial:.28},{name:"DIMRND",code:45,defaultValue:0},{name:"DIMDLE",code:46,defaultValue:0},{name:"DIMTP",code:47,defaultValue:0},{name:"DIMTM",code:48,defaultValue:0},{name:"DIMTXT",code:140,defaultValue:2.5,defaultValueImperial:.28},{name:"DIMCEN",code:141,defaultValue:2.5,defaultValueImperial:.09},{name:"DIMTSZ",code:142,defaultValue:0},{name:"DIMALTF",code:143,defaultValue:25.4},{name:"DIMLFAC",code:144,defaultValue:1},{name:"DIMTVP",code:145,defaultValue:0},{name:"DIMTFAC",code:146,defaultValue:1},{name:"DIMGAP",code:147,defaultValue:.625,defaultValueImperial:.09},{name:"DIMALTRND",code:148,defaultValue:0},{name:"DIMTOL",code:71,defaultValue:0,defaultValueImperial:1},{name:"DIMLIM",code:72,defaultValue:0},{name:"DIMTIH",code:73,defaultValue:0,defaultValueImperial:1},{name:"DIMTOH",code:74,defaultValue:0,defaultValueImperial:1},{name:"DIMSE1",code:75,defaultValue:0},{name:"DIMSE2",code:76,defaultValue:0},{name:"DIMTAD",code:77,defaultValue:PA.Above,defaultValueImperial:PA.Center},{name:"DIMZIN",code:78,defaultValue:kh.Trailing,defaultValueImperial:kh.Feet},{name:"DIMAZIN",code:79,defaultValue:W$.None},{name:"DIMALT",code:170,defaultValue:0},{name:"DIMALTD",code:171,defaultValue:3,defaultValueImperial:2},{name:"DIMTOFL",code:172,defaultValue:1,defaultValueImperial:0},{name:"DIMSAH",code:173,defaultValue:0},{name:"DIMTIX",code:174,defaultValue:0},{name:"DIMSOXD",code:175,defaultValue:0},{name:"DIMCLRD",code:176,defaultValue:0},{name:"DIMCLRE",code:177,defaultValue:0},{name:"DIMCLRT",code:178,defaultValue:0},{name:"DIMADEC",code:179},{name:"DIMUNIT",code:270},{name:"DIMDEC",code:271,defaultValue:2,defaultValueImperial:4},{name:"DIMTDEC",code:272,defaultValue:2,defaultValueImperial:4},{name:"DIMALTU",code:273,defaultValue:2},{name:"DIMALTTD",code:274,defaultValue:2,defaultValueImperial:4},{name:"DIMAUNIT",code:275,defaultValue:0},{name:"DIMFRAC",code:276,defaultValue:0},{name:"DIMLUNIT",code:277,defaultValue:2},{name:"DIMDSEP",code:278,defaultValue:",",defaultValueImperial:"."},{name:"DIMJUST",code:280,defaultValue:j$.Center},{name:"DIMSD1",code:281,defaultValue:0},{name:"DIMSD2",code:282,defaultValue:0},{name:"DIMTOLJ",code:283,defaultValue:K$.Center},{name:"DIMTZIN",code:284,defaultValue:kh.Trailing,defaultValueImperial:kh.Feet},{name:"DIMALTZ",code:285,defaultValue:kh.Trailing},{name:"DIMALTTZ",code:286,defaultValue:kh.Trailing},{name:"DIMFIT",code:287},{name:"DIMUPT",code:288,defaultValue:0},{name:"DIMATFIT",code:289,defaultValue:3},{name:"DIMTXSTY",code:340},{name:"DIMLDRBLK",code:341},{name:"DIMBLK",code:342},{name:"DIMBLK1",code:343},{name:"DIMBLK2",code:344},{name:"DIMLWD",code:371,defaultValue:-2},{name:"DIMLWD",code:372,defaultValue:-2}],vH=Qn([...gH.map(t=>({...t,parser:ge})),{code:70,name:"standardFlag",parser:ge},{code:2,name:"name",parser:ge},{code:100,name:"subclassMarker",parser:ge},{code:105,name:"handle",parser:ge},...Rp.filter(t=>t.code!==5)]),yH=Qn([{code:347,name:"materialObjectId",parser:ge},{code:390,name:"plotStyleNameObjectId",parser:ge},{code:370,name:"lineweight",parser:ge},{code:290,name:"isPlotting",parser:Pr},{code:6,name:"lineType",parser:ge},{code:62,name:"colorIndex",parser:ge},{code:70,name:"standardFlag",parser:ge},{code:2,name:"name",parser:ge},{code:100,name:"subclassMarker",parser:ge},...Rp]);(qc={})[qc.NONE=0]="NONE",qc[qc.AbsoluteRotation=1]="AbsoluteRotation",qc[qc.TextEmbedded=2]="TextEmbedded",qc[qc.ShapeEmbedded=4]="ShapeEmbedded";let bH=Qn([{code:9,name:"text",parser:ge},{code:45,name:"offsetY",parser:ge},{code:44,name:"offsetX",parser:ge},{code:50,name:"rotation",parser:ge},{code:46,name:"scale",parser:ge},{code:340,name:"styleObjectId",parser:ge},{code:75,name:"shapeNumber",parser:ge},{code:74,name:"elementTypeFlag",parser:ge},{code:49,name:"elementLength",parser:ge}],{elementTypeFlag:0,elementLength:0}),_H=Qn([{code:49,name:"pattern",parser(t,e){let n={};return bH(t,e,n),n},isMultiple:!0},{code:40,name:"totalPatternLength",parser:ge},{code:73,name:"numberOfLineTypes",parser:ge},{code:72,parser:ge},{code:3,name:"description",parser:ge},{code:70,name:"standardFlag",parser:ge},{code:2,name:"name",parser:ge},{code:100,name:"subclassMarker",parser:ge},...Rp]),wH=Qn([{code:1e3,name:"extendedFont",parser:ge},{code:1001},{code:4,name:"bigFont",parser:ge},{code:3,name:"font",parser:ge},{code:42,name:"lastHeight",parser:ge},{code:71,name:"textGenerationFlag",parser:ge},{code:50,name:"obliqueAngle",parser:ge},{code:41,name:"widthFactor",parser:ge},{code:40,name:"fixedTextHeight",parser:ge},{code:70,name:"standardFlag",parser:ge},{code:2,name:"name",parser:ge},{code:100,name:"subclassMarker",parser:ge},...Rp]),xH=Qn([{code:[63,421,431],name:"ambientColor",parser:ge},{code:142,name:"contrast",parser:ge},{code:141,name:"brightness",parser:ge},{code:282,name:"defaultLightingType",parser:ge},{code:292,name:"isDefaultLightingOn",parser:Pr},{code:348,name:"visualStyleObjectId",parser:ge},{code:333,name:"shadePlotObjectId",parser:ge},{code:332,name:"backgroundObjectId",parser:ge},{code:61,name:"majorGridLines",parser:ge},{code:170,name:"shadePlotSetting",parser:ge},{code:146,name:"elevation",parser:ge},{code:79,name:"orthographicType",parser:ge},{code:112,name:"ucsYAxis",parser:zt},{code:111,name:"ucsXAxis",parser:zt},{code:110,name:"ucsOrigin",parser:zt},{code:74,name:"ucsIconSetting",parser:ge},{code:71,name:"viewMode",parser:ge},{code:281,name:"renderMode",parser:ge},{code:1,name:"styleSheet",parser:ge},{code:[331,441],name:"frozenLayers",parser:ge,isMultiple:!0},{code:72,name:"circleSides",parser:ge},{code:51,name:"viewTwistAngle",parser:ge},{code:50,name:"snapRotationAngle",parser:ge},{code:45,name:"viewHeight",parser:ge},{code:44,name:"backClippingPlane",parser:ge},{code:43,name:"frontClippingPlane",parser:ge},{code:42,name:"lensLength",parser:ge},{code:17,name:"viewTarget",parser:zt},{code:16,name:"viewDirectionFromTarget",parser:zt},{code:15,name:"gridSpacing",parser:zt},{code:14,name:"snapSpacing",parser:zt},{code:13,name:"snapBasePoint",parser:zt},{code:12,name:"center",parser:zt},{code:11,name:"upperRightCorner",parser:zt},{code:10,name:"lowerLeftCorner",parser:zt},{code:70,name:"standardFlag",parser:ge},{code:2,name:"name",parser:ge},{code:100,name:"subclassMarker",parser:ge},...Rp]),SH={BLOCK_RECORD:mH,DIMSTYLE:vH,LAYER:yH,LTYPE:_H,STYLE:wH,VPORT:xH},EH=Qn([{code:70,name:"maxNumberOfEntries",parser:ge},{code:100,name:"subclassMarker",parser:ge},{code:330,name:"ownerObjectId",parser:ge},{code:102},{code:360,isMultiple:!0},{code:102},{code:5,name:"handle",parser:ge},{code:2,name:"name",parser:ge}]);function CH(t,e){var n;let r={};for(;!ir(t,0,"EOF")&&!ir(t,0,"ENDSEC");){if(ir(t,0,"TABLE")){t=e.next();let s={entries:[]};EH(t,e,s),r[s.name]=s}if(ir(t,0)&&!ir(t,0,"ENDTAB")){let s=t.value;t=e.next();let i=SH[s];if(!i){e.debug&&console.warn(`parseTable: Invalid table name '${s}'`),t=e.next();continue}let o={};i(t,e,o),(n=r[s])==null||n.entries.push(o)}t=e.next()}return r}function rm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let OA=class{next(){if(!this.hasNext())return this._eof?this.debug&&console.warn("Cannot call 'next' after EOF group has been read"):this.debug&&console.warn("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]),{code:0,value:"EOF"};let e=parseInt(this._data[this._pointer++],10),n=NA(e,this._data[this._pointer++],this.debug),r={code:e,value:n};return ir(r,0,"EOF")&&(this._eof=!0),this.lastReadGroup=r,r}peek(){if(!this.hasNext())throw this._eof?Error("Cannot call 'next' after EOF group has been read"):Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);let e={code:parseInt(this._data[this._pointer]),value:0};return e.value=NA(e.code,this._data[this._pointer+1],this.debug),e}rewind(e){e=e||1,this._pointer=this._pointer-2*e}hasNext(){return!this._eof&&!(this._pointer>this._data.length-2)}isEOF(){return this._eof}constructor(e,n=!1){rm(this,"_data",void 0),rm(this,"debug",void 0),rm(this,"_pointer",void 0),rm(this,"_eof",void 0),rm(this,"lastReadGroup",void 0),this._data=e,this.debug=n,this.lastReadGroup={code:0,value:0},this._pointer=0,this._eof=!1}};function NA(t,e,n=!1){return t<=9?e:t>=10&&t<=59?parseFloat(e.trim()):t>=60&&t<=99?parseInt(e.trim()):t>=100&&t<=109?e:t>=110&&t<=149?parseFloat(e.trim()):t>=160&&t<=179?parseInt(e.trim()):t>=210&&t<=239?parseFloat(e.trim()):t>=270&&t<=289?parseInt(e.trim()):t>=290&&t<=299?function(r){if(r==="0")return!1;if(r==="1")return!0;throw TypeError("String '"+r+"' cannot be cast to Boolean type")}(e.trim()):t>=300&&t<=369?e:t>=370&&t<=389?parseInt(e.trim()):t>=390&&t<=399?e:t>=400&&t<=409?parseInt(e.trim()):t>=410&&t<=419?e:t>=420&&t<=429?parseInt(e.trim()):t>=430&&t<=439?e:t>=440&&t<=459?parseInt(e.trim()):t>=460&&t<=469?parseFloat(e.trim()):t>=470&&t<=481||t===999||t>=1e3&&t<=1009?e:t>=1010&&t<=1059?parseFloat(e.trim()):t>=1060&&t<=1071?parseInt(e.trim()):(n&&console.warn("WARNING: Group code does not have a defined type: %j",{code:t,value:e}),e)}function Yx(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let TH=class{constructor(){Yx(this,"encoding","utf-8"),Yx(this,"encodingFailureFatal",!1)}},MH=class extends EventTarget{parseSync(e,n=!1){let r=new OA(e.split(/\r\n|\r|\n/g),n);if(!r.hasNext())throw Error("Empty file");return this.parseAll(r)}parseStream(e){let n="",r=this;return new Promise((s,i)=>{e.on("data",o=>{n+=o}),e.on("end",()=>{try{let o=n.split(/\r\n|\r|\n/g),a=new OA(o);if(!a.hasNext())throw Error("Empty file");s(r.parseAll(a))}catch(o){i(o)}}),e.on("error",o=>{i(o)})})}async parseFromUrl(e,n){let r=await fetch(e,n);if(!r.body)return null;let s=r.body.getReader(),i="";for(;;){let{done:o,value:a}=await s.read();if(o){i+=this._decoder.decode(new ArrayBuffer(0),{stream:!1});break}i+=this._decoder.decode(a,{stream:!0})}return this.parseSync(i)}parseAll(e){let n={header:{},blocks:{},entities:[],tables:{},objects:{byName:{},byTree:void 0}},r=e.next();for(;!ir(r,0,"EOF");)ir(r,0,"SECTION")&&(ir(r=e.next(),2,"HEADER")?(r=e.next(),n.header=lH(r,e)):ir(r,2,"BLOCKS")?(r=e.next(),n.blocks=oH(r,e)):ir(r,2,"ENTITIES")?(r=e.next(),n.entities=YO(r,e)):ir(r,2,"TABLES")?(r=e.next(),n.tables=CH(r,e)):ir(r,2,"OBJECTS")&&(r=e.next(),n.objects=pH(r,e))),r=e.next();return n}constructor(e=new TH){super(),Yx(this,"_decoder",void 0),this._decoder=new TextDecoder(e.encoding,{fatal:e.encodingFailureFatal})}};var ZO=(t=>(t[t.DecimalDegrees=0]="DecimalDegrees",t[t.DegreesMinutesSeconds=1]="DegreesMinutesSeconds",t[t.Gradians=2]="Gradians",t[t.Radians=3]="Radians",t[t.SurveyorsUnits=4]="SurveyorsUnits",t))(ZO||{});let $m=class JO{static get instance(){return this._instance||(this._instance=new JO),this._instance}constructor(){this._blocks=new Map}createKey(e,n){return`${e}_${n}`}set(e,n){return n=n.fastDeepClone(),this._blocks.set(e,n),n}get(e){let n=this._blocks.get(e);return n&&(n=n.fastDeepClone()),n}has(e){return this._blocks.has(e)}clear(){this._blocks.clear()}draw(e,n,r,s=!0,i,o){const a=[];if(n!=null){const l=this.createKey(n.name,r);let c;if(this.has(l))c=this.get(l);else{const u=n.newIterator();for(const d of u)d.color.isByBlock&&r?(DA.copy(d.color),d.color.color=r,this.addEntity(d,a,e),d.color.copy(DA)):this.addEntity(d,a,e);c=e.group(a),c&&s&&this.set(l,c)}return c&&i&&(c.applyMatrix(i),o&&(o.x!=0||o.y!=0||o.z!=1)&&(i.setFromExtrusionDirection(o),c.applyMatrix(i))),c}else return e.group(a)}addEntity(e,n,r){const s=e.draw(r);s&&(this.attachEntityInfo(s,e),n.push(s))}attachEntityInfo(e,n){e.objectId=n.objectId,e.ownerId=n.ownerId,e.layerName=n.layer,e.visible=n.visibility}};const DA=new Gu,Xx="Continuous",J_="ByLayer",AH="ByBlock";var mf=(t=>(t[t.EndPoint=1]="EndPoint",t[t.MidPoint=2]="MidPoint",t[t.Center=3]="Center",t[t.Node=4]="Node",t[t.Quadrant=5]="Quadrant",t[t.Insertion=7]="Insertion",t[t.Perpendicular=8]="Perpendicular",t[t.Tangent=9]="Tangent",t[t.Nearest=10]="Nearest",t[t.Centroid=11]="Centroid",t))(mf||{}),QO=(t=>(t[t.Undefined=0]="Undefined",t[t.Inches=1]="Inches",t[t.Feet=2]="Feet",t[t.Miles=3]="Miles",t[t.Millimeters=4]="Millimeters",t[t.Centimeters=5]="Centimeters",t[t.Meters=6]="Meters",t[t.Kilometers=7]="Kilometers",t[t.Microinches=8]="Microinches",t[t.Mils=9]="Mils",t[t.Yards=10]="Yards",t[t.Angstroms=11]="Angstroms",t[t.Nanometers=12]="Nanometers",t[t.Microns=13]="Microns",t[t.Decimeters=14]="Decimeters",t[t.Dekameters=15]="Dekameters",t[t.Hectometers=16]="Hectometers",t[t.Gigameters=17]="Gigameters",t[t.Astronomical=18]="Astronomical",t[t.LightYears=19]="LightYears",t[t.Parsecs=20]="Parsecs",t[t.USSurveyFeet=21]="USSurveyFeet",t[t.USSurveyInch=22]="USSurveyInch",t[t.USSurveyYard=23]="USSurveyYard",t[t.USSurveyMile=24]="USSurveyMile",t[t.Max=24]="Max",t))(QO||{});let tC=class{constructor(e){this.i=0,this._records=e,this._keys=Array.from(e.keys())}[Symbol.iterator](){return this}next(){for(;this.i<this._keys.length;){const e=this._records.get(this._keys[this.i]);return this.i+=1,{value:e,done:!1}}return{value:null,done:!0}}};const eN="Load Database";let to=class extends H${constructor(e,n){super(e.stage),this.data=e,this.progress=n}async run(e){const n=XE.getInstance().getEntry(eN),r=Date.now();this.progress&&await this.progress(this.data.progress.value,this.data.stage,"START");const s=await this.data.task(e);if(this.progress){const i=s.data;await this.progress(this.data.progress.value,this.data.stage,"END",i),this.data.progress.value+=this.data.step,this.data.progress.value>100&&(this.data.progress.value=100)}return n&&(n.data[this.name]=Date.now()-r),s}},tN=class{constructor(e={}){this.config=e}async read(e,n,r,s){const i={name:eN,data:{total:0},format(){let c="";return Object.keys(this.data).forEach(u=>{u!=="total"&&(c+=`- ${u}: ${this.data[u]} ms
`)}),c+=`- total: ${this.data.total} ms`,c}};XE.getInstance().collect(i),this.progress=s;const o={value:0},a=new G$;a.setCompleteCallback(()=>this.onFinished()),a.setErrorCallback(c=>this.onError(c)),a.addTask(new to({stage:"START",step:1,progress:o,task:async c=>c},s)),a.addTask(new to({stage:"PARSE",step:5,progress:o,task:async c=>({model:await this.parse(c)})},s)),a.addTask(new to({stage:"FONT",step:5,progress:o,task:async c=>{const u=this.getFonts(c.model);return{model:c.model,data:u}}},s)),a.addTask(new to({stage:"LTYPE",step:1,progress:o,task:async c=>(this.processLineTypes(c.model,n),c)},s)),a.addTask(new to({stage:"STYLE",step:1,progress:o,task:async c=>(this.processTextStyles(c.model,n),c)},s)),a.addTask(new to({stage:"DIMSTYLE",step:1,progress:o,task:async c=>(this.processDimStyles(c.model,n),c)},s)),a.addTask(new to({stage:"LAYER",step:1,progress:o,task:async c=>(this.processLayers(c.model,n),c)},s)),a.addTask(new to({stage:"VPORT",step:1,progress:o,task:async c=>(this.processViewports(c.model,n),c)},s)),a.addTask(new to({stage:"HEADER",step:1,progress:o,task:async c=>(this.processHeader(c.model,n),c)},s)),a.addTask(new to({stage:"BLOCK_RECORD",step:5,progress:o,task:async c=>(this.processBlockTables(c.model,n),c)},s)),a.addTask(new to({stage:"OBJECT",step:5,progress:o,task:async c=>(this.processObjects(c.model,n),c)},s)),a.addTask(new to({stage:"BLOCK",step:5,progress:o,task:async c=>(await this.processBlocks(c.model,n),c)},s)),a.addTask(new to({stage:"ENTITY",step:100,progress:o,task:async c=>(await this.processEntities(c.model,n,r,o,s),c)},s)),a.addTask(new to({stage:"END",step:0,progress:o,task:async c=>c},s));const l=Date.now();await a.run(e),i.data.total=Date.now()-l}onError(e){if(this.progress){const n=e.task;this.progress(n.data.progress.value,n.data.stage,"ERROR",void 0,e)}console.error(`Error occurred in conversion stage '${e.task.name}': `,e.error),e.task.name!="ENTITY"&&this.onFinished()}onFinished(){this.progress&&(this.progress(100,"END","END"),$m.instance.clear())}async parse(e,n){throw new Error("Not impelemented yet!")}getFonts(e){throw new Error("Not impelemented yet!")}processLineTypes(e,n){throw new Error("Not impelemented yet!")}processTextStyles(e,n){throw new Error("Not impelemented yet!")}processDimStyles(e,n){throw new Error("Not impelemented yet!")}processLayers(e,n){throw new Error("Not impelemented yet!")}processViewports(e,n){throw new Error("Not impelemented yet!")}processHeader(e,n){throw new Error("Not impelemented yet!")}processBlockTables(e,n){throw new Error("Not impelemented yet!")}processObjects(e,n){throw new Error("Not impelemented yet!")}processBlocks(e,n){throw new Error("Not impelemented yet!")}processEntities(e,n,r,s,i){throw new Error("Not impelemented yet!")}};const bi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let FA=1234567;const nN=Math.PI/180,rN=180/Math.PI;function kH(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(bi[t&255]+bi[t>>8&255]+bi[t>>16&255]+bi[t>>24&255]+"-"+bi[e&255]+bi[e>>8&255]+"-"+bi[e>>16&15|64]+bi[e>>24&255]+"-"+bi[n&63|128]+bi[n>>8&255]+"-"+bi[n>>16&255]+bi[n>>24&255]+bi[r&255]+bi[r>>8&255]+bi[r>>16&255]+bi[r>>24&255]).toLowerCase()}function fu(t,e,n){return Math.max(e,Math.min(n,t))}function sN(t,e){return(t%e+e)%e}function IH(t,e,n,r,s){return r+(t-e)*(s-r)/(n-e)}function PH(t,e,n){return t!==e?(n-t)/(e-t):0}function iN(t,e,n){return(1-n)*t+n*e}function RH(t,e,n,r){return iN(t,e,1-Math.exp(-n*r))}function LH(t,e=1){return e-Math.abs(sN(t,e*2)-e)}function OH(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function NH(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function DH(t,e){return t+Math.floor(Math.random()*(e-t+1))}function FH(t,e){return t+Math.random()*(e-t)}function BH(t){return t*(.5-Math.random())}function UH(t){t!==void 0&&(FA=t);let e=FA+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function zH(t){return t*nN}function $H(t){return t*rN}function VH(t){return(t&t-1)===0&&t!==0}function HH(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function GH(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function Dy(t){const e=Math.PI*2;return(t%e+e)%e}function WH(t,e,n){return t>e&&t<n||t>n&&t<e}function jH(t,e,n,r=!1){return t=Dy(t),e=Dy(e),n=Dy(n),r?e>n?t<=e&&t>=n:t<=e||t>=n:e<n?t>=e&&t<=n:t>=e||t<=n}function oN(t){return t=Math.abs(t),t<1?0:Math.ceil(Math.log10(Math.abs(t)+1))}function KH(t,e=1e-7){const n=oN(t);return Math.max(Math.pow(10,n)*e,e)}const vr={DEG2RAD:nN,RAD2DEG:rN,generateUUID:kH,clamp:fu,euclideanModulo:sN,mapLinear:IH,inverseLerp:PH,lerp:iN,damp:RH,pingpong:LH,smoothstep:OH,smootherstep:NH,randInt:DH,randFloat:FH,randFloatSpread:BH,seededRandom:UH,degToRad:zH,radToDeg:$H,isPowerOfTwo:VH,ceilPowerOfTwo:HH,floorPowerOfTwo:GH,normalizeAngle:Dy,isBetween:WH,isBetweenAngle:jH,intPartLength:oN,relativeEps:KH},Zx=class aN{constructor(e,n){this.x=0,this.y=0;const r=+(e!==void 0)+ +(n!==void 0);if(r!==0){if(r===1&&e instanceof Array){this.x=e[0],this.y=e[1];return}if(r===1){const{x:s,y:i}=e;this.x=s,this.y=i;return}if(r===2){this.x=e,this.y=n;return}throw Qo.ILLEGAL_PARAMETERS}}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new aN(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix2d(e){const n=this.x,r=this.y,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6],this.y=s[1]*n+s[4]*r+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Math.max(-1,Math.min(1,r)))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}rotateAround(e,n){const r=Math.cos(n),s=Math.sin(n),i=this.x-e.x,o=this.y-e.y;return this.x=i*r-o*s+e.x,this.y=i*s+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}relativeEps(e=1e-7){return Math.min(vr.relativeEps(this.x,e),vr.relativeEps(this.y,e))}*[Symbol.iterator](){yield this.x,yield this.y}};Zx.EMPTY=Object.freeze(new Zx(0,0));let is=Zx;const Jx=class lN{constructor(e,n,r,s,i,o,a,l,c){this.elements=[1,0,0,0,1,0,0,0,1],e!=null&&n!=null&&r!=null&&s!=null&&i!=null&&o!=null&&a!=null&&l!=null&&c!=null&&this.set(e,n,r,s,i,o,a,l,c)}set(e,n,r,s,i,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=s,u[2]=a,u[3]=n,u[4]=i,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,s=n.elements,i=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],h=r[2],f=r[5],m=r[8],v=s[0],y=s[3],g=s[6],S=s[1],_=s[4],w=s[7],E=s[2],C=s[5],T=s[8];return i[0]=o*v+a*S+l*E,i[3]=o*y+a*_+l*C,i[6]=o*g+a*w+l*T,i[1]=c*v+u*S+d*E,i[4]=c*y+u*_+d*C,i[7]=c*g+u*w+d*T,i[2]=h*v+f*S+m*E,i[5]=h*y+f*_+m*C,i[8]=h*g+f*w+m*T,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],s=e[2],i=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-r*i*u+r*a*l+s*i*c-s*o*l}invert(){const e=this.elements,n=e[0],r=e[1],s=e[2],i=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*i,f=c*i-o*l,m=n*d+r*h+s*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/m;return e[0]=d*v,e[1]=(s*c-u*r)*v,e[2]=(a*r-s*o)*v,e[3]=h*v,e[4]=(u*n-s*l)*v,e[5]=(s*i-a*n)*v,e[6]=f*v,e[7]=(r*l-c*n)*v,e[8]=(o*n-r*i)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e.elements[0]=n[0],e.elements[1]=n[3],e.elements[2]=n[6],e.elements[3]=n[1],e.elements[4]=n[4],e.elements[5]=n[7],e.elements[6]=n[2],e.elements[7]=n[5],e.elements[8]=n[8],this}setUvTransform(e,n,r,s,i,o,a){const l=Math.cos(i),c=Math.sin(i);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-s*c,s*l,-s*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(Q_.makeScale(e,n)),this}rotate(e){return this.premultiply(Q_.makeRotation(-e)),this}translate(e,n){return this.premultiply(Q_.makeTranslation(e,n)),this}makeTranslation(e,n){return e instanceof is?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let s=0;s<9;s++)if(n[s]!==r[s])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new lN().fromArray(this.elements)}};Jx.IDENTITY=Object.freeze(new Jx);let nC=Jx;const Q_=new nC,Ih=1e-6,Vs=2*Math.PI,cN={x:0,y:0,z:0};let uN=class{constructor(){this.equalPointTol=Ih,this.equalVectorTol=Ih}equalPoint2d(e,n){return new is(e).sub(n).length()<this.equalPointTol}equalPoint3d(e,n){return new qt(e).sub(n).length()<this.equalPointTol}static equalToZero(e,n=Ih){return e<n&&e>-n}static equal(e,n,r=Ih){return Math.abs(e-n)<r}static great(e,n,r=Ih){return e-n>r}static less(e,n,r=Ih){return e-n<r}};const dN=new uN;function hN(t,e,n=!1){const r=t.x,s=t.y;let i=!1;const o=e.length;for(let a=0,l=o-1;a<o;l=a++){const c=e[a].x,u=e[a].y,d=e[l].x,h=e[l].y;let f=u>s!=h>s;n&&(f=u>=s!=h>=s),f&&r<(d-c)*(s-u)/(h-u)+c&&(i=!i)}return i}function qH(t,e){if(t.length===0||e.length===0)return!1;const n=new ds().setFromPoints(t),r=new ds().setFromPoints(e);if(!n.intersectsBox(r))return!1;for(let s=0;s<t.length;){if(hN(t[s],e,!0))return!0;s<t.length-1&&dN.equalPoint2d(t[s+1],t[s])&&++s,++s}return!1}const fN={isPointInPolygon:hN,isPolygonIntersect:qH};function YH(t,e){const n=[],r=e-1,s=t;for(let i=0;i<=s;i++)n.push(0);for(let i=1;i<=r-s;i++)n.push(i);for(let i=0;i<=s;i++)n.push(r-s+1);return n}function XH(t,e){const n=e.length-1,r=t,s=[0];let i=0;for(let a=1;a<=n;a++){const l=e[a][0]-e[a-1][0],c=e[a][1]-e[a-1][1],u=e[a][2]-e[a-1][2],d=Math.sqrt(l*l+c*c+u*u);i+=d,s.push(i)}const o=[];for(let a=0;a<=r;a++)o.push(0);for(let a=1;a<=n-r;a++){const l=s[a]/i;o.push(l*(n-r+1))}for(let a=0;a<=r;a++)o.push(n-r+1);return o}function ZH(t,e){const n=e.length-1,r=t,s=[0];let i=0;for(let a=1;a<=n;a++){const l=e[a][0]-e[a-1][0],c=e[a][1]-e[a-1][1],u=e[a][2]-e[a-1][2],d=Math.sqrt(l*l+c*c+u*u),h=Math.sqrt(d);i+=h,s.push(i)}const o=[];for(let a=0;a<=r;a++)o.push(0);for(let a=1;a<=n-r;a++){const l=s[a]/i;o.push(l*(n-r+1))}for(let a=0;a<=r;a++)o.push(n-r+1);return o}function Qx(t,e,n,r){if(e===0)return n>=r[t]&&n<r[t+1]?1:0;const s=r[t+e]-r[t],i=r[t+e+1]-r[t+1],o=s>1e-10?(n-r[t])/s:0,a=i>1e-10?(r[t+e+1]-n)/i:0;return o*Qx(t,e-1,n,r)+a*Qx(t+1,e-1,n,r)}function Fy(t,e,n,r,s){const i=r.length-1,o=e;if(t=Math.max(n[o],Math.min(n[i+1],t)),Math.abs(t-n[i+1])<1e-8)return[...r[i]];if(Math.abs(t-n[o])<1e-8)return[...r[0]];const a=[0,0,0];let l=0;for(let c=0;c<=i;c++){const u=Qx(c,o,t,n),d=s[c]*u;a[0]+=r[c][0]*d,a[1]+=r[c][1]*d,a[2]+=r[c][2]*d,l+=d}if(l<1e-10){const c=n[n.length-o-1];if(Math.abs(t-c)<1e-8)return[...r[i]];if(Math.abs(t-n[o])<1e-8)return[...r[0]]}return l>1e-10&&(a[0]/=l,a[1]/=l,a[2]/=l),a}function JH(t,e,n,r){const s=t,i=e[s],o=e[e.length-s-1];let a=0;const l=1e3,c=(o-i)/l;let u=Fy(i,t,e,n,r);for(let v=1;v<=l;v++){const y=i+v*c,g=Fy(y,t,e,n,r),S=g[0]-u[0],_=g[1]-u[1],w=g[2]-u[2];a+=Math.sqrt(S*S+_*_+w*w),u=g}const d=Fy(o,t,e,n,r),h=d[0]-u[0],f=d[1]-u[1],m=d[2]-u[2];return a+=Math.sqrt(h*h+f*f+m*m),a}let cg=class pN{constructor(e=0,n=0,r=0,s=1){this._x=e,this._y=n,this._z=r,this._w=s}static slerpFlat(e,n,r,s,i,o,a){let l=r[s+0],c=r[s+1],u=r[s+2],d=r[s+3];const h=i[o+0],f=i[o+1],m=i[o+2],v=i[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(a===1){e[n+0]=h,e[n+1]=f,e[n+2]=m,e[n+3]=v;return}if(d!==v||l!==h||c!==f||u!==m){let y=1-a;const g=l*h+c*f+u*m+d*v,S=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){const E=Math.sqrt(_),C=Math.atan2(E,g*S);y=Math.sin(y*C)/E,a=Math.sin(a*C)/E}const w=a*S;if(l=l*y+h*w,c=c*y+f*w,u=u*y+m*w,d=d*y+v*w,y===1-a){const E=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=E,c*=E,u*=E,d*=E}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,r,s,i,o){const a=r[s],l=r[s+1],c=r[s+2],u=r[s+3],d=i[o],h=i[o+1],f=i[o+2],m=i[o+3];return e[n]=a*m+u*d+l*f-c*h,e[n+1]=l*m+u*h+c*d-a*f,e[n+2]=c*m+u*f+a*h-l*d,e[n+3]=u*m-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,s){return this._x=e,this._y=n,this._z=r,this._w=s,this._onChangeCallback(),this}clone(){return new pN(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e.x,s=e.y,i=e.z,o=e.order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(s/2),d=a(i/2),h=l(r/2),f=l(s/2),m=l(i/2);switch(o){case"XYZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"YXZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"ZXY":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"ZYX":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"YZX":this._x=h*u*d+c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d-h*f*m;break;case"XZY":this._x=h*u*d-c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d+h*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,s=Math.sin(r);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],s=n[4],i=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],d=n[10],h=r+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(i-c)*f,this._z=(o-s)*f}else if(r>a&&r>d){const f=2*Math.sqrt(1+r-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(s+o)/f,this._z=(i+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-r-d);this._w=(i-c)/f,this._x=(s+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-r-a);this._w=(o-s)/f,this._x=(i+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(fu(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const s=Math.min(1,n/r);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,s=e._y,i=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+o*a+s*c-i*l,this._y=s*u+o*l+i*a-r*c,this._z=i*u+o*c+r*l-s*a,this._w=o*u-r*a-s*l-i*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,s=this._y,i=this._z,o=this._w;let a=o*e._w+r*e._x+s*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=s,this._z=i,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-n;return this._w=f*o+n*this._w,this._x=f*r+n*this._x,this._y=f*s+n*this._y,this._z=f*i+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c;return this._w=o*d+this._w*h,this._x=r*d+this._x*h,this._y=s*d+this._y*h,this._z=i*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),s=Math.sqrt(1-r),i=Math.sqrt(r);return this.set(s*Math.sin(e),s*Math.cos(e),i*Math.sin(n),i*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}};const Co=class mN{constructor(e,n,r){this.x=0,this.y=0,this.z=0;const s=+(e!==void 0)+ +(n!==void 0)+ +(r!==void 0);if(s!==0){if(s===1&&e instanceof Array){this.x=e[0],this.y=e[1],this.z=e[2];return}if(s===1){const{x:i,y:o,z:a}=e;this.x=i,this.y=o,this.z=a||0;return}if(s===3){this.x=e,this.y=n,this.z=r;return}throw Qo.ILLEGAL_PARAMETERS}}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new mN(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z||0,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z||0,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(BA.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(BA.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,s=this.z,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6]*s,this.y=i[1]*n+i[4]*r+i[7]*s,this.z=i[2]*n+i[5]*r+i[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix3d(e){const n=this.x,r=this.y,s=this.z,i=e.elements,o=1/(i[3]*n+i[7]*r+i[11]*s+i[15]);return this.x=(i[0]*n+i[4]*r+i[8]*s+i[12])*o,this.y=(i[1]*n+i[5]*r+i[9]*s+i[13])*o,this.z=(i[2]*n+i[6]*r+i[10]*s+i[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,s=this.z,i=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*s-a*r),u=2*(a*n-i*s),d=2*(i*r-o*n);return this.x=n+l*c+o*d-a*u,this.y=r+l*u+a*c-i*d,this.z=s+l*d+i*u-o*c,this}transformDirection(e){const n=this.x,r=this.y,s=this.z,i=e.elements;return this.x=i[0]*n+i[4]*r+i[8]*s,this.y=i[1]*n+i[5]*r+i[9]*s,this.z=i[2]*n+i[6]*r+i[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isParallelTo(e){const n=this.dot(e),r=this.length(),s=e.length();return Math.abs(n)===r*s}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,s=e.y,i=e.z,o=n.x,a=n.y,l=n.z;return this.x=s*l-i*a,this.y=i*o-r*l,this.z=r*a-s*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return ew.copy(this).projectOnVector(e),this.sub(ew)}reflect(e){return this.sub(ew.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Math.max(-1,Math.min(1,r)))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,s=this.z-e.z;return n*n+r*r+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=s,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};Co.X_AXIS=Object.freeze(new Co(1,0,0)),Co.NEGATIVE_X_AXIS=Object.freeze(new Co(-1,0,0)),Co.Y_AXIS=Object.freeze(new Co(0,1,0)),Co.NEGATIVE_Y_AXIS=Object.freeze(new Co(0,-1,0)),Co.Z_AXIS=Object.freeze(new Co(0,0,1)),Co.NEGATIVE_Z_AXIS=Object.freeze(new Co(0,0,-1));let qt=Co;const ew=new qt,BA=new cg,eS=class gN{constructor(e,n,r,s,i,o,a,l,c,u,d,h,f,m,v,y){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!=null&&n!=null&&r!=null&&s!=null&&i!=null&&o!=null&&a!=null&&l!=null&&c!=null&&u!=null&&d!=null&&h!=null&&f!=null&&m!=null&&v!=null&&y!=null&&this.set(e,n,r,s,i,o,a,l,c,u,d,h,f,m,v,y)}set(e,n,r,s,i,o,a,l,c,u,d,h,f,m,v,y){const g=this.elements;return g[0]=e,g[4]=n,g[8]=r,g[12]=s,g[1]=i,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=u,g[10]=d,g[14]=h,g[3]=f,g[7]=m,g[11]=v,g[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new gN().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}setFromExtrusionDirection(e){if(dN.equalPoint3d(e,qt.Z_AXIS))this.identity();else{const n=new qt(1,0,0);Math.abs(e.x)<1/64&&Math.abs(e.y)<1/64?n.crossVectors(qt.Y_AXIS,e).normalize():n.crossVectors(qt.Z_AXIS,e).normalize();const r=e.clone().cross(n).normalize();this.set(n.x,n.y,n.z,0,r.x,r.y,r.z,0,e.x,e.y,e.z,0,0,0,0,1)}return this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,s=1/Ph.setFromMatrixColumn(e,0).length(),i=1/Ph.setFromMatrixColumn(e,1).length(),o=1/Ph.setFromMatrixColumn(e,2).length();return n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n[3]=0,n[4]=r[4]*i,n[5]=r[5]*i,n[6]=r[6]*i,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(QH,e,eG)}lookAt(e,n,r){const s=this.elements;return xo.subVectors(e,n),xo.lengthSq()===0&&(xo.z=1),xo.normalize(),Yc.crossVectors(r,xo),Yc.lengthSq()===0&&(Math.abs(r.z)===1?xo.x+=1e-4:xo.z+=1e-4,xo.normalize(),Yc.crossVectors(r,xo)),Yc.normalize(),a0.crossVectors(xo,Yc),s[0]=Yc.x,s[4]=a0.x,s[8]=xo.x,s[1]=Yc.y,s[5]=a0.y,s[9]=xo.y,s[2]=Yc.z,s[6]=a0.z,s[10]=xo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,s=n.elements,i=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],h=r[9],f=r[13],m=r[2],v=r[6],y=r[10],g=r[14],S=r[3],_=r[7],w=r[11],E=r[15],C=s[0],T=s[4],I=s[8],k=s[12],M=s[1],L=s[5],N=s[9],G=s[13],V=s[2],X=s[6],F=s[10],$=s[14],O=s[3],z=s[7],re=s[11],q=s[15];return i[0]=o*C+a*M+l*V+c*O,i[4]=o*T+a*L+l*X+c*z,i[8]=o*I+a*N+l*F+c*re,i[12]=o*k+a*G+l*$+c*q,i[1]=u*C+d*M+h*V+f*O,i[5]=u*T+d*L+h*X+f*z,i[9]=u*I+d*N+h*F+f*re,i[13]=u*k+d*G+h*$+f*q,i[2]=m*C+v*M+y*V+g*O,i[6]=m*T+v*L+y*X+g*z,i[10]=m*I+v*N+y*F+g*re,i[14]=m*k+v*G+y*$+g*q,i[3]=S*C+_*M+w*V+E*O,i[7]=S*T+_*L+w*X+E*z,i[11]=S*I+_*N+w*F+E*re,i[15]=S*k+_*G+w*$+E*q,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],s=e[8],i=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14],m=e[3],v=e[7],y=e[11],g=e[15];return m*(+i*l*d-s*c*d-i*a*h+r*c*h+s*a*f-r*l*f)+v*(+n*l*f-n*c*h+i*o*h-s*o*f+s*c*u-i*l*u)+y*(+n*c*d-n*a*f-i*o*d+r*o*f+i*a*u-r*c*u)+g*(-s*a*u-n*l*d+n*a*h+s*o*d-r*o*h+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const s=this.elements;return e instanceof qt?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=n,s[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],s=e[2],i=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],m=e[12],v=e[13],y=e[14],g=e[15],S=d*y*c-v*h*c+v*l*f-a*y*f-d*l*g+a*h*g,_=m*h*c-u*y*c-m*l*f+o*y*f+u*l*g-o*h*g,w=u*v*c-m*d*c+m*a*f-o*v*f-u*a*g+o*d*g,E=m*d*l-u*v*l-m*a*h+o*v*h+u*a*y-o*d*y,C=n*S+r*_+s*w+i*E;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/C;return e[0]=S*T,e[1]=(v*h*i-d*y*i-v*s*f+r*y*f+d*s*g-r*h*g)*T,e[2]=(a*y*i-v*l*i+v*s*c-r*y*c-a*s*g+r*l*g)*T,e[3]=(d*l*i-a*h*i-d*s*c+r*h*c+a*s*f-r*l*f)*T,e[4]=_*T,e[5]=(u*y*i-m*h*i+m*s*f-n*y*f-u*s*g+n*h*g)*T,e[6]=(m*l*i-o*y*i-m*s*c+n*y*c+o*s*g-n*l*g)*T,e[7]=(o*h*i-u*l*i+u*s*c-n*h*c-o*s*f+n*l*f)*T,e[8]=w*T,e[9]=(m*d*i-u*v*i-m*r*f+n*v*f+u*r*g-n*d*g)*T,e[10]=(o*v*i-m*a*i+m*r*c-n*v*c-o*r*g+n*a*g)*T,e[11]=(u*a*i-o*d*i-u*r*c+n*d*c+o*r*f-n*a*f)*T,e[12]=E*T,e[13]=(u*v*s-m*d*s+m*r*h-n*v*h-u*r*y+n*d*y)*T,e[14]=(m*a*s-o*v*s-m*r*l+n*v*l+o*r*y-n*a*y)*T,e[15]=(o*d*s-u*a*s+u*r*l-n*d*l-o*r*h+n*a*h)*T,this}scale(e){const n=this.elements,r=e.x,s=e.y,i=e.z;return n[0]*=r,n[4]*=s,n[8]*=i,n[1]*=r,n[5]*=s,n[9]*=i,n[2]*=r,n[6]*=s,n[10]*=i,n[3]*=r,n[7]*=s,n[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,s))}makeTranslation(e,n,r){return e instanceof qt?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),s=Math.sin(n),i=1-r,o=e.x,a=e.y,l=e.z,c=i*o,u=i*a;return this.set(c*o+r,c*a-s*l,c*l+s*a,0,c*a+s*l,u*a+r,u*l-s*o,0,c*l-s*a,u*l+s*o,i*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,s,i,o){return this.set(1,r,i,0,e,1,o,0,n,s,1,0,0,0,0,1),this}compose(e,n,r){const s=this.elements,i=n.x,o=n.y,a=n.z,l=n.w,c=i+i,u=o+o,d=a+a,h=i*c,f=i*u,m=i*d,v=o*u,y=o*d,g=a*d,S=l*c,_=l*u,w=l*d,E=r.x,C=r.y,T=r.z;return s[0]=(1-(v+g))*E,s[1]=(f+w)*E,s[2]=(m-_)*E,s[3]=0,s[4]=(f-w)*C,s[5]=(1-(h+g))*C,s[6]=(y+S)*C,s[7]=0,s[8]=(m+_)*T,s[9]=(y-S)*T,s[10]=(1-(h+v))*T,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,n,r){const s=this.elements;let i=Ph.set(s[0],s[1],s[2]).length();const o=Ph.set(s[4],s[5],s[6]).length(),a=Ph.set(s[8],s[9],s[10]).length();this.determinant()<0&&(i=-i),e.x=s[12],e.y=s[13],e.z=s[14],ga.copy(this);const l=1/i,c=1/o,u=1/a;return ga.elements[0]*=l,ga.elements[1]*=l,ga.elements[2]*=l,ga.elements[4]*=c,ga.elements[5]*=c,ga.elements[6]*=c,ga.elements[8]*=u,ga.elements[9]*=u,ga.elements[10]*=u,n.setFromRotationMatrix(ga),r.x=i,r.y=o,r.z=a,this}equals(e){const n=this.elements,r=e.elements;for(let s=0;s<16;s++)if(n[s]!==r[s])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}};eS.IDENTITY=Object.freeze(new eS);let Jf=eS;const Ph=new qt,ga=new Jf,QH=new qt(0,0,0),eG=new qt(1,1,1),Yc=new qt,a0=new qt,xo=new qt;let Lr=class vN{constructor(e=void 0,n=void 0){this.min=e==null?new qt(1/0,1/0,1/0):new qt(e.x,e.y,e.z),this.max=n==null?new qt(-1/0,-1/0,-1/0):new qt(n.x,n.y,n.z)}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(tw.fromArray(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=tw.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new vN().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}get center(){return this.isEmpty()?new qt(0,0,0):new qt(0,0,0).addVectors(this.min,this.max).multiplyScalar(.5)}get size(){return this.isEmpty()?new qt(0,0,0):new qt(0,0,0).subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,tw).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:($l[0].set(this.min.x,this.min.y,this.min.z).applyMatrix3d(e),$l[1].set(this.min.x,this.min.y,this.max.z).applyMatrix3d(e),$l[2].set(this.min.x,this.max.y,this.min.z).applyMatrix3d(e),$l[3].set(this.min.x,this.max.y,this.max.z).applyMatrix3d(e),$l[4].set(this.max.x,this.min.y,this.min.z).applyMatrix3d(e),$l[5].set(this.max.x,this.min.y,this.max.z).applyMatrix3d(e),$l[6].set(this.max.x,this.max.y,this.min.z).applyMatrix3d(e),$l[7].set(this.max.x,this.max.y,this.max.z).applyMatrix3d(e),this.setFromPoints($l),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};const $l=[new qt,new qt,new qt,new qt,new qt,new qt,new qt,new qt],tw=new qt,UA=new is;let ds=class yN{constructor(e=void 0,n=void 0){this.min=e==null?new is(1/0,1/0):new is(e.x,e.y),this.max=n==null?new is(-1/0,-1/0):new is(n.x,n.y)}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=UA.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new yN().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}get center(){return this.isEmpty()?new is(0,0):new is(0,0).addVectors(this.min,this.max).multiplyScalar(.5)}get size(){return this.isEmpty()?new is(0,0):new is(0,0).subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,UA).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};const zA=new qt,tG=new qt,nG=new nC;let bN=class _N{constructor(e=new qt(1,0,0),n=0){this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,s){return this.normal.set(e,n,r),this.constant=s,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const s=zA.subVectors(r,n).cross(tG.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectsBox(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||nG.getNormalMatrix(e),s=this.coplanarPoint(zA).applyMatrix3d(e),i=this.normal.applyMatrix3(r).normalize();return this.constant=-s.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new _N().copy(this)}},Dn=class extends is{static pointArrayToNumberArray(e){const n=new Array(e.length*2);return e.forEach((r,s)=>{r.toArray(n,s*2)}),n}};class Yt extends qt{static pointArrayToNumberArray(e,n=!0){const r=n?3:2,s=new Array(e.length*r);return e.forEach((i,o)=>{i.toArray(s,o*r)}),s}}const $A=new Jf,VA=new cg,wN=class tS{constructor(e=0,n=0,r=0,s=tS.DEFAULT_ORDER){this._x=e,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,s=this._order){return this._x=e,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new tS(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const s=e.elements,i=s[0],o=s[4],a=s[8],l=s[1],c=s[5],u=s[9],d=s[2],h=s[6],f=s[10];switch(n){case"XYZ":this._y=Math.asin(fu(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-fu(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,i),this._z=0);break;case"ZXY":this._x=Math.asin(fu(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,i));break;case"ZYX":this._y=Math.asin(-fu(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,i)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(fu(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,i)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-fu(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r=!0){return $A.makeRotationFromQuaternion(e),this.setFromRotationMatrix($A,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return VA.setFromEuler(this),this.setFromQuaternion(VA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};wN.DEFAULT_ORDER="XYZ";let rG=wN,xN=class{constructor(){this._boundingBoxNeedsUpdate=!1}get boundingBoxNeedUpdate(){return this._boundingBoxNeedsUpdate}},SN=class extends xN{translate(e){return this.transform(new nC().makeTranslation(e.x,e.y))}get box(){return(this._box==null||this._boundingBoxNeedsUpdate)&&(this._box=this.calculateBoundingBox(),this._boundingBoxNeedsUpdate=!1),this._box}},rC=class extends SN{constructor(){super(),this._loops=[]}add(e){this._loops.push(e),this._boundingBoxNeedsUpdate=!0}get loops(){return this._loops}get outter(){if(this._loops.length>0)return this._loops[0]}calculateBoundingBox(){const e=this.outter;return e?e.box:new ds}transform(e){return this._boundingBoxNeedsUpdate=!0,this}getPoints(e){const n=[];for(let r=0;r<this.loops.length;++r){const s=this.loops[r].getPoints(e);n.push(s)}return n}buildHierarchy(){var e;const n=this.getPoints(100),r=this.calculateBoundaryBoxes(n),s=this.sortBoundaryBoxesByAreas(r),i=new Map,o=s.length;for(let l=0;l<o;l++)i.set(s[l],{index:s[l],children:[]});const a={index:-1,children:[]};for(let l=0;l<o;l++){const c=s[l],u=n[c],d=r[c];let h=l+1;for(;h<o;h++){const f=s[h],m=n[f];if(r[f].containsBox(d)&&fN.isPointInPolygon(u[vr.randInt(0,u.length-1)],m)){(e=i.get(f))==null||e.children.push(i.get(c));break}}h===o&&a.children.push(i.get(c))}return a}calculateBoundaryBoxes(e){const n=[];return e.forEach(r=>{n.push(new ds().setFromPoints(r))}),n}sortBoundaryBoxesByAreas(e){const n=[];e.forEach((s,i)=>{const o=s.size,a=o.width*o.height;n.push({area:a,index:i})}),n.sort((s,i)=>s.area-i.area);const r=[];return n.forEach(s=>{r.push(s.index)}),r}},uv=class extends SN{constructor(){super(),this.arcLengthDivisions=100}get startPoint(){return this.getPoint(0)}get endPoint(){return this.getPoint(1)}get length(){return this.getLength()}getPoint(e){throw new Error("AcGeCurve2d: .getPoint() not implemented.")}getPointAt(e){const n=this.getUtoTmapping(e);return this.getPoint(n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){const n=[];let r,s=this.getPoint(0),i=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),i+=r.distanceTo(s),n.push(i),s=r;return n}getUtoTmapping(e,n){const r=this.getLengths();let s=0;const i=r.length;let o;n?o=n:o=e*r[i-1];let a=0,l=i-1,c;for(;a<=l;)if(s=Math.floor(a+(l-a)/2),c=r[s]-o,c<0)a=s+1;else if(c>0)l=s-1;else{l=s;break}if(s=l,r[s]===o)return s/(i-1);const u=r[s],d=r[s+1]-u,h=(o-u)/d;return(s+h)/(i-1)}getTangent(e){let n=e-1e-4,r=e+1e-4;n<0&&(n=0),r>1&&(r=1);const s=this.getPoint(n),i=this.getPoint(r),o=new Dn;return o.copy(i).sub(s).normalize(),o}getTangentAt(e){const n=this.getUtoTmapping(e);return this.getTangent(n)}},yb=class EN extends uv{constructor(e,n,r,s,i){super();const o=+(e!==void 0)+ +(n!==void 0)+ +(r!==void 0)+ +(s!==void 0)+ +(i!==void 0);if(o==3)typeof e=="object"&&typeof n=="object"&&typeof r=="object"?this.createByThreePoints(e,n,r):this.createByStartEndPointsAndBulge(e,n,r);else if(o==5){const a=e;this.center=new Dn(a.x,a.y),this.radius=n,this._clockwise=i,this._startAngle=this._clockwise?this._mirrorAngle(vr.normalizeAngle(r)):vr.normalizeAngle(r),this._endAngle=this._clockwise?this._mirrorAngle(vr.normalizeAngle(s)):vr.normalizeAngle(s)}else throw Qo.ILLEGAL_PARAMETERS}createByThreePoints(e,n,r){const s=(T,I)=>({x:(T.x+I.x)/2,y:(T.y+I.y)/2}),i=(T,I)=>(I.y-T.y)/(I.x-T.x),o=T=>-1/T,a=s(e,n),l=s(n,r),c=i(e,n),u=i(n,r),d=o(c),h=o(u),f=(T,I,k,M)=>{const L=(M-I)/(T-k),N=T*L+I;return{x:L,y:N}},m=a.y-d*a.x,v=l.y-h*l.x,y=f(d,m,h,v),g=Math.sqrt(Math.pow(e.x-y.x,2)+Math.pow(e.y-y.y,2)),S=(T,I)=>Math.atan2(T.y-I.y,T.x-I.x),_=S(e,y),w=S(n,y),E=S(r,y),C=E>_&&E<w||_>E&&_<w||w>E&&w<_;this.center=y,this.radius=g,this._clockwise=!C,this._startAngle=_,this._endAngle=E}createByStartEndPointsAndBulge(e,n,r){let s,i,o;r<0?(s=Math.atan(-r)*4,i=new is(e),o=new is(n)):(s=Math.atan(r)*4,i=new is(n),o=new is(e));const a=new is().subVectors(o,i),l=a.length(),c=new is().addVectors(i,a.multiplyScalar(.5)),u=Math.abs(l/2/Math.tan(s/2)),d=a.normalize();let h;if(s<Math.PI){const f=new is(d.x*Math.cos(Math.PI/2)-d.y*Math.sin(Math.PI/2),d.y*Math.cos(Math.PI/2)+d.x*Math.sin(Math.PI/2));h=c.add(f.multiplyScalar(-u))}else{const f=new is(d.x*Math.cos(Math.PI/2)-d.y*Math.sin(Math.PI/2),d.y*Math.cos(Math.PI/2)+d.x*Math.sin(Math.PI/2));h=c.add(f.multiplyScalar(u))}r<0?(this._startAngle=Math.atan2(i.y-h.y,i.x-h.x),this._endAngle=Math.atan2(o.y-h.y,o.x-h.x)):(this._startAngle=Math.atan2(o.y-h.y,o.x-h.x),this._endAngle=Math.atan2(i.y-h.y,i.x-h.x)),this._clockwise=r<0,this.center=h,this.radius=o.sub(h).length()}get center(){return this._center}set center(e){this._center=new Dn(e.x,e.y),this._boundingBoxNeedsUpdate=!0}get radius(){return this._radius}set radius(e){this._radius=e,this._boundingBoxNeedsUpdate=!0}get startAngle(){return this._clockwise?this._mirrorAngle(this._startAngle):this._startAngle}set startAngle(e){this._startAngle=this._clockwise?this._mirrorAngle(vr.normalizeAngle(e)):vr.normalizeAngle(e),this._boundingBoxNeedsUpdate=!0}get endAngle(){return this._clockwise?this._mirrorAngle(this._endAngle):this._endAngle}set endAngle(e){const n=this.startAngle==0&&e==Vs?e:vr.normalizeAngle(e);this._endAngle=this._clockwise?this._mirrorAngle(n):n,this._boundingBoxNeedsUpdate=!0}_mirrorAngle(e){return(360-e*180/Math.PI)%360*Math.PI/180}_getInternalAngle(e){return this._clockwise?this._mirrorAngle(e):e}get deltaAngle(){const e=this._getInternalAngle(this.startAngle),n=this._getInternalAngle(this.endAngle);return this.clockwise?vr.normalizeAngle(e-n):vr.normalizeAngle(n-e)}get clockwise(){return this._clockwise}set clockwise(e){this._clockwise=e,this._boundingBoxNeedsUpdate=!0}get startPoint(){return this.getPointAtAngle(this.startAngle)}get endPoint(){return this.getPointAtAngle(this.endAngle)}get midPoint(){const e=this._getInternalAngle(this.startAngle),n=this._getInternalAngle(this.endAngle),r=vr.normalizeAngle((e+n)/2),s=this._clockwise?this._mirrorAngle(r):r;return this.getPointAtAngle(s)}get closed(){const e=this._getInternalAngle(this.startAngle),n=this._getInternalAngle(this.endAngle);return Math.abs(n-e)/Math.PI%2==0}calculateBoundingBox(){const e=[this.startPoint,this.endPoint],n=[0,Math.PI/2,Math.PI,3*Math.PI/2];for(const i of n){const o=this._getInternalAngle(i);vr.isBetweenAngle(o,this._getInternalAngle(this.startAngle),this._getInternalAngle(this.endAngle),this.clockwise)&&e.push(this.getPointAtAngle(i))}const r=e.map(i=>i.x),s=e.map(i=>i.y);return new ds(new Dn(Math.min(...r),Math.min(...s)),new Dn(Math.max(...r),Math.max(...s)))}get length(){return Math.abs(this.deltaAngle*this.radius)}transform(e){return this._boundingBoxNeedsUpdate=!0,this}clone(){return new EN(this.center.clone(),this.radius,this._startAngle,this._endAngle,this.clockwise)}getPointAtAngle(e){const n=this._getInternalAngle(e),r=this.center.x+this.radius*Math.cos(n),s=this.center.y+this.radius*Math.sin(n);return new Dn(r,s)}getPoints(e=100){const n=[];let r=this.deltaAngle,s=this._getInternalAngle(this.startAngle);if(this.closed&&(r=Vs,s=0),this.clockwise)for(let i=0;i<=e;i++){const o=s-r*(i/e),a=this._clockwise?this._mirrorAngle(o):o,l=this.getPointAtAngle(a);n.push(new Dn(l.x,l.y))}else for(let i=0;i<=e;i++){const o=s+r*(i/e),a=this._clockwise?this._mirrorAngle(o):o,l=this.getPointAtAngle(a);n.push(new Dn(l.x,l.y))}return n}},sG=class extends xN{translate(e){return this.transform(new Jf().makeTranslation(e.x,e.y,e.z))}get box(){return(this._box==null||this._boundingBoxNeedsUpdate)&&(this._box=this.calculateBoundingBox(),this._boundingBoxNeedsUpdate=!1),this._box}},dv=class extends sG{},ug=class CN extends dv{constructor(e,n){super(),this._start=new Yt(e),this._end=new Yt(n)}get startPoint(){return this._start}set startPoint(e){this._start.copy(e),this._boundingBoxNeedsUpdate=!0}get endPoint(){return this._end}set endPoint(e){this._end.copy(e),this._boundingBoxNeedsUpdate=!0}get direction(){return new qt().subVectors(this.endPoint,this.startPoint).normalize()}get midPoint(){return new Yt((this._start.x+this._end.x)/2,(this._start.y+this._end.y)/2,(this._start.z+this._end.z)/2)}get length(){return this.startPoint.distanceTo(this.endPoint)}isPointOnLine(e){return this.project(e).distanceTo(e)<1e-6}at(e,n){return this.delta(n).multiplyScalar(e).add(this._start)}atLength(e,n=!1){if(n){const r=this.delta(sd).normalize();return new Yt(this._start).addScaledVector(r,e)}else{const r=this.delta(sd).normalize();return new Yt(this._end).addScaledVector(r,e)}}extend(e,n=!1){if(n){const r=sd.subVectors(this._start,this._end).normalize();this._start=new Yt(this._start).addScaledVector(r,e)}else{const r=this.delta(sd).normalize();this._end=new Yt(this._end).addScaledVector(r,e)}return this._boundingBoxNeedsUpdate=!0,this}closestPointToPointParameter(e,n){HA.subVectors(e,this._start),l0.subVectors(this.endPoint,this.startPoint);const r=l0.dot(l0);let s=l0.dot(HA)/r;return n&&(s=vr.clamp(s,0,1)),s}closestPointToPoint(e,n,r){const s=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(s).add(this._start)}delta(e){return e.subVectors(this._end,this._start)}distanceSq(){return this._start.distanceToSquared(this._end)}distance(){return this._start.distanceTo(this._end)}project(e){const n=this.direction,r=sd.subVectors(e,this.startPoint).dot(n);return new Yt().copy(n).multiplyScalar(r).add(this.startPoint)}perpPoint(e){const n=this.direction,r=this.startPoint,s=sd.subVectors(e,r).dot(n),i=sd.copy(n).multiplyScalar(s);return new Yt().addVectors(r,i)}calculateBoundingBox(){const e=new Yt(Math.min(this._start.x,this._end.x),Math.min(this._start.y,this._end.y),Math.min(this._start.z,this._end.z)),n=new Yt(Math.max(this._start.x,this._end.x),Math.max(this._start.y,this._end.y),Math.max(this._start.z,this._end.z));return new Lr(e,n)}transform(e){return this._start.applyMatrix3d(e),this._end.applyMatrix3d(e),this._boundingBoxNeedsUpdate=!0,this}get closed(){return!1}copy(e){return this.startPoint=e.startPoint,this.endPoint=e.endPoint,this._boundingBoxNeedsUpdate=!0,this}clone(){return new CN(this._start.clone(),this._end.clone())}};const sd=new qt,HA=new qt,l0=new qt;let TN=class By extends dv{static computeCenterPoint(e,n,r){const s=new qt().addVectors(e,n).multiplyScalar(.5),i=new qt().addVectors(e,r).multiplyScalar(.5),o=new qt().subVectors(n,e),a=new qt().subVectors(r,e),l=new qt().crossVectors(o,a).normalize();if(l.lengthSq()===0)return console.error("Points are collinear and cannot form a valid arc."),null;const c=new qt().crossVectors(o,l).normalize(),u=new qt().crossVectors(a,l).normalize(),d=c.clone().multiplyScalar(Number.MAX_SAFE_INTEGER),h=u.clone().multiplyScalar(Number.MAX_SAFE_INTEGER),f=new ug(s,s.clone().add(d)),m=new ug(i,i.clone().add(h)),v=new qt;return f.closestPointToPoint(m.startPoint,!0,v)?v:(console.error("Cannot find a valid center for the arc."),null)}static createByThreePoints(e,n,r){const s=By.computeCenterPoint(e,n,r);if(s){const i=s.distanceTo(e),o=new qt().subVectors(e,s),a=new qt().subVectors(n,s),l=Math.atan2(o.y,o.x),c=Math.atan2(a.y,a.x);return new By(s,i,l,c,qt.Z_AXIS)}}constructor(e,n,r,s,i,o=qt.X_AXIS){super(),this.center=e,this.radius=n,this.startAngle=r,this.endAngle=s,this.normal=i,this.refVec=o,(s-r)%Vs==0?(this.startAngle=0,this.endAngle=Vs):(this.startAngle=r,this.endAngle=s)}get center(){return this._center}set center(e){this._center=new Yt(e.x,e.y,e.z||0),this._boundingBoxNeedsUpdate=!0}get radius(){return this._radius}set radius(e){if(e<0)throw Qo.ILLEGAL_PARAMETERS;this._radius=e,this._boundingBoxNeedsUpdate=!0}get startAngle(){return this._startAngle}set startAngle(e){this._startAngle=vr.normalizeAngle(e),this._boundingBoxNeedsUpdate=!0}get endAngle(){return this._endAngle}set endAngle(e){this._endAngle=this.startAngle==0&&e==Vs?e:vr.normalizeAngle(e),this._boundingBoxNeedsUpdate=!0}get deltaAngle(){return vr.normalizeAngle(this.endAngle-this.startAngle)}get isLargeArc(){return Math.abs(this.deltaAngle)>Math.PI?1:0}get clockwise(){return this.deltaAngle<=0}get normal(){return this._normal}set normal(e){this._normal=new qt(e.x,e.y,e.z),this._normal.normalize(),this._boundingBoxNeedsUpdate=!0}get refVec(){return this._refVec}set refVec(e){this._refVec=new qt(e.x,e.y,e.z),this._refVec.normalize(),this._boundingBoxNeedsUpdate=!0}get startPoint(){return this.getPointAtAngle(this._startAngle)}get endPoint(){return this.getPointAtAngle(this._endAngle)}get length(){return Math.abs(this.deltaAngle*this.radius)}calculateBoundingBox(){const e=[this.startAngle,this.endAngle];for(let l=0;l<2*Math.PI;l+=Math.PI/2)vr.isBetweenAngle(l,this.startAngle,this.endAngle)&&e.push(l);let n=1/0,r=1/0,s=1/0,i=-1/0,o=-1/0,a=-1/0;for(const l of e){const c=this.getPointAtAngle(l);c.x<n&&(n=c.x),c.y<r&&(r=c.y),c.z<s&&(s=c.z),c.x>i&&(i=c.x),c.y>o&&(o=c.y),c.z>a&&(a=c.z)}return new Lr({x:n,y:r,z:s},{x:i,y:o,z:a})}get closed(){return Math.abs(this.endAngle-this.startAngle)/Math.PI%2==0}getPoints(e){const n=[];let r=this.deltaAngle,s=this.startAngle;this.closed&&(r=Vs,s=0);for(let i=0;i<=e;i++){const o=s+r*(i/e),a=this.getPointAtAngle(o);n.push(a)}return n}transform(e){const n=nw.copy(this.refVec).applyAxisAngle(this.normal,this.startAngle).multiplyScalar(this.radius),r=nw.copy(this.refVec).applyAxisAngle(this.normal,this.endAngle).multiplyScalar(this.radius);return this.center.applyMatrix3d(e),n.applyMatrix3d(e),r.applyMatrix3d(e),this.normal.applyMatrix3d(e).normalize(),this.refVec.applyMatrix3d(e).normalize(),this.startAngle=this.getAngle(n),this.endAngle=this.getAngle(r),this._boundingBoxNeedsUpdate=!0,this}copy(e){return this.center=e.center,this.radius=e.radius,this.startAngle=e.startAngle,this.endAngle=e.endAngle,this.normal=e.normal,this.refVec=e.refVec,this._boundingBoxNeedsUpdate=!0,this}clone(){return new By(this.center.clone(),this.radius,this.startAngle,this.endAngle,this.normal,this.refVec)}getAngle(e){return e.sub(this.center),Math.atan2(e.dot(nw.crossVectors(this.refVec,this.normal)),e.dot(this.refVec))}getPointAtAngle(e){const n=this.normal,r=this.refVec,s={x:n.y*r.z-n.z*r.y,y:n.z*r.x-n.x*r.z,z:n.x*r.y-n.y*r.x},i=this.center,o=this.radius;return new Yt(i.x+o*(r.x*Math.cos(e)+s.x*Math.sin(e)),i.y+o*(r.y*Math.cos(e)+s.y*Math.sin(e)),i.z+o*(r.z*Math.cos(e)+s.z*Math.sin(e)))}get plane(){const e=new qt(this.center).distanceTo(cN);return new bN(this.normal,e)}};const nw=new qt;let MN=class AN extends uv{constructor(e,n,r,s=0,i=Vs,o=!1,a=0){super(),this.center=e,this.majorAxisRadius=n,this.minorAxisRadius=r,(i-s)%Vs==0?(this.startAngle=0,this.endAngle=Vs):(this.startAngle=s,this.endAngle=i),this.clockwise=o,this.rotation=a}get center(){return this._center}set center(e){this._center=new Yt(e.x,e.y,e.z||0),this._boundingBoxNeedsUpdate=!0}get majorAxisRadius(){return this._majorAxisRadius}set majorAxisRadius(e){if(e<0)throw Qo.ILLEGAL_PARAMETERS;this._majorAxisRadius=e,this._boundingBoxNeedsUpdate=!0}get minorAxisRadius(){return this._minorAxisRadius}set minorAxisRadius(e){if(e<0)throw Qo.ILLEGAL_PARAMETERS;this._minorAxisRadius=e,this._boundingBoxNeedsUpdate=!0}get startAngle(){return this._startAngle}set startAngle(e){this._startAngle=vr.normalizeAngle(e),this._boundingBoxNeedsUpdate=!0}get endAngle(){return this._endAngle}set endAngle(e){this._endAngle=this.startAngle==0&&e==Vs?e:vr.normalizeAngle(e),this._boundingBoxNeedsUpdate=!0}get clockwise(){return this._clockwise}set clockwise(e){this._clockwise=e,this._boundingBoxNeedsUpdate=!0}get rotation(){return this._rotation}set rotation(e){this._rotation=e,this._boundingBoxNeedsUpdate=!0}get deltaAngle(){return vr.normalizeAngle(this.endAngle-this.startAngle)}get isLargeArc(){return Math.abs(this.deltaAngle)>Math.PI?1:0}calculateBoundingBox(){let e=1/0,n=1/0,r=-1/0,s=-1/0;for(let i=0;i<=100;i++){const o=this.getPoint(i/100);e=Math.min(e,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x),s=Math.max(s,o.y)}return new ds({x:e,y:n},{x:r,y:s})}get closed(){return this.deltaAngle==0}getPoint(e){const n=Math.PI*2;let r=this.endAngle-this.startAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(s?r=0:r=n),this.clockwise===!0&&!s&&(r===n?r=-n:r=r-n);const i=this.startAngle+e*r;let o=this.center.x+this.majorAxisRadius*Math.cos(i),a=this.center.y+this.minorAxisRadius*Math.sin(i);if(this.rotation!==0){const l=Math.cos(this.rotation),c=Math.sin(this.rotation),u=o-this.center.x,d=a-this.center.y;o=u*l-d*c+this.center.x,a=u*c+d*l+this.center.y}return new Dn(o,a)}transform(e){return this._boundingBoxNeedsUpdate=!0,this}copy(e){return this.center=e.center,this.majorAxisRadius=e.majorAxisRadius,this.minorAxisRadius=e.minorAxisRadius,this.startAngle=e.startAngle,this.endAngle=e.endAngle,this.clockwise=e.clockwise,this.rotation=e.rotation,this}clone(){return new AN(this.center,this.majorAxisRadius,this.minorAxisRadius,this.startAngle,this.endAngle,this.clockwise,this.rotation)}},iG=class kN extends dv{constructor(e,n,r,s,i,o=0,a=Vs){super(),this.center=e,this.normal=n,this.majorAxis=r,this.majorAxisRadius=s,this.minorAxisRadius=i;const l=Math.abs(a-o);Math.abs(l-Vs)<1e-10||Math.abs(l-2*Vs)<1e-10?(this.startAngle=0,this.endAngle=Vs):(this.startAngle=o,this.endAngle=a)}get center(){return this._center}set center(e){this._center=new Yt(e.x,e.y,e.z||0),this._boundingBoxNeedsUpdate=!0}get majorAxisRadius(){return this._majorAxisRadius}set majorAxisRadius(e){if(e<0)throw Qo.ILLEGAL_PARAMETERS;this._majorAxisRadius=e,this._boundingBoxNeedsUpdate=!0}get minorAxisRadius(){return this._minorAxisRadius}set minorAxisRadius(e){if(e<0)throw Qo.ILLEGAL_PARAMETERS;this._minorAxisRadius=e,this._boundingBoxNeedsUpdate=!0}get startAngle(){return this._startAngle}set startAngle(e){this._startAngle=vr.normalizeAngle(e),this._boundingBoxNeedsUpdate=!0}get endAngle(){return this._endAngle}set endAngle(e){this._endAngle=this.startAngle==0&&e==Vs?e:vr.normalizeAngle(e),this._boundingBoxNeedsUpdate=!0}get deltaAngle(){const e=this.endAngle-this.startAngle;return Math.abs(e-Vs)<1e-10?Vs:vr.normalizeAngle(e)}get isLargeArc(){return Math.abs(this.deltaAngle)>Math.PI?1:0}get clockwise(){return this.deltaAngle<=0}get normal(){return this._normal}set normal(e){this._normal=new qt(e.x,e.y,e.z),this._normal.normalize(),this._boundingBoxNeedsUpdate=!0}get majorAxis(){return this._majorAxis}set majorAxis(e){this._majorAxis=new qt(e.x,e.y,e.z),this._majorAxis.normalize(),this._boundingBoxNeedsUpdate=!0}get minorAxis(){return new qt().crossVectors(this.normal,this.majorAxis).normalize()}get startPoint(){return this.getPointAtAngle(this._startAngle)}get endPoint(){return this.getPointAtAngle(this._endAngle)}get isCircular(){return uN.equal(this.majorAxisRadius,this.minorAxisRadius)}get length(){if(this.isCircular)return this.majorAxisRadius*Math.abs(this.deltaAngle);const e=1e3,n=this.deltaAngle/e;let r=0,s=this.getPointAtAngle(this.startAngle);for(let i=1;i<=e;i++){const o=this.startAngle+i*n,a=this.getPointAtAngle(o),l=a.x-s.x,c=a.y-s.y,u=a.z-s.z;r+=Math.sqrt(l*l+c*c+u*u),s=a}return r}calculateBoundingBox(){if(this.majorAxis.equals(qt.X_AXIS)||this.majorAxis.equals(qt.Y_AXIS)||this.majorAxis.isParallelTo(qt.X_AXIS)||this.majorAxis.isParallelTo(qt.Y_AXIS)){const e=[this.startAngle,this.endAngle];for(let l=0;l<2*Math.PI;l+=Math.PI/2)vr.isBetweenAngle(l,this.startAngle,this.endAngle)&&e.push(l);let n=1/0,r=1/0,s=1/0,i=-1/0,o=-1/0,a=-1/0;for(const l of e){const c=this.getPointAtAngle(l);c.x<n&&(n=c.x),c.y<r&&(r=c.y),c.z<s&&(s=c.z),c.x>i&&(i=c.x),c.y>o&&(o=c.y),c.z>a&&(a=c.z)}return new Lr({x:n,y:r,z:s},{x:i,y:o,z:a})}else{let e=1/0,n=1/0,r=1/0,s=-1/0,i=-1/0,o=-1/0;for(let a=0;a<=100;a++){const l=this.startAngle+this.deltaAngle*(a/100),c=this.getPointAtAngle(l);e=Math.min(e,c.x),n=Math.min(n,c.y),r=Math.min(r,c.z),s=Math.max(s,c.x),i=Math.max(i,c.y),o=Math.max(o,c.z)}return new Lr({x:e,y:n,z:r},{x:s,y:i,z:o})}}get closed(){return this.deltaAngle==0}getPoints(e=100){const n=[];let r=this.deltaAngle,s=this.startAngle;this.closed&&(r=Vs,s=0);for(let i=0;i<=e;i++){const o=s+r*(i/e),a=this.getPointAtAngle(o);n.push(a)}return n}getPointAtAngle(e){const n=Math.cos(e),r=Math.sin(e),s=this.minorAxis.clone().multiplyScalar(this.minorAxisRadius).multiplyScalar(r),i=this.majorAxis.clone().multiplyScalar(n*this.majorAxisRadius).add(s);return new Yt(this.center.x+i.x,this.center.y+i.y,this.center.z+i.z)}contains(e){const n=new qt(e).sub(this.center),r=n.dot(this.majorAxis),s=n.dot(this.minorAxis),i=r/this.majorAxisRadius,o=s/this.minorAxisRadius;return i*i+o*o<=1}transform(e){return this._boundingBoxNeedsUpdate=!0,this}copy(e){return this.center=e.center,this.normal=e.normal,this.majorAxis=e.majorAxis,this.majorAxisRadius=e.majorAxisRadius,this.minorAxisRadius=e.minorAxisRadius,this.startAngle=e.startAngle,this.endAngle=e.endAngle,this._boundingBoxNeedsUpdate=!0,this}clone(){return new kN(this.center,this.normal,this.majorAxis,this.majorAxisRadius,this.minorAxisRadius,this.startAngle,this.endAngle)}get plane(){const e=new qt(this.center).distanceTo(cN);return new bN(this.normal,e)}},hv=class extends uv{constructor(e=null,n=!1){super(),this._vertices=e||new Array,this._closed=n}get numberOfVertices(){return this._vertices.length}get closed(){return this._closed}get startPoint(){if(this.numberOfVertices>0){const e=this._vertices[0];return new Dn(e.x,e.y)}throw new Error("Start point does not exist in an empty polyline.")}get endPoint(){const e=this.numberOfVertices;if(e>0)if(this.closed){const n=this._vertices[0];return new Dn(n.x,n.y)}else{const n=this._vertices[e-1];return new Dn(n.x,n.y)}throw new Error("End point does not exist in an empty polyline.")}get length(){let e=0;const n=this._vertices.length;for(let r=0;r<n;++r){const s=this._vertices[r];let i=null;if(r<n-1?i=this._vertices[r+1]:r==n-1&&this.closed&&(i=this._vertices[0]),i)if(s.bulge){const o=new yb(s,i,s.bulge);e+=o.length}else e+=new Dn(s.x,s.y).distanceTo(i)}return e}set closed(e){this._closed=e,this._boundingBoxNeedsUpdate=!0}addVertexAt(e,n){e<=0?this._vertices.unshift(n):this._vertices.splice(e,0,n),this._boundingBoxNeedsUpdate=!0}getPointAt(e){const n=this._vertices[e];return new Dn(n.x,n.y)}calculateBoundingBox(){const e=this.getPoints(100);return new ds().setFromPoints(e)}transform(e){return this._boundingBoxNeedsUpdate=!0,this}getPoints3d(e,n){const r=[];return this.getPoints(e).forEach(s=>r.push(new Yt().set(s.x,s.y,n))),r}getPoints(e){const n=[],r=this._vertices.length;for(let s=0;s<r;++s){const i=this._vertices[s];if(i.bulge){let o=null;if(s<r-1?o=this._vertices[s+1]:s==r-1&&this.closed&&(o=this._vertices[0]),o){const a=new yb(i,o,i.bulge).getPoints(e),l=a.length;for(let c=0;c<l;++c){const u=a[c];n.push(new Dn(u.x,u.y))}}}else n.push(new Dn(i.x,i.y)),s==r-1&&this.closed&&n.push(n[0])}return n}},IN=class PN extends uv{constructor(e,n){super(),this._start=new Dn(e),this._end=new Dn(n)}get startPoint(){return this._start}set startPoint(e){this._start.copy(e),this._boundingBoxNeedsUpdate=!0}get endPoint(){return this._end}set endPoint(e){this._end.copy(e),this._boundingBoxNeedsUpdate=!0}getPoints(){return[this.startPoint,this.endPoint]}get length(){return this.startPoint.distanceTo(this.endPoint)}calculateBoundingBox(){const e=new Dn(Math.min(this._start.x,this._end.x),Math.min(this._start.y,this._end.y)),n=new Dn(Math.max(this._start.x,this._end.x),Math.max(this._start.y,this._end.y));return new ds(e,n)}transform(e){return this._start.applyMatrix2d(e),this._end.applyMatrix2d(e),this._boundingBoxNeedsUpdate=!0,this}get closed(){return!1}copy(e){return this.startPoint=e.startPoint,this.endPoint=e.endPoint,this._boundingBoxNeedsUpdate=!0,this}clone(){return new PN(this._start.clone(),this._end.clone())}},RN=class extends uv{constructor(e=[]){super(),this._curves=e}get curves(){return this._curves}add(e){this._curves.push(e),this._boundingBoxNeedsUpdate=!0}get numberOfEdges(){return this._curves.length}get startPoint(){if(this._curves.length>0){const e=this._curves[0].startPoint;return new Dn(e.x,e.y)}throw new Error("Start point does not exist in an empty loop.")}get endPoint(){return this.startPoint}get length(){let e=0;return this._curves.forEach(n=>{e+=n.length}),e}calculateBoundingBox(){const e=this.getPoints(100),n=new ds;return n.setFromPoints(e),n}transform(e){return this._boundingBoxNeedsUpdate=!0,this}get closed(){return!0}getPoints(e){const n=[];return this.curves.forEach(r=>{r.getPoints(e).forEach(s=>{n.push(new Dn(s.x,s.y))})}),n}};function oG(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var LN={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(){var n={},r=this;new Function("try {return this===window;}catch(e){ return false;}");var s=new Function("try {return this===global;}catch(e){return false;}"),i=new Function("try {return typeof importScripts === 'function';}catch(e){return false;}");if(s()&&i(),s()||i()){var o=r;if(i()){var a=function(l,c){var u=r;return l.split(".").forEach(function(d){u&&(u=u[d])}),u?u[c]:null};onmessage=function(l){if(!(!l.data.className||!l.data.methodName)){var c=a(l.data.className,l.data.methodName);if(!c)return console.error("could not find "+l.data.className+"."+l.data.methodName);postMessage({result:c.apply(null,l.data.args),id:l.data.id})}}}}return function(l,c,u){c.geom=c.geom||{},c.exe=c.exe||{},c.eval=c.eval||{},c.core=c.core||{},c.promhx=c.promhx||{};var d={},h=function(){return z.__string_rec(this,"")};function f(b,x){function A(){}A.prototype=b;var P=new A;for(var B in x)P[B]=x[B];return x.toString!==Object.prototype.toString&&(P.toString=x.toString),P}var m=function(){};d.HxOverrides=m,m.__name__=["HxOverrides"],m.strDate=function(b){var x=b.length;switch(x){case 8:var A=b.split(":"),P=new Date;return P.setTime(0),P.setUTCHours(A[0]),P.setUTCMinutes(A[1]),P.setUTCSeconds(A[2]),P;case 10:var B=b.split("-");return new Date(B[0],B[1]-1,B[2],0,0,0);case 19:var W=b.split(" "),ee=W[0].split("-"),ce=W[1].split(":");return new Date(ee[0],ee[1]-1,ee[2],ce[0],ce[1],ce[2]);default:throw new O("Invalid date format : "+b)}},m.cca=function(b,x){var A=b.charCodeAt(x);if(A==A)return A},m.substr=function(b,x,A){return x!=null&&x!=0&&A!=null&&A<0?"":(A==null&&(A=b.length),x<0?(x=b.length+x,x<0&&(x=0)):A<0&&(A=b.length+A-x),b.substr(x,A))},m.iter=function(b){return{cur:0,arr:b,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var v=function(){};d.Lambda=v,v.__name__=["Lambda"],v.fold=function(b,x,A){for(var P=Sn(b)();P.hasNext();){var B=P.next();A=x(B,A)}return A};var y=function(){this.length=0};d.List=y,y.__name__=["List"],y.prototype={add:function(b){var x=[b];this.h==null?this.h=x:this.q[1]=x,this.q=x,this.length++},pop:function(){if(this.h==null)return null;var b=this.h[0];return this.h=this.h[1],this.h==null&&(this.q=null),this.length--,b},isEmpty:function(){return this.h==null},__class__:y},Math.__name__=["Math"];var g=function(){};d.Reflect=g,g.__name__=["Reflect"],g.field=function(b,x){try{return b[x]}catch(A){return A instanceof O&&(A=A.val),null}},g.callMethod=function(b,x,A){return x.apply(b,A)},g.fields=function(b){var x=[];if(b!=null){var A=Object.prototype.hasOwnProperty;for(var P in b)P!="__id__"&&P!="hx__closures__"&&A.call(b,P)&&x.push(P)}return x},g.isFunction=function(b){return typeof b=="function"&&!(b.__name__||b.__ename__)},g.deleteField=function(b,x){return Object.prototype.hasOwnProperty.call(b,x)?(delete b[x],!0):!1};var S=function(){};d.Std=S,S.__name__=["Std"],S.string=function(b){return z.__string_rec(b,"")},S.parseFloat=function(b){return parseFloat(b)};var _=function(){this.b=""};d.StringBuf=_,_.__name__=["StringBuf"],_.prototype={add:function(b){this.b+=S.string(b)},__class__:_};var w=function(){};d.StringTools=w,w.__name__=["StringTools"],w.fastCodeAt=function(b,x){return b.charCodeAt(x)};var E=d.ValueType={__ename__:["ValueType"],__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]};E.TNull=["TNull",0],E.TNull.toString=h,E.TNull.__enum__=E,E.TInt=["TInt",1],E.TInt.toString=h,E.TInt.__enum__=E,E.TFloat=["TFloat",2],E.TFloat.toString=h,E.TFloat.__enum__=E,E.TBool=["TBool",3],E.TBool.toString=h,E.TBool.__enum__=E,E.TObject=["TObject",4],E.TObject.toString=h,E.TObject.__enum__=E,E.TFunction=["TFunction",5],E.TFunction.toString=h,E.TFunction.__enum__=E,E.TClass=function(b){var x=["TClass",6,b];return x.__enum__=E,x.toString=h,x},E.TEnum=function(b){var x=["TEnum",7,b];return x.__enum__=E,x.toString=h,x},E.TUnknown=["TUnknown",8],E.TUnknown.toString=h,E.TUnknown.__enum__=E;var C=function(){};d.Type=C,C.__name__=["Type"],C.getClassName=function(b){var x=b.__name__;return x==null?null:x.join(".")},C.getEnumName=function(b){var x=b.__ename__;return x.join(".")},C.resolveClass=function(b){var x=d[b];return x==null||!x.__name__?null:x},C.resolveEnum=function(b){var x=d[b];return x==null||!x.__ename__?null:x},C.createEmptyInstance=function(b){function x(){}return x.prototype=b.prototype,new x},C.createEnum=function(b,x,A){var P=g.field(b,x);if(P==null)throw new O("No such constructor "+x);if(g.isFunction(P)){if(A==null)throw new O("Constructor "+x+" need parameters");return g.callMethod(b,P,A)}if(A!=null&&A.length!=0)throw new O("Constructor "+x+" does not need parameters");return P},C.getEnumConstructs=function(b){var x=b.__constructs__;return x.slice()},C.typeof=function(b){var x=typeof b;switch(x){case"boolean":return E.TBool;case"string":return E.TClass(String);case"number":return Math.ceil(b)==b%2147483648?E.TInt:E.TFloat;case"object":if(b==null)return E.TNull;var A=b.__enum__;if(A!=null)return E.TEnum(A);var P=z.getClass(b);return P!=null?E.TClass(P):E.TObject;case"function":return b.__name__||b.__ename__?E.TObject:E.TFunction;case"undefined":return E.TNull;default:return E.TUnknown}};var T=function(){};d["haxe.IMap"]=T,T.__name__=["haxe","IMap"];var I=function(b,x){this.high=b,this.low=x};d["haxe._Int64.___Int64"]=I,I.__name__=["haxe","_Int64","___Int64"],I.prototype={__class__:I};var k=function(){this.buf=new _,this.cache=[],this.useCache=k.USE_CACHE,this.useEnumIndex=k.USE_ENUM_INDEX,this.shash=new V,this.scount=0};d["haxe.Serializer"]=k,k.__name__=["haxe","Serializer"],k.prototype={toString:function(){return this.buf.b},serializeString:function(b){var x=this.shash.get(b);if(x!=null){this.buf.b+="R",x==null?this.buf.b+="null":this.buf.b+=""+x;return}this.shash.set(b,this.scount++),this.buf.b+="y",b=encodeURIComponent(b),b.length==null?this.buf.b+="null":this.buf.b+=""+b.length,this.buf.b+=":",b==null?this.buf.b+="null":this.buf.b+=""+b},serializeRef:function(b){for(var x=typeof b,A=0,P=this.cache.length;A<P;){var B=A++,W=this.cache[B];if(typeof W==x&&W==b)return this.buf.b+="r",B==null?this.buf.b+="null":this.buf.b+=""+B,!0}return this.cache.push(b),!1},serializeFields:function(b){for(var x=0,A=g.fields(b);x<A.length;){var P=A[x];++x,this.serializeString(P),this.serialize(g.field(b,P))}this.buf.b+="g"},serialize:function(b){{var x=C.typeof(b);switch(x[1]){case 0:this.buf.b+="n";break;case 1:var A=b;if(A==0){this.buf.b+="z";return}this.buf.b+="i",A==null?this.buf.b+="null":this.buf.b+=""+A;break;case 2:var P=b;isNaN(P)?this.buf.b+="k":isFinite(P)?(this.buf.b+="d",P==null?this.buf.b+="null":this.buf.b+=""+P):P<0?this.buf.b+="m":this.buf.b+="p";break;case 3:b?this.buf.b+="t":this.buf.b+="f";break;case 6:var B=x[2];if(B==String){this.serializeString(b);return}if(this.useCache&&this.serializeRef(b))return;switch(B){case Array:var W=0;this.buf.b+="a";for(var ee=b.length,ce=0;ce<ee;){var pe=ce++;b[pe]==null?W++:(W>0&&(W==1?this.buf.b+="n":(this.buf.b+="u",W==null?this.buf.b+="null":this.buf.b+=""+W),W=0),this.serialize(b[pe]))}W>0&&(W==1?this.buf.b+="n":(this.buf.b+="u",W==null?this.buf.b+="null":this.buf.b+=""+W)),this.buf.b+="h";break;case y:this.buf.b+="l";for(var Ie=b,De=Ie.h,Ne=null;De!=null;){var Ge;Ne=De[0],De=De[1],Ge=Ne,this.serialize(Ge)}this.buf.b+="h";break;case Date:var qe=b;this.buf.b+="v",this.buf.add(qe.getTime());break;case V:this.buf.b+="b";for(var Je=b,ct=Je.keys();ct.hasNext();){var ot=ct.next();this.serializeString(ot),this.serialize(Us[ot]!=null?Je.getReserved(ot):Je.h[ot])}this.buf.b+="h";break;case L:this.buf.b+="q";for(var yt=b,pt=yt.keys();pt.hasNext();){var It=pt.next();this.buf.b+=":",It==null?this.buf.b+="null":this.buf.b+=""+It,this.serialize(yt.h[It])}this.buf.b+="h";break;case N:this.buf.b+="M";for(var Nt=b,Ht=Nt.keys();Ht.hasNext();){var ln=Ht.next(),Vt=g.field(ln,"__id__");g.deleteField(ln,"__id__"),this.serialize(ln),ln.__id__=Vt,this.serialize(Nt.h[ln.__id__])}this.buf.b+="h";break;case X:for(var Bt=b,Kt=0,bn=Bt.length-2,Cn=new _,In=k.BASE64;Kt<bn;){var Nn=Bt.get(Kt++),Rn=Bt.get(Kt++),Fn=Bt.get(Kt++);Cn.add(In.charAt(Nn>>2)),Cn.add(In.charAt((Nn<<4|Rn>>4)&63)),Cn.add(In.charAt((Rn<<2|Fn>>6)&63)),Cn.add(In.charAt(Fn&63))}if(Kt==bn){var Tn=Bt.get(Kt++),Hn=Bt.get(Kt++);Cn.add(In.charAt(Tn>>2)),Cn.add(In.charAt((Tn<<4|Hn>>4)&63)),Cn.add(In.charAt(Hn<<2&63))}else if(Kt==bn+1){var Wt=Bt.get(Kt++);Cn.add(In.charAt(Wt>>2)),Cn.add(In.charAt(Wt<<4&63))}var Gn=Cn.b;this.buf.b+="s",Gn.length==null?this.buf.b+="null":this.buf.b+=""+Gn.length,this.buf.b+=":",Gn==null?this.buf.b+="null":this.buf.b+=""+Gn;break;default:this.useCache&&this.cache.pop(),b.hxSerialize!=null?(this.buf.b+="C",this.serializeString(C.getClassName(B)),this.useCache&&this.cache.push(b),b.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(C.getClassName(B)),this.useCache&&this.cache.push(b),this.serializeFields(b))}break;case 4:if(z.__instanceof(b,Ri)){var hr=C.getClassName(b);this.buf.b+="A",this.serializeString(hr)}else if(z.__instanceof(b,Li))this.buf.b+="B",this.serializeString(C.getEnumName(b));else{if(this.useCache&&this.serializeRef(b))return;this.buf.b+="o",this.serializeFields(b)}break;case 7:var Zr=x[2];if(this.useCache){if(this.serializeRef(b))return;this.cache.pop()}this.useEnumIndex?this.buf.b+="j":this.buf.b+="w",this.serializeString(C.getEnumName(Zr)),this.useEnumIndex?(this.buf.b+=":",this.buf.b+=S.string(b[1])):this.serializeString(b[0]),this.buf.b+=":";var ls=b.length;this.buf.b+=S.string(ls-2);for(var Or=2;Or<ls;){var fs=Or++;this.serialize(b[fs])}this.useCache&&this.cache.push(b);break;case 5:throw new O("Cannot serialize function");default:throw new O("Cannot serialize "+S.string(b))}}},__class__:k};var M=function(b){this.buf=b,this.length=b.length,this.pos=0,this.scache=[],this.cache=[];var x=M.DEFAULT_RESOLVER;x==null&&(x=C,M.DEFAULT_RESOLVER=x),this.setResolver(x)};d["haxe.Unserializer"]=M,M.__name__=["haxe","Unserializer"],M.initCodes=function(){for(var b=[],x=0,A=M.BASE64.length;x<A;){var P=x++;b[M.BASE64.charCodeAt(P)]=P}return b},M.prototype={setResolver:function(b){b==null?this.resolver={resolveClass:function(x){return null},resolveEnum:function(x){return null}}:this.resolver=b},get:function(b){return this.buf.charCodeAt(b)},readDigits:function(){for(var b=0,x=!1,A=this.pos;;){var P=this.buf.charCodeAt(this.pos);if(P!=P)break;if(P==45){if(this.pos!=A)break;x=!0,this.pos++;continue}if(P<48||P>57)break;b=b*10+(P-48),this.pos++}return x&&(b*=-1),b},readFloat:function(){for(var b=this.pos;;){var x=this.buf.charCodeAt(this.pos);if(x>=43&&x<58||x==101||x==69)this.pos++;else break}return S.parseFloat(m.substr(this.buf,b,this.pos-b))},unserializeObject:function(b){for(;;){if(this.pos>=this.length)throw new O("Invalid object");if(this.buf.charCodeAt(this.pos)==103)break;var x=this.unserialize();if(typeof x!="string")throw new O("Invalid object key");var A=this.unserialize();b[x]=A}this.pos++},unserializeEnum:function(b,x){if(this.get(this.pos++)!=58)throw new O("Invalid enum format");var A=this.readDigits();if(A==0)return C.createEnum(b,x);for(var P=[];A-- >0;)P.push(this.unserialize());return C.createEnum(b,x,P)},unserialize:function(){var b=this.get(this.pos++);switch(b){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();case 100:return this.readFloat();case 121:var x=this.readDigits();if(this.get(this.pos++)!=58||this.length-this.pos<x)throw new O("Invalid string length");var A=m.substr(this.buf,this.pos,x);return this.pos+=x,A=decodeURIComponent(A.split("+").join(" ")),this.scache.push(A),A;case 107:return NaN;case 109:return-1/0;case 112:return 1/0;case 97:this.buf;var P=[];for(this.cache.push(P);;){var B=this.buf.charCodeAt(this.pos);if(B==104){this.pos++;break}if(B==117){this.pos++;var W=this.readDigits();P[P.length+W-1]=null}else P.push(this.unserialize())}return P;case 111:var ee={};return this.cache.push(ee),this.unserializeObject(ee),ee;case 114:var ce=this.readDigits();if(ce<0||ce>=this.cache.length)throw new O("Invalid reference");return this.cache[ce];case 82:var pe=this.readDigits();if(pe<0||pe>=this.scache.length)throw new O("Invalid string reference");return this.scache[pe];case 120:throw new O(this.unserialize());case 99:var Ie=this.unserialize(),De=this.resolver.resolveClass(Ie);if(De==null)throw new O("Class not found "+Ie);var Ne=C.createEmptyInstance(De);return this.cache.push(Ne),this.unserializeObject(Ne),Ne;case 119:var Ge=this.unserialize(),qe=this.resolver.resolveEnum(Ge);if(qe==null)throw new O("Enum not found "+Ge);var Je=this.unserializeEnum(qe,this.unserialize());return this.cache.push(Je),Je;case 106:var ct=this.unserialize(),ot=this.resolver.resolveEnum(ct);if(ot==null)throw new O("Enum not found "+ct);this.pos++;var yt=this.readDigits(),pt=C.getEnumConstructs(ot)[yt];if(pt==null)throw new O("Unknown enum index "+ct+"@"+yt);var It=this.unserializeEnum(ot,pt);return this.cache.push(It),It;case 108:var Nt=new y;for(this.cache.push(Nt),this.buf;this.buf.charCodeAt(this.pos)!=104;)Nt.add(this.unserialize());return this.pos++,Nt;case 98:var Ht=new V;for(this.cache.push(Ht),this.buf;this.buf.charCodeAt(this.pos)!=104;){var ln=this.unserialize();Ht.set(ln,this.unserialize())}return this.pos++,Ht;case 113:var Vt=new L;this.cache.push(Vt),this.buf;for(var Bt=this.get(this.pos++);Bt==58;){var Kt=this.readDigits();Vt.set(Kt,this.unserialize()),Bt=this.get(this.pos++)}if(Bt!=104)throw new O("Invalid IntMap format");return Vt;case 77:var bn=new N;for(this.cache.push(bn),this.buf;this.buf.charCodeAt(this.pos)!=104;){var Cn=this.unserialize();bn.set(Cn,this.unserialize())}return this.pos++,bn;case 118:var In;if(this.buf.charCodeAt(this.pos)>=48&&this.buf.charCodeAt(this.pos)<=57&&this.buf.charCodeAt(this.pos+1)>=48&&this.buf.charCodeAt(this.pos+1)<=57&&this.buf.charCodeAt(this.pos+2)>=48&&this.buf.charCodeAt(this.pos+2)<=57&&this.buf.charCodeAt(this.pos+3)>=48&&this.buf.charCodeAt(this.pos+3)<=57&&this.buf.charCodeAt(this.pos+4)==45){var Nn=m.substr(this.buf,this.pos,19);In=m.strDate(Nn),this.pos+=19}else{var Rn=this.readFloat(),Fn=new Date;Fn.setTime(Rn),In=Fn}return this.cache.push(In),In;case 115:var Tn=this.readDigits(),Hn=this.buf;if(this.get(this.pos++)!=58||this.length-this.pos<Tn)throw new O("Invalid bytes length");var Wt=M.CODES;Wt==null&&(Wt=M.initCodes(),M.CODES=Wt);var Gn=this.pos,hr=Tn&3,Zr;Zr=(Tn>>2)*3+(hr>=2?hr-1:0);for(var ls=Gn+(Tn-hr),Or=X.alloc(Zr),fs=0;Gn<ls;){var Zi=Wt[w.fastCodeAt(Hn,Gn++)],Bo=Wt[w.fastCodeAt(Hn,Gn++)];Or.set(fs++,Zi<<2|Bo>>4);var Oi=Wt[w.fastCodeAt(Hn,Gn++)];Or.set(fs++,Bo<<4|Oi>>2);var mi=Wt[w.fastCodeAt(Hn,Gn++)];Or.set(fs++,Oi<<6|mi)}if(hr>=2){var Ji=Wt[w.fastCodeAt(Hn,Gn++)],bo=Wt[w.fastCodeAt(Hn,Gn++)];if(Or.set(fs++,Ji<<2|bo>>4),hr==3){var ua=Wt[w.fastCodeAt(Hn,Gn++)];Or.set(fs++,bo<<4|ua>>2)}}return this.pos+=Tn,this.cache.push(Or),Or;case 67:var Ja=this.unserialize(),da=this.resolver.resolveClass(Ja);if(da==null)throw new O("Class not found "+Ja);var ha=C.createEmptyInstance(da);if(this.cache.push(ha),ha.hxUnserialize(this),this.get(this.pos++)!=103)throw new O("Invalid custom data");return ha;case 65:var fa=this.unserialize(),Nl=this.resolver.resolveClass(fa);if(Nl==null)throw new O("Class not found "+fa);return Nl;case 66:var _h=this.unserialize(),ed=this.resolver.resolveEnum(_h);if(ed==null)throw new O("Enum not found "+_h);return ed}throw this.pos--,new O("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:M};var L=function(){this.h={}};d["haxe.ds.IntMap"]=L,L.__name__=["haxe","ds","IntMap"],L.__interfaces__=[T],L.prototype={set:function(b,x){this.h[b]=x},remove:function(b){return this.h.hasOwnProperty(b)?(delete this.h[b],!0):!1},keys:function(){var b=[];for(var x in this.h)this.h.hasOwnProperty(x)&&b.push(x|0);return m.iter(b)},__class__:L};var N=function(){this.h={},this.h.__keys__={}};d["haxe.ds.ObjectMap"]=N,N.__name__=["haxe","ds","ObjectMap"],N.__interfaces__=[T],N.prototype={set:function(b,x){var A=b.__id__||(b.__id__=++N.count);this.h[A]=x,this.h.__keys__[A]=b},keys:function(){var b=[];for(var x in this.h.__keys__)this.h.hasOwnProperty(x)&&b.push(this.h.__keys__[x]);return m.iter(b)},__class__:N};var G=d["haxe.ds.Option"]={__ename__:["haxe","ds","Option"],__constructs__:["Some","None"]};G.Some=function(b){var x=["Some",0,b];return x.__enum__=G,x.toString=h,x},G.None=["None",1],G.None.toString=h,G.None.__enum__=G;var V=function(){this.h={}};d["haxe.ds.StringMap"]=V,V.__name__=["haxe","ds","StringMap"],V.__interfaces__=[T],V.prototype={set:function(b,x){Us[b]!=null?this.setReserved(b,x):this.h[b]=x},get:function(b){return Us[b]!=null?this.getReserved(b):this.h[b]},setReserved:function(b,x){this.rh==null&&(this.rh={}),this.rh["$"+b]=x},getReserved:function(b){return this.rh==null?null:this.rh["$"+b]},keys:function(){var b=this.arrayKeys();return m.iter(b)},arrayKeys:function(){var b=[];for(var x in this.h)this.h.hasOwnProperty(x)&&b.push(x);if(this.rh!=null)for(var x in this.rh)x.charCodeAt(0)==36&&b.push(x.substr(1));return b},__class__:V};var X=function(b){this.length=b.byteLength,this.b=new Qu(b),this.b.bufferValue=b,b.hxBytes=this,b.bytes=this.b};d["haxe.io.Bytes"]=X,X.__name__=["haxe","io","Bytes"],X.alloc=function(b){return new X(new zs(b))},X.prototype={get:function(b){return this.b[b]},set:function(b,x){this.b[b]=x&255},__class__:X};var F=d["haxe.io.Error"]={__ename__:["haxe","io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};F.Blocked=["Blocked",0],F.Blocked.toString=h,F.Blocked.__enum__=F,F.Overflow=["Overflow",1],F.Overflow.toString=h,F.Overflow.__enum__=F,F.OutsideBounds=["OutsideBounds",2],F.OutsideBounds.toString=h,F.OutsideBounds.__enum__=F,F.Custom=function(b){var x=["Custom",3,b];return x.__enum__=F,x.toString=h,x};var $=function(){};d["haxe.io.FPHelper"]=$,$.__name__=["haxe","io","FPHelper"],$.i32ToFloat=function(b){var x=1-(b>>>31<<1),A=b>>>23&255,P=b&8388607;return P==0&&A==0?0:x*(1+Math.pow(2,-23)*P)*Math.pow(2,A-127)},$.floatToI32=function(b){if(b==0)return 0;var x;b<0?x=-b:x=b;var A=Math.floor(Math.log(x)/.6931471805599453);A<-127?A=-127:A>128&&(A=128);var P=Math.round((x/Math.pow(2,A)-1)*8388608)&8388607;return(b<0?-2147483648:0)|A+127<<23|P},$.i64ToDouble=function(b,x){var A=1-(x>>>31<<1),P=(x>>20&2047)-1023,B=(x&1048575)*4294967296+(b>>>31)*2147483648+(b&2147483647);return B==0&&P==-1023?0:A*(1+Math.pow(2,-52)*B)*Math.pow(2,P)},$.doubleToI64=function(b){var x=$.i64tmp;if(b==0)x.low=0,x.high=0;else{var A;b<0?A=-b:A=b;var P=Math.floor(Math.log(A)/.6931471805599453),B,W=(A/Math.pow(2,P)-1)*4503599627370496;B=Math.round(W);var ee=B|0,ce=B/4294967296|0;x.low=ee,x.high=(b<0?-2147483648:0)|P+1023<<20|ce}return x};var O=function(b){Error.call(this),this.val=b,this.message=String(b),Error.captureStackTrace&&Error.captureStackTrace(this,O)};d["js._Boot.HaxeError"]=O,O.__name__=["js","_Boot","HaxeError"],O.__super__=Error,O.prototype=f(Error.prototype,{__class__:O});var z=function(){};d["js.Boot"]=z,z.__name__=["js","Boot"],z.getClass=function(b){if(b instanceof Array&&b.__enum__==null)return Array;var x=b.__class__;if(x!=null)return x;var A=z.__nativeClassName(b);return A!=null?z.__resolveNativeClass(A):null},z.__string_rec=function(b,x){if(b==null)return"null";if(x.length>=5)return"<...>";var A=typeof b;switch(A=="function"&&(b.__name__||b.__ename__)&&(A="object"),A){case"object":if(b instanceof Array){if(b.__enum__){if(b.length==2)return b[0];var P=b[0]+"(";x+="	";for(var B=2,W=b.length;B<W;){var ee=B++;ee!=2?P+=","+z.__string_rec(b[ee],x):P+=z.__string_rec(b[ee],x)}return P+")"}var ce=b.length,pe="[";x+="	";for(var Ie=0;Ie<ce;){var De=Ie++;pe+=(De>0?",":"")+z.__string_rec(b[De],x)}return pe+="]",pe}var Ne;try{Ne=b.toString}catch(ot){return ot instanceof O&&(ot=ot.val),"???"}if(Ne!=null&&Ne!=Object.toString&&typeof Ne=="function"){var Ge=b.toString();if(Ge!="[object Object]")return Ge}var qe=null,Je=`{
`;x+="	";var ct=b.hasOwnProperty!=null;for(var qe in b)ct&&!b.hasOwnProperty(qe)||qe=="prototype"||qe=="__class__"||qe=="__super__"||qe=="__interfaces__"||qe=="__properties__"||(Je.length!=2&&(Je+=`, 
`),Je+=x+qe+" : "+z.__string_rec(b[qe],x));return x=x.substring(1),Je+=`
`+x+"}",Je;case"function":return"<function>";case"string":return b;default:return String(b)}},z.__interfLoop=function(b,x){if(b==null)return!1;if(b==x)return!0;var A=b.__interfaces__;if(A!=null)for(var P=0,B=A.length;P<B;){var W=P++,ee=A[W];if(ee==x||z.__interfLoop(ee,x))return!0}return z.__interfLoop(b.__super__,x)},z.__instanceof=function(b,x){if(x==null)return!1;switch(x){case Fc:return(b|0)===b;case Bc:return typeof b=="number";case Kr:return typeof b=="boolean";case String:return typeof b=="string";case Array:return b instanceof Array&&b.__enum__==null;case Pi:return!0;default:if(b!=null){if(typeof x=="function"){if(b instanceof x||z.__interfLoop(z.getClass(b),x))return!0}else if(typeof x=="object"&&z.__isNativeObj(x)&&b instanceof x)return!0}else return!1;return x==Ri&&b.__name__!=null||x==Li&&b.__ename__!=null?!0:b.__enum__==x}},z.__nativeClassName=function(b){var x=z.__toStr.call(b).slice(8,-1);return x=="Object"||x=="Function"||x=="Math"||x=="JSON"?null:x},z.__isNativeObj=function(b){return z.__nativeClassName(b)!=null},z.__resolveNativeClass=function(b){return u[b]};var re=function(b){if(b instanceof Array&&b.__enum__==null)this.a=b,this.byteLength=b.length;else{var x=b;this.a=[];for(var A=0;A<x;){var P=A++;this.a[P]=0}this.byteLength=x}};d["js.html.compat.ArrayBuffer"]=re,re.__name__=["js","html","compat","ArrayBuffer"],re.sliceImpl=function(b,x){var A=new Qu(this,b,x==null?null:x-b),P=new zs(A.byteLength),B=new Qu(P);return B.set(A),P},re.prototype={slice:function(b,x){return new re(this.a.slice(b,x))},__class__:re};var q=function(b,x,A){if(this.buf=b,x==null?this.offset=0:this.offset=x,A==null?this.length=b.byteLength-this.offset:this.length=A,this.offset<0||this.length<0||this.offset+this.length>b.byteLength)throw new O(F.OutsideBounds)};d["js.html.compat.DataView"]=q,q.__name__=["js","html","compat","DataView"],q.prototype={getInt8:function(b){var x=this.buf.a[this.offset+b];return x>=128?x-256:x},getUint8:function(b){return this.buf.a[this.offset+b]},getInt16:function(b,x){var A=this.getUint16(b,x);return A>=32768?A-65536:A},getUint16:function(b,x){return x?this.buf.a[this.offset+b]|this.buf.a[this.offset+b+1]<<8:this.buf.a[this.offset+b]<<8|this.buf.a[this.offset+b+1]},getInt32:function(b,x){var A=this.offset+b,P=this.buf.a[A++],B=this.buf.a[A++],W=this.buf.a[A++],ee=this.buf.a[A++];return x?P|B<<8|W<<16|ee<<24:ee|W<<8|B<<16|P<<24},getUint32:function(b,x){var A=this.getInt32(b,x);return A<0?A+4294967296:A},getFloat32:function(b,x){return $.i32ToFloat(this.getInt32(b,x))},getFloat64:function(b,x){var A=this.getInt32(b,x),P=this.getInt32(b+4,x);return $.i64ToDouble(x?A:P,x?P:A)},setInt8:function(b,x){x<0?this.buf.a[b+this.offset]=x+128&255:this.buf.a[b+this.offset]=x&255},setUint8:function(b,x){this.buf.a[b+this.offset]=x&255},setInt16:function(b,x,A){this.setUint16(b,x<0?x+65536:x,A)},setUint16:function(b,x,A){var P=b+this.offset;A?(this.buf.a[P]=x&255,this.buf.a[P++]=x>>8&255):(this.buf.a[P++]=x>>8&255,this.buf.a[P]=x&255)},setInt32:function(b,x,A){this.setUint32(b,x,A)},setUint32:function(b,x,A){var P=b+this.offset;A?(this.buf.a[P++]=x&255,this.buf.a[P++]=x>>8&255,this.buf.a[P++]=x>>16&255,this.buf.a[P++]=x>>>24):(this.buf.a[P++]=x>>>24,this.buf.a[P++]=x>>16&255,this.buf.a[P++]=x>>8&255,this.buf.a[P++]=x&255)},setFloat32:function(b,x,A){this.setUint32(b,$.floatToI32(x),A)},setFloat64:function(b,x,A){var P=$.doubleToI64(x);A?(this.setUint32(b,P.low),this.setUint32(b,P.high)):(this.setUint32(b,P.high),this.setUint32(b,P.low))},__class__:q};var le=function(){};d["js.html.compat.Uint8Array"]=le,le.__name__=["js","html","compat","Uint8Array"],le._new=function(b,x,A){var P;if(typeof b=="number"){P=[];for(var B=0;B<b;){var W=B++;P[W]=0}P.byteLength=P.length,P.byteOffset=0,P.buffer=new re(P)}else if(z.__instanceof(b,re)){var ee=b;x==null&&(x=0),A==null&&(A=ee.byteLength-x),x==0?P=ee.a:P=ee.a.slice(x,x+A),P.byteLength=P.length,P.byteOffset=x,P.buffer=ee}else if(b instanceof Array&&b.__enum__==null)P=b.slice(),P.byteLength=P.length,P.byteOffset=0,P.buffer=new re(P);else throw new O("TODO "+S.string(b));return P.subarray=le._subarray,P.set=le._set,P},le._set=function(b,x){var A=this;if(z.__instanceof(b.buffer,re)){var P=b;if(b.byteLength+x>A.byteLength)throw new O("set() outside of range");for(var B=0,W=b.byteLength;B<W;){var ee=B++;A[ee+x]=P[ee]}}else if(b instanceof Array&&b.__enum__==null){var ce=b;if(ce.length+x>A.byteLength)throw new O("set() outside of range");for(var pe=0,Ie=ce.length;pe<Ie;){var De=pe++;A[De+x]=ce[De]}}else throw new O("TODO")},le._subarray=function(b,x){var A=this,P=le._new(A.slice(b,x));return P.byteOffset=b,P};var fe=function(b){this._resolved=!1,this._pending=!1,this._errorPending=!1,this._fulfilled=!1,this._update=[],this._error=[],this._errored=!1,b!=null&&fe.link(b,this,function(x){return x})};d["promhx.base.AsyncBase"]=fe,fe.__name__=["promhx","base","AsyncBase"],fe.link=function(b,x,A){b._update.push({async:x,linkf:function(P){x.handleResolve(A(P))}}),fe.immediateLinkUpdate(b,x,A)},fe.immediateLinkUpdate=function(b,x,A){if(b._errored&&!b._errorPending&&!(b._error.length>0)&&x.handleError(b._errorVal),b._resolved&&!b._pending)try{x.handleResolve(A(b._val))}catch(P){P instanceof O&&(P=P.val),x.handleError(P)}},fe.linkAll=function(b,x){for(var A=function(W,ee,ce){if(W.length==0||fe.allFulfilled(W)){for(var pe,Ie=[],De=Sn(b)();De.hasNext();){var Ne=De.next();Ie.push(Ne==ee?ce:Ne._val)}pe=Ie,x.handleResolve(pe)}},P=Sn(b)();P.hasNext();){var B=P.next();B._update.push({async:x,linkf:function(W,ee,ce){return function(pe){W(ee,ce,pe)}}(A,function(W){for(var ee,ce=[],pe=Sn(b)();pe.hasNext();){var Ie=pe.next();Ie!=B&&ce.push(Ie)}return ee=ce,ee}(),B)})}fe.allFulfilled(b)&&x.handleResolve(function(W){for(var ee,ce=[],pe=Sn(b)();pe.hasNext();){var Ie=pe.next();ce.push(Ie._val)}return ee=ce,ee}())},fe.pipeLink=function(b,x,A){var P=!1,B=function(W){if(!P){P=!0;var ee=A(W);ee._update.push({async:x,linkf:ts(x,x.handleResolve)}),fe.immediateLinkUpdate(ee,x,function(ce){return ce})}};if(b._update.push({async:x,linkf:B}),b._resolved&&!b._pending)try{B(b._val)}catch(W){W instanceof O&&(W=W.val),x.handleError(W)}},fe.allResolved=function(b){for(var x=Sn(b)();x.hasNext();){var A=x.next();if(!A._resolved)return!1}return!0},fe.allFulfilled=function(b){for(var x=Sn(b)();x.hasNext();){var A=x.next();if(!A._fulfilled)return!1}return!0},fe.prototype={catchError:function(b){return this._error.push(b),this},errorThen:function(b){return this._errorMap=b,this},isResolved:function(){return this._resolved},isErrored:function(){return this._errored},isErrorHandled:function(){return this._error.length>0},isErrorPending:function(){return this._errorPending},isFulfilled:function(){return this._fulfilled},isPending:function(){return this._pending},handleResolve:function(b){this._resolve(b)},_resolve:function(b){var x=this;this._pending?xe.enqueue(function(A,P){return function(){A(P)}}(ts(this,this._resolve),b)):(this._resolved=!0,this._pending=!0,xe.queue.add(function(){x._val=b;for(var A=0,P=x._update;A<P.length;){var B=P[A];++A;try{B.linkf(b)}catch(W){W instanceof O&&(W=W.val),B.async.handleError(W)}}x._fulfilled=!0,x._pending=!1}),xe.continueOnNextLoop())},handleError:function(b){this._handleError(b)},_handleError:function(b){var x=this,A=function(P){if(x._error.length>0)for(var B=0,W=x._error;B<W.length;){var ee=W[B];++B,ee(P)}else if(x._update.length>0)for(var ce=0,pe=x._update;ce<pe.length;){var Ie=pe[ce];++ce,Ie.async.handleError(P)}else throw new O(P);x._errorPending=!1};this._errorPending||(this._errorPending=!0,this._errored=!0,this._errorVal=b,xe.queue.add(function(){if(x._errorMap!=null)try{x._resolve(x._errorMap(b))}catch(P){P instanceof O&&(P=P.val),A(P)}else A(b)}),xe.continueOnNextLoop())},then:function(b){var x=new fe(null);return fe.link(this,x,b),x},unlink:function(b){var x=this;xe.queue.add(function(){x._update=x._update.filter(function(A){return A.async!=b})}),xe.continueOnNextLoop()},isLinked:function(b){for(var x=!1,A=0,P=this._update;A<P.length;){var B=P[A];if(++A,B.async==b)return!0}return x},__class__:fe};var se=c.promhx.Deferred=function(){fe.call(this)};d["promhx.Deferred"]=se,se.__name__=["promhx","Deferred"],se.__super__=fe,se.prototype=f(fe.prototype,{resolve:function(b){this.handleResolve(b)},throwError:function(b){this.handleError(b)},promise:function(){return new ye(this)},stream:function(){return new we(this)},publicStream:function(){return new ve(this)},__class__:se});var ye=c.promhx.Promise=function(b){fe.call(this,b),this._rejected=!1};d["promhx.Promise"]=ye,ye.__name__=["promhx","Promise"],ye.whenAll=function(b){var x=new ye(null);return fe.linkAll(b,x),x},ye.promise=function(b){var x=new ye;return x.handleResolve(b),x},ye.__super__=fe,ye.prototype=f(fe.prototype,{isRejected:function(){return this._rejected},reject:function(b){this._rejected=!0,this.handleError(b)},handleResolve:function(b){if(this._resolved){var x="Promise has already been resolved";throw new O(je.AlreadyResolved(x))}this._resolve(b)},then:function(b){var x=new ye(null);return fe.link(this,x,b),x},unlink:function(b){var x=this;xe.queue.add(function(){if(x._fulfilled)x._update=x._update.filter(function(P){return P.async!=b});else{var A="Downstream Promise is not fullfilled";x.handleError(je.DownstreamNotFullfilled(A))}}),xe.continueOnNextLoop()},handleError:function(b){this._rejected=!0,this._handleError(b)},pipe:function(b){var x=new ye(null);return fe.pipeLink(this,x,b),x},errorPipe:function(b){var x=new ye;return this.catchError(function(A){var P=b(A);P.then(ts(x,x._resolve))}),this.then(ts(x,x._resolve)),x},__class__:ye});var we=c.promhx.Stream=function(b){fe.call(this,b),this._end_promise=new ye};d["promhx.Stream"]=we,we.__name__=["promhx","Stream"],we.foreach=function(b){for(var x=new we(null),A=Sn(b)();A.hasNext();){var P=A.next();x.handleResolve(P)}return x.end(),x},we.wheneverAll=function(b){var x=new we(null);return fe.linkAll(b,x),x},we.concatAll=function(b){for(var x=new we(null),A=Sn(b)();A.hasNext();){var P=A.next();x.concat(P)}return x},we.mergeAll=function(b){for(var x=new we(null),A=Sn(b)();A.hasNext();){var P=A.next();x.merge(P)}return x},we.stream=function(b){var x=new we(null);return x.handleResolve(b),x},we.__super__=fe,we.prototype=f(fe.prototype,{then:function(b){var x=new we(null);return fe.link(this,x,b),this._end_promise._update.push({async:x._end_promise,linkf:function(A){x.end()}}),x},detachStream:function(b){for(var x=[],A=!1,P=0,B=this._update;P<B.length;){var W=B[P];++P,W.async==b?(this._end_promise._update=this._end_promise._update.filter(function(ee){return ee.async!=b._end_promise}),A=!0):x.push(W)}return this._update=x,A},first:function(){var b=new ye(null);return this.then(function(x){b._resolved||b.handleResolve(x)}),b},handleResolve:function(b){!this._end&&!this._pause&&this._resolve(b)},pause:function(b){b==null&&(b=!this._pause),this._pause=b},pipe:function(b){var x=new we(null);return fe.pipeLink(this,x,b),this._end_promise.then(function(A){x.end()}),x},errorPipe:function(b){var x=new we(null);return this.catchError(function(A){var P=b(A);P.then(ts(x,x._resolve)),P._end_promise.then((Ms=x._end_promise,ts(Ms,Ms._resolve)))}),this.then(ts(x,x._resolve)),this._end_promise.then(function(A){x.end()}),x},handleEnd:function(){if(this._pending)xe.queue.add(ts(this,this.handleEnd)),xe.continueOnNextLoop();else{if(this._end_promise._resolved)return;this._end=!0;var b;this._resolved?b=G.Some(this._val):b=G.None,this._end_promise.handleResolve(b),this._update=[],this._error=[]}},end:function(){return xe.queue.add(ts(this,this.handleEnd)),xe.continueOnNextLoop(),this},endThen:function(b){return this._end_promise.then(b)},filter:function(b){var x=new we(null);return this._update.push({async:x,linkf:function(A){b(A)&&x.handleResolve(A)}}),fe.immediateLinkUpdate(this,x,function(A){return A}),x},concat:function(b){var x=new we(null);return this._update.push({async:x,linkf:ts(x,x.handleResolve)}),fe.immediateLinkUpdate(this,x,function(A){return A}),this._end_promise.then(function(A){b.pipe(function(P){return x.handleResolve(P),x}),b._end_promise.then(function(P){x.end()})}),x},merge:function(b){var x=new we(null);return this._update.push({async:x,linkf:ts(x,x.handleResolve)}),b._update.push({async:x,linkf:ts(x,x.handleResolve)}),fe.immediateLinkUpdate(this,x,function(A){return A}),fe.immediateLinkUpdate(b,x,function(A){return A}),x},__class__:we});var ve=c.promhx.PublicStream=function(b){we.call(this,b)};d["promhx.PublicStream"]=ve,ve.__name__=["promhx","PublicStream"],ve.publicstream=function(b){var x=new ve(null);return x.handleResolve(b),x},ve.__super__=we,ve.prototype=f(we.prototype,{resolve:function(b){this.handleResolve(b)},throwError:function(b){this.handleError(b)},update:function(b){this.handleResolve(b)},__class__:ve});var xe=function(){};d["promhx.base.EventLoop"]=xe,xe.__name__=["promhx","base","EventLoop"],xe.enqueue=function(b){xe.queue.add(b),xe.continueOnNextLoop()},xe.set_nextLoop=function(b){if(xe.nextLoop!=null)throw new O("nextLoop has already been set");return xe.nextLoop=b,xe.nextLoop},xe.queueEmpty=function(){return xe.queue.isEmpty()},xe.finish=function(b){b==null&&(b=1e3);for(var x=null;b-- >0&&(x=xe.queue.pop())!=null;)x();return xe.queue.isEmpty()},xe.clear=function(){xe.queue=new y},xe.f=function(){var b=xe.queue.pop();b!=null&&b(),xe.queue.isEmpty()||xe.continueOnNextLoop()},xe.continueOnNextLoop=function(){xe.nextLoop!=null?xe.nextLoop(xe.f):setImmediate(xe.f)};var je=d["promhx.error.PromiseError"]={__ename__:["promhx","error","PromiseError"],__constructs__:["AlreadyResolved","DownstreamNotFullfilled"]};je.AlreadyResolved=function(b){var x=["AlreadyResolved",0,b];return x.__enum__=je,x.toString=h,x},je.DownstreamNotFullfilled=function(b){var x=["DownstreamNotFullfilled",1,b];return x.__enum__=je,x.toString=h,x};var nt=function(){};d["verb.Verb"]=nt,nt.__name__=["verb","Verb"],nt.main=function(){l.log("verb 2.1.0")};var ue=function(){};d["verb.core.ArrayExtensions"]=ue,ue.__name__=["verb","core","ArrayExtensions"],ue.alloc=function(b,x){if(!(x<0))for(;b.length<x;)b.push(null)},ue.reversed=function(b){var x=b.slice();return x.reverse(),x},ue.last=function(b){return b[b.length-1]},ue.first=function(b){return b[0]},ue.spliceAndInsert=function(b,x,A,P){b.splice(x,A),b.splice(x,0,P)},ue.left=function(b){if(b.length==0)return[];var x=Math.ceil(b.length/2);return b.slice(0,x)},ue.right=function(b){if(b.length==0)return[];var x=Math.ceil(b.length/2);return b.slice(x)},ue.rightWithPivot=function(b){if(b.length==0)return[];var x=Math.ceil(b.length/2);return b.slice(x-1)},ue.unique=function(b,x){if(b.length==0)return[];for(var A=[b.pop()];b.length>0;){for(var P=b.pop(),B=!0,W=0;W<A.length;){var ee=A[W];if(++W,x(P,ee)){B=!1;break}}B&&A.push(P)}return A};var j=function(){};d["verb.core.Binomial"]=j,j.__name__=["verb","core","Binomial"],j.get=function(b,x){if(x==0)return 1;if(b==0||x>b)return 0;if(x>b-x&&(x=b-x),j.memo_exists(b,x))return j.get_memo(b,x);for(var A=1,P=b,B=1,W=x+1;B<W;){var ee=B++;if(j.memo_exists(P,ee)){b--,A=j.get_memo(P,ee);continue}A*=b--,A/=ee,j.memoize(P,ee,A)}return A},j.get_no_memo=function(b,x){if(x==0)return 1;if(b==0||x>b)return 0;x>b-x&&(x=b-x);for(var A=1,P=1,B=x+1;P<B;){var W=P++;A*=b--,A/=W}return A},j.memo_exists=function(b,x){return j.memo.h.hasOwnProperty(b)&&j.memo.h[b].h.hasOwnProperty(x)},j.get_memo=function(b,x){return j.memo.h[b].h[x]},j.memoize=function(b,x,A){j.memo.h.hasOwnProperty(b)||j.memo.set(b,new L),j.memo.h[b].h[x]=A};var he=c.core.BoundingBox=function(b){this.max=null,this.min=null,this.dim=3,this.initialized=!1,b!=null&&this.addRange(b)};d["verb.core.BoundingBox"]=he,he.__name__=["verb","core","BoundingBox"],he.intervalsOverlap=function(b,x,A,P,B){B==null&&(B=-1);var W;B<-.5?W=K.TOLERANCE:W=B;var ee=Math.min(b,x)-W,ce=Math.max(b,x)+W,pe=Math.min(A,P)-W,Ie=Math.max(A,P)+W;return ee>=pe&&ee<=Ie||ce>=pe&&ce<=Ie||pe>=ee&&pe<=ce||Ie>=ee&&Ie<=ce},he.prototype={fromPoint:function(b){return new he([b])},add:function(b){if(!this.initialized)return this.dim=b.length,this.min=b.slice(0),this.max=b.slice(0),this.initialized=!0,this;for(var x=0,A=this.dim;x<A;){var P=x++;b[P]>this.max[P]&&(this.max[P]=b[P]),b[P]<this.min[P]&&(this.min[P]=b[P])}return this},addRange:function(b){for(var x=b.length,A=0;A<x;){var P=A++;this.add(b[P])}return this},contains:function(b,x){return x==null&&(x=-1),this.initialized?this.intersects(new he([b]),x):!1},intersects:function(b,x){if(x==null&&(x=-1),!this.initialized||!b.initialized)return!1;for(var A=this.min,P=this.max,B=b.min,W=b.max,ee=0,ce=this.dim;ee<ce;){var pe=ee++;if(!he.intervalsOverlap(A[pe],P[pe],B[pe],W[pe],x))return!1}return!0},clear:function(){return this.initialized=!1,this},getLongestAxis:function(){for(var b=0,x=0,A=0,P=this.dim;A<P;){var B=A++,W=this.getAxisLength(B);W>b&&(b=W,x=B)}return x},getAxisLength:function(b){return b<0||b>this.dim-1?0:Math.abs(this.min[b]-this.max[b])},intersect:function(b,x){if(!this.initialized)return null;var A=this.min,P=this.max,B=b.min,W=b.max;if(!this.intersects(b,x))return null;for(var ee=[],ce=[],pe=0,Ie=this.dim;pe<Ie;){var De=pe++;ee.push(Math.min(P[De],W[De])),ce.push(Math.max(A[De],B[De]))}return new he([ce,ee])},__class__:he};var K=c.core.Constants=function(){};d["verb.core.Constants"]=K,K.__name__=["verb","core","Constants"];var Fe=c.core.SerializableBase=function(){};d["verb.core.SerializableBase"]=Fe,Fe.__name__=["verb","core","SerializableBase"],Fe.prototype={serialize:function(){var b=new k;return b.serialize(this),b.toString()},__class__:Fe};var Oe=c.core.Plane=function(b,x){this.origin=b,this.normal=x};d["verb.core.Plane"]=Oe,Oe.__name__=["verb","core","Plane"],Oe.__super__=Fe,Oe.prototype=f(Fe.prototype,{__class__:Oe});var Re=c.core.Ray=function(b,x){this.origin=b,this.dir=x};d["verb.core.Ray"]=Re,Re.__name__=["verb","core","Ray"],Re.__super__=Fe,Re.prototype=f(Fe.prototype,{__class__:Re});var te=c.core.NurbsCurveData=function(b,x,A){this.degree=b,this.controlPoints=A,this.knots=x};d["verb.core.NurbsCurveData"]=te,te.__name__=["verb","core","NurbsCurveData"],te.__super__=Fe,te.prototype=f(Fe.prototype,{__class__:te});var oe=c.core.NurbsSurfaceData=function(b,x,A,P,B){this.degreeU=b,this.degreeV=x,this.knotsU=A,this.knotsV=P,this.controlPoints=B};d["verb.core.NurbsSurfaceData"]=oe,oe.__name__=["verb","core","NurbsSurfaceData"],oe.__super__=Fe,oe.prototype=f(Fe.prototype,{__class__:oe});var Ee=c.core.MeshData=function(b,x,A,P){this.faces=b,this.points=x,this.normals=A,this.uvs=P};d["verb.core.MeshData"]=Ee,Ee.__name__=["verb","core","MeshData"],Ee.empty=function(){return new Ee([],[],[],[])},Ee.__super__=Fe,Ee.prototype=f(Fe.prototype,{__class__:Ee});var J=c.core.PolylineData=function(b,x){this.points=b,this.params=x};d["verb.core.PolylineData"]=J,J.__name__=["verb","core","PolylineData"],J.__super__=Fe,J.prototype=f(Fe.prototype,{__class__:J});var Q=c.core.VolumeData=function(b,x,A,P,B,W,ee){this.degreeU=b,this.degreeV=x,this.degreeW=A,this.knotsU=P,this.knotsV=B,this.knotsW=W,this.controlPoints=ee};d["verb.core.VolumeData"]=Q,Q.__name__=["verb","core","VolumeData"],Q.__super__=Fe,Q.prototype=f(Fe.prototype,{__class__:Q});var _e=c.core.Pair=function(b,x){this.item0=b,this.item1=x};d["verb.core.Pair"]=_e,_e.__name__=["verb","core","Pair"],_e.prototype={__class__:_e};var ie=c.core.Interval=function(b,x){this.min=b,this.max=x};d["verb.core.Interval"]=ie,ie.__name__=["verb","core","Interval"],ie.prototype={__class__:ie};var Te=c.core.CurveCurveIntersection=function(b,x,A,P){this.point0=b,this.point1=x,this.u0=A,this.u1=P};d["verb.core.CurveCurveIntersection"]=Te,Te.__name__=["verb","core","CurveCurveIntersection"],Te.prototype={__class__:Te};var We=c.core.CurveSurfaceIntersection=function(b,x,A,P){this.u=b,this.uv=x,this.curvePoint=A,this.surfacePoint=P};d["verb.core.CurveSurfaceIntersection"]=We,We.__name__=["verb","core","CurveSurfaceIntersection"],We.prototype={__class__:We};var ut=c.core.MeshIntersectionPoint=function(b,x,A,P,B){this.visited=!1,this.adj=null,this.opp=null,this.uv0=b,this.uv1=x,this.point=A,this.faceIndex0,this.faceIndex1};d["verb.core.MeshIntersectionPoint"]=ut,ut.__name__=["verb","core","MeshIntersectionPoint"],ut.prototype={__class__:ut};var lt=c.core.PolylineMeshIntersection=function(b,x,A,P,B){this.point=b,this.u=x,this.uv=A,this.polylineIndex=P,this.faceIndex=B};d["verb.core.PolylineMeshIntersection"]=lt,lt.__name__=["verb","core","PolylineMeshIntersection"],lt.prototype={__class__:lt};var St=c.core.SurfaceSurfaceIntersectionPoint=function(b,x,A,P){this.uv0=b,this.uv1=x,this.point=A,this.dist=P};d["verb.core.SurfaceSurfaceIntersectionPoint"]=St,St.__name__=["verb","core","SurfaceSurfaceIntersectionPoint"],St.prototype={__class__:St};var Ot=c.core.TriSegmentIntersection=function(b,x,A,P){this.point=b,this.s=x,this.t=A,this.p=P};d["verb.core.TriSegmentIntersection"]=Ot,Ot.__name__=["verb","core","TriSegmentIntersection"],Ot.prototype={__class__:Ot};var et=c.core.CurveTriPoint=function(b,x,A){this.u=b,this.point=x,this.uv=A};d["verb.core.CurveTriPoint"]=et,et.__name__=["verb","core","CurveTriPoint"],et.prototype={__class__:et};var ht=function(b,x,A,P,B){B==null&&(B=!1),P==null&&(P=-1),this.uv=A,this.point=b,this.normal=x,this.id=P,this.degen=B};d["verb.core.SurfacePoint"]=ht,ht.__name__=["verb","core","SurfacePoint"],ht.fromUv=function(b,x){return new ht(null,null,[b,x])},ht.prototype={__class__:ht};var Mt=c.core.CurvePoint=function(b,x){this.u=b,this.pt=x};d["verb.core.CurvePoint"]=Mt,Mt.__name__=["verb","core","CurvePoint"],Mt.prototype={__class__:Mt};var ze=c.core.KdTree=function(b,x){this.dim=3,this.points=b,this.distanceFunction=x,this.dim=b[0].point.length,this.root=this.buildTree(b,0,null)};d["verb.core.KdTree"]=ze,ze.__name__=["verb","core","KdTree"],ze.prototype={buildTree:function(b,x,A){var P=x%this.dim,B,W;return b.length==0?null:b.length==1?new Ve(b[0],P,A):(b.sort(function(ee,ce){var pe=ee.point[P]-ce.point[P];return pe==0?0:pe>0?1:-1}),B=Math.floor(b.length/2),W=new Ve(b[B],P,A),W.left=this.buildTree(b.slice(0,B),x+1,W),W.right=this.buildTree(b.slice(B+1),x+1,W),W)},nearest:function(b,x,A){var P=this,B=new Me(function(Ne){return-Ne.item1}),W,ee=null;ee=function(Ne){for(var Ge,qe=Ne.dimension,Je=P.distanceFunction(b,Ne.kdPoint.point),ct,ot=[],yt=0,pt=P.dim;yt<pt;)yt++,ot.push(0);ct=ot;for(var It,Nt,Ht=function(Kt,bn){B.push(new _e(Kt,bn)),B.size()>x&&B.pop()},ln=0,Vt=P.dim;ln<Vt;){var Bt=ln++;Bt==Ne.dimension?ct[Bt]=b[Bt]:ct[Bt]=Ne.kdPoint.point[Bt]}if(It=P.distanceFunction(ct,Ne.kdPoint.point),Ne.right==null&&Ne.left==null){(B.size()<x||Je<B.peek().item1)&&Ht(Ne,Je);return}Ne.right==null?Ge=Ne.left:Ne.left==null?Ge=Ne.right:b[qe]<Ne.kdPoint.point[qe]?Ge=Ne.left:Ge=Ne.right,ee(Ge),(B.size()<x||Je<B.peek().item1)&&Ht(Ne,Je),(B.size()<x||Math.abs(It)<B.peek().item1)&&(Ge==Ne.left?Nt=Ne.right:Nt=Ne.left,Nt!=null&&ee(Nt))},W=ee;for(var ce=0;ce<x;)ce++,B.push(new _e(null,A));W(this.root);for(var pe=[],Ie=0;Ie<x;){var De=Ie++;B.content[De].item0!=null&&pe.push(new _e(B.content[De].item0.kdPoint,B.content[De].item1))}return pe},__class__:ze};var Me=function(b){this.content=[],this.scoreFunction=b};d["verb.core.BinaryHeap"]=Me,Me.__name__=["verb","core","BinaryHeap"],Me.prototype={push:function(b){this.content.push(b),this.bubbleUp(this.content.length-1)},pop:function(){var b=this.content[0],x=this.content.pop();return this.content.length>0&&(this.content[0]=x,this.sinkDown(0)),b},peek:function(){return this.content[0]},remove:function(b){for(var x=this.content.length,A=0;A<x;){var P=A++;if(this.content[P]==b){var B=this.content.pop();P!=x-1&&(this.content[P]=B,this.scoreFunction(B)<this.scoreFunction(b)?this.bubbleUp(P):this.sinkDown(P));return}}throw new O("Node not found.")},size:function(){return this.content.length},bubbleUp:function(b){for(var x=this.content[b];b>0;){var A=Math.floor((b+1)/2)-1,P=this.content[A];if(this.scoreFunction(x)<this.scoreFunction(P))this.content[A]=x,this.content[b]=P,b=A;else break}},sinkDown:function(b){for(var x=this.content.length,A=this.content[b],P=this.scoreFunction(A);;){var B=(b+1)*2,W=B-1,ee=-1,ce=0;if(W<x){var pe=this.content[W];ce=this.scoreFunction(pe),ce<P&&(ee=W)}if(B<x){var Ie=this.content[B],De=this.scoreFunction(Ie);De<(ee==-1?P:ce)&&(ee=B)}if(ee!=-1)this.content[b]=this.content[ee],this.content[ee]=A,b=ee;else break}},__class__:Me};var be=c.core.KdPoint=function(b,x){this.point=b,this.obj=x};d["verb.core.KdPoint"]=be,be.__name__=["verb","core","KdPoint"],be.prototype={__class__:be};var Ve=c.core.KdNode=function(b,x,A){this.kdPoint=b,this.left=null,this.right=null,this.parent=A,this.dimension=x};d["verb.core.KdNode"]=Ve,Ve.__name__=["verb","core","KdNode"],Ve.prototype={__class__:Ve};var mt=function(){};d["verb.eval.IBoundingBoxTree"]=mt,mt.__name__=["verb","eval","IBoundingBoxTree"],mt.prototype={__class__:mt};var Ue=function(b,x){this._boundingBox=null,this._curve=b,x==null&&(x=Y.domain(this._curve.knots)/64),this._knotTol=x};d["verb.core.LazyCurveBoundingBoxTree"]=Ue,Ue.__name__=["verb","core","LazyCurveBoundingBoxTree"],Ue.__interfaces__=[mt],Ue.prototype={split:function(){var b=ue.first(this._curve.knots),x=ue.last(this._curve.knots),A=x-b,P=as.curveSplit(this._curve,(x+b)/2+A*.1*Math.random());return new _e(new Ue(P[0],this._knotTol),new Ue(P[1],this._knotTol))},boundingBox:function(){return this._boundingBox==null&&(this._boundingBox=new he(Xe.dehomogenize1d(this._curve.controlPoints))),this._boundingBox},yield:function(){return this._curve},indivisible:function(b){return Y.domain(this._curve.knots)<this._knotTol},empty:function(){return!1},__class__:Ue};var Ct=function(b,x){if(this._boundingBox=null,this._mesh=b,x==null){for(var A=[],P=0,B=b.faces.length;P<B;){var W=P++;A.push(W)}x=A}this._faceIndices=x};d["verb.core.LazyMeshBoundingBoxTree"]=Ct,Ct.__name__=["verb","core","LazyMeshBoundingBoxTree"],Ct.__interfaces__=[mt],Ct.prototype={split:function(){var b=dn.sortTrianglesOnLongestAxis(this.boundingBox(),this._mesh,this._faceIndices),x=ue.left(b),A=ue.right(b);return new _e(new Ct(this._mesh,x),new Ct(this._mesh,A))},boundingBox:function(){return this._boundingBox==null&&(this._boundingBox=dn.makeMeshAabb(this._mesh,this._faceIndices)),this._boundingBox},yield:function(){return this._faceIndices[0]},indivisible:function(b){return this._faceIndices.length==1},empty:function(){return this._faceIndices.length==0},__class__:Ct};var st=function(b,x){this._boundingBox=null,this._polyline=b,x==null&&(x=new ie(0,b.points.length!=0?b.points.length-1:0)),this._interval=x};d["verb.core.LazyPolylineBoundingBoxTree"]=st,st.__name__=["verb","core","LazyPolylineBoundingBoxTree"],st.__interfaces__=[mt],st.prototype={split:function(){var b=this._interval.min,x=this._interval.max,A=b+Math.ceil((x-b)/2),P=new ie(b,A),B=new ie(A,x);return new _e(new st(this._polyline,P),new st(this._polyline,B))},boundingBox:function(){return this._boundingBox==null&&(this._boundingBox=new he(this._polyline.points)),this._boundingBox},yield:function(){return this._interval.min},indivisible:function(b){return this._interval.max-this._interval.min==1},empty:function(){return this._interval.max-this._interval.min==0},__class__:st};var vt=function(b,x,A,P){x==null&&(x=!1),this._boundingBox=null,this._surface=b,this._splitV=x,A==null&&(A=Y.domain(b.knotsU)/16),P==null&&(P=Y.domain(b.knotsV)/16),this._knotTolU=A,this._knotTolV=P};d["verb.core.LazySurfaceBoundingBoxTree"]=vt,vt.__name__=["verb","core","LazySurfaceBoundingBoxTree"],vt.__interfaces__=[mt],vt.prototype={split:function(){var b,x;this._splitV?(b=ue.first(this._surface.knotsV),x=ue.last(this._surface.knotsV)):(b=ue.first(this._surface.knotsU),x=ue.last(this._surface.knotsU));var A=(b+x)/2,P=as.surfaceSplit(this._surface,A,this._splitV);return new _e(new vt(P[0],!this._splitV,this._knotTolU,this._knotTolV),new vt(P[1],!this._splitV,this._knotTolU,this._knotTolV))},boundingBox:function(){if(this._boundingBox==null){this._boundingBox=new he;for(var b=0,x=this._surface.controlPoints;b<x.length;){var A=x[b];++b,this._boundingBox.addRange(Xe.dehomogenize1d(A))}}return this._boundingBox},yield:function(){return this._surface},indivisible:function(b){return Y.domain(this._surface.knotsV)<this._knotTolV&&Y.domain(this._surface.knotsU)<this._knotTolU},empty:function(){return!1},__class__:vt};var Rt=c.core.Mat=function(){};d["verb.core.Mat"]=Rt,Rt.__name__=["verb","core","Mat"],Rt.mul=function(b,x){for(var A=[],P=0,B=x.length;P<B;){var W=P++;A.push(Y.mul(b,x[W]))}return A},Rt.mult=function(b,x){var A,P,B,W,ee,ce,pe,Ie;A=b.length,P=x.length,B=x[0].length,W=[];for(var De=A-1,Ne=0,Ge=0;De>=0;){for(ee=[],ce=b[De],Ge=B-1;Ge>=0;){for(pe=ce[P-1]*x[P-1][Ge],Ne=P-2;Ne>=1;)Ie=Ne-1,pe+=ce[Ne]*x[Ne][Ge]+ce[Ie]*x[Ie][Ge],Ne-=2;Ne==0&&(pe+=ce[0]*x[0][Ge]),ee[Ge]=pe,Ge--}W[De]=ee,De--}return W},Rt.add=function(b,x){for(var A=[],P=0,B=b.length;P<B;){var W=P++;A.push(Y.add(b[W],x[W]))}return A},Rt.div=function(b,x){for(var A=[],P=0,B=b.length;P<B;){var W=P++;A.push(Y.div(b[W],x))}return A},Rt.sub=function(b,x){for(var A=[],P=0,B=b.length;P<B;){var W=P++;A.push(Y.sub(b[W],x[W]))}return A},Rt.dot=function(b,x){for(var A=[],P=0,B=b.length;P<B;){var W=P++;A.push(Y.dot(b[W],x))}return A},Rt.identity=function(b){for(var x=Y.zeros2d(b,b),A=0;A<b;){var P=A++;x[P][P]=1}return x},Rt.transpose=function(b){if(b.length==0)return[];for(var x=[],A=0,P=b[0].length;A<P;){var B=A++;x.push(function(W){for(var ee,ce=[],pe=0,Ie=b.length;pe<Ie;){var De=pe++;ce.push(b[De][B])}return ee=ce,ee}())}return x},Rt.solve=function(b,x){return Rt.LUsolve(Rt.LU(b),x)},Rt.LUsolve=function(b,x){var A,P,B=b.LU,W=B.length,ee=x.slice(),ce=b.P,pe,Ie,De;for(A=W-1;A!=-1;)ee[A]=x[A],--A;for(A=0;A<W;){for(pe=ce[A],ce[A]!=A&&(De=ee[A],ee[A]=ee[pe],ee[pe]=De),Ie=B[A],P=0;P<A;)ee[A]-=ee[P]*Ie[P],++P;++A}for(A=W-1;A>=0;){for(Ie=B[A],P=A+1;P<W;)ee[A]-=ee[P]*Ie[P],++P;ee[A]/=Ie[A],--A}return ee},Rt.LU=function(b){for(var x,A,P,B,W,ee,ce,pe,Ie,De=[],Ne=0,Ge=b.length;Ne<Ge;){var qe=Ne++;De.push(b[qe].slice())}b=De;var Je=b.length,ct=Je-1,ot=[];for(P=0;P<Je;){for(ce=P,ee=b[P],Ie=Math.abs(ee[P]),A=P+1;A<Je;)B=Math.abs(b[A][P]),Ie<B&&(Ie=B,ce=A),++A;for(ot[P]=ce,ce!=P&&(b[P]=b[ce],b[ce]=ee,ee=b[P]),W=ee[P],x=P+1;x<Je;)b[x][P]/=W,++x;for(x=P+1;x<Je;){for(pe=b[x],A=P+1;A<ct;)pe[A]-=pe[P]*ee[A],++A,pe[A]-=pe[P]*ee[A],++A;A==ct&&(pe[A]-=pe[P]*ee[A]),++x}++P}return new jt(b,ot)};var jt=function(b,x){this.LU=b,this.P=x};d["verb.core._Mat.LUDecomp"]=jt,jt.__name__=["verb","core","_Mat","LUDecomp"],jt.prototype={__class__:jt};var dn=c.core.Mesh=function(){};d["verb.core.Mesh"]=dn,dn.__name__=["verb","core","Mesh"],dn.getTriangleNorm=function(b,x){var A=b[x[0]],P=b[x[1]],B=b[x[2]],W=Y.sub(P,A),ee=Y.sub(B,A),ce=Y.cross(W,ee);return Y.mul(1/Y.norm(ce),ce)},dn.makeMeshAabb=function(b,x){for(var A=new he,P=0;P<x.length;){var B=x[P];++P,A.add(b.points[b.faces[B][0]]),A.add(b.points[b.faces[B][1]]),A.add(b.points[b.faces[B][2]])}return A},dn.sortTrianglesOnLongestAxis=function(b,x,A){for(var P=b.getLongestAxis(),B=[],W=0;W<A.length;){var ee=A[W];++W;var ce=dn.getMinCoordOnAxis(x.points,x.faces[ee],P);B.push(new _e(ce,ee))}B.sort(function(Ge,qe){var Je=Ge.item0,ct=qe.item0;return Je==ct?0:Je>ct?1:-1});for(var pe=[],Ie=0,De=B.length;Ie<De;){var Ne=Ie++;pe.push(B[Ne].item1)}return pe},dn.getMinCoordOnAxis=function(b,x,A){for(var P=1/0,B=0;B<3;){var W=B++,ee=b[x[W]][A];ee<P&&(P=ee)}return P},dn.getTriangleCentroid=function(b,x){for(var A=[0,0,0],P=0;P<3;)for(var B=P++,W=0;W<3;){var ee=W++;A[ee]+=b[x[B]][ee]}for(var ce=0;ce<3;){var pe=ce++;A[pe]/=3}return A},dn.triangleUVFromPoint=function(b,x,A){var P=b.faces[x],B=b.points[P[0]],W=b.points[P[1]],ee=b.points[P[2]],ce=b.uvs[P[0]],pe=b.uvs[P[1]],Ie=b.uvs[P[2]],De=Y.sub(B,A),Ne=Y.sub(W,A),Ge=Y.sub(ee,A),qe=Y.norm(Y.cross(Y.sub(B,W),Y.sub(B,ee))),Je=Y.norm(Y.cross(Ne,Ge))/qe,ct=Y.norm(Y.cross(Ge,De))/qe,ot=Y.norm(Y.cross(De,Ne))/qe;return Y.add(Y.mul(Je,ce),Y.add(Y.mul(ct,pe),Y.mul(ot,Ie)))};var sn=function(b,x){if(this._empty=!1,this._face=-1,x==null){for(var A=[],P=0,B=b.faces.length;P<B;){var W=P++;A.push(W)}x=A}if(this._boundingBox=dn.makeMeshAabb(b,x),x.length<1){this._empty=!0;return}else if(x.length<2){this._face=x[0];return}var ee=dn.sortTrianglesOnLongestAxis(this._boundingBox,b,x),ce=ue.left(ee),pe=ue.right(ee);this._children=new _e(new sn(b,ce),new sn(b,pe))};d["verb.core.MeshBoundingBoxTree"]=sn,sn.__name__=["verb","core","MeshBoundingBoxTree"],sn.__interfaces__=[mt],sn.prototype={split:function(){return this._children},boundingBox:function(){return this._boundingBox},yield:function(){return this._face},indivisible:function(b){return this._children==null},empty:function(){return this._empty},__class__:sn};var At=c.core.Minimizer=function(){};d["verb.core.Minimizer"]=At,At.__name__=["verb","core","Minimizer"],At.uncmin=function(b,x,A,P,B){A==null&&(A=1e-8),P==null&&(P=function(ln){return At.numericalGradient(b,ln)}),B==null&&(B=1e3),x=x.slice(0);var W=x.length,ee=b(x),ce=ee,pe;if(isNaN(ee))throw new O("uncmin: f(x0) is a NaN!");A=Math.max(A,K.EPSILON);var Ie,De,Ne,Ge=Rt.identity(W),qe=0,Je=[],ct,ot,yt,pt,It,Nt,Ht="";for(De=P(x);qe<B;){if(!Y.all(Y.finite(De))){Ht="Gradient has Infinity or NaN";break}if(Ie=Y.neg(Rt.dot(Ge,De)),!Y.all(Y.finite(Ie))){Ht="Search direction has Infinity or NaN";break}if(Nt=Y.norm(Ie),Nt<A){Ht="Newton step smaller than tol";break}for(It=1,pe=Y.dot(De,Ie),ct=x;qe<B&&!(It*Nt<A);){if(Je=Y.mul(It,Ie),ct=Y.add(x,Je),ce=b(ct),ce-ee>=.1*It*pe||isNaN(ce)){It*=.5,++qe;continue}break}if(It*Nt<A){Ht="Line search step size smaller than tol";break}if(qe==B){Ht="maxit reached during line search";break}Ne=P(ct),ot=Y.sub(Ne,De),pt=Y.dot(ot,Je),yt=Rt.dot(Ge,ot),Ge=Rt.sub(Rt.add(Ge,Rt.mul((pt+Y.dot(ot,yt))/(pt*pt),At.tensor(Je,Je))),Rt.div(Rt.add(At.tensor(yt,Je),At.tensor(Je,yt)),pt)),x=ct,ee=ce,De=Ne,++qe}return new on(x,ee,De,Ge,qe,Ht)},At.numericalGradient=function(b,x){var A=x.length,P=b(x);if(P==NaN)throw new O("gradient: f(x) is a NaN!");for(var B=x.slice(0),W,ee,ce=[],pe,Ie=.001,De,Ne,Ge,qe=0,Je,ct,ot,yt=0;yt<A;)for(var pt=yt++,It=Math.max(1e-6*P,1e-8);;){if(++qe,qe>20)throw new O("Numerical gradient fails");if(B[pt]=x[pt]+It,W=b(B),B[pt]=x[pt]-It,ee=b(B),B[pt]=x[pt],isNaN(W)||isNaN(ee)){It/=16;continue}if(ce[pt]=(W-ee)/(2*It),De=x[pt]-It,Ne=x[pt],Ge=x[pt]+It,Je=(W-P)/It,ct=(P-ee)/It,ot=Y.max([Math.abs(ce[pt]),Math.abs(P),Math.abs(W),Math.abs(ee),Math.abs(De),Math.abs(Ne),Math.abs(Ge),1e-8]),pe=Math.min(Y.max([Math.abs(Je-ce[pt]),Math.abs(ct-ce[pt]),Math.abs(Je-ct)])/ot,It/ot),pe>Ie)It/=16;else break}return ce},At.tensor=function(b,x){for(var A=b.length,P=x.length,B=[],W,ee,ce=A-1;ce>=0;){W=[],ee=b[ce];for(var pe=P-1;pe>=3;)W[pe]=ee*x[pe],--pe,W[pe]=ee*x[pe],--pe,W[pe]=ee*x[pe],--pe,W[pe]=ee*x[pe],--pe;for(;pe>=0;)W[pe]=ee*x[pe],--pe;B[ce]=W,ce--}return B};var on=function(b,x,A,P,B,W){this.solution=b,this.value=x,this.gradient=A,this.invHessian=P,this.iterations=B,this.message=W};d["verb.core.MinimizationResult"]=on,on.__name__=["verb","core","MinimizationResult"],on.prototype={__class__:on};var Jt=function(){};d["verb.core.ISerializable"]=Jt,Jt.__name__=["verb","core","ISerializable"],Jt.prototype={__class__:Jt};var jr=c.core.Deserializer=function(){};d["verb.core.Deserializer"]=jr,jr.__name__=["verb","core","Deserializer"],jr.deserialize=function(b){var x=new M(b),A=x.unserialize();return A};var Ur=c.core.Trig=function(){};d["verb.core.Trig"]=Ur,Ur.__name__=["verb","core","Trig"],Ur.isPointInPlane=function(b,x,A){return Math.abs(Y.dot(Y.sub(b,x.origin),x.normal))<A},Ur.distToSegment=function(b,x,A){var P=Ur.segmentClosestPoint(x,b,A,0,1);return Y.dist(x,P.pt)},Ur.rayClosestPoint=function(b,x,A){var P=Y.sub(b,x),B=Y.dot(P,A),W=Y.add(x,Y.mul(B,A));return W},Ur.distToRay=function(b,x,A){var P=Ur.rayClosestPoint(b,x,A),B=Y.sub(P,b);return Y.norm(B)},Ur.threePointsAreFlat=function(b,x,A,P){var B=Y.sub(x,b),W=Y.sub(A,b),ee=Y.cross(B,W),ce=Y.dot(ee,ee);return ce<P},Ur.segmentClosestPoint=function(b,x,A,P,B){var W=Y.sub(A,x),ee=Y.norm(W);if(ee<K.EPSILON)return{u:P,pt:x};var ce=x,pe=Y.mul(1/ee,W),Ie=Y.sub(b,ce),De=Y.dot(Ie,pe);return De<0?{u:P,pt:x}:De>ee?{u:B,pt:A}:{u:P+(B-P)*De/ee,pt:Y.add(ce,Y.mul(De,pe))}};var Y=c.core.Vec=function(){};d["verb.core.Vec"]=Y,Y.__name__=["verb","core","Vec"],Y.angleBetween=function(b,x){return Math.acos(Y.dot(b,x)/(Y.norm(b)*Y.norm(x)))},Y.positiveAngleBetween=function(b,x,A){var P=Y.cross(b,x),B=Y.norm(b),W=Y.norm(x),ee=B*W,ce=Y.dot(b,x),pe=Y.norm(P)/ee,Ie=ce/ee,De=Math.atan2(pe,Ie),Ne=Y.dot(A,P);return Math.abs(Ne)<K.EPSILON||Ne>0?De:-De},Y.signedAngleBetween=function(b,x,A){var P=Y.cross(b,x),B=Y.norm(b),W=Y.norm(x),ee=B*W,ce=Y.dot(b,x),pe=Y.norm(P)/ee,Ie=ce/ee,De=Math.atan2(pe,Ie),Ne=Y.dot(A,P);return Ne>0?De:2*Math.PI-De},Y.angleBetweenNormalized2d=function(b,x){var A=b[0]*x[1]-b[1]*x[0];return Math.atan2(A,Y.dot(b,x))},Y.domain=function(b){return ue.last(b)-ue.first(b)},Y.range=function(b){for(var x=[],A=0,P=0;P<b;)P++,x.push(A),A+=1;return x},Y.span=function(b,x,A){if(A==null)return[];if(A<K.EPSILON)return[];if(b>x&&A>0)return[];if(x>b&&A<0)return[];for(var P=[],B=b;B<=x;)P.push(B),B+=A;return P},Y.neg=function(b){return b.map(function(x){return-x})},Y.min=function(b){return v.fold(b,function(x,A){return Math.min(x,A)},1/0)},Y.max=function(b){return v.fold(b,function(x,A){return Math.max(x,A)},-1/0)},Y.all=function(b){return v.fold(b,function(x,A){return A&&x},!0)},Y.finite=function(b){return b.map(function(x){return isFinite(x)})},Y.onRay=function(b,x,A){return Y.add(b,Y.mul(A,x))},Y.lerp=function(b,x,A){return Y.add(Y.mul(b,x),Y.mul(1-b,A))},Y.normalized=function(b){return Y.div(b,Y.norm(b))},Y.cross=function(b,x){return[b[1]*x[2]-b[2]*x[1],b[2]*x[0]-b[0]*x[2],b[0]*x[1]-b[1]*x[0]]},Y.dist=function(b,x){return Y.norm(Y.sub(b,x))},Y.distSquared=function(b,x){return Y.normSquared(Y.sub(b,x))},Y.sum=function(b){return v.fold(b,function(x,A){return A+x},0)},Y.addAll=function(b){var x=Sn(b)();if(!x.hasNext())return null;var A=x.next().length;return v.fold(b,function(P,B){return Y.add(B,P)},Y.rep(A,0))},Y.addAllMutate=function(b){for(var x=b[0],A=1,P=b.length;A<P;){var B=A++;Y.addMutate(x,b[B])}},Y.addMulMutate=function(b,x,A){for(var P=0,B=b.length;P<B;){var W=P++;b[W]=b[W]+x*A[W]}},Y.subMulMutate=function(b,x,A){for(var P=0,B=b.length;P<B;){var W=P++;b[W]=b[W]-x*A[W]}},Y.addMutate=function(b,x){for(var A=0,P=b.length;A<P;){var B=A++;b[B]=b[B]+x[B]}},Y.subMutate=function(b,x){for(var A=0,P=b.length;A<P;){var B=A++;b[B]=b[B]-x[B]}},Y.mulMutate=function(b,x){for(var A=0,P=x.length;A<P;){var B=A++;x[B]=x[B]*b}},Y.norm=function(b){var x=Y.normSquared(b);return x!=0?Math.sqrt(x):x},Y.normSquared=function(b){return v.fold(b,function(x,A){return A+x*x},0)},Y.rep=function(b,x){for(var A=[],P=0;P<b;)P++,A.push(x);return A},Y.zeros1d=function(b){for(var x=[],A=0;A<b;)A++,x.push(0);return x},Y.zeros2d=function(b,x){for(var A=[],P=0;P<b;)P++,A.push(Y.zeros1d(x));return A},Y.zeros3d=function(b,x,A){for(var P=[],B=0;B<b;)B++,P.push(Y.zeros2d(x,A));return P},Y.dot=function(b,x){for(var A=0,P=0,B=b.length;P<B;){var W=P++;A+=b[W]*x[W]}return A},Y.add=function(b,x){for(var A=[],P=0,B=b.length;P<B;){var W=P++;A.push(b[W]+x[W])}return A},Y.mul=function(b,x){for(var A=[],P=0,B=x.length;P<B;){var W=P++;A.push(b*x[W])}return A},Y.div=function(b,x){for(var A=[],P=0,B=b.length;P<B;){var W=P++;A.push(b[W]/x)}return A},Y.sub=function(b,x){for(var A=[],P=0,B=b.length;P<B;){var W=P++;A.push(b[W]-x[W])}return A},Y.isZero=function(b){for(var x=0,A=b.length;x<A;){var P=x++;if(Math.abs(b[P])>K.TOLERANCE)return!1}return!0},Y.sortedSetUnion=function(b,x){for(var A=[],P=0,B=0;P<b.length||B<x.length;){if(P>=b.length){A.push(x[B]),B++;continue}else if(B>=x.length){A.push(b[P]),P++;continue}var W=b[P]-x[B];if(Math.abs(W)<K.EPSILON){A.push(b[P]),P++,B++;continue}if(W>0){A.push(x[B]),B++;continue}A.push(b[P]),P++}return A},Y.sortedSetSub=function(b,x){for(var A=[],P=0,B=0;P<b.length;){if(B>=x.length){A.push(b[P]),P++;continue}if(Math.abs(b[P]-x[B])<K.EPSILON){P++,B++;continue}A.push(b[P]),P++}return A};var Pn=c.eval.Analyze=function(){};d["verb.eval.Analyze"]=Pn,Pn.__name__=["verb","eval","Analyze"],Pn.knotMultiplicities=function(b){for(var x=[new ii(b[0],0)],A=x[0],P=0;P<b.length;){var B=b[P];++P,Math.abs(B-A.knot)>K.EPSILON&&(A=new ii(B,0),x.push(A)),A.inc()}return x},Pn.isRationalSurfaceClosed=function(b,x){x==null&&(x=!0);var A;x?A=b.controlPoints:A=Rt.transpose(b.controlPoints);for(var P=0,B=A[0].length;P<B;){var W=P++,ee=Y.dist(ue.first(A)[W],ue.last(A)[W])<K.EPSILON;if(!ee)return!1}return!0},Pn.rationalSurfaceClosestPoint=function(b,x){var A=Pn.rationalSurfaceClosestParam(b,x);return Xe.rationalSurfacePoint(b,A[0],A[1])},Pn.rationalSurfaceClosestParam=function(b,x){for(var A=5,P=0,B,W=1e-4,ee=5e-4,ce,pe=b.knotsU[0],Ie=ue.last(b.knotsU),De=b.knotsV[0],Ne=ue.last(b.knotsV),Ge=Pn.isRationalSurfaceClosed(b),qe=Pn.isRationalSurfaceClosed(b,!1),Je,ct=On.rationalSurfaceAdaptive(b,new Xr),ot=1/0,yt=0,pt=ct.points.length;yt<pt;){var It=yt++,Nt=ct.points[It],Ht=Y.normSquared(Y.sub(x,Nt));Ht<ot&&(ot=Ht,Je=ct.uvs[It])}for(var ln=function(Zr){return Xe.rationalSurfaceDerivatives(b,Zr[0],Zr[1],2)},Vt=function(Zr,ls,Or){var fs=ls[1][0],Zi=ls[0][1],Bo=ls[2][0],Oi=ls[0][2],mi=ls[1][1],Ji=ls[1][1],bo=Y.dot(fs,Or),ua=Y.dot(Zi,Or),Ja=[-bo,-ua],da=Y.dot(fs,fs)+Y.dot(Bo,Or),ha=Y.dot(fs,Zi)+Y.dot(mi,Or),fa=Y.dot(fs,Zi)+Y.dot(Ji,Or),Nl=Y.dot(Zi,Zi)+Y.dot(Oi,Or),_h=[[da,ha],[fa,Nl]],ed=Rt.solve(_h,Ja);return Y.add(ed,Zr)};P<A;){B=ln(Je),ce=Y.sub(B[0][0],x);var Bt=Y.norm(ce),Kt=Y.dot(B[1][0],ce),bn=Y.norm(B[1][0])*Bt,Cn=Y.dot(B[0][1],ce),In=Y.norm(B[0][1])*Bt,Nn=Kt/bn,Rn=Cn/In,Fn=Bt<W,Tn=Nn<ee,Hn=Rn<ee;if(Fn&&Tn&&Hn)return Je;var Wt=Vt(Je,B,ce);Wt[0]<pe?Ge?Wt=[Ie-(Wt[0]-pe),Wt[1]]:Wt=[pe+K.EPSILON,Wt[1]]:Wt[0]>Ie&&(Ge?Wt=[pe+(Wt[0]-Ie),Wt[1]]:Wt=[Ie-K.EPSILON,Wt[1]]),Wt[1]<De?qe?Wt=[Wt[0],Ne-(Wt[1]-De)]:Wt=[Wt[0],De+K.EPSILON]:Wt[1]>Ne&&(qe?Wt=[Wt[0],De+(Wt[0]-Ne)]:Wt=[Wt[0],Ne-K.EPSILON]);var Gn=Y.norm(Y.mul(Wt[0]-Je[0],B[1][0])),hr=Y.norm(Y.mul(Wt[1]-Je[1],B[0][1]));if(Gn+hr<W)return Je;Je=Wt,P++}return Je},Pn.rationalCurveClosestPoint=function(b,x){return Xe.rationalCurvePoint(b,Pn.rationalCurveClosestParam(b,x))},Pn.rationalCurveClosestParam=function(b,x){for(var A=1/0,P=0,B=On.rationalCurveRegularSample(b,b.controlPoints.length*b.degree,!0),W=0,ee=B.length-1;W<ee;){var ce=W++,pe=B[ce][0],Ie=B[ce+1][0],De=B[ce].slice(1),Ne=B[ce+1].slice(1),Ge=Ur.segmentClosestPoint(x,De,Ne,pe,Ie),qe=Y.norm(Y.sub(x,Ge.pt));qe<A&&(A=qe,P=Ge.u)}for(var Je=5,ct=0,ot,yt=1e-4,pt=5e-4,It,Nt=b.knots[0],Ht=ue.last(b.knots),ln=Y.normSquared(Y.sub(b.controlPoints[0],ue.last(b.controlPoints)))<K.EPSILON,Vt=P,Bt=function(Wt){return Xe.rationalCurveDerivatives(b,Wt,2)},Kt=function(Wt,Gn,hr){var Zr=Y.dot(Gn[1],hr),ls=Y.dot(Gn[2],hr),Or=Y.dot(Gn[1],Gn[1]),fs=ls+Or;return Wt-Zr/fs};ct<Je;){ot=Bt(Vt),It=Y.sub(ot[0],x);var bn=Y.norm(It),Cn=Y.dot(ot[1],It),In=Y.norm(ot[1])*bn,Nn=Cn/In,Rn=bn<yt,Fn=Math.abs(Nn)<pt;if(Rn&&Fn)return Vt;var Tn=Kt(Vt,ot,It);Tn<Nt?ln?Tn=Ht-(Tn-Nt):Tn=Nt:Tn>Ht&&(ln?Tn=Nt+(Tn-Ht):Tn=Ht);var Hn=Y.norm(Y.mul(Tn-Vt,ot[1]));if(Hn<yt)return Vt;Vt=Tn,ct++}return Vt},Pn.rationalCurveParamAtArcLength=function(b,x,A,P,B){if(A==null&&(A=.001),x<K.EPSILON)return b.knots[0];var W;P!=null?W=P:W=Gt.decomposeCurveIntoBeziers(b);var ee=0;W[ee];var ce=-K.EPSILON,pe;for(B!=null?pe=B:pe=[];ce<x&&ee<W.length;){if(ee<pe.length?pe[ee]=pe[ee]:pe[ee]=Pn.rationalBezierCurveArcLength(b),ce+=pe[ee],x<ce+K.EPSILON)return Pn.rationalBezierCurveParamAtArcLength(b,x,A,pe[ee]);ee++}return-1},Pn.rationalBezierCurveParamAtArcLength=function(b,x,A,P){if(x<0)return b.knots[0];var B;if(P!=null?B=P:B=Pn.rationalBezierCurveArcLength(b),x>B)return ue.last(b.knots);var W=b.knots[0],ee=0,ce=ue.last(b.knots),pe=B,Ie=0,De=0,Ne;for(A!=null?Ne=A:Ne=K.TOLERANCE*2;pe-ee>Ne;)Ie=(W+ce)/2,De=Pn.rationalBezierCurveArcLength(b,Ie),De>x?(ce=Ie,pe=De):(W=Ie,ee=De);return(W+ce)/2},Pn.rationalCurveArcLength=function(b,x,A){A==null&&(A=16),x==null?x=ue.last(b.knots):x=x;for(var P=Gt.decomposeCurveIntoBeziers(b),B=0,W=P[0],ee=0;B<P.length&&W.knots[0]+K.EPSILON<x;){var ce=Math.min(ue.last(W.knots),x);ee+=Pn.rationalBezierCurveArcLength(W,ce,A),W=P[++B]}return ee},Pn.rationalBezierCurveArcLength=function(b,x,A){A==null&&(A=16);var P;x==null?P=ue.last(b.knots):P=x;for(var B=(P-b.knots[0])/2,W=0,ee=b.degree+A,ce,pe,Ie=0;Ie<ee;){var De=Ie++;ce=B*Pn.Tvalues[ee][De]+B+b.knots[0],pe=Xe.rationalCurveDerivatives(b,ce,1),W+=Pn.Cvalues[ee][De]*Y.norm(pe[1])}return B*W};var ii=c.eval.KnotMultiplicity=function(b,x){this.knot=b,this.mult=x};d["verb.eval.KnotMultiplicity"]=ii,ii.__name__=["verb","eval","KnotMultiplicity"],ii.prototype={inc:function(){this.mult++},__class__:ii};var Fs=c.eval.Check=function(){};d["verb.eval.Check"]=Fs,Fs.__name__=["verb","eval","Check"],Fs.isValidKnotVector=function(b,x){if(b.length==0||b.length<(x+1)*2)return!1;for(var A=ue.first(b),P=0,B=x+1;P<B;){var W=P++;if(Math.abs(b[W]-A)>K.EPSILON)return!1}A=ue.last(b);for(var ee=b.length-x-1,ce=b.length;ee<ce;){var pe=ee++;if(Math.abs(b[pe]-A)>K.EPSILON)return!1}return Fs.isNonDecreasing(b)},Fs.isNonDecreasing=function(b){for(var x=ue.first(b),A=0,P=b.length;A<P;){var B=A++;if(b[B]<x-K.EPSILON)return!1;x=b[B]}return!0},Fs.isValidNurbsCurveData=function(b){if(b.controlPoints==null)throw new O("Control points array cannot be null!");if(b.degree==null)throw new O("Degree cannot be null!");if(b.degree<1)throw new O("Degree must be greater than 1!");if(b.knots==null)throw new O("Knots cannot be null!");if(b.knots.length!=b.controlPoints.length+b.degree+1)throw new O("controlPoints.length + degree + 1 must equal knots.length!");if(!Fs.isValidKnotVector(b.knots,b.degree))throw new O("Invalid knot vector format!  Should begin with degree + 1 repeats and end with degree + 1 repeats!");return b},Fs.isValidNurbsSurfaceData=function(b){if(b.controlPoints==null)throw new O("Control points array cannot be null!");if(b.degreeU==null)throw new O("DegreeU cannot be null!");if(b.degreeV==null)throw new O("DegreeV cannot be null!");if(b.degreeU<1)throw new O("DegreeU must be greater than 1!");if(b.degreeV<1)throw new O("DegreeV must be greater than 1!");if(b.knotsU==null)throw new O("KnotsU cannot be null!");if(b.knotsV==null)throw new O("KnotsV cannot be null!");if(b.knotsU.length!=b.controlPoints.length+b.degreeU+1)throw new O("controlPointsU.length + degreeU + 1 must equal knotsU.length!");if(b.knotsV.length!=b.controlPoints[0].length+b.degreeV+1)throw new O("controlPointsV.length + degreeV + 1 must equal knotsV.length!");if(!Fs.isValidKnotVector(b.knotsU,b.degreeU)||!Fs.isValidKnotVector(b.knotsV,b.degreeV))throw new O("Invalid knot vector format!  Should begin with degree + 1 repeats and end with degree + 1 repeats!");return b};var as=c.eval.Divide=function(){};d["verb.eval.Divide"]=as,as.__name__=["verb","eval","Divide"],as.surfaceSplit=function(b,x,A){A==null&&(A=!1);var P,B,W;A?(W=b.controlPoints,P=b.knotsV,B=b.degreeV):(W=Rt.transpose(b.controlPoints),P=b.knotsU,B=b.degreeU);for(var ee,ce=[],pe=0,Ie=B+1;pe<Ie;)pe++,ce.push(x);ee=ce;for(var De=[],Ne=[],Ge=Xe.knotSpan(B,x,P),qe=null,Je=0;Je<W.length;){var ct=W[Je];++Je,qe=Gt.curveKnotRefine(new te(B,P,ct),ee),De.push(qe.controlPoints.slice(0,Ge+1)),Ne.push(qe.controlPoints.slice(Ge+1))}var ot=qe.knots.slice(0,Ge+B+2),yt=qe.knots.slice(Ge+1);return A?[new oe(b.degreeU,B,b.knotsU.slice(),ot,De),new oe(b.degreeU,B,b.knotsU.slice(),yt,Ne)]:(De=Rt.transpose(De),Ne=Rt.transpose(Ne),[new oe(B,b.degreeV,ot,b.knotsV.slice(),De),new oe(B,b.degreeV,yt,b.knotsV.slice(),Ne)])},as.curveSplit=function(b,x){var A=b.degree;b.controlPoints;for(var P=b.knots,B,W=[],ee=0,ce=A+1;ee<ce;)ee++,W.push(x);B=W;var pe=Gt.curveKnotRefine(b,B),Ie=Xe.knotSpan(A,x,P),De=pe.knots.slice(0,Ie+A+2),Ne=pe.knots.slice(Ie+1),Ge=pe.controlPoints.slice(0,Ie+1),qe=pe.controlPoints.slice(Ie+1);return[new te(A,De,Ge),new te(A,Ne,qe)]},as.rationalCurveByEqualArcLength=function(b,x){var A=Pn.rationalCurveArcLength(b),P=A/x;return as.rationalCurveByArcLength(b,P)},as.rationalCurveByArcLength=function(b,x){var A=Gt.decomposeCurveIntoBeziers(b),P=A.map(function(Ge){return Pn.rationalBezierCurveArcLength(Ge)}),B=Y.sum(P),W=[new Ii(b.knots[0],0)];if(x>B)return W;for(var ee=x,ce=0,pe=ee,Ie=0,De=0,Ne;ce<A.length;){for(Ie+=P[ce];pe<Ie+K.EPSILON;)Ne=Pn.rationalBezierCurveParamAtArcLength(A[ce],pe-De,K.TOLERANCE,P[ce]),W.push(new Ii(Ne,pe)),pe+=ee;De+=P[ce],ce++}return W};var Ii=c.eval.CurveLengthSample=function(b,x){this.u=b,this.len=x};d["verb.eval.CurveLengthSample"]=Ii,Ii.__name__=["verb","eval","CurveLengthSample"],Ii.prototype={__class__:Ii};var Xe=c.eval.Eval=function(){};d["verb.eval.Eval"]=Xe,Xe.__name__=["verb","eval","Eval"],Xe.rationalCurveTangent=function(b,x){var A=Xe.rationalCurveDerivatives(b,x,1);return A[1]},Xe.rationalSurfaceNormal=function(b,x,A){var P=Xe.rationalSurfaceDerivatives(b,x,A,1);return Y.cross(P[1][0],P[0][1])},Xe.rationalSurfaceDerivatives=function(b,x,A,P){P==null&&(P=1);for(var B=Xe.surfaceDerivatives(b,x,A,P),W=Xe.rational2d(B),ee=Xe.weight2d(B),ce=[],pe=W[0][0].length,Ie=0,De=P+1;Ie<De;){var Ne=Ie++;ce.push([]);for(var Ge=0,qe=P-Ne+1;Ge<qe;){for(var Je=Ge++,ct=W[Ne][Je],ot=1,yt=Je+1;ot<yt;){var pt=ot++;Y.subMulMutate(ct,j.get(Je,pt)*ee[0][pt],ce[Ne][Je-pt])}for(var It=1,Nt=Ne+1;It<Nt;){var Ht=It++;Y.subMulMutate(ct,j.get(Ne,Ht)*ee[Ht][0],ce[Ne-Ht][Je]);for(var ln=Y.zeros1d(pe),Vt=1,Bt=Je+1;Vt<Bt;){var Kt=Vt++;Y.addMulMutate(ln,j.get(Je,Kt)*ee[Ht][Kt],ce[Ne-Ht][Je-Kt])}Y.subMulMutate(ct,j.get(Ne,Ht),ln)}Y.mulMutate(1/ee[0][0],ct),ce[Ne].push(ct)}}return ce},Xe.rationalSurfacePoint=function(b,x,A){return Xe.dehomogenize(Xe.surfacePoint(b,x,A))},Xe.rationalCurveDerivatives=function(b,x,A){A==null&&(A=1);for(var P=Xe.curveDerivatives(b,x,A),B=Xe.rational1d(P),W=Xe.weight1d(P),ee=[],ce=0,pe=A+1;ce<pe;){for(var Ie=ce++,De=B[Ie],Ne=1,Ge=Ie+1;Ne<Ge;){var qe=Ne++;Y.subMulMutate(De,j.get(Ie,qe)*W[qe],ee[Ie-qe])}Y.mulMutate(1/W[0],De),ee.push(De)}return ee},Xe.rationalCurvePoint=function(b,x){return Xe.dehomogenize(Xe.curvePoint(b,x))},Xe.surfaceDerivatives=function(b,x,A,P){var B=b.knotsU.length-b.degreeU-2,W=b.knotsV.length-b.degreeV-2;return Xe.surfaceDerivativesGivenNM(B,W,b,x,A,P)},Xe.surfaceDerivativesGivenNM=function(b,x,A,P,B,W){var ee=A.degreeU,ce=A.degreeV,pe=A.controlPoints,Ie=A.knotsU,De=A.knotsV;if(!Xe.areValidRelations(ee,pe.length,Ie.length)||!Xe.areValidRelations(ce,pe[0].length,De.length))throw new O("Invalid relations between control points, knot vector, and n");var Ne=pe[0][0].length,Ge;W<ee?Ge=W:Ge=ee;var qe;W<ce?qe=W:qe=ce;for(var Je=Y.zeros3d(W+1,W+1,Ne),ct=Xe.knotSpanGivenN(b,ee,P,Ie),ot=Xe.knotSpanGivenN(x,ce,B,De),yt=Xe.derivativeBasisFunctionsGivenNI(ct,P,ee,b,Ie),pt=Xe.derivativeBasisFunctionsGivenNI(ot,B,ce,x,De),It=Y.zeros2d(ce+1,Ne),Nt=0,Ht=0,ln=Ge+1;Ht<ln;){for(var Vt=Ht++,Bt=0,Kt=ce+1;Bt<Kt;){var bn=Bt++;It[bn]=Y.zeros1d(Ne);for(var Cn=0,In=ee+1;Cn<In;){var Nn=Cn++;Y.addMulMutate(It[bn],yt[Vt][Nn],pe[ct-ee+Nn][ot-ce+bn])}}var Rn=W-Vt;Rn<qe?Nt=Rn:Nt=qe;for(var Fn=0,Tn=Nt+1;Fn<Tn;){var Hn=Fn++;Je[Vt][Hn]=Y.zeros1d(Ne);for(var Wt=0,Gn=ce+1;Wt<Gn;){var hr=Wt++;Y.addMulMutate(Je[Vt][Hn],pt[Hn][hr],It[hr])}}}return Je},Xe.surfacePoint=function(b,x,A){var P=b.knotsU.length-b.degreeU-2,B=b.knotsV.length-b.degreeV-2;return Xe.surfacePointGivenNM(P,B,b,x,A)},Xe.surfacePointGivenNM=function(b,x,A,P,B){var W=A.degreeU,ee=A.degreeV,ce=A.controlPoints,pe=A.knotsU,Ie=A.knotsV;if(!Xe.areValidRelations(W,ce.length,pe.length)||!Xe.areValidRelations(ee,ce[0].length,Ie.length))throw new O("Invalid relations between control points, knot vector, and n");for(var De=ce[0][0].length,Ne=Xe.knotSpanGivenN(b,W,P,pe),Ge=Xe.knotSpanGivenN(x,ee,B,Ie),qe=Xe.basisFunctionsGivenKnotSpanIndex(Ne,P,W,pe),Je=Xe.basisFunctionsGivenKnotSpanIndex(Ge,B,ee,Ie),ct=Ne-W,ot=Ge,yt=Y.zeros1d(De),pt=Y.zeros1d(De),It=0,Nt=ee+1;It<Nt;){var Ht=It++;pt=Y.zeros1d(De),ot=Ge-ee+Ht;for(var ln=0,Vt=W+1;ln<Vt;){var Bt=ln++;Y.addMulMutate(pt,qe[Bt],ce[ct+Bt][ot])}Y.addMulMutate(yt,Je[Ht],pt)}return yt},Xe.curveRegularSamplePoints=function(b,x){for(var A=Xe.curveDerivatives(b,b.knots[0],b.degree),P=1/x,B=P*P,W=A[0],ee=Y.mul(P,A[1]),ce=Y.mul(B*.5,A[2]),pe=Y.mul(B*P*.5,A[3]),Ie=Y.add(ce,ce),De=Y.add(pe,pe),Ne=Y.mul(.3333333333333333,pe),Ge=[],qe=0,Je=x+1;qe<Je;)qe++,Ge.push(Xe.dehomogenize(W)),Y.addAllMutate([W,ee,ce,Ne]),Y.addAllMutate([ee,Ie,pe]),Y.addAllMutate([Ie,De]),Y.addAllMutate([ce,pe]);return Ge},Xe.curveRegularSamplePoints2=function(b,x){for(var A=Xe.curveDerivatives(b,b.knots[0],b.degree),P=1/x,B=P*P,W=A[0],ee=Y.mul(P,A[1]),ce=Y.mul(B*.5,A[2]),pe=Y.mul(B*P*.5,A[3]),Ie=Y.add(ce,ce),De=Y.add(pe,pe),Ne=Y.mul(.3333333333333333,pe),Ge=[],qe=0,Je=x+1;qe<Je;)qe++,Ge.push(Xe.dehomogenize(W)),Y.addAllMutate([W,ee,ce,Ne]),Y.addAllMutate([ee,Ie,pe]),Y.addAllMutate([Ie,De]),Y.addAllMutate([ce,pe]);return Ge},Xe.rationalSurfaceRegularSampleDerivatives=function(b,x,A,P){for(var B=Xe.surfaceRegularSampleDerivatives(b,x,A,P),W=[],ee=x+1,ce=A+1,pe=P+1,Ie=0;Ie<ee;){var De=Ie++,Ne=[];W.push(Ne);for(var Ge=0;Ge<ce;){for(var qe=Ge++,Je=B[De][qe],ct=Xe.rational2d(Je),ot=Xe.weight2d(Je),yt=[],pt=ct[0][0].length,It=0;It<pe;){var Nt=It++;yt.push([]);for(var Ht=0,ln=pe-Nt;Ht<ln;){for(var Vt=Ht++,Bt=ct[Nt][Vt],Kt=1,bn=Vt+1;Kt<bn;){var Cn=Kt++;Y.subMulMutate(Bt,j.get(Vt,Cn)*ot[0][Cn],yt[Nt][Vt-Cn])}for(var In=1,Nn=Nt+1;In<Nn;){var Rn=In++;Y.subMulMutate(Bt,j.get(Nt,Rn)*ot[Rn][0],yt[Nt-Rn][Vt]);for(var Fn=Y.zeros1d(pt),Tn=1,Hn=Vt+1;Tn<Hn;){var Wt=Tn++;Y.addMulMutate(Fn,j.get(Vt,Wt)*ot[Rn][Wt],yt[Nt-Rn][Vt-Wt])}Y.subMulMutate(Bt,j.get(Nt,Rn),Fn)}Y.mulMutate(1/ot[0][0],Bt),yt[Nt].push(Bt)}}Ne.push(yt)}}return W},Xe.surfaceRegularSampleDerivatives=function(b,x,A,P){var B=b.degreeU,W=b.degreeV,ee=b.controlPoints,ce=b.knotsU,pe=b.knotsV,Ie=ee[0][0].length;(ue.last(ce)-ce[0])/x,(ue.last(pe)-pe[0])/A;for(var De=Xe.regularlySpacedDerivativeBasisFunctions(B,ce,x),Ne=De.item0,Ge=De.item1,qe=Xe.regularlySpacedDerivativeBasisFunctions(W,pe,A),Je=qe.item0,ct=qe.item1,ot=[],yt=x+1,pt=A+1,It=0;It<yt;){var Nt=It++,Ht=[];ot.push(Ht);for(var ln=0;ln<pt;){var Vt=ln++;Ht.push(Xe.surfaceDerivativesGivenBasesKnotSpans(B,W,ee,Ne[Nt],Je[Vt],Ge[Nt],ct[Vt],Ie,P))}}return ot},Xe.rationalSurfaceRegularSamplePoints=function(b,x,A){return Xe.dehomogenize2d(Xe.surfaceRegularSamplePoints(b,x,A))},Xe.surfaceRegularSamplePoints=function(b,x,A){var P=b.degreeU,B=b.degreeV,W=b.controlPoints,ee=b.knotsU,ce=b.knotsV,pe=W[0][0].length;(ue.last(ee)-ee[0])/x,(ue.last(ce)-ce[0])/A;for(var Ie=Xe.regularlySpacedBasisFunctions(P,ee,x),De=Ie.item0,Ne=Ie.item1,Ge=Xe.regularlySpacedBasisFunctions(B,ce,A),qe=Ge.item0,Je=Ge.item1,ct=[],ot=x+1,yt=A+1,pt=0;pt<ot;){var It=pt++,Nt=[];ct.push(Nt);for(var Ht=0;Ht<yt;){var ln=Ht++;Nt.push(Xe.surfacePointGivenBasesKnotSpans(P,B,W,De[It],qe[ln],Ne[It],Je[ln],pe))}}return ct},Xe.regularlySpacedBasisFunctions=function(b,x,A){for(var P=x.length-b-2,B=(ue.last(x)-x[0])/A,W=[],ee=[],ce=x[0],pe=Xe.knotSpanGivenN(P,b,ce,x),Ie=A+1,De=0;De<Ie;){for(De++;ce>=x[pe+1];)pe++;ee.push(pe),W.push(Xe.basisFunctionsGivenKnotSpanIndex(pe,ce,b,x)),ce+=B}return new _e(ee,W)},Xe.regularlySpacedDerivativeBasisFunctions=function(b,x,A){for(var P=x.length-b-2,B=(ue.last(x)-x[0])/A,W=[],ee=[],ce=x[0],pe=Xe.knotSpanGivenN(P,b,ce,x),Ie=A+1,De=0;De<Ie;){for(De++;ce>=x[pe+1];)pe++;ee.push(pe),W.push(Xe.derivativeBasisFunctionsGivenNI(pe,ce,b,P,x)),ce+=B}return new _e(ee,W)},Xe.surfacePointGivenBasesKnotSpans=function(b,x,A,P,B,W,ee,ce){for(var pe=Y.zeros1d(ce),Ie,De=P-b,Ne=B-x,Ge=0,qe=x+1;Ge<qe;){var Je=Ge++;Ie=Y.zeros1d(ce);for(var ct=0,ot=b+1;ct<ot;){var yt=ct++;Y.addMulMutate(Ie,W[yt],A[De+yt][Ne])}Ne++,Y.addMulMutate(pe,ee[Je],Ie)}return pe},Xe.surfaceDerivativesGivenBasesKnotSpans=function(b,x,A,P,B,W,ee,ce,pe){var Ie=A[0][0].length,De;pe<b?De=pe:De=b;var Ne;pe<x?Ne=pe:Ne=x;for(var Ge=Y.zeros3d(De+1,Ne+1,Ie),qe=Y.zeros2d(x+1,Ie),Je=0,ct=0,ot=De+1;ct<ot;){for(var yt=ct++,pt=0,It=x+1;pt<It;){var Nt=pt++;qe[Nt]=Y.zeros1d(Ie);for(var Ht=0,ln=b+1;Ht<ln;){var Vt=Ht++;Y.addMulMutate(qe[Nt],W[yt][Vt],A[P-b+Vt][B-x+Nt])}}var Bt=pe-yt;Bt<Ne?Je=Bt:Je=Ne;for(var Kt=0,bn=Je+1;Kt<bn;){var Cn=Kt++;Ge[yt][Cn]=Y.zeros1d(Ie);for(var In=0,Nn=x+1;In<Nn;){var Rn=In++;Y.addMulMutate(Ge[yt][Cn],ee[Cn][Rn],qe[Rn])}}}return Ge},Xe.curveDerivatives=function(b,x,A){var P=b.knots.length-b.degree-2;return Xe.curveDerivativesGivenN(P,b,x,A)},Xe.curveDerivativesGivenN=function(b,x,A,P){var B=x.degree,W=x.controlPoints,ee=x.knots;if(!Xe.areValidRelations(B,W.length,ee.length))throw new O("Invalid relations between control points, knot vector, and n");var ce=W[0].length,pe;P<B?pe=P:pe=B;for(var Ie=Y.zeros2d(P+1,ce),De=Xe.knotSpanGivenN(b,B,A,ee),Ne=Xe.derivativeBasisFunctionsGivenNI(De,A,B,pe,ee),Ge=0,qe=pe+1;Ge<qe;)for(var Je=Ge++,ct=0,ot=B+1;ct<ot;){var yt=ct++;Y.addMulMutate(Ie[Je],Ne[Je][yt],W[De-B+yt])}return Ie},Xe.curvePoint=function(b,x){var A=b.knots.length-b.degree-2;return Xe.curvePointGivenN(A,b,x)},Xe.areValidRelations=function(b,x,A){return x+b+1-A==0},Xe.curvePointGivenN=function(b,x,A){var P=x.degree,B=x.controlPoints,W=x.knots;if(!Xe.areValidRelations(P,B.length,W.length))throw new O("Invalid relations between control points, knot Array, and n");for(var ee=Xe.knotSpanGivenN(b,P,A,W),ce=Xe.basisFunctionsGivenKnotSpanIndex(ee,A,P,W),pe=Y.zeros1d(B[0].length),Ie=0,De=P+1;Ie<De;){var Ne=Ie++;Y.addMulMutate(pe,ce[Ne],B[ee-P+Ne])}return pe},Xe.volumePoint=function(b,x,A,P){var B=b.knotsU.length-b.degreeU-2,W=b.knotsV.length-b.degreeV-2,ee=b.knotsW.length-b.degreeW-2;return Xe.volumePointGivenNML(b,B,W,ee,x,A,P)},Xe.volumePointGivenNML=function(b,x,A,P,B,W,ee){if(!Xe.areValidRelations(b.degreeU,b.controlPoints.length,b.knotsU.length)||!Xe.areValidRelations(b.degreeV,b.controlPoints[0].length,b.knotsV.length)||!Xe.areValidRelations(b.degreeW,b.controlPoints[0][0].length,b.knotsW.length))throw new O("Invalid relations between control points and knot vector");for(var ce=b.controlPoints,pe=b.degreeU,Ie=b.degreeV,De=b.degreeW,Ne=b.knotsU,Ge=b.knotsV,qe=b.knotsW,Je=ce[0][0][0].length,ct=Xe.knotSpanGivenN(x,pe,B,Ne),ot=Xe.knotSpanGivenN(A,Ie,W,Ge),yt=Xe.knotSpanGivenN(P,De,ee,qe),pt=Xe.basisFunctionsGivenKnotSpanIndex(ct,B,pe,Ne),It=Xe.basisFunctionsGivenKnotSpanIndex(ot,W,Ie,Ge),Nt=Xe.basisFunctionsGivenKnotSpanIndex(yt,ee,De,qe),Ht=ct-pe,ln=Y.zeros1d(Je),Vt=Y.zeros1d(Je),Bt=Y.zeros1d(Je),Kt=0,bn=De+1;Kt<bn;){var Cn=Kt++;Bt=Y.zeros1d(Je);for(var In=yt-De+Cn,Nn=0,Rn=Ie+1;Nn<Rn;){var Fn=Nn++;Vt=Y.zeros1d(Je);for(var Tn=ot-Ie+Fn,Hn=0,Wt=pe+1;Hn<Wt;){var Gn=Hn++;Y.addMulMutate(Vt,pt[Gn],ce[Ht+Gn][Tn][In])}Y.addMulMutate(Bt,It[Fn],Vt)}Y.addMulMutate(ln,Nt[Cn],Bt)}return ln},Xe.derivativeBasisFunctions=function(b,x,A){var P=Xe.knotSpan(x,b,A),B=A.length-1,W=B-x-1;return Xe.derivativeBasisFunctionsGivenNI(P,b,x,W,A)},Xe.derivativeBasisFunctionsGivenNI=function(b,x,A,P,B){var W=Y.zeros2d(A+1,A+1),ee=Y.zeros1d(A+1),ce=Y.zeros1d(A+1),pe=0,Ie=0;W[0][0]=1;for(var De=1,Ne=A+1;De<Ne;){var Ge=De++;ee[Ge]=x-B[b+1-Ge],ce[Ge]=B[b+Ge]-x,pe=0;for(var qe=0;qe<Ge;){var Je=qe++;W[Ge][Je]=ce[Je+1]+ee[Ge-Je],Ie=W[Je][Ge-1]/W[Ge][Je],W[Je][Ge]=pe+ce[Je+1]*Ie,pe=ee[Ge-Je]*Ie}W[Ge][Ge]=pe}for(var ct=Y.zeros2d(P+1,A+1),ot=Y.zeros2d(2,A+1),yt=0,pt=1,It=0,Nt=0,Ht=0,ln=0,Vt=0,Bt=0,Kt=A+1;Bt<Kt;){var bn=Bt++;ct[0][bn]=W[bn][A]}for(var Cn=0,In=A+1;Cn<In;){var Nn=Cn++;yt=0,pt=1,ot[0][0]=1;for(var Rn=1,Fn=P+1;Rn<Fn;){var Tn=Rn++;It=0,Nt=Nn-Tn,Ht=A-Tn,Nn>=Tn&&(ot[pt][0]=ot[yt][0]/W[Ht+1][Nt],It=ot[pt][0]*W[Nt][Ht]),Nt>=-1?ln=1:ln=-Nt,Nn-1<=Ht?Vt=Tn-1:Vt=A-Nn;for(var Hn=ln,Wt=Vt+1;Hn<Wt;){var Gn=Hn++;ot[pt][Gn]=(ot[yt][Gn]-ot[yt][Gn-1])/W[Ht+1][Nt+Gn],It+=ot[pt][Gn]*W[Nt+Gn][Ht]}Nn<=Ht&&(ot[pt][Tn]=-ot[yt][Tn-1]/W[Ht+1][Nn],It+=ot[pt][Tn]*W[Nn][Ht]),ct[Tn][Nn]=It;var hr=yt;yt=pt,pt=hr}}for(var Zr=A,ls=1,Or=P+1;ls<Or;){for(var fs=ls++,Zi=0,Bo=A+1;Zi<Bo;){var Oi=Zi++;ct[fs][Oi]*=Zr}Zr*=A-fs}return ct},Xe.basisFunctions=function(b,x,A){var P=Xe.knotSpan(x,b,A);return Xe.basisFunctionsGivenKnotSpanIndex(P,b,x,A)},Xe.basisFunctionsGivenKnotSpanIndex=function(b,x,A,P){var B=Y.zeros1d(A+1),W=Y.zeros1d(A+1),ee=Y.zeros1d(A+1),ce=0,pe=0;B[0]=1;for(var Ie=1,De=A+1;Ie<De;){var Ne=Ie++;W[Ne]=x-P[b+1-Ne],ee[Ne]=P[b+Ne]-x,ce=0;for(var Ge=0;Ge<Ne;){var qe=Ge++;pe=B[qe]/(ee[qe+1]+W[Ne-qe]),B[qe]=ce+ee[qe+1]*pe,ce=W[Ne-qe]*pe}B[Ne]=ce}return B},Xe.knotSpan=function(b,x,A){return Xe.knotSpanGivenN(A.length-b-2,b,x,A)},Xe.knotSpanGivenN=function(b,x,A,P){if(A>P[b+1]-K.EPSILON)return b;if(A<P[x]+K.EPSILON)return x;for(var B=x,W=b+1,ee=Math.floor((B+W)/2);A<P[ee]||A>=P[ee+1];)A<P[ee]?W=ee:B=ee,ee=Math.floor((B+W)/2);return ee},Xe.dehomogenize=function(b){for(var x=b.length,A=[],P=b[x-1],B=b.length-1,W=0;W<B;){var ee=W++;A.push(b[ee]/P)}return A},Xe.rational1d=function(b){var x=b[0].length-1;return b.map(function(A){return A.slice(0,x)})},Xe.rational2d=function(b){return b.map(Xe.rational1d)},Xe.weight1d=function(b){var x=b[0].length-1;return b.map(function(A){return A[x]})},Xe.weight2d=function(b){return b.map(Xe.weight1d)},Xe.dehomogenize1d=function(b){return b.map(Xe.dehomogenize)},Xe.dehomogenize2d=function(b){return b.map(Xe.dehomogenize1d)},Xe.homogenize1d=function(b,x){var A=b.length,P=b[0].length,B=[],W=0,ee=[],ce;x!=null?ce=x:ce=Y.rep(b.length,1);for(var pe=0;pe<A;){var Ie=pe++,De=[];ee=b[Ie],W=ce[Ie];for(var Ne=0;Ne<P;){var Ge=Ne++;De.push(ee[Ge]*W)}De.push(W),B.push(De)}return B},Xe.homogenize2d=function(b,x){var A=b.length,P=[],B;if(x!=null)B=x;else{for(var W=[],ee=0;ee<A;)ee++,W.push(Y.rep(b[0].length,1));B=W}for(var ce=0;ce<A;){var pe=ce++;P.push(Xe.homogenize1d(b[pe],B[pe]))}return P};var Ye=c.eval.Intersect=function(){};d["verb.eval.Intersect"]=Ye,Ye.__name__=["verb","eval","Intersect"],Ye.surfaces=function(b,x,A){var P=On.rationalSurfaceAdaptive(b),B=On.rationalSurfaceAdaptive(x),W=Ye.meshes(P,B),ee=W.map(function(ce){return ce.map(function(pe){return Ye.surfacesAtPointWithEstimate(b,x,pe.uv0,pe.uv1,A)})});return ee.map(function(ce){return gt.rationalInterpCurve(ce.map(function(pe){return pe.point}),3)})},Ye.surfacesAtPointWithEstimate=function(b,x,A,P,B){var W,ee,ce,pe,Ie,De,Ne,Ge,qe,Je,ct,ot,yt,pt=5,It=0;do{if(W=Xe.rationalSurfaceDerivatives(b,A[0],A[1],1),ee=W[0][0],pe=W[1][0],Ie=W[0][1],ce=Y.normalized(Y.cross(pe,Ie)),De=Y.dot(ce,ee),Ne=Xe.rationalSurfaceDerivatives(x,P[0],P[1],1),Ge=Ne[0][0],Je=Ne[1][0],ct=Ne[0][1],qe=Y.normalized(Y.cross(Je,ct)),ot=Y.dot(qe,Ge),yt=Y.distSquared(ee,Ge),yt<B*B)break;var Nt=Y.normalized(Y.cross(ce,qe)),Ht=Y.dot(Nt,ee),ln=Ye.threePlanes(ce,De,qe,ot,Nt,Ht);if(ln==null)throw new O("panic!");var Vt=Y.sub(ln,ee),Bt=Y.sub(ln,Ge),Kt=Y.cross(pe,ce),bn=Y.cross(Ie,ce),Cn=Y.cross(Je,qe),In=Y.cross(ct,qe),Nn=Y.dot(bn,Vt)/Y.dot(bn,pe),Rn=Y.dot(Kt,Vt)/Y.dot(Kt,Ie),Fn=Y.dot(In,Bt)/Y.dot(In,Je),Tn=Y.dot(Cn,Bt)/Y.dot(Cn,ct);A=Y.add([Nn,Rn],A),P=Y.add([Fn,Tn],P),It++}while(It<pt);return new St(A,P,ee,yt)},Ye.meshes=function(b,x,A,P){A==null&&(A=new Ct(b)),P==null&&(P=new Ct(x));var B=Ye.boundingBoxTrees(A,P,0),W=ue.unique(B.map(function(ee){return Ye.triangles(b,ee.item0,x,ee.item1)}).filter(function(ee){return ee!=null}).filter(function(ee){return Y.distSquared(ee.min.point,ee.max.point)>K.EPSILON}),function(ee,ce){var pe=Y.sub(ee.min.uv0,ce.min.uv0),Ie=Y.dot(pe,pe),De=Y.sub(ee.max.uv0,ce.max.uv0),Ne=Y.dot(De,De),Ge=Y.sub(ee.min.uv0,ce.max.uv0),qe=Y.dot(Ge,Ge),Je=Y.sub(ee.max.uv0,ce.min.uv0),ct=Y.dot(Je,Je);return Ie<K.EPSILON&&Ne<K.EPSILON||qe<K.EPSILON&&ct<K.EPSILON});return Ye.makeMeshIntersectionPolylines(W)},Ye.meshSlices=function(b,x,A,P){for(var B=new sn(b),W=B.boundingBox(),ee=W.min[0],ce=W.min[1],pe=W.max[0],Ie=W.max[1],De=Y.span(x,A,P),Ne=[],Ge=0;Ge<De.length;){var qe=De[Ge];++Ge;var Je=[[ee,ce,qe],[pe,ce,qe],[pe,Ie,qe],[ee,Ie,qe]],ct=[[0,0],[1,0],[1,1],[0,1]],ot=[[0,1,2],[0,2,3]],yt=new Ee(ot,Je,null,ct);Ne.push(Ye.meshes(b,yt,B))}return Ne},Ye.makeMeshIntersectionPolylines=function(b){if(b.length==0)return[];for(var x=0;x<b.length;){var A=b[x];++x,A.max.opp=A.min,A.min.opp=A.max}for(var P=Ye.kdTreeFromSegments(b),B=[],W=0;W<b.length;){var ee=b[W];++W,B.push(ee.min),B.push(ee.max)}for(var ce=0;ce<B.length;){var pe=B[ce];if(++ce,pe.adj==null){var Ie=Ye.lookupAdjacentSegment(pe,P,b.length);Ie!=null&&Ie.adj==null&&(pe.adj=Ie,Ie.adj=pe)}}var De=B.filter(function(pt){return pt.adj==null});De.length==0&&(De=B);for(var Ne=[],Ge=0,qe=!1;De.length!=0;){var Je=De.pop();if(!Je.visited){for(var ct=[],ot=Je;ot!=null&&!(ot.visited||(ot.visited=!0,ot.opp.visited=!0,ct.push(ot),Ge+=2,ot=ot.opp.adj,ot==Je)););ct.length>0&&(ct.push(ct[ct.length-1].opp),Ne.push(ct))}if(De.length==0&&B.length>0&&(qe||Ge<B.length)){qe=!0;var yt=B.pop();De.push(yt)}}return Ne},Ye.kdTreeFromSegments=function(b){for(var x=[],A=0;A<b.length;){var P=b[A];++A,x.push(new be(P.min.point,P.min)),x.push(new be(P.max.point,P.max))}return new ze(x,Y.distSquared)},Ye.lookupAdjacentSegment=function(b,x,A){var P=x.nearest(b.point,A,K.EPSILON).filter(function(B){return b!=B.item0.obj}).map(function(B){return B.item0.obj});return P.length==1?P[0]:null},Ye.curveAndSurface=function(b,x,A,P,B){A==null&&(A=.001),P!=null?P=P:P=new Ue(b),B!=null?B=B:B=new vt(x);var W=Ye.boundingBoxTrees(P,B,A);return ue.unique(W.map(function(ee){var ce=ee.item0,pe=ee.item1,Ie=ue.first(ce.knots),De=ue.last(ce.knots),Ne=(Ie+De)/2,Ge=ue.first(pe.knotsU),qe=ue.last(pe.knotsU),Je=ue.first(pe.knotsV),ct=ue.last(pe.knotsV),ot=[(Ge+qe)/2,(Je+ct)/2];return Ye.curveAndSurfaceWithEstimate(ce,pe,[Ne].concat(ot),A)}).filter(function(ee){return Y.distSquared(ee.curvePoint,ee.surfacePoint)<A*A}),function(ee,ce){return Math.abs(ee.u-ce.u)<.5*A})},Ye.curveAndSurfaceWithEstimate=function(b,x,A,P){P==null&&(P=.001);var B=function(pe){var Ie=Xe.rationalCurvePoint(b,pe[0]),De=Xe.rationalSurfacePoint(x,pe[1],pe[2]),Ne=Y.sub(Ie,De);return Y.dot(Ne,Ne)},W=function(pe){var Ie=Xe.rationalCurveDerivatives(b,pe[0],1),De=Xe.rationalSurfaceDerivatives(x,pe[1],pe[2],1),Ne=Y.sub(De[0][0],Ie[0]),Ge=Y.mul(-1,Ie[1]),qe=De[1][0],Je=De[0][1];return[2*Y.dot(Ge,Ne),2*Y.dot(qe,Ne),2*Y.dot(Je,Ne)]},ee=At.uncmin(B,A,P*P,W),ce=ee.solution;return new We(ce[0],[ce[1],ce[2]],Xe.rationalCurvePoint(b,ce[0]),Xe.rationalSurfacePoint(x,ce[1],ce[2]))},Ye.polylineAndMesh=function(b,x,A){for(var P=Ye.boundingBoxTrees(new st(b),new Ct(x),A),B=[],W=0;W<P.length;){var ee=P[W];++W;var ce=ee.item0,pe=ee.item1,Ie=Ye.segmentWithTriangle(b.points[ce],b.points[ce+1],x.points,x.faces[pe]);if(Ie!=null){var De=Ie.point,Ne=Y.lerp(Ie.p,[b.params[ce]],[b.params[ce+1]])[0],Ge=dn.triangleUVFromPoint(x,pe,De);B.push(new lt(De,Ne,Ge,ce,pe))}}return B},Ye.boundingBoxTrees=function(b,x,A){A==null&&(A=1e-9);var P=[],B=[];P.push(b),B.push(x);for(var W=[];P.length>0;){var ee=P.pop(),ce=B.pop();if(!(ee.empty()||ce.empty())&&ee.boundingBox().intersects(ce.boundingBox(),A)){var pe=ee.indivisible(A),Ie=ce.indivisible(A);if(pe&&Ie){W.push(new _e(ee.yield(),ce.yield()));continue}else if(pe&&!Ie){var De=ce.split();P.push(ee),B.push(De.item1),P.push(ee),B.push(De.item0);continue}else if(!pe&&Ie){var Ne=ee.split();P.push(Ne.item1),B.push(ce),P.push(Ne.item0),B.push(ce);continue}var Ge=ee.split(),qe=ce.split();P.push(Ge.item1),B.push(qe.item1),P.push(Ge.item1),B.push(qe.item0),P.push(Ge.item0),B.push(qe.item1),P.push(Ge.item0),B.push(qe.item0)}}return W},Ye.curves=function(b,x,A){var P=Ye.boundingBoxTrees(new Ue(b),new Ue(x),0);return ue.unique(P.map(function(B){return Ye.curvesWithEstimate(b,x,ue.first(B.item0.knots),ue.first(B.item1.knots),A)}).filter(function(B){return Y.distSquared(B.point0,B.point1)<A}),function(B,W){return Math.abs(B.u0-W.u0)<A*5})},Ye.curvesWithEstimate=function(b,x,A,P,B){var W=function(Ge){var qe=Xe.rationalCurvePoint(b,Ge[0]),Je=Xe.rationalCurvePoint(x,Ge[1]),ct=Y.sub(qe,Je);return Y.dot(ct,ct)},ee=function(Ge){var qe=Xe.rationalCurveDerivatives(b,Ge[0],1),Je=Xe.rationalCurveDerivatives(x,Ge[1],1),ct=Y.sub(qe[0],Je[0]),ot=qe[1],yt=Y.mul(-1,Je[1]);return[2*Y.dot(ot,ct),2*Y.dot(yt,ct)]},ce=At.uncmin(W,[A,P],B*B,ee),pe=ce.solution[0],Ie=ce.solution[1],De=Xe.rationalCurvePoint(b,pe),Ne=Xe.rationalCurvePoint(x,Ie);return new Te(De,Ne,pe,Ie)},Ye.triangles=function(b,x,A,P){var B=b.faces[x],W=A.faces[P],ee=dn.getTriangleNorm(b.points,B),ce=dn.getTriangleNorm(A.points,W),pe=b.points[B[0]],Ie=A.points[W[0]],De=Ye.planes(pe,ee,Ie,ce);if(De==null)return null;var Ne=Ye.clipRayInCoplanarTriangle(De,b,x);if(Ne==null)return null;var Ge=Ye.clipRayInCoplanarTriangle(De,A,P);if(Ge==null)return null;var qe=Ye.mergeTriangleClipIntervals(Ne,Ge,b,x,A,P);return qe==null?null:new ie(new ut(qe.min.uv0,qe.min.uv1,qe.min.point,x,P),new ut(qe.max.uv0,qe.max.uv1,qe.max.point,x,P))},Ye.clipRayInCoplanarTriangle=function(b,x,A){for(var P=x.faces[A],B=[x.points[P[0]],x.points[P[1]],x.points[P[2]]],W=[x.uvs[P[0]],x.uvs[P[1]],x.uvs[P[2]]],ee=[Y.sub(W[1],W[0]),Y.sub(W[2],W[1]),Y.sub(W[0],W[2])],ce=[Y.sub(B[1],B[0]),Y.sub(B[2],B[1]),Y.sub(B[0],B[2])],pe=ce.map(Y.normalized),Ie=ce.map(Y.norm),De=null,Ne=null,Ge=0;Ge<3;){var qe=Ge++,Je=B[qe],ct=pe[qe],ot=Ye.rays(Je,ct,b.origin,b.dir);if(ot!=null){var yt=ot.u0,pt=ot.u1;yt<-K.EPSILON||yt>Ie[qe]+K.EPSILON||((De==null||pt<De.u)&&(De=new et(pt,Y.onRay(b.origin,b.dir,pt),Y.onRay(W[qe],ee[qe],yt/Ie[qe]))),(Ne==null||pt>Ne.u)&&(Ne=new et(pt,Y.onRay(b.origin,b.dir,pt),Y.onRay(W[qe],ee[qe],yt/Ie[qe]))))}}return Ne==null||De==null?null:new ie(De,Ne)},Ye.mergeTriangleClipIntervals=function(b,x,A,P,B,W){if(x.min.u>b.max.u+K.EPSILON||b.min.u>x.max.u+K.EPSILON)return null;var ee;b.min.u>x.min.u?ee=new _e(b.min,0):ee=new _e(x.min,1);var ce;b.max.u<x.max.u?ce=new _e(b.max,0):ce=new _e(x.max,1);var pe=new ie(new ut(null,null,ee.item0.point,P,W),new ut(null,null,ce.item0.point,P,W));return ee.item1==0?(pe.min.uv0=ee.item0.uv,pe.min.uv1=dn.triangleUVFromPoint(B,W,ee.item0.point)):(pe.min.uv0=dn.triangleUVFromPoint(A,P,ee.item0.point),pe.min.uv1=ee.item0.uv),ce.item1==0?(pe.max.uv0=ce.item0.uv,pe.max.uv1=dn.triangleUVFromPoint(B,W,ce.item0.point)):(pe.max.uv0=dn.triangleUVFromPoint(A,P,ce.item0.point),pe.max.uv1=ce.item0.uv),pe},Ye.planes=function(b,x,A,P){var B=Y.cross(x,P);if(Y.dot(B,B)<K.EPSILON)return null;var W=0,ee=Math.abs(B[0]),ce=Math.abs(B[1]),pe=Math.abs(B[2]);ce>ee&&(W=1,ee=ce),pe>ee&&(W=2,ee=pe);var Ie,De,Ne,Ge;W==0?(Ie=x[1],De=x[2],Ne=P[1],Ge=P[2]):W==1?(Ie=x[0],De=x[2],Ne=P[0],Ge=P[2]):(Ie=x[0],De=x[1],Ne=P[0],Ge=P[1]);var qe=-Y.dot(b,x),Je=-Y.dot(A,P),ct=Ie*Ge-De*Ne,ot=(De*Je-qe*Ge)/ct,yt=(qe*Ne-Ie*Je)/ct,pt;return W==0?pt=[0,ot,yt]:W==1?pt=[ot,0,yt]:pt=[ot,yt,0],new Re(pt,Y.normalized(B))},Ye.threePlanes=function(b,x,A,P,B,W){var ee=Y.cross(A,B),ce=Y.dot(b,ee);if(Math.abs(ce)<K.EPSILON)return null;var pe=Y.sub(Y.mul(W,A),Y.mul(P,B)),Ie=Y.add(Y.mul(x,ee),Y.cross(b,pe));return Y.mul(1/ce,Ie)},Ye.polylines=function(b,x,A){for(var P=Ye.boundingBoxTrees(new st(b),new st(x),A),B=[],W=0;W<P.length;){var ee=P[W];++W;var ce=ee.item0,pe=ee.item1,Ie=Ye.segments(b.points[ce],b.points[ce+1],x.points[pe],x.points[pe+1],A);Ie!=null&&(Ie.u0=Y.lerp(Ie.u0,[b.params[ce]],[b.params[ce+1]])[0],Ie.u1=Y.lerp(Ie.u1,[x.params[pe]],[x.params[pe+1]])[0],B.push(Ie))}return B},Ye.segments=function(b,x,A,P,B){var W=Y.sub(x,b),ee=Math.sqrt(Y.dot(W,W)),ce=Y.mul(1/ee,W),pe=Y.sub(P,A),Ie=Math.sqrt(Y.dot(pe,pe)),De=Y.mul(1/Ie,pe),Ne=Ye.rays(b,ce,A,De);if(Ne!=null){var Ge=Math.min(Math.max(0,Ne.u0/ee),1),qe=Math.min(Math.max(0,Ne.u1/Ie),1),Je=Y.onRay(b,W,Ge),ct=Y.onRay(A,pe,qe),ot=Y.distSquared(Je,ct);if(ot<B*B)return new Te(Je,ct,Ge,qe)}return null},Ye.rays=function(b,x,A,P){var B=Y.dot(x,P),W=Y.dot(x,A),ee=Y.dot(x,b),ce=Y.dot(P,A),pe=Y.dot(P,b),Ie=Y.dot(x,x),De=Y.dot(P,P),Ne=Ie*De-B*B;if(Math.abs(Ne)<K.EPSILON)return null;var Ge=B*(W-ee)-Ie*(ce-pe),qe=Ge/Ne,Je=(W-ee+qe*B)/Ie,ct=Y.onRay(b,x,Je),ot=Y.onRay(A,P,qe);return new Te(ct,ot,Je,qe)},Ye.segmentWithTriangle=function(b,x,A,P){var B=A[P[0]],W=A[P[1]],ee=A[P[2]],ce=Y.sub(W,B),pe=Y.sub(ee,B),Ie=Y.cross(ce,pe),De=Y.sub(x,b),Ne=Y.sub(b,B),Ge=-Y.dot(Ie,Ne),qe=Y.dot(Ie,De);if(Math.abs(qe)<K.EPSILON)return null;var Je=Ge/qe;if(Je<0||Je>1)return null;var ct=Y.add(b,Y.mul(Je,De)),ot=Y.dot(ce,pe),yt=Y.dot(ce,ce),pt=Y.dot(pe,pe),It=Y.sub(ct,B),Nt=Y.dot(It,ce),Ht=Y.dot(It,pe),ln=ot*ot-yt*pt;if(Math.abs(ln)<K.EPSILON)return null;var Vt=(ot*Ht-pt*Nt)/ln,Bt=(ot*Nt-yt*Ht)/ln;return Vt>1+K.EPSILON||Bt>1+K.EPSILON||Bt<-K.EPSILON||Vt<-K.EPSILON||Vt+Bt>1+K.EPSILON?null:new Ot(ct,Vt,Bt,Je)},Ye.segmentAndPlane=function(b,x,A,P){var B=Y.dot(P,Y.sub(x,b));if(Math.abs(B)<K.EPSILON)return null;var W=Y.dot(P,Y.sub(A,b)),ee=W/B;return ee>1+K.EPSILON||ee<-K.EPSILON?null:{p:ee}};var gt=c.eval.Make=function(){};d["verb.eval.Make"]=gt,gt.__name__=["verb","eval","Make"],gt.rationalTranslationalSurface=function(b,x){for(var A=Xe.rationalCurvePoint(x,ue.first(x.knots)),P=ue.first(x.knots),B=ue.last(x.knots),W=2*x.controlPoints.length,ee=(B-P)/(W-1),ce=[],pe=0;pe<W;){var Ie=pe++,De=Y.sub(Xe.rationalCurvePoint(x,P+Ie*ee),A),Ne=Gt.rationalCurveTransform(b,[[1,0,0,De[0]],[0,1,0,De[1]],[0,0,1,De[2]],[0,0,0,1]]);ce.push(Ne)}return gt.loftedSurface(ce)},gt.surfaceBoundaryCurves=function(b){var x=gt.surfaceIsocurve(b,ue.first(b.knotsU),!1),A=gt.surfaceIsocurve(b,ue.last(b.knotsU),!1),P=gt.surfaceIsocurve(b,ue.first(b.knotsV),!0),B=gt.surfaceIsocurve(b,ue.last(b.knotsV),!0);return[x,A,P,B]},gt.surfaceIsocurve=function(b,x,A){A==null&&(A=!1);var P;A?P=b.knotsV:P=b.knotsU;var B;A?B=b.degreeV:B=b.degreeU;for(var W=Pn.knotMultiplicities(P),ee=-1,ce=0,pe=W.length;ce<pe;){var Ie=ce++;if(Math.abs(x-W[Ie].knot)<K.EPSILON){ee=Ie;break}}var De=B+1;ee>=0&&(De=De-W[ee].mult);var Ne;De>0?Ne=Gt.surfaceKnotRefine(b,Y.rep(De,x),A):Ne=b;var Ge=Xe.knotSpan(B,x,P);return Math.abs(x-ue.first(P))<K.EPSILON?Ge=0:Math.abs(x-ue.last(P))<K.EPSILON&&(Ge=(A?Ne.controlPoints[0].length:Ne.controlPoints.length)-1),A?new te(Ne.degreeU,Ne.knotsU,function(qe){for(var Je,ct=[],ot=0,yt=Ne.controlPoints;ot<yt.length;){var pt=yt[ot];++ot,ct.push(pt[Ge])}return Je=ct,Je}()):new te(Ne.degreeV,Ne.knotsV,Ne.controlPoints[Ge])},gt.loftedSurface=function(b,x){b=Gt.unifyCurveKnotVectors(b);var A=b[0].degree;x==null&&(x=3),x>b.length-1&&(x=b.length-1);for(var P=b[0].knots,B=[],W=[],ee=0,ce=b[0].controlPoints.length;ee<ce;){var pe=[ee++],Ie=b.map(function(Ne){return function(Ge){return Ge.controlPoints[Ne[0]]}}(pe)),De=gt.rationalInterpCurve(Ie,x,!0);W.push(De.controlPoints),B=De.knots}return new oe(A,x,P,B,W)},gt.clonedCurve=function(b){return new te(b.degree,b.knots.slice(),b.controlPoints.map(function(x){return x.slice()}))},gt.rationalBezierCurve=function(b,x){for(var A=b.length-1,P=[],B=0,W=A+1;B<W;)B++,P.push(0);for(var ee=0,ce=A+1;ee<ce;)ee++,P.push(1);return x==null&&(x=Y.rep(b.length,1)),new te(A,P,Xe.homogenize1d(b,x))},gt.fourPointSurface=function(b,x,A,P,B){B==null&&(B=3);for(var W=B,ee=[],ce=0,pe=B+1;ce<pe;){for(var Ie=ce++,De=[],Ne=0,Ge=B+1;Ne<Ge;){var qe=Ne++,Je=1-Ie/W,ct=Y.lerp(Je,b,x),ot=Y.lerp(Je,P,A),yt=Y.lerp(1-qe/W,ct,ot);yt.push(1),De.push(yt)}ee.push(De)}var pt=Y.rep(B+1,0),It=Y.rep(B+1,1);return new oe(B,B,pt.concat(It),pt.concat(It),ee)},gt.ellipseArc=function(b,x,A,P,B){var W=Y.norm(x),ee=Y.norm(A);x=Y.normalized(x),A=Y.normalized(A),B<P&&(B=2*Math.PI+P);var ce=B-P,pe=0;ce<=Math.PI/2?pe=1:ce<=Math.PI?pe=2:ce<=3*Math.PI/2?pe=3:pe=4;var Ie=ce/pe,De=Math.cos(Ie/2),Ne=Y.add(b,Y.add(Y.mul(W*Math.cos(P),x),Y.mul(ee*Math.sin(P),A))),Ge=Y.sub(Y.mul(Math.cos(P),A),Y.mul(Math.sin(P),x)),qe=[],Je=Y.zeros1d(2*pe+3),ct=0,ot=P,yt=Y.zeros1d(pe*2);qe[0]=Ne,yt[0]=1;for(var pt=1,It=pe+1;pt<It;){var Nt=pt++;ot+=Ie;var Ht=Y.add(b,Y.add(Y.mul(W*Math.cos(ot),x),Y.mul(ee*Math.sin(ot),A)));yt[ct+2]=1,qe[ct+2]=Ht;var ln=Y.sub(Y.mul(Math.cos(ot),A),Y.mul(Math.sin(ot),x)),Vt=Ye.rays(Ne,Y.mul(1/Y.norm(Ge),Ge),Ht,Y.mul(1/Y.norm(ln),ln)),Bt=Y.add(Ne,Y.mul(Vt.u0,Ge));yt[ct+1]=De,qe[ct+1]=Bt,ct+=2,Nt<pe&&(Ne=Ht,Ge=ln)}for(var Kt=2*pe+1,bn=0;bn<3;){var Cn=bn++;Je[Cn]=0,Je[Cn+Kt]=1}switch(pe){case 2:Je[3]=Je[4]=.5;break;case 3:Je[3]=Je[4]=.3333333333333333,Je[5]=Je[6]=.6666666666666666;break;case 4:Je[3]=Je[4]=.25,Je[5]=Je[6]=.5,Je[7]=Je[8]=.75;break}return new te(2,Je,Xe.homogenize1d(qe,yt))},gt.arc=function(b,x,A,P,B,W){return gt.ellipseArc(b,Y.mul(P,Y.normalized(x)),Y.mul(P,Y.normalized(A)),B,W)},gt.polyline=function(b){for(var x=[0,0],A=0,P=0,B=b.length-1;P<B;){var W=P++;A+=Y.dist(b[W],b[W+1]),x.push(A)}x.push(A),x=Y.mul(1/A,x);for(var ee,ce=[],pe=0,Ie=b.length;pe<Ie;)pe++,ce.push(1);return ee=ce,new te(1,x,Xe.homogenize1d(b.slice(0),ee))},gt.extrudedSurface=function(b,x,A){for(var P=[[],[],[]],B=[[],[],[]],W=Xe.dehomogenize1d(A.controlPoints),ee=Xe.weight1d(A.controlPoints),ce=Y.mul(x,b),pe=Y.mul(.5*x,b),Ie=0,De=W.length;Ie<De;){var Ne=Ie++;P[2][Ne]=W[Ne],P[1][Ne]=Y.add(pe,W[Ne]),P[0][Ne]=Y.add(ce,W[Ne]),B[0][Ne]=ee[Ne],B[1][Ne]=ee[Ne],B[2][Ne]=ee[Ne]}return new oe(2,A.degree,[0,0,0,1,1,1],A.knots,Xe.homogenize2d(P,B))},gt.cylindricalSurface=function(b,x,A,P,B){var W=Y.cross(b,x),ee=gt.arc(A,x,W,B,0,2*Math.PI);return gt.extrudedSurface(b,P,ee)},gt.revolvedSurface=function(b,x,A,P){var B=Xe.dehomogenize1d(b.controlPoints),W=Xe.weight1d(b.controlPoints),ee,ce;P<=Math.PI/2?(ee=1,ce=Y.zeros1d(6+2*(ee-1))):P<=Math.PI?(ee=2,ce=Y.zeros1d(6+2*(ee-1)),ce[3]=ce[4]=.5):P<=3*Math.PI/2?(ee=3,ce=Y.zeros1d(6+2*(ee-1)),ce[3]=ce[4]=.3333333333333333,ce[5]=ce[6]=.6666666666666666):(ee=4,ce=Y.zeros1d(6+2*(ee-1)),ce[3]=ce[4]=.25,ce[5]=ce[6]=.5,ce[7]=ce[8]=.75);for(var pe=P/ee,Ie=3+2*(ee-1),De=0;De<3;){var Ne=De++;ce[Ne]=0,ce[Ie+Ne]=1}for(var Ge=Math.cos(pe/2),qe=0,Je=Y.zeros1d(ee+1),ct=Y.zeros1d(ee+1),ot=Y.zeros3d(2*ee+1,B.length,3),yt=Y.zeros2d(2*ee+1,B.length),pt=1,It=ee+1;pt<It;){var Nt=pt++;qe+=pe,ct[Nt]=Math.cos(qe),Je[Nt]=Math.sin(qe)}for(var Ht=0,ln=B.length;Ht<ln;){var Vt=Ht++,Bt=Ur.rayClosestPoint(B[Vt],x,A),Kt=Y.sub(B[Vt],Bt),bn=Y.norm(Kt),Cn=Y.cross(A,Kt);bn>K.EPSILON&&(Kt=Y.mul(1/bn,Kt),Cn=Y.mul(1/bn,Cn)),ot[0][Vt]=B[Vt];var In=B[Vt];yt[0][Vt]=W[Vt];for(var Nn=Cn,Rn=0,Fn=1,Tn=ee+1;Fn<Tn;){var Hn=Fn++,Wt;bn==0?Wt=Bt:Wt=Y.add(Bt,Y.add(Y.mul(bn*ct[Hn],Kt),Y.mul(bn*Je[Hn],Cn))),ot[Rn+2][Vt]=Wt,yt[Rn+2][Vt]=W[Vt];var Gn=Y.sub(Y.mul(ct[Hn],Cn),Y.mul(Je[Hn],Kt));if(bn==0)ot[Rn+1][Vt]=Bt;else{var hr=Ye.rays(In,Y.mul(1/Y.norm(Nn),Nn),Wt,Y.mul(1/Y.norm(Gn),Gn)),Zr=Y.add(In,Y.mul(hr.u0,Nn));ot[Rn+1][Vt]=Zr}yt[Rn+1][Vt]=Ge*W[Vt],Rn+=2,Hn<ee&&(In=Wt,Nn=Gn)}}return new oe(2,b.degree,ce,b.knots,Xe.homogenize2d(ot,yt))},gt.sphericalSurface=function(b,x,A,P){var B=gt.arc(b,Y.mul(-1,x),A,P,0,Math.PI);return gt.revolvedSurface(B,b,x,2*Math.PI)},gt.conicalSurface=function(b,x,A,P,B){var W=2*Math.PI,ee=1,ce=[Y.add(A,Y.mul(P,b)),Y.add(A,Y.mul(B,x))],pe=[0,0,1,1],Ie=[1,1],De=new te(ee,pe,Xe.homogenize1d(ce,Ie));return gt.revolvedSurface(De,A,b,W)},gt.rationalInterpCurve=function(b,x,A,P,B){if(A==null&&(A=!1),x==null&&(x=3),b.length<x+1)throw new O("You need to supply at least degree + 1 points! You only supplied "+b.length+" points.");for(var W=[0],ee=1,ce=b.length;ee<ce;){var pe=ee++,Ie=Y.norm(Y.sub(b[pe],b[pe-1])),De=W[W.length-1];W.push(De+Ie)}for(var Ne=W[W.length-1],Ge=0,qe=W.length;Ge<qe;){var Je=Ge++;W[Je]=W[Je]/Ne}var ct=Y.rep(x+1,0),ot=P!=null&&B!=null,yt;ot?yt=0:yt=1;var pt;ot?pt=W.length-x+1:pt=W.length-x;for(var It=yt;It<pt;){for(var Nt=It++,Ht=0,ln=0;ln<x;){var Vt=ln++;Ht+=W[Nt+Vt]}ct.push(1/x*Ht)}var Bt=ct.concat(Y.rep(x+1,1)),Kt=[],bn;ot?bn=b.length+1:bn=b.length-1;var Cn;ot?Cn=b.length-(x-1):Cn=b.length-(x+1);for(var In=0;In<W.length;){var Nn=W[In];++In;var Rn=Xe.knotSpanGivenN(bn,x,Nn,Bt),Fn=Xe.basisFunctionsGivenKnotSpanIndex(Rn,Nn,x,Bt),Tn=Rn-x,Hn=Y.zeros1d(Tn),Wt=Y.zeros1d(Cn-Tn);Kt.push(Hn.concat(Fn).concat(Wt))}if(ot){var Gn=Kt[0].length-2,hr=[-1,1].concat(Y.zeros1d(Gn)),Zr=Y.zeros1d(Gn).concat([-1,1]);ue.spliceAndInsert(Kt,1,0,hr),ue.spliceAndInsert(Kt,Kt.length-1,0,Zr)}for(var ls=b[0].length,Or=[],fs=(1-Bt[Bt.length-x-2])/x,Zi=Bt[x+1]/x,Bo=0;Bo<ls;){var Oi=[Bo++],mi;if(!ot)mi=b.map(function(fa){return function(Nl){return Nl[fa[0]]}}(Oi));else{mi=[b[0][Oi[0]]],mi.push(Zi*P[Oi[0]]);for(var Ji=1,bo=b.length-1;Ji<bo;){var ua=Ji++;mi.push(b[ua][Oi[0]])}mi.push(fs*B[Oi[0]]),mi.push(ue.last(b)[Oi[0]])}var Ja=Rt.solve(Kt,mi);Or.push(Ja)}var da=Rt.transpose(Or);if(!A){var ha=Y.rep(da.length,1);da=Xe.homogenize1d(da,ha)}return new te(x,Bt,da)};var Gt=c.eval.Modify=function(){};d["verb.eval.Modify"]=Gt,Gt.__name__=["verb","eval","Modify"],Gt.curveReverse=function(b){return new te(b.degree,Gt.knotsReverse(b.knots),ue.reversed(b.controlPoints))},Gt.surfaceReverse=function(b,x){return x==null&&(x=!1),x?new oe(b.degreeU,b.degreeV,b.knotsU,Gt.knotsReverse(b.knotsV),function(A){for(var P,B=[],W=0,ee=b.controlPoints;W<ee.length;){var ce=ee[W];++W,B.push(ue.reversed(ce))}return P=B,P}()):new oe(b.degreeU,b.degreeV,Gt.knotsReverse(b.knotsU),b.knotsV,ue.reversed(b.controlPoints))},Gt.knotsReverse=function(b){var x=ue.first(b);ue.last(b);for(var A=[x],P=b.length,B=1;B<P;){var W=B++;A.push(A[W-1]+(b[P-W]-b[P-W-1]))}return A},Gt.unifyCurveKnotVectors=function(b){b=b.map(gt.clonedCurve);for(var x=v.fold(b,function(Bt,Kt){return Gt.imax(Bt.degree,Kt)},0),A=0,P=b.length;A<P;){var B=A++;b[B].degree<x&&(b[B]=Gt.curveElevateDegree(b[B],x))}for(var W,ee=[],ce=0;ce<b.length;){var pe=b[ce];++ce,ee.push(new ie(ue.first(pe.knots),ue.last(pe.knots)))}W=ee;for(var Ie=0,De=b.length;Ie<De;){var Ne=Ie++,Ge=[W[Ne].min];b[Ne].knots=b[Ne].knots.map(function(Bt){return function(Kt){return Kt-Bt[0]}}(Ge))}for(var qe=W.map(function(Bt){return Bt.max-Bt.min}),Je=v.fold(qe,function(Bt,Kt){return Math.max(Bt,Kt)},0),ct=0,ot=b.length;ct<ot;){var yt=ct++,pt=[Je/qe[yt]];b[yt].knots=b[yt].knots.map(function(Bt){return function(Kt){return Kt*Bt[0]}}(pt))}for(var It=v.fold(b,function(Bt,Kt){return Y.sortedSetUnion(Bt.knots,Kt)},[]),Nt=0,Ht=b.length;Nt<Ht;){var ln=Nt++,Vt=Y.sortedSetSub(It,b[ln].knots);Vt.length==0&&(b[ln]=b[ln]),b[ln]=Gt.curveKnotRefine(b[ln],Vt)}return b},Gt.imin=function(b,x){return b<x?b:x},Gt.imax=function(b,x){return b>x?b:x},Gt.curveElevateDegree=function(b,x){if(x<=b.degree)return b;var A=b.knots.length-b.degree-2,P=b.degree,B=b.knots,W=b.controlPoints,ee=x-b.degree,ce=b.controlPoints[0].length,pe=Y.zeros2d(P+ee+1,P+1),Ie=[],De=[],Ne=[],Ge=A+P+1,qe=x,Je=Math.floor(qe/2),ct=[],ot=[];pe[0][0]=1,pe[qe][P]=1;for(var yt=1,pt=Je+1;yt<pt;)for(var It=yt++,Nt=1/j.get(qe,It),Ht=Gt.imin(P,It),ln=Gt.imax(0,It-ee),Vt=Ht+1;ln<Vt;){var Bt=ln++;pe[It][Bt]=Nt*j.get(P,Bt)*j.get(ee,It-Bt)}for(var Kt=Je+1;Kt<qe;)for(var bn=Kt++,Cn=Gt.imin(P,bn),In=Gt.imax(0,bn-ee),Nn=Cn+1;In<Nn;){var Rn=In++;pe[bn][Rn]=pe[qe-bn][P-Rn]}var Fn=qe+1,Tn=-1,Hn=P,Wt=P+1,Gn=1,hr=B[0];ct[0]=W[0];for(var Zr=0,ls=qe+1;Zr<ls;){var Or=Zr++;ot[Or]=hr}for(var fs=0,Zi=P+1;fs<Zi;){var Bo=fs++;Ie[Bo]=W[Bo]}for(;Wt<Ge;){for(var Oi=Wt;Wt<Ge&&B[Wt]==B[Wt+1];)Wt=Wt+1;var mi=Wt-Oi+1,Ji=B[Wt],bo=Tn;Tn=P-mi;var ua;bo>0?ua=Math.floor((bo+2)/2):ua=1;var Ja;if(Tn>0?Ja=Math.floor(qe-(Tn+1)/2):Ja=qe,Tn>0){for(var da=Ji-hr,ha=[],fa=P;fa>mi;)ha[fa-mi-1]=da/(B[Hn+fa]-hr),fa--;for(var Nl=1,_h=Tn+1;Nl<_h;){for(var ed=Nl++,w$=Tn-ed,B_=mi+ed,td=P;td>=B_;)Ie[td]=Y.add(Y.mul(ha[td-B_],Ie[td]),Y.mul(1-ha[td-B_],Ie[td-1])),td--;Ne[w$]=Ie[P]}}for(var bA=ua,x$=qe+1;bA<x$;){var wh=bA++;De[wh]=Y.zeros1d(ce);for(var S$=Gt.imin(P,wh),_A=Gt.imax(0,wh-ee),E$=S$+1;_A<E$;){var wA=_A++;De[wh]=Y.add(De[wh],Y.mul(pe[wh][wA],Ie[wA]))}}if(bo>1)for(var U_=Fn-2,z_=Fn,xA=Ji-hr,C$=(Ji-ot[Fn-1])/xA,SA=1;SA<bo;){for(var $_=SA++,Dl=U_,nd=z_,Uc=nd-Fn+1;nd-Dl>$_;){if(Dl<Gn){var T$=(Ji-ot[Dl])/(hr-ot[Dl]);ct[Dl]=Y.lerp(T$,ct[Dl],ct[Dl-1])}if(nd>=ua){if(nd-$_<=Fn-qe+bo){var M$=(Ji-ot[nd-$_])/xA;De[Uc]=Y.lerp(M$,De[Uc],De[Uc+1])}}else De[Uc]=Y.lerp(C$,De[Uc],De[Uc+1]);Dl=Dl+1,nd=nd-1,Uc=Uc-1}U_=U_-1,z_=z_+1}if(Hn!=P)for(var EA=0,A$=qe-bo;EA<A$;)EA++,ot[Fn]=hr,Fn=Fn+1;for(var CA=ua,k$=Ja+1;CA<k$;){var I$=CA++;ct[Gn]=De[I$],Gn=Gn+1}if(Wt<Ge){for(var TA=0;TA<Tn;){var MA=TA++;Ie[MA]=Ne[MA]}for(var AA=Tn,P$=P+1;AA<P$;){var kA=AA++;Ie[kA]=W[Wt-P+kA]}Hn=Wt,Wt=Wt+1,hr=Ji}else for(var IA=0,R$=qe+1;IA<R$;){var L$=IA++;ot[Fn+L$]=Ji}}return new te(x,ot,ct)},Gt.rationalSurfaceTransform=function(b,x){for(var A=Xe.dehomogenize2d(b.controlPoints),P=0,B=A.length;P<B;)for(var W=P++,ee=0,ce=A[W].length;ee<ce;){var pe=ee++,Ie=A[W][pe];Ie.push(1),A[W][pe]=Rt.dot(x,Ie).slice(0,Ie.length-1)}return new oe(b.degreeU,b.degreeV,b.knotsU.slice(),b.knotsV.slice(),Xe.homogenize2d(A,Xe.weight2d(b.controlPoints)))},Gt.rationalCurveTransform=function(b,x){for(var A=Xe.dehomogenize1d(b.controlPoints),P=0,B=A.length;P<B;){var W=P++,ee=A[W];ee.push(1),A[W]=Rt.dot(x,ee).slice(0,ee.length-1)}return new te(b.degree,b.knots.slice(),Xe.homogenize1d(A,Xe.weight1d(b.controlPoints)))},Gt.surfaceKnotRefine=function(b,x,A){var P=[],B,W,ee;A?(ee=b.controlPoints,B=b.knotsV,W=b.degreeV):(ee=Rt.transpose(b.controlPoints),B=b.knotsU,W=b.degreeU);for(var ce=null,pe=0;pe<ee.length;){var Ie=ee[pe];++pe,ce=Gt.curveKnotRefine(new te(W,B,Ie),x),P.push(ce.controlPoints)}var De=ce.knots;return A?new oe(b.degreeU,b.degreeV,b.knotsU.slice(),De,P):(P=Rt.transpose(P),new oe(b.degreeU,b.degreeV,De,b.knotsV.slice(),P))},Gt.decomposeCurveIntoBeziers=function(b){for(var x=b.degree,A=b.controlPoints,P=b.knots,B=Pn.knotMultiplicities(P),W=x+1,ee=0;ee<B.length;){var ce=B[ee];if(++ee,ce.mult<W){var pe=Y.rep(W-ce.mult,ce.knot),Ie=Gt.curveKnotRefine(new te(x,P,A),pe);P=Ie.knots,A=Ie.controlPoints}}P.length/W-1;for(var De=W*2,Ne=[],Ge=0;Ge<A.length;){var qe=P.slice(Ge,Ge+De),Je=A.slice(Ge,Ge+W);Ne.push(new te(x,qe,Je)),Ge+=W}return Ne},Gt.curveKnotRefine=function(b,x){if(x.length==0)return gt.clonedCurve(b);for(var A=b.degree,P=b.controlPoints,B=b.knots,W=P.length-1,ee=W+A+1,ce=x.length-1,pe=Xe.knotSpan(A,x[0],B),Ie=Xe.knotSpan(A,x[ce],B),De=[],Ne=[],Ge=0,qe=pe-A+1;Ge<qe;){var Je=Ge++;De[Je]=P[Je]}for(var ct=Ie-1,ot=W+1;ct<ot;){var yt=ct++;De[yt+ce+1]=P[yt]}for(var pt=0,It=pe+1;pt<It;){var Nt=pt++;Ne[Nt]=B[Nt]}for(var Ht=Ie+A,ln=ee+1;Ht<ln;){var Vt=Ht++;Ne[Vt+ce+1]=B[Vt]}for(var Bt=Ie+A-1,Kt=Ie+A+ce,bn=ce;bn>=0;){for(;x[bn]<=B[Bt]&&Bt>pe;)De[Kt-A-1]=P[Bt-A-1],Ne[Kt]=B[Bt],Kt=Kt-1,Bt=Bt-1;De[Kt-A-1]=De[Kt-A];for(var Cn=1,In=A+1;Cn<In;){var Nn=Cn++,Rn=Kt-A+Nn,Fn=Ne[Kt+Nn]-x[bn];Math.abs(Fn)<K.EPSILON?De[Rn-1]=De[Rn]:(Fn=Fn/(Ne[Kt+Nn]-B[Bt-A+Nn]),De[Rn-1]=Y.add(Y.mul(Fn,De[Rn-1]),Y.mul(1-Fn,De[Rn])))}Ne[Kt]=x[bn],Kt=Kt-1,bn--}return new te(A,Ne,De)},Gt.curveKnotInsert=function(b,x,A){for(var P=b.degree,B=b.controlPoints,W=b.knots,ee=0,ce=B.length,pe=Xe.knotSpan(P,x,W),Ie=[],De=[],Ne=[],Ge=1,qe=pe+1;Ge<qe;){var Je=Ge++;De[Je]=W[Je]}for(var ct=1,ot=A+1;ct<ot;){var yt=ct++;De[pe+yt]=x}for(var pt=pe+1,It=W.length;pt<It;){var Nt=pt++;De[Nt+A]=W[Nt]}for(var Ht=0,ln=pe-P+1;Ht<ln;){var Vt=Ht++;Ne[Vt]=B[Vt]}for(var Bt=pe-ee;Bt<ce;){var Kt=Bt++;Ne[Kt+A]=B[Kt]}for(var bn=0,Cn=P-ee+1;bn<Cn;){var In=bn++;Ie[In]=B[pe-P+In]}for(var Nn=0,Rn=0,Fn=1,Tn=A+1;Fn<Tn;){var Hn=Fn++;Nn=pe-P+Hn;for(var Wt=0,Gn=P-Hn-ee+1;Wt<Gn;){var hr=Wt++;Rn=(x-W[Nn+hr])/(W[hr+pe+1]-W[Nn+hr]),Ie[hr]=Y.add(Y.mul(Rn,Ie[hr+1]),Y.mul(1-Rn,Ie[hr]))}Ne[Nn]=Ie[0],Ne[pe+A-Hn-ee]=Ie[P-Hn-ee]}for(var Zr=Nn+1,ls=pe-ee;Zr<ls;){var Or=Zr++;Ne[Or]=Ie[Or-Nn]}return new te(P,De,Ne)};var On=c.eval.Tess=function(){};d["verb.eval.Tess"]=On,On.__name__=["verb","eval","Tess"],On.rationalCurveRegularSample=function(b,x,A){return On.rationalCurveRegularSampleRange(b,b.knots[0],ue.last(b.knots),x,A)},On.rationalCurveRegularSampleRange=function(b,x,A,P,B){P<1&&(P=2);for(var W=[],ee=(A-x)/(P-1),ce=0,pe=0;pe<P;){var Ie=pe++;ce=x+ee*Ie,B?W.push([ce].concat(Xe.rationalCurvePoint(b,ce))):W.push(Xe.rationalCurvePoint(b,ce))}return W},On.rationalCurveAdaptiveSample=function(b,x,A){if(A==null&&(A=!1),x==null&&(x=1e-6),b.degree==1)if(A){for(var P=[],B=0,W=b.controlPoints.length;B<W;){var ee=B++;P.push([b.knots[ee+1]].concat(Xe.dehomogenize(b.controlPoints[ee])))}return P}else return b.controlPoints.map(Xe.dehomogenize);return On.rationalCurveAdaptiveSampleRange(b,b.knots[0],ue.last(b.knots),x,A)},On.rationalCurveAdaptiveSampleRange=function(b,x,A,P,B){var W=Xe.rationalCurvePoint(b,x),ee=Xe.rationalCurvePoint(b,A),ce=.5+.2*Math.random(),pe=x+(A-x)*ce,Ie=Xe.rationalCurvePoint(b,pe),De=Y.sub(W,ee),Ne=Y.sub(W,Ie);if(Y.dot(De,De)<P&&Y.dot(Ne,Ne)>P||!Ur.threePointsAreFlat(W,Ie,ee,P)){var Ge=x+(A-x)*.5,qe=On.rationalCurveAdaptiveSampleRange(b,x,Ge,P,B),Je=On.rationalCurveAdaptiveSampleRange(b,Ge,A,P,B);return qe.slice(0,-1).concat(Je)}else return B?[[x].concat(W),[A].concat(ee)]:[W,ee]},On.rationalSurfaceNaive=function(b,x,A){x<1&&(x=1),A<1&&(A=1),b.degreeU,b.degreeV,b.controlPoints;for(var P=b.knotsU,B=b.knotsV,W=ue.last(P)-P[0],ee=ue.last(B)-B[0],ce=W/x,pe=ee/A,Ie=[],De=[],Ne=[],Ge=0,qe=x+1;Ge<qe;)for(var Je=Ge++,ct=0,ot=A+1;ct<ot;){var yt=ct++,pt=Je*ce,It=yt*pe;De.push([pt,It]);var Nt=Xe.rationalSurfaceDerivatives(b,pt,It,1),Ht=Nt[0][0];Ie.push(Ht);var ln=Y.normalized(Y.cross(Nt[1][0],Nt[0][1]));Ne.push(ln)}for(var Vt=[],Bt=0;Bt<x;)for(var Kt=Bt++,bn=0;bn<A;){var Cn=bn++,In=Kt*(A+1)+Cn,Nn=(Kt+1)*(A+1)+Cn,Rn=Nn+1,Fn=In+1,Tn=[In,Nn,Rn],Hn=[In,Rn,Fn];Vt.push(Tn),Vt.push(Hn)}return new Ee(Vt,Ie,Ne,De)},On.divideRationalSurfaceAdaptive=function(b,x){x==null&&(x=new Xr),x.minDivsU!=null?x.minDivsU=x.minDivsU:x.minDivsU=1,x.minDivsV!=null?x.minDivsU=x.minDivsV:x.minDivsU=1,x.refine!=null?x.refine=x.refine:x.refine=!0;var A=(b.controlPoints.length-1)*2,P=(b.controlPoints[0].length-1)*2,B;x.minDivsU>A?B=x.minDivsU=x.minDivsU:B=x.minDivsU=A;var W;x.minDivsV>P?W=x.minDivsV=x.minDivsV:W=x.minDivsV=P;for(var ee=ue.last(b.knotsU),ce=b.knotsU[0],pe=ue.last(b.knotsV),Ie=b.knotsV[0],De=(ee-ce)/B,Ne=(pe-Ie)/W,Ge=[],qe=[],Je=0,ct=W+1;Je<ct;){for(var ot=Je++,yt=[],pt=0,It=B+1;pt<It;){var Nt=pt++,Ht=ce+De*Nt,ln=Ie+Ne*ot,Vt=Xe.rationalSurfaceDerivatives(b,Ht,ln,1),Bt=Y.normalized(Y.cross(Vt[0][1],Vt[1][0]));yt.push(new ht(Vt[0][0],Bt,[Ht,ln],-1,Y.isZero(Bt)))}qe.push(yt)}for(var Kt=0;Kt<W;)for(var bn=Kt++,Cn=0;Cn<B;){var In=Cn++,Nn=[qe[W-bn-1][In],qe[W-bn-1][In+1],qe[W-bn][In+1],qe[W-bn][In]];Ge.push(new Ts(b,Nn))}if(!x.refine)return Ge;for(var Rn=0;Rn<W;)for(var Fn=Rn++,Tn=0;Tn<B;){var Hn=Tn++,Wt=Fn*B+Hn,Gn=On.north(Wt,Fn,Hn,B,W,Ge),hr=On.east(Wt,Fn,Hn,B,W,Ge),Zr=On.south(Wt,Fn,Hn,B,W,Ge),ls=On.west(Wt,Fn,Hn,B,W,Ge);Ge[Wt].neighbors=[Zr,hr,Gn,ls],Ge[Wt].divide(x)}return Ge},On.north=function(b,x,A,P,B,W){return x==0?null:W[b-P]},On.south=function(b,x,A,P,B,W){return x==B-1?null:W[b+P]},On.east=function(b,x,A,P,B,W){return A==P-1?null:W[b+1]},On.west=function(b,x,A,P,B,W){return A==0?null:W[b-1]},On.triangulateAdaptiveRefinementNodeTree=function(b){for(var x=Ee.empty(),A=0;A<b.length;){var P=b[A];++A,P.triangulate(x)}return x},On.rationalSurfaceAdaptive=function(b,x){x!=null?x=x:x=new Xr;var A=On.divideRationalSurfaceAdaptive(b,x);return On.triangulateAdaptiveRefinementNodeTree(A)};var Xr=c.core.AdaptiveRefinementOptions=function(){this.minDivsV=1,this.minDivsU=1,this.refine=!0,this.maxDepth=10,this.minDepth=0,this.normTol=.025};d["verb.eval.AdaptiveRefinementOptions"]=Xr,Xr.__name__=["verb","eval","AdaptiveRefinementOptions"],Xr.prototype={__class__:Xr};var Ts=c.core.AdaptiveRefinementNode=function(b,x,A){if(this.srf=b,A==null?this.neighbors=[null,null,null,null]:this.neighbors=A,this.corners=x,this.corners==null){var P=b.knotsU[0],B=ue.last(b.knotsU),W=b.knotsV[0],ee=ue.last(b.knotsV);this.corners=[ht.fromUv(P,W),ht.fromUv(B,W),ht.fromUv(B,ee),ht.fromUv(P,ee)]}};d["verb.eval.AdaptiveRefinementNode"]=Ts,Ts.__name__=["verb","eval","AdaptiveRefinementNode"],Ts.prototype={isLeaf:function(){return this.children==null},center:function(){return this.centerPoint!=null?this.centerPoint:this.evalSrf(this.u05,this.v05)},evalCorners:function(){this.u05=(this.corners[0].uv[0]+this.corners[2].uv[0])/2,this.v05=(this.corners[0].uv[1]+this.corners[2].uv[1])/2;for(var b=0;b<4;){var x=b++;if(this.corners[x].point==null){var A=this.corners[x];this.evalSrf(A.uv[0],A.uv[1],A)}}},evalSrf:function(b,x,A){var P=Xe.rationalSurfaceDerivatives(this.srf,b,x,1),B=P[0][0],W=Y.cross(P[0][1],P[1][0]),ee=Y.isZero(W);return ee||(W=Y.normalized(W)),A!=null?(A.degen=ee,A.point=B,A.normal=W,A):new ht(B,W,[b,x],-1,ee)},getEdgeCorners:function(b){if(this.isLeaf())return[this.corners[b]];if(this.horizontal)switch(b){case 0:return this.children[0].getEdgeCorners(0);case 1:return this.children[0].getEdgeCorners(1).concat(this.children[1].getEdgeCorners(1));case 2:return this.children[1].getEdgeCorners(2);case 3:return this.children[1].getEdgeCorners(3).concat(this.children[0].getEdgeCorners(3))}switch(b){case 0:return this.children[0].getEdgeCorners(0).concat(this.children[1].getEdgeCorners(0));case 1:return this.children[1].getEdgeCorners(1);case 2:return this.children[1].getEdgeCorners(2).concat(this.children[0].getEdgeCorners(2));case 3:return this.children[0].getEdgeCorners(3)}return null},getAllCorners:function(b){var x=[this.corners[b]];if(this.neighbors[b]==null)return x;var A=this.neighbors[b].getEdgeCorners((b+2)%4),P=b%2,B=K.EPSILON,W=this,ee=[function(pe){return pe.uv[0]>W.corners[0].uv[0]+B&&pe.uv[0]<W.corners[2].uv[0]-B},function(pe){return pe.uv[1]>W.corners[0].uv[1]+B&&pe.uv[1]<W.corners[2].uv[1]-B}],ce=A.filter(ee[P]);return ce.reverse(),x.concat(ce)},midpoint:function(b){if(this.midPoints==null&&(this.midPoints=[null,null,null,null]),this.midPoints[b]!=null)return this.midPoints[b];switch(b){case 0:this.midPoints[0]=this.evalSrf(this.u05,this.corners[0].uv[1]);break;case 1:this.midPoints[1]=this.evalSrf(this.corners[1].uv[0],this.v05);break;case 2:this.midPoints[2]=this.evalSrf(this.u05,this.corners[2].uv[1]);break;case 3:this.midPoints[3]=this.evalSrf(this.corners[0].uv[0],this.v05);break}return this.midPoints[b]},hasBadNormals:function(){return this.corners[0].degen||this.corners[1].degen||this.corners[2].degen||this.corners[3].degen},fixNormals:function(){for(var b=this.corners.length,x=0;x<b;){var A=x++;if(this.corners[A],this.corners[A].degen){var P=this.corners[(A+1)%b],B=this.corners[(A+3)%b];P.degen?this.corners[A].normal=B.normal:this.corners[A].normal=P.normal}}},shouldDivide:function(b,x){if(x<b.minDepth)return!0;if(x>=b.maxDepth)return!1;if(this.hasBadNormals())return this.fixNormals(),!1;if(this.splitVert=Y.normSquared(Y.sub(this.corners[0].normal,this.corners[1].normal))>b.normTol||Y.normSquared(Y.sub(this.corners[2].normal,this.corners[3].normal))>b.normTol,this.splitHoriz=Y.normSquared(Y.sub(this.corners[1].normal,this.corners[2].normal))>b.normTol||Y.normSquared(Y.sub(this.corners[3].normal,this.corners[0].normal))>b.normTol,this.splitVert||this.splitHoriz)return!0;var A=this.center();return Y.normSquared(Y.sub(A.normal,this.corners[0].normal))>b.normTol||Y.normSquared(Y.sub(A.normal,this.corners[1].normal))>b.normTol||Y.normSquared(Y.sub(A.normal,this.corners[2].normal))>b.normTol||Y.normSquared(Y.sub(A.normal,this.corners[3].normal))>b.normTol},divide:function(b){b==null&&(b=new Xr),b.normTol==null&&(b.normTol=.085),b.minDepth==null&&(b.minDepth=0),b.maxDepth==null&&(b.maxDepth=10),this._divide(b,0,!0)},_divide:function(b,x,A){if(this.evalCorners(),!!this.shouldDivide(b,x)){if(x++,this.splitVert&&!this.splitHoriz?A=!1:!this.splitVert&&this.splitHoriz&&(A=!0),this.horizontal=A,this.horizontal){var P=[this.corners[0],this.corners[1],this.midpoint(1),this.midpoint(3)],B=[this.midpoint(3),this.midpoint(1),this.corners[2],this.corners[3]];this.children=[new Ts(this.srf,P),new Ts(this.srf,B)],this.children[0].neighbors=[this.neighbors[0],this.neighbors[1],this.children[1],this.neighbors[3]],this.children[1].neighbors=[this.children[0],this.neighbors[1],this.neighbors[2],this.neighbors[3]]}else{var W=[this.corners[0],this.midpoint(0),this.midpoint(2),this.corners[3]],ee=[this.midpoint(0),this.corners[1],this.corners[2],this.midpoint(2)];this.children=[new Ts(this.srf,W),new Ts(this.srf,ee)],this.children[0].neighbors=[this.neighbors[0],this.children[1],this.neighbors[2],this.neighbors[3]],this.children[1].neighbors=[this.neighbors[0],this.neighbors[1],this.neighbors[2],this.children[0]]}for(var ce=0,pe=this.children;ce<pe.length;){var Ie=pe[ce];++ce,Ie._divide(b,x,!A)}}},triangulate:function(b){if(b==null&&(b=Ee.empty()),this.isLeaf())return this.triangulateLeaf(b);for(var x=0,A=this.children;x<A.length;){var P=A[x];if(++x,P==null)break;P.triangulate(b)}return b},triangulateLeaf:function(b){for(var x=b.points.length,A=[],P=[],B=0,W=0;W<4;){var ee=W++,ce=this.getAllCorners(ee);ce.length==2&&(B=ee+1);for(var pe=0,Ie=ce.length;pe<Ie;){var De=pe++;A.push(ce[De])}}for(var Ne=0;Ne<A.length;){var Ge=A[Ne];if(++Ne,Ge.id!=-1){P.push(Ge.id);continue}b.uvs.push(Ge.uv),b.points.push(Ge.point),b.normals.push(Ge.normal),Ge.id=x,P.push(x),x++}if(A.length==4)return b.faces.push([P[0],P[3],P[1]]),b.faces.push([P[3],P[2],P[1]]),b;if(A.length==5){var qe=P.length;return b.faces.push([P[B],P[(B+2)%qe],P[(B+1)%qe]]),b.faces.push([P[(B+4)%qe],P[(B+3)%qe],P[B]]),b.faces.push([P[B],P[(B+3)%qe],P[(B+2)%qe]]),b}var Je=this.center();b.uvs.push(Je.uv),b.points.push(Je.point),b.normals.push(Je.normal);for(var ct=b.points.length-1,ot=0,yt=A.length-1;ot<A.length;)b.faces.push([ct,P[ot],P[yt]]),yt=ot++;return b},__class__:Ts};var Un=c.exe.Dispatcher=function(){};d["verb.exe.Dispatcher"]=Un,Un.__name__=["verb","exe","Dispatcher"],Un.init=function(){Un._init||(Un._workerPool=new oi(Un.THREADS),Un._init=!0)},Un.dispatchMethod=function(b,x,A){Un.init();var P=new se,B=function(W){P.resolve(W)};return Un._workerPool.addWork(C.getClassName(b),x,A,B),new ye(P)};var oi=c.exe.WorkerPool=function(b,x){x==null&&(x="verb.js"),b==null&&(b=1),this._callbacks=new L,this._working=new L,this._pool=[],this._queue=[];for(var A=0;A<b;){A++;var P;try{P=new Worker(oi.basePath+x)}catch(B){B instanceof O&&(B=B.val),P=new Worker(oi.basePath+x.substring(0,-3)+".min.js")}this._pool.push(P)}};d["verb.exe.WorkerPool"]=oi,oi.__name__=["verb","exe","WorkerPool"],oi.prototype={addWork:function(b,x,A,P){var B=new Bs(b,x,A);this._callbacks.set(B.id,P),this._queue.push(B),this.processQueue()},processQueue:function(){for(var b=this;this._queue.length>0&&this._pool.length>0;){var x=this._queue.shift(),A=[x.id],P=[this._pool.shift()];this._working.h[A[0]]=P[0],P[0].onmessage=function(B,W){return function(ee){b._working.remove(W[0]),b._pool.push(B[0]);try{b._callbacks.h.hasOwnProperty(W[0])&&(b._callbacks.h[W[0]](ee.data.result),b._callbacks.remove(W[0]))}catch(ce){ce instanceof O&&(ce=ce.val),l.log(ce)}b.processQueue()}}(P,A),P[0].postMessage(x)}},__class__:oi};var Bs=function(b,x,A){this.className=b,this.methodName=x,this.args=A,this.id=Bs.uuid++};d["verb.exe._WorkerPool.Work"]=Bs,Bs.__name__=["verb","exe","_WorkerPool","Work"],Bs.prototype={__class__:Bs};var Se=function(){};d["verb.geom.ICurve"]=Se,Se.__name__=["verb","geom","ICurve"],Se.__interfaces__=[Jt],Se.prototype={__class__:Se};var Ke=c.geom.NurbsCurve=function(b){this._data=Fs.isValidNurbsCurveData(b)};d["verb.geom.NurbsCurve"]=Ke,Ke.__name__=["verb","geom","NurbsCurve"],Ke.__interfaces__=[Se],Ke.byKnotsControlPointsWeights=function(b,x,A,P){return new Ke(new te(b,x.slice(),Xe.homogenize1d(A,P)))},Ke.byPoints=function(b,x){return x==null&&(x=3),new Ke(gt.rationalInterpCurve(b,x))},Ke.__super__=Fe,Ke.prototype=f(Fe.prototype,{degree:function(){return this._data.degree},knots:function(){return this._data.knots.slice(0)},controlPoints:function(){return Xe.dehomogenize1d(this._data.controlPoints)},weights:function(){return Xe.weight1d(this._data.controlPoints)},asNurbs:function(){return new te(this.degree(),this.knots(),Xe.homogenize1d(this.controlPoints(),this.weights()))},clone:function(){return new Ke(this._data)},domain:function(){return new ie(ue.first(this._data.knots),ue.last(this._data.knots))},transform:function(b){return new Ke(Gt.rationalCurveTransform(this._data,b))},transformAsync:function(b){return Un.dispatchMethod(Gt,"rationalCurveTransform",[this._data,b]).then(function(x){return new Ke(x)})},point:function(b){return Xe.rationalCurvePoint(this._data,b)},pointAsync:function(b){return Un.dispatchMethod(Xe,"rationalCurvePoint",[this._data,b])},tangent:function(b){return Xe.rationalCurveTangent(this._data,b)},tangentAsync:function(b){return Un.dispatchMethod(Xe,"rationalCurveTangent",[this._data,b])},derivatives:function(b,x){return x==null&&(x=1),Xe.rationalCurveDerivatives(this._data,b,x)},derivativesAsync:function(b,x){return x==null&&(x=1),Un.dispatchMethod(Xe,"rationalCurveDerivatives",[this._data,b,x])},closestPoint:function(b){return Pn.rationalCurveClosestPoint(this._data,b)},closestPointAsync:function(b){return Un.dispatchMethod(Pn,"rationalCurveClosestPoint",[this._data,b])},closestParam:function(b){return Pn.rationalCurveClosestParam(this._data,b)},closestParamAsync:function(b){return Un.dispatchMethod(Pn,"rationalCurveClosestParam",[this._data,b])},length:function(){return Pn.rationalCurveArcLength(this._data)},lengthAsync:function(){return Un.dispatchMethod(Pn,"rationalCurveArcLength",[this._data])},lengthAtParam:function(b){return Pn.rationalCurveArcLength(this._data,b)},lengthAtParamAsync:function(){return Un.dispatchMethod(Pn,"rationalCurveArcLength",[this._data])},paramAtLength:function(b,x){return Pn.rationalCurveParamAtArcLength(this._data,b,x)},paramAtLengthAsync:function(b,x){return Un.dispatchMethod(Pn,"rationalCurveParamAtArcLength",[this._data,b,x])},divideByEqualArcLength:function(b){return as.rationalCurveByEqualArcLength(this._data,b)},divideByEqualArcLengthAsync:function(b){return Un.dispatchMethod(as,"rationalCurveByEqualArcLength",[this._data,b])},divideByArcLength:function(b){return as.rationalCurveByArcLength(this._data,b)},divideByArcLengthAsync:function(b){return Un.dispatchMethod(as,"rationalCurveByArcLength",[this._data,b])},split:function(b){return as.curveSplit(this._data,b).map(function(x){return new Ke(x)})},splitAsync:function(b){return Un.dispatchMethod(as,"curveSplit",[this._data,b]).then(function(x){return x.map(function(A){return new Ke(A)})})},reverse:function(){return new Ke(Gt.curveReverse(this._data))},reverseAsync:function(){return Un.dispatchMethod(Gt,"curveReverse",[this._data]).then(function(b){return new Ke(b)})},tessellate:function(b){return On.rationalCurveAdaptiveSample(this._data,b,!1)},tessellateAsync:function(b){return Un.dispatchMethod(On,"rationalCurveAdaptiveSample",[this._data,b,!1])},__class__:Ke});var ke=c.geom.Arc=function(b,x,A,P,B,W){Ke.call(this,gt.arc(b,x,A,P,B,W)),this._center=b,this._xaxis=x,this._yaxis=A,this._radius=P,this._minAngle=B,this._maxAngle=W};d["verb.geom.Arc"]=ke,ke.__name__=["verb","geom","Arc"],ke.__super__=Ke,ke.prototype=f(Ke.prototype,{center:function(){return this._center},xaxis:function(){return this._xaxis},yaxis:function(){return this._yaxis},radius:function(){return this._radius},minAngle:function(){return this._minAngle},maxAngle:function(){return this._maxAngle},__class__:ke});var He=c.geom.BezierCurve=function(b,x){Ke.call(this,gt.rationalBezierCurve(b,x))};d["verb.geom.BezierCurve"]=He,He.__name__=["verb","geom","BezierCurve"],He.__super__=Ke,He.prototype=f(Ke.prototype,{__class__:He});var $e=c.geom.Circle=function(b,x,A,P){ke.call(this,b,x,A,P,0,Math.PI*2)};d["verb.geom.Circle"]=$e,$e.__name__=["verb","geom","Circle"],$e.__super__=ke,$e.prototype=f(ke.prototype,{__class__:$e});var dt=function(){};d["verb.geom.ISurface"]=dt,dt.__name__=["verb","geom","ISurface"],dt.__interfaces__=[Jt],dt.prototype={__class__:dt};var wt=c.geom.NurbsSurface=function(b){this._data=Fs.isValidNurbsSurfaceData(b)};d["verb.geom.NurbsSurface"]=wt,wt.__name__=["verb","geom","NurbsSurface"],wt.__interfaces__=[dt],wt.byKnotsControlPointsWeights=function(b,x,A,P,B,W){return new wt(new oe(b,x,A,P,Xe.homogenize2d(B,W)))},wt.byCorners=function(b,x,A,P){return new wt(gt.fourPointSurface(b,x,A,P))},wt.byLoftingCurves=function(b,x){return new wt(gt.loftedSurface(function(A){for(var P,B=[],W=0;W<b.length;){var ee=b[W];++W,B.push(ee.asNurbs())}return P=B,P}(),x))},wt.__super__=Fe,wt.prototype=f(Fe.prototype,{degreeU:function(){return this._data.degreeU},degreeV:function(){return this._data.degreeV},knotsU:function(){return this._data.knotsU.slice(0)},knotsV:function(){return this._data.knotsV.slice(0)},controlPoints:function(){return Xe.dehomogenize2d(this._data.controlPoints)},weights:function(){return Xe.weight2d(this._data.controlPoints)},asNurbs:function(){return new oe(this.degreeU(),this.degreeV(),this.knotsU(),this.knotsV(),Xe.homogenize2d(this.controlPoints(),this.weights()))},clone:function(){return new wt(this.asNurbs())},domainU:function(){return new ie(ue.first(this._data.knotsU),ue.last(this._data.knotsU))},domainV:function(){return new ie(ue.first(this._data.knotsV),ue.last(this._data.knotsV))},point:function(b,x){return Xe.rationalSurfacePoint(this._data,b,x)},pointAsync:function(b,x){return Un.dispatchMethod(Xe,"rationalSurfacePoint",[this._data,b,x])},normal:function(b,x){return Xe.rationalSurfaceNormal(this._data,b,x)},normalAsync:function(b,x){return Un.dispatchMethod(Xe,"rationalSurfaceNormal",[this._data,b,x])},derivatives:function(b,x,A){return A==null&&(A=1),Xe.rationalSurfaceDerivatives(this._data,b,x,A)},derivativesAsync:function(b,x,A){return A==null&&(A=1),Un.dispatchMethod(Xe,"rationalSurfaceDerivatives",[this._data,b,x,A])},closestParam:function(b){return Pn.rationalSurfaceClosestParam(this._data,b)},closestParamAsync:function(b){return Un.dispatchMethod(Pn,"rationalSurfaceClosestParam",[this._data,b])},closestPoint:function(b){return Pn.rationalSurfaceClosestPoint(this._data,b)},closestPointAsync:function(b){return Un.dispatchMethod(Pn,"rationalSurfaceClosestPoint",[this._data,b])},split:function(b,x){return x==null&&(x=!1),as.surfaceSplit(this._data,b,x).map(function(A){return new wt(A)})},splitAsync:function(b,x){return x==null&&(x=!1),Un.dispatchMethod(as,"surfaceSplit",[this._data,b,x]).then(function(A){return A.map(function(P){return new wt(P)})})},reverse:function(b){return b==null&&(b=!1),new wt(Gt.surfaceReverse(this._data,b))},reverseAsync:function(b){return b==null&&(b=!1),Un.dispatchMethod(Gt,"surfaceReverse",[this._data,b]).then(function(x){return new wt(x)})},isocurve:function(b,x){return x==null&&(x=!1),new Ke(gt.surfaceIsocurve(this._data,b,x))},isocurveAsync:function(b,x){return x==null&&(x=!1),Un.dispatchMethod(gt,"surfaceIsocurve",[this._data,b,x]).then(function(A){return new Ke(A)})},boundaries:function(b){return gt.surfaceBoundaryCurves(this._data).map(function(x){return new Ke(x)})},boundariesAsync:function(b){return Un.dispatchMethod(gt,"surfaceBoundaryCurves",[this._data]).then(function(x){return x.map(function(A){return new Ke(A)})})},tessellate:function(b){return On.rationalSurfaceAdaptive(this._data,b)},tessellateAsync:function(b){return Un.dispatchMethod(On,"rationalSurfaceAdaptive",[this._data,b])},transform:function(b){return new wt(Gt.rationalSurfaceTransform(this._data,b))},transformAsync:function(b){return Un.dispatchMethod(Gt,"rationalSurfaceTransform",[this._data,b]).then(function(x){return new wt(x)})},__class__:wt});var en=c.geom.ConicalSurface=function(b,x,A,P,B){wt.call(this,gt.conicalSurface(b,x,A,P,B)),this._axis=b,this._xaxis=x,this._base=A,this._height=P,this._radius=B};d["verb.geom.ConicalSurface"]=en,en.__name__=["verb","geom","ConicalSurface"],en.__super__=wt,en.prototype=f(wt.prototype,{axis:function(){return this._axis},xaxis:function(){return this._xaxis},base:function(){return this._base},height:function(){return this._height},radius:function(){return this._radius},__class__:en});var pn=c.geom.CylindricalSurface=function(b,x,A,P,B){wt.call(this,gt.cylindricalSurface(b,x,A,P,B)),this._axis=b,this._xaxis=x,this._base=A,this._height=P,this._radius=B};d["verb.geom.CylindricalSurface"]=pn,pn.__name__=["verb","geom","CylindricalSurface"],pn.__super__=wt,pn.prototype=f(wt.prototype,{axis:function(){return this._axis},xaxis:function(){return this._xaxis},base:function(){return this._base},height:function(){return this._height},radius:function(){return this._radius},__class__:pn});var An=c.geom.EllipseArc=function(b,x,A,P,B){Ke.call(this,gt.ellipseArc(b,x,A,P,B)),this._center=b,this._xaxis=x,this._yaxis=A,this._minAngle=P,this._maxAngle=B};d["verb.geom.EllipseArc"]=An,An.__name__=["verb","geom","EllipseArc"],An.__super__=Ke,An.prototype=f(Ke.prototype,{center:function(){return this._center},xaxis:function(){return this._xaxis},yaxis:function(){return this._yaxis},minAngle:function(){return this._minAngle},maxAngle:function(){return this._maxAngle},__class__:An});var $n=c.geom.Ellipse=function(b,x,A){An.call(this,b,x,A,0,Math.PI*2)};d["verb.geom.Ellipse"]=$n,$n.__name__=["verb","geom","Ellipse"],$n.__super__=An,$n.prototype=f(An.prototype,{__class__:$n});var kn=c.geom.ExtrudedSurface=function(b,x){wt.call(this,gt.extrudedSurface(Y.normalized(x),Y.norm(x),b.asNurbs())),this._profile=b,this._direction=x};d["verb.geom.ExtrudedSurface"]=kn,kn.__name__=["verb","geom","ExtrudedSurface"],kn.__super__=wt,kn.prototype=f(wt.prototype,{profile:function(){return this._profile},direction:function(){return this._direction},__class__:kn});var Zn=c.geom.Intersect=function(){};d["verb.geom.Intersect"]=Zn,Zn.__name__=["verb","geom","Intersect"],Zn.curves=function(b,x,A){return A==null&&(A=.001),Ye.curves(b.asNurbs(),x.asNurbs(),A)},Zn.curvesAsync=function(b,x,A){return A==null&&(A=.001),Un.dispatchMethod(Ye,"curves",[b.asNurbs(),x.asNurbs(),A])},Zn.curveAndSurface=function(b,x,A){return A==null&&(A=.001),Ye.curveAndSurface(b.asNurbs(),x.asNurbs(),A)},Zn.curveAndSurfaceAsync=function(b,x,A){return A==null&&(A=.001),Un.dispatchMethod(Ye,"curveAndSurface",[b.asNurbs(),x.asNurbs(),A])},Zn.surfaces=function(b,x,A){return A==null&&(A=.001),Ye.surfaces(b.asNurbs(),x.asNurbs(),A).map(function(P){return new Ke(P)})},Zn.surfacesAsync=function(b,x,A){return A==null&&(A=.001),Un.dispatchMethod(Ye,"surfaces",[b.asNurbs(),x.asNurbs(),A]).then(function(P){return P.map(function(B){return new Ke(B)})})};var ur=c.geom.Line=function(b,x){Ke.call(this,gt.polyline([b,x])),this._start=b,this._end=x};d["verb.geom.Line"]=ur,ur.__name__=["verb","geom","Line"],ur.__super__=Ke,ur.prototype=f(Ke.prototype,{start:function(){return this._start},end:function(){return this._end},__class__:ur});var zr=c.geom.RevolvedSurface=function(b,x,A,P){wt.call(this,gt.revolvedSurface(b.asNurbs(),x,A,P)),this._profile=b,this._center=x,this._axis=A,this._angle=P};d["verb.geom.RevolvedSurface"]=zr,zr.__name__=["verb","geom","RevolvedSurface"],zr.__super__=wt,zr.prototype=f(wt.prototype,{profile:function(){return this._profile},center:function(){return this._center},axis:function(){return this._center},angle:function(){return this._angle},__class__:zr});var $r=c.geom.SphericalSurface=function(b,x){wt.call(this,gt.sphericalSurface(b,[0,0,1],[1,0,0],x)),this._center=b,this._radius=x};d["verb.geom.SphericalSurface"]=$r,$r.__name__=["verb","geom","SphericalSurface"],$r.__super__=wt,$r.prototype=f(wt.prototype,{center:function(){return this._center},radius:function(){return this._radius},__class__:$r});var dr=c.geom.SweptSurface=function(b,x){wt.call(this,gt.rationalTranslationalSurface(b.asNurbs(),x.asNurbs())),this._profile=b,this._rail=x};d["verb.geom.SweptSurface"]=dr,dr.__name__=["verb","geom","SweptSurface"],dr.__super__=wt,dr.prototype=f(wt.prototype,{profile:function(){return this._profile},rail:function(){return this._rail},__class__:dr});function Sn(b){return b instanceof Array?function(){return m.iter(b)}:typeof b.iterator=="function"?ts(b,b.iterator):b.iterator}var Ms,xr=0;function ts(b,x){if(x==null)return null;x.__id__==null&&(x.__id__=xr++);var A;return b.hx__closures__==null?b.hx__closures__={}:A=b.hx__closures__[x.__id__],A==null&&(A=function(){return A.method.apply(A.scope,arguments)},A.scope=b,A.method=x,b.hx__closures__[x.__id__]=A),A}d.Math=Math,String.prototype.__class__=d.String=String,String.__name__=["String"],d.Array=Array,Array.__name__=["Array"],Date.prototype.__class__=d.Date=Date,Date.__name__=["Date"];var Fc=d.Int={__name__:["Int"]},Pi=d.Dynamic={__name__:["Dynamic"]},Bc=d.Float=Number;Bc.__name__=["Float"];var Kr=d.Bool=Boolean;Kr.__ename__=["Bool"];var Ri=d.Class={__name__:["Class"]},Li={};Array.prototype.map==null&&(Array.prototype.map=function(b){for(var x=[],A=0,P=this.length;A<P;){var B=A++;x[B]=b(this[B])}return x}),Array.prototype.filter==null&&(Array.prototype.filter=function(b){for(var x=[],A=0,P=this.length;A<P;){var B=A++,W=this[B];b(W)&&x.push(W)}return x});var Us={},zs=u.ArrayBuffer||re;zs.prototype.slice==null&&(zs.prototype.slice=re.sliceImpl),u.DataView;var Qu=u.Uint8Array||le._new;(function(b,x){if(b.setImmediate)return;var A=1,P={},B=!1,W=b.document,ee;function ce(pt){return P[A]=pe.apply(x,pt),A++}function pe(pt){var It=[].slice.call(arguments,1);return function(){typeof pt=="function"?pt.apply(x,It):new Function(""+pt)()}}function Ie(pt){if(B)setTimeout(pe(Ie,pt),0);else{var It=P[pt];if(It){B=!0;try{It()}finally{De(pt),B=!1}}}}function De(pt){delete P[pt]}function Ne(){ee=function(){var pt=ce(arguments);return process.nextTick(pe(Ie,pt)),pt}}function Ge(){if(b.postMessage&&!b.importScripts){var pt=!0,It=b.onmessage;return b.onmessage=function(){pt=!1},b.postMessage("","*"),b.onmessage=It,pt}}function qe(){var pt="setImmediate$"+Math.random()+"$",It=function(Nt){Nt.source===b&&typeof Nt.data=="string"&&Nt.data.indexOf(pt)===0&&Ie(+Nt.data.slice(pt.length))};b.addEventListener?b.addEventListener("message",It,!1):b.attachEvent("onmessage",It),ee=function(){var Nt=ce(arguments);return b.postMessage(pt+Nt,"*"),Nt}}function Je(){var pt=new MessageChannel;pt.port1.onmessage=function(It){var Nt=It.data;Ie(Nt)},ee=function(){var It=ce(arguments);return pt.port2.postMessage(It),It}}function ct(){var pt=W.documentElement;ee=function(){var It=ce(arguments),Nt=W.createElement("script");return Nt.onreadystatechange=function(){Ie(It),Nt.onreadystatechange=null,pt.removeChild(Nt),Nt=null},pt.appendChild(Nt),It}}function ot(){ee=function(){var pt=ce(arguments);return setTimeout(pe(Ie,pt),0),pt}}var yt=Object.getPrototypeOf&&Object.getPrototypeOf(b);yt=yt&&yt.setTimeout?yt:b,{}.toString.call(b.process)==="[object process]"?Ne():Ge()?qe():b.MessageChannel?Je():W&&"onreadystatechange"in W.createElement("script")?ct():ot(),yt.setImmediate=ee,yt.clearImmediate=De})(new Function("return this")()),k.USE_CACHE=!1,k.USE_ENUM_INDEX=!1,k.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",M.DEFAULT_RESOLVER=C,M.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",N.count=0,$.i64tmp=function(b){var x,A=new I(0,0);return x=A,x}(),z.__toStr={}.toString,le.BYTES_PER_ELEMENT=1,xe.queue=new y,j.memo=new L,K.TOLERANCE=1e-6,K.EPSILON=1e-10,K.VERSION="2.0.0",Pn.Tvalues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],Pn.Cvalues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Un.THREADS=1,Un._init=!1,oi.basePath="",Bs.uuid=0,nt.main()}(typeof console<"u"?console:{log:function(){}},n,typeof o<"u"?o:typeof r<"u"?r:typeof self<"u"?self:this),n})})(LN);var aG=LN.exports;const Rh=oG(aG);let rw=class{constructor(){this.c0=0,this.c1=0,this.c2=0,this.c3=0}init(e,n,r,s){this.c0=e,this.c1=r,this.c2=-3*e+3*n-2*r-s,this.c3=2*e-2*n+r+s}initCatmullRom(e,n,r,s,i){this.init(n,r,i*(r-e),i*(s-n))}initNonuniformCatmullRom(e,n,r,s,i,o,a){let l=(n-e)/i-(r-e)/(i+o)+(r-n)/o,c=(r-n)/o-(s-n)/(o+a)+(s-r)/a;l*=o,c*=o,this.init(n,r,l,c)}calc(e){const n=e*e,r=n*e;return this.c0+this.c1*e+this.c2*n+this.c3*r}},lG=class extends dv{constructor(e=[],n=!1,r="centripetal",s=.5){super(),this.isCatmullRomCurve3d=!0,this.type="CatmullRomCurve3d",this._tmp=new qt,this._px=new rw,this._py=new rw,this._pz=new rw,this._points=e.map(i=>new Yt(i)),this._closed=n,this._curveType=r,this._tension=s}get points(){return this._points}get closed(){return this._closed}get curveType(){return this._curveType}get tension(){return this._tension}get startPoint(){return this._points.length>0?this._points[0]:new Yt}get endPoint(){return this._points.length>0?this._points[this._points.length-1]:new Yt}get length(){if(this._points.length<2)return 0;let e=0;for(let n=1;n<this._points.length;n++)e+=this._points[n-1].distanceTo(this._points[n]);return this._closed&&this._points.length>2&&(e+=this._points[this._points.length-1].distanceTo(this._points[0])),e}getPoint(e,n=new Yt){const r=n,s=this._points,i=s.length;if(i===0)return r.set(0,0,0);if(i===1)return r.copy(s[0]);const o=(i-(this._closed?0:1))*e;let a=Math.floor(o),l=o-a;this._closed?a+=a>0?0:(Math.floor(Math.abs(a)/i)+1)*i:l===0&&a===i-1&&(a=i-2,l=1);let c,u;this._closed||a>0?c=s[(a-1)%i]:(this._tmp.subVectors(s[0],s[1]).add(s[0]),c=new Yt(this._tmp.x,this._tmp.y,this._tmp.z));const d=s[a%i],h=s[(a+1)%i];if(this._closed||a+2<i?u=s[(a+2)%i]:(this._tmp.subVectors(s[i-1],s[i-2]).add(s[i-1]),u=new Yt(this._tmp.x,this._tmp.y,this._tmp.z)),this._curveType==="centripetal"||this._curveType==="chordal"){const f=this._curveType==="chordal"?.5:.25;let m=Math.pow(c.distanceToSquared(d),f),v=Math.pow(d.distanceToSquared(h),f),y=Math.pow(h.distanceToSquared(u),f);v<1e-4&&(v=1),m<1e-4&&(m=v),y<1e-4&&(y=v),this._px.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,m,v,y),this._py.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,m,v,y),this._pz.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,m,v,y)}else this._curveType==="catmullrom"&&(this._px.initCatmullRom(c.x,d.x,h.x,u.x,this._tension),this._py.initCatmullRom(c.y,d.y,h.y,u.y,this._tension),this._pz.initCatmullRom(c.z,d.z,h.z,u.z,this._tension));return r.set(this._px.calc(l),this._py.calc(l),this._pz.calc(l)),r}getPoints(e){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}setPoints(e){this._points=e.map(n=>new Yt(n)),this._boundingBoxNeedsUpdate=!0}setClosed(e){this._closed!==e&&(this._closed=e,this._boundingBoxNeedsUpdate=!0)}setCurveType(e){this._curveType=e}setTension(e){this._tension=e}transform(e){return this._points=this._points.map(n=>{const r=new Yt;return r.copy(n),r.applyMatrix3d(e),r}),this._boundingBoxNeedsUpdate=!0,this}calculateBoundingBox(){if(this._points.length===0)return new Lr;const e=new Lr;return this._points.forEach(n=>{e.expandByPoint(n)}),e}},GA=class Uy{constructor(e,n,r,s){this._degree=e,this._knots=[...n],this._controlPoints=r.map(i=>({x:i.x,y:i.y,z:i.z})),this._weights=s?[...s]:new Array(r.length).fill(1)}degree(){return this._degree}knots(){return[...this._knots]}controlPoints(){return this._controlPoints.map(e=>({x:e.x,y:e.y,z:e.z}))}weights(){return[...this._weights]}point(e){const n=this._controlPoints.map(r=>[r.x,r.y,r.z]);return Fy(e,this._degree,this._knots,n,this._weights)}length(){const e=this._controlPoints.map(n=>[n.x,n.y,n.z]);return JH(this._degree,this._knots,e,this._weights)}static byKnotsControlPointsWeights(e,n,r,s){return new Uy(e,n,r,s)}static byPoints(e,n,r="Uniform"){let s;switch(r){case"Chord":s=XH(n,e);break;case"SqrtChord":s=ZH(n,e);break;case"Uniform":default:s=YH(n,e.length);break}const i=e.map(a=>({x:a[0],y:a[1],z:a[2]})),o=new Array(i.length).fill(1);return new Uy(n,s,i,o)}getParameterRange(){const e=this._knots[this._degree],n=this._knots[this._knots.length-this._degree-1];return{start:e,end:n}}getPoints(e){const n=[],{start:r,end:s}=this.getParameterRange();for(let i=0;i<=e;i++){const o=r+(s-r)*(i/e);n.push(this.point(o))}return n}isClosed(e=1e-6){const{start:n,end:r}=this.getParameterRange(),s=this.point(n),i=this.point(r),o=s[0]-i[0],a=s[1]-i[1],l=s[2]-i[2];return Math.sqrt(o*o+a*a+l*l)<e}static createFitPointsForClosedCurve(e){if(e.length<4)throw new Error("At least 4 points are required for a closed NURBS curve");const n=new lG(e,!0,"centripetal"),r=Math.max(50,e.length*2);return n.getPoints(r)}static createClosedCurve(e,n,r="Chord"){const s=this.createFitPointsForClosedCurve(e).map(i=>[i.x,i.y,i.z]);return Uy.byPoints(s,n,r)}},qd=class ON extends dv{constructor(e,n,r,s,i){super();const o=arguments.length;if(o<2||o>5)throw Qo.ILLEGAL_PARAMETERS;if(this._degree=3,this._closed=!1,Array.isArray(n)){this._controlPoints=e;let a,l=3,c=!1;if(o>=3&&(Array.isArray(r)?(a=r,o>=4&&(l=s||3),o>=5&&(c=i)):r!==void 0&&(l=r||3,o>=4&&(c=s))),r===void 0&&o>=4&&(l=s||3,o>=5&&(c=i)),this._degree=l,this._closed=c,this._controlPoints.length<this._degree+1)throw Qo.ILLEGAL_PARAMETERS;const u=this.toVerbPoints(this._controlPoints);this._nurbsCurve=Rh.geom.NurbsCurve.byKnotsControlPointsWeights(this._degree,n,u,a)}else{if(this._fitPoints=e,this._knotParameterization=n,o>=3&&(this._degree=r||3),o>=4&&(this._closed=s),this._fitPoints.length<this._degree+1)throw Qo.ILLEGAL_PARAMETERS;const a=this.toNurbsPoints(this._fitPoints);this._nurbsCurve=Rh.geom.NurbsCurve.byPoints(a,this._degree),this._controlPoints=this.toGePoints(this._nurbsCurve.controlPoints())}}buildCurve(){if(this._fitPoints&&this._knotParameterization){if(this._closed){const e=GA.createFitPointsForClosedCurve(this._fitPoints),n=this.toNurbsPoints(e);this._nurbsCurve=Rh.geom.NurbsCurve.byPoints(n,this._degree)}else{const e=this.toNurbsPoints(this._fitPoints);this._nurbsCurve=Rh.geom.NurbsCurve.byPoints(e,this._degree)}this._controlPoints=this.toGePoints(this._nurbsCurve.controlPoints())}else if(this._controlPoints)if(this._closed){const e=GA.createFitPointsForClosedCurve(this._controlPoints),n=this.toNurbsPoints(e);this._nurbsCurve=Rh.geom.NurbsCurve.byPoints(n,this._degree),this._controlPoints=this.toGePoints(this._nurbsCurve.controlPoints())}else{const e=this._nurbsCurve.knots(),n=this._nurbsCurve.weights(),r=this.toVerbPoints(this._controlPoints);this._nurbsCurve=Rh.geom.NurbsCurve.byKnotsControlPointsWeights(this._degree,e,r,n)}}setClosed(e){this._closed!==e&&(this._closed=e,this._boundingBoxNeedsUpdate=!0,this.buildCurve())}get degree(){return this._degree}get knotParameterization(){return this._knotParameterization}get startPoint(){const e=this._nurbsCurve.knots(),n=this._nurbsCurve.degree(),r=e[n],s=this._nurbsCurve.point(r);return new Yt(s[0],s[1],s[2])}get endPoint(){const e=this._nurbsCurve.knots(),n=this._nurbsCurve.degree(),r=e[e.length-n-1],s=this._nurbsCurve.point(r);return new Yt(s[0],s[1],s[2])}get length(){return this._nurbsCurve.length()}getFitPointAt(e){if(!this._fitPoints)throw new Error("No fit points in this spline");const n=this._fitPoints.length,r=e<0||e>=n?n-1:e,s=this._fitPoints[r];return{x:s.x,y:s.y,z:s.z||0}}getControlPointAt(e){const n=this._controlPoints.length,r=e<0||e>=n?n-1:e;return this._controlPoints[r]}getPoints(e=100){const n=this._nurbsCurve,r=[],s=n.knots(),i=this._nurbsCurve.degree(),o=s[i],a=s[s.length-i-1],l=(a-o)/(e-1);for(let c=0;c<e;c++){const u=c===e-1?a:o+c*l,d=n.point(u);r.push(new Yt(d[0],d[1],d[2]))}return r}getCurvePoints(e,n){const r=[],s=e.knots(),i=s[3],o=(s[s.length-4]-i)/(n-1);for(let a=0;a<n;a++){const l=i+a*o;r.push(e.point(l))}return r}calculateBoundingBox(){const e=this.getPoints(100);return new Lr().setFromPoints(e)}get closed(){return this._closed}set closed(e){this.setClosed(e)}transform(e){return this._boundingBoxNeedsUpdate=!0,this}toNurbsPoints(e){const n=new Array(e.length);return e.forEach((r,s)=>{n[s]=[r.x,r.y,r.z||0]}),n}toVerbPoints(e){const n=new Array(e.length);return e.forEach((r,s)=>{n[s]=[r.x,r.y,r.z||0]}),n}toGePoints(e){const n=new Array(e.length);return e.forEach((r,s)=>{n[s]={x:r[0],y:r[1],z:r[2]}}),n}static createClosedSpline(e,n="Uniform",r=3){if(e.length<r+1)throw new Error(`At least ${r+1} points are required for a degree ${r} closed spline`);return new ON(e,n,r,!0)}};var Pd=256,NN=[],WA=256,c0;for(;Pd--;)NN[Pd]=(Pd+256).toString(16).substring(1);function cG(t){var e=0,n=11;if(!c0||Pd+n>WA*2)for(c0="",Pd=0;e<WA;e++)c0+=NN[Math.random()*256|0];return c0.substring(Pd,Pd+++n)}let dh=class{constructor(e,n){e=e||{},cv(e,{objectId:cG()}),this._attrs=new V$(e,n)}get attrs(){return this._attrs}getAttr(e){const n=this._attrs.get(e);if(n===void 0)throw new Error(`[AcDbObject] Attribute name '${e}' does't exist in this object!`);return n}getAttrWithoutException(e){return this._attrs.get(e)}setAttr(e,n){this._attrs.set(e,n)}get objectId(){return this.getAttr("objectId")}set objectId(e){this._attrs.set("objectId",e)}get ownerId(){return this.getAttr("ownerId")}set ownerId(e){this._attrs.set("ownerId",e)}get database(){return this._database?this._database:Dp().workingDatabase}set database(e){this._database=e}close(){}};const DN=class extends dh{constructor(){super(...arguments),this._layer="0",this._color=new Gu,this._lineType=J_,this._lineWeight=1,this._linetypeScale=-1,this._visibility=!0,this._transparency=0}get type(){return this.constructor.typeName}get layer(){return this._layer}set layer(e){this._layer=e}get color(){return this._color}set color(e){this._color.copy(e)}get rgbColor(){let e=this.database.cecolor;if(this.color.isByLayer){const n=this.getLayerColor();n&&n.color&&(e=n)}else this.color.isByBlock||this.color.color!=null&&(e=this.color);return e.color==null?16777215:e.color}get lineType(){return this._lineType}set lineType(e){this._lineType=e||J_}get lineWeight(){return this._lineWeight}set lineWeight(e){this._lineWeight=e}get linetypeScale(){return this._linetypeScale}set linetypeScale(e){this._linetypeScale=e}get visibility(){return this._visibility}set visibility(e){this._visibility=e}get transparency(){return this._transparency}set transparency(e){this._transparency=e}subGetGripPoints(){return new Array}subGetOsnapPoints(e,n,r,s,i){}transformBy(e){return this}triggerModifiedEvent(){this.database.events.entityModified.dispatch({database:this.database,entity:this})}get lineStyle(){var e;const n=this.getLineType(),r=(e=this.database)==null?void 0:e.tables.linetypeTable.getAt(n);return r?{...r.linetype,color:this.rgbColor}:{name:n,standardFlag:0,color:this.rgbColor,description:"",totalPatternLength:0}}getLineType(){if(this.lineType==J_){const e=this.database.tables.layerTable.getAt(this.layer);if(e&&e.linetype)return e.linetype}else return this.lineType==AH?Xx:this.lineType;return Xx}getLayerColor(){const e=this.database.tables.layerTable.getAt(this.layer);if(e==null)console.error(`The layer with name '${this.layer}' not found in drawing database!`);else return e.color;return null}attachEntityInfo(e){e&&(e.objectId=this.objectId,e.ownerId=this.ownerId,e.layerName=this.layer,e.visible=this.visibility)}};DN.typeName="Entity";let Mc=DN;const FN=class extends Mc{constructor(e){super(),this._blockName=e,this._position=new Yt,this._rotation=0,this._normal=new qt(0,0,1),this._scaleFactors=new Yt(1,1,1)}get position(){return this._position}set position(e){this._position.copy(e)}get rotation(){return this._rotation}set rotation(e){this._rotation=e}get scaleFactors(){return this._scaleFactors}set scaleFactors(e){this._scaleFactors.copy(e)}get normal(){return this._normal}set normal(e){this._normal.copy(e).normalize()}get blockTableRecord(){return this.database.tables.blockTable.getAt(this._blockName)}get geometricExtents(){const e=new Lr,n=this.blockTableRecord;if(n!=null){const i=n.newIterator();for(const o of i)e.union(o.geometricExtents)}const r=new cg().setFromEuler(new rG(this.rotation,0,0)),s=new Jf;return s.compose(this.position,r,this.scaleFactors),e.applyMatrix4(s),e}draw(e){const n=[],r=this.blockTableRecord;if(r!=null){const s=this.computeTransformMatrix(),i=$m.instance.draw(e,r,this.rgbColor,!0,s,this.normal);return this.attachEntityInfo(i),i}else{const s=e.group(n);return this.attachEntityInfo(s),s}}computeTransformMatrix(){const e=new cg;return e.setFromAxisAngle(qt.Z_AXIS,this.rotation),new Jf().compose(this._position,e,this._scaleFactors)}};FN.typeName="BlockReference";let sC=FN;const BN=class extends Mc{};BN.typeName="Curve";let Al=BN;const UN=class extends Al{constructor(e,n,r,s,i,o,a){super(),this._geo=new iG(e,n,r,s,i,o,a)}get center(){return this._geo.center}set center(e){this._geo.center=e}get majorAxisRadius(){return this._geo.majorAxisRadius}set majorAxisRadius(e){this._geo.majorAxisRadius=e}get minorAxisRadius(){return this._geo.minorAxisRadius}set minorAxisRadius(e){this._geo.minorAxisRadius=e}get normal(){return this._geo.normal}set normal(e){this._geo.normal=e}get geometricExtents(){return this._geo.box}get closed(){return this._geo.closed}draw(e){return e.ellipticalArc(this._geo,this.lineStyle)}};UN.typeName="Ellipse";let zN=UN;const $N=class extends Al{constructor(e,n,r,s){super(),this._geo=new TN(e,n,r,s,qt.Z_AXIS,qt.X_AXIS)}get center(){return this._geo.center}set center(e){this._geo.center=e}get radius(){return this._geo.radius}set radius(e){this._geo.radius=e}get startAngle(){return this._geo.startAngle}set startAngle(e){this._geo.startAngle=e}get endAngle(){return this._geo.endAngle}set endAngle(e){this._geo.endAngle=e}get startPoint(){return this._geo.startPoint}get endPoint(){return this._geo.endPoint}get geometricExtents(){return this._geo.box}get closed(){return this._geo.closed}subGetGripPoints(){const e=new Array;return e.push(this.center),e.push(this.startPoint),e.push(this.endPoint),e}transformBy(e){return this._geo.transform(e),this}draw(e){return e.circularArc(this._geo,this.lineStyle)}};$N.typeName="Arc";let VN=$N;const HN=class extends Al{constructor(e,n,r=qt.Z_AXIS){super(),this._geo=new TN(e,n,0,Vs,r,qt.X_AXIS)}get center(){return this._geo.center}set center(e){this._geo.center=e}get radius(){return this._geo.radius}set radius(e){this._geo.radius=e}get normal(){return this._geo.normal}get geometricExtents(){return this._geo.box}get closed(){return this._geo.closed}subGetGripPoints(){const e=new Array;return e.push(this.center),e}transformBy(e){return this._geo.transform(e),this}draw(e){return e.circularArc(this._geo,this.lineStyle)}};HN.typeName="Circle";let GN=HN;const WN=class extends Mc{constructor(){super(),this._elevation=0,this._geo=new rC,this._definitionLines=[],this._patternName="",this._patternType=1,this._patternAngle=0,this._patternScale=1,this._hatchStyle=0}get definitionLines(){return this._definitionLines}get patternName(){return this._patternName}set patternName(e){this._patternName=e}get patternType(){return this._patternType}set patternType(e){this._patternType=e}get patternAngle(){return this._patternAngle}set patternAngle(e){this._patternAngle=e}get patternScale(){return this._patternScale}set patternScale(e){this._patternScale=e}get hatchStyle(){return this._hatchStyle}set hatchStyle(e){this._hatchStyle=e}add(e){this._geo.add(e)}get geometricExtents(){const e=this._geo.box;return new Lr({x:e.min.x,y:e.min.y,z:this._elevation},{x:e.max.x,y:e.max.y,z:this._elevation})}draw(e){return e.area(this._geo,{color:this.rgbColor,solidFill:!1,patternAngle:this.patternAngle,patternLines:this.definitionLines})}};WN.typeName="Hatch";let jN=WN;const KN=class extends Al{constructor(){super(),this._isSplined=!1,this._updated=!1,this._hasArrowHead=!1,this._vertices=[],this._dimensionStyle="",this._hasHookLine=!1,this._annoType=3}get isSplined(){return this._isSplined}set isSplined(e){this._isSplined=e}get hasArrowHead(){return this._hasArrowHead}set hasArrowHead(e){this._hasArrowHead=e}get hasHookLine(){return this._hasHookLine}set hasHookLine(e){this._hasHookLine=e}get numVertices(){return this._vertices.length}get dimensionStyle(){return this._dimensionStyle}set dimensionStyle(e){this._dimensionStyle=e}get annoType(){return this._annoType}set annoType(e){this._annoType=e}appendVertex(e){this._vertices.push(new Yt().copy(e)),this._updated=!0}setVertexAt(e,n){throw(e<0||e>=this._vertices.length)&&(this._vertices[e].copy(n),this._updated=!0),new Error("The vertex index is out of range!")}vertexAt(e){throw(e<0||e>=this._vertices.length)&&this._vertices[e],new Error("The vertex index is out of range!")}get geometricExtents(){return this._isSplined&&this.splineGeo?this.splineGeo.calculateBoundingBox():new Lr().setFromPoints(this._vertices)}get closed(){return!1}set closed(e){}draw(e){if(this.isSplined&&this.splineGeo){const n=this.splineGeo.getPoints(100);return e.lines(n,this.lineStyle)}else return e.lines(this._vertices,this.lineStyle)}get splineGeo(){return this.createSplineIfNeeded(),this._splineGeo}createSplineIfNeeded(){this.isSplined&&this.numVertices>=2&&(this._splineGeo==null||this._updated)&&(this._splineGeo=new qd(this._vertices,"Uniform"),this._updated=!1)}};KN.typeName="Leader";let qN=KN;const YN=class extends Al{constructor(e,n){super(),this._geo=new ug(e,n)}get startPoint(){return this._geo.startPoint}set startPoint(e){this._geo.startPoint=e}get endPoint(){return this._geo.endPoint}set endPoint(e){this._geo.endPoint=e}get midPoint(){return this._geo.midPoint}get geometricExtents(){return this._geo.box}get closed(){return!1}subGetGripPoints(){const e=new Array;return e.push(this.midPoint),e.push(this.startPoint),e.push(this.endPoint),e}subGetOsnapPoints(e,n,r,s,i){const o=this.startPoint,a=this.endPoint;switch(e){case mf.EndPoint:i.push(o),i.push(a);break;case mf.MidPoint:i.push(this.midPoint);break;case mf.Nearest:{const l=this._geo.project(r);i.push(l)}break;case mf.Perpendicular:{const l=this._geo.perpPoint(r);i.push(l)}break;case mf.Tangent:i.push(o);break}}transformBy(e){return this._geo.transform(e),this}draw(e){const n=this.startPoint,r=this.endPoint,s=[new Yt(n.x,n.y,0),new Yt(r.x,r.y,0)];return e.lines(s,this.lineStyle)}};YN.typeName="Line";let XN=YN;var ZN=(t=>(t.ClosedFilled="",t.Dot="_DOT",t.DotSmall="_DOTSMALL",t.DotBlank="_DOTBLANK",t.Origin="_ORIGIN",t.Origin2="_ORIGIN2",t.Open="_OPEN",t.Open90="_OPEN90",t.Open30="_OPEN30",t.Closed="_CLOSED",t.Small="_SMALL",t.None="_NONE",t.Oblique="_OBLIQUE",t.BoxFilled="_BOXFILLED",t.Box="_BOXBLANK",t.ClosedBlank="_CLOSEDBLANK",t.DatumBlank="_DATUMBLANK",t.DatumFilled="_DATUMFILLED",t.Integral="_INTEGRAL",t.ArchTick="_ARCHTICK",t))(ZN||{}),iC=(t=>(t[t.LEFT_TO_RIGHT=1]="LEFT_TO_RIGHT",t[t.RIGHT_TO_LEFT=2]="RIGHT_TO_LEFT",t[t.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM",t[t.BOTTOM_TO_TOP=4]="BOTTOM_TO_TOP",t[t.BY_STYLE=5]="BY_STYLE",t))(iC||{}),dg=(t=>(t[t.TopLeft=1]="TopLeft",t[t.TopCenter=2]="TopCenter",t[t.TopRight=3]="TopRight",t[t.MiddleLeft=4]="MiddleLeft",t[t.MiddleCenter=5]="MiddleCenter",t[t.MiddleRight=6]="MiddleRight",t[t.BottomLeft=7]="BottomLeft",t[t.BottomCenter=8]="BottomCenter",t[t.BottomRight=9]="BottomRight",t))(dg||{}),JN=(t=>(t[t.OPTIMIZED_2D=0]="OPTIMIZED_2D",t[t.WIREFRAME=1]="WIREFRAME",t[t.HIDDEN_LINE=2]="HIDDEN_LINE",t[t.FLAT_SHADED=3]="FLAT_SHADED",t[t.GOURAUD_SHADED=4]="GOURAUD_SHADED",t[t.FLAT_SHADED_WITH_WIREFRAME=5]="FLAT_SHADED_WITH_WIREFRAME",t[t.GOURAUD_SHADED_WITH_WIREFRAME=6]="GOURAUD_SHADED_WITH_WIREFRAME",t))(JN||{}),QN=(t=>(t[t.NON_ORTHOGRAPHIC=0]="NON_ORTHOGRAPHIC",t[t.TOP=1]="TOP",t[t.BOTTOM=2]="BOTTOM",t[t.FRONT=3]="FRONT",t[t.BACK=4]="BACK",t[t.LEFT=5]="LEFT",t[t.RIGHT=6]="RIGHT",t))(QN||{}),eD=(t=>(t[t.ONE_DISTANT_LIGHT=0]="ONE_DISTANT_LIGHT",t[t.TWO_DISTANT_LIGHTS=1]="TWO_DISTANT_LIGHTS",t))(eD||{});let uG=class tD{constructor(){this._number=-1,this._id="",this._groupId="",this._centerPoint=new Yt,this._height=0,this._width=0,this._viewCenter=new Yt,this._viewHeight=0}get number(){return this._number}set number(e){this._number=e}get id(){return this._id}set id(e){this._id=e}get groupId(){return this._groupId}set groupId(e){this._groupId=e}get centerPoint(){return this._centerPoint}set centerPoint(e){this._centerPoint.copy(e)}get height(){return this._height}set height(e){this._height=e}get width(){return this._width}set width(e){this._width=e}get box(){const e=new ds;return e.setFromCenterAndSize(this.centerPoint,{x:this.width,y:this.height}),e}get viewCenter(){return this._viewCenter}set viewCenter(e){this._viewCenter.copy(e)}get viewHeight(){return this._viewHeight}set viewHeight(e){this._viewHeight=e}get viewWidth(){return this.viewHeight*(this.width/this.height)}get viewBox(){const e=new ds;return e.setFromCenterAndSize(this.viewCenter,{x:this.viewWidth,y:this.viewHeight}),e}clone(){const e=new tD;return e.id=this.id,e.groupId=this.groupId,e.number=this.number,e.centerPoint.copy(this.centerPoint),e.height=this.height,e.width=this.width,e.viewCenter.copy(this.viewCenter),e.viewHeight=this.viewHeight,e}copy(e){return this.id=e.id,this.groupId=e.groupId,this.number=e.number,this.centerPoint.copy(e.centerPoint),this.height=e.height,this.width=e.width,this.viewCenter.copy(e.viewCenter),this.viewHeight=e.viewHeight,this}};const nD=class extends Mc{constructor(){super(),this._contents="",this._height=0,this._width=0,this._lineSpacingFactor=.25,this._lineSpacingStyle=0,this._backgroundFill=!1,this._backgroundFillColor=13158600,this._backgroundFillTransparency=1,this._backgroundScaleFactor=1,this._rotation=0,this._styleName="",this._location=new Yt,this._attachmentPoint=dg.TopLeft,this._direction=new qt(1,0,0),this._drawingDirection=iC.LEFT_TO_RIGHT}get contents(){return this._contents}set contents(e){this._contents=e}get height(){return this._height}set height(e){this._height=e}get width(){return this._width}set width(e){this._width=e}get rotation(){return this._rotation}set rotation(e){this._rotation=e}get lineSpacingFactor(){return this._lineSpacingFactor}set lineSpacingFactor(e){this._lineSpacingFactor=e}get lineSpacingStyle(){return this._lineSpacingStyle}set lineSpacingStyle(e){this._lineSpacingStyle=e}get backgroundFill(){return this._backgroundFill}set backgroundFill(e){this._backgroundFill=e,this._backgroundFillColor=13158600}get backgroundFillColor(){return this._backgroundFillColor}set backgroundFillColor(e){this._backgroundFillColor=e}get backgroundFillTransparency(){return this._backgroundFillTransparency}set backgroundFillTransparency(e){this._backgroundFillTransparency=e}get backgroundScaleFactor(){return this._backgroundScaleFactor}set backgroundScaleFactor(e){this._backgroundScaleFactor=e}get styleName(){return this._styleName}set styleName(e){this._styleName=e}get location(){return this._location}set location(e){this._location.copy(e)}get attachmentPoint(){return this._attachmentPoint}set attachmentPoint(e){this._attachmentPoint=e}get direction(){return this._direction}set direction(e){this._direction.copy(e)}get drawingDirection(){return this._drawingDirection}set drawingDirection(e){this._drawingDirection=e}get geometricExtents(){return new Lr}getTextStyle(){const e=this.database.tables.textStyleTable;let n=e.getAt(this.styleName);return n||(n=e.getAt("STANDARD")||e.getAt("Standard")),n.textStyle}draw(e,n){const r={text:this.contents,height:this.height,width:this.width,position:this.location,rotation:this.rotation,directionVector:this.direction,attachmentPoint:this.attachmentPoint,drawingDirection:this.drawingDirection,lineSpaceFactor:this.lineSpacingFactor},s={...this.getTextStyle(),color:this.rgbColor};return e.mtext(r,s,n)}};nD.typeName="MText";let rD=nD;const sD=class extends Al{constructor(e,n,r,s,i){super();const o=+(e!==void 0)+ +(n!==void 0)+ +(r!==void 0)+ +(s!==void 0)+ +(i!==void 0);if(o<2||o>5)throw Qo.ILLEGAL_PARAMETERS;Array.isArray(n)?this._geo=new qd(e,n,r,s,i):this._geo=new qd(e,n,r,s)}get geometricExtents(){return this._geo.box}get closed(){return this._geo.closed}set closed(e){this._geo.closed=e}draw(e){const n=this._geo.getPoints(100);return e.lines(n,this.lineStyle)}};sD.typeName="Spline";let bb=sD;const dG=new qt,iD=class extends sC{constructor(e,n,r){super(e),this._attachmentPoint=dg.TopLeft,this._numColumns=r,this._numRows=n,this._columnWidth=new Array(r),this._rowHeight=new Array(n),this._cells=new Array(n*r)}get attachmentPoint(){return this._attachmentPoint}set attachmentPoint(e){this._attachmentPoint=e}get numRows(){return this._numRows}set numRows(e){this._numRows=e}get numColumns(){return this._numColumns}set numColumns(e){this._numColumns=e}numContents(e,n){return 1}rowHeight(e){return this._rowHeight[e]}setRowHeight(e,n){this._rowHeight[e]=n}setUniformRowHeight(e){this._rowHeight.fill(e)}columnWidth(e){return this._columnWidth[e]}setUniformColumnWidth(e){this._columnWidth.fill(e)}setColumnWidth(e,n){this._columnWidth[e]=n}cell(e){if(!(e<0||e>=this._cells.length))return this._cells[e]}setCell(e,n){this._cells[e]=n}textString(e,n,r){return this._cells[e*n].text}setTextString(e,n,r){this._cells[e*n].text=r}isEmpty(e,n){return!this._cells[e*n].text}get geometricExtents(){return new Lr}draw(e){let n=0,r=0;const s=new Uint16Array(this.numColumns*this.numRows*8),i=new Float32Array((this.numColumns+1)*(this.numRows+1)*3);let o=0;for(let h=0;h<=this.numRows;h++){n-=h>0?this.rowHeight(h-1):0,r=0;for(let f=0;f<=this.numColumns;f++)r+=f>0?this.columnWidth(f-1):0,i[o++]=r,i[o++]=n,i[o++]=0}const a=[],l=new Array(this.numRows*this.numColumns).fill(!1);r=0,o=0;let c=0;for(let h=0;h<this.numColumns;h++){r+=h>0?this.columnWidth(h-1):0,n=0;for(let f=0;f<this.numRows;f++){n+=f>0?this.rowHeight(f-1):0;const m=this.cell(f*this.numColumns+h);if(c=f*this.numColumns+h,m&&!l[c]){const v=m.borderWidth??1,y=m.borderHeight??1;this.fillVisited(l,c,this.numColumns,v,y),s[o++]=h+f*(this.numColumns+1),s[o++]=h+f*(this.numColumns+1)+v;const g=i[s[o-1]*3]-r,S=h+(f+y)*(this.numColumns+1)+v;h+v==this.numColumns&&(s[o++]=h+f*(this.numColumns+1)+v,s[o++]=S);const _=-i[S*3+1]-n;if(f+y==this.numRows&&(s[o++]=h+(f+y)*(this.numColumns+1)+y,s[o++]=h+(f+y)*(this.numColumns+1)),s[o++]=h+(f+y)*(this.numColumns+1),s[o++]=h+f*(this.numColumns+1),m.text){const w=m.attachmentPoint||this.attachmentPoint||dg.MiddleCenter,E=this.getTableTextOffset(w,g,_),C={text:m.text,height:m.textHeight,width:g,position:dG.set(r,-n,0).clone().add(E),rotation:this.rotation,attachmentPoint:w},T={...this.getTextStyle(m),color:this.color.color};a.push(e.mtext(C,T))}}}}a.push(e.lineSegments(i,3,s,this.lineStyle));const u=e.group(a),d=new cg;return d.setFromAxisAngle(qt.Z_AXIS,this.rotation),jA.compose(this.position,d,this.scaleFactors),u.applyMatrix(jA),this.attachEntityInfo(u),u}fillVisited(e,n,r,s,i){if(i==1&&s==1)e[n]=!0;else for(let o=0;o<s;++o)for(let a=0;a<i;++a)e[n+o+a*r]=!0}getTextStyle(e){const n=this.database.tables.textStyleTable;let r;return e.textStyle&&(r=n.getAt(e.textStyle)),r||(r=n.getAt("STANDARD")||n.getAt("Standard")),r.textStyle}getTableTextOffset(e,n,r){const s=new qt;switch(e){case 1:break;case 2:s.setX(n/2);break;case 3:s.setX(n);break;case 4:s.setY(-r/2);break;case 5:s.set(n/2,-r/2,0);break;case 6:s.set(n,-r/2,0);break;case 7:s.setY(-r);break;case 8:s.set(n/2,-r,0);break;case 9:s.set(n,-r,0);break}return s}};iD.typeName="Table";let oD=iD;const jA=new Jf,aD=class extends Mc{constructor(){super(),this._textString="",this._height=0,this._thickness=1,this._position=new Yt,this._rotation=0,this._oblique=0,this._horizontalMode=0,this._verticalModel=2,this._styleName="",this._widthFactor=1}get textString(){return this._textString}set textString(e){this._textString=e}get thickness(){return this._thickness}set thickness(e){this._thickness=e}get height(){return this._height}set height(e){this._height=e}get position(){return this._position}set position(e){this._position.copy(e)}get rotation(){return this._rotation}set rotation(e){this._rotation=e}get oblique(){return this._oblique}set oblique(e){this._oblique=e}get horizontalMode(){return this._horizontalMode}set horizontalMode(e){this._horizontalMode=e}get verticalMode(){return this._verticalModel}set verticalMode(e){this._verticalModel=e}get styleName(){return this._styleName}set styleName(e){this._styleName=e}get widthFactor(){return this._widthFactor}set widthFactor(e){this._widthFactor=e}get geometricExtents(){return new Lr}getTextStyle(){const e=this.database.tables.textStyleTable;let n=e.getAt(this.styleName);return n||(n=e.getAt("STANDARD")||e.getAt("Standard")),n.textStyle}draw(e,n){const r={text:this.textString,height:this.height,width:1/0,widthFactor:this.widthFactor,position:this.position,rotation:this.rotation,drawingDirection:iC.BOTTOM_TO_TOP,attachmentPoint:dg.BottomLeft},s={...this.getTextStyle(),color:this.rgbColor};return e.mtext(r,s,n)}};aD.typeName="Text";let lD=aD;const cD=class extends Al{constructor(){super(),this._elevation=0,this._thickness=1,this._vertices=[new Yt,new Yt,new Yt,new Yt]}get elevation(){return this._elevation}set elevation(e){this._elevation=e}get closed(){return!0}get thickness(){return this._thickness}set thickness(e){this._thickness=e}getPointAt(e){return e<0?this._vertices[0]:e>3?this._vertices[3]:this._vertices[e]}setPointAt(e,n){if(e<0&&this._vertices[0].copy(n),e>3)return this._vertices[3].copy(n);this._vertices[e].copy(n)}get geometricExtents(){return new Lr().setFromPoints(this._vertices)}subGetGripPoints(){const e=new Array;for(let n=0;n<4;++n)e.push(this.getPointAt(n));return e}draw(e){const n=new hv(this._vertices,!0),r=new rC;return r.add(n),e.area(r,{color:this.rgbColor,solidFill:!0,patternAngle:0,patternLines:[]})}};cD.typeName="Trace";let uD=cD;const dD=class extends Al{constructor(){super(),this._elevation=0,this._geo=new hv}get numberOfVertices(){return this._geo.numberOfVertices}get elevation(){return this._elevation}set elevation(e){this._elevation=e}get closed(){return this._geo.closed}set closed(e){this._geo.closed=e}addVertexAt(e,n,r=0,s=-1,i=-1){const o=s<0?void 0:s,a=i<0?void 0:i,l={x:n.x,y:n.y,bulge:r,startWidth:o,endWidth:a};this._geo.addVertexAt(e,l)}getPoint2dAt(e){return this._geo.getPointAt(e)}getPoint3dAt(e){const n=this.getPoint2dAt(e);return new Yt(n.x,n.y,this._elevation)}get geometricExtents(){const e=this._geo.box;return new Lr({x:e.min.x,y:e.min.y,z:this._elevation},{x:e.max.x,y:e.max.y,z:this._elevation})}subGetGripPoints(){const e=new Array;for(let n=0;n<this.numberOfVertices;++n)e.push(this.getPoint3dAt(n));return e}draw(e){const n=[];return this._geo.getPoints(100).forEach(r=>n.push(new Yt().set(r.x,r.y,this.elevation))),e.lines(n,this.lineStyle)}};dD.typeName="Polyline";let nS=dD;const hD=class extends Mc{constructor(){super(),this._geo=new Yt}get position(){return this._geo}set position(e){this._geo.set(e.x,e.y,e.z||0)}get geometricExtents(){return new Lr().expandByPoint(this._geo)}transformBy(e){return this._geo.applyMatrix3d(e),this}draw(e){return e.point(this._geo,{displayMode:this.database.pdmode,displaySize:this.database.pdsize,color:this.rgbColor})}};hD.typeName="Point";let fD=hD;const pD=class extends Mc{constructor(){super(),this._brightness=50,this._contrast=50,this._fade=0,this._width=0,this._height=0,this._position=new Yt,this._scale=new is(1,1),this._rotation=0,this._clipBoundaryType=1,this._clipBoundary=[],this._isClipped=!1,this._isShownClipped=!1,this._isImageShown=!0,this._isImageTransparent=!1,this._imageDefId=""}get brightness(){return this._brightness}set brightness(e){this._brightness=e}get contrast(){return this._contrast}set contrast(e){this._contrast=e}get fade(){return this._fade}set fade(e){this._fade=e}get height(){return this._height}set height(e){this._height=e}get width(){return this._width}set width(e){this._width=e}get position(){return this._position}set position(e){this._position=e}get rotation(){return this._rotation}set rotation(e){this._rotation=e}get scale(){return this._scale}set scale(e){this._scale.copy(e)}get clipBoundaryType(){return this._clipBoundaryType}set clipBoundaryType(e){this._clipBoundaryType=e}get clipBoundary(){return this._clipBoundary}set clipBoundary(e){this._clipBoundary=[],this._clipBoundary.push(...e)}get isClipped(){return this._isClipped}set isClipped(e){this._isClipped=e}get isShownClipped(){return this._isShownClipped}set isShownClipped(e){this._isShownClipped=e}get isImageShown(){return this._isImageShown}set isImageShown(e){this._isImageShown=e}get isImageTransparent(){return this._isImageTransparent}set isImageTransparent(e){this._isImageTransparent=e}get image(){return this._image}set image(e){this._image=e}get imageDefId(){return this._imageDefId}set imageDefId(e){this._imageDefId=e}get imageFileName(){if(this._imageDefId){const e=this.database.dictionaries.imageDefs.getIdAt(this._imageDefId);if(e)return e.sourceFileName}return""}get geometricExtents(){const e=new Lr;return e.min.copy(this._position),e.max.set(this._position.x+this._width,this._position.y+this._height,0),e}subGetGripPoints(){return this.boundaryPath()}draw(e){const n=this.boundaryPath();return this._image?e.image(this._image,{boundary:n,roation:this._rotation}):e.lines(n,this.lineStyle)}boundaryPath(){const e=[];if(this.isClipped&&this._clipBoundary.length>3){const n=this._width,r=this._height,s=new ds;s.setFromPoints(this._clipBoundary);const i=new Dn;i.setX(this._position.x-s.min.x*n),i.setY(this._position.y-s.min.y*r),this._clipBoundary.forEach(o=>{const a=o.x*n+i.x,l=o.y*r+i.y;e.push(new Yt(a,l,this._position.z))})}else{if(e.push(this._position),e.push(this._position.clone().setX(this._position.x+this._width)),e.push(this._position.clone().set(this._position.x+this._width,this._position.y+this._height,this._position.z)),e.push(this._position.clone().setY(this._position.y+this._height)),this._rotation>0){KA.copy(e[1]);for(let n=1;n<4;n++)u0.copy(e[n]),u0.rotateAround(KA,this._rotation),e[n].setX(u0.x),e[n].setY(u0.y)}e.push(e[0])}return e}};pD.typeName="RasterImage";let E1=pD;const KA=new Dn,u0=new Dn,mD=class extends Al{constructor(){super(),this._basePoint=new Yt,this._unitDir=new qt}get basePoint(){return this._basePoint}set basePoint(e){this._basePoint.copy(e)}get unitDir(){return this._unitDir}set unitDir(e){this._unitDir.copy(e)}get closed(){return!1}get geometricExtents(){const e=new Lr;return e.expandByPoint(this._unitDir.clone().multiplyScalar(10).add(this._basePoint)),e.expandByPoint(this._unitDir.clone().multiplyScalar(-10).add(this._basePoint)),e}subGetGripPoints(){const e=new Array;return e.push(this.basePoint),e}draw(e){const n=[];return n.push(this.basePoint),n.push(this._unitDir.clone().multiplyScalar(1e6).add(this._basePoint)),e.lines(n,this.lineStyle)}};mD.typeName="Ray";let oC=mD;const gD=class extends Mc{constructor(){super(),this._centerPoint=new Yt,this._height=0,this._width=0,this._viewCenter=new Yt,this._viewHeight=0,this._number=-1}get number(){return this._number}set number(e){this._number=e}get centerPoint(){return this._centerPoint}set centerPoint(e){this._centerPoint=e}get height(){return this._height}set height(e){this._height=e}get width(){return this._width}set width(e){this._width=e}get viewCenter(){return this._viewCenter}set viewCenter(e){this._viewCenter=e}get viewHeight(){return this._viewHeight}set viewHeight(e){this._viewHeight=e}get geometricExtents(){return new Lr}draw(e){if(this._number>1&&this.ownerId!=this.database.tables.blockTable.modelSpace.objectId){const n=this.toGiViewport(),r=e.group(this.createViewportRect(n,e));return this.attachEntityInfo(r),r}}toGiViewport(){const e=new uG;return e.id=this.objectId,e.groupId=this.ownerId,e.number=this.number,e.centerPoint=this.centerPoint,e.width=this.width,e.height=this.height,e.viewHeight=this.viewHeight,e.viewCenter=this.viewCenter,e}createViewportRect(e,n){const r=[];return r.push(n.lines([new Yt(e.centerPoint.x-e.width/2,e.centerPoint.y-e.height/2,0),new Yt(e.centerPoint.x+e.width/2,e.centerPoint.y-e.height/2,0)],this.lineStyle)),r.push(n.lines([new Yt(e.centerPoint.x+e.width/2,e.centerPoint.y-e.height/2,0),new Yt(e.centerPoint.x+e.width/2,e.centerPoint.y+e.height/2,0)],this.lineStyle)),r.push(n.lines([new Yt(e.centerPoint.x+e.width/2,e.centerPoint.y+e.height/2,0),new Yt(e.centerPoint.x-e.width/2,e.centerPoint.y+e.height/2,0)],this.lineStyle)),r.push(n.lines([new Yt(e.centerPoint.x-e.width/2,e.centerPoint.y+e.height/2,0),new Yt(e.centerPoint.x-e.width/2,e.centerPoint.y-e.height/2,0)],this.lineStyle)),r}};gD.typeName="Viewport";let aC=gD;const vD=class extends E1{draw(e){const n=this.boundaryPath(),r=new rC;return r.add(new hv(n)),e.area(r,{color:0,solidFill:!0,patternAngle:0,patternLines:[]})}};vD.typeName="Wipeout";let yD=vD;const bD=class extends Al{constructor(){super(),this._basePoint=new Yt,this._unitDir=new qt}get basePoint(){return this._basePoint}set basePoint(e){this._basePoint.copy(e)}get unitDir(){return this._unitDir}set unitDir(e){this._unitDir.copy(e)}get closed(){return!1}get geometricExtents(){const e=new Lr;return e.expandByPoint(this._unitDir.clone().multiplyScalar(10).add(this._basePoint)),e.expandByPoint(this._unitDir.clone().multiplyScalar(-10).add(this._basePoint)),e}subGetGripPoints(){const e=new Array;return e.push(this.basePoint),e}draw(e){const n=[];return n.push(this._unitDir.clone().multiplyScalar(-1e6).add(this._basePoint)),n.push(this._unitDir.clone().multiplyScalar(1e6).add(this._basePoint)),e.lines(n,this.lineStyle)}};bD.typeName="Xline";let lC=bD;const _D=class extends Mc{constructor(){super(),this._dimBlockId=null,this._dimensionStyleName=null,this._dimensionText=null,this._textLineSpacingFactor=1,this._textLineSpacingStyle=1,this._textPosition=new Yt,this._textRotation=0}get dimBlockId(){return this._dimBlockId}set dimBlockId(e){this._dimBlockId=e}get dimensionStyleName(){return this._dimensionStyleName}set dimensionStyleName(e){this._dimensionStyleName=e}get dimensionStyle(){if(this._dimStyle==null){let e;this.dimensionStyleName&&(e=this.database.tables.dimStyleTable.getAt(this.dimensionStyleName)),e==null&&(e=new uC),this._dimStyle=e}return this._dimStyle}get dimensionText(){return this._dimensionText}set dimensionText(e){this._dimensionText=e}get measurement(){return this._measurement}set measurement(e){this._measurement=e}get textLineSpacingFactor(){return this._textLineSpacingFactor}set textLineSpacingFactor(e){this._textLineSpacingFactor=e}get textLineSpacingStyle(){return this._textLineSpacingStyle}set textLineSpacingStyle(e){this._textLineSpacingStyle=e}get textPosition(){return this._textPosition}set textPosition(e){this._textPosition.copy(e)}get textRotation(){return this._textRotation}set textRotation(e){this._textRotation=e}draw(e){if(this.dimBlockId){const r=this.database.tables.blockTable.getAt(this.dimBlockId);if(r){const s=$m.instance.draw(e,r,this.rgbColor,!1);return this.attachEntityInfo(s),s}}const n=e.group([]);return this.attachEntityInfo(n),n}drawFirstArrow(e){const n=this.database.tables.blockTable.getAt(this.firstArrowType);if(n)return $m.instance.draw(e,n,this.rgbColor,!1)}drawSecondArrow(e){const n=this.database.tables.blockTable.getAt(this.secondArrowType);if(n)return $m.instance.draw(e,n,this.rgbColor,!1)}get arrowScaleFactor(){return this.dimensionStyle.dimasz}get firstArrowStyle(){return{type:this.firstArrowType,scale:this.arrowScaleFactor,appended:this.isAppendArrow,visible:this.dimensionStyle.dimse1==0}}get secondArrowStyle(){return{type:this.secondArrowType,scale:this.arrowScaleFactor,appended:this.isAppendArrow,visible:this.dimensionStyle.dimse2==0}}get isAppendArrow(){return!0}get firstArrowTypeBtrId(){const e=this.dimensionStyle;return e.dimsah==0?e.dimblk:e.dimblk1}get firstArrowType(){const e=this.firstArrowTypeBtrId;return this.getArrowName(e)}get secondArrowTypeBtrId(){const e=this.dimensionStyle;return e.dimsah==0?e.dimblk:e.dimblk2}get secondArrowType(){const e=this.secondArrowTypeBtrId;return this.getArrowName(e)}get arrowLineCount(){return 1}getLineArrowStyle(e){}findPointOnLine1(e,n,r){const s=new Yt().subVectors(n,e).normalize();return new Yt(n).addScaledVector(s,r)}findPointOnLine2(e,n,r){const s=e.x+r*Math.cos(n),i=e.y+r*Math.sin(n);return{x:s,y:i}}adjustExtensionLine(e){const n=this.dimensionStyle;e.extend(n.dimexe),e.extend(-n.dimexo,!0)}getArrowName(e){const n=this.database.tables.blockTable.getIdAt(e);return n?n.name.toUpperCase():ZN.Closed}};_D.typeName="Dimension";let Lp=_D;const wD=class extends Lp{constructor(e,n,r,s,i=null,o=null){super(),this._centerPoint=new Yt().copy(e),this._xLine1Point=new Yt().copy(n),this._xLine2Point=new Yt().copy(r),this._arcPoint=new Yt().copy(s),this.dimensionText=i,this.dimensionStyleName=o}get arcPoint(){return this._arcPoint}set arcPoint(e){this._arcPoint.copy(e)}get centerPoint(){return this._centerPoint}set centerPoint(e){this._centerPoint.copy(e)}get xLine1Point(){return this._xLine1Point}set xLine1Point(e){this._xLine1Point.copy(e)}get xLine2Point(){return this._xLine2Point}set xLine2Point(e){this._xLine2Point.copy(e)}get geometricExtents(){return new Lr}};wD.typeName="3PointAngularDimension";let xD=wD;const SD=class extends Lp{constructor(e,n,r,s=null,i=null){super(),this._dimLinePoint=new Yt().copy(r),this._xLine1Point=new Yt().copy(e),this._xLine2Point=new Yt().copy(n),this._oblique=0,this._rotation=0,this.dimensionText=s,this.dimensionStyleName=i}get dimLinePoint(){return this._dimLinePoint}set dimLinePoint(e){this._dimLinePoint.copy(e)}get xLine1Point(){return this._xLine1Point}set xLine1Point(e){this._xLine1Point.copy(e)}get xLine2Point(){return this._xLine2Point}set xLine2Point(e){this._xLine2Point.copy(e)}get rotation(){return this._rotation}set rotation(e){this._rotation=e}get oblique(){return this._oblique}set oblique(e){this._oblique=e}get geometricExtents(){return new Lr}get isAppendArrow(){return!1}calculateLines(){const e=[],n=this.createExtensionLine(this._xLine1Point),r=this.createExtensionLine(this._xLine2Point),s=this.findIntersectionPoint(n,this._dimLinePoint),i=this.findIntersectionPoint(r,this._dimLinePoint),o=new ug(s,i);return e.push(o),n.endPoint=s,this.adjustExtensionLine(n),e.push(n),r.endPoint=i,this.adjustExtensionLine(r),e.push(r),e}createExtensionLine(e){const n=this.rotation+Math.PI/2,r=this.findPointOnLine2(e,n,100);return new ug(e,{...r,z:e.z})}findIntersectionPoint(e,n){const r=e.startPoint,s=e.endPoint,i=new qt().subVectors(s,r).normalize(),o=new qt().subVectors(n,r).dot(i),a=new qt().copy(i).multiplyScalar(o);return new qt().addVectors(r,a)}};SD.typeName="AlignedDimension";let ED=SD;const hG=class extends Lp{constructor(e,n,r,s,i=null,o=null){super(),this._arcPoint=new Yt().copy(s),this._xLine1Point=new Yt().copy(n),this._xLine2Point=new Yt().copy(r),this._centerPoint=new Yt().copy(e),this.dimensionText=i,this.dimensionStyleName=o}get arcPoint(){return this._arcPoint}set arcPoint(e){this._arcPoint.copy(e)}get centerPoint(){return this._centerPoint}set centerPoint(e){this._centerPoint.copy(e)}get xLine1Point(){return this._xLine1Point}set xLine1Point(e){this._xLine1Point.copy(e)}get xLine2Point(){return this._xLine2Point}set xLine2Point(e){this._xLine2Point.copy(e)}get geometricExtents(){return new Lr}};hG.typeName="ArcDimension";const CD=class extends Lp{constructor(e,n,r=0,s=null,i=null){super(),this._chordPoint=new Yt().copy(e),this._farChordPoint=new Yt().copy(n),this._extArcStartAngle=0,this._extArcEndAngle=0,this._leaderLength=r,this.dimensionText=s,this.dimensionStyleName=i}get chordPoint(){return this._chordPoint}set chordPoint(e){this._chordPoint.copy(e)}get farChordPoint(){return this._farChordPoint}set farChordPoint(e){this._farChordPoint.copy(e)}get extArcStartAngle(){return this._extArcStartAngle}set extArcStartAngle(e){this._extArcStartAngle=e}get extArcEndAngle(){return this._extArcEndAngle}set extArcEndAngle(e){this._extArcEndAngle=e}get leaderLength(){return this._leaderLength}get geometricExtents(){return new Lr}drawLines(e,n){const r=[],s=n.length;return s==1?r.push(this.drawLine(e,n[0],{firstArrow:this.firstArrowStyle})):s==3?(this.sortLines(n),r.push(this.drawLine(e,n[0],{firstArrow:this.firstArrowStyle})),r.push(this.drawLine(e,n[1])),r.push(this.drawLine(e,n[2],{firstArrow:this.firstArrowStyle}))):n.forEach(i=>{r.push(this.drawLine(e,i))}),r}drawLine(e,n,r){if(r){const s=[n.startPoint,n.endPoint];return e.lines(s,{...this.lineStyle,arrows:r})}else return n.draw(e)}sortLines(e){const n=(r,s)=>r.x!==s.x?r.x-s.x:r.y!==s.y?r.y-s.y:r.z-s.z;e.sort((r,s)=>{const i=n(r.startPoint,s.startPoint);return i!==0?i:n(r.endPoint,s.endPoint)})}};CD.typeName="DiametricDimension";let TD=CD;const MD=class extends Lp{constructor(e,n,r=null,s=null){super(),this._definingPoint=new Yt().copy(e),this._leaderEndPoint=new Yt().copy(n),this.dimensionText=r,this.dimensionStyleName=s}get definingPoint(){return this._definingPoint}set definingPoint(e){this._definingPoint.copy(e)}get leaderEndPoint(){return this._leaderEndPoint}set leaderEndPoint(e){this._leaderEndPoint.copy(e)}get geometricExtents(){return new Lr}get arrowLineCount(){return 0}};MD.typeName="OrdinateDimension";let AD=MD;const kD=class extends Lp{constructor(e,n,r,s=null,i=null){super(),this._center=new Yt().copy(e),this._chordPoint=new Yt().copy(n),this._leaderLength=r,this._extArcStartAngle=0,this._extArcEndAngle=0,this.dimensionText=s,this.dimensionStyleName=i}get center(){return this._center}set center(e){this._center.copy(e)}get chordPoint(){return this._chordPoint}set chordPoint(e){this._chordPoint.copy(e)}get extArcStartAngle(){return this._extArcStartAngle}set extArcStartAngle(e){this._extArcStartAngle=e}get extArcEndAngle(){return this._extArcEndAngle}set extArcEndAngle(e){this._extArcEndAngle=e}get leaderLength(){return this._leaderLength}set leaderLenght(e){this._leaderLength=e}get geometricExtents(){return new Lr}getLineArrowStyle(e){return{secondArrow:this.secondArrowStyle}}};kD.typeName="RadialDimension";let ID=kD,qA=class{convert(e){const n=this.createEntity(e);return n&&this.processCommonAttrs(e,n),n}createEntity(e){return e.type=="ARC"?this.convertArc(e):e.type=="CIRCLE"?this.convertCirle(e):e.type=="DIMENSION"?this.convertDimension(e):e.type=="ELLIPSE"?this.convertEllipse(e):e.type=="HATCH"?this.convertHatch(e):e.type=="IMAGE"?this.convertImage(e):e.type=="LEADER"?this.convertLeader(e):e.type=="LINE"?this.convertLine(e):e.type=="MTEXT"?this.convertMText(e):e.type=="POLYLINE"||e.type=="LWPOLYLINE"?this.convertPolyline(e):e.type=="POINT"?this.convertPoint(e):e.type=="RAY"?this.convertRay(e):e.type=="SPLINE"?this.convertSpline(e):e.type=="ACAD_TABLE"?this.convertTable(e):e.type=="TEXT"?this.convertText(e):e.type=="SOLID"?this.convertSolid(e):e.type=="VIEWPORT"?this.convertViewport(e):e.type=="WIPEOUT"?this.convertWipeout(e):e.type=="XLINE"?this.convertXline(e):e.type=="INSERT"?this.convertBlockReference(e):null}convertArc(e){return new VN(e.center,e.radius,vr.degToRad(e.startAngle),vr.degToRad(e.endAngle))}convertCirle(e){return new GN(e.center,e.radius)}convertEllipse(e){const n=new qt(e.majorAxisEndPoint),r=n.length();return new zN(e.center,qt.Z_AXIS,n,r,r*e.axisRatio,e.startAngle,e.endAngle)}convertLine(e){const n=e.startPoint,r=e.endPoint;return new XN(new Yt(n.x,n.y,n.z||0),new Yt(r.x,r.y,r.z||0))}convertSpline(e){if(e.numberOfControlPoints>0&&e.numberOfKnots>0)return new bb(e.controlPoints,e.knots,e.weights,e.degree,!!(e.flag&1));if(e.numberOfFitPoints>0){const n=this.numberArrayToPointArray(e.fitPoints,e.numberOfFitPoints);if(n!=null)return new bb(n,"Uniform",e.degree,!!(e.flag&1))}return null}convertPoint(e){const n=new fD;return n.position=e.position,n}convertSolid(e){const n=new uD;return e.points.forEach((r,s)=>n.setPointAt(s,r)),n.thickness=e.thickness,n}convertPolyline(e){const n=new nS;return n.closed=!!(e.flag&1),e.vertices.forEach((r,s)=>{n.addVertexAt(s,new Dn(r.x,r.y),r.bulge,r.startWidth,r.endWidth)}),n}convertHatch(e){var n;const r=new jN;return(n=e.definitionLines)==null||n.forEach(s=>{r.definitionLines.push({angle:s.angle,origin:s.base,delta:s.offset,dashPattern:s.numberOfDashLengths>0?s.dashLengths:[]})}),r.hatchStyle=e.hatchStyle,r.patternName=e.patternName,r.patternType=e.patternType,r.patternAngle=e.patternAngle==null?0:e.patternAngle,r.patternScale=e.patternScale==null?0:e.patternScale,e.boundaryPaths.forEach(s=>{if(s.boundaryPathTypeFlag&2){const i=s,o=new hv;o.closed=i.isClosed,i.vertices.forEach((a,l)=>{o.addVertexAt(l,{x:a.x,y:a.y,bulge:a.bulge})}),r.add(o)}else{const i=s,o=new RN;i.edges.forEach(a=>{if(a.type==1){const l=a;o.add(new IN(l.start,l.end))}else if(a.type==2){const l=a;o.add(new yb(l.center,l.radius,vr.degToRad(l.startAngle||0),vr.degToRad(l.endAngle||0),!l.isCCW))}else if(a.type==3){const l=a;new is().subVectors(l.end,l.center);const c=Math.sqrt(Math.pow(l.end.x,2)+Math.pow(l.end.y,2)),u=c*l.lengthOfMinorAxis;let d=vr.degToRad(l.startAngle||0),h=vr.degToRad(l.endAngle||0);const f=Math.atan2(l.end.y,l.end.x);l.isCCW||(d=Math.PI*2-d,h=Math.PI*2-h),o.add(new MN({...l.center,z:0},c,u,d,h,!l.isCCW,f))}else if(a.type==4){const l=a;if(l.numberOfControlPoints>0&&l.numberOfKnots>0){const c=l.controlPoints.map(h=>({x:h.x,y:h.y,z:0}));let u=!0;const d=l.controlPoints.map(h=>(h.weight==null&&(u=!1),h.weight||1));o.add(new qd(c,l.knots,u?d:void 0))}else if(l.numberOfFitData>0){const c=l.fitDatum.map(u=>({x:u.x,y:u.y,z:0}));o.add(new qd(c,"Uniform"))}}}),r.add(o)}}),r}convertTable(e){const n=new oD(e.name,e.rowCount,e.columnCount);return n.attachmentPoint=e.attachmentPoint,n.position.copy(e.startPoint),e.columnWidthArr.forEach((r,s)=>n.setColumnWidth(s,r)),e.rowHeightArr.forEach((r,s)=>n.setRowHeight(s,r)),e.cells.forEach((r,s)=>{n.setCell(s,r)}),n}convertText(e){const n=new lD;return n.textString=e.text,n.styleName=e.styleName,n.height=e.textHeight,n.position.copy(e.startPoint),n.rotation=vr.degToRad(e.rotation||0),n.oblique=e.obliqueAngle??0,n.thickness=e.thickness,n.horizontalMode=e.halign,n.verticalMode=e.valign,n.widthFactor=e.xScale??1,n}convertMText(e){const n=new rD;return n.contents=e.text,e.styleName!=null&&(n.styleName=e.styleName),n.height=e.height,n.width=e.width,n.rotation=vr.degToRad(e.rotation||0),n.location=e.insertionPoint,n.attachmentPoint=e.attachmentPoint,e.direction&&(n.direction=new qt(e.direction)),n.drawingDirection=e.drawingDirection,n}convertLeader(e){const n=new qN;return e.vertices.forEach(r=>{n.appendVertex(r)}),n.hasArrowHead=e.isArrowheadEnabled,n.hasHookLine=e.isHooklineExists,n.isSplined=e.isSpline,n.dimensionStyle=e.styleName,n.annoType=e.leaderCreationFlag,n}convertDimension(e){if(e.subclassMarker=="AcDbAlignedDimension"||e.subclassMarker=="AcDbRotatedDimension"){const n=e,r=new ED(n.subDefinitionPoint1,n.subDefinitionPoint2,n.definitionPoint);return r.rotation=vr.degToRad(n.rotationAngle||0),this.processDimensionCommonAttrs(e,r),r}else if(e.subclassMarker=="AcDb3PointAngularDimension"){const n=e,r=new xD(n.centerPoint,n.subDefinitionPoint1,n.subDefinitionPoint2,n.definitionPoint);return this.processDimensionCommonAttrs(e,r),r}else if(e.subclassMarker=="AcDbOrdinateDimension"){const n=e,r=new AD(n.subDefinitionPoint1,n.subDefinitionPoint2);return this.processDimensionCommonAttrs(e,r),r}else if(e.subclassMarker=="AcDbRadialDimension"){const n=e,r=new ID(n.definitionPoint,n.centerPoint,n.leaderLength);return this.processDimensionCommonAttrs(e,r),r}else if(e.subclassMarker=="AcDbDiametricDimension"){const n=e,r=new TD(n.definitionPoint,n.centerPoint,n.leaderLength);return this.processDimensionCommonAttrs(e,r),r}return null}processImage(e,n){n.position.copy(e.position),n.brightness=e.brightness,n.contrast=e.contrast,n.fade=e.fade,n.isShownClipped=(e.flags|4)>0,n.isImageShown=(e.flags|3)>0,n.isImageTransparent=(e.flags|8)>0,n.imageDefId=e.imageDefHandle,n.isClipped=e.isClipped,e.clippingBoundaryPath.forEach(r=>{n.clipBoundary.push(new Dn(r))}),n.width=Math.sqrt(e.uPixel.x**2+e.uPixel.y**2+e.uPixel.z**2)*e.imageSize.x,n.height=Math.sqrt(e.vPixel.x**2+e.vPixel.y**2+e.vPixel.z**2)*e.imageSize.y,n.rotation=Math.atan2(e.uPixel.y,e.uPixel.x)}convertImage(e){const n=new E1;return this.processImage(e,n),n.clipBoundaryType=e.clippingBoundaryType,n}processWipeout(e,n){n.position.copy(e.position),n.brightness=e.brightness,n.contrast=e.contrast,n.fade=e.fade,n.isShownClipped=(e.displayFlag|4)>0,n.isImageShown=(e.displayFlag|3)>0,n.isImageTransparent=(e.displayFlag|8)>0,n.imageDefId=e.imageDefHardId,n.isClipped=e.isClipping,e.boundary.forEach(r=>{n.clipBoundary.push(new Dn(r))}),n.clipBoundaryType=e.boundaryType,n.width=Math.sqrt(e.uDirection.x**2+e.uDirection.y**2+e.uDirection.z**2)*e.imageSize.x,n.height=Math.sqrt(e.vDirection.x**2+e.vDirection.y**2+e.vDirection.z**2)*e.imageSize.y,n.rotation=Math.atan2(e.uDirection.y,e.uDirection.x)}convertWipeout(e){const n=new yD;return this.processWipeout(e,n),n}convertViewport(e){const n=new aC;return n.number=e.viewportId,n.centerPoint.copy(e.viewportCenter),n.height=e.height,n.width=e.width,n.viewCenter.copy(e.displayCenter),n.viewHeight=e.viewHeight,n}convertRay(e){const n=new oC;return n.basePoint.copy(e.position),n.unitDir.copy(e.direction),n}convertXline(e){const n=new lC;return n.basePoint.copy(e.position),n.unitDir.copy(e.direction),n}convertBlockReference(e){const n=new sC(e.name);return e.insertionPoint&&n.position.copy(e.insertionPoint),n.scaleFactors.x=e.xScale||1,n.scaleFactors.y=e.yScale||1,n.scaleFactors.z=e.zScale||1,n.rotation=e.rotation!=null?vr.degToRad(e.rotation):0,n.normal.copy(e.extrusionDirection??{x:0,y:0,z:1}),n}processDimensionCommonAttrs(e,n){n.dimBlockId=e.name,n.textPosition.copy(e.textPoint),n.textRotation=e.textRotation||0,e.textLineSpacingFactor&&(n.textLineSpacingFactor=e.textLineSpacingFactor),e.textLineSpacingStyle&&(n.textLineSpacingStyle=e.textLineSpacingStyle),n.dimensionStyleName=e.styleName,n.dimensionText=e.text||"",n.measurement=e.measurement}processCommonAttrs(e,n){n.layer=e.layer,n.objectId=e.handle,n.ownerId=e.ownerBlockRecordSoftId||"",e.lineType!=null&&(n.lineType=e.lineType),e.lineweight!=null&&(n.lineWeight=e.lineweight),e.lineTypeScale!=null&&(n.linetypeScale=e.lineTypeScale),e.color!=null&&(n.color.color=e.color),e.colorIndex!=null&&(n.color.colorIndex=e.colorIndex),e.colorName!=null&&(n.color.colorName=e.colorName),e.isVisible!=null&&(n.visibility=e.isVisible),e.transparency!=null&&(n.transparency=e.transparency)}numberArrayToPointArray(e,n){const r=e.length;let s=0;if(r/2==n?s=2:r/3==n&&(s=3),s==0)return;const i=[];for(let o=0,a=r/s;o<a;++o)i.push({x:e[o*s],y:e[o*s+1],z:s==3?e[o*s+2]:0});return i}},C1=class extends dh{constructor(){super(),this._tabOrder=-1,this._tabSelected=!1,this._blockTableRecordId="",this._layoutName="",this._limits=new ds,this._extents=new Lr}get layoutName(){return this._layoutName}set layoutName(e){this._layoutName=e.length>256?e.slice(0,256):e}get tabOrder(){return this._tabOrder}set tabOrder(e){this._tabOrder=e}get tabSelected(){return this._tabSelected}set tabSelected(e){this._tabSelected=e}get blockTableRecordId(){return this._blockTableRecordId}set blockTableRecordId(e){this._blockTableRecordId=e}get limits(){return this._limits}set limits(e){this._limits.copy(e)}get extents(){return this._extents}set extents(e){this._extents.copy(e)}},PD=class extends dh{constructor(e){super(),this.database=e,this._recordsByName=new Map,this._recordsById=new Map}get numEntries(){return this._recordsByName.size}setAt(e,n){n.database=this.database,this._recordsByName.set(e,n),this._recordsById.set(n.objectId,n),this.database.events.dictObjetSet.dispatch({database:this.database,object:n,key:e})}remove(e){const n=this.getAt(e);return n?(this._recordsByName.delete(e.toUpperCase()),this._recordsById.delete(this.objectId),this.database.events.dictObjectErased.dispatch({database:this.database,object:n,key:e}),!0):!1}removeId(e){const n=this.getIdAt(e);return n?(this._recordsById.delete(this.objectId),this._recordsByName.forEach((r,s)=>{r===n&&(this._recordsByName.delete(s),this.database.events.dictObjectErased.dispatch({database:this.database,object:n,key:s}))}),!0):!1}removeAll(){this._recordsByName.forEach((e,n)=>{this.database.events.dictObjectErased.dispatch({database:this.database,object:e,key:n})}),this._recordsByName.clear(),this._recordsById.clear()}has(e){return this._recordsByName.has(e.toUpperCase())}hasId(e){return this._recordsById.has(e)}getAt(e){return this._recordsByName.get(e)}getIdAt(e){return this._recordsById.get(e)}newIterator(){return new tC(this._recordsByName)}},fG=class extends PD{getBtrIdAt(e){for(const[n,r]of this._recordsByName)if(r.blockTableRecordId==e)return r}get maxTabOrder(){let e=-1;return this._recordsByName.forEach(n=>{n.tabOrder>e&&(e=n.tabOrder)}),e}},RD=class extends dh{constructor(){super(),this._sourceFileName=""}get sourceFileName(){return this._sourceFileName}set sourceFileName(e){this._sourceFileName=e}},pG=class{convertLayout(e,n){var r;const s=new C1;return s.layoutName=e.layoutName,s.tabOrder=e.tabOrder,(r=n.tables.BLOCK_RECORD)==null||r.entries.some(i=>i.layoutObjects===e.handle?(s.blockTableRecordId=i.handle,!0):!1),s.limits.min.copy(e.minLimit),s.limits.max.copy(e.maxLimit),s.extents.min.copy(e.minExtent),s.extents.max.copy(e.maxExtent),this.processCommonAttrs(e,s),s}convertImageDef(e){const n=new RD;return n.sourceFileName=e.fileName,this.processCommonAttrs(e,n),n}processCommonAttrs(e,n){n.objectId=e.handle,n.ownerId=e.ownerObjectId}},mG=class{constructor(e){this.taskId=0,this.workers=new Map,this.pendingTasks=new Map,this.config={workerUrl:e.workerUrl,timeout:e.timeout??3e4,maxConcurrentWorkers:e.maxConcurrentWorkers??4}}async execute(e,n){const r=Date.now(),s=this.generateTaskId();try{return await this.executeInWorker(s,e,n||this.config.workerUrl)}catch(i){const o=Date.now()-r;return{success:!1,error:i instanceof Error?i.message:String(i),duration:o}}}async executeInWorker(e,n,r){const s=Date.now();return new Promise((i,o)=>{const a=this.getAvailableWorker(r),l=setTimeout(()=>{this.cleanupTask(e),this.releaseWorker(a),o(new Error(`Worker operation timed out after ${this.config.timeout}ms`))},this.config.timeout);this.pendingTasks.set(e,{resolve:d=>{clearTimeout(l),this.releaseWorker(a),i(d)},reject:d=>{clearTimeout(l),this.releaseWorker(a),o(d)},timeout:l});const c=d=>{const{id:h,success:f,data:m,error:v}=d.data;if(h!==e)return;this.cleanupTask(e);const y=Date.now()-s;i(f?{success:!0,data:m,duration:y}:{success:!1,error:v,duration:y})},u=d=>{this.cleanupTask(e),o(new Error(`Worker error: ${d.message}`))};a.addEventListener("message",c),a.addEventListener("error",u),a.postMessage({id:e,input:n})})}cleanupTask(e){const n=this.pendingTasks.get(e);n&&(clearTimeout(n.timeout),this.pendingTasks.delete(e))}generateTaskId(){return`task_${++this.taskId}_${Date.now()}`}detectWorkerSupport(){return typeof Worker<"u"}getAvailableWorker(e){for(const[r,s]of this.workers)if(!s.isBusy)return s.isBusy=!0,s.worker;if(this.workers.size<this.config.maxConcurrentWorkers){const r=new Worker(e,{type:"module"}),s=this.generateWorkerId(),i={worker:r,isBusy:!0,id:s,createdAt:new Date};return this.workers.set(s,i),r}const n=Array.from(this.workers.values()).sort((r,s)=>r.createdAt.getTime()-s.createdAt.getTime())[0];return n.isBusy=!0,n.worker}releaseWorker(e){for(const[n,r]of this.workers)if(r.worker===e){r.isBusy=!1;break}}generateWorkerId(){return`worker_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getStats(){return{totalWorkers:this.workers.size,busyWorkers:Array.from(this.workers.values()).filter(e=>e.isBusy).length,pendingTasks:this.pendingTasks.size,config:this.config}}destroy(){for(const[e,n]of this.pendingTasks)clearTimeout(n.timeout),n.reject(new Error("Framework destroyed"));this.pendingTasks.clear();for(const[e,n]of this.workers)n.worker.terminate();this.workers.clear()}},gG=class{constructor(e){this.framework=new mG(e)}async execute(e,n){return this.framework.execute(e,n)}getStats(){return this.framework.getStats()}destroy(){this.framework.destroy()}};function LD(t){return new gG(t)}let OD=class extends tN{constructor(e={}){super(e),e.parserWorkerUrl||(e.parserWorkerUrl="/assets/dxf-parser-worker.js")}async parse(e){if(this.config.useWorker&&this.config.parserWorkerUrl){const n=LD({workerUrl:this.config.parserWorkerUrl,maxConcurrentWorkers:1}),r=await n.execute(e);return n.destroy(),r.data}else return new MH().parseSync(e)}getFonts(e){var n;const r=new Map,s=o=>{if(o){const a=o.lastIndexOf(".");return a>=0?o.substring(0,a).toLowerCase():o.toLowerCase()}};(n=e.tables.STYLE)==null||n.entries.forEach(o=>{const a=[];let l=s(o.font);l&&a.push(l),l=s(o.bigFont),l&&a.push(l),r.set(o.name,a)});const i=new Set;return this.getFontsInBlock(e.entities,e.blocks,r,i),Array.from(i)}getFontsInBlock(e,n,r,s){const i=/\\f(.*?)\|/g;e.forEach(o=>{if(o.type=="MTEXT"){const a=o;[...a.text.matchAll(i)].forEach(c=>{s.add(c[1].toLowerCase())});const l=r.get(a.styleName);l==null||l.forEach(c=>s.add(c))}else if(o.type=="TEXT"){const a=o,l=r.get(a.styleName);l==null||l.forEach(c=>s.add(c))}else if(o.type=="INSERT"){const a=n[o.name];a&&a.entities&&this.getFontsInBlock(a.entities,n,r,s)}})}async processEntities(e,n,r,s,i){const o=new qA;let a=e.entities;const l=a.length,c=new $L(l,100-s.value,r);this.config.convertByEntityType&&(a=this.groupAndFlattenByType(a));const u=n.tables.blockTable.modelSpace;await c.processChunk(async(d,h)=>{let f=[],m=d<h?a[d].type:"";for(let v=d;v<h;v++){const y=a[v],g=o.convert(y);g&&(this.config.convertByEntityType&&y.type!==m&&(u.appendEntity(f),f=[],m=y.type),f.push(g))}if(u.appendEntity(f),i){let v=s.value+h/l*(100-s.value);v>100&&(v=100),await i(v,"ENTITY","IN-PROGRESS")}})}async processEntitiesInBlock(e,n){const r=new qA,s=e.length,i=[];for(let o=0;o<s;o++){const a=e[o],l=r.convert(a);l&&i.push(l)}n.appendEntity(i)}processBlocks(e,n){const r=e.blocks;for(const[s,i]of Object.entries(r)){let o=n.tables.blockTable.getAt(i.name);o||(o=new wa,o.objectId=i.handle,o.name=s,o.origin.copy(i.position),n.tables.blockTable.add(o)),i.entities&&this.processEntitiesInBlock(i.entities,o)}}processHeader(e,n){const r=e.header;n.cecolor.colorIndex=r.$CECOLOR||256,n.angBase=r.$ANGBASE||0,n.angDir=r.$ANGDIR||0,n.aunits=r.$AUNITS,n.extmax=r.$EXTMAX,n.extmin=r.$EXTMIN,n.insunits=r.$INSUNITS,n.pdmode=r.$PDMODE||0,n.pdsize=r.$PDSIZE||0}processBlockTables(e,n){var r;const s=(r=e.tables.BLOCK_RECORD)==null?void 0:r.entries;s&&s.length>0&&(n.tables.blockTable.removeAll(),s.forEach(i=>{const o=new wa;o.objectId=i.handle,o.name=i.name,o.layoutId=i.layoutObjects,n.tables.blockTable.add(o)}))}processObjects(e,n){const r=e.objects.byName,s=new pG;if("LAYOUT"in r){const i=n.dictionaries.layouts;r.LAYOUT.forEach(o=>{const a=s.convertLayout(o,e);i.setAt(a.layoutName,a)})}if("IMAGEDEF"in r){const i=n.dictionaries.imageDefs;r.IMAGEDEF.forEach(o=>{const a=s.convertImageDef(o);i.setAt(a.objectId,a)})}}processViewports(e,n){var r,s;const i=(s=(r=e.tables)==null?void 0:r.VPORT)==null?void 0:s.entries;i&&i.length>0&&i.forEach(o=>{const a=new UD;this.processCommonTableEntryAttrs(o,a),o.circleSides&&(a.circleSides=o.circleSides),a.standardFlag=o.standardFlag,a.center.copy(o.center),a.lowerLeftCorner.copy(o.lowerLeftCorner),a.upperRightCorner.copy(o.upperRightCorner),o.snapBasePoint&&a.snapBase.copy(o.snapBasePoint),o.snapRotationAngle&&(a.snapAngle=o.snapRotationAngle),o.snapSpacing&&a.snapIncrements.copy(o.snapSpacing),o.majorGridLines&&(a.gridMajor=o.majorGridLines),o.gridSpacing&&a.gridIncrements.copy(o.gridSpacing),o.backgroundObjectId&&(a.backgroundObjectId=o.backgroundObjectId),a.gsView.center.copy(o.center),a.gsView.viewDirectionFromTarget.copy(o.viewDirectionFromTarget),a.gsView.viewTarget.copy(o.viewTarget),o.lensLength&&(a.gsView.lensLength=o.lensLength),o.frontClippingPlane&&(a.gsView.frontClippingPlane=o.frontClippingPlane),o.backClippingPlane&&(a.gsView.backClippingPlane=o.backClippingPlane),o.viewHeight&&(a.gsView.viewHeight=o.viewHeight),o.viewTwistAngle&&(a.gsView.viewTwistAngle=o.viewTwistAngle),o.frozenLayers&&(a.gsView.frozenLayers=o.frozenLayers),o.styleSheet&&(a.gsView.styleSheet=o.styleSheet),o.renderMode&&(a.gsView.renderMode=o.renderMode),o.viewMode&&(a.gsView.viewMode=o.viewMode),o.ucsIconSetting&&(a.gsView.ucsIconSetting=o.ucsIconSetting),o.ucsOrigin&&a.gsView.ucsOrigin.copy(o.ucsOrigin),o.ucsXAxis&&a.gsView.ucsXAxis.copy(o.ucsXAxis),o.ucsYAxis&&a.gsView.ucsYAxis.copy(o.ucsYAxis),o.orthographicType&&(a.gsView.orthographicType=o.orthographicType),o.shadePlotSetting&&(a.gsView.shadePlotSetting=o.shadePlotSetting),o.shadePlotObjectId&&(a.gsView.shadePlotObjectId=o.shadePlotObjectId),o.visualStyleObjectId&&(a.gsView.visualStyleObjectId=o.visualStyleObjectId),o.isDefaultLightingOn&&(a.gsView.isDefaultLightingOn=o.isDefaultLightingOn),o.defaultLightingType&&(a.gsView.defaultLightingType=o.defaultLightingType),o.brightness&&(a.gsView.brightness=o.brightness),o.contrast&&(a.gsView.contrast=o.contrast),o.ambientColor&&(a.gsView.ambientColor=o.ambientColor),n.tables.viewportTable.add(a)})}processLayers(e,n){var r,s;const i=(s=(r=e.tables)==null?void 0:r.LAYER)==null?void 0:s.entries;i&&i.length>0&&i.forEach(o=>{const a=new Gu;a.colorIndex=o.colorIndex;const l=new cC({name:o.name,standardFlags:o.standardFlag,linetype:o.lineType,lineWeight:o.lineweight,isOff:o.colorIndex<0,color:a,isPlottable:o.isPlotting});this.processCommonTableEntryAttrs(o,l),n.tables.layerTable.add(l)})}processLineTypes(e,n){var r,s;const i=(s=(r=e.tables)==null?void 0:r.LTYPE)==null?void 0:s.entries;i&&i.length>0&&i.forEach(o=>{const a=new FD(o);this.processCommonTableEntryAttrs(o,a),a.name=o.name,n.tables.linetypeTable.add(a)})}processTextStyles(e,n){var r;const s=(r=e.tables.STYLE)==null?void 0:r.entries;s&&s.length>0&&s.forEach(i=>{const o=new BD(i);this.processCommonTableEntryAttrs(i,o),n.tables.textStyleTable.add(o)})}processDimStyles(e,n){var r;const s=(r=e.tables.DIMSTYLE)==null?void 0:r.entries;s&&s.length>0&&s.forEach(i=>{const o={name:i.name,ownerId:i.ownerObjectId,dimpost:i.DIMPOST||"",dimapost:i.DIMAPOST||"",dimscale:i.DIMSCALE,dimasz:i.DIMASZ,dimexo:i.DIMEXO,dimdli:i.DIMDLI,dimexe:i.DIMEXE,dimrnd:i.DIMRND,dimdle:i.DIMDLE,dimtp:i.DIMTP,dimtm:i.DIMTM,dimtxt:i.DIMTXT,dimcen:i.DIMCEN,dimtsz:i.DIMTSZ,dimaltf:i.DIMALTF,dimlfac:i.DIMLFAC,dimtvp:i.DIMTVP,dimtfac:i.DIMTFAC,dimgap:i.DIMGAP,dimaltrnd:i.DIMALTRND,dimtol:i.DIMTOL==null||i.DIMTOL==0?0:1,dimlim:i.DIMLIM==null||i.DIMLIM==0?0:1,dimtih:i.DIMTIH==null||i.DIMTIH==0?0:1,dimtoh:i.DIMTOH==null||i.DIMTOH==0?0:1,dimse1:i.DIMSE1==null||i.DIMSE1==0?0:1,dimse2:i.DIMSE2==null||i.DIMSE2==0?0:1,dimtad:i.DIMTAD,dimzin:i.DIMZIN,dimazin:i.DIMAZIN,dimalt:i.DIMALT,dimaltd:i.DIMALTD,dimtofl:i.DIMTOFL,dimsah:i.DIMSAH,dimtix:i.DIMTIX,dimsoxd:i.DIMSOXD,dimclrd:i.DIMCLRD,dimclre:i.DIMCLRE,dimclrt:i.DIMCLRT,dimadec:i.DIMADEC||0,dimunit:i.DIMUNIT||2,dimdec:i.DIMDEC,dimtdec:i.DIMTDEC,dimaltu:i.DIMALTU,dimalttd:i.DIMALTTD,dimaunit:i.DIMAUNIT,dimfrac:i.DIMFRAC,dimlunit:i.DIMLUNIT,dimdsep:i.DIMDSEP,dimtmove:i.DIMTMOVE||0,dimjust:i.DIMJUST,dimsd1:i.DIMSD1,dimsd2:i.DIMSD2,dimtolj:i.DIMTOLJ,dimtzin:i.DIMTZIN,dimaltz:i.DIMALTZ,dimalttz:i.DIMALTTZ,dimfit:i.DIMFIT||0,dimupt:i.DIMUPT,dimatfit:i.DIMATFIT,dimtxsty:i.DIMTXSTY||"Standard",dimldrblk:i.DIMLDRBLK||"",dimblk:i.DIMBLK||"",dimblk1:i.DIMBLK1||"",dimblk2:i.DIMBLK2||"",dimlwd:i.DIMLWD,dimlwe:i.DIMLWE},a=new uC(o);this.processCommonTableEntryAttrs(i,a),n.tables.dimStyleTable.add(a)})}processCommonTableEntryAttrs(e,n){n.name=e.name,n.objectId=e.handle,n.ownerId=e.ownerObjectId}groupAndFlattenByType(e){const n={},r=[];for(const s of e)n[s.type]||(n[s.type]=[],r.push(s.type)),n[s.type].push(s);return r.flatMap(s=>n[s])}};var Tu=(t=>(t.DXF="dxf",t.DWG="dwg",t))(Tu||{});let _b=class au{constructor(){this.events={registered:new Tr,unregistered:new Tr},this._converters=new Map,this.register("dxf",new OD)}static createInstance(){return au._instance==null&&(au._instance=new au),this._instance}static get instance(){return au._instance||(au._instance=new au),au._instance}get fileTypes(){return this._converters.keys()}register(e,n){this._converters.set(e,n),this.events.registered.dispatch({fileType:e,converter:n})}get(e){return this._converters.get(e)}unregister(e){const n=this._converters.get(e);n&&(this._converters.delete(e),this.events.unregistered.dispatch({fileType:e,converter:n}))}},Op=class extends dh{constructor(e,n){e=e||{},cv(e,{name:""}),super(e,n)}get name(){return this.getAttr("name")}set name(e){this.setAttr("name",e)}};const rS=class Mm extends Op{static isModelSapceName(e){return e.toLowerCase()==Mm.MODEL_SPACE_NAME.toLowerCase()}static isPaperSapceName(e){return e.toLowerCase().startsWith(Mm.PAPER_SPACE_NAME_PREFIX.toLowerCase())}constructor(){super(),this._origin=new Yt,this._layoutId="",this._entities=new Map}get isModelSapce(){return Mm.isModelSapceName(this.name)}get isPaperSapce(){return Mm.isPaperSapceName(this.name)}get origin(){return this._origin}set origin(e){this._origin.copy(e)}get layoutId(){return this._layoutId}set layoutId(e){this._layoutId=e}appendEntity(e){if(Array.isArray(e))for(let n=0;n<e.length;++n){const r=e[n];r.database=this.database,r.ownerId=this.objectId,this._entities.set(r.objectId,r)}else e.database=this.database,e.ownerId=this.objectId,this._entities.set(e.objectId,e);(this.isModelSapce||this.isPaperSapce)&&this.database.events.entityAppended.dispatch({database:this.database,entity:e})}newIterator(){return new tC(this._entities)}getIdAt(e){return this._entities.get(e)}};rS.MODEL_SPACE_NAME="*MODEL_SPACE",rS.PAPER_SPACE_NAME_PREFIX="*PAPER_SPACE";let wa=rS,Np=class extends dh{constructor(e){super(),this.database=e,this._recordsByName=new Map,this._recordsById=new Map}add(e){e.database=this.database;const n=this.normalizeName(e.name);this._recordsByName.set(n,e),this._recordsById.set(e.objectId,e)}remove(e){const n=this.normalizeName(e),r=this._recordsByName.get(n);return r?(this._recordsById.delete(r.objectId),this._recordsByName.delete(e),!0):!1}removeId(e){const n=this._recordsById.get(e);return n?(this._recordsByName.delete(n.name),this._recordsById.delete(e),!0):!1}removeAll(){this._recordsByName.clear(),this._recordsById.clear()}has(e){const n=this.normalizeName(e);return this._recordsByName.has(n)}hasId(e){return this._recordsById.has(e)}getAt(e){const n=this.normalizeName(e);return this._recordsByName.get(n)}getIdAt(e){return this._recordsById.get(e)}getOwnerIdAt(e){return this._recordsById.get(e)}newIterator(){return new tC(this._recordsByName)}normalizeName(e){return e}},vG=class extends Np{constructor(e){super(e)}get modelSpace(){let e=this.getAt(wa.MODEL_SPACE_NAME);return e||(e=new wa,e.name=wa.MODEL_SPACE_NAME,this.add(e)),e}normalizeName(e){let n=e;if(wa.isModelSapceName(e))n=wa.MODEL_SPACE_NAME;else if(wa.isPaperSapceName(e)){const r=wa.PAPER_SPACE_NAME_PREFIX,s=e.substring(r.length);n=r+s}return n}},yG=class extends Np{constructor(e){super(e)}},cC=class extends Op{constructor(e,n){e=e||{},cv(e,{color:new Gu,description:"",standardFlags:0,isHidden:!1,isInUse:!0,isOff:!1,isPlottable:!0,transparency:0,linetype:"",lineWeight:1,materialId:-1}),super(e,n),this.attrs.events.attrChanged.addEventListener(r=>{this.database.events.layerModified.dispatch({database:this.database,layer:this,changes:r.object.changedAttributes()})})}get color(){return this.getAttr("color")}set color(e){this.setAttr("color",e.clone())}get description(){return this.getAttr("description")}set description(e){this.setAttr("description",e)}get standardFlags(){return this.getAttr("standardFlags")}set standardFlags(e){this.setAttr("standardFlags",e)}get isFrozen(){return(this.standardFlags&1)==1}set isFrozen(e){const n=e?1:0;this.standardFlags=this.standardFlags|n}get isHidden(){return this.getAttr("isHidden")}set isHidden(e){this.setAttr("isHidden",e)}get isInUse(){return this.getAttr("isInUse")}set isInUse(e){this.setAttr("isInUse",e)}get isLocked(){return(this.standardFlags&4)==4}set isLocked(e){const n=e?4:0;this.standardFlags=this.standardFlags|n}get isOff(){return this.getAttr("isOff")}set isOff(e){this.setAttr("isOff",e)}get isPlottable(){return this.getAttr("isPlottable")}set isPlottable(e){this.setAttr("isPlottable",e)}get transparency(){return this.getAttr("transparency")}set transparency(e){this.setAttr("transparency",e)}get linetype(){return this.getAttr("linetype")}set linetype(e){this.setAttr("linetype",e)}get lineWeight(){return this.getAttr("lineWeight")}set lineWeight(e){this.setAttr("lineWeight",e)}get materialId(){return this.getAttr("materialId")}set materialId(e){this.setAttr("materialId",e)}},bG=class extends Np{constructor(e){super(e);const n=new Gu;n.color=16777215;const r=new cC({name:"0",standardFlags:0,linetype:Xx,lineWeight:1,isOff:!1,color:n,isPlottable:!0});this.add(r)}add(e){super.add(e),this.database.events.layerAppended.dispatch({database:this.database,layer:e})}},_G=class extends Np{constructor(e){super(e)}},wG=class extends Np{constructor(e){super(e)}get fonts(){const e=new Set,n=s=>{if(s){const i=s.lastIndexOf(".");if(i>=0){const o=s.substring(0,i).toLowerCase();e.add(o)}else e.add(s.toLowerCase())}},r=this.newIterator();for(const s of r)n(s.fileName),n(s.bigFontFileName);return Array.from(e)}},xG=class extends Np{constructor(e){super(e)}};class SG extends dh{constructor(){super(),this.events={dictObjetSet:new Tr,dictObjectErased:new Tr,entityAppended:new Tr,entityModified:new Tr,layerAppended:new Tr,layerModified:new Tr,layerErased:new Tr,openProgress:new Tr,headerSysVarChanged:new Tr},this._angBase=0,this._angDir=0,this._aunits=ZO.DecimalDegrees,this._celtscale=1,this._cecolor=new Gu,this._extents=new Lr,this._insunits=QO.Millimeters,this._ltscale=1,this._pdmode=0,this._pdsize=0,this._tables={blockTable:new vG(this),dimStyleTable:new yG(this),linetypeTable:new _G(this),textStyleTable:new wG(this),layerTable:new bG(this),viewportTable:new xG(this)},this._dictionaries={layouts:new fG(this),imageDefs:new PD(this)}}get tables(){return this._tables}get dictionaries(){return this._dictionaries}get currentSpaceId(){return this._currentSpace||(this._currentSpace=this._tables.blockTable.modelSpace),this._currentSpace.objectId}set currentSpaceId(e){const n=this.tables.blockTable.getIdAt(e);if(n==null)throw new Error(`[AcDbDatabase] The specified block table record id '${e}' doesn't exist in the drawing database!`);this._currentSpace=n}get aunits(){return this._aunits}set aunits(e){this._aunits=e||0,this.triggerHeaderSysVarChangedEvent("aunits")}get insunits(){return this._insunits}set insunits(e){this._insunits=e||4,this.triggerHeaderSysVarChangedEvent("insunits")}get ltscale(){return this._ltscale}set ltscale(e){this._ltscale=e||1,this.triggerHeaderSysVarChangedEvent("ltscale")}get cecolor(){return this._cecolor}set cecolor(e){this._cecolor=e||0,this.triggerHeaderSysVarChangedEvent("cecolor")}get celtscale(){return this._celtscale}set celtscale(e){this._celtscale=e||1,this.triggerHeaderSysVarChangedEvent("celtscale")}get angBase(){return this._angBase}set angBase(e){this._angBase=e||0,this.triggerHeaderSysVarChangedEvent("angbase")}get angDir(){return this._angDir}set angDir(e){this._angDir=e||0,this.triggerHeaderSysVarChangedEvent("angdir")}get extmax(){return this._extents.max}set extmax(e){this._extents.expandByPoint(e),this.triggerHeaderSysVarChangedEvent("extmax")}get extmin(){return this._extents.min}set extmin(e){this._extents.expandByPoint(e),this.triggerHeaderSysVarChangedEvent("extmin")}get pdmode(){return this._pdmode}set pdmode(e){this._pdmode=e||0,this.triggerHeaderSysVarChangedEvent("pdmode")}get pdsize(){return this._pdsize}set pdsize(e){this._pdsize=e||0,this.triggerHeaderSysVarChangedEvent("pdsize")}async read(e,n,r=Tu.DXF){const s=_b.instance.get(r);if(s==null)throw new Error(`Database converter for file type '${r}' isn't registered and can can't read this file!`);this.clear(),await s.read(e,this,n&&n.minimumChunkSize||10,async(i,o,a,l)=>{if(this.events.openProgress.dispatch({database:this,percentage:i,stage:"CONVERSION",subStage:o,stageStatus:a}),n&&n.fontLoader&&o=="FONT"&&a=="END"){const c=l||this.tables.textStyleTable.fonts;await n.fontLoader.load(c)}})}async openUri(e,n){var r;this.events.openProgress.dispatch({database:this,percentage:0,stage:"FETCH_FILE",stageStatus:"START"});const s=await fetch(e);if(!s.ok)throw this.events.openProgress.dispatch({database:this,percentage:100,stage:"FETCH_FILE",stageStatus:"ERROR"}),new Error(`Failed to fetch file '${e}' with HTTP status code '${s.status}'!`);const i=s.headers.get("content-length"),o=i?parseInt(i,10):null;let a=0;const l=(r=s.body)==null?void 0:r.getReader();if(!l)throw new Error("Failed to get response reader");const c=[];for(;;){const{done:h,value:f}=await l.read();if(h)break;if(c.push(f),a+=f.length,o!==null){const m=Math.round(a/o*100);this.events.openProgress.dispatch({database:this,percentage:m,stage:"FETCH_FILE",stageStatus:"IN-PROGRESS"})}}const u=new Uint8Array(a);let d=0;for(const h of c)u.set(h,d),d+=h.length;if(e.toLowerCase().split(".").pop()==="dwg")await this.read(u.buffer,n,Tu.DWG);else{const h=new TextDecoder().decode(u);await this.read(h,n,Tu.DXF)}this.events.openProgress.dispatch({database:this,percentage:100,stage:"FETCH_FILE",stageStatus:"END"})}clear(){this._tables.blockTable.removeAll(),this._tables.dimStyleTable.removeAll(),this._tables.linetypeTable.removeAll(),this._tables.textStyleTable.removeAll(),this._tables.layerTable.removeAll(),this._tables.viewportTable.removeAll(),this._dictionaries.layouts.removeAll(),this._currentSpace=void 0,this._extents.makeEmpty()}triggerHeaderSysVarChangedEvent(e){this.events.headerSysVarChanged.dispatch({database:this,name:e})}}const ND=class DD extends Op{constructor(e,n){e=e||{},cv(e,DD.DEFAULT_DIM_VALUES),super(e,n)}get dimpost(){return this.getAttr("dimpost")}set dimpost(e){this.setAttr("dimpost",e)}get dimapost(){return this.getAttr("dimapost")}set dimapost(e){this.setAttr("dimapost",e)}get dimscale(){return this.getAttr("dimscale")}set dimscale(e){this.setAttr("dimscale",e)}get dimasz(){return this.getAttr("dimasz")}set dimasz(e){this.setAttr("dimasz",e)}get dimexo(){return this.getAttr("dimexo")}set dimexo(e){this.setAttr("dimexo",e)}get dimdli(){return this.getAttr("dimdli")}set dimdli(e){this.setAttr("dimdli",e)}get dimexe(){return this.getAttr("dimexe")}set dimexe(e){this.setAttr("dimexe",e)}get dimrnd(){return this.getAttr("dimrnd")}set dimrnd(e){this.setAttr("dimrnd",e)}get dimdle(){return this.getAttr("dimdle")}set dimdle(e){this.setAttr("dimdle",e)}get dimtp(){return this.getAttr("dimtp")}set dimtp(e){this.setAttr("dimtp",e)}get dimtm(){return this.getAttr("dimtm")}set dimtm(e){this.setAttr("dimtm",e)}get dimtxt(){return this.getAttr("dimtxt")}set dimtxt(e){this.setAttr("dimtxt",e)}get dimcen(){return this.getAttr("dimcen")}set dimcen(e){this.setAttr("dimcen",e)}get dimtsz(){return this.getAttr("dimtsz")}set dimtsz(e){this.setAttr("dimtsz",e)}get dimaltf(){return this.getAttr("dimaltf")}set dimaltf(e){this.setAttr("dimaltf",e)}get dimlfac(){return this.getAttr("dimlfac")}set dimlfac(e){this.setAttr("dimlfac",e)}get dimtvp(){return this.getAttr("dimtvp")}set dimtvp(e){this.setAttr("dimtvp",e)}get dimtfac(){return this.getAttr("dimtfac")}set dimtfac(e){this.setAttr("dimtfac",e)}get dimgap(){return this.getAttr("dimgap")}set dimgap(e){this.setAttr("dimgap",e)}get dimaltrnd(){return this.getAttr("dimaltrnd")}set dimaltrnd(e){this.setAttr("dimaltrnd",e)}get dimtol(){return this.getAttr("dimtol")}set dimtol(e){this.setAttr("dimtol",e)}get dimlim(){return this.getAttr("dimlim")}set dimlim(e){this.setAttr("dimlim",e)}get dimtih(){return this.getAttr("dimtih")}set dimtih(e){this.setAttr("dimtih",e)}get dimtoh(){return this.getAttr("dimtoh")}set dimtoh(e){this.setAttr("dimtoh",e)}get dimse1(){return this.getAttr("dimse1")}set dimse1(e){this.setAttr("dimse1",e)}get dimse2(){return this.getAttr("dimse2")}set dimse2(e){this.setAttr("dimse2",e)}get dimtad(){return this.getAttr("dimtad")}set dimtad(e){this.setAttr("dimtad",e)}get dimzin(){return this.getAttr("dimzin")}set dimzin(e){this.setAttr("dimzin",e)}get dimazin(){return this.getAttr("dimazin")}set dimazin(e){this.setAttr("dimazin",e)}get dimalt(){return this.getAttr("dimalt")}set dimalt(e){this.setAttr("dimalt",e)}get dimaltd(){return this.getAttr("dimaltd")}set dimaltd(e){this.setAttr("dimaltd",e)}get dimtofl(){return this.getAttr("dimtofl")}set dimtofl(e){this.setAttr("dimtofl",e)}get dimsah(){return this.getAttr("dimsah")}set dimsah(e){this.setAttr("dimsah",e)}get dimtix(){return this.getAttr("dimtix")}set dimtix(e){this.setAttr("dimtix",e)}get dimsoxd(){return this.getAttr("dimsoxd")}set dimsoxd(e){this.setAttr("dimsoxd",e)}get dimclrd(){return this.getAttr("dimclrd")}set dimclrd(e){this.setAttr("dimclrd",e)}get dimclre(){return this.getAttr("dimclre")}set dimclre(e){this.setAttr("dimclre",e)}get dimclrt(){return this.getAttr("dimclrt")}set dimclrt(e){this.setAttr("dimclrt",e)}get dimadec(){return this.getAttr("dimadec")}set dimadec(e){this.setAttr("dimadec",e)}get dimunit(){return this.getAttr("dimunit")}set dimunit(e){this.setAttr("dimunit",e)}get dimdec(){return this.getAttr("dimdec")}set dimdec(e){this.setAttr("dimdec",e)}get dimtdec(){return this.getAttr("dimtdec")}set dimtdec(e){this.setAttr("dimtdec",e)}get dimaltu(){return this.getAttr("dimaltu")}set dimaltu(e){this.setAttr("dimaltu",e)}get dimalttd(){return this.getAttr("dimalttd")}set dimalttd(e){this.setAttr("dimalttd",e)}get dimaunit(){return this.getAttr("dimaunit")}set dimaunit(e){this.setAttr("dimaunit",e)}get dimfrac(){return this.getAttr("dimfrac")}set dimfrac(e){this.setAttr("dimfrac",e)}get dimlunit(){return this.getAttr("dimlunit")}set dimlunit(e){this.setAttr("dimlunit",e)}get dimdsep(){return this.getAttr("dimdsep")}set dimdsep(e){this.setAttr("dimdsep",e)}get dimtmove(){return this.getAttr("dimtmove")}set dimtmove(e){this.setAttr("dimtmove",e)}get dimjust(){return this.getAttr("dimjust")}set dimjust(e){this.setAttr("dimjust",e)}get dimsd1(){return this.getAttr("dimsd1")}set dimsd1(e){this.setAttr("dimsd1",e)}get dimsd2(){return this.getAttr("dimsd2")}set dimsd2(e){this.setAttr("dimsd2",e)}get dimtolj(){return this.getAttr("dimtolj")}set dimtolj(e){this.setAttr("dimtolj",e)}get dimtzin(){return this.getAttr("dimtzin")}set dimtzin(e){this.setAttr("dimtzin",e)}get dimaltz(){return this.getAttr("dimaltz")}set dimaltz(e){this.setAttr("dimaltz",e)}get dimalttz(){return this.getAttr("dimalttz")}set dimalttz(e){this.setAttr("dimalttz",e)}get dimfit(){return this.getAttr("dimfit")}set dimfit(e){this.setAttr("dimfit",e)}get dimupt(){return this.getAttr("dimupt")}set dimupt(e){this.setAttr("dimupt",e)}get dimatfit(){return this.getAttr("dimatfit")}set dimatfit(e){this.setAttr("dimatfit",e)}get dimtxsty(){return this.getAttr("dimtxsty")}set dimtxsty(e){this.setAttr("dimtxsty",e)}get dimldrblk(){return this.getAttr("dimldrblk")}set dimldrblk(e){this.setAttr("dimldrblk",e)}get dimblk(){return this.getAttr("dimblk")}set dimblk(e){this.setAttr("dimblk",e)}get dimblk1(){return this.getAttr("dimblk1")}set dimblk1(e){this.setAttr("dimblk1",e)}get dimblk2(){return this.getAttr("dimblk2")}set dimblk2(e){this.setAttr("dimblk2",e)}get dimlwd(){return this.getAttr("dimlwd")}set dimlwd(e){this.setAttr("dimlwd",e)}get dimlwe(){return this.getAttr("dimlwe")}set dimlwe(e){this.setAttr("dimlwe",e)}};ND.DEFAULT_DIM_VALUES={name:"",dimpost:"",dimapost:"",dimscale:1,dimasz:2.5,dimexo:.625,dimdli:.38,dimexe:.18,dimrnd:0,dimdle:0,dimtp:0,dimtm:0,dimtxt:2.5,dimcen:2.5,dimtsz:0,dimaltf:0,dimlfac:1,dimtvp:0,dimtfac:1,dimgap:1,dimaltrnd:0,dimtol:0,dimlim:0,dimtih:0,dimtoh:0,dimse1:0,dimse2:0,dimtad:0,dimzin:0,dimazin:0,dimalt:0,dimaltd:2,dimtofl:0,dimsah:0,dimtix:0,dimsoxd:0,dimclrd:0,dimclre:0,dimclrt:0,dimadec:0,dimunit:2,dimdec:4,dimtdec:4,dimaltu:2,dimalttd:2,dimaunit:0,dimfrac:0,dimlunit:2,dimdsep:".",dimtmove:0,dimjust:0,dimsd1:0,dimsd2:0,dimtolj:0,dimtzin:0,dimaltz:0,dimalttz:0,dimfit:0,dimupt:0,dimatfit:3,dimtxsty:"Standard",dimldrblk:"",dimblk:"",dimblk1:"",dimblk2:"",dimlwd:-2,dimlwe:-2};let uC=ND,FD=class extends Op{constructor(e){super(),this.name=e.name,this._linetype=e}get numDashes(){return this._linetype.pattern?this._linetype.pattern.length:0}get patternLength(){return this._linetype.totalPatternLength}get comments(){return this._linetype.description}get linetype(){return this._linetype}dashLengthAt(e){if(e<0||e>=this.numDashes)throw new Error('Index must be greater than or equal to zero, but less than the value of property "numDashes".');return this._linetype.pattern[e].elementLength}},BD=class extends Op{constructor(e){super(),this.name=e.name,this._textStyle=e,this._textStyle.font=this.getFileNameWithoutExtension(this._textStyle.font||this._textStyle.extendedFont||this.name),this._isVertical=!1}get obliquingAngle(){return this._textStyle.obliqueAngle}set obliquingAngle(e){this._textStyle.obliqueAngle=e}get priorSize(){return this._textStyle.lastHeight}set priorSize(e){this._textStyle.lastHeight=e}get textSize(){return this._textStyle.fixedTextHeight}set textSize(e){this._textStyle.fixedTextHeight=e}get xScale(){return this._textStyle.widthFactor}set xScale(e){this._textStyle.widthFactor=e}get isVertical(){return this._isVertical}set isVertical(e){this._isVertical=e}get fileName(){return this._textStyle.font}set fileName(e){this._textStyle.font=e}get bigFontFileName(){return this._textStyle.bigFont}set bigFontFileName(e){this._textStyle.bigFont=e}get textStyle(){return this._textStyle}getFileNameWithoutExtension(e){const n=e.split("/").pop();if(n){const r=n.lastIndexOf(".");return r===-1?n:n.substring(0,r)}return e}};const EG={center:new Dn,viewDirectionFromTarget:new Yt(0,0,1),viewTarget:new Yt(0,0,0),lensLength:500,frontClippingPlane:0,backClippingPlane:0,viewHeight:1e3,viewTwistAngle:0,frozenLayers:[],styleSheet:"",renderMode:JN.OPTIMIZED_2D,viewMode:0,ucsIconSetting:0,ucsOrigin:new Yt(0,0,0),ucsXAxis:new Yt(1,0,0),ucsYAxis:new Yt(0,1,0),orthographicType:QN.TOP,shadePlotSetting:0,shadePlotObjectId:void 0,visualStyleObjectId:void 0,isDefaultLightingOn:!1,defaultLightingType:eD.ONE_DISTANT_LIGHT,brightness:0,contrast:0,ambientColor:void 0};let UD=class extends Op{constructor(){super(),this._circleSides=100,this._center=new Dn,this._lowerLeftCorner=new Dn(0,0),this._upperRightCorner=new Dn(1,1),this._snapBase=new Dn(0,0),this._snapAngle=0,this._snapSpacing=new Dn(0,0),this._standardFlag=0,this._gridSpacing=new Dn,this._gridMajor=10,this._gsView=EG}get circleSides(){return this._circleSides}set circleSides(e){this._circleSides=e}get center(){return this._center}get lowerLeftCorner(){return this._lowerLeftCorner}set lowerLeftCorner(e){this._lowerLeftCorner.copy(e)}get upperRightCorner(){return this._upperRightCorner}set upperRightCorner(e){this._upperRightCorner.copy(e)}get snapBase(){return this._snapBase}set snapBase(e){this._snapBase.copy(e)}get snapAngle(){return this._snapAngle}set snapAngle(e){this._snapAngle=e}get snapIncrements(){return this._snapSpacing}set snapIncrements(e){this._snapSpacing.copy(e)}get gridMajor(){return this._gridMajor}set gridMajor(e){this._gridMajor=e}get gridIncrements(){return this._gridSpacing}set gridIncrements(e){this._gridSpacing.copy(e)}get standardFlag(){return this._standardFlag}set standardFlag(e){this._standardFlag=e}get snapEnabled(){return!!(this._standardFlag&256)}get backgroundObjectId(){return this._backgroundObjectId}set backgroundObjectId(e){this._backgroundObjectId=e}get gsView(){return this._gsView}},CG=class{constructor(){this.events={layoutCreated:new Tr,layoutRemoved:new Tr,layoutRenamed:new Tr,layoutSwitched:new Tr}}countLayouts(e){return this.getWorkingDatabase(e).dictionaries.layouts.numEntries}findLayoutNamed(e,n){return this.getWorkingDatabase(n).dictionaries.layouts.getAt(e)}findActiveLayout(){const e=this.getActiveLayout();return e?e.layoutName:"Model"}setCurrentLayoutId(e,n){const r=this.getWorkingDatabase(n),s=r.dictionaries.layouts.getIdAt(e);return this.setCurrentLayoutInternal(s,r)}setCurrentLayoutBtrId(e,n){const r=this.getWorkingDatabase(n),s=r.dictionaries.layouts.getBtrIdAt(e);return this.setCurrentLayoutInternal(s,r)}setCurrentLayout(e,n){const r=this.getWorkingDatabase(n),s=r.dictionaries.layouts.getAt(e);return this.setCurrentLayoutInternal(s,r)}renameLayout(e,n,r){const s=this.getWorkingDatabase(r).dictionaries.layouts.getAt(e);return s?(s.layoutName=n,this.events.layoutRenamed.dispatch({layout:s,oldName:e,newName:n}),!0):!1}layoutExists(e,n){return this.getWorkingDatabase(n).dictionaries.layouts.has(e)}deleteLayout(e,n){const r=this.getWorkingDatabase(n).dictionaries.layouts,s=r.getAt(e);let i=!1;return s&&(i=r.remove(e),i&&this.events.layoutRemoved.dispatch({layout:s})),i}createLayout(e,n){const r=this.getWorkingDatabase(n),s=new C1;s.layoutName=e,s.tabOrder=r.dictionaries.layouts.maxTabOrder;const i=new wa;return i.name=`*Paper_Space${s.tabOrder}`,r.tables.blockTable.add(i),r.dictionaries.layouts.setAt(e,s),this.events.layoutCreated.dispatch({layout:s}),{layout:s,btr:i}}getActiveLayout(e){const n=this.getWorkingDatabase(e);return n.dictionaries.layouts.getBtrIdAt(n.currentSpaceId)}getWorkingDatabase(e){return e||Dp().workingDatabase}setCurrentLayoutInternal(e,n){return e?(this.events.layoutSwitched.dispatch({layout:e}),n.currentSpaceId=e.blockTableRecordId,!0):!1}};function Dp(){return TG.instance}const sS=class{constructor(){this._workingDatabase=null,this._layoutManager=new CG}get workingDatabase(){if(this._workingDatabase==null)throw new Error("The current working database must be set before using it!");return this._workingDatabase}set workingDatabase(e){this._workingDatabase=e}get layoutManager(){return this._layoutManager}};sS.instance=new sS;let TG=sS;/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const dC="172",uc={ROTATE:0,DOLLY:1,PAN:2},Mf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},MG=0,YA=1,AG=2,zD=1,kG=2,Zl=3,Ru=0,lo=1,dl=2,Mu=0,Lf=1,XA=2,ZA=3,JA=4,IG=5,Sd=100,PG=101,RG=102,LG=103,OG=104,NG=200,DG=201,FG=202,BG=203,iS=204,oS=205,UG=206,zG=207,$G=208,VG=209,HG=210,GG=211,WG=212,jG=213,KG=214,aS=0,lS=1,cS=2,Qf=3,uS=4,dS=5,hS=6,fS=7,$D=0,qG=1,YG=2,Au=0,XG=1,ZG=2,JG=3,QG=4,eW=5,tW=6,nW=7,VD=300,ep=301,tp=302,pS=303,mS=304,T1=306,gS=1e3,Rd=1001,vS=1002,Pa=1003,rW=1004,d0=1005,Ta=1006,sw=1007,Ld=1008,yc=1009,HD=1010,GD=1011,hg=1012,hC=1013,Yd=1014,ic=1015,fv=1016,fC=1017,pC=1018,np=1020,WD=35902,jD=1021,KD=1022,Ma=1023,qD=1024,YD=1025,Of=1026,rp=1027,XD=1028,mC=1029,ZD=1030,gC=1031,vC=1033,zy=33776,$y=33777,Vy=33778,Hy=33779,yS=35840,bS=35841,_S=35842,wS=35843,xS=36196,SS=37492,ES=37496,CS=37808,TS=37809,MS=37810,AS=37811,kS=37812,IS=37813,PS=37814,RS=37815,LS=37816,OS=37817,NS=37818,DS=37819,FS=37820,BS=37821,Gy=36492,US=36494,zS=36495,JD=36283,$S=36284,VS=36285,HS=36286,sW=3200,iW=3201,oW=0,aW=1,yu="",ko="srgb",sp="srgb-linear",wb="linear",Vr="srgb",Lh=7680,QA=519,lW=512,cW=513,uW=514,QD=515,dW=516,hW=517,fW=518,pW=519,GS=35044,e3="300 es",oc=2e3,xb=2001;class hh{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const s=r.slice(0);for(let i=0,o=s.length;i<o;i++)s[i].call(this,e);e.target=null}}}const _i=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let t3=1234567;const Vm=Math.PI/180,fg=180/Math.PI;function gl(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(_i[t&255]+_i[t>>8&255]+_i[t>>16&255]+_i[t>>24&255]+"-"+_i[e&255]+_i[e>>8&255]+"-"+_i[e>>16&15|64]+_i[e>>24&255]+"-"+_i[n&63|128]+_i[n>>8&255]+"-"+_i[n>>16&255]+_i[n>>24&255]+_i[r&255]+_i[r>>8&255]+_i[r>>16&255]+_i[r>>24&255]).toLowerCase()}function sr(t,e,n){return Math.max(e,Math.min(n,t))}function yC(t,e){return(t%e+e)%e}function mW(t,e,n,r,s){return r+(t-e)*(s-r)/(n-e)}function gW(t,e,n){return t!==e?(n-t)/(e-t):0}function Hm(t,e,n){return(1-n)*t+n*e}function vW(t,e,n,r){return Hm(t,e,1-Math.exp(-n*r))}function yW(t,e=1){return e-Math.abs(yC(t,e*2)-e)}function bW(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function _W(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function wW(t,e){return t+Math.floor(Math.random()*(e-t+1))}function xW(t,e){return t+Math.random()*(e-t)}function SW(t){return t*(.5-Math.random())}function EW(t){t!==void 0&&(t3=t);let e=t3+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function CW(t){return t*Vm}function TW(t){return t*fg}function MW(t){return(t&t-1)===0&&t!==0}function AW(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function kW(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function IW(t,e,n,r,s){const i=Math.cos,o=Math.sin,a=i(n/2),l=o(n/2),c=i((e+r)/2),u=o((e+r)/2),d=i((e-r)/2),h=o((e-r)/2),f=i((r-e)/2),m=o((r-e)/2);switch(s){case"XYX":t.set(a*u,l*d,l*h,a*c);break;case"YZY":t.set(l*h,a*u,l*d,a*c);break;case"ZXZ":t.set(l*d,l*h,a*u,a*c);break;case"XZX":t.set(a*u,l*m,l*f,a*c);break;case"YXY":t.set(l*f,a*u,l*m,a*c);break;case"ZYZ":t.set(l*m,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Ca(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Dr(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const WS={DEG2RAD:Vm,RAD2DEG:fg,generateUUID:gl,clamp:sr,euclideanModulo:yC,mapLinear:mW,inverseLerp:gW,lerp:Hm,damp:vW,pingpong:yW,smoothstep:bW,smootherstep:_W,randInt:wW,randFloat:xW,randFloatSpread:SW,seededRandom:EW,degToRad:CW,radToDeg:TW,isPowerOfTwo:MW,ceilPowerOfTwo:AW,floorPowerOfTwo:kW,setQuaternionFromProperEuler:IW,normalize:Dr,denormalize:Ca};class Dt{constructor(e=0,n=0){Dt.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6],this.y=s[1]*n+s[4]*r+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=sr(this.x,e.x,n.x),this.y=sr(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=sr(this.x,e,n),this.y=sr(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(sr(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(sr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),s=Math.sin(n),i=this.x-e.x,o=this.y-e.y;return this.x=i*r-o*s+e.x,this.y=i*s+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class tr{constructor(e,n,r,s,i,o,a,l,c){tr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,s,i,o,a,l,c)}set(e,n,r,s,i,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=s,u[2]=a,u[3]=n,u[4]=i,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,s=n.elements,i=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],h=r[2],f=r[5],m=r[8],v=s[0],y=s[3],g=s[6],S=s[1],_=s[4],w=s[7],E=s[2],C=s[5],T=s[8];return i[0]=o*v+a*S+l*E,i[3]=o*y+a*_+l*C,i[6]=o*g+a*w+l*T,i[1]=c*v+u*S+d*E,i[4]=c*y+u*_+d*C,i[7]=c*g+u*w+d*T,i[2]=h*v+f*S+m*E,i[5]=h*y+f*_+m*C,i[8]=h*g+f*w+m*T,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],s=e[2],i=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-r*i*u+r*a*l+s*i*c-s*o*l}invert(){const e=this.elements,n=e[0],r=e[1],s=e[2],i=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*i,f=c*i-o*l,m=n*d+r*h+s*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/m;return e[0]=d*v,e[1]=(s*c-u*r)*v,e[2]=(a*r-s*o)*v,e[3]=h*v,e[4]=(u*n-s*l)*v,e[5]=(s*i-a*n)*v,e[6]=f*v,e[7]=(r*l-c*n)*v,e[8]=(o*n-r*i)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,s,i,o,a){const l=Math.cos(i),c=Math.sin(i);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-s*c,s*l,-s*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(iw.makeScale(e,n)),this}rotate(e){return this.premultiply(iw.makeRotation(-e)),this}translate(e,n){return this.premultiply(iw.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let s=0;s<9;s++)if(n[s]!==r[s])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const iw=new tr;function e6(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function pg(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function PW(){const t=pg("canvas");return t.style.display="block",t}const n3={};function gf(t){t in n3||(n3[t]=!0,console.warn(t))}function RW(t,e,n){return new Promise(function(r,s){function i(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:s();break;case t.TIMEOUT_EXPIRED:setTimeout(i,n);break;default:r()}}setTimeout(i,n)})}function LW(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function OW(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const r3=new tr().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),s3=new tr().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function NW(){const t={enabled:!0,workingColorSpace:sp,spaces:{},convert:function(s,i,o){return this.enabled===!1||i===o||!i||!o||(this.spaces[i].transfer===Vr&&(s.r=dc(s.r),s.g=dc(s.g),s.b=dc(s.b)),this.spaces[i].primaries!==this.spaces[o].primaries&&(s.applyMatrix3(this.spaces[i].toXYZ),s.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Vr&&(s.r=Nf(s.r),s.g=Nf(s.g),s.b=Nf(s.b))),s},fromWorkingColorSpace:function(s,i){return this.convert(s,this.workingColorSpace,i)},toWorkingColorSpace:function(s,i){return this.convert(s,i,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===yu?wb:this.spaces[s].transfer},getLuminanceCoefficients:function(s,i=this.workingColorSpace){return s.fromArray(this.spaces[i].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,i,o){return s.copy(this.spaces[i].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[sp]:{primaries:e,whitePoint:r,transfer:wb,toXYZ:r3,fromXYZ:s3,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:ko},outputColorSpaceConfig:{drawingBufferColorSpace:ko}},[ko]:{primaries:e,whitePoint:r,transfer:Vr,toXYZ:r3,fromXYZ:s3,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:ko}}}),t}const Sr=NW();function dc(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function Nf(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Oh;class DW{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Oh===void 0&&(Oh=pg("canvas")),Oh.width=e.width,Oh.height=e.height;const r=Oh.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Oh}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=pg("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const s=r.getImageData(0,0,e.width,e.height),i=s.data;for(let o=0;o<i.length;o++)i[o]=dc(i[o]/255)*255;return r.putImageData(s,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(dc(n[r]/255)*255):n[r]=dc(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let FW=0;class t6{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:FW++}),this.uuid=gl(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},s=this.data;if(s!==null){let i;if(Array.isArray(s)){i=[];for(let o=0,a=s.length;o<a;o++)s[o].isDataTexture?i.push(ow(s[o].image)):i.push(ow(s[o]))}else i=ow(s);r.url=i}return n||(e.images[this.uuid]=r),r}}function ow(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?DW.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let BW=0;class Ti extends hh{constructor(e=Ti.DEFAULT_IMAGE,n=Ti.DEFAULT_MAPPING,r=Rd,s=Rd,i=Ta,o=Ld,a=Ma,l=yc,c=Ti.DEFAULT_ANISOTROPY,u=yu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:BW++}),this.uuid=gl(),this.name="",this.source=new t6(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=i,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Dt(0,0),this.repeat=new Dt(1,1),this.center=new Dt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new tr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==VD)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case gS:e.x=e.x-Math.floor(e.x);break;case Rd:e.x=e.x<0?0:1;break;case vS:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case gS:e.y=e.y-Math.floor(e.y);break;case Rd:e.y=e.y<0?0:1;break;case vS:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ti.DEFAULT_IMAGE=null;Ti.DEFAULT_MAPPING=VD;Ti.DEFAULT_ANISOTROPY=1;class ps{constructor(e=0,n=0,r=0,s=1){ps.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,s){return this.x=e,this.y=n,this.z=r,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,s=this.z,i=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*s+o[12]*i,this.y=o[1]*n+o[5]*r+o[9]*s+o[13]*i,this.z=o[2]*n+o[6]*r+o[10]*s+o[14]*i,this.w=o[3]*n+o[7]*r+o[11]*s+o[15]*i,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,s,i;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],m=l[9],v=l[2],y=l[6],g=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-v)<.01&&Math.abs(m-y)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+v)<.1&&Math.abs(m+y)<.1&&Math.abs(c+f+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const _=(c+1)/2,w=(f+1)/2,E=(g+1)/2,C=(u+h)/4,T=(d+v)/4,I=(m+y)/4;return _>w&&_>E?_<.01?(r=0,s=.707106781,i=.707106781):(r=Math.sqrt(_),s=C/r,i=T/r):w>E?w<.01?(r=.707106781,s=0,i=.707106781):(s=Math.sqrt(w),r=C/s,i=I/s):E<.01?(r=.707106781,s=.707106781,i=0):(i=Math.sqrt(E),r=T/i,s=I/i),this.set(r,s,i,n),this}let S=Math.sqrt((y-m)*(y-m)+(d-v)*(d-v)+(h-u)*(h-u));return Math.abs(S)<.001&&(S=1),this.x=(y-m)/S,this.y=(d-v)/S,this.z=(h-u)/S,this.w=Math.acos((c+f+g-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=sr(this.x,e.x,n.x),this.y=sr(this.y,e.y,n.y),this.z=sr(this.z,e.z,n.z),this.w=sr(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=sr(this.x,e,n),this.y=sr(this.y,e,n),this.z=sr(this.z,e,n),this.w=sr(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(sr(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class UW extends hh{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new ps(0,0,e,n),this.scissorTest=!1,this.viewport=new ps(0,0,e,n);const s={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ta,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const i=new Ti(s,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);i.flipY=!1,i.generateMipmaps=r.generateMipmaps,i.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=i.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let s=0,i=this.textures.length;s<i;s++)this.textures[s].image.width=e,this.textures[s].image.height=n,this.textures[s].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,s=e.textures.length;r<s;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0,this.textures[r].renderTarget=this;const n=Object.assign({},e.texture.image);return this.texture.source=new t6(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Xd extends UW{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class n6 extends Ti{constructor(e=null,n=1,r=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:s},this.magFilter=Pa,this.minFilter=Pa,this.wrapR=Rd,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class zW extends Ti{constructor(e=null,n=1,r=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:s},this.magFilter=Pa,this.minFilter=Pa,this.wrapR=Rd,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Lu{constructor(e=0,n=0,r=0,s=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=s}static slerpFlat(e,n,r,s,i,o,a){let l=r[s+0],c=r[s+1],u=r[s+2],d=r[s+3];const h=i[o+0],f=i[o+1],m=i[o+2],v=i[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(a===1){e[n+0]=h,e[n+1]=f,e[n+2]=m,e[n+3]=v;return}if(d!==v||l!==h||c!==f||u!==m){let y=1-a;const g=l*h+c*f+u*m+d*v,S=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){const E=Math.sqrt(_),C=Math.atan2(E,g*S);y=Math.sin(y*C)/E,a=Math.sin(a*C)/E}const w=a*S;if(l=l*y+h*w,c=c*y+f*w,u=u*y+m*w,d=d*y+v*w,y===1-a){const E=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=E,c*=E,u*=E,d*=E}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,r,s,i,o){const a=r[s],l=r[s+1],c=r[s+2],u=r[s+3],d=i[o],h=i[o+1],f=i[o+2],m=i[o+3];return e[n]=a*m+u*d+l*f-c*h,e[n+1]=l*m+u*h+c*d-a*f,e[n+2]=c*m+u*f+a*h-l*d,e[n+3]=u*m-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,s){return this._x=e,this._y=n,this._z=r,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,s=e._y,i=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(s/2),d=a(i/2),h=l(r/2),f=l(s/2),m=l(i/2);switch(o){case"XYZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"YXZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"ZXY":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"ZYX":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"YZX":this._x=h*u*d+c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d-h*f*m;break;case"XZY":this._x=h*u*d-c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d+h*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,s=Math.sin(r);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],s=n[4],i=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],d=n[10],h=r+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(i-c)*f,this._z=(o-s)*f}else if(r>a&&r>d){const f=2*Math.sqrt(1+r-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(s+o)/f,this._z=(i+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-r-d);this._w=(i-c)/f,this._x=(s+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-r-a);this._w=(o-s)/f,this._x=(i+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(sr(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const s=Math.min(1,n/r);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,s=e._y,i=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+o*a+s*c-i*l,this._y=s*u+o*l+i*a-r*c,this._z=i*u+o*c+r*l-s*a,this._w=o*u-r*a-s*l-i*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,s=this._y,i=this._z,o=this._w;let a=o*e._w+r*e._x+s*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=s,this._z=i,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-n;return this._w=f*o+n*this._w,this._x=f*r+n*this._x,this._y=f*s+n*this._y,this._z=f*i+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c;return this._w=o*d+this._w*h,this._x=r*d+this._x*h,this._y=s*d+this._y*h,this._z=i*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),s=Math.sqrt(1-r),i=Math.sqrt(r);return this.set(s*Math.sin(e),s*Math.cos(e),i*Math.sin(n),i*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ze{constructor(e=0,n=0,r=0){Ze.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(i3.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(i3.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,s=this.z,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6]*s,this.y=i[1]*n+i[4]*r+i[7]*s,this.z=i[2]*n+i[5]*r+i[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,s=this.z,i=e.elements,o=1/(i[3]*n+i[7]*r+i[11]*s+i[15]);return this.x=(i[0]*n+i[4]*r+i[8]*s+i[12])*o,this.y=(i[1]*n+i[5]*r+i[9]*s+i[13])*o,this.z=(i[2]*n+i[6]*r+i[10]*s+i[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,s=this.z,i=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*s-a*r),u=2*(a*n-i*s),d=2*(i*r-o*n);return this.x=n+l*c+o*d-a*u,this.y=r+l*u+a*c-i*d,this.z=s+l*d+i*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,s=this.z,i=e.elements;return this.x=i[0]*n+i[4]*r+i[8]*s,this.y=i[1]*n+i[5]*r+i[9]*s,this.z=i[2]*n+i[6]*r+i[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=sr(this.x,e.x,n.x),this.y=sr(this.y,e.y,n.y),this.z=sr(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=sr(this.x,e,n),this.y=sr(this.y,e,n),this.z=sr(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(sr(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,s=e.y,i=e.z,o=n.x,a=n.y,l=n.z;return this.x=s*l-i*a,this.y=i*o-r*l,this.z=r*a-s*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return aw.copy(this).projectOnVector(e),this.sub(aw)}reflect(e){return this.sub(aw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(sr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,s=this.z-e.z;return n*n+r*r+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const s=Math.sin(n)*e;return this.x=s*Math.sin(r),this.y=Math.cos(n)*e,this.z=s*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=s,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const aw=new Ze,i3=new Lu;class us{constructor(e=new Ze(1/0,1/0,1/0),n=new Ze(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(va.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(va.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=va.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const i=r.getAttribute("position");if(n===!0&&i!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=i.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,va):va.fromBufferAttribute(i,o),va.applyMatrix4(e.matrixWorld),this.expandByPoint(va);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),h0.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),h0.copy(r.boundingBox)),h0.applyMatrix4(e.matrixWorld),this.union(h0)}const s=e.children;for(let i=0,o=s.length;i<o;i++)this.expandByObject(s[i],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,va),va.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(sm),f0.subVectors(this.max,sm),Nh.subVectors(e.a,sm),Dh.subVectors(e.b,sm),Fh.subVectors(e.c,sm),Xc.subVectors(Dh,Nh),Zc.subVectors(Fh,Dh),id.subVectors(Nh,Fh);let n=[0,-Xc.z,Xc.y,0,-Zc.z,Zc.y,0,-id.z,id.y,Xc.z,0,-Xc.x,Zc.z,0,-Zc.x,id.z,0,-id.x,-Xc.y,Xc.x,0,-Zc.y,Zc.x,0,-id.y,id.x,0];return!lw(n,Nh,Dh,Fh,f0)||(n=[1,0,0,0,1,0,0,0,1],!lw(n,Nh,Dh,Fh,f0))?!1:(p0.crossVectors(Xc,Zc),n=[p0.x,p0.y,p0.z],lw(n,Nh,Dh,Fh,f0))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,va).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(va).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Vl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Vl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Vl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Vl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Vl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Vl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Vl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Vl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Vl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Vl=[new Ze,new Ze,new Ze,new Ze,new Ze,new Ze,new Ze,new Ze],va=new Ze,h0=new us,Nh=new Ze,Dh=new Ze,Fh=new Ze,Xc=new Ze,Zc=new Ze,id=new Ze,sm=new Ze,f0=new Ze,p0=new Ze,od=new Ze;function lw(t,e,n,r,s){for(let i=0,o=t.length-3;i<=o;i+=3){od.fromArray(t,i);const a=s.x*Math.abs(od.x)+s.y*Math.abs(od.y)+s.z*Math.abs(od.z),l=e.dot(od),c=n.dot(od),u=r.dot(od);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const $W=new us,im=new Ze,cw=new Ze;class co{constructor(e=new Ze,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):$W.setFromPoints(e).getCenter(r);let s=0;for(let i=0,o=e.length;i<o;i++)s=Math.max(s,r.distanceToSquared(e[i]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;im.subVectors(e,this.center);const n=im.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),s=(r-this.radius)*.5;this.center.addScaledVector(im,s/r),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(cw.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(im.copy(e.center).add(cw)),this.expandByPoint(im.copy(e.center).sub(cw))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Hl=new Ze,uw=new Ze,m0=new Ze,Jc=new Ze,dw=new Ze,g0=new Ze,hw=new Ze;class pv{constructor(e=new Ze,n=new Ze(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Hl)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Hl.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Hl.copy(this.origin).addScaledVector(this.direction,n),Hl.distanceToSquared(e))}distanceSqToSegment(e,n,r,s){uw.copy(e).add(n).multiplyScalar(.5),m0.copy(n).sub(e).normalize(),Jc.copy(this.origin).sub(uw);const i=e.distanceTo(n)*.5,o=-this.direction.dot(m0),a=Jc.dot(this.direction),l=-Jc.dot(m0),c=Jc.lengthSq(),u=Math.abs(1-o*o);let d,h,f,m;if(u>0)if(d=o*l-a,h=o*a-l,m=i*u,d>=0)if(h>=-m)if(h<=m){const v=1/u;d*=v,h*=v,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=i,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h=-i,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-m?(d=Math.max(0,-(-o*i+a)),h=d>0?-i:Math.min(Math.max(-i,-l),i),f=-d*d+h*(h+2*l)+c):h<=m?(d=0,h=Math.min(Math.max(-i,-l),i),f=h*(h+2*l)+c):(d=Math.max(0,-(o*i+a)),h=d>0?i:Math.min(Math.max(-i,-l),i),f=-d*d+h*(h+2*l)+c);else h=o>0?-i:i,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),s&&s.copy(uw).addScaledVector(m0,h),f}intersectSphere(e,n){Hl.subVectors(e.center,this.origin);const r=Hl.dot(this.direction),s=Hl.dot(Hl)-r*r,i=e.radius*e.radius;if(s>i)return null;const o=Math.sqrt(i-s),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,s,i,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,s=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,s=(e.min.x-h.x)*c),u>=0?(i=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),r>o||i>s||((i>r||isNaN(r))&&(r=i),(o<s||isNaN(s))&&(s=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),r>l||a>s)||((a>r||r!==r)&&(r=a),(l<s||s!==s)&&(s=l),s<0)?null:this.at(r>=0?r:s,n)}intersectsBox(e){return this.intersectBox(e,Hl)!==null}intersectTriangle(e,n,r,s,i){dw.subVectors(n,e),g0.subVectors(r,e),hw.crossVectors(dw,g0);let o=this.direction.dot(hw),a;if(o>0){if(s)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Jc.subVectors(this.origin,e);const l=a*this.direction.dot(g0.crossVectors(Jc,g0));if(l<0)return null;const c=a*this.direction.dot(dw.cross(Jc));if(c<0||l+c>o)return null;const u=-a*Jc.dot(hw);return u<0?null:this.at(u/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Rr{constructor(e,n,r,s,i,o,a,l,c,u,d,h,f,m,v,y){Rr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,s,i,o,a,l,c,u,d,h,f,m,v,y)}set(e,n,r,s,i,o,a,l,c,u,d,h,f,m,v,y){const g=this.elements;return g[0]=e,g[4]=n,g[8]=r,g[12]=s,g[1]=i,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=u,g[10]=d,g[14]=h,g[3]=f,g[7]=m,g[11]=v,g[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Rr().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,s=1/Bh.setFromMatrixColumn(e,0).length(),i=1/Bh.setFromMatrixColumn(e,1).length(),o=1/Bh.setFromMatrixColumn(e,2).length();return n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n[3]=0,n[4]=r[4]*i,n[5]=r[5]*i,n[6]=r[6]*i,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,s=e.y,i=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(s),c=Math.sin(s),u=Math.cos(i),d=Math.sin(i);if(e.order==="XYZ"){const h=o*u,f=o*d,m=a*u,v=a*d;n[0]=l*u,n[4]=-l*d,n[8]=c,n[1]=f+m*c,n[5]=h-v*c,n[9]=-a*l,n[2]=v-h*c,n[6]=m+f*c,n[10]=o*l}else if(e.order==="YXZ"){const h=l*u,f=l*d,m=c*u,v=c*d;n[0]=h+v*a,n[4]=m*a-f,n[8]=o*c,n[1]=o*d,n[5]=o*u,n[9]=-a,n[2]=f*a-m,n[6]=v+h*a,n[10]=o*l}else if(e.order==="ZXY"){const h=l*u,f=l*d,m=c*u,v=c*d;n[0]=h-v*a,n[4]=-o*d,n[8]=m+f*a,n[1]=f+m*a,n[5]=o*u,n[9]=v-h*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const h=o*u,f=o*d,m=a*u,v=a*d;n[0]=l*u,n[4]=m*c-f,n[8]=h*c+v,n[1]=l*d,n[5]=v*c+h,n[9]=f*c-m,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const h=o*l,f=o*c,m=a*l,v=a*c;n[0]=l*u,n[4]=v-h*d,n[8]=m*d+f,n[1]=d,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=f*d+m,n[10]=h-v*d}else if(e.order==="XZY"){const h=o*l,f=o*c,m=a*l,v=a*c;n[0]=l*u,n[4]=-d,n[8]=c*u,n[1]=h*d+v,n[5]=o*u,n[9]=f*d-m,n[2]=m*d-f,n[6]=a*u,n[10]=v*d+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(VW,e,HW)}lookAt(e,n,r){const s=this.elements;return So.subVectors(e,n),So.lengthSq()===0&&(So.z=1),So.normalize(),Qc.crossVectors(r,So),Qc.lengthSq()===0&&(Math.abs(r.z)===1?So.x+=1e-4:So.z+=1e-4,So.normalize(),Qc.crossVectors(r,So)),Qc.normalize(),v0.crossVectors(So,Qc),s[0]=Qc.x,s[4]=v0.x,s[8]=So.x,s[1]=Qc.y,s[5]=v0.y,s[9]=So.y,s[2]=Qc.z,s[6]=v0.z,s[10]=So.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,s=n.elements,i=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],h=r[9],f=r[13],m=r[2],v=r[6],y=r[10],g=r[14],S=r[3],_=r[7],w=r[11],E=r[15],C=s[0],T=s[4],I=s[8],k=s[12],M=s[1],L=s[5],N=s[9],G=s[13],V=s[2],X=s[6],F=s[10],$=s[14],O=s[3],z=s[7],re=s[11],q=s[15];return i[0]=o*C+a*M+l*V+c*O,i[4]=o*T+a*L+l*X+c*z,i[8]=o*I+a*N+l*F+c*re,i[12]=o*k+a*G+l*$+c*q,i[1]=u*C+d*M+h*V+f*O,i[5]=u*T+d*L+h*X+f*z,i[9]=u*I+d*N+h*F+f*re,i[13]=u*k+d*G+h*$+f*q,i[2]=m*C+v*M+y*V+g*O,i[6]=m*T+v*L+y*X+g*z,i[10]=m*I+v*N+y*F+g*re,i[14]=m*k+v*G+y*$+g*q,i[3]=S*C+_*M+w*V+E*O,i[7]=S*T+_*L+w*X+E*z,i[11]=S*I+_*N+w*F+E*re,i[15]=S*k+_*G+w*$+E*q,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],s=e[8],i=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14],m=e[3],v=e[7],y=e[11],g=e[15];return m*(+i*l*d-s*c*d-i*a*h+r*c*h+s*a*f-r*l*f)+v*(+n*l*f-n*c*h+i*o*h-s*o*f+s*c*u-i*l*u)+y*(+n*c*d-n*a*f-i*o*d+r*o*f+i*a*u-r*c*u)+g*(-s*a*u-n*l*d+n*a*h+s*o*d-r*o*h+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=n,s[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],s=e[2],i=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],m=e[12],v=e[13],y=e[14],g=e[15],S=d*y*c-v*h*c+v*l*f-a*y*f-d*l*g+a*h*g,_=m*h*c-u*y*c-m*l*f+o*y*f+u*l*g-o*h*g,w=u*v*c-m*d*c+m*a*f-o*v*f-u*a*g+o*d*g,E=m*d*l-u*v*l-m*a*h+o*v*h+u*a*y-o*d*y,C=n*S+r*_+s*w+i*E;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/C;return e[0]=S*T,e[1]=(v*h*i-d*y*i-v*s*f+r*y*f+d*s*g-r*h*g)*T,e[2]=(a*y*i-v*l*i+v*s*c-r*y*c-a*s*g+r*l*g)*T,e[3]=(d*l*i-a*h*i-d*s*c+r*h*c+a*s*f-r*l*f)*T,e[4]=_*T,e[5]=(u*y*i-m*h*i+m*s*f-n*y*f-u*s*g+n*h*g)*T,e[6]=(m*l*i-o*y*i-m*s*c+n*y*c+o*s*g-n*l*g)*T,e[7]=(o*h*i-u*l*i+u*s*c-n*h*c-o*s*f+n*l*f)*T,e[8]=w*T,e[9]=(m*d*i-u*v*i-m*r*f+n*v*f+u*r*g-n*d*g)*T,e[10]=(o*v*i-m*a*i+m*r*c-n*v*c-o*r*g+n*a*g)*T,e[11]=(u*a*i-o*d*i-u*r*c+n*d*c+o*r*f-n*a*f)*T,e[12]=E*T,e[13]=(u*v*s-m*d*s+m*r*h-n*v*h-u*r*y+n*d*y)*T,e[14]=(m*a*s-o*v*s-m*r*l+n*v*l+o*r*y-n*a*y)*T,e[15]=(o*d*s-u*a*s+u*r*l-n*d*l-o*r*h+n*a*h)*T,this}scale(e){const n=this.elements,r=e.x,s=e.y,i=e.z;return n[0]*=r,n[4]*=s,n[8]*=i,n[1]*=r,n[5]*=s,n[9]*=i,n[2]*=r,n[6]*=s,n[10]*=i,n[3]*=r,n[7]*=s,n[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,s))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),s=Math.sin(n),i=1-r,o=e.x,a=e.y,l=e.z,c=i*o,u=i*a;return this.set(c*o+r,c*a-s*l,c*l+s*a,0,c*a+s*l,u*a+r,u*l-s*o,0,c*l-s*a,u*l+s*o,i*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,s,i,o){return this.set(1,r,i,0,e,1,o,0,n,s,1,0,0,0,0,1),this}compose(e,n,r){const s=this.elements,i=n._x,o=n._y,a=n._z,l=n._w,c=i+i,u=o+o,d=a+a,h=i*c,f=i*u,m=i*d,v=o*u,y=o*d,g=a*d,S=l*c,_=l*u,w=l*d,E=r.x,C=r.y,T=r.z;return s[0]=(1-(v+g))*E,s[1]=(f+w)*E,s[2]=(m-_)*E,s[3]=0,s[4]=(f-w)*C,s[5]=(1-(h+g))*C,s[6]=(y+S)*C,s[7]=0,s[8]=(m+_)*T,s[9]=(y-S)*T,s[10]=(1-(h+v))*T,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,n,r){const s=this.elements;let i=Bh.set(s[0],s[1],s[2]).length();const o=Bh.set(s[4],s[5],s[6]).length(),a=Bh.set(s[8],s[9],s[10]).length();this.determinant()<0&&(i=-i),e.x=s[12],e.y=s[13],e.z=s[14],ya.copy(this);const c=1/i,u=1/o,d=1/a;return ya.elements[0]*=c,ya.elements[1]*=c,ya.elements[2]*=c,ya.elements[4]*=u,ya.elements[5]*=u,ya.elements[6]*=u,ya.elements[8]*=d,ya.elements[9]*=d,ya.elements[10]*=d,n.setFromRotationMatrix(ya),r.x=i,r.y=o,r.z=a,this}makePerspective(e,n,r,s,i,o,a=oc){const l=this.elements,c=2*i/(n-e),u=2*i/(r-s),d=(n+e)/(n-e),h=(r+s)/(r-s);let f,m;if(a===oc)f=-(o+i)/(o-i),m=-2*o*i/(o-i);else if(a===xb)f=-o/(o-i),m=-o*i/(o-i);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,s,i,o,a=oc){const l=this.elements,c=1/(n-e),u=1/(r-s),d=1/(o-i),h=(n+e)*c,f=(r+s)*u;let m,v;if(a===oc)m=(o+i)*d,v=-2*d;else if(a===xb)m=i*d,v=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=v,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let s=0;s<16;s++)if(n[s]!==r[s])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Bh=new Ze,ya=new Rr,VW=new Ze(0,0,0),HW=new Ze(1,1,1),Qc=new Ze,v0=new Ze,So=new Ze,o3=new Rr,a3=new Lu;class wl{constructor(e=0,n=0,r=0,s=wl.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,s=this._order){return this._x=e,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const s=e.elements,i=s[0],o=s[4],a=s[8],l=s[1],c=s[5],u=s[9],d=s[2],h=s[6],f=s[10];switch(n){case"XYZ":this._y=Math.asin(sr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-sr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,i),this._z=0);break;case"ZXY":this._x=Math.asin(sr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,i));break;case"ZYX":this._y=Math.asin(-sr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,i)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(sr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,i)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-sr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return o3.makeRotationFromQuaternion(e),this.setFromRotationMatrix(o3,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return a3.setFromEuler(this),this.setFromQuaternion(a3,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}wl.DEFAULT_ORDER="XYZ";class bC{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let GW=0;const l3=new Ze,Uh=new Lu,Gl=new Rr,y0=new Ze,om=new Ze,WW=new Ze,jW=new Lu,c3=new Ze(1,0,0),u3=new Ze(0,1,0),d3=new Ze(0,0,1),h3={type:"added"},KW={type:"removed"},zh={type:"childadded",child:null},fw={type:"childremoved",child:null};class Gs extends hh{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:GW++}),this.uuid=gl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gs.DEFAULT_UP.clone();const e=new Ze,n=new wl,r=new Lu,s=new Ze(1,1,1);function i(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(i),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Rr},normalMatrix:{value:new tr}}),this.matrix=new Rr,this.matrixWorld=new Rr,this.matrixAutoUpdate=Gs.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Gs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new bC,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Uh.setFromAxisAngle(e,n),this.quaternion.multiply(Uh),this}rotateOnWorldAxis(e,n){return Uh.setFromAxisAngle(e,n),this.quaternion.premultiply(Uh),this}rotateX(e){return this.rotateOnAxis(c3,e)}rotateY(e){return this.rotateOnAxis(u3,e)}rotateZ(e){return this.rotateOnAxis(d3,e)}translateOnAxis(e,n){return l3.copy(e).applyQuaternion(this.quaternion),this.position.add(l3.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(c3,e)}translateY(e){return this.translateOnAxis(u3,e)}translateZ(e){return this.translateOnAxis(d3,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Gl.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?y0.copy(e):y0.set(e,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),om.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Gl.lookAt(om,y0,this.up):Gl.lookAt(y0,om,this.up),this.quaternion.setFromRotationMatrix(Gl),s&&(Gl.extractRotation(s.matrixWorld),Uh.setFromRotationMatrix(Gl),this.quaternion.premultiply(Uh.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(h3),zh.child=e,this.dispatchEvent(zh),zh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(KW),fw.child=e,this.dispatchEvent(fw),fw.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Gl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Gl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Gl),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(h3),zh.child=e,this.dispatchEvent(zh),zh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const s=this.children;for(let i=0,o=s.length;i<o;i++)s[i].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(om,e,WW),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(om,jW,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const s=this.children;for(let i=0,o=s.length;i<o;i++)s[i].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function i(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=i(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];i(e.shapes,d)}else i(e.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(i(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(i(e.materials,this.material[l]));s.material=a}else s.material=i(e.materials,this.material);if(this.children.length>0){s.children=[];for(let a=0;a<this.children.length;a++)s.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];s.animations.push(i(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),h=o(e.skeletons),f=o(e.animations),m=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),h.length>0&&(r.skeletons=h),f.length>0&&(r.animations=f),m.length>0&&(r.nodes=m)}return r.object=s,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const s=e.children[r];this.add(s.clone())}return this}}Gs.DEFAULT_UP=new Ze(0,1,0);Gs.DEFAULT_MATRIX_AUTO_UPDATE=!0;Gs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ba=new Ze,Wl=new Ze,pw=new Ze,jl=new Ze,$h=new Ze,Vh=new Ze,f3=new Ze,mw=new Ze,gw=new Ze,vw=new Ze,yw=new ps,bw=new ps,_w=new ps;class qo{constructor(e=new Ze,n=new Ze,r=new Ze){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,s){s.subVectors(r,n),ba.subVectors(e,n),s.cross(ba);const i=s.lengthSq();return i>0?s.multiplyScalar(1/Math.sqrt(i)):s.set(0,0,0)}static getBarycoord(e,n,r,s,i){ba.subVectors(s,n),Wl.subVectors(r,n),pw.subVectors(e,n);const o=ba.dot(ba),a=ba.dot(Wl),l=ba.dot(pw),c=Wl.dot(Wl),u=Wl.dot(pw),d=o*c-a*a;if(d===0)return i.set(0,0,0),null;const h=1/d,f=(c*l-a*u)*h,m=(o*u-a*l)*h;return i.set(1-f-m,m,f)}static containsPoint(e,n,r,s){return this.getBarycoord(e,n,r,s,jl)===null?!1:jl.x>=0&&jl.y>=0&&jl.x+jl.y<=1}static getInterpolation(e,n,r,s,i,o,a,l){return this.getBarycoord(e,n,r,s,jl)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(i,jl.x),l.addScaledVector(o,jl.y),l.addScaledVector(a,jl.z),l)}static getInterpolatedAttribute(e,n,r,s,i,o){return yw.setScalar(0),bw.setScalar(0),_w.setScalar(0),yw.fromBufferAttribute(e,n),bw.fromBufferAttribute(e,r),_w.fromBufferAttribute(e,s),o.setScalar(0),o.addScaledVector(yw,i.x),o.addScaledVector(bw,i.y),o.addScaledVector(_w,i.z),o}static isFrontFacing(e,n,r,s){return ba.subVectors(r,n),Wl.subVectors(e,n),ba.cross(Wl).dot(s)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,s){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,n,r,s){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ba.subVectors(this.c,this.b),Wl.subVectors(this.a,this.b),ba.cross(Wl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return qo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return qo.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,s,i){return qo.getInterpolation(e,this.a,this.b,this.c,n,r,s,i)}containsPoint(e){return qo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return qo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,s=this.b,i=this.c;let o,a;$h.subVectors(s,r),Vh.subVectors(i,r),mw.subVectors(e,r);const l=$h.dot(mw),c=Vh.dot(mw);if(l<=0&&c<=0)return n.copy(r);gw.subVectors(e,s);const u=$h.dot(gw),d=Vh.dot(gw);if(u>=0&&d<=u)return n.copy(s);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(r).addScaledVector($h,o);vw.subVectors(e,i);const f=$h.dot(vw),m=Vh.dot(vw);if(m>=0&&f<=m)return n.copy(i);const v=f*c-l*m;if(v<=0&&c>=0&&m<=0)return a=c/(c-m),n.copy(r).addScaledVector(Vh,a);const y=u*m-f*d;if(y<=0&&d-u>=0&&f-m>=0)return f3.subVectors(i,s),a=(d-u)/(d-u+(f-m)),n.copy(s).addScaledVector(f3,a);const g=1/(y+v+h);return o=v*g,a=h*g,n.copy(r).addScaledVector($h,o).addScaledVector(Vh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const r6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},eu={h:0,s:0,l:0},b0={h:0,s:0,l:0};function ww(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let ar=class{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=ko){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Sr.toWorkingColorSpace(this,n),this}setRGB(e,n,r,s=Sr.workingColorSpace){return this.r=e,this.g=n,this.b=r,Sr.toWorkingColorSpace(this,s),this}setHSL(e,n,r,s=Sr.workingColorSpace){if(e=yC(e,1),n=sr(n,0,1),r=sr(r,0,1),n===0)this.r=this.g=this.b=r;else{const i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=ww(o,i,e+1/3),this.g=ww(o,i,e),this.b=ww(o,i,e-1/3)}return Sr.toWorkingColorSpace(this,s),this}setStyle(e,n=ko){function r(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const o=s[1],a=s[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,n);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,n);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=s[1],o=i.length;if(o===3)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(i,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=ko){const r=r6[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=dc(e.r),this.g=dc(e.g),this.b=dc(e.b),this}copyLinearToSRGB(e){return this.r=Nf(e.r),this.g=Nf(e.g),this.b=Nf(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ko){return Sr.fromWorkingColorSpace(wi.copy(this),e),Math.round(sr(wi.r*255,0,255))*65536+Math.round(sr(wi.g*255,0,255))*256+Math.round(sr(wi.b*255,0,255))}getHexString(e=ko){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Sr.workingColorSpace){Sr.fromWorkingColorSpace(wi.copy(this),n);const r=wi.r,s=wi.g,i=wi.b,o=Math.max(r,s,i),a=Math.min(r,s,i);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case r:l=(s-i)/d+(s<i?6:0);break;case s:l=(i-r)/d+2;break;case i:l=(r-s)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=Sr.workingColorSpace){return Sr.fromWorkingColorSpace(wi.copy(this),n),e.r=wi.r,e.g=wi.g,e.b=wi.b,e}getStyle(e=ko){Sr.fromWorkingColorSpace(wi.copy(this),e);const n=wi.r,r=wi.g,s=wi.b;return e!==ko?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(s*255)})`}offsetHSL(e,n,r){return this.getHSL(eu),this.setHSL(eu.h+e,eu.s+n,eu.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(eu),e.getHSL(b0);const r=Hm(eu.h,b0.h,n),s=Hm(eu.s,b0.s,n),i=Hm(eu.l,b0.l,n);return this.setHSL(r,s,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,s=this.b,i=e.elements;return this.r=i[0]*n+i[3]*r+i[6]*s,this.g=i[1]*n+i[4]*r+i[7]*s,this.b=i[2]*n+i[5]*r+i[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const wi=new ar;ar.NAMES=r6;let qW=0;class Wu extends hh{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:qW++}),this.uuid=gl(),this.name="",this.type="Material",this.blending=Lf,this.side=Ru,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=iS,this.blendDst=oS,this.blendEquation=Sd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ar(0,0,0),this.blendAlpha=0,this.depthFunc=Qf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=QA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Lh,this.stencilZFail=Lh,this.stencilZPass=Lh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const s=this[n];if(s===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(r):s&&s.isVector3&&r&&r.isVector3?s.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Lf&&(r.blending=this.blending),this.side!==Ru&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==iS&&(r.blendSrc=this.blendSrc),this.blendDst!==oS&&(r.blendDst=this.blendDst),this.blendEquation!==Sd&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Qf&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==QA&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Lh&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Lh&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Lh&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function s(i){const o=[];for(const a in i){const l=i[a];delete l.metadata,o.push(l)}return o}if(n){const i=s(e.textures),o=s(e.images);i.length>0&&(r.textures=i),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const s=n.length;r=new Array(s);for(let i=0;i!==s;++i)r[i]=n[i].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class mv extends Wu{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ar(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new wl,this.combine=$D,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ls=new Ze,_0=new Dt;class Ar{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=GS,this.updateRanges=[],this.gpuType=ic,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let s=0,i=this.itemSize;s<i;s++)this.array[e+s]=n.array[r+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)_0.fromBufferAttribute(this,n),_0.applyMatrix3(e),this.setXY(n,_0.x,_0.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Ls.fromBufferAttribute(this,n),Ls.applyMatrix3(e),this.setXYZ(n,Ls.x,Ls.y,Ls.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Ls.fromBufferAttribute(this,n),Ls.applyMatrix4(e),this.setXYZ(n,Ls.x,Ls.y,Ls.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Ls.fromBufferAttribute(this,n),Ls.applyNormalMatrix(e),this.setXYZ(n,Ls.x,Ls.y,Ls.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Ls.fromBufferAttribute(this,n),Ls.transformDirection(e),this.setXYZ(n,Ls.x,Ls.y,Ls.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=Ca(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Dr(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Ca(n,this.array)),n}setX(e,n){return this.normalized&&(n=Dr(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Ca(n,this.array)),n}setY(e,n){return this.normalized&&(n=Dr(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Ca(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Dr(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Ca(n,this.array)),n}setW(e,n){return this.normalized&&(n=Dr(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Dr(n,this.array),r=Dr(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,s){return e*=this.itemSize,this.normalized&&(n=Dr(n,this.array),r=Dr(r,this.array),s=Dr(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=s,this}setXYZW(e,n,r,s,i){return e*=this.itemSize,this.normalized&&(n=Dr(n,this.array),r=Dr(r,this.array),s=Dr(s,this.array),i=Dr(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=s,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==GS&&(e.usage=this.usage),e}}class M1 extends Ar{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class _C extends Ar{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Ws extends Ar{constructor(e,n,r){super(new Float32Array(e),n,r)}}let YW=0;const Ho=new Rr,xw=new Gs,Hh=new Ze,Eo=new us,am=new us,Qs=new Ze;class mr extends hh{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:YW++}),this.uuid=gl(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(e6(e)?_C:M1)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const i=new tr().getNormalMatrix(e);r.applyNormalMatrix(i),r.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ho.makeRotationFromQuaternion(e),this.applyMatrix4(Ho),this}rotateX(e){return Ho.makeRotationX(e),this.applyMatrix4(Ho),this}rotateY(e){return Ho.makeRotationY(e),this.applyMatrix4(Ho),this}rotateZ(e){return Ho.makeRotationZ(e),this.applyMatrix4(Ho),this}translate(e,n,r){return Ho.makeTranslation(e,n,r),this.applyMatrix4(Ho),this}scale(e,n,r){return Ho.makeScale(e,n,r),this.applyMatrix4(Ho),this}lookAt(e){return xw.lookAt(e),xw.updateMatrix(),this.applyMatrix4(xw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Hh).negate(),this.translate(Hh.x,Hh.y,Hh.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let s=0,i=e.length;s<i;s++){const o=e[s];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ws(r,3))}else{const r=Math.min(e.length,n.count);for(let s=0;s<r;s++){const i=e[s];n.setXYZ(s,i.x,i.y,i.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new us);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Ze(-1/0,-1/0,-1/0),new Ze(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,s=n.length;r<s;r++){const i=n[r];Eo.setFromBufferAttribute(i),this.morphTargetsRelative?(Qs.addVectors(this.boundingBox.min,Eo.min),this.boundingBox.expandByPoint(Qs),Qs.addVectors(this.boundingBox.max,Eo.max),this.boundingBox.expandByPoint(Qs)):(this.boundingBox.expandByPoint(Eo.min),this.boundingBox.expandByPoint(Eo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new co);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Ze,1/0);return}if(e){const r=this.boundingSphere.center;if(Eo.setFromBufferAttribute(e),n)for(let i=0,o=n.length;i<o;i++){const a=n[i];am.setFromBufferAttribute(a),this.morphTargetsRelative?(Qs.addVectors(Eo.min,am.min),Eo.expandByPoint(Qs),Qs.addVectors(Eo.max,am.max),Eo.expandByPoint(Qs)):(Eo.expandByPoint(am.min),Eo.expandByPoint(am.max))}Eo.getCenter(r);let s=0;for(let i=0,o=e.count;i<o;i++)Qs.fromBufferAttribute(e,i),s=Math.max(s,r.distanceToSquared(Qs));if(n)for(let i=0,o=n.length;i<o;i++){const a=n[i],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Qs.fromBufferAttribute(a,c),l&&(Hh.fromBufferAttribute(e,c),Qs.add(Hh)),s=Math.max(s,r.distanceToSquared(Qs))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,s=n.normal,i=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ar(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let I=0;I<r.count;I++)a[I]=new Ze,l[I]=new Ze;const c=new Ze,u=new Ze,d=new Ze,h=new Dt,f=new Dt,m=new Dt,v=new Ze,y=new Ze;function g(I,k,M){c.fromBufferAttribute(r,I),u.fromBufferAttribute(r,k),d.fromBufferAttribute(r,M),h.fromBufferAttribute(i,I),f.fromBufferAttribute(i,k),m.fromBufferAttribute(i,M),u.sub(c),d.sub(c),f.sub(h),m.sub(h);const L=1/(f.x*m.y-m.x*f.y);isFinite(L)&&(v.copy(u).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(L),y.copy(d).multiplyScalar(f.x).addScaledVector(u,-m.x).multiplyScalar(L),a[I].add(v),a[k].add(v),a[M].add(v),l[I].add(y),l[k].add(y),l[M].add(y))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let I=0,k=S.length;I<k;++I){const M=S[I],L=M.start,N=M.count;for(let G=L,V=L+N;G<V;G+=3)g(e.getX(G+0),e.getX(G+1),e.getX(G+2))}const _=new Ze,w=new Ze,E=new Ze,C=new Ze;function T(I){E.fromBufferAttribute(s,I),C.copy(E);const k=a[I];_.copy(k),_.sub(E.multiplyScalar(E.dot(k))).normalize(),w.crossVectors(C,k);const L=w.dot(l[I])<0?-1:1;o.setXYZW(I,_.x,_.y,_.z,L)}for(let I=0,k=S.length;I<k;++I){const M=S[I],L=M.start,N=M.count;for(let G=L,V=L+N;G<V;G+=3)T(e.getX(G+0)),T(e.getX(G+1)),T(e.getX(G+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Ar(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let h=0,f=r.count;h<f;h++)r.setXYZ(h,0,0,0);const s=new Ze,i=new Ze,o=new Ze,a=new Ze,l=new Ze,c=new Ze,u=new Ze,d=new Ze;if(e)for(let h=0,f=e.count;h<f;h+=3){const m=e.getX(h+0),v=e.getX(h+1),y=e.getX(h+2);s.fromBufferAttribute(n,m),i.fromBufferAttribute(n,v),o.fromBufferAttribute(n,y),u.subVectors(o,i),d.subVectors(s,i),u.cross(d),a.fromBufferAttribute(r,m),l.fromBufferAttribute(r,v),c.fromBufferAttribute(r,y),a.add(u),l.add(u),c.add(u),r.setXYZ(m,a.x,a.y,a.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(y,c.x,c.y,c.z)}else for(let h=0,f=n.count;h<f;h+=3)s.fromBufferAttribute(n,h+0),i.fromBufferAttribute(n,h+1),o.fromBufferAttribute(n,h+2),u.subVectors(o,i),d.subVectors(s,i),u.cross(d),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)Qs.fromBufferAttribute(e,n),Qs.normalize(),e.setXYZ(n,Qs.x,Qs.y,Qs.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,m=0;for(let v=0,y=l.length;v<y;v++){a.isInterleavedBufferAttribute?f=l[v]*a.data.stride+a.offset:f=l[v]*u;for(let g=0;g<u;g++)h[m++]=c[f++]}return new Ar(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new mr,r=this.index.array,s=this.attributes;for(const a in s){const l=s[a],c=e(l,r);n.setAttribute(a,c)}const i=this.morphAttributes;for(const a in i){const l=[],c=i[a];for(let u=0,d=c.length;u<d;u++){const h=c[u],f=e(h,r);l.push(f)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const s={};let i=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++){const f=c[d];u.push(f.toJSON(e.data))}u.length>0&&(s[l]=u,i=!0)}i&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const s=e.attributes;for(const c in s){const u=s[c];this.setAttribute(c,u.clone(n))}const i=e.morphAttributes;for(const c in i){const u=[],d=i[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const p3=new Rr,ad=new pv,w0=new co,m3=new Ze,x0=new Ze,S0=new Ze,E0=new Ze,Sw=new Ze,C0=new Ze,g3=new Ze,T0=new Ze;class Os extends Gs{constructor(e=new mr,n=new mv){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const s=n[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,o=s.length;i<o;i++){const a=s[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}getVertexPosition(e,n){const r=this.geometry,s=r.attributes.position,i=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(s,e);const a=this.morphTargetInfluences;if(i&&a){C0.set(0,0,0);for(let l=0,c=i.length;l<c;l++){const u=a[l],d=i[l];u!==0&&(Sw.fromBufferAttribute(d,e),o?C0.addScaledVector(Sw,u):C0.addScaledVector(Sw.sub(n),u))}n.add(C0)}return n}raycast(e,n){const r=this.geometry,s=this.material,i=this.matrixWorld;s!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),w0.copy(r.boundingSphere),w0.applyMatrix4(i),ad.copy(e.ray).recast(e.near),!(w0.containsPoint(ad.origin)===!1&&(ad.intersectSphere(w0,m3)===null||ad.origin.distanceToSquared(m3)>(e.far-e.near)**2))&&(p3.copy(i).invert(),ad.copy(e.ray).applyMatrix4(p3),!(r.boundingBox!==null&&ad.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,ad)))}_computeIntersections(e,n,r){let s;const i=this.geometry,o=this.material,a=i.index,l=i.attributes.position,c=i.attributes.uv,u=i.attributes.uv1,d=i.attributes.normal,h=i.groups,f=i.drawRange;if(a!==null)if(Array.isArray(o))for(let m=0,v=h.length;m<v;m++){const y=h[m],g=o[y.materialIndex],S=Math.max(y.start,f.start),_=Math.min(a.count,Math.min(y.start+y.count,f.start+f.count));for(let w=S,E=_;w<E;w+=3){const C=a.getX(w),T=a.getX(w+1),I=a.getX(w+2);s=M0(this,g,e,r,c,u,d,C,T,I),s&&(s.faceIndex=Math.floor(w/3),s.face.materialIndex=y.materialIndex,n.push(s))}}else{const m=Math.max(0,f.start),v=Math.min(a.count,f.start+f.count);for(let y=m,g=v;y<g;y+=3){const S=a.getX(y),_=a.getX(y+1),w=a.getX(y+2);s=M0(this,o,e,r,c,u,d,S,_,w),s&&(s.faceIndex=Math.floor(y/3),n.push(s))}}else if(l!==void 0)if(Array.isArray(o))for(let m=0,v=h.length;m<v;m++){const y=h[m],g=o[y.materialIndex],S=Math.max(y.start,f.start),_=Math.min(l.count,Math.min(y.start+y.count,f.start+f.count));for(let w=S,E=_;w<E;w+=3){const C=w,T=w+1,I=w+2;s=M0(this,g,e,r,c,u,d,C,T,I),s&&(s.faceIndex=Math.floor(w/3),s.face.materialIndex=y.materialIndex,n.push(s))}}else{const m=Math.max(0,f.start),v=Math.min(l.count,f.start+f.count);for(let y=m,g=v;y<g;y+=3){const S=y,_=y+1,w=y+2;s=M0(this,o,e,r,c,u,d,S,_,w),s&&(s.faceIndex=Math.floor(y/3),n.push(s))}}}}function XW(t,e,n,r,s,i,o,a){let l;if(e.side===lo?l=r.intersectTriangle(o,i,s,!0,a):l=r.intersectTriangle(s,i,o,e.side===Ru,a),l===null)return null;T0.copy(a),T0.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(T0);return c<n.near||c>n.far?null:{distance:c,point:T0.clone(),object:t}}function M0(t,e,n,r,s,i,o,a,l,c){t.getVertexPosition(a,x0),t.getVertexPosition(l,S0),t.getVertexPosition(c,E0);const u=XW(t,e,n,r,x0,S0,E0,g3);if(u){const d=new Ze;qo.getBarycoord(g3,x0,S0,E0,d),s&&(u.uv=qo.getInterpolatedAttribute(s,a,l,c,d,new Dt)),i&&(u.uv1=qo.getInterpolatedAttribute(i,a,l,c,d,new Dt)),o&&(u.normal=qo.getInterpolatedAttribute(o,a,l,c,d,new Ze),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const h={a,b:l,c,normal:new Ze,materialIndex:0};qo.getNormal(x0,S0,E0,h.normal),u.face=h,u.barycoord=d}return u}class gv extends mr{constructor(e=1,n=1,r=1,s=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:s,heightSegments:i,depthSegments:o};const a=this;s=Math.floor(s),i=Math.floor(i),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,f=0;m("z","y","x",-1,-1,r,n,e,o,i,0),m("z","y","x",1,-1,r,n,-e,o,i,1),m("x","z","y",1,1,e,r,n,s,o,2),m("x","z","y",1,-1,e,r,-n,s,o,3),m("x","y","z",1,-1,e,n,r,s,i,4),m("x","y","z",-1,-1,e,n,-r,s,i,5),this.setIndex(l),this.setAttribute("position",new Ws(c,3)),this.setAttribute("normal",new Ws(u,3)),this.setAttribute("uv",new Ws(d,2));function m(v,y,g,S,_,w,E,C,T,I,k){const M=w/T,L=E/I,N=w/2,G=E/2,V=C/2,X=T+1,F=I+1;let $=0,O=0;const z=new Ze;for(let re=0;re<F;re++){const q=re*L-G;for(let le=0;le<X;le++){const fe=le*M-N;z[v]=fe*S,z[y]=q*_,z[g]=V,c.push(z.x,z.y,z.z),z[v]=0,z[y]=0,z[g]=C>0?1:-1,u.push(z.x,z.y,z.z),d.push(le/T),d.push(1-re/I),$+=1}}for(let re=0;re<I;re++)for(let q=0;q<T;q++){const le=h+q+X*re,fe=h+q+X*(re+1),se=h+(q+1)+X*(re+1),ye=h+(q+1)+X*re;l.push(le,fe,ye),l.push(fe,se,ye),O+=6}a.addGroup(f,O,k),f+=O,h+=$}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gv(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ip(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const s=t[n][r];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=s.clone():Array.isArray(s)?e[n][r]=s.slice():e[n][r]=s}}return e}function zi(t){const e={};for(let n=0;n<t.length;n++){const r=ip(t[n]);for(const s in r)e[s]=r[s]}return e}function ZW(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function s6(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Sr.workingColorSpace}const i6={clone:ip,merge:zi};var JW=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,QW=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Na extends Wu{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=JW,this.fragmentShader=QW,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ip(e.uniforms),this.uniformsGroups=ZW(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?n.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[s]={type:"m4",value:o.toArray()}:n.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const s in this.extensions)this.extensions[s]===!0&&(r[s]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class o6 extends Gs{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Rr,this.projectionMatrix=new Rr,this.projectionMatrixInverse=new Rr,this.coordinateSystem=oc}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const tu=new Ze,v3=new Dt,y3=new Dt;class xa extends o6{constructor(e=50,n=1,r=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=s,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=fg*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Vm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return fg*2*Math.atan(Math.tan(Vm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){tu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(tu.x,tu.y).multiplyScalar(-e/tu.z),tu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(tu.x,tu.y).multiplyScalar(-e/tu.z)}getViewSize(e,n){return this.getViewBounds(e,v3,y3),n.subVectors(y3,v3)}setViewOffset(e,n,r,s,i,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=s,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Vm*.5*this.fov)/this.zoom,r=2*n,s=this.aspect*r,i=-.5*s;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;i+=o.offsetX*s/l,n-=o.offsetY*r/c,s*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+s,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Gh=-90,Wh=1;class ej extends Gs{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new xa(Gh,Wh,e,n);s.layers=this.layers,this.add(s);const i=new xa(Gh,Wh,e,n);i.layers=this.layers,this.add(i);const o=new xa(Gh,Wh,e,n);o.layers=this.layers,this.add(o);const a=new xa(Gh,Wh,e,n);a.layers=this.layers,this.add(a);const l=new xa(Gh,Wh,e,n);l.layers=this.layers,this.add(l);const c=new xa(Gh,Wh,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,s,i,o,a,l]=n;for(const c of n)this.remove(c);if(e===oc)r.up.set(0,1,0),r.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===xb)r.up.set(0,-1,0),r.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,o,a,l,c,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,s),e.render(n,i),e.setRenderTarget(r,1,s),e.render(n,o),e.setRenderTarget(r,2,s),e.render(n,a),e.setRenderTarget(r,3,s),e.render(n,l),e.setRenderTarget(r,4,s),e.render(n,c),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,s),e.render(n,u),e.setRenderTarget(d,h,f),e.xr.enabled=m,r.texture.needsPMREMUpdate=!0}}class a6 extends Ti{constructor(e,n,r,s,i,o,a,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:ep,super(e,n,r,s,i,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class tj extends Xd{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},s=[r,r,r,r,r,r];this.texture=new a6(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Ta}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new gv(5,5,5),i=new Na({name:"CubemapFromEquirect",uniforms:ip(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:lo,blending:Mu});i.uniforms.tEquirect.value=n;const o=new Os(s,i),a=n.minFilter;return n.minFilter===Ld&&(n.minFilter=Ta),new ej(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,s){const i=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,s);e.setRenderTarget(i)}}class nj extends Gs{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new wl,this.environmentIntensity=1,this.environmentRotation=new wl,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class rj{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=GS,this.updateRanges=[],this.version=0,this.uuid=gl()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let s=0,i=this.stride;s<i;s++)this.array[e+s]=n.array[r+s];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Di=new Ze;class mg{constructor(e,n,r,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)Di.fromBufferAttribute(this,n),Di.applyMatrix4(e),this.setXYZ(n,Di.x,Di.y,Di.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Di.fromBufferAttribute(this,n),Di.applyNormalMatrix(e),this.setXYZ(n,Di.x,Di.y,Di.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Di.fromBufferAttribute(this,n),Di.transformDirection(e),this.setXYZ(n,Di.x,Di.y,Di.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=Ca(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Dr(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=Dr(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Dr(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Dr(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Dr(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Ca(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Ca(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Ca(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Ca(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Dr(n,this.array),r=Dr(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Dr(n,this.array),r=Dr(r,this.array),s=Dr(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=s,this}setXYZW(e,n,r,s,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Dr(n,this.array),r=Dr(r,this.array),s=Dr(s,this.array),i=Dr(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=s,this.data.array[e+3]=i,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)n.push(this.data.array[s+i])}return new Ar(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new mg(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)n.push(this.data.array[s+i])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class l6 extends Wu{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ar(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let jh;const lm=new Ze,Kh=new Ze,qh=new Ze,Yh=new Dt,cm=new Dt,c6=new Rr,A0=new Ze,um=new Ze,k0=new Ze,b3=new Dt,Ew=new Dt,_3=new Dt;class sj extends Gs{constructor(e=new l6){if(super(),this.isSprite=!0,this.type="Sprite",jh===void 0){jh=new mr;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new rj(n,5);jh.setIndex([0,1,2,0,2,3]),jh.setAttribute("position",new mg(r,3,0,!1)),jh.setAttribute("uv",new mg(r,2,3,!1))}this.geometry=jh,this.material=e,this.center=new Dt(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Kh.setFromMatrixScale(this.matrixWorld),c6.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),qh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Kh.multiplyScalar(-qh.z);const r=this.material.rotation;let s,i;r!==0&&(i=Math.cos(r),s=Math.sin(r));const o=this.center;I0(A0.set(-.5,-.5,0),qh,o,Kh,s,i),I0(um.set(.5,-.5,0),qh,o,Kh,s,i),I0(k0.set(.5,.5,0),qh,o,Kh,s,i),b3.set(0,0),Ew.set(1,0),_3.set(1,1);let a=e.ray.intersectTriangle(A0,um,k0,!1,lm);if(a===null&&(I0(um.set(-.5,.5,0),qh,o,Kh,s,i),Ew.set(0,1),a=e.ray.intersectTriangle(A0,k0,um,!1,lm),a===null))return;const l=e.ray.origin.distanceTo(lm);l<e.near||l>e.far||n.push({distance:l,point:lm.clone(),uv:qo.getInterpolation(lm,A0,um,k0,b3,Ew,_3,new Dt),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function I0(t,e,n,r,s,i){Yh.subVectors(t,n).addScalar(.5).multiply(r),s!==void 0?(cm.x=i*Yh.x-s*Yh.y,cm.y=s*Yh.x+i*Yh.y):cm.copy(Yh),t.copy(e),t.x+=cm.x,t.y+=cm.y,t.applyMatrix4(c6)}const Cw=new Ze,ij=new Ze,oj=new tr;class pu{constructor(e=new Ze(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,s){return this.normal.set(e,n,r),this.constant=s,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const s=Cw.subVectors(r,n).cross(ij.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(Cw),s=this.normal.dot(r);if(s===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/s;return i<0||i>1?null:n.copy(e.start).addScaledVector(r,i)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||oj.getNormalMatrix(e),s=this.coplanarPoint(Cw).applyMatrix4(e),i=this.normal.applyMatrix3(r).normalize();return this.constant=-s.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ld=new co,P0=new Ze;class u6{constructor(e=new pu,n=new pu,r=new pu,s=new pu,i=new pu,o=new pu){this.planes=[e,n,r,s,i,o]}set(e,n,r,s,i,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(s),a[4].copy(i),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=oc){const r=this.planes,s=e.elements,i=s[0],o=s[1],a=s[2],l=s[3],c=s[4],u=s[5],d=s[6],h=s[7],f=s[8],m=s[9],v=s[10],y=s[11],g=s[12],S=s[13],_=s[14],w=s[15];if(r[0].setComponents(l-i,h-c,y-f,w-g).normalize(),r[1].setComponents(l+i,h+c,y+f,w+g).normalize(),r[2].setComponents(l+o,h+u,y+m,w+S).normalize(),r[3].setComponents(l-o,h-u,y-m,w-S).normalize(),r[4].setComponents(l-a,h-d,y-v,w-_).normalize(),n===oc)r[5].setComponents(l+a,h+d,y+v,w+_).normalize();else if(n===xb)r[5].setComponents(a,d,v,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ld.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),ld.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ld)}intersectsSprite(e){return ld.center.set(0,0,0),ld.radius=.7071067811865476,ld.applyMatrix4(e.matrixWorld),this.intersectsSphere(ld)}intersectsSphere(e){const n=this.planes,r=e.center,s=-e.radius;for(let i=0;i<6;i++)if(n[i].distanceToPoint(r)<s)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const s=n[r];if(P0.x=s.normal.x>0?e.max.x:e.min.x,P0.y=s.normal.y>0?e.max.y:e.min.y,P0.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(P0)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class Fp extends Wu{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ar(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Sb=new Ze,Eb=new Ze,w3=new Rr,dm=new pv,R0=new co,Tw=new Ze,x3=new Ze;class gg extends Gs{constructor(e=new mr,n=new Fp){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let s=1,i=n.count;s<i;s++)Sb.fromBufferAttribute(n,s-1),Eb.fromBufferAttribute(n,s),r[s]=r[s-1],r[s]+=Sb.distanceTo(Eb);e.setAttribute("lineDistance",new Ws(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,s=this.matrixWorld,i=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),R0.copy(r.boundingSphere),R0.applyMatrix4(s),R0.radius+=i,e.ray.intersectsSphere(R0)===!1)return;w3.copy(s).invert(),dm.copy(e.ray).applyMatrix4(w3);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=r.index,h=r.attributes.position;if(u!==null){const f=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let v=f,y=m-1;v<y;v+=c){const g=u.getX(v),S=u.getX(v+1),_=L0(this,e,dm,l,g,S);_&&n.push(_)}if(this.isLineLoop){const v=u.getX(m-1),y=u.getX(f),g=L0(this,e,dm,l,v,y);g&&n.push(g)}}else{const f=Math.max(0,o.start),m=Math.min(h.count,o.start+o.count);for(let v=f,y=m-1;v<y;v+=c){const g=L0(this,e,dm,l,v,v+1);g&&n.push(g)}if(this.isLineLoop){const v=L0(this,e,dm,l,m-1,f);v&&n.push(v)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const s=n[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,o=s.length;i<o;i++){const a=s[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}}function L0(t,e,n,r,s,i){const o=t.geometry.attributes.position;if(Sb.fromBufferAttribute(o,s),Eb.fromBufferAttribute(o,i),n.distanceSqToSegment(Sb,Eb,Tw,x3)>r)return;Tw.applyMatrix4(t.matrixWorld);const l=e.ray.origin.distanceTo(Tw);if(!(l<e.near||l>e.far))return{distance:l,point:x3.clone().applyMatrix4(t.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:t}}const S3=new Ze,E3=new Ze;class bc extends gg{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let s=0,i=n.count;s<i;s+=2)S3.fromBufferAttribute(n,s),E3.fromBufferAttribute(n,s+1),r[s]=s===0?0:r[s-1],r[s+1]=r[s]+S3.distanceTo(E3);e.setAttribute("lineDistance",new Ws(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class d6 extends Wu{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ar(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const C3=new Rr,jS=new pv,O0=new co,N0=new Ze;class Zd extends Gs{constructor(e=new mr,n=new d6){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,s=this.matrixWorld,i=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),O0.copy(r.boundingSphere),O0.applyMatrix4(s),O0.radius+=i,e.ray.intersectsSphere(O0)===!1)return;C3.copy(s).invert(),jS.copy(e.ray).applyMatrix4(C3);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,d=r.attributes.position;if(c!==null){const h=Math.max(0,o.start),f=Math.min(c.count,o.start+o.count);for(let m=h,v=f;m<v;m++){const y=c.getX(m);N0.fromBufferAttribute(d,y),T3(N0,y,l,s,e,n,this)}}else{const h=Math.max(0,o.start),f=Math.min(d.count,o.start+o.count);for(let m=h,v=f;m<v;m++)N0.fromBufferAttribute(d,m),T3(N0,m,l,s,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const s=n[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,o=s.length;i<o;i++){const a=s[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}}function T3(t,e,n,r,s,i,o){const a=jS.distanceSqToPoint(t);if(a<n){const l=new Ze;jS.closestPointToPoint(t,l),l.applyMatrix4(r);const c=s.ray.origin.distanceTo(l);if(c<s.near||c>s.far)return;i.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class Aa extends Gs{constructor(){super(),this.isGroup=!0,this.type="Group"}}class h6 extends Ti{constructor(e,n,r,s,i,o,a,l,c,u=Of){if(u!==Of&&u!==rp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Of&&(r=Yd),r===void 0&&u===rp&&(r=np),super(null,s,i,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:Pa,this.minFilter=l!==void 0?l:Pa,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class kl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,s=this.getPoint(0),i=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),i+=r.distanceTo(s),n.push(i),s=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let s=0;const i=r.length;let o;n?o=n:o=e*r[i-1];let a=0,l=i-1,c;for(;a<=l;)if(s=Math.floor(a+(l-a)/2),c=r[s]-o,c<0)a=s+1;else if(c>0)l=s-1;else{l=s;break}if(s=l,r[s]===o)return s/(i-1);const u=r[s],h=r[s+1]-u,f=(o-u)/h;return(s+f)/(i-1)}getTangent(e,n){let s=e-1e-4,i=e+1e-4;s<0&&(s=0),i>1&&(i=1);const o=this.getPoint(s),a=this.getPoint(i),l=n||(o.isVector2?new Dt:new Ze);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new Ze,s=[],i=[],o=[],a=new Ze,l=new Rr;for(let f=0;f<=e;f++){const m=f/e;s[f]=this.getTangentAt(m,new Ze)}i[0]=new Ze,o[0]=new Ze;let c=Number.MAX_VALUE;const u=Math.abs(s[0].x),d=Math.abs(s[0].y),h=Math.abs(s[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),h<=c&&r.set(0,0,1),a.crossVectors(s[0],r).normalize(),i[0].crossVectors(s[0],a),o[0].crossVectors(s[0],i[0]);for(let f=1;f<=e;f++){if(i[f]=i[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(s[f-1],s[f]),a.length()>Number.EPSILON){a.normalize();const m=Math.acos(sr(s[f-1].dot(s[f]),-1,1));i[f].applyMatrix4(l.makeRotationAxis(a,m))}o[f].crossVectors(s[f],i[f])}if(n===!0){let f=Math.acos(sr(i[0].dot(i[e]),-1,1));f/=e,s[0].dot(a.crossVectors(i[0],i[e]))>0&&(f=-f);for(let m=1;m<=e;m++)i[m].applyMatrix4(l.makeRotationAxis(s[m],f*m)),o[m].crossVectors(s[m],i[m])}return{tangents:s,normals:i,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class wC extends kl{constructor(e=0,n=0,r=1,s=1,i=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=s,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n=new Dt){const r=n,s=Math.PI*2;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=s;for(;i>s;)i-=s;i<Number.EPSILON&&(o?i=0:i=s),this.aClockwise===!0&&!o&&(i===s?i=-s:i=i-s);const a=this.aStartAngle+e*i;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*u-f*d+this.aX,c=h*d+f*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class aj extends wC{constructor(e,n,r,s,i,o){super(e,n,r,r,s,i,o),this.isArcCurve=!0,this.type="ArcCurve"}}function xC(){let t=0,e=0,n=0,r=0;function s(i,o,a,l){t=i,e=a,n=-3*i+3*o-2*a-l,r=2*i-2*o+a+l}return{initCatmullRom:function(i,o,a,l,c){s(o,a,c*(a-i),c*(l-o))},initNonuniformCatmullRom:function(i,o,a,l,c,u,d){let h=(o-i)/c-(a-i)/(c+u)+(a-o)/u,f=(a-o)/u-(l-o)/(u+d)+(l-a)/d;h*=u,f*=u,s(o,a,h,f)},calc:function(i){const o=i*i,a=o*i;return t+e*i+n*o+r*a}}}const D0=new Ze,Mw=new xC,Aw=new xC,kw=new xC;class lj extends kl{constructor(e=[],n=!1,r="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=s}getPoint(e,n=new Ze){const r=n,s=this.points,i=s.length,o=(i-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/i)+1)*i:l===0&&a===i-1&&(a=i-2,l=1);let c,u;this.closed||a>0?c=s[(a-1)%i]:(D0.subVectors(s[0],s[1]).add(s[0]),c=D0);const d=s[a%i],h=s[(a+1)%i];if(this.closed||a+2<i?u=s[(a+2)%i]:(D0.subVectors(s[i-1],s[i-2]).add(s[i-1]),u=D0),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let m=Math.pow(c.distanceToSquared(d),f),v=Math.pow(d.distanceToSquared(h),f),y=Math.pow(h.distanceToSquared(u),f);v<1e-4&&(v=1),m<1e-4&&(m=v),y<1e-4&&(y=v),Mw.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,m,v,y),Aw.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,m,v,y),kw.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,m,v,y)}else this.curveType==="catmullrom"&&(Mw.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),Aw.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),kw.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return r.set(Mw.calc(l),Aw.calc(l),kw.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const s=e.points[n];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const s=this.points[n];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const s=e.points[n];this.points.push(new Ze().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function M3(t,e,n,r,s){const i=(r-e)*.5,o=(s-n)*.5,a=t*t,l=t*a;return(2*n-2*r+i+o)*l+(-3*n+3*r-2*i-o)*a+i*t+n}function cj(t,e){const n=1-t;return n*n*e}function uj(t,e){return 2*(1-t)*t*e}function dj(t,e){return t*t*e}function Gm(t,e,n,r){return cj(t,e)+uj(t,n)+dj(t,r)}function hj(t,e){const n=1-t;return n*n*n*e}function fj(t,e){const n=1-t;return 3*n*n*t*e}function pj(t,e){return 3*(1-t)*t*t*e}function mj(t,e){return t*t*t*e}function Wm(t,e,n,r,s){return hj(t,e)+fj(t,n)+pj(t,r)+mj(t,s)}class f6 extends kl{constructor(e=new Dt,n=new Dt,r=new Dt,s=new Dt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=s}getPoint(e,n=new Dt){const r=n,s=this.v0,i=this.v1,o=this.v2,a=this.v3;return r.set(Wm(e,s.x,i.x,o.x,a.x),Wm(e,s.y,i.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class gj extends kl{constructor(e=new Ze,n=new Ze,r=new Ze,s=new Ze){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=s}getPoint(e,n=new Ze){const r=n,s=this.v0,i=this.v1,o=this.v2,a=this.v3;return r.set(Wm(e,s.x,i.x,o.x,a.x),Wm(e,s.y,i.y,o.y,a.y),Wm(e,s.z,i.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class p6 extends kl{constructor(e=new Dt,n=new Dt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Dt){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Dt){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class vj extends kl{constructor(e=new Ze,n=new Ze){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new Ze){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Ze){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class m6 extends kl{constructor(e=new Dt,n=new Dt,r=new Dt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Dt){const r=n,s=this.v0,i=this.v1,o=this.v2;return r.set(Gm(e,s.x,i.x,o.x),Gm(e,s.y,i.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class yj extends kl{constructor(e=new Ze,n=new Ze,r=new Ze){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Ze){const r=n,s=this.v0,i=this.v1,o=this.v2;return r.set(Gm(e,s.x,i.x,o.x),Gm(e,s.y,i.y,o.y),Gm(e,s.z,i.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class g6 extends kl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Dt){const r=n,s=this.points,i=(s.length-1)*e,o=Math.floor(i),a=i-o,l=s[o===0?o:o-1],c=s[o],u=s[o>s.length-2?s.length-1:o+1],d=s[o>s.length-3?s.length-1:o+2];return r.set(M3(a,l.x,c.x,u.x,d.x),M3(a,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const s=e.points[n];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const s=this.points[n];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const s=e.points[n];this.points.push(new Dt().fromArray(s))}return this}}var KS=Object.freeze({__proto__:null,ArcCurve:aj,CatmullRomCurve3:lj,CubicBezierCurve:f6,CubicBezierCurve3:gj,EllipseCurve:wC,LineCurve:p6,LineCurve3:vj,QuadraticBezierCurve:m6,QuadraticBezierCurve3:yj,SplineCurve:g6});class bj extends kl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new KS[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),s=this.getCurveLengths();let i=0;for(;i<s.length;){if(s[i]>=r){const o=s[i]-r,a=this.curves[i],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,s=this.curves.length;r<s;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let s=0,i=this.curves;s<i.length;s++){const o=i[s],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(n.push(u),r=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const s=e.curves[n];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const s=this.curves[n];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const s=e.curves[n];this.curves.push(new KS[s.type]().fromJSON(s))}return this}}class vg extends bj{constructor(e){super(),this.type="Path",this.currentPoint=new Dt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new p6(this.currentPoint.clone(),new Dt(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,s){const i=new m6(this.currentPoint.clone(),new Dt(e,n),new Dt(r,s));return this.curves.push(i),this.currentPoint.set(r,s),this}bezierCurveTo(e,n,r,s,i,o){const a=new f6(this.currentPoint.clone(),new Dt(e,n),new Dt(r,s),new Dt(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new g6(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,s,i,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,s,i,o),this}absarc(e,n,r,s,i,o){return this.absellipse(e,n,r,r,s,i,o),this}ellipse(e,n,r,s,i,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,r,s,i,o,a,l),this}absellipse(e,n,r,s,i,o,a,l){const c=new wC(e,n,r,s,i,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class hc extends vg{constructor(e){super(e),this.uuid=gl(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,s=this.holes.length;r<s;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const s=e.holes[n];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const s=this.holes[n];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const s=e.holes[n];this.holes.push(new vg().fromJSON(s))}return this}}const _j={triangulate:function(t,e,n=2){const r=e&&e.length,s=r?e[0]*n:t.length;let i=v6(t,0,s,n,!0);const o=[];if(!i||i.next===i.prev)return o;let a,l,c,u,d,h,f;if(r&&(i=Cj(t,e,i,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(let m=n;m<s;m+=n)d=t[m],h=t[m+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-a,u-l),f=f!==0?32767/f:0}return yg(i,o,n,a,l,f,0),o}};function v6(t,e,n,r,s){let i,o;if(s===Dj(t,e,n,r)>0)for(i=e;i<n;i+=r)o=A3(i,t[i],t[i+1],o);else for(i=n-r;i>=e;i-=r)o=A3(i,t[i],t[i+1],o);return o&&A1(o,o.next)&&(_g(o),o=o.next),o}function Jd(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(A1(n,n.next)||ms(n.prev,n,n.next)===0)){if(_g(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function yg(t,e,n,r,s,i,o){if(!t)return;!o&&i&&Ij(t,r,s,i);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,i?xj(t,r,s,i):wj(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),_g(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=Sj(Jd(t),e,n),yg(t,e,n,r,s,i,2)):o===2&&Ej(t,e,n,r,s,i):yg(Jd(t),e,n,r,s,i,1);break}}}function wj(t){const e=t.prev,n=t,r=t.next;if(ms(e,n,r)>=0)return!1;const s=e.x,i=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=s<i?s<o?s:o:i<o?i:o,d=a<l?a<c?a:c:l<c?l:c,h=s>i?s>o?s:o:i>o?i:o,f=a>l?a>c?a:c:l>c?l:c;let m=r.next;for(;m!==e;){if(m.x>=u&&m.x<=h&&m.y>=d&&m.y<=f&&Af(s,a,i,l,o,c,m.x,m.y)&&ms(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function xj(t,e,n,r){const s=t.prev,i=t,o=t.next;if(ms(s,i,o)>=0)return!1;const a=s.x,l=i.x,c=o.x,u=s.y,d=i.y,h=o.y,f=a<l?a<c?a:c:l<c?l:c,m=u<d?u<h?u:h:d<h?d:h,v=a>l?a>c?a:c:l>c?l:c,y=u>d?u>h?u:h:d>h?d:h,g=qS(f,m,e,n,r),S=qS(v,y,e,n,r);let _=t.prevZ,w=t.nextZ;for(;_&&_.z>=g&&w&&w.z<=S;){if(_.x>=f&&_.x<=v&&_.y>=m&&_.y<=y&&_!==s&&_!==o&&Af(a,u,l,d,c,h,_.x,_.y)&&ms(_.prev,_,_.next)>=0||(_=_.prevZ,w.x>=f&&w.x<=v&&w.y>=m&&w.y<=y&&w!==s&&w!==o&&Af(a,u,l,d,c,h,w.x,w.y)&&ms(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;_&&_.z>=g;){if(_.x>=f&&_.x<=v&&_.y>=m&&_.y<=y&&_!==s&&_!==o&&Af(a,u,l,d,c,h,_.x,_.y)&&ms(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;w&&w.z<=S;){if(w.x>=f&&w.x<=v&&w.y>=m&&w.y<=y&&w!==s&&w!==o&&Af(a,u,l,d,c,h,w.x,w.y)&&ms(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function Sj(t,e,n){let r=t;do{const s=r.prev,i=r.next.next;!A1(s,i)&&y6(s,r,r.next,i)&&bg(s,i)&&bg(i,s)&&(e.push(s.i/n|0),e.push(r.i/n|0),e.push(i.i/n|0),_g(r),_g(r.next),r=t=i),r=r.next}while(r!==t);return Jd(r)}function Ej(t,e,n,r,s,i){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Lj(o,a)){let l=b6(o,a);o=Jd(o,o.next),l=Jd(l,l.next),yg(o,e,n,r,s,i,0),yg(l,e,n,r,s,i,0);return}a=a.next}o=o.next}while(o!==t)}function Cj(t,e,n,r){const s=[];let i,o,a,l,c;for(i=0,o=e.length;i<o;i++)a=e[i]*r,l=i<o-1?e[i+1]*r:t.length,c=v6(t,a,l,r,!1),c===c.next&&(c.steiner=!0),s.push(Rj(c));for(s.sort(Tj),i=0;i<s.length;i++)n=Mj(s[i],n);return n}function Tj(t,e){return t.x-e.x}function Mj(t,e){const n=Aj(t,e);if(!n)return e;const r=b6(n,t);return Jd(r,r.next),Jd(n,n.next)}function Aj(t,e){let n=e,r=-1/0,s;const i=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const h=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=i&&h>r&&(r=h,s=n.x<n.next.x?n:n.next,h===i))return s}n=n.next}while(n!==e);if(!s)return null;const a=s,l=s.x,c=s.y;let u=1/0,d;n=s;do i>=n.x&&n.x>=l&&i!==n.x&&Af(o<c?i:r,o,l,c,o<c?r:i,o,n.x,n.y)&&(d=Math.abs(o-n.y)/(i-n.x),bg(n,t)&&(d<u||d===u&&(n.x>s.x||n.x===s.x&&kj(s,n)))&&(s=n,u=d)),n=n.next;while(n!==a);return s}function kj(t,e){return ms(t.prev,t,e.prev)<0&&ms(e.next,t,t.next)<0}function Ij(t,e,n,r){let s=t;do s.z===0&&(s.z=qS(s.x,s.y,e,n,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,Pj(s)}function Pj(t){let e,n,r,s,i,o,a,l,c=1;do{for(n=t,t=null,i=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(s=n,n=n.nextZ,a--):(s=r,r=r.nextZ,l--),i?i.nextZ=s:t=s,s.prevZ=i,i=s;n=r}i.nextZ=null,c*=2}while(o>1);return t}function qS(t,e,n,r,s){return t=(t-n)*s|0,e=(e-r)*s|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Rj(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Af(t,e,n,r,s,i,o,a){return(s-o)*(e-a)>=(t-o)*(i-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(i-a)>=(s-o)*(r-a)}function Lj(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Oj(t,e)&&(bg(t,e)&&bg(e,t)&&Nj(t,e)&&(ms(t.prev,t,e.prev)||ms(t,e.prev,e))||A1(t,e)&&ms(t.prev,t,t.next)>0&&ms(e.prev,e,e.next)>0)}function ms(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function A1(t,e){return t.x===e.x&&t.y===e.y}function y6(t,e,n,r){const s=B0(ms(t,e,n)),i=B0(ms(t,e,r)),o=B0(ms(n,r,t)),a=B0(ms(n,r,e));return!!(s!==i&&o!==a||s===0&&F0(t,n,e)||i===0&&F0(t,r,e)||o===0&&F0(n,t,r)||a===0&&F0(n,e,r))}function F0(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function B0(t){return t>0?1:t<0?-1:0}function Oj(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&y6(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function bg(t,e){return ms(t.prev,t,t.next)<0?ms(t,e,t.next)>=0&&ms(t,t.prev,e)>=0:ms(t,e,t.prev)<0||ms(t,t.next,e)<0}function Nj(t,e){let n=t,r=!1;const s=(t.x+e.x)/2,i=(t.y+e.y)/2;do n.y>i!=n.next.y>i&&n.next.y!==n.y&&s<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function b6(t,e){const n=new YS(t.i,t.x,t.y),r=new YS(e.i,e.x,e.y),s=t.next,i=e.prev;return t.next=e,e.prev=t,n.next=s,s.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function A3(t,e,n,r){const s=new YS(t,e,n);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function _g(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function YS(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Dj(t,e,n,r){let s=0;for(let i=e,o=n-r;i<n;i+=r)s+=(t[o]-t[i])*(t[i+1]+t[o+1]),o=i;return s}class fc{static area(e){const n=e.length;let r=0;for(let s=n-1,i=0;i<n;s=i++)r+=e[s].x*e[i].y-e[i].x*e[s].y;return r*.5}static isClockWise(e){return fc.area(e)<0}static triangulateShape(e,n){const r=[],s=[],i=[];k3(e),I3(r,e);let o=e.length;n.forEach(k3);for(let l=0;l<n.length;l++)s.push(o),o+=n[l].length,I3(r,n[l]);const a=_j.triangulate(r,s);for(let l=0;l<a.length;l+=3)i.push(a.slice(l,l+3));return i}}function k3(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function I3(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class wg extends mr{constructor(e=new hc([new Dt(.5,.5),new Dt(-.5,.5),new Dt(-.5,-.5),new Dt(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,s=[],i=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Ws(s,3)),this.setAttribute("uv",new Ws(i,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,f=n.bevelThickness!==void 0?n.bevelThickness:.2,m=n.bevelSize!==void 0?n.bevelSize:f-.1,v=n.bevelOffset!==void 0?n.bevelOffset:0,y=n.bevelSegments!==void 0?n.bevelSegments:3;const g=n.extrudePath,S=n.UVGenerator!==void 0?n.UVGenerator:Fj;let _,w=!1,E,C,T,I;g&&(_=g.getSpacedPoints(u),w=!0,h=!1,E=g.computeFrenetFrames(u,!1),C=new Ze,T=new Ze,I=new Ze),h||(y=0,f=0,m=0,v=0);const k=a.extractPoints(c);let M=k.shape;const L=k.holes;if(!fc.isClockWise(M)){M=M.reverse();for(let j=0,he=L.length;j<he;j++){const K=L[j];fc.isClockWise(K)&&(L[j]=K.reverse())}}const G=fc.triangulateShape(M,L),V=M;for(let j=0,he=L.length;j<he;j++){const K=L[j];M=M.concat(K)}function X(j,he,K){return he||console.error("THREE.ExtrudeGeometry: vec does not exist"),j.clone().addScaledVector(he,K)}const F=M.length,$=G.length;function O(j,he,K){let Fe,Oe,Re;const te=j.x-he.x,oe=j.y-he.y,Ee=K.x-j.x,J=K.y-j.y,Q=te*te+oe*oe,_e=te*J-oe*Ee;if(Math.abs(_e)>Number.EPSILON){const ie=Math.sqrt(Q),Te=Math.sqrt(Ee*Ee+J*J),We=he.x-oe/ie,ut=he.y+te/ie,lt=K.x-J/Te,St=K.y+Ee/Te,Ot=((lt-We)*J-(St-ut)*Ee)/(te*J-oe*Ee);Fe=We+te*Ot-j.x,Oe=ut+oe*Ot-j.y;const et=Fe*Fe+Oe*Oe;if(et<=2)return new Dt(Fe,Oe);Re=Math.sqrt(et/2)}else{let ie=!1;te>Number.EPSILON?Ee>Number.EPSILON&&(ie=!0):te<-Number.EPSILON?Ee<-Number.EPSILON&&(ie=!0):Math.sign(oe)===Math.sign(J)&&(ie=!0),ie?(Fe=-oe,Oe=te,Re=Math.sqrt(Q)):(Fe=te,Oe=oe,Re=Math.sqrt(Q/2))}return new Dt(Fe/Re,Oe/Re)}const z=[];for(let j=0,he=V.length,K=he-1,Fe=j+1;j<he;j++,K++,Fe++)K===he&&(K=0),Fe===he&&(Fe=0),z[j]=O(V[j],V[K],V[Fe]);const re=[];let q,le=z.concat();for(let j=0,he=L.length;j<he;j++){const K=L[j];q=[];for(let Fe=0,Oe=K.length,Re=Oe-1,te=Fe+1;Fe<Oe;Fe++,Re++,te++)Re===Oe&&(Re=0),te===Oe&&(te=0),q[Fe]=O(K[Fe],K[Re],K[te]);re.push(q),le=le.concat(q)}for(let j=0;j<y;j++){const he=j/y,K=f*Math.cos(he*Math.PI/2),Fe=m*Math.sin(he*Math.PI/2)+v;for(let Oe=0,Re=V.length;Oe<Re;Oe++){const te=X(V[Oe],z[Oe],Fe);ve(te.x,te.y,-K)}for(let Oe=0,Re=L.length;Oe<Re;Oe++){const te=L[Oe];q=re[Oe];for(let oe=0,Ee=te.length;oe<Ee;oe++){const J=X(te[oe],q[oe],Fe);ve(J.x,J.y,-K)}}}const fe=m+v;for(let j=0;j<F;j++){const he=h?X(M[j],le[j],fe):M[j];w?(T.copy(E.normals[0]).multiplyScalar(he.x),C.copy(E.binormals[0]).multiplyScalar(he.y),I.copy(_[0]).add(T).add(C),ve(I.x,I.y,I.z)):ve(he.x,he.y,0)}for(let j=1;j<=u;j++)for(let he=0;he<F;he++){const K=h?X(M[he],le[he],fe):M[he];w?(T.copy(E.normals[j]).multiplyScalar(K.x),C.copy(E.binormals[j]).multiplyScalar(K.y),I.copy(_[j]).add(T).add(C),ve(I.x,I.y,I.z)):ve(K.x,K.y,d/u*j)}for(let j=y-1;j>=0;j--){const he=j/y,K=f*Math.cos(he*Math.PI/2),Fe=m*Math.sin(he*Math.PI/2)+v;for(let Oe=0,Re=V.length;Oe<Re;Oe++){const te=X(V[Oe],z[Oe],Fe);ve(te.x,te.y,d+K)}for(let Oe=0,Re=L.length;Oe<Re;Oe++){const te=L[Oe];q=re[Oe];for(let oe=0,Ee=te.length;oe<Ee;oe++){const J=X(te[oe],q[oe],Fe);w?ve(J.x,J.y+_[u-1].y,_[u-1].x+K):ve(J.x,J.y,d+K)}}}se(),ye();function se(){const j=s.length/3;if(h){let he=0,K=F*he;for(let Fe=0;Fe<$;Fe++){const Oe=G[Fe];xe(Oe[2]+K,Oe[1]+K,Oe[0]+K)}he=u+y*2,K=F*he;for(let Fe=0;Fe<$;Fe++){const Oe=G[Fe];xe(Oe[0]+K,Oe[1]+K,Oe[2]+K)}}else{for(let he=0;he<$;he++){const K=G[he];xe(K[2],K[1],K[0])}for(let he=0;he<$;he++){const K=G[he];xe(K[0]+F*u,K[1]+F*u,K[2]+F*u)}}r.addGroup(j,s.length/3-j,0)}function ye(){const j=s.length/3;let he=0;we(V,he),he+=V.length;for(let K=0,Fe=L.length;K<Fe;K++){const Oe=L[K];we(Oe,he),he+=Oe.length}r.addGroup(j,s.length/3-j,1)}function we(j,he){let K=j.length;for(;--K>=0;){const Fe=K;let Oe=K-1;Oe<0&&(Oe=j.length-1);for(let Re=0,te=u+y*2;Re<te;Re++){const oe=F*Re,Ee=F*(Re+1),J=he+Fe+oe,Q=he+Oe+oe,_e=he+Oe+Ee,ie=he+Fe+Ee;je(J,Q,_e,ie)}}}function ve(j,he,K){l.push(j),l.push(he),l.push(K)}function xe(j,he,K){nt(j),nt(he),nt(K);const Fe=s.length/3,Oe=S.generateTopUV(r,s,Fe-3,Fe-2,Fe-1);ue(Oe[0]),ue(Oe[1]),ue(Oe[2])}function je(j,he,K,Fe){nt(j),nt(he),nt(Fe),nt(he),nt(K),nt(Fe);const Oe=s.length/3,Re=S.generateSideWallUV(r,s,Oe-6,Oe-3,Oe-2,Oe-1);ue(Re[0]),ue(Re[1]),ue(Re[3]),ue(Re[1]),ue(Re[2]),ue(Re[3])}function nt(j){s.push(l[j*3+0]),s.push(l[j*3+1]),s.push(l[j*3+2])}function ue(j){i.push(j.x),i.push(j.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return Bj(n,r,e)}static fromJSON(e,n){const r=[];for(let i=0,o=e.shapes.length;i<o;i++){const a=n[e.shapes[i]];r.push(a)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new KS[s.type]().fromJSON(s)),new wg(r,e.options)}}const Fj={generateTopUV:function(t,e,n,r,s){const i=e[n*3],o=e[n*3+1],a=e[r*3],l=e[r*3+1],c=e[s*3],u=e[s*3+1];return[new Dt(i,o),new Dt(a,l),new Dt(c,u)]},generateSideWallUV:function(t,e,n,r,s,i){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[r*3],u=e[r*3+1],d=e[r*3+2],h=e[s*3],f=e[s*3+1],m=e[s*3+2],v=e[i*3],y=e[i*3+1],g=e[i*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Dt(o,1-l),new Dt(c,1-d),new Dt(h,1-m),new Dt(v,1-g)]:[new Dt(a,1-l),new Dt(u,1-d),new Dt(f,1-m),new Dt(y,1-g)]}};function Bj(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,s=t.length;r<s;r++){const i=t[r];n.shapes.push(i.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class k1 extends mr{constructor(e=1,n=1,r=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:s};const i=e/2,o=n/2,a=Math.floor(r),l=Math.floor(s),c=a+1,u=l+1,d=e/a,h=n/l,f=[],m=[],v=[],y=[];for(let g=0;g<u;g++){const S=g*h-o;for(let _=0;_<c;_++){const w=_*d-i;m.push(w,-S,0),v.push(0,0,1),y.push(_/a),y.push(1-g/l)}}for(let g=0;g<l;g++)for(let S=0;S<a;S++){const _=S+c*g,w=S+c*(g+1),E=S+1+c*(g+1),C=S+1+c*g;f.push(_,w,C),f.push(w,E,C)}this.setIndex(f),this.setAttribute("position",new Ws(m,3)),this.setAttribute("normal",new Ws(v,3)),this.setAttribute("uv",new Ws(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new k1(e.width,e.height,e.widthSegments,e.heightSegments)}}class I1 extends mr{constructor(e=new hc([new Dt(0,.5),new Dt(-.5,-.5),new Dt(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],s=[],i=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Ws(s,3)),this.setAttribute("normal",new Ws(i,3)),this.setAttribute("uv",new Ws(o,2));function c(u){const d=s.length/3,h=u.extractPoints(n);let f=h.shape;const m=h.holes;fc.isClockWise(f)===!1&&(f=f.reverse());for(let y=0,g=m.length;y<g;y++){const S=m[y];fc.isClockWise(S)===!0&&(m[y]=S.reverse())}const v=fc.triangulateShape(f,m);for(let y=0,g=m.length;y<g;y++){const S=m[y];f=f.concat(S)}for(let y=0,g=f.length;y<g;y++){const S=f[y];s.push(S.x,S.y,0),i.push(0,0,1),o.push(S.x,S.y)}for(let y=0,g=v.length;y<g;y++){const S=v[y],_=S[0]+d,w=S[1]+d,E=S[2]+d;r.push(_,w,E),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return Uj(n,e)}static fromJSON(e,n){const r=[];for(let s=0,i=e.shapes.length;s<i;s++){const o=n[e.shapes[s]];r.push(o)}return new I1(r,e.curveSegments)}}function Uj(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const s=t[n];e.shapes.push(s.uuid)}else e.shapes.push(t.uuid);return e}class zj extends Wu{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=sW,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class $j extends Wu{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Cb={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Vj{constructor(e,n,r){const s=this;let i=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(u){a++,i===!1&&s.onStart!==void 0&&s.onStart(u,o,a),i=!0},this.itemEnd=function(u){o++,s.onProgress!==void 0&&s.onProgress(u,o,a),o===a&&(i=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(u){s.onError!==void 0&&s.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],m=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return m}return null}}}const Hj=new Vj;class P1{constructor(e){this.manager=e!==void 0?e:Hj,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(s,i){r.load(e,s,n,i)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}P1.DEFAULT_MATERIAL_NAME="__DEFAULT";const Kl={};class Gj extends Error{constructor(e,n){super(e),this.response=n}}class Wj extends P1{constructor(e){super(e)}load(e,n,r,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const i=Cb.get(e);if(i!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(i),this.manager.itemEnd(e)},0),i;if(Kl[e]!==void 0){Kl[e].push({onLoad:n,onProgress:r,onError:s});return}Kl[e]=[],Kl[e].push({onLoad:n,onProgress:r,onError:s});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Kl[e],d=c.body.getReader(),h=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),f=h?parseInt(h):0,m=f!==0;let v=0;const y=new ReadableStream({start(g){S();function S(){d.read().then(({done:_,value:w})=>{if(_)g.close();else{v+=w.byteLength;const E=new ProgressEvent("progress",{lengthComputable:m,loaded:v,total:f});for(let C=0,T=u.length;C<T;C++){const I=u[C];I.onProgress&&I.onProgress(E)}g.enqueue(w),S()}},_=>{g.error(_)})}}});return new Response(y)}else throw new Gj(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(m=>f.decode(m))}}}).then(c=>{Cb.add(e,c);const u=Kl[e];delete Kl[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=Kl[e];if(u===void 0)throw this.manager.itemError(e),c;delete Kl[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class jj extends P1{constructor(e){super(e)}load(e,n,r,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Cb.get(e);if(o!==void 0)return i.manager.itemStart(e),setTimeout(function(){n&&n(o),i.manager.itemEnd(e)},0),o;const a=pg("img");function l(){u(),Cb.add(e,this),n&&n(this),i.manager.itemEnd(e)}function c(d){u(),s&&s(d),i.manager.itemError(e),i.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class Kj extends P1{constructor(e){super(e)}load(e,n,r,s){const i=new Ti,o=new jj(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){i.image=a,i.needsUpdate=!0,n!==void 0&&n(i)},r,s),i}}class SC extends o6{constructor(e=-1,n=1,r=1,s=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=s,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,s,i,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=s,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let i=r-e,o=r+e,a=s+n,l=s-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=c*this.view.offsetX,o=i+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class qj extends xa{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}const P3=new Rr;class Yj{constructor(e,n,r=0,s=1/0){this.ray=new pv(e,n),this.near=r,this.far=s,this.camera=null,this.layers=new bC,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return P3.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(P3),this}intersectObject(e,n=!0,r=[]){return XS(e,this,r,n),r.sort(R3),r}intersectObjects(e,n=!0,r=[]){for(let s=0,i=e.length;s<i;s++)XS(e[s],this,r,n);return r.sort(R3),r}}function R3(t,e){return t.distance-e.distance}function XS(t,e,n,r){let s=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(s=!1),s===!0&&r===!0){const i=t.children;for(let o=0,a=i.length;o<a;o++)XS(i[o],e,n,!0)}}class L3{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=sr(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(sr(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const O3=new Dt;class _6{constructor(e=new Dt(1/0,1/0),n=new Dt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=O3.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,O3).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}class Xj{constructor(){this.type="ShapePath",this.color=new ar,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new vg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,s){return this.currentPath.quadraticCurveTo(e,n,r,s),this}bezierCurveTo(e,n,r,s,i,o){return this.currentPath.bezierCurveTo(e,n,r,s,i,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(g){const S=[];for(let _=0,w=g.length;_<w;_++){const E=g[_],C=new hc;C.curves=E.curves,S.push(C)}return S}function r(g,S){const _=S.length;let w=!1;for(let E=_-1,C=0;C<_;E=C++){let T=S[E],I=S[C],k=I.x-T.x,M=I.y-T.y;if(Math.abs(M)>Number.EPSILON){if(M<0&&(T=S[C],k=-k,I=S[E],M=-M),g.y<T.y||g.y>I.y)continue;if(g.y===T.y){if(g.x===T.x)return!0}else{const L=M*(g.x-T.x)-k*(g.y-T.y);if(L===0)return!0;if(L<0)continue;w=!w}}else{if(g.y!==T.y)continue;if(I.x<=g.x&&g.x<=T.x||T.x<=g.x&&g.x<=I.x)return!0}}return w}const s=fc.isClockWise,i=this.subPaths;if(i.length===0)return[];let o,a,l;const c=[];if(i.length===1)return a=i[0],l=new hc,l.curves=a.curves,c.push(l),c;let u=!s(i[0].getPoints());u=e?!u:u;const d=[],h=[];let f=[],m=0,v;h[m]=void 0,f[m]=[];for(let g=0,S=i.length;g<S;g++)a=i[g],v=a.getPoints(),o=s(v),o=e?!o:o,o?(!u&&h[m]&&m++,h[m]={s:new hc,p:v},h[m].s.curves=a.curves,u&&m++,f[m]=[]):f[m].push({h:a,p:v[0]});if(!h[0])return n(i);if(h.length>1){let g=!1,S=0;for(let _=0,w=h.length;_<w;_++)d[_]=[];for(let _=0,w=h.length;_<w;_++){const E=f[_];for(let C=0;C<E.length;C++){const T=E[C];let I=!0;for(let k=0;k<h.length;k++)r(T.p,h[k].p)&&(_!==k&&S++,I?(I=!1,d[k].push(T)):g=!0);I&&d[_].push(T)}}S>0&&g===!1&&(f=d)}let y;for(let g=0,S=h.length;g<S;g++){l=h[g].s,c.push(l),y=f[g];for(let _=0,w=y.length;_<w;_++)l.holes.push(y[_].h)}return c}}class Zj extends hh{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function N3(t,e,n,r){const s=Jj(r);switch(n){case jD:return t*e;case qD:return t*e;case YD:return t*e*2;case XD:return t*e/s.components*s.byteLength;case mC:return t*e/s.components*s.byteLength;case ZD:return t*e*2/s.components*s.byteLength;case gC:return t*e*2/s.components*s.byteLength;case KD:return t*e*3/s.components*s.byteLength;case Ma:return t*e*4/s.components*s.byteLength;case vC:return t*e*4/s.components*s.byteLength;case zy:case $y:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Vy:case Hy:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case bS:case wS:return Math.max(t,16)*Math.max(e,8)/4;case yS:case _S:return Math.max(t,8)*Math.max(e,8)/2;case xS:case SS:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case ES:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case CS:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case TS:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case MS:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case AS:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case kS:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case IS:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case PS:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case RS:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case LS:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case OS:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case NS:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case DS:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case FS:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case BS:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case Gy:case US:case zS:return Math.ceil(t/4)*Math.ceil(e/4)*16;case JD:case $S:return Math.ceil(t/4)*Math.ceil(e/4)*8;case VS:case HS:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function Jj(t){switch(t){case yc:case HD:return{byteLength:1,components:1};case hg:case GD:case fv:return{byteLength:2,components:1};case fC:case pC:return{byteLength:2,components:4};case Yd:case hC:case ic:return{byteLength:4,components:1};case WD:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:dC}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=dC);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function w6(){let t=null,e=!1,n=null,r=null;function s(i,o){n(i,o),r=t.requestAnimationFrame(s)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(s),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(i){n=i},setContext:function(i){t=i}}}function Qj(t){const e=new WeakMap;function n(a,l){const c=a.array,u=a.usage,d=c.byteLength,h=t.createBuffer();t.bindBuffer(l,h),t.bufferData(l,c,u),a.onUploadCallback();let f;if(c instanceof Float32Array)f=t.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?f=t.HALF_FLOAT:f=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)f=t.SHORT;else if(c instanceof Uint32Array)f=t.UNSIGNED_INT;else if(c instanceof Int32Array)f=t.INT;else if(c instanceof Int8Array)f=t.BYTE;else if(c instanceof Uint8Array)f=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)f=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:h,type:f,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}function r(a,l,c){const u=l.array,d=l.updateRanges;if(t.bindBuffer(c,a),d.length===0)t.bufferSubData(c,0,u);else{d.sort((f,m)=>f.start-m.start);let h=0;for(let f=1;f<d.length;f++){const m=d[h],v=d[f];v.start<=m.start+m.count+1?m.count=Math.max(m.count,v.start+v.count-m.start):(++h,d[h]=v)}d.length=h+1;for(let f=0,m=d.length;f<m;f++){const v=d[f];t.bufferSubData(c,v.start*u.BYTES_PER_ELEMENT,u,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()}function s(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function i(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(t.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,n(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:s,remove:i,update:o}}var eK=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,tK=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,nK=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,rK=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,sK=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,iK=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,oK=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aK=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,lK=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,cK=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,uK=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,dK=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,hK=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,fK=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,pK=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,mK=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,gK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,vK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,yK=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,bK=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,_K=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,wK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,xK=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,SK=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,EK=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,CK=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,TK=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,MK=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,AK=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,kK=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,IK="gl_FragColor = linearToOutputTexel( gl_FragColor );",PK=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,RK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,LK=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,OK=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,NK=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,DK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,FK=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,BK=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,UK=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,zK=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,$K=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,VK=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,HK=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,GK=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,WK=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,jK=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,KK=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,qK=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,YK=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,XK=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,ZK=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,JK=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,QK=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,eq=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,tq=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,nq=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,rq=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,sq=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,iq=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,oq=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,aq=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,lq=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,cq=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,uq=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,dq=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,hq=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,fq=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,pq=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,mq=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,gq=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,vq=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,yq=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,bq=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,_q=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,wq=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,xq=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Sq=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Eq=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Cq=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Tq=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Mq=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Aq=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,kq=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Iq=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Pq=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Rq=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Lq=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Oq=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Nq=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Dq=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Fq=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Bq=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Uq=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,zq=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,$q=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Vq=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Hq=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Gq=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Wq=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,jq=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Kq=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,qq=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Yq=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Xq=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Zq=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Jq=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Qq=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,eY=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,tY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,nY=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,rY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,sY=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,iY=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,oY=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,aY=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,lY=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,cY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,uY=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dY=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hY=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,fY=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,pY=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mY=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gY=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vY=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,yY=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bY=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,_Y=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,wY=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xY=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SY=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,EY=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CY=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,TY=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MY=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,AY=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,kY=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,IY=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,PY=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,RY=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,rr={alphahash_fragment:eK,alphahash_pars_fragment:tK,alphamap_fragment:nK,alphamap_pars_fragment:rK,alphatest_fragment:sK,alphatest_pars_fragment:iK,aomap_fragment:oK,aomap_pars_fragment:aK,batching_pars_vertex:lK,batching_vertex:cK,begin_vertex:uK,beginnormal_vertex:dK,bsdfs:hK,iridescence_fragment:fK,bumpmap_pars_fragment:pK,clipping_planes_fragment:mK,clipping_planes_pars_fragment:gK,clipping_planes_pars_vertex:vK,clipping_planes_vertex:yK,color_fragment:bK,color_pars_fragment:_K,color_pars_vertex:wK,color_vertex:xK,common:SK,cube_uv_reflection_fragment:EK,defaultnormal_vertex:CK,displacementmap_pars_vertex:TK,displacementmap_vertex:MK,emissivemap_fragment:AK,emissivemap_pars_fragment:kK,colorspace_fragment:IK,colorspace_pars_fragment:PK,envmap_fragment:RK,envmap_common_pars_fragment:LK,envmap_pars_fragment:OK,envmap_pars_vertex:NK,envmap_physical_pars_fragment:jK,envmap_vertex:DK,fog_vertex:FK,fog_pars_vertex:BK,fog_fragment:UK,fog_pars_fragment:zK,gradientmap_pars_fragment:$K,lightmap_pars_fragment:VK,lights_lambert_fragment:HK,lights_lambert_pars_fragment:GK,lights_pars_begin:WK,lights_toon_fragment:KK,lights_toon_pars_fragment:qK,lights_phong_fragment:YK,lights_phong_pars_fragment:XK,lights_physical_fragment:ZK,lights_physical_pars_fragment:JK,lights_fragment_begin:QK,lights_fragment_maps:eq,lights_fragment_end:tq,logdepthbuf_fragment:nq,logdepthbuf_pars_fragment:rq,logdepthbuf_pars_vertex:sq,logdepthbuf_vertex:iq,map_fragment:oq,map_pars_fragment:aq,map_particle_fragment:lq,map_particle_pars_fragment:cq,metalnessmap_fragment:uq,metalnessmap_pars_fragment:dq,morphinstance_vertex:hq,morphcolor_vertex:fq,morphnormal_vertex:pq,morphtarget_pars_vertex:mq,morphtarget_vertex:gq,normal_fragment_begin:vq,normal_fragment_maps:yq,normal_pars_fragment:bq,normal_pars_vertex:_q,normal_vertex:wq,normalmap_pars_fragment:xq,clearcoat_normal_fragment_begin:Sq,clearcoat_normal_fragment_maps:Eq,clearcoat_pars_fragment:Cq,iridescence_pars_fragment:Tq,opaque_fragment:Mq,packing:Aq,premultiplied_alpha_fragment:kq,project_vertex:Iq,dithering_fragment:Pq,dithering_pars_fragment:Rq,roughnessmap_fragment:Lq,roughnessmap_pars_fragment:Oq,shadowmap_pars_fragment:Nq,shadowmap_pars_vertex:Dq,shadowmap_vertex:Fq,shadowmask_pars_fragment:Bq,skinbase_vertex:Uq,skinning_pars_vertex:zq,skinning_vertex:$q,skinnormal_vertex:Vq,specularmap_fragment:Hq,specularmap_pars_fragment:Gq,tonemapping_fragment:Wq,tonemapping_pars_fragment:jq,transmission_fragment:Kq,transmission_pars_fragment:qq,uv_pars_fragment:Yq,uv_pars_vertex:Xq,uv_vertex:Zq,worldpos_vertex:Jq,background_vert:Qq,background_frag:eY,backgroundCube_vert:tY,backgroundCube_frag:nY,cube_vert:rY,cube_frag:sY,depth_vert:iY,depth_frag:oY,distanceRGBA_vert:aY,distanceRGBA_frag:lY,equirect_vert:cY,equirect_frag:uY,linedashed_vert:dY,linedashed_frag:hY,meshbasic_vert:fY,meshbasic_frag:pY,meshlambert_vert:mY,meshlambert_frag:gY,meshmatcap_vert:vY,meshmatcap_frag:yY,meshnormal_vert:bY,meshnormal_frag:_Y,meshphong_vert:wY,meshphong_frag:xY,meshphysical_vert:SY,meshphysical_frag:EY,meshtoon_vert:CY,meshtoon_frag:TY,points_vert:MY,points_frag:AY,shadow_vert:kY,shadow_frag:IY,sprite_vert:PY,sprite_frag:RY},hn={common:{diffuse:{value:new ar(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new tr},alphaMap:{value:null},alphaMapTransform:{value:new tr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new tr}},envmap:{envMap:{value:null},envMapRotation:{value:new tr},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new tr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new tr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new tr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new tr},normalScale:{value:new Dt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new tr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new tr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new tr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new tr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ar(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ar(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new tr},alphaTest:{value:0},uvTransform:{value:new tr}},sprite:{diffuse:{value:new ar(16777215)},opacity:{value:1},center:{value:new Dt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new tr},alphaMap:{value:null},alphaMapTransform:{value:new tr},alphaTest:{value:0}}},cl={basic:{uniforms:zi([hn.common,hn.specularmap,hn.envmap,hn.aomap,hn.lightmap,hn.fog]),vertexShader:rr.meshbasic_vert,fragmentShader:rr.meshbasic_frag},lambert:{uniforms:zi([hn.common,hn.specularmap,hn.envmap,hn.aomap,hn.lightmap,hn.emissivemap,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.fog,hn.lights,{emissive:{value:new ar(0)}}]),vertexShader:rr.meshlambert_vert,fragmentShader:rr.meshlambert_frag},phong:{uniforms:zi([hn.common,hn.specularmap,hn.envmap,hn.aomap,hn.lightmap,hn.emissivemap,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.fog,hn.lights,{emissive:{value:new ar(0)},specular:{value:new ar(1118481)},shininess:{value:30}}]),vertexShader:rr.meshphong_vert,fragmentShader:rr.meshphong_frag},standard:{uniforms:zi([hn.common,hn.envmap,hn.aomap,hn.lightmap,hn.emissivemap,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.roughnessmap,hn.metalnessmap,hn.fog,hn.lights,{emissive:{value:new ar(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:rr.meshphysical_vert,fragmentShader:rr.meshphysical_frag},toon:{uniforms:zi([hn.common,hn.aomap,hn.lightmap,hn.emissivemap,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.gradientmap,hn.fog,hn.lights,{emissive:{value:new ar(0)}}]),vertexShader:rr.meshtoon_vert,fragmentShader:rr.meshtoon_frag},matcap:{uniforms:zi([hn.common,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.fog,{matcap:{value:null}}]),vertexShader:rr.meshmatcap_vert,fragmentShader:rr.meshmatcap_frag},points:{uniforms:zi([hn.points,hn.fog]),vertexShader:rr.points_vert,fragmentShader:rr.points_frag},dashed:{uniforms:zi([hn.common,hn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:rr.linedashed_vert,fragmentShader:rr.linedashed_frag},depth:{uniforms:zi([hn.common,hn.displacementmap]),vertexShader:rr.depth_vert,fragmentShader:rr.depth_frag},normal:{uniforms:zi([hn.common,hn.bumpmap,hn.normalmap,hn.displacementmap,{opacity:{value:1}}]),vertexShader:rr.meshnormal_vert,fragmentShader:rr.meshnormal_frag},sprite:{uniforms:zi([hn.sprite,hn.fog]),vertexShader:rr.sprite_vert,fragmentShader:rr.sprite_frag},background:{uniforms:{uvTransform:{value:new tr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:rr.background_vert,fragmentShader:rr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new tr}},vertexShader:rr.backgroundCube_vert,fragmentShader:rr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:rr.cube_vert,fragmentShader:rr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:rr.equirect_vert,fragmentShader:rr.equirect_frag},distanceRGBA:{uniforms:zi([hn.common,hn.displacementmap,{referencePosition:{value:new Ze},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:rr.distanceRGBA_vert,fragmentShader:rr.distanceRGBA_frag},shadow:{uniforms:zi([hn.lights,hn.fog,{color:{value:new ar(0)},opacity:{value:1}}]),vertexShader:rr.shadow_vert,fragmentShader:rr.shadow_frag}};cl.physical={uniforms:zi([cl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new tr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new tr},clearcoatNormalScale:{value:new Dt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new tr},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new tr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new tr},sheen:{value:0},sheenColor:{value:new ar(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new tr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new tr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new tr},transmissionSamplerSize:{value:new Dt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new tr},attenuationDistance:{value:0},attenuationColor:{value:new ar(0)},specularColor:{value:new ar(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new tr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new tr},anisotropyVector:{value:new Dt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new tr}}]),vertexShader:rr.meshphysical_vert,fragmentShader:rr.meshphysical_frag};const U0={r:0,b:0,g:0},cd=new wl,LY=new Rr;function OY(t,e,n,r,s,i,o){const a=new ar(0);let l=i===!0?0:1,c,u,d=null,h=0,f=null;function m(_){let w=_.isScene===!0?_.background:null;return w&&w.isTexture&&(w=(_.backgroundBlurriness>0?n:e).get(w)),w}function v(_){let w=!1;const E=m(_);E===null?g(a,l):E&&E.isColor&&(g(E,1),w=!0);const C=t.xr.getEnvironmentBlendMode();C==="additive"?r.buffers.color.setClear(0,0,0,1,o):C==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(t.autoClear||w)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function y(_,w){const E=m(w);E&&(E.isCubeTexture||E.mapping===T1)?(u===void 0&&(u=new Os(new gv(1,1,1),new Na({name:"BackgroundCubeMaterial",uniforms:ip(cl.backgroundCube.uniforms),vertexShader:cl.backgroundCube.vertexShader,fragmentShader:cl.backgroundCube.fragmentShader,side:lo,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(C,T,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(u)),cd.copy(w.backgroundRotation),cd.x*=-1,cd.y*=-1,cd.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(cd.y*=-1,cd.z*=-1),u.material.uniforms.envMap.value=E,u.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(LY.makeRotationFromEuler(cd)),u.material.toneMapped=Sr.getTransfer(E.colorSpace)!==Vr,(d!==E||h!==E.version||f!==t.toneMapping)&&(u.material.needsUpdate=!0,d=E,h=E.version,f=t.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):E&&E.isTexture&&(c===void 0&&(c=new Os(new k1(2,2),new Na({name:"BackgroundMaterial",uniforms:ip(cl.background.uniforms),vertexShader:cl.background.vertexShader,fragmentShader:cl.background.fragmentShader,side:Ru,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(c)),c.material.uniforms.t2D.value=E,c.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,c.material.toneMapped=Sr.getTransfer(E.colorSpace)!==Vr,E.matrixAutoUpdate===!0&&E.updateMatrix(),c.material.uniforms.uvTransform.value.copy(E.matrix),(d!==E||h!==E.version||f!==t.toneMapping)&&(c.material.needsUpdate=!0,d=E,h=E.version,f=t.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function g(_,w){_.getRGB(U0,s6(t)),r.buffers.color.setClear(U0.r,U0.g,U0.b,w,o)}function S(){u!==void 0&&(u.geometry.dispose(),u.material.dispose()),c!==void 0&&(c.geometry.dispose(),c.material.dispose())}return{getClearColor:function(){return a},setClearColor:function(_,w=1){a.set(_),l=w,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,g(a,l)},render:v,addToRenderList:y,dispose:S}}function NY(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},s=h(null);let i=s,o=!1;function a(M,L,N,G,V){let X=!1;const F=d(G,N,L);i!==F&&(i=F,c(i.object)),X=f(M,G,N,V),X&&m(M,G,N,V),V!==null&&e.update(V,t.ELEMENT_ARRAY_BUFFER),(X||o)&&(o=!1,w(M,L,N,G),V!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(V).buffer))}function l(){return t.createVertexArray()}function c(M){return t.bindVertexArray(M)}function u(M){return t.deleteVertexArray(M)}function d(M,L,N){const G=N.wireframe===!0;let V=r[M.id];V===void 0&&(V={},r[M.id]=V);let X=V[L.id];X===void 0&&(X={},V[L.id]=X);let F=X[G];return F===void 0&&(F=h(l()),X[G]=F),F}function h(M){const L=[],N=[],G=[];for(let V=0;V<n;V++)L[V]=0,N[V]=0,G[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:N,attributeDivisors:G,object:M,attributes:{},index:null}}function f(M,L,N,G){const V=i.attributes,X=L.attributes;let F=0;const $=N.getAttributes();for(const O in $)if($[O].location>=0){const re=V[O];let q=X[O];if(q===void 0&&(O==="instanceMatrix"&&M.instanceMatrix&&(q=M.instanceMatrix),O==="instanceColor"&&M.instanceColor&&(q=M.instanceColor)),re===void 0||re.attribute!==q||q&&re.data!==q.data)return!0;F++}return i.attributesNum!==F||i.index!==G}function m(M,L,N,G){const V={},X=L.attributes;let F=0;const $=N.getAttributes();for(const O in $)if($[O].location>=0){let re=X[O];re===void 0&&(O==="instanceMatrix"&&M.instanceMatrix&&(re=M.instanceMatrix),O==="instanceColor"&&M.instanceColor&&(re=M.instanceColor));const q={};q.attribute=re,re&&re.data&&(q.data=re.data),V[O]=q,F++}i.attributes=V,i.attributesNum=F,i.index=G}function v(){const M=i.newAttributes;for(let L=0,N=M.length;L<N;L++)M[L]=0}function y(M){g(M,0)}function g(M,L){const N=i.newAttributes,G=i.enabledAttributes,V=i.attributeDivisors;N[M]=1,G[M]===0&&(t.enableVertexAttribArray(M),G[M]=1),V[M]!==L&&(t.vertexAttribDivisor(M,L),V[M]=L)}function S(){const M=i.newAttributes,L=i.enabledAttributes;for(let N=0,G=L.length;N<G;N++)L[N]!==M[N]&&(t.disableVertexAttribArray(N),L[N]=0)}function _(M,L,N,G,V,X,F){F===!0?t.vertexAttribIPointer(M,L,N,V,X):t.vertexAttribPointer(M,L,N,G,V,X)}function w(M,L,N,G){v();const V=G.attributes,X=N.getAttributes(),F=L.defaultAttributeValues;for(const $ in X){const O=X[$];if(O.location>=0){let z=V[$];if(z===void 0&&($==="instanceMatrix"&&M.instanceMatrix&&(z=M.instanceMatrix),$==="instanceColor"&&M.instanceColor&&(z=M.instanceColor)),z!==void 0){const re=z.normalized,q=z.itemSize,le=e.get(z);if(le===void 0)continue;const fe=le.buffer,se=le.type,ye=le.bytesPerElement,we=se===t.INT||se===t.UNSIGNED_INT||z.gpuType===hC;if(z.isInterleavedBufferAttribute){const ve=z.data,xe=ve.stride,je=z.offset;if(ve.isInstancedInterleavedBuffer){for(let nt=0;nt<O.locationSize;nt++)g(O.location+nt,ve.meshPerAttribute);M.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=ve.meshPerAttribute*ve.count)}else for(let nt=0;nt<O.locationSize;nt++)y(O.location+nt);t.bindBuffer(t.ARRAY_BUFFER,fe);for(let nt=0;nt<O.locationSize;nt++)_(O.location+nt,q/O.locationSize,se,re,xe*ye,(je+q/O.locationSize*nt)*ye,we)}else{if(z.isInstancedBufferAttribute){for(let ve=0;ve<O.locationSize;ve++)g(O.location+ve,z.meshPerAttribute);M.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=z.meshPerAttribute*z.count)}else for(let ve=0;ve<O.locationSize;ve++)y(O.location+ve);t.bindBuffer(t.ARRAY_BUFFER,fe);for(let ve=0;ve<O.locationSize;ve++)_(O.location+ve,q/O.locationSize,se,re,q*ye,q/O.locationSize*ve*ye,we)}}else if(F!==void 0){const re=F[$];if(re!==void 0)switch(re.length){case 2:t.vertexAttrib2fv(O.location,re);break;case 3:t.vertexAttrib3fv(O.location,re);break;case 4:t.vertexAttrib4fv(O.location,re);break;default:t.vertexAttrib1fv(O.location,re)}}}}S()}function E(){I();for(const M in r){const L=r[M];for(const N in L){const G=L[N];for(const V in G)u(G[V].object),delete G[V];delete L[N]}delete r[M]}}function C(M){if(r[M.id]===void 0)return;const L=r[M.id];for(const N in L){const G=L[N];for(const V in G)u(G[V].object),delete G[V];delete L[N]}delete r[M.id]}function T(M){for(const L in r){const N=r[L];if(N[M.id]===void 0)continue;const G=N[M.id];for(const V in G)u(G[V].object),delete G[V];delete N[M.id]}}function I(){k(),o=!0,i!==s&&(i=s,c(i.object))}function k(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:a,reset:I,resetDefaultState:k,dispose:E,releaseStatesOfGeometry:C,releaseStatesOfProgram:T,initAttributes:v,enableAttribute:y,disableUnusedAttributes:S}}function DY(t,e,n){let r;function s(c){r=c}function i(c,u){t.drawArrays(r,c,u),n.update(u,r,1)}function o(c,u,d){d!==0&&(t.drawArraysInstanced(r,c,u,d),n.update(u,r,d))}function a(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,d);let f=0;for(let m=0;m<d;m++)f+=u[m];n.update(f,r,1)}function l(c,u,d,h){if(d===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let m=0;m<c.length;m++)o(c[m],u[m],h[m]);else{f.multiDrawArraysInstancedWEBGL(r,c,0,u,0,h,0,d);let m=0;for(let v=0;v<d;v++)m+=u[v]*h[v];n.update(m,r,1)}}this.setMode=s,this.render=i,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function FY(t,e,n,r){let s;function i(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const T=e.get("EXT_texture_filter_anisotropic");s=t.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function o(T){return!(T!==Ma&&r.convert(T)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(T){const I=T===fv&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(T!==yc&&r.convert(T)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&T!==ic&&!I)}function l(T){if(T==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";T="mediump"}return T==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=n.logarithmicDepthBuffer===!0,h=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),f=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),m=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=t.getParameter(t.MAX_TEXTURE_SIZE),y=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),g=t.getParameter(t.MAX_VERTEX_ATTRIBS),S=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),_=t.getParameter(t.MAX_VARYING_VECTORS),w=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),E=m>0,C=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:i,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:h,maxTextures:f,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:y,maxAttributes:g,maxVertexUniforms:S,maxVaryings:_,maxFragmentUniforms:w,vertexTextures:E,maxSamples:C}}function BY(t){const e=this;let n=null,r=0,s=!1,i=!1;const o=new pu,a=new tr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const f=d.length!==0||h||r!==0||s;return s=h,r=d.length,f},this.beginShadows=function(){i=!0,u(null)},this.endShadows=function(){i=!1},this.setGlobalState=function(d,h){n=u(d,h,0)},this.setState=function(d,h,f){const m=d.clippingPlanes,v=d.clipIntersection,y=d.clipShadows,g=t.get(d);if(!s||m===null||m.length===0||i&&!y)i?u(null):c();else{const S=i?0:r,_=S*4;let w=g.clippingState||null;l.value=w,w=u(m,h,_,f);for(let E=0;E!==_;++E)w[E]=n[E];g.clippingState=w,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=S}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,h,f,m){const v=d!==null?d.length:0;let y=null;if(v!==0){if(y=l.value,m!==!0||y===null){const g=f+v*4,S=h.matrixWorldInverse;a.getNormalMatrix(S),(y===null||y.length<g)&&(y=new Float32Array(g));for(let _=0,w=f;_!==v;++_,w+=4)o.copy(d[_]).applyMatrix4(S,a),o.normal.toArray(y,w),y[w+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,y}}function UY(t){let e=new WeakMap;function n(o,a){return a===pS?o.mapping=ep:a===mS&&(o.mapping=tp),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===pS||a===mS)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new tj(l.height);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",s),n(c.texture,o.mapping)}else return null}}return o}function s(o){const a=o.target;a.removeEventListener("dispose",s);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function i(){e=new WeakMap}return{get:r,dispose:i}}const kf=4,D3=[.125,.215,.35,.446,.526,.582],Ed=20,Iw=new SC,F3=new ar;let Pw=null,Rw=0,Lw=0,Ow=!1;const yd=(1+Math.sqrt(5))/2,Xh=1/yd,B3=[new Ze(-yd,Xh,0),new Ze(yd,Xh,0),new Ze(-Xh,0,yd),new Ze(Xh,0,yd),new Ze(0,yd,-Xh),new Ze(0,yd,Xh),new Ze(-1,1,-1),new Ze(1,1,-1),new Ze(-1,1,1),new Ze(1,1,1)];class U3{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,s=100){Pw=this._renderer.getRenderTarget(),Rw=this._renderer.getActiveCubeFace(),Lw=this._renderer.getActiveMipmapLevel(),Ow=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,r,s,i),n>0&&this._blur(i,0,0,n),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=V3(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=$3(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Pw,Rw,Lw),this._renderer.xr.enabled=Ow,e.scissorTest=!1,z0(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===ep||e.mapping===tp?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Pw=this._renderer.getRenderTarget(),Rw=this._renderer.getActiveCubeFace(),Lw=this._renderer.getActiveMipmapLevel(),Ow=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Ta,minFilter:Ta,generateMipmaps:!1,type:fv,format:Ma,colorSpace:sp,depthBuffer:!1},s=z3(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=z3(e,n,r);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=zY(i)),this._blurMaterial=$Y(i,e,n)}return s}_compileMaterial(e){const n=new Os(this._lodPlanes[0],e);this._renderer.compile(n,Iw)}_sceneToCubeUV(e,n,r,s){const a=new xa(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(F3),u.toneMapping=Au,u.autoClear=!1;const f=new mv({name:"PMREM.Background",side:lo,depthWrite:!1,depthTest:!1}),m=new Os(new gv,f);let v=!1;const y=e.background;y?y.isColor&&(f.color.copy(y),e.background=null,v=!0):(f.color.copy(F3),v=!0);for(let g=0;g<6;g++){const S=g%3;S===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):S===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const _=this._cubeSize;z0(s,S*_,g>2?_:0,_,_),u.setRenderTarget(s),v&&u.render(m,a),u.render(e,a)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=y}_textureToCubeUV(e,n){const r=this._renderer,s=e.mapping===ep||e.mapping===tp;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=V3()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=$3());const i=s?this._cubemapMaterial:this._equirectMaterial,o=new Os(this._lodPlanes[0],i),a=i.uniforms;a.envMap.value=e;const l=this._cubeSize;z0(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,Iw)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const s=this._lodPlanes.length;for(let i=1;i<s;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=B3[(s-i-1)%B3.length];this._blur(e,i-1,i,o,a)}n.autoClear=r}_blur(e,n,r,s,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,s,"latitudinal",i),this._halfBlur(o,e,r,r,s,"longitudinal",i)}_halfBlur(e,n,r,s,i,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Os(this._lodPlanes[s],c),h=c.uniforms,f=this._sizeLods[r]-1,m=isFinite(i)?Math.PI/(2*f):2*Math.PI/(2*Ed-1),v=i/m,y=isFinite(i)?1+Math.floor(u*v):Ed;y>Ed&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${Ed}`);const g=[];let S=0;for(let T=0;T<Ed;++T){const I=T/v,k=Math.exp(-I*I/2);g.push(k),T===0?S+=k:T<y&&(S+=2*k)}for(let T=0;T<g.length;T++)g[T]=g[T]/S;h.envMap.value=e.texture,h.samples.value=y,h.weights.value=g,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:_}=this;h.dTheta.value=m,h.mipInt.value=_-r;const w=this._sizeLods[s],E=3*w*(s>_-kf?s-_+kf:0),C=4*(this._cubeSize-w);z0(n,E,C,3*w,2*w),l.setRenderTarget(n),l.render(d,Iw)}}function zY(t){const e=[],n=[],r=[];let s=t;const i=t-kf+1+D3.length;for(let o=0;o<i;o++){const a=Math.pow(2,s);n.push(a);let l=1/a;o>t-kf?l=D3[o-t+kf-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,m=6,v=3,y=2,g=1,S=new Float32Array(v*m*f),_=new Float32Array(y*m*f),w=new Float32Array(g*m*f);for(let C=0;C<f;C++){const T=C%3*2/3-1,I=C>2?0:-1,k=[T,I,0,T+2/3,I,0,T+2/3,I+1,0,T,I,0,T+2/3,I+1,0,T,I+1,0];S.set(k,v*m*C),_.set(h,y*m*C);const M=[C,C,C,C,C,C];w.set(M,g*m*C)}const E=new mr;E.setAttribute("position",new Ar(S,v)),E.setAttribute("uv",new Ar(_,y)),E.setAttribute("faceIndex",new Ar(w,g)),e.push(E),s>kf&&s--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function z3(t,e,n){const r=new Xd(t,e,n);return r.texture.mapping=T1,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function z0(t,e,n,r,s){t.viewport.set(e,n,r,s),t.scissor.set(e,n,r,s)}function $Y(t,e,n){const r=new Float32Array(Ed),s=new Ze(0,1,0);return new Na({name:"SphericalGaussianBlur",defines:{n:Ed,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:EC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Mu,depthTest:!1,depthWrite:!1})}function $3(){return new Na({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:EC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Mu,depthTest:!1,depthWrite:!1})}function V3(){return new Na({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:EC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Mu,depthTest:!1,depthWrite:!1})}function EC(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function VY(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===pS||l===mS,u=l===ep||l===tp;if(c||u){let d=e.get(a);const h=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return n===null&&(n=new U3(t)),d=c?n.fromEquirectangular(a,d):n.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const f=a.image;return c&&f&&f.height>0||u&&f&&s(f)?(n===null&&(n=new U3(t)),d=c?n.fromEquirectangular(a):n.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",i),d.texture):null}}}return a}function s(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function i(a){const l=a.target;l.removeEventListener("dispose",i);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function HY(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let s;switch(r){case"WEBGL_depth_texture":s=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=t.getExtension(r)}return e[r]=s,s}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const s=n(r);return s===null&&gf("THREE.WebGLRenderer: "+r+" extension not supported."),s}}}function GY(t,e,n,r){const s={},i=new WeakMap;function o(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const m in h.attributes)e.remove(h.attributes[m]);h.removeEventListener("dispose",o),delete s[h.id];const f=i.get(h);f&&(e.remove(f),i.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function a(d,h){return s[h.id]===!0||(h.addEventListener("dispose",o),s[h.id]=!0,n.memory.geometries++),h}function l(d){const h=d.attributes;for(const f in h)e.update(h[f],t.ARRAY_BUFFER)}function c(d){const h=[],f=d.index,m=d.attributes.position;let v=0;if(f!==null){const S=f.array;v=f.version;for(let _=0,w=S.length;_<w;_+=3){const E=S[_+0],C=S[_+1],T=S[_+2];h.push(E,C,C,T,T,E)}}else if(m!==void 0){const S=m.array;v=m.version;for(let _=0,w=S.length/3-1;_<w;_+=3){const E=_+0,C=_+1,T=_+2;h.push(E,C,C,T,T,E)}}else return;const y=new(e6(h)?_C:M1)(h,1);y.version=v;const g=i.get(d);g&&e.remove(g),i.set(d,y)}function u(d){const h=i.get(d);if(h){const f=d.index;f!==null&&h.version<f.version&&c(d)}else c(d);return i.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function WY(t,e,n){let r;function s(h){r=h}let i,o;function a(h){i=h.type,o=h.bytesPerElement}function l(h,f){t.drawElements(r,f,i,h*o),n.update(f,r,1)}function c(h,f,m){m!==0&&(t.drawElementsInstanced(r,f,i,h*o,m),n.update(f,r,m))}function u(h,f,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,f,0,i,h,0,m);let y=0;for(let g=0;g<m;g++)y+=f[g];n.update(y,r,1)}function d(h,f,m,v){if(m===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let g=0;g<h.length;g++)c(h[g]/o,f[g],v[g]);else{y.multiDrawElementsInstancedWEBGL(r,f,0,i,h,0,v,0,m);let g=0;for(let S=0;S<m;S++)g+=f[S]*v[S];n.update(g,r,1)}}this.setMode=s,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function jY(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(i,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(i/3);break;case t.LINES:n.lines+=a*(i/2);break;case t.LINE_STRIP:n.lines+=a*(i-1);break;case t.LINE_LOOP:n.lines+=a*i;break;case t.POINTS:n.points+=a*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:s,update:r}}function KY(t,e,n){const r=new WeakMap,s=new ps;function i(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0;let h=r.get(a);if(h===void 0||h.count!==d){let k=function(){T.dispose(),r.delete(a),a.removeEventListener("dispose",k)};h!==void 0&&h.texture.dispose();const f=a.morphAttributes.position!==void 0,m=a.morphAttributes.normal!==void 0,v=a.morphAttributes.color!==void 0,y=a.morphAttributes.position||[],g=a.morphAttributes.normal||[],S=a.morphAttributes.color||[];let _=0;f===!0&&(_=1),m===!0&&(_=2),v===!0&&(_=3);let w=a.attributes.position.count*_,E=1;w>e.maxTextureSize&&(E=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const C=new Float32Array(w*E*4*d),T=new n6(C,w,E,d);T.type=ic,T.needsUpdate=!0;const I=_*4;for(let M=0;M<d;M++){const L=y[M],N=g[M],G=S[M],V=w*E*4*M;for(let X=0;X<L.count;X++){const F=X*I;f===!0&&(s.fromBufferAttribute(L,X),C[V+F+0]=s.x,C[V+F+1]=s.y,C[V+F+2]=s.z,C[V+F+3]=0),m===!0&&(s.fromBufferAttribute(N,X),C[V+F+4]=s.x,C[V+F+5]=s.y,C[V+F+6]=s.z,C[V+F+7]=0),v===!0&&(s.fromBufferAttribute(G,X),C[V+F+8]=s.x,C[V+F+9]=s.y,C[V+F+10]=s.z,C[V+F+11]=G.itemSize===4?s.w:1)}}h={count:d,texture:T,size:new Dt(w,E)},r.set(a,h),a.addEventListener("dispose",k)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",o.morphTexture,n);else{let f=0;for(let v=0;v<c.length;v++)f+=c[v];const m=a.morphTargetsRelative?1:1-f;l.getUniforms().setValue(t,"morphTargetBaseInfluence",m),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",h.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",h.size)}return{update:i}}function qY(t,e,n,r){let s=new WeakMap;function i(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(s.get(d)!==c&&(e.update(d),s.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),s.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),s.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;s.get(h)!==c&&(h.update(),s.set(h,c))}return d}function o(){s=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:i,dispose:o}}const x6=new Ti,H3=new h6(1,1),S6=new n6,E6=new zW,C6=new a6,G3=[],W3=[],j3=new Float32Array(16),K3=new Float32Array(9),q3=new Float32Array(4);function Bp(t,e,n){const r=t[0];if(r<=0||r>0)return t;const s=e*n;let i=G3[s];if(i===void 0&&(i=new Float32Array(s),G3[s]=i),e!==0){r.toArray(i,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(i,a)}return i}function Ks(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function qs(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function R1(t,e){let n=W3[e];n===void 0&&(n=new Int32Array(e),W3[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function YY(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function XY(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ks(n,e))return;t.uniform2fv(this.addr,e),qs(n,e)}}function ZY(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ks(n,e))return;t.uniform3fv(this.addr,e),qs(n,e)}}function JY(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ks(n,e))return;t.uniform4fv(this.addr,e),qs(n,e)}}function QY(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ks(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),qs(n,e)}else{if(Ks(n,r))return;q3.set(r),t.uniformMatrix2fv(this.addr,!1,q3),qs(n,r)}}function eX(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ks(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),qs(n,e)}else{if(Ks(n,r))return;K3.set(r),t.uniformMatrix3fv(this.addr,!1,K3),qs(n,r)}}function tX(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ks(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),qs(n,e)}else{if(Ks(n,r))return;j3.set(r),t.uniformMatrix4fv(this.addr,!1,j3),qs(n,r)}}function nX(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function rX(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ks(n,e))return;t.uniform2iv(this.addr,e),qs(n,e)}}function sX(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ks(n,e))return;t.uniform3iv(this.addr,e),qs(n,e)}}function iX(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ks(n,e))return;t.uniform4iv(this.addr,e),qs(n,e)}}function oX(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function aX(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ks(n,e))return;t.uniform2uiv(this.addr,e),qs(n,e)}}function lX(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ks(n,e))return;t.uniform3uiv(this.addr,e),qs(n,e)}}function cX(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ks(n,e))return;t.uniform4uiv(this.addr,e),qs(n,e)}}function uX(t,e,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(t.uniform1i(this.addr,s),r[0]=s);let i;this.type===t.SAMPLER_2D_SHADOW?(H3.compareFunction=QD,i=H3):i=x6,n.setTexture2D(e||i,s)}function dX(t,e,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(t.uniform1i(this.addr,s),r[0]=s),n.setTexture3D(e||E6,s)}function hX(t,e,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(t.uniform1i(this.addr,s),r[0]=s),n.setTextureCube(e||C6,s)}function fX(t,e,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(t.uniform1i(this.addr,s),r[0]=s),n.setTexture2DArray(e||S6,s)}function pX(t){switch(t){case 5126:return YY;case 35664:return XY;case 35665:return ZY;case 35666:return JY;case 35674:return QY;case 35675:return eX;case 35676:return tX;case 5124:case 35670:return nX;case 35667:case 35671:return rX;case 35668:case 35672:return sX;case 35669:case 35673:return iX;case 5125:return oX;case 36294:return aX;case 36295:return lX;case 36296:return cX;case 35678:case 36198:case 36298:case 36306:case 35682:return uX;case 35679:case 36299:case 36307:return dX;case 35680:case 36300:case 36308:case 36293:return hX;case 36289:case 36303:case 36311:case 36292:return fX}}function mX(t,e){t.uniform1fv(this.addr,e)}function gX(t,e){const n=Bp(e,this.size,2);t.uniform2fv(this.addr,n)}function vX(t,e){const n=Bp(e,this.size,3);t.uniform3fv(this.addr,n)}function yX(t,e){const n=Bp(e,this.size,4);t.uniform4fv(this.addr,n)}function bX(t,e){const n=Bp(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function _X(t,e){const n=Bp(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function wX(t,e){const n=Bp(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function xX(t,e){t.uniform1iv(this.addr,e)}function SX(t,e){t.uniform2iv(this.addr,e)}function EX(t,e){t.uniform3iv(this.addr,e)}function CX(t,e){t.uniform4iv(this.addr,e)}function TX(t,e){t.uniform1uiv(this.addr,e)}function MX(t,e){t.uniform2uiv(this.addr,e)}function AX(t,e){t.uniform3uiv(this.addr,e)}function kX(t,e){t.uniform4uiv(this.addr,e)}function IX(t,e,n){const r=this.cache,s=e.length,i=R1(n,s);Ks(r,i)||(t.uniform1iv(this.addr,i),qs(r,i));for(let o=0;o!==s;++o)n.setTexture2D(e[o]||x6,i[o])}function PX(t,e,n){const r=this.cache,s=e.length,i=R1(n,s);Ks(r,i)||(t.uniform1iv(this.addr,i),qs(r,i));for(let o=0;o!==s;++o)n.setTexture3D(e[o]||E6,i[o])}function RX(t,e,n){const r=this.cache,s=e.length,i=R1(n,s);Ks(r,i)||(t.uniform1iv(this.addr,i),qs(r,i));for(let o=0;o!==s;++o)n.setTextureCube(e[o]||C6,i[o])}function LX(t,e,n){const r=this.cache,s=e.length,i=R1(n,s);Ks(r,i)||(t.uniform1iv(this.addr,i),qs(r,i));for(let o=0;o!==s;++o)n.setTexture2DArray(e[o]||S6,i[o])}function OX(t){switch(t){case 5126:return mX;case 35664:return gX;case 35665:return vX;case 35666:return yX;case 35674:return bX;case 35675:return _X;case 35676:return wX;case 5124:case 35670:return xX;case 35667:case 35671:return SX;case 35668:case 35672:return EX;case 35669:case 35673:return CX;case 5125:return TX;case 36294:return MX;case 36295:return AX;case 36296:return kX;case 35678:case 36198:case 36298:case 36306:case 35682:return IX;case 35679:case 36299:case 36307:return PX;case 35680:case 36300:case 36308:case 36293:return RX;case 36289:case 36303:case 36311:case 36292:return LX}}class NX{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=pX(n.type)}}class DX{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=OX(n.type)}}class FX{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const s=this.seq;for(let i=0,o=s.length;i!==o;++i){const a=s[i];a.setValue(e,n[a.id],r)}}}const Nw=/(\w+)(\])?(\[|\.)?/g;function Y3(t,e){t.seq.push(e),t.map[e.id]=e}function BX(t,e,n){const r=t.name,s=r.length;for(Nw.lastIndex=0;;){const i=Nw.exec(r),o=Nw.lastIndex;let a=i[1];const l=i[2]==="]",c=i[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===s){Y3(n,c===void 0?new NX(a,t,e):new DX(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new FX(a),Y3(n,d)),n=d}}}class Wy{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let s=0;s<r;++s){const i=e.getActiveUniform(n,s),o=e.getUniformLocation(n,i.name);BX(i,o,this)}}setValue(e,n,r,s){const i=this.map[n];i!==void 0&&i.setValue(e,r,s)}setOptional(e,n,r){const s=n[r];s!==void 0&&this.setValue(e,r,s)}static upload(e,n,r,s){for(let i=0,o=n.length;i!==o;++i){const a=n[i],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,s)}}static seqWithValue(e,n){const r=[];for(let s=0,i=e.length;s!==i;++s){const o=e[s];o.id in n&&r.push(o)}return r}}function X3(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const UX=37297;let zX=0;function $X(t,e){const n=t.split(`
`),r=[],s=Math.max(e-6,0),i=Math.min(e+6,n.length);for(let o=s;o<i;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}const Z3=new tr;function VX(t){Sr._getMatrix(Z3,Sr.workingColorSpace,t);const e=`mat3( ${Z3.elements.map(n=>n.toFixed(4))} )`;switch(Sr.getTransfer(t)){case wb:return[e,"LinearTransferOETF"];case Vr:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function J3(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),s=t.getShaderInfoLog(e).trim();if(r&&s==="")return"";const i=/ERROR: 0:(\d+)/.exec(s);if(i){const o=parseInt(i[1]);return n.toUpperCase()+`

`+s+`

`+$X(t.getShaderSource(e),o)}else return s}function HX(t,e){const n=VX(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function GX(t,e){let n;switch(e){case XG:n="Linear";break;case ZG:n="Reinhard";break;case JG:n="Cineon";break;case QG:n="ACESFilmic";break;case tW:n="AgX";break;case nW:n="Neutral";break;case eW:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const $0=new Ze;function WX(){Sr.getLuminanceCoefficients($0);const t=$0.x.toFixed(4),e=$0.y.toFixed(4),n=$0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function jX(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Am).join(`
`)}function KX(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function qX(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let s=0;s<r;s++){const i=t.getActiveAttrib(e,s),o=i.name;let a=1;i.type===t.FLOAT_MAT2&&(a=2),i.type===t.FLOAT_MAT3&&(a=3),i.type===t.FLOAT_MAT4&&(a=4),n[o]={type:i.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function Am(t){return t!==""}function Q3(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ek(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const YX=/^[ \t]*#include +<([\w\d./]+)>/gm;function ZS(t){return t.replace(YX,ZX)}const XX=new Map;function ZX(t,e){let n=rr[e];if(n===void 0){const r=XX.get(e);if(r!==void 0)n=rr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return ZS(n)}const JX=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function tk(t){return t.replace(JX,QX)}function QX(t,e,n,r){let s="";for(let i=parseInt(e);i<parseInt(n);i++)s+=r.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return s}function nk(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function eZ(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===zD?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===kG?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Zl&&(e="SHADOWMAP_TYPE_VSM"),e}function tZ(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ep:case tp:e="ENVMAP_TYPE_CUBE";break;case T1:e="ENVMAP_TYPE_CUBE_UV";break}return e}function nZ(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case tp:e="ENVMAP_MODE_REFRACTION";break}return e}function rZ(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case $D:e="ENVMAP_BLENDING_MULTIPLY";break;case qG:e="ENVMAP_BLENDING_MIX";break;case YG:e="ENVMAP_BLENDING_ADD";break}return e}function sZ(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function iZ(t,e,n,r){const s=t.getContext(),i=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=eZ(n),c=tZ(n),u=nZ(n),d=rZ(n),h=sZ(n),f=jX(n),m=KX(i),v=s.createProgram();let y,g,S=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(y=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(Am).join(`
`),y.length>0&&(y+=`
`),g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(Am).join(`
`),g.length>0&&(g+=`
`)):(y=[nk(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Am).join(`
`),g=[nk(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Au?"#define TONE_MAPPING":"",n.toneMapping!==Au?rr.tonemapping_pars_fragment:"",n.toneMapping!==Au?GX("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",rr.colorspace_pars_fragment,HX("linearToOutputTexel",n.outputColorSpace),WX(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Am).join(`
`)),o=ZS(o),o=Q3(o,n),o=ek(o,n),a=ZS(a),a=Q3(a,n),a=ek(a,n),o=tk(o),a=tk(a),n.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,y=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,g=["#define varying in",n.glslVersion===e3?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===e3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const _=S+y+o,w=S+g+a,E=X3(s,s.VERTEX_SHADER,_),C=X3(s,s.FRAGMENT_SHADER,w);s.attachShader(v,E),s.attachShader(v,C),n.index0AttributeName!==void 0?s.bindAttribLocation(v,0,n.index0AttributeName):n.morphTargets===!0&&s.bindAttribLocation(v,0,"position"),s.linkProgram(v);function T(L){if(t.debug.checkShaderErrors){const N=s.getProgramInfoLog(v).trim(),G=s.getShaderInfoLog(E).trim(),V=s.getShaderInfoLog(C).trim();let X=!0,F=!0;if(s.getProgramParameter(v,s.LINK_STATUS)===!1)if(X=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(s,v,E,C);else{const $=J3(s,E,"vertex"),O=J3(s,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(v,s.VALIDATE_STATUS)+`

Material Name: `+L.name+`
Material Type: `+L.type+`

Program Info Log: `+N+`
`+$+`
`+O)}else N!==""?console.warn("THREE.WebGLProgram: Program Info Log:",N):(G===""||V==="")&&(F=!1);F&&(L.diagnostics={runnable:X,programLog:N,vertexShader:{log:G,prefix:y},fragmentShader:{log:V,prefix:g}})}s.deleteShader(E),s.deleteShader(C),I=new Wy(s,v),k=qX(s,v)}let I;this.getUniforms=function(){return I===void 0&&T(this),I};let k;this.getAttributes=function(){return k===void 0&&T(this),k};let M=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return M===!1&&(M=s.getProgramParameter(v,UX)),M},this.destroy=function(){r.releaseStatesOfProgram(this),s.deleteProgram(v),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=zX++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=E,this.fragmentShader=C,this}let oZ=0;class aZ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,s=this._getShaderStage(n),i=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(s)===!1&&(o.add(s),s.usedTimes++),o.has(i)===!1&&(o.add(i),i.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new lZ(e),n.set(e,r)),r}}class lZ{constructor(e){this.id=oZ++,this.code=e,this.usedTimes=0}}function cZ(t,e,n,r,s,i,o){const a=new bC,l=new aZ,c=new Set,u=[],d=s.logarithmicDepthBuffer,h=s.vertexTextures;let f=s.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(k){return c.add(k),k===0?"uv":`uv${k}`}function y(k,M,L,N,G){const V=N.fog,X=G.geometry,F=k.isMeshStandardMaterial?N.environment:null,$=(k.isMeshStandardMaterial?n:e).get(k.envMap||F),O=$&&$.mapping===T1?$.image.height:null,z=m[k.type];k.precision!==null&&(f=s.getMaxPrecision(k.precision),f!==k.precision&&console.warn("THREE.WebGLProgram.getParameters:",k.precision,"not supported, using",f,"instead."));const re=X.morphAttributes.position||X.morphAttributes.normal||X.morphAttributes.color,q=re!==void 0?re.length:0;let le=0;X.morphAttributes.position!==void 0&&(le=1),X.morphAttributes.normal!==void 0&&(le=2),X.morphAttributes.color!==void 0&&(le=3);let fe,se,ye,we;if(z){const on=cl[z];fe=on.vertexShader,se=on.fragmentShader}else fe=k.vertexShader,se=k.fragmentShader,l.update(k),ye=l.getVertexShaderID(k),we=l.getFragmentShaderID(k);const ve=t.getRenderTarget(),xe=t.state.buffers.depth.getReversed(),je=G.isInstancedMesh===!0,nt=G.isBatchedMesh===!0,ue=!!k.map,j=!!k.matcap,he=!!$,K=!!k.aoMap,Fe=!!k.lightMap,Oe=!!k.bumpMap,Re=!!k.normalMap,te=!!k.displacementMap,oe=!!k.emissiveMap,Ee=!!k.metalnessMap,J=!!k.roughnessMap,Q=k.anisotropy>0,_e=k.clearcoat>0,ie=k.dispersion>0,Te=k.iridescence>0,We=k.sheen>0,ut=k.transmission>0,lt=Q&&!!k.anisotropyMap,St=_e&&!!k.clearcoatMap,Ot=_e&&!!k.clearcoatNormalMap,et=_e&&!!k.clearcoatRoughnessMap,ht=Te&&!!k.iridescenceMap,Mt=Te&&!!k.iridescenceThicknessMap,ze=We&&!!k.sheenColorMap,Me=We&&!!k.sheenRoughnessMap,be=!!k.specularMap,Ve=!!k.specularColorMap,mt=!!k.specularIntensityMap,Ue=ut&&!!k.transmissionMap,Ct=ut&&!!k.thicknessMap,st=!!k.gradientMap,vt=!!k.alphaMap,Rt=k.alphaTest>0,jt=!!k.alphaHash,dn=!!k.extensions;let sn=Au;k.toneMapped&&(ve===null||ve.isXRRenderTarget===!0)&&(sn=t.toneMapping);const At={shaderID:z,shaderType:k.type,shaderName:k.name,vertexShader:fe,fragmentShader:se,defines:k.defines,customVertexShaderID:ye,customFragmentShaderID:we,isRawShaderMaterial:k.isRawShaderMaterial===!0,glslVersion:k.glslVersion,precision:f,batching:nt,batchingColor:nt&&G._colorsTexture!==null,instancing:je,instancingColor:je&&G.instanceColor!==null,instancingMorph:je&&G.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:ve===null?t.outputColorSpace:ve.isXRRenderTarget===!0?ve.texture.colorSpace:sp,alphaToCoverage:!!k.alphaToCoverage,map:ue,matcap:j,envMap:he,envMapMode:he&&$.mapping,envMapCubeUVHeight:O,aoMap:K,lightMap:Fe,bumpMap:Oe,normalMap:Re,displacementMap:h&&te,emissiveMap:oe,normalMapObjectSpace:Re&&k.normalMapType===aW,normalMapTangentSpace:Re&&k.normalMapType===oW,metalnessMap:Ee,roughnessMap:J,anisotropy:Q,anisotropyMap:lt,clearcoat:_e,clearcoatMap:St,clearcoatNormalMap:Ot,clearcoatRoughnessMap:et,dispersion:ie,iridescence:Te,iridescenceMap:ht,iridescenceThicknessMap:Mt,sheen:We,sheenColorMap:ze,sheenRoughnessMap:Me,specularMap:be,specularColorMap:Ve,specularIntensityMap:mt,transmission:ut,transmissionMap:Ue,thicknessMap:Ct,gradientMap:st,opaque:k.transparent===!1&&k.blending===Lf&&k.alphaToCoverage===!1,alphaMap:vt,alphaTest:Rt,alphaHash:jt,combine:k.combine,mapUv:ue&&v(k.map.channel),aoMapUv:K&&v(k.aoMap.channel),lightMapUv:Fe&&v(k.lightMap.channel),bumpMapUv:Oe&&v(k.bumpMap.channel),normalMapUv:Re&&v(k.normalMap.channel),displacementMapUv:te&&v(k.displacementMap.channel),emissiveMapUv:oe&&v(k.emissiveMap.channel),metalnessMapUv:Ee&&v(k.metalnessMap.channel),roughnessMapUv:J&&v(k.roughnessMap.channel),anisotropyMapUv:lt&&v(k.anisotropyMap.channel),clearcoatMapUv:St&&v(k.clearcoatMap.channel),clearcoatNormalMapUv:Ot&&v(k.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:et&&v(k.clearcoatRoughnessMap.channel),iridescenceMapUv:ht&&v(k.iridescenceMap.channel),iridescenceThicknessMapUv:Mt&&v(k.iridescenceThicknessMap.channel),sheenColorMapUv:ze&&v(k.sheenColorMap.channel),sheenRoughnessMapUv:Me&&v(k.sheenRoughnessMap.channel),specularMapUv:be&&v(k.specularMap.channel),specularColorMapUv:Ve&&v(k.specularColorMap.channel),specularIntensityMapUv:mt&&v(k.specularIntensityMap.channel),transmissionMapUv:Ue&&v(k.transmissionMap.channel),thicknessMapUv:Ct&&v(k.thicknessMap.channel),alphaMapUv:vt&&v(k.alphaMap.channel),vertexTangents:!!X.attributes.tangent&&(Re||Q),vertexColors:k.vertexColors,vertexAlphas:k.vertexColors===!0&&!!X.attributes.color&&X.attributes.color.itemSize===4,pointsUvs:G.isPoints===!0&&!!X.attributes.uv&&(ue||vt),fog:!!V,useFog:k.fog===!0,fogExp2:!!V&&V.isFogExp2,flatShading:k.flatShading===!0,sizeAttenuation:k.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:xe,skinning:G.isSkinnedMesh===!0,morphTargets:X.morphAttributes.position!==void 0,morphNormals:X.morphAttributes.normal!==void 0,morphColors:X.morphAttributes.color!==void 0,morphTargetsCount:q,morphTextureStride:le,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:k.dithering,shadowMapEnabled:t.shadowMap.enabled&&L.length>0,shadowMapType:t.shadowMap.type,toneMapping:sn,decodeVideoTexture:ue&&k.map.isVideoTexture===!0&&Sr.getTransfer(k.map.colorSpace)===Vr,decodeVideoTextureEmissive:oe&&k.emissiveMap.isVideoTexture===!0&&Sr.getTransfer(k.emissiveMap.colorSpace)===Vr,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===dl,flipSided:k.side===lo,useDepthPacking:k.depthPacking>=0,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionClipCullDistance:dn&&k.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(dn&&k.extensions.multiDraw===!0||nt)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:k.customProgramCacheKey()};return At.vertexUv1s=c.has(1),At.vertexUv2s=c.has(2),At.vertexUv3s=c.has(3),c.clear(),At}function g(k){const M=[];if(k.shaderID?M.push(k.shaderID):(M.push(k.customVertexShaderID),M.push(k.customFragmentShaderID)),k.defines!==void 0)for(const L in k.defines)M.push(L),M.push(k.defines[L]);return k.isRawShaderMaterial===!1&&(S(M,k),_(M,k),M.push(t.outputColorSpace)),M.push(k.customProgramCacheKey),M.join()}function S(k,M){k.push(M.precision),k.push(M.outputColorSpace),k.push(M.envMapMode),k.push(M.envMapCubeUVHeight),k.push(M.mapUv),k.push(M.alphaMapUv),k.push(M.lightMapUv),k.push(M.aoMapUv),k.push(M.bumpMapUv),k.push(M.normalMapUv),k.push(M.displacementMapUv),k.push(M.emissiveMapUv),k.push(M.metalnessMapUv),k.push(M.roughnessMapUv),k.push(M.anisotropyMapUv),k.push(M.clearcoatMapUv),k.push(M.clearcoatNormalMapUv),k.push(M.clearcoatRoughnessMapUv),k.push(M.iridescenceMapUv),k.push(M.iridescenceThicknessMapUv),k.push(M.sheenColorMapUv),k.push(M.sheenRoughnessMapUv),k.push(M.specularMapUv),k.push(M.specularColorMapUv),k.push(M.specularIntensityMapUv),k.push(M.transmissionMapUv),k.push(M.thicknessMapUv),k.push(M.combine),k.push(M.fogExp2),k.push(M.sizeAttenuation),k.push(M.morphTargetsCount),k.push(M.morphAttributeCount),k.push(M.numDirLights),k.push(M.numPointLights),k.push(M.numSpotLights),k.push(M.numSpotLightMaps),k.push(M.numHemiLights),k.push(M.numRectAreaLights),k.push(M.numDirLightShadows),k.push(M.numPointLightShadows),k.push(M.numSpotLightShadows),k.push(M.numSpotLightShadowsWithMaps),k.push(M.numLightProbes),k.push(M.shadowMapType),k.push(M.toneMapping),k.push(M.numClippingPlanes),k.push(M.numClipIntersection),k.push(M.depthPacking)}function _(k,M){a.disableAll(),M.supportsVertexTextures&&a.enable(0),M.instancing&&a.enable(1),M.instancingColor&&a.enable(2),M.instancingMorph&&a.enable(3),M.matcap&&a.enable(4),M.envMap&&a.enable(5),M.normalMapObjectSpace&&a.enable(6),M.normalMapTangentSpace&&a.enable(7),M.clearcoat&&a.enable(8),M.iridescence&&a.enable(9),M.alphaTest&&a.enable(10),M.vertexColors&&a.enable(11),M.vertexAlphas&&a.enable(12),M.vertexUv1s&&a.enable(13),M.vertexUv2s&&a.enable(14),M.vertexUv3s&&a.enable(15),M.vertexTangents&&a.enable(16),M.anisotropy&&a.enable(17),M.alphaHash&&a.enable(18),M.batching&&a.enable(19),M.dispersion&&a.enable(20),M.batchingColor&&a.enable(21),k.push(a.mask),a.disableAll(),M.fog&&a.enable(0),M.useFog&&a.enable(1),M.flatShading&&a.enable(2),M.logarithmicDepthBuffer&&a.enable(3),M.reverseDepthBuffer&&a.enable(4),M.skinning&&a.enable(5),M.morphTargets&&a.enable(6),M.morphNormals&&a.enable(7),M.morphColors&&a.enable(8),M.premultipliedAlpha&&a.enable(9),M.shadowMapEnabled&&a.enable(10),M.doubleSided&&a.enable(11),M.flipSided&&a.enable(12),M.useDepthPacking&&a.enable(13),M.dithering&&a.enable(14),M.transmission&&a.enable(15),M.sheen&&a.enable(16),M.opaque&&a.enable(17),M.pointsUvs&&a.enable(18),M.decodeVideoTexture&&a.enable(19),M.decodeVideoTextureEmissive&&a.enable(20),M.alphaToCoverage&&a.enable(21),k.push(a.mask)}function w(k){const M=m[k.type];let L;if(M){const N=cl[M];L=i6.clone(N.uniforms)}else L=k.uniforms;return L}function E(k,M){let L;for(let N=0,G=u.length;N<G;N++){const V=u[N];if(V.cacheKey===M){L=V,++L.usedTimes;break}}return L===void 0&&(L=new iZ(t,M,k,i),u.push(L)),L}function C(k){if(--k.usedTimes===0){const M=u.indexOf(k);u[M]=u[u.length-1],u.pop(),k.destroy()}}function T(k){l.remove(k)}function I(){l.dispose()}return{getParameters:y,getProgramCacheKey:g,getUniforms:w,acquireProgram:E,releaseProgram:C,releaseShaderCache:T,programs:u,dispose:I}}function uZ(){let t=new WeakMap;function e(o){return t.has(o)}function n(o){let a=t.get(o);return a===void 0&&(a={},t.set(o,a)),a}function r(o){t.delete(o)}function s(o,a,l){t.get(o)[a]=l}function i(){t=new WeakMap}return{has:e,get:n,remove:r,update:s,dispose:i}}function dZ(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function rk(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function sk(){const t=[];let e=0;const n=[],r=[],s=[];function i(){e=0,n.length=0,r.length=0,s.length=0}function o(d,h,f,m,v,y){let g=t[e];return g===void 0?(g={id:d.id,object:d,geometry:h,material:f,groupOrder:m,renderOrder:d.renderOrder,z:v,group:y},t[e]=g):(g.id=d.id,g.object=d,g.geometry=h,g.material=f,g.groupOrder=m,g.renderOrder=d.renderOrder,g.z=v,g.group=y),e++,g}function a(d,h,f,m,v,y){const g=o(d,h,f,m,v,y);f.transmission>0?r.push(g):f.transparent===!0?s.push(g):n.push(g)}function l(d,h,f,m,v,y){const g=o(d,h,f,m,v,y);f.transmission>0?r.unshift(g):f.transparent===!0?s.unshift(g):n.unshift(g)}function c(d,h){n.length>1&&n.sort(d||dZ),r.length>1&&r.sort(h||rk),s.length>1&&s.sort(h||rk)}function u(){for(let d=e,h=t.length;d<h;d++){const f=t[d];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:n,transmissive:r,transparent:s,init:i,push:a,unshift:l,finish:u,sort:c}}function hZ(){let t=new WeakMap;function e(r,s){const i=t.get(r);let o;return i===void 0?(o=new sk,t.set(r,[o])):s>=i.length?(o=new sk,i.push(o)):o=i[s],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function fZ(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Ze,color:new ar};break;case"SpotLight":n={position:new Ze,direction:new Ze,color:new ar,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ze,color:new ar,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ze,skyColor:new ar,groundColor:new ar};break;case"RectAreaLight":n={color:new ar,position:new Ze,halfWidth:new Ze,halfHeight:new Ze};break}return t[e.id]=n,n}}}function pZ(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Dt};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Dt};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Dt,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let mZ=0;function gZ(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function vZ(t){const e=new fZ,n=pZ(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new Ze);const s=new Ze,i=new Rr,o=new Rr;function a(c){let u=0,d=0,h=0;for(let k=0;k<9;k++)r.probe[k].set(0,0,0);let f=0,m=0,v=0,y=0,g=0,S=0,_=0,w=0,E=0,C=0,T=0;c.sort(gZ);for(let k=0,M=c.length;k<M;k++){const L=c[k],N=L.color,G=L.intensity,V=L.distance,X=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)u+=N.r*G,d+=N.g*G,h+=N.b*G;else if(L.isLightProbe){for(let F=0;F<9;F++)r.probe[F].addScaledVector(L.sh.coefficients[F],G);T++}else if(L.isDirectionalLight){const F=e.get(L);if(F.color.copy(L.color).multiplyScalar(L.intensity),L.castShadow){const $=L.shadow,O=n.get(L);O.shadowIntensity=$.intensity,O.shadowBias=$.bias,O.shadowNormalBias=$.normalBias,O.shadowRadius=$.radius,O.shadowMapSize=$.mapSize,r.directionalShadow[f]=O,r.directionalShadowMap[f]=X,r.directionalShadowMatrix[f]=L.shadow.matrix,S++}r.directional[f]=F,f++}else if(L.isSpotLight){const F=e.get(L);F.position.setFromMatrixPosition(L.matrixWorld),F.color.copy(N).multiplyScalar(G),F.distance=V,F.coneCos=Math.cos(L.angle),F.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),F.decay=L.decay,r.spot[v]=F;const $=L.shadow;if(L.map&&(r.spotLightMap[E]=L.map,E++,$.updateMatrices(L),L.castShadow&&C++),r.spotLightMatrix[v]=$.matrix,L.castShadow){const O=n.get(L);O.shadowIntensity=$.intensity,O.shadowBias=$.bias,O.shadowNormalBias=$.normalBias,O.shadowRadius=$.radius,O.shadowMapSize=$.mapSize,r.spotShadow[v]=O,r.spotShadowMap[v]=X,w++}v++}else if(L.isRectAreaLight){const F=e.get(L);F.color.copy(N).multiplyScalar(G),F.halfWidth.set(L.width*.5,0,0),F.halfHeight.set(0,L.height*.5,0),r.rectArea[y]=F,y++}else if(L.isPointLight){const F=e.get(L);if(F.color.copy(L.color).multiplyScalar(L.intensity),F.distance=L.distance,F.decay=L.decay,L.castShadow){const $=L.shadow,O=n.get(L);O.shadowIntensity=$.intensity,O.shadowBias=$.bias,O.shadowNormalBias=$.normalBias,O.shadowRadius=$.radius,O.shadowMapSize=$.mapSize,O.shadowCameraNear=$.camera.near,O.shadowCameraFar=$.camera.far,r.pointShadow[m]=O,r.pointShadowMap[m]=X,r.pointShadowMatrix[m]=L.shadow.matrix,_++}r.point[m]=F,m++}else if(L.isHemisphereLight){const F=e.get(L);F.skyColor.copy(L.color).multiplyScalar(G),F.groundColor.copy(L.groundColor).multiplyScalar(G),r.hemi[g]=F,g++}}y>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=hn.LTC_FLOAT_1,r.rectAreaLTC2=hn.LTC_FLOAT_2):(r.rectAreaLTC1=hn.LTC_HALF_1,r.rectAreaLTC2=hn.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=d,r.ambient[2]=h;const I=r.hash;(I.directionalLength!==f||I.pointLength!==m||I.spotLength!==v||I.rectAreaLength!==y||I.hemiLength!==g||I.numDirectionalShadows!==S||I.numPointShadows!==_||I.numSpotShadows!==w||I.numSpotMaps!==E||I.numLightProbes!==T)&&(r.directional.length=f,r.spot.length=v,r.rectArea.length=y,r.point.length=m,r.hemi.length=g,r.directionalShadow.length=S,r.directionalShadowMap.length=S,r.pointShadow.length=_,r.pointShadowMap.length=_,r.spotShadow.length=w,r.spotShadowMap.length=w,r.directionalShadowMatrix.length=S,r.pointShadowMatrix.length=_,r.spotLightMatrix.length=w+E-C,r.spotLightMap.length=E,r.numSpotLightShadowsWithMaps=C,r.numLightProbes=T,I.directionalLength=f,I.pointLength=m,I.spotLength=v,I.rectAreaLength=y,I.hemiLength=g,I.numDirectionalShadows=S,I.numPointShadows=_,I.numSpotShadows=w,I.numSpotMaps=E,I.numLightProbes=T,r.version=mZ++)}function l(c,u){let d=0,h=0,f=0,m=0,v=0;const y=u.matrixWorldInverse;for(let g=0,S=c.length;g<S;g++){const _=c[g];if(_.isDirectionalLight){const w=r.directional[d];w.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(y),d++}else if(_.isSpotLight){const w=r.spot[f];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(y),w.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(y),f++}else if(_.isRectAreaLight){const w=r.rectArea[m];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(y),o.identity(),i.copy(_.matrixWorld),i.premultiply(y),o.extractRotation(i),w.halfWidth.set(_.width*.5,0,0),w.halfHeight.set(0,_.height*.5,0),w.halfWidth.applyMatrix4(o),w.halfHeight.applyMatrix4(o),m++}else if(_.isPointLight){const w=r.point[h];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(y),h++}else if(_.isHemisphereLight){const w=r.hemi[v];w.direction.setFromMatrixPosition(_.matrixWorld),w.direction.transformDirection(y),v++}}}return{setup:a,setupView:l,state:r}}function ik(t){const e=new vZ(t),n=[],r=[];function s(u){c.camera=u,n.length=0,r.length=0}function i(u){n.push(u)}function o(u){r.push(u)}function a(){e.setup(n)}function l(u){e.setupView(n,u)}const c={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:c,setupLights:a,setupLightsView:l,pushLight:i,pushShadow:o}}function yZ(t){let e=new WeakMap;function n(s,i=0){const o=e.get(s);let a;return o===void 0?(a=new ik(t),e.set(s,[a])):i>=o.length?(a=new ik(t),o.push(a)):a=o[i],a}function r(){e=new WeakMap}return{get:n,dispose:r}}const bZ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,_Z=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function wZ(t,e,n){let r=new u6;const s=new Dt,i=new Dt,o=new ps,a=new zj({depthPacking:iW}),l=new $j,c={},u=n.maxTextureSize,d={[Ru]:lo,[lo]:Ru,[dl]:dl},h=new Na({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Dt},radius:{value:4}},vertexShader:bZ,fragmentShader:_Z}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const m=new mr;m.setAttribute("position",new Ar(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Os(m,h),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=zD;let g=this.type;this.render=function(C,T,I){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||C.length===0)return;const k=t.getRenderTarget(),M=t.getActiveCubeFace(),L=t.getActiveMipmapLevel(),N=t.state;N.setBlending(Mu),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);const G=g!==Zl&&this.type===Zl,V=g===Zl&&this.type!==Zl;for(let X=0,F=C.length;X<F;X++){const $=C[X],O=$.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",$,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;s.copy(O.mapSize);const z=O.getFrameExtents();if(s.multiply(z),i.copy(O.mapSize),(s.x>u||s.y>u)&&(s.x>u&&(i.x=Math.floor(u/z.x),s.x=i.x*z.x,O.mapSize.x=i.x),s.y>u&&(i.y=Math.floor(u/z.y),s.y=i.y*z.y,O.mapSize.y=i.y)),O.map===null||G===!0||V===!0){const q=this.type!==Zl?{minFilter:Pa,magFilter:Pa}:{};O.map!==null&&O.map.dispose(),O.map=new Xd(s.x,s.y,q),O.map.texture.name=$.name+".shadowMap",O.camera.updateProjectionMatrix()}t.setRenderTarget(O.map),t.clear();const re=O.getViewportCount();for(let q=0;q<re;q++){const le=O.getViewport(q);o.set(i.x*le.x,i.y*le.y,i.x*le.z,i.y*le.w),N.viewport(o),O.updateMatrices($,q),r=O.getFrustum(),w(T,I,O.camera,$,this.type)}O.isPointLightShadow!==!0&&this.type===Zl&&S(O,I),O.needsUpdate=!1}g=this.type,y.needsUpdate=!1,t.setRenderTarget(k,M,L)};function S(C,T){const I=e.update(v);h.defines.VSM_SAMPLES!==C.blurSamples&&(h.defines.VSM_SAMPLES=C.blurSamples,f.defines.VSM_SAMPLES=C.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new Xd(s.x,s.y)),h.uniforms.shadow_pass.value=C.map.texture,h.uniforms.resolution.value=C.mapSize,h.uniforms.radius.value=C.radius,t.setRenderTarget(C.mapPass),t.clear(),t.renderBufferDirect(T,null,I,h,v,null),f.uniforms.shadow_pass.value=C.mapPass.texture,f.uniforms.resolution.value=C.mapSize,f.uniforms.radius.value=C.radius,t.setRenderTarget(C.map),t.clear(),t.renderBufferDirect(T,null,I,f,v,null)}function _(C,T,I,k){let M=null;const L=I.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(L!==void 0)M=L;else if(M=I.isPointLight===!0?l:a,t.localClippingEnabled&&T.clipShadows===!0&&Array.isArray(T.clippingPlanes)&&T.clippingPlanes.length!==0||T.displacementMap&&T.displacementScale!==0||T.alphaMap&&T.alphaTest>0||T.map&&T.alphaTest>0){const N=M.uuid,G=T.uuid;let V=c[N];V===void 0&&(V={},c[N]=V);let X=V[G];X===void 0&&(X=M.clone(),V[G]=X,T.addEventListener("dispose",E)),M=X}if(M.visible=T.visible,M.wireframe=T.wireframe,k===Zl?M.side=T.shadowSide!==null?T.shadowSide:T.side:M.side=T.shadowSide!==null?T.shadowSide:d[T.side],M.alphaMap=T.alphaMap,M.alphaTest=T.alphaTest,M.map=T.map,M.clipShadows=T.clipShadows,M.clippingPlanes=T.clippingPlanes,M.clipIntersection=T.clipIntersection,M.displacementMap=T.displacementMap,M.displacementScale=T.displacementScale,M.displacementBias=T.displacementBias,M.wireframeLinewidth=T.wireframeLinewidth,M.linewidth=T.linewidth,I.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const N=t.properties.get(M);N.light=I}return M}function w(C,T,I,k,M){if(C.visible===!1)return;if(C.layers.test(T.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&M===Zl)&&(!C.frustumCulled||r.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,C.matrixWorld);const G=e.update(C),V=C.material;if(Array.isArray(V)){const X=G.groups;for(let F=0,$=X.length;F<$;F++){const O=X[F],z=V[O.materialIndex];if(z&&z.visible){const re=_(C,z,k,M);C.onBeforeShadow(t,C,T,I,G,re,O),t.renderBufferDirect(I,null,G,re,C,O),C.onAfterShadow(t,C,T,I,G,re,O)}}}else if(V.visible){const X=_(C,V,k,M);C.onBeforeShadow(t,C,T,I,G,X,null),t.renderBufferDirect(I,null,G,X,C,null),C.onAfterShadow(t,C,T,I,G,X,null)}}const N=C.children;for(let G=0,V=N.length;G<V;G++)w(N[G],T,I,k,M)}function E(C){C.target.removeEventListener("dispose",E);for(const I in c){const k=c[I],M=C.target.uuid;M in k&&(k[M].dispose(),delete k[M])}}}const xZ={[aS]:lS,[cS]:hS,[uS]:fS,[Qf]:dS,[lS]:aS,[hS]:cS,[fS]:uS,[dS]:Qf};function SZ(t,e){function n(){let Ue=!1;const Ct=new ps;let st=null;const vt=new ps(0,0,0,0);return{setMask:function(Rt){st!==Rt&&!Ue&&(t.colorMask(Rt,Rt,Rt,Rt),st=Rt)},setLocked:function(Rt){Ue=Rt},setClear:function(Rt,jt,dn,sn,At){At===!0&&(Rt*=sn,jt*=sn,dn*=sn),Ct.set(Rt,jt,dn,sn),vt.equals(Ct)===!1&&(t.clearColor(Rt,jt,dn,sn),vt.copy(Ct))},reset:function(){Ue=!1,st=null,vt.set(-1,0,0,0)}}}function r(){let Ue=!1,Ct=!1,st=null,vt=null,Rt=null;return{setReversed:function(jt){if(Ct!==jt){const dn=e.get("EXT_clip_control");Ct?dn.clipControlEXT(dn.LOWER_LEFT_EXT,dn.ZERO_TO_ONE_EXT):dn.clipControlEXT(dn.LOWER_LEFT_EXT,dn.NEGATIVE_ONE_TO_ONE_EXT);const sn=Rt;Rt=null,this.setClear(sn)}Ct=jt},getReversed:function(){return Ct},setTest:function(jt){jt?ve(t.DEPTH_TEST):xe(t.DEPTH_TEST)},setMask:function(jt){st!==jt&&!Ue&&(t.depthMask(jt),st=jt)},setFunc:function(jt){if(Ct&&(jt=xZ[jt]),vt!==jt){switch(jt){case aS:t.depthFunc(t.NEVER);break;case lS:t.depthFunc(t.ALWAYS);break;case cS:t.depthFunc(t.LESS);break;case Qf:t.depthFunc(t.LEQUAL);break;case uS:t.depthFunc(t.EQUAL);break;case dS:t.depthFunc(t.GEQUAL);break;case hS:t.depthFunc(t.GREATER);break;case fS:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}vt=jt}},setLocked:function(jt){Ue=jt},setClear:function(jt){Rt!==jt&&(Ct&&(jt=1-jt),t.clearDepth(jt),Rt=jt)},reset:function(){Ue=!1,st=null,vt=null,Rt=null,Ct=!1}}}function s(){let Ue=!1,Ct=null,st=null,vt=null,Rt=null,jt=null,dn=null,sn=null,At=null;return{setTest:function(on){Ue||(on?ve(t.STENCIL_TEST):xe(t.STENCIL_TEST))},setMask:function(on){Ct!==on&&!Ue&&(t.stencilMask(on),Ct=on)},setFunc:function(on,Jt,jr){(st!==on||vt!==Jt||Rt!==jr)&&(t.stencilFunc(on,Jt,jr),st=on,vt=Jt,Rt=jr)},setOp:function(on,Jt,jr){(jt!==on||dn!==Jt||sn!==jr)&&(t.stencilOp(on,Jt,jr),jt=on,dn=Jt,sn=jr)},setLocked:function(on){Ue=on},setClear:function(on){At!==on&&(t.clearStencil(on),At=on)},reset:function(){Ue=!1,Ct=null,st=null,vt=null,Rt=null,jt=null,dn=null,sn=null,At=null}}}const i=new n,o=new r,a=new s,l=new WeakMap,c=new WeakMap;let u={},d={},h=new WeakMap,f=[],m=null,v=!1,y=null,g=null,S=null,_=null,w=null,E=null,C=null,T=new ar(0,0,0),I=0,k=!1,M=null,L=null,N=null,G=null,V=null;const X=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let F=!1,$=0;const O=t.getParameter(t.VERSION);O.indexOf("WebGL")!==-1?($=parseFloat(/^WebGL (\d)/.exec(O)[1]),F=$>=1):O.indexOf("OpenGL ES")!==-1&&($=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),F=$>=2);let z=null,re={};const q=t.getParameter(t.SCISSOR_BOX),le=t.getParameter(t.VIEWPORT),fe=new ps().fromArray(q),se=new ps().fromArray(le);function ye(Ue,Ct,st,vt){const Rt=new Uint8Array(4),jt=t.createTexture();t.bindTexture(Ue,jt),t.texParameteri(Ue,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Ue,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let dn=0;dn<st;dn++)Ue===t.TEXTURE_3D||Ue===t.TEXTURE_2D_ARRAY?t.texImage3D(Ct,0,t.RGBA,1,1,vt,0,t.RGBA,t.UNSIGNED_BYTE,Rt):t.texImage2D(Ct+dn,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,Rt);return jt}const we={};we[t.TEXTURE_2D]=ye(t.TEXTURE_2D,t.TEXTURE_2D,1),we[t.TEXTURE_CUBE_MAP]=ye(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),we[t.TEXTURE_2D_ARRAY]=ye(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),we[t.TEXTURE_3D]=ye(t.TEXTURE_3D,t.TEXTURE_3D,1,1),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),ve(t.DEPTH_TEST),o.setFunc(Qf),Oe(!1),Re(YA),ve(t.CULL_FACE),K(Mu);function ve(Ue){u[Ue]!==!0&&(t.enable(Ue),u[Ue]=!0)}function xe(Ue){u[Ue]!==!1&&(t.disable(Ue),u[Ue]=!1)}function je(Ue,Ct){return d[Ue]!==Ct?(t.bindFramebuffer(Ue,Ct),d[Ue]=Ct,Ue===t.DRAW_FRAMEBUFFER&&(d[t.FRAMEBUFFER]=Ct),Ue===t.FRAMEBUFFER&&(d[t.DRAW_FRAMEBUFFER]=Ct),!0):!1}function nt(Ue,Ct){let st=f,vt=!1;if(Ue){st=h.get(Ct),st===void 0&&(st=[],h.set(Ct,st));const Rt=Ue.textures;if(st.length!==Rt.length||st[0]!==t.COLOR_ATTACHMENT0){for(let jt=0,dn=Rt.length;jt<dn;jt++)st[jt]=t.COLOR_ATTACHMENT0+jt;st.length=Rt.length,vt=!0}}else st[0]!==t.BACK&&(st[0]=t.BACK,vt=!0);vt&&t.drawBuffers(st)}function ue(Ue){return m!==Ue?(t.useProgram(Ue),m=Ue,!0):!1}const j={[Sd]:t.FUNC_ADD,[PG]:t.FUNC_SUBTRACT,[RG]:t.FUNC_REVERSE_SUBTRACT};j[LG]=t.MIN,j[OG]=t.MAX;const he={[NG]:t.ZERO,[DG]:t.ONE,[FG]:t.SRC_COLOR,[iS]:t.SRC_ALPHA,[HG]:t.SRC_ALPHA_SATURATE,[$G]:t.DST_COLOR,[UG]:t.DST_ALPHA,[BG]:t.ONE_MINUS_SRC_COLOR,[oS]:t.ONE_MINUS_SRC_ALPHA,[VG]:t.ONE_MINUS_DST_COLOR,[zG]:t.ONE_MINUS_DST_ALPHA,[GG]:t.CONSTANT_COLOR,[WG]:t.ONE_MINUS_CONSTANT_COLOR,[jG]:t.CONSTANT_ALPHA,[KG]:t.ONE_MINUS_CONSTANT_ALPHA};function K(Ue,Ct,st,vt,Rt,jt,dn,sn,At,on){if(Ue===Mu){v===!0&&(xe(t.BLEND),v=!1);return}if(v===!1&&(ve(t.BLEND),v=!0),Ue!==IG){if(Ue!==y||on!==k){if((g!==Sd||w!==Sd)&&(t.blendEquation(t.FUNC_ADD),g=Sd,w=Sd),on)switch(Ue){case Lf:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case XA:t.blendFunc(t.ONE,t.ONE);break;case ZA:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case JA:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ue);break}else switch(Ue){case Lf:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case XA:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case ZA:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case JA:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ue);break}S=null,_=null,E=null,C=null,T.set(0,0,0),I=0,y=Ue,k=on}return}Rt=Rt||Ct,jt=jt||st,dn=dn||vt,(Ct!==g||Rt!==w)&&(t.blendEquationSeparate(j[Ct],j[Rt]),g=Ct,w=Rt),(st!==S||vt!==_||jt!==E||dn!==C)&&(t.blendFuncSeparate(he[st],he[vt],he[jt],he[dn]),S=st,_=vt,E=jt,C=dn),(sn.equals(T)===!1||At!==I)&&(t.blendColor(sn.r,sn.g,sn.b,At),T.copy(sn),I=At),y=Ue,k=!1}function Fe(Ue,Ct){Ue.side===dl?xe(t.CULL_FACE):ve(t.CULL_FACE);let st=Ue.side===lo;Ct&&(st=!st),Oe(st),Ue.blending===Lf&&Ue.transparent===!1?K(Mu):K(Ue.blending,Ue.blendEquation,Ue.blendSrc,Ue.blendDst,Ue.blendEquationAlpha,Ue.blendSrcAlpha,Ue.blendDstAlpha,Ue.blendColor,Ue.blendAlpha,Ue.premultipliedAlpha),o.setFunc(Ue.depthFunc),o.setTest(Ue.depthTest),o.setMask(Ue.depthWrite),i.setMask(Ue.colorWrite);const vt=Ue.stencilWrite;a.setTest(vt),vt&&(a.setMask(Ue.stencilWriteMask),a.setFunc(Ue.stencilFunc,Ue.stencilRef,Ue.stencilFuncMask),a.setOp(Ue.stencilFail,Ue.stencilZFail,Ue.stencilZPass)),oe(Ue.polygonOffset,Ue.polygonOffsetFactor,Ue.polygonOffsetUnits),Ue.alphaToCoverage===!0?ve(t.SAMPLE_ALPHA_TO_COVERAGE):xe(t.SAMPLE_ALPHA_TO_COVERAGE)}function Oe(Ue){M!==Ue&&(Ue?t.frontFace(t.CW):t.frontFace(t.CCW),M=Ue)}function Re(Ue){Ue!==MG?(ve(t.CULL_FACE),Ue!==L&&(Ue===YA?t.cullFace(t.BACK):Ue===AG?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):xe(t.CULL_FACE),L=Ue}function te(Ue){Ue!==N&&(F&&t.lineWidth(Ue),N=Ue)}function oe(Ue,Ct,st){Ue?(ve(t.POLYGON_OFFSET_FILL),(G!==Ct||V!==st)&&(t.polygonOffset(Ct,st),G=Ct,V=st)):xe(t.POLYGON_OFFSET_FILL)}function Ee(Ue){Ue?ve(t.SCISSOR_TEST):xe(t.SCISSOR_TEST)}function J(Ue){Ue===void 0&&(Ue=t.TEXTURE0+X-1),z!==Ue&&(t.activeTexture(Ue),z=Ue)}function Q(Ue,Ct,st){st===void 0&&(z===null?st=t.TEXTURE0+X-1:st=z);let vt=re[st];vt===void 0&&(vt={type:void 0,texture:void 0},re[st]=vt),(vt.type!==Ue||vt.texture!==Ct)&&(z!==st&&(t.activeTexture(st),z=st),t.bindTexture(Ue,Ct||we[Ue]),vt.type=Ue,vt.texture=Ct)}function _e(){const Ue=re[z];Ue!==void 0&&Ue.type!==void 0&&(t.bindTexture(Ue.type,null),Ue.type=void 0,Ue.texture=void 0)}function ie(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function Te(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function We(){try{t.texSubImage2D.apply(t,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function ut(){try{t.texSubImage3D.apply(t,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function lt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function St(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function Ot(){try{t.texStorage2D.apply(t,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function et(){try{t.texStorage3D.apply(t,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function ht(){try{t.texImage2D.apply(t,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function Mt(){try{t.texImage3D.apply(t,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function ze(Ue){fe.equals(Ue)===!1&&(t.scissor(Ue.x,Ue.y,Ue.z,Ue.w),fe.copy(Ue))}function Me(Ue){se.equals(Ue)===!1&&(t.viewport(Ue.x,Ue.y,Ue.z,Ue.w),se.copy(Ue))}function be(Ue,Ct){let st=c.get(Ct);st===void 0&&(st=new WeakMap,c.set(Ct,st));let vt=st.get(Ue);vt===void 0&&(vt=t.getUniformBlockIndex(Ct,Ue.name),st.set(Ue,vt))}function Ve(Ue,Ct){const vt=c.get(Ct).get(Ue);l.get(Ct)!==vt&&(t.uniformBlockBinding(Ct,vt,Ue.__bindingPointIndex),l.set(Ct,vt))}function mt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),o.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},z=null,re={},d={},h=new WeakMap,f=[],m=null,v=!1,y=null,g=null,S=null,_=null,w=null,E=null,C=null,T=new ar(0,0,0),I=0,k=!1,M=null,L=null,N=null,G=null,V=null,fe.set(0,0,t.canvas.width,t.canvas.height),se.set(0,0,t.canvas.width,t.canvas.height),i.reset(),o.reset(),a.reset()}return{buffers:{color:i,depth:o,stencil:a},enable:ve,disable:xe,bindFramebuffer:je,drawBuffers:nt,useProgram:ue,setBlending:K,setMaterial:Fe,setFlipSided:Oe,setCullFace:Re,setLineWidth:te,setPolygonOffset:oe,setScissorTest:Ee,activeTexture:J,bindTexture:Q,unbindTexture:_e,compressedTexImage2D:ie,compressedTexImage3D:Te,texImage2D:ht,texImage3D:Mt,updateUBOMapping:be,uniformBlockBinding:Ve,texStorage2D:Ot,texStorage3D:et,texSubImage2D:We,texSubImage3D:ut,compressedTexSubImage2D:lt,compressedTexSubImage3D:St,scissor:ze,viewport:Me,reset:mt}}function EZ(t,e,n,r,s,i,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Dt,u=new WeakMap;let d;const h=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(J,Q){return f?new OffscreenCanvas(J,Q):pg("canvas")}function v(J,Q,_e){let ie=1;const Te=Ee(J);if((Te.width>_e||Te.height>_e)&&(ie=_e/Math.max(Te.width,Te.height)),ie<1)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap||typeof VideoFrame<"u"&&J instanceof VideoFrame){const We=Math.floor(ie*Te.width),ut=Math.floor(ie*Te.height);d===void 0&&(d=m(We,ut));const lt=Q?m(We,ut):d;return lt.width=We,lt.height=ut,lt.getContext("2d").drawImage(J,0,0,We,ut),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Te.width+"x"+Te.height+") to ("+We+"x"+ut+")."),lt}else return"data"in J&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Te.width+"x"+Te.height+")."),J;return J}function y(J){return J.generateMipmaps}function g(J){t.generateMipmap(J)}function S(J){return J.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:J.isWebGL3DRenderTarget?t.TEXTURE_3D:J.isWebGLArrayRenderTarget||J.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function _(J,Q,_e,ie,Te=!1){if(J!==null){if(t[J]!==void 0)return t[J];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let We=Q;if(Q===t.RED&&(_e===t.FLOAT&&(We=t.R32F),_e===t.HALF_FLOAT&&(We=t.R16F),_e===t.UNSIGNED_BYTE&&(We=t.R8)),Q===t.RED_INTEGER&&(_e===t.UNSIGNED_BYTE&&(We=t.R8UI),_e===t.UNSIGNED_SHORT&&(We=t.R16UI),_e===t.UNSIGNED_INT&&(We=t.R32UI),_e===t.BYTE&&(We=t.R8I),_e===t.SHORT&&(We=t.R16I),_e===t.INT&&(We=t.R32I)),Q===t.RG&&(_e===t.FLOAT&&(We=t.RG32F),_e===t.HALF_FLOAT&&(We=t.RG16F),_e===t.UNSIGNED_BYTE&&(We=t.RG8)),Q===t.RG_INTEGER&&(_e===t.UNSIGNED_BYTE&&(We=t.RG8UI),_e===t.UNSIGNED_SHORT&&(We=t.RG16UI),_e===t.UNSIGNED_INT&&(We=t.RG32UI),_e===t.BYTE&&(We=t.RG8I),_e===t.SHORT&&(We=t.RG16I),_e===t.INT&&(We=t.RG32I)),Q===t.RGB_INTEGER&&(_e===t.UNSIGNED_BYTE&&(We=t.RGB8UI),_e===t.UNSIGNED_SHORT&&(We=t.RGB16UI),_e===t.UNSIGNED_INT&&(We=t.RGB32UI),_e===t.BYTE&&(We=t.RGB8I),_e===t.SHORT&&(We=t.RGB16I),_e===t.INT&&(We=t.RGB32I)),Q===t.RGBA_INTEGER&&(_e===t.UNSIGNED_BYTE&&(We=t.RGBA8UI),_e===t.UNSIGNED_SHORT&&(We=t.RGBA16UI),_e===t.UNSIGNED_INT&&(We=t.RGBA32UI),_e===t.BYTE&&(We=t.RGBA8I),_e===t.SHORT&&(We=t.RGBA16I),_e===t.INT&&(We=t.RGBA32I)),Q===t.RGB&&_e===t.UNSIGNED_INT_5_9_9_9_REV&&(We=t.RGB9_E5),Q===t.RGBA){const ut=Te?wb:Sr.getTransfer(ie);_e===t.FLOAT&&(We=t.RGBA32F),_e===t.HALF_FLOAT&&(We=t.RGBA16F),_e===t.UNSIGNED_BYTE&&(We=ut===Vr?t.SRGB8_ALPHA8:t.RGBA8),_e===t.UNSIGNED_SHORT_4_4_4_4&&(We=t.RGBA4),_e===t.UNSIGNED_SHORT_5_5_5_1&&(We=t.RGB5_A1)}return(We===t.R16F||We===t.R32F||We===t.RG16F||We===t.RG32F||We===t.RGBA16F||We===t.RGBA32F)&&e.get("EXT_color_buffer_float"),We}function w(J,Q){let _e;return J?Q===null||Q===Yd||Q===np?_e=t.DEPTH24_STENCIL8:Q===ic?_e=t.DEPTH32F_STENCIL8:Q===hg&&(_e=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Q===null||Q===Yd||Q===np?_e=t.DEPTH_COMPONENT24:Q===ic?_e=t.DEPTH_COMPONENT32F:Q===hg&&(_e=t.DEPTH_COMPONENT16),_e}function E(J,Q){return y(J)===!0||J.isFramebufferTexture&&J.minFilter!==Pa&&J.minFilter!==Ta?Math.log2(Math.max(Q.width,Q.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?Q.mipmaps.length:1}function C(J){const Q=J.target;Q.removeEventListener("dispose",C),I(Q),Q.isVideoTexture&&u.delete(Q)}function T(J){const Q=J.target;Q.removeEventListener("dispose",T),M(Q)}function I(J){const Q=r.get(J);if(Q.__webglInit===void 0)return;const _e=J.source,ie=h.get(_e);if(ie){const Te=ie[Q.__cacheKey];Te.usedTimes--,Te.usedTimes===0&&k(J),Object.keys(ie).length===0&&h.delete(_e)}r.remove(J)}function k(J){const Q=r.get(J);t.deleteTexture(Q.__webglTexture);const _e=J.source,ie=h.get(_e);delete ie[Q.__cacheKey],o.memory.textures--}function M(J){const Q=r.get(J);if(J.depthTexture&&(J.depthTexture.dispose(),r.remove(J.depthTexture)),J.isWebGLCubeRenderTarget)for(let ie=0;ie<6;ie++){if(Array.isArray(Q.__webglFramebuffer[ie]))for(let Te=0;Te<Q.__webglFramebuffer[ie].length;Te++)t.deleteFramebuffer(Q.__webglFramebuffer[ie][Te]);else t.deleteFramebuffer(Q.__webglFramebuffer[ie]);Q.__webglDepthbuffer&&t.deleteRenderbuffer(Q.__webglDepthbuffer[ie])}else{if(Array.isArray(Q.__webglFramebuffer))for(let ie=0;ie<Q.__webglFramebuffer.length;ie++)t.deleteFramebuffer(Q.__webglFramebuffer[ie]);else t.deleteFramebuffer(Q.__webglFramebuffer);if(Q.__webglDepthbuffer&&t.deleteRenderbuffer(Q.__webglDepthbuffer),Q.__webglMultisampledFramebuffer&&t.deleteFramebuffer(Q.__webglMultisampledFramebuffer),Q.__webglColorRenderbuffer)for(let ie=0;ie<Q.__webglColorRenderbuffer.length;ie++)Q.__webglColorRenderbuffer[ie]&&t.deleteRenderbuffer(Q.__webglColorRenderbuffer[ie]);Q.__webglDepthRenderbuffer&&t.deleteRenderbuffer(Q.__webglDepthRenderbuffer)}const _e=J.textures;for(let ie=0,Te=_e.length;ie<Te;ie++){const We=r.get(_e[ie]);We.__webglTexture&&(t.deleteTexture(We.__webglTexture),o.memory.textures--),r.remove(_e[ie])}r.remove(J)}let L=0;function N(){L=0}function G(){const J=L;return J>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+s.maxTextures),L+=1,J}function V(J){const Q=[];return Q.push(J.wrapS),Q.push(J.wrapT),Q.push(J.wrapR||0),Q.push(J.magFilter),Q.push(J.minFilter),Q.push(J.anisotropy),Q.push(J.internalFormat),Q.push(J.format),Q.push(J.type),Q.push(J.generateMipmaps),Q.push(J.premultiplyAlpha),Q.push(J.flipY),Q.push(J.unpackAlignment),Q.push(J.colorSpace),Q.join()}function X(J,Q){const _e=r.get(J);if(J.isVideoTexture&&te(J),J.isRenderTargetTexture===!1&&J.version>0&&_e.__version!==J.version){const ie=J.image;if(ie===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ie.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{se(_e,J,Q);return}}n.bindTexture(t.TEXTURE_2D,_e.__webglTexture,t.TEXTURE0+Q)}function F(J,Q){const _e=r.get(J);if(J.version>0&&_e.__version!==J.version){se(_e,J,Q);return}n.bindTexture(t.TEXTURE_2D_ARRAY,_e.__webglTexture,t.TEXTURE0+Q)}function $(J,Q){const _e=r.get(J);if(J.version>0&&_e.__version!==J.version){se(_e,J,Q);return}n.bindTexture(t.TEXTURE_3D,_e.__webglTexture,t.TEXTURE0+Q)}function O(J,Q){const _e=r.get(J);if(J.version>0&&_e.__version!==J.version){ye(_e,J,Q);return}n.bindTexture(t.TEXTURE_CUBE_MAP,_e.__webglTexture,t.TEXTURE0+Q)}const z={[gS]:t.REPEAT,[Rd]:t.CLAMP_TO_EDGE,[vS]:t.MIRRORED_REPEAT},re={[Pa]:t.NEAREST,[rW]:t.NEAREST_MIPMAP_NEAREST,[d0]:t.NEAREST_MIPMAP_LINEAR,[Ta]:t.LINEAR,[sw]:t.LINEAR_MIPMAP_NEAREST,[Ld]:t.LINEAR_MIPMAP_LINEAR},q={[lW]:t.NEVER,[pW]:t.ALWAYS,[cW]:t.LESS,[QD]:t.LEQUAL,[uW]:t.EQUAL,[fW]:t.GEQUAL,[dW]:t.GREATER,[hW]:t.NOTEQUAL};function le(J,Q){if(Q.type===ic&&e.has("OES_texture_float_linear")===!1&&(Q.magFilter===Ta||Q.magFilter===sw||Q.magFilter===d0||Q.magFilter===Ld||Q.minFilter===Ta||Q.minFilter===sw||Q.minFilter===d0||Q.minFilter===Ld)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(J,t.TEXTURE_WRAP_S,z[Q.wrapS]),t.texParameteri(J,t.TEXTURE_WRAP_T,z[Q.wrapT]),(J===t.TEXTURE_3D||J===t.TEXTURE_2D_ARRAY)&&t.texParameteri(J,t.TEXTURE_WRAP_R,z[Q.wrapR]),t.texParameteri(J,t.TEXTURE_MAG_FILTER,re[Q.magFilter]),t.texParameteri(J,t.TEXTURE_MIN_FILTER,re[Q.minFilter]),Q.compareFunction&&(t.texParameteri(J,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(J,t.TEXTURE_COMPARE_FUNC,q[Q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Q.magFilter===Pa||Q.minFilter!==d0&&Q.minFilter!==Ld||Q.type===ic&&e.has("OES_texture_float_linear")===!1)return;if(Q.anisotropy>1||r.get(Q).__currentAnisotropy){const _e=e.get("EXT_texture_filter_anisotropic");t.texParameterf(J,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Q.anisotropy,s.getMaxAnisotropy())),r.get(Q).__currentAnisotropy=Q.anisotropy}}}function fe(J,Q){let _e=!1;J.__webglInit===void 0&&(J.__webglInit=!0,Q.addEventListener("dispose",C));const ie=Q.source;let Te=h.get(ie);Te===void 0&&(Te={},h.set(ie,Te));const We=V(Q);if(We!==J.__cacheKey){Te[We]===void 0&&(Te[We]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,_e=!0),Te[We].usedTimes++;const ut=Te[J.__cacheKey];ut!==void 0&&(Te[J.__cacheKey].usedTimes--,ut.usedTimes===0&&k(Q)),J.__cacheKey=We,J.__webglTexture=Te[We].texture}return _e}function se(J,Q,_e){let ie=t.TEXTURE_2D;(Q.isDataArrayTexture||Q.isCompressedArrayTexture)&&(ie=t.TEXTURE_2D_ARRAY),Q.isData3DTexture&&(ie=t.TEXTURE_3D);const Te=fe(J,Q),We=Q.source;n.bindTexture(ie,J.__webglTexture,t.TEXTURE0+_e);const ut=r.get(We);if(We.version!==ut.__version||Te===!0){n.activeTexture(t.TEXTURE0+_e);const lt=Sr.getPrimaries(Sr.workingColorSpace),St=Q.colorSpace===yu?null:Sr.getPrimaries(Q.colorSpace),Ot=Q.colorSpace===yu||lt===St?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Q.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Q.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ot);let et=v(Q.image,!1,s.maxTextureSize);et=oe(Q,et);const ht=i.convert(Q.format,Q.colorSpace),Mt=i.convert(Q.type);let ze=_(Q.internalFormat,ht,Mt,Q.colorSpace,Q.isVideoTexture);le(ie,Q);let Me;const be=Q.mipmaps,Ve=Q.isVideoTexture!==!0,mt=ut.__version===void 0||Te===!0,Ue=We.dataReady,Ct=E(Q,et);if(Q.isDepthTexture)ze=w(Q.format===rp,Q.type),mt&&(Ve?n.texStorage2D(t.TEXTURE_2D,1,ze,et.width,et.height):n.texImage2D(t.TEXTURE_2D,0,ze,et.width,et.height,0,ht,Mt,null));else if(Q.isDataTexture)if(be.length>0){Ve&&mt&&n.texStorage2D(t.TEXTURE_2D,Ct,ze,be[0].width,be[0].height);for(let st=0,vt=be.length;st<vt;st++)Me=be[st],Ve?Ue&&n.texSubImage2D(t.TEXTURE_2D,st,0,0,Me.width,Me.height,ht,Mt,Me.data):n.texImage2D(t.TEXTURE_2D,st,ze,Me.width,Me.height,0,ht,Mt,Me.data);Q.generateMipmaps=!1}else Ve?(mt&&n.texStorage2D(t.TEXTURE_2D,Ct,ze,et.width,et.height),Ue&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,et.width,et.height,ht,Mt,et.data)):n.texImage2D(t.TEXTURE_2D,0,ze,et.width,et.height,0,ht,Mt,et.data);else if(Q.isCompressedTexture)if(Q.isCompressedArrayTexture){Ve&&mt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Ct,ze,be[0].width,be[0].height,et.depth);for(let st=0,vt=be.length;st<vt;st++)if(Me=be[st],Q.format!==Ma)if(ht!==null)if(Ve){if(Ue)if(Q.layerUpdates.size>0){const Rt=N3(Me.width,Me.height,Q.format,Q.type);for(const jt of Q.layerUpdates){const dn=Me.data.subarray(jt*Rt/Me.data.BYTES_PER_ELEMENT,(jt+1)*Rt/Me.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,st,0,0,jt,Me.width,Me.height,1,ht,dn)}Q.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,st,0,0,0,Me.width,Me.height,et.depth,ht,Me.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,st,ze,Me.width,Me.height,et.depth,0,Me.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ve?Ue&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,st,0,0,0,Me.width,Me.height,et.depth,ht,Mt,Me.data):n.texImage3D(t.TEXTURE_2D_ARRAY,st,ze,Me.width,Me.height,et.depth,0,ht,Mt,Me.data)}else{Ve&&mt&&n.texStorage2D(t.TEXTURE_2D,Ct,ze,be[0].width,be[0].height);for(let st=0,vt=be.length;st<vt;st++)Me=be[st],Q.format!==Ma?ht!==null?Ve?Ue&&n.compressedTexSubImage2D(t.TEXTURE_2D,st,0,0,Me.width,Me.height,ht,Me.data):n.compressedTexImage2D(t.TEXTURE_2D,st,ze,Me.width,Me.height,0,Me.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ve?Ue&&n.texSubImage2D(t.TEXTURE_2D,st,0,0,Me.width,Me.height,ht,Mt,Me.data):n.texImage2D(t.TEXTURE_2D,st,ze,Me.width,Me.height,0,ht,Mt,Me.data)}else if(Q.isDataArrayTexture)if(Ve){if(mt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Ct,ze,et.width,et.height,et.depth),Ue)if(Q.layerUpdates.size>0){const st=N3(et.width,et.height,Q.format,Q.type);for(const vt of Q.layerUpdates){const Rt=et.data.subarray(vt*st/et.data.BYTES_PER_ELEMENT,(vt+1)*st/et.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,vt,et.width,et.height,1,ht,Mt,Rt)}Q.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,et.width,et.height,et.depth,ht,Mt,et.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,ze,et.width,et.height,et.depth,0,ht,Mt,et.data);else if(Q.isData3DTexture)Ve?(mt&&n.texStorage3D(t.TEXTURE_3D,Ct,ze,et.width,et.height,et.depth),Ue&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,et.width,et.height,et.depth,ht,Mt,et.data)):n.texImage3D(t.TEXTURE_3D,0,ze,et.width,et.height,et.depth,0,ht,Mt,et.data);else if(Q.isFramebufferTexture){if(mt)if(Ve)n.texStorage2D(t.TEXTURE_2D,Ct,ze,et.width,et.height);else{let st=et.width,vt=et.height;for(let Rt=0;Rt<Ct;Rt++)n.texImage2D(t.TEXTURE_2D,Rt,ze,st,vt,0,ht,Mt,null),st>>=1,vt>>=1}}else if(be.length>0){if(Ve&&mt){const st=Ee(be[0]);n.texStorage2D(t.TEXTURE_2D,Ct,ze,st.width,st.height)}for(let st=0,vt=be.length;st<vt;st++)Me=be[st],Ve?Ue&&n.texSubImage2D(t.TEXTURE_2D,st,0,0,ht,Mt,Me):n.texImage2D(t.TEXTURE_2D,st,ze,ht,Mt,Me);Q.generateMipmaps=!1}else if(Ve){if(mt){const st=Ee(et);n.texStorage2D(t.TEXTURE_2D,Ct,ze,st.width,st.height)}Ue&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,ht,Mt,et)}else n.texImage2D(t.TEXTURE_2D,0,ze,ht,Mt,et);y(Q)&&g(ie),ut.__version=We.version,Q.onUpdate&&Q.onUpdate(Q)}J.__version=Q.version}function ye(J,Q,_e){if(Q.image.length!==6)return;const ie=fe(J,Q),Te=Q.source;n.bindTexture(t.TEXTURE_CUBE_MAP,J.__webglTexture,t.TEXTURE0+_e);const We=r.get(Te);if(Te.version!==We.__version||ie===!0){n.activeTexture(t.TEXTURE0+_e);const ut=Sr.getPrimaries(Sr.workingColorSpace),lt=Q.colorSpace===yu?null:Sr.getPrimaries(Q.colorSpace),St=Q.colorSpace===yu||ut===lt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Q.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Q.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,St);const Ot=Q.isCompressedTexture||Q.image[0].isCompressedTexture,et=Q.image[0]&&Q.image[0].isDataTexture,ht=[];for(let vt=0;vt<6;vt++)!Ot&&!et?ht[vt]=v(Q.image[vt],!0,s.maxCubemapSize):ht[vt]=et?Q.image[vt].image:Q.image[vt],ht[vt]=oe(Q,ht[vt]);const Mt=ht[0],ze=i.convert(Q.format,Q.colorSpace),Me=i.convert(Q.type),be=_(Q.internalFormat,ze,Me,Q.colorSpace),Ve=Q.isVideoTexture!==!0,mt=We.__version===void 0||ie===!0,Ue=Te.dataReady;let Ct=E(Q,Mt);le(t.TEXTURE_CUBE_MAP,Q);let st;if(Ot){Ve&&mt&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Ct,be,Mt.width,Mt.height);for(let vt=0;vt<6;vt++){st=ht[vt].mipmaps;for(let Rt=0;Rt<st.length;Rt++){const jt=st[Rt];Q.format!==Ma?ze!==null?Ve?Ue&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+vt,Rt,0,0,jt.width,jt.height,ze,jt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+vt,Rt,be,jt.width,jt.height,0,jt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ve?Ue&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+vt,Rt,0,0,jt.width,jt.height,ze,Me,jt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+vt,Rt,be,jt.width,jt.height,0,ze,Me,jt.data)}}}else{if(st=Q.mipmaps,Ve&&mt){st.length>0&&Ct++;const vt=Ee(ht[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,Ct,be,vt.width,vt.height)}for(let vt=0;vt<6;vt++)if(et){Ve?Ue&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+vt,0,0,0,ht[vt].width,ht[vt].height,ze,Me,ht[vt].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+vt,0,be,ht[vt].width,ht[vt].height,0,ze,Me,ht[vt].data);for(let Rt=0;Rt<st.length;Rt++){const dn=st[Rt].image[vt].image;Ve?Ue&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+vt,Rt+1,0,0,dn.width,dn.height,ze,Me,dn.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+vt,Rt+1,be,dn.width,dn.height,0,ze,Me,dn.data)}}else{Ve?Ue&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+vt,0,0,0,ze,Me,ht[vt]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+vt,0,be,ze,Me,ht[vt]);for(let Rt=0;Rt<st.length;Rt++){const jt=st[Rt];Ve?Ue&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+vt,Rt+1,0,0,ze,Me,jt.image[vt]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+vt,Rt+1,be,ze,Me,jt.image[vt])}}}y(Q)&&g(t.TEXTURE_CUBE_MAP),We.__version=Te.version,Q.onUpdate&&Q.onUpdate(Q)}J.__version=Q.version}function we(J,Q,_e,ie,Te,We){const ut=i.convert(_e.format,_e.colorSpace),lt=i.convert(_e.type),St=_(_e.internalFormat,ut,lt,_e.colorSpace),Ot=r.get(Q),et=r.get(_e);if(et.__renderTarget=Q,!Ot.__hasExternalTextures){const ht=Math.max(1,Q.width>>We),Mt=Math.max(1,Q.height>>We);Te===t.TEXTURE_3D||Te===t.TEXTURE_2D_ARRAY?n.texImage3D(Te,We,St,ht,Mt,Q.depth,0,ut,lt,null):n.texImage2D(Te,We,St,ht,Mt,0,ut,lt,null)}n.bindFramebuffer(t.FRAMEBUFFER,J),Re(Q)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,ie,Te,et.__webglTexture,0,Oe(Q)):(Te===t.TEXTURE_2D||Te>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Te<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,ie,Te,et.__webglTexture,We),n.bindFramebuffer(t.FRAMEBUFFER,null)}function ve(J,Q,_e){if(t.bindRenderbuffer(t.RENDERBUFFER,J),Q.depthBuffer){const ie=Q.depthTexture,Te=ie&&ie.isDepthTexture?ie.type:null,We=w(Q.stencilBuffer,Te),ut=Q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,lt=Oe(Q);Re(Q)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,lt,We,Q.width,Q.height):_e?t.renderbufferStorageMultisample(t.RENDERBUFFER,lt,We,Q.width,Q.height):t.renderbufferStorage(t.RENDERBUFFER,We,Q.width,Q.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,ut,t.RENDERBUFFER,J)}else{const ie=Q.textures;for(let Te=0;Te<ie.length;Te++){const We=ie[Te],ut=i.convert(We.format,We.colorSpace),lt=i.convert(We.type),St=_(We.internalFormat,ut,lt,We.colorSpace),Ot=Oe(Q);_e&&Re(Q)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Ot,St,Q.width,Q.height):Re(Q)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ot,St,Q.width,Q.height):t.renderbufferStorage(t.RENDERBUFFER,St,Q.width,Q.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function xe(J,Q){if(Q&&Q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,J),!(Q.depthTexture&&Q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ie=r.get(Q.depthTexture);ie.__renderTarget=Q,(!ie.__webglTexture||Q.depthTexture.image.width!==Q.width||Q.depthTexture.image.height!==Q.height)&&(Q.depthTexture.image.width=Q.width,Q.depthTexture.image.height=Q.height,Q.depthTexture.needsUpdate=!0),X(Q.depthTexture,0);const Te=ie.__webglTexture,We=Oe(Q);if(Q.depthTexture.format===Of)Re(Q)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Te,0,We):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Te,0);else if(Q.depthTexture.format===rp)Re(Q)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Te,0,We):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Te,0);else throw new Error("Unknown depthTexture format")}function je(J){const Q=r.get(J),_e=J.isWebGLCubeRenderTarget===!0;if(Q.__boundDepthTexture!==J.depthTexture){const ie=J.depthTexture;if(Q.__depthDisposeCallback&&Q.__depthDisposeCallback(),ie){const Te=()=>{delete Q.__boundDepthTexture,delete Q.__depthDisposeCallback,ie.removeEventListener("dispose",Te)};ie.addEventListener("dispose",Te),Q.__depthDisposeCallback=Te}Q.__boundDepthTexture=ie}if(J.depthTexture&&!Q.__autoAllocateDepthBuffer){if(_e)throw new Error("target.depthTexture not supported in Cube render targets");xe(Q.__webglFramebuffer,J)}else if(_e){Q.__webglDepthbuffer=[];for(let ie=0;ie<6;ie++)if(n.bindFramebuffer(t.FRAMEBUFFER,Q.__webglFramebuffer[ie]),Q.__webglDepthbuffer[ie]===void 0)Q.__webglDepthbuffer[ie]=t.createRenderbuffer(),ve(Q.__webglDepthbuffer[ie],J,!1);else{const Te=J.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,We=Q.__webglDepthbuffer[ie];t.bindRenderbuffer(t.RENDERBUFFER,We),t.framebufferRenderbuffer(t.FRAMEBUFFER,Te,t.RENDERBUFFER,We)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,Q.__webglFramebuffer),Q.__webglDepthbuffer===void 0)Q.__webglDepthbuffer=t.createRenderbuffer(),ve(Q.__webglDepthbuffer,J,!1);else{const ie=J.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Te=Q.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,Te),t.framebufferRenderbuffer(t.FRAMEBUFFER,ie,t.RENDERBUFFER,Te)}n.bindFramebuffer(t.FRAMEBUFFER,null)}function nt(J,Q,_e){const ie=r.get(J);Q!==void 0&&we(ie.__webglFramebuffer,J,J.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),_e!==void 0&&je(J)}function ue(J){const Q=J.texture,_e=r.get(J),ie=r.get(Q);J.addEventListener("dispose",T);const Te=J.textures,We=J.isWebGLCubeRenderTarget===!0,ut=Te.length>1;if(ut||(ie.__webglTexture===void 0&&(ie.__webglTexture=t.createTexture()),ie.__version=Q.version,o.memory.textures++),We){_e.__webglFramebuffer=[];for(let lt=0;lt<6;lt++)if(Q.mipmaps&&Q.mipmaps.length>0){_e.__webglFramebuffer[lt]=[];for(let St=0;St<Q.mipmaps.length;St++)_e.__webglFramebuffer[lt][St]=t.createFramebuffer()}else _e.__webglFramebuffer[lt]=t.createFramebuffer()}else{if(Q.mipmaps&&Q.mipmaps.length>0){_e.__webglFramebuffer=[];for(let lt=0;lt<Q.mipmaps.length;lt++)_e.__webglFramebuffer[lt]=t.createFramebuffer()}else _e.__webglFramebuffer=t.createFramebuffer();if(ut)for(let lt=0,St=Te.length;lt<St;lt++){const Ot=r.get(Te[lt]);Ot.__webglTexture===void 0&&(Ot.__webglTexture=t.createTexture(),o.memory.textures++)}if(J.samples>0&&Re(J)===!1){_e.__webglMultisampledFramebuffer=t.createFramebuffer(),_e.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,_e.__webglMultisampledFramebuffer);for(let lt=0;lt<Te.length;lt++){const St=Te[lt];_e.__webglColorRenderbuffer[lt]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,_e.__webglColorRenderbuffer[lt]);const Ot=i.convert(St.format,St.colorSpace),et=i.convert(St.type),ht=_(St.internalFormat,Ot,et,St.colorSpace,J.isXRRenderTarget===!0),Mt=Oe(J);t.renderbufferStorageMultisample(t.RENDERBUFFER,Mt,ht,J.width,J.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+lt,t.RENDERBUFFER,_e.__webglColorRenderbuffer[lt])}t.bindRenderbuffer(t.RENDERBUFFER,null),J.depthBuffer&&(_e.__webglDepthRenderbuffer=t.createRenderbuffer(),ve(_e.__webglDepthRenderbuffer,J,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(We){n.bindTexture(t.TEXTURE_CUBE_MAP,ie.__webglTexture),le(t.TEXTURE_CUBE_MAP,Q);for(let lt=0;lt<6;lt++)if(Q.mipmaps&&Q.mipmaps.length>0)for(let St=0;St<Q.mipmaps.length;St++)we(_e.__webglFramebuffer[lt][St],J,Q,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+lt,St);else we(_e.__webglFramebuffer[lt],J,Q,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+lt,0);y(Q)&&g(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(ut){for(let lt=0,St=Te.length;lt<St;lt++){const Ot=Te[lt],et=r.get(Ot);n.bindTexture(t.TEXTURE_2D,et.__webglTexture),le(t.TEXTURE_2D,Ot),we(_e.__webglFramebuffer,J,Ot,t.COLOR_ATTACHMENT0+lt,t.TEXTURE_2D,0),y(Ot)&&g(t.TEXTURE_2D)}n.unbindTexture()}else{let lt=t.TEXTURE_2D;if((J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(lt=J.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(lt,ie.__webglTexture),le(lt,Q),Q.mipmaps&&Q.mipmaps.length>0)for(let St=0;St<Q.mipmaps.length;St++)we(_e.__webglFramebuffer[St],J,Q,t.COLOR_ATTACHMENT0,lt,St);else we(_e.__webglFramebuffer,J,Q,t.COLOR_ATTACHMENT0,lt,0);y(Q)&&g(lt),n.unbindTexture()}J.depthBuffer&&je(J)}function j(J){const Q=J.textures;for(let _e=0,ie=Q.length;_e<ie;_e++){const Te=Q[_e];if(y(Te)){const We=S(J),ut=r.get(Te).__webglTexture;n.bindTexture(We,ut),g(We),n.unbindTexture()}}}const he=[],K=[];function Fe(J){if(J.samples>0){if(Re(J)===!1){const Q=J.textures,_e=J.width,ie=J.height;let Te=t.COLOR_BUFFER_BIT;const We=J.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ut=r.get(J),lt=Q.length>1;if(lt)for(let St=0;St<Q.length;St++)n.bindFramebuffer(t.FRAMEBUFFER,ut.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+St,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,ut.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+St,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,ut.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,ut.__webglFramebuffer);for(let St=0;St<Q.length;St++){if(J.resolveDepthBuffer&&(J.depthBuffer&&(Te|=t.DEPTH_BUFFER_BIT),J.stencilBuffer&&J.resolveStencilBuffer&&(Te|=t.STENCIL_BUFFER_BIT)),lt){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,ut.__webglColorRenderbuffer[St]);const Ot=r.get(Q[St]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Ot,0)}t.blitFramebuffer(0,0,_e,ie,0,0,_e,ie,Te,t.NEAREST),l===!0&&(he.length=0,K.length=0,he.push(t.COLOR_ATTACHMENT0+St),J.depthBuffer&&J.resolveDepthBuffer===!1&&(he.push(We),K.push(We),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,K)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,he))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),lt)for(let St=0;St<Q.length;St++){n.bindFramebuffer(t.FRAMEBUFFER,ut.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+St,t.RENDERBUFFER,ut.__webglColorRenderbuffer[St]);const Ot=r.get(Q[St]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,ut.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+St,t.TEXTURE_2D,Ot,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,ut.__webglMultisampledFramebuffer)}else if(J.depthBuffer&&J.resolveDepthBuffer===!1&&l){const Q=J.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Q])}}}function Oe(J){return Math.min(s.maxSamples,J.samples)}function Re(J){const Q=r.get(J);return J.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Q.__useRenderToTexture!==!1}function te(J){const Q=o.render.frame;u.get(J)!==Q&&(u.set(J,Q),J.update())}function oe(J,Q){const _e=J.colorSpace,ie=J.format,Te=J.type;return J.isCompressedTexture===!0||J.isVideoTexture===!0||_e!==sp&&_e!==yu&&(Sr.getTransfer(_e)===Vr?(ie!==Ma||Te!==yc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",_e)),Q}function Ee(J){return typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement?(c.width=J.naturalWidth||J.width,c.height=J.naturalHeight||J.height):typeof VideoFrame<"u"&&J instanceof VideoFrame?(c.width=J.displayWidth,c.height=J.displayHeight):(c.width=J.width,c.height=J.height),c}this.allocateTextureUnit=G,this.resetTextureUnits=N,this.setTexture2D=X,this.setTexture2DArray=F,this.setTexture3D=$,this.setTextureCube=O,this.rebindTextures=nt,this.setupRenderTarget=ue,this.updateRenderTargetMipmap=j,this.updateMultisampleRenderTarget=Fe,this.setupDepthRenderbuffer=je,this.setupFrameBufferTexture=we,this.useMultisampledRTT=Re}function CZ(t,e){function n(r,s=yu){let i;const o=Sr.getTransfer(s);if(r===yc)return t.UNSIGNED_BYTE;if(r===fC)return t.UNSIGNED_SHORT_4_4_4_4;if(r===pC)return t.UNSIGNED_SHORT_5_5_5_1;if(r===WD)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===HD)return t.BYTE;if(r===GD)return t.SHORT;if(r===hg)return t.UNSIGNED_SHORT;if(r===hC)return t.INT;if(r===Yd)return t.UNSIGNED_INT;if(r===ic)return t.FLOAT;if(r===fv)return t.HALF_FLOAT;if(r===jD)return t.ALPHA;if(r===KD)return t.RGB;if(r===Ma)return t.RGBA;if(r===qD)return t.LUMINANCE;if(r===YD)return t.LUMINANCE_ALPHA;if(r===Of)return t.DEPTH_COMPONENT;if(r===rp)return t.DEPTH_STENCIL;if(r===XD)return t.RED;if(r===mC)return t.RED_INTEGER;if(r===ZD)return t.RG;if(r===gC)return t.RG_INTEGER;if(r===vC)return t.RGBA_INTEGER;if(r===zy||r===$y||r===Vy||r===Hy)if(o===Vr)if(i=e.get("WEBGL_compressed_texture_s3tc_srgb"),i!==null){if(r===zy)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===$y)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Vy)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Hy)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(i=e.get("WEBGL_compressed_texture_s3tc"),i!==null){if(r===zy)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===$y)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Vy)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Hy)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===yS||r===bS||r===_S||r===wS)if(i=e.get("WEBGL_compressed_texture_pvrtc"),i!==null){if(r===yS)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===bS)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===_S)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===wS)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===xS||r===SS||r===ES)if(i=e.get("WEBGL_compressed_texture_etc"),i!==null){if(r===xS||r===SS)return o===Vr?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(r===ES)return o===Vr?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===CS||r===TS||r===MS||r===AS||r===kS||r===IS||r===PS||r===RS||r===LS||r===OS||r===NS||r===DS||r===FS||r===BS)if(i=e.get("WEBGL_compressed_texture_astc"),i!==null){if(r===CS)return o===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===TS)return o===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===MS)return o===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===AS)return o===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===kS)return o===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===IS)return o===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===PS)return o===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===RS)return o===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===LS)return o===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===OS)return o===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===NS)return o===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===DS)return o===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===FS)return o===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===BS)return o===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Gy||r===US||r===zS)if(i=e.get("EXT_texture_compression_bptc"),i!==null){if(r===Gy)return o===Vr?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===US)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===zS)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===JD||r===$S||r===VS||r===HS)if(i=e.get("EXT_texture_compression_rgtc"),i!==null){if(r===Gy)return i.COMPRESSED_RED_RGTC1_EXT;if(r===$S)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===VS)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===HS)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===np?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}const TZ={type:"move"};class Dw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Aa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Aa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ze,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ze),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Aa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ze,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ze),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let s=null,i=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const v of e.hand.values()){const y=n.getJointPose(v,r),g=this._getHandJoint(c,v);y!==null&&(g.matrix.fromArray(y.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=y.radius),g.visible=y!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],h=u.position.distanceTo(d.position),f=.02,m=.005;c.inputState.pinching&&h>f+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(i=n.getPose(e.gripSpace,r),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(s=n.getPose(e.targetRaySpace,r),s===null&&i!==null&&(s=i),s!==null&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,s.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(s.linearVelocity)):a.hasLinearVelocity=!1,s.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(s.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(TZ)))}return a!==null&&(a.visible=s!==null),l!==null&&(l.visible=i!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Aa;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}const MZ=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,AZ=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class kZ{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const s=new Ti,i=e.properties.get(s);i.__webglTexture=n.texture,(n.depthNear!==r.depthNear||n.depthFar!==r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new Na({vertexShader:MZ,fragmentShader:AZ,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Os(new k1(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class IZ extends hh{constructor(e,n){super();const r=this;let s=null,i=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,h=null,f=null,m=null;const v=new kZ,y=n.getContextAttributes();let g=null,S=null;const _=[],w=[],E=new Dt;let C=null;const T=new xa;T.viewport=new ps;const I=new xa;I.viewport=new ps;const k=[T,I],M=new qj;let L=null,N=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(se){let ye=_[se];return ye===void 0&&(ye=new Dw,_[se]=ye),ye.getTargetRaySpace()},this.getControllerGrip=function(se){let ye=_[se];return ye===void 0&&(ye=new Dw,_[se]=ye),ye.getGripSpace()},this.getHand=function(se){let ye=_[se];return ye===void 0&&(ye=new Dw,_[se]=ye),ye.getHandSpace()};function G(se){const ye=w.indexOf(se.inputSource);if(ye===-1)return;const we=_[ye];we!==void 0&&(we.update(se.inputSource,se.frame,c||o),we.dispatchEvent({type:se.type,data:se.inputSource}))}function V(){s.removeEventListener("select",G),s.removeEventListener("selectstart",G),s.removeEventListener("selectend",G),s.removeEventListener("squeeze",G),s.removeEventListener("squeezestart",G),s.removeEventListener("squeezeend",G),s.removeEventListener("end",V),s.removeEventListener("inputsourceschange",X);for(let se=0;se<_.length;se++){const ye=w[se];ye!==null&&(w[se]=null,_[se].disconnect(ye))}L=null,N=null,v.reset(),e.setRenderTarget(g),f=null,h=null,d=null,s=null,S=null,fe.stop(),r.isPresenting=!1,e.setPixelRatio(C),e.setSize(E.width,E.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(se){i=se,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(se){a=se,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(se){c=se},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return d},this.getFrame=function(){return m},this.getSession=function(){return s},this.setSession=async function(se){if(s=se,s!==null){if(g=e.getRenderTarget(),s.addEventListener("select",G),s.addEventListener("selectstart",G),s.addEventListener("selectend",G),s.addEventListener("squeeze",G),s.addEventListener("squeezestart",G),s.addEventListener("squeezeend",G),s.addEventListener("end",V),s.addEventListener("inputsourceschange",X),y.xrCompatible!==!0&&await n.makeXRCompatible(),C=e.getPixelRatio(),e.getSize(E),s.enabledFeatures!==void 0&&s.enabledFeatures.includes("layers")){let we=null,ve=null,xe=null;y.depth&&(xe=y.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,we=y.stencil?rp:Of,ve=y.stencil?np:Yd);const je={colorFormat:n.RGBA8,depthFormat:xe,scaleFactor:i};d=new XRWebGLBinding(s,n),h=d.createProjectionLayer(je),s.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),S=new Xd(h.textureWidth,h.textureHeight,{format:Ma,type:yc,depthTexture:new h6(h.textureWidth,h.textureHeight,ve,void 0,void 0,void 0,void 0,void 0,void 0,we),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}else{const we={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:i};f=new XRWebGLLayer(s,n,we),s.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),S=new Xd(f.framebufferWidth,f.framebufferHeight,{format:Ma,type:yc,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}S.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await s.requestReferenceSpace(a),fe.setContext(s),fe.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function X(se){for(let ye=0;ye<se.removed.length;ye++){const we=se.removed[ye],ve=w.indexOf(we);ve>=0&&(w[ve]=null,_[ve].disconnect(we))}for(let ye=0;ye<se.added.length;ye++){const we=se.added[ye];let ve=w.indexOf(we);if(ve===-1){for(let je=0;je<_.length;je++)if(je>=w.length){w.push(we),ve=je;break}else if(w[je]===null){w[je]=we,ve=je;break}if(ve===-1)break}const xe=_[ve];xe&&xe.connect(we)}}const F=new Ze,$=new Ze;function O(se,ye,we){F.setFromMatrixPosition(ye.matrixWorld),$.setFromMatrixPosition(we.matrixWorld);const ve=F.distanceTo($),xe=ye.projectionMatrix.elements,je=we.projectionMatrix.elements,nt=xe[14]/(xe[10]-1),ue=xe[14]/(xe[10]+1),j=(xe[9]+1)/xe[5],he=(xe[9]-1)/xe[5],K=(xe[8]-1)/xe[0],Fe=(je[8]+1)/je[0],Oe=nt*K,Re=nt*Fe,te=ve/(-K+Fe),oe=te*-K;if(ye.matrixWorld.decompose(se.position,se.quaternion,se.scale),se.translateX(oe),se.translateZ(te),se.matrixWorld.compose(se.position,se.quaternion,se.scale),se.matrixWorldInverse.copy(se.matrixWorld).invert(),xe[10]===-1)se.projectionMatrix.copy(ye.projectionMatrix),se.projectionMatrixInverse.copy(ye.projectionMatrixInverse);else{const Ee=nt+te,J=ue+te,Q=Oe-oe,_e=Re+(ve-oe),ie=j*ue/J*Ee,Te=he*ue/J*Ee;se.projectionMatrix.makePerspective(Q,_e,ie,Te,Ee,J),se.projectionMatrixInverse.copy(se.projectionMatrix).invert()}}function z(se,ye){ye===null?se.matrixWorld.copy(se.matrix):se.matrixWorld.multiplyMatrices(ye.matrixWorld,se.matrix),se.matrixWorldInverse.copy(se.matrixWorld).invert()}this.updateCamera=function(se){if(s===null)return;let ye=se.near,we=se.far;v.texture!==null&&(v.depthNear>0&&(ye=v.depthNear),v.depthFar>0&&(we=v.depthFar)),M.near=I.near=T.near=ye,M.far=I.far=T.far=we,(L!==M.near||N!==M.far)&&(s.updateRenderState({depthNear:M.near,depthFar:M.far}),L=M.near,N=M.far),T.layers.mask=se.layers.mask|2,I.layers.mask=se.layers.mask|4,M.layers.mask=T.layers.mask|I.layers.mask;const ve=se.parent,xe=M.cameras;z(M,ve);for(let je=0;je<xe.length;je++)z(xe[je],ve);xe.length===2?O(M,T,I):M.projectionMatrix.copy(T.projectionMatrix),re(se,M,ve)};function re(se,ye,we){we===null?se.matrix.copy(ye.matrixWorld):(se.matrix.copy(we.matrixWorld),se.matrix.invert(),se.matrix.multiply(ye.matrixWorld)),se.matrix.decompose(se.position,se.quaternion,se.scale),se.updateMatrixWorld(!0),se.projectionMatrix.copy(ye.projectionMatrix),se.projectionMatrixInverse.copy(ye.projectionMatrixInverse),se.isPerspectiveCamera&&(se.fov=fg*2*Math.atan(1/se.projectionMatrix.elements[5]),se.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(h===null&&f===null))return l},this.setFoveation=function(se){l=se,h!==null&&(h.fixedFoveation=se),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=se)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(M)};let q=null;function le(se,ye){if(u=ye.getViewerPose(c||o),m=ye,u!==null){const we=u.views;f!==null&&(e.setRenderTargetFramebuffer(S,f.framebuffer),e.setRenderTarget(S));let ve=!1;we.length!==M.cameras.length&&(M.cameras.length=0,ve=!0);for(let je=0;je<we.length;je++){const nt=we[je];let ue=null;if(f!==null)ue=f.getViewport(nt);else{const he=d.getViewSubImage(h,nt);ue=he.viewport,je===0&&(e.setRenderTargetTextures(S,he.colorTexture,h.ignoreDepthValues?void 0:he.depthStencilTexture),e.setRenderTarget(S))}let j=k[je];j===void 0&&(j=new xa,j.layers.enable(je),j.viewport=new ps,k[je]=j),j.matrix.fromArray(nt.transform.matrix),j.matrix.decompose(j.position,j.quaternion,j.scale),j.projectionMatrix.fromArray(nt.projectionMatrix),j.projectionMatrixInverse.copy(j.projectionMatrix).invert(),j.viewport.set(ue.x,ue.y,ue.width,ue.height),je===0&&(M.matrix.copy(j.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),ve===!0&&M.cameras.push(j)}const xe=s.enabledFeatures;if(xe&&xe.includes("depth-sensing")){const je=d.getDepthInformation(we[0]);je&&je.isValid&&je.texture&&v.init(e,je,s.renderState)}}for(let we=0;we<_.length;we++){const ve=w[we],xe=_[we];ve!==null&&xe!==void 0&&xe.update(ve,ye,c||o)}q&&q(se,ye),ye.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ye}),m=null}const fe=new w6;fe.setAnimationLoop(le),this.setAnimationLoop=function(se){q=se},this.dispose=function(){}}}const ud=new wl,PZ=new Rr;function RZ(t,e){function n(y,g){y.matrixAutoUpdate===!0&&y.updateMatrix(),g.value.copy(y.matrix)}function r(y,g){g.color.getRGB(y.fogColor.value,s6(t)),g.isFog?(y.fogNear.value=g.near,y.fogFar.value=g.far):g.isFogExp2&&(y.fogDensity.value=g.density)}function s(y,g,S,_,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?i(y,g):g.isMeshToonMaterial?(i(y,g),d(y,g)):g.isMeshPhongMaterial?(i(y,g),u(y,g)):g.isMeshStandardMaterial?(i(y,g),h(y,g),g.isMeshPhysicalMaterial&&f(y,g,w)):g.isMeshMatcapMaterial?(i(y,g),m(y,g)):g.isMeshDepthMaterial?i(y,g):g.isMeshDistanceMaterial?(i(y,g),v(y,g)):g.isMeshNormalMaterial?i(y,g):g.isLineBasicMaterial?(o(y,g),g.isLineDashedMaterial&&a(y,g)):g.isPointsMaterial?l(y,g,S,_):g.isSpriteMaterial?c(y,g):g.isShadowMaterial?(y.color.value.copy(g.color),y.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function i(y,g){y.opacity.value=g.opacity,g.color&&y.diffuse.value.copy(g.color),g.emissive&&y.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(y.map.value=g.map,n(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,n(g.alphaMap,y.alphaMapTransform)),g.bumpMap&&(y.bumpMap.value=g.bumpMap,n(g.bumpMap,y.bumpMapTransform),y.bumpScale.value=g.bumpScale,g.side===lo&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,n(g.normalMap,y.normalMapTransform),y.normalScale.value.copy(g.normalScale),g.side===lo&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,n(g.displacementMap,y.displacementMapTransform),y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias),g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap,n(g.emissiveMap,y.emissiveMapTransform)),g.specularMap&&(y.specularMap.value=g.specularMap,n(g.specularMap,y.specularMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest);const S=e.get(g),_=S.envMap,w=S.envMapRotation;_&&(y.envMap.value=_,ud.copy(w),ud.x*=-1,ud.y*=-1,ud.z*=-1,_.isCubeTexture&&_.isRenderTargetTexture===!1&&(ud.y*=-1,ud.z*=-1),y.envMapRotation.value.setFromMatrix4(PZ.makeRotationFromEuler(ud)),y.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=g.reflectivity,y.ior.value=g.ior,y.refractionRatio.value=g.refractionRatio),g.lightMap&&(y.lightMap.value=g.lightMap,y.lightMapIntensity.value=g.lightMapIntensity,n(g.lightMap,y.lightMapTransform)),g.aoMap&&(y.aoMap.value=g.aoMap,y.aoMapIntensity.value=g.aoMapIntensity,n(g.aoMap,y.aoMapTransform))}function o(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,g.map&&(y.map.value=g.map,n(g.map,y.mapTransform))}function a(y,g){y.dashSize.value=g.dashSize,y.totalSize.value=g.dashSize+g.gapSize,y.scale.value=g.scale}function l(y,g,S,_){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.size.value=g.size*S,y.scale.value=_*.5,g.map&&(y.map.value=g.map,n(g.map,y.uvTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,n(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function c(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.rotation.value=g.rotation,g.map&&(y.map.value=g.map,n(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,n(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function u(y,g){y.specular.value.copy(g.specular),y.shininess.value=Math.max(g.shininess,1e-4)}function d(y,g){g.gradientMap&&(y.gradientMap.value=g.gradientMap)}function h(y,g){y.metalness.value=g.metalness,g.metalnessMap&&(y.metalnessMap.value=g.metalnessMap,n(g.metalnessMap,y.metalnessMapTransform)),y.roughness.value=g.roughness,g.roughnessMap&&(y.roughnessMap.value=g.roughnessMap,n(g.roughnessMap,y.roughnessMapTransform)),g.envMap&&(y.envMapIntensity.value=g.envMapIntensity)}function f(y,g,S){y.ior.value=g.ior,g.sheen>0&&(y.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),y.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(y.sheenColorMap.value=g.sheenColorMap,n(g.sheenColorMap,y.sheenColorMapTransform)),g.sheenRoughnessMap&&(y.sheenRoughnessMap.value=g.sheenRoughnessMap,n(g.sheenRoughnessMap,y.sheenRoughnessMapTransform))),g.clearcoat>0&&(y.clearcoat.value=g.clearcoat,y.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(y.clearcoatMap.value=g.clearcoatMap,n(g.clearcoatMap,y.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,n(g.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(y.clearcoatNormalMap.value=g.clearcoatNormalMap,n(g.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===lo&&y.clearcoatNormalScale.value.negate())),g.dispersion>0&&(y.dispersion.value=g.dispersion),g.iridescence>0&&(y.iridescence.value=g.iridescence,y.iridescenceIOR.value=g.iridescenceIOR,y.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(y.iridescenceMap.value=g.iridescenceMap,n(g.iridescenceMap,y.iridescenceMapTransform)),g.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=g.iridescenceThicknessMap,n(g.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),g.transmission>0&&(y.transmission.value=g.transmission,y.transmissionSamplerMap.value=S.texture,y.transmissionSamplerSize.value.set(S.width,S.height),g.transmissionMap&&(y.transmissionMap.value=g.transmissionMap,n(g.transmissionMap,y.transmissionMapTransform)),y.thickness.value=g.thickness,g.thicknessMap&&(y.thicknessMap.value=g.thicknessMap,n(g.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=g.attenuationDistance,y.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(y.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(y.anisotropyMap.value=g.anisotropyMap,n(g.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=g.specularIntensity,y.specularColor.value.copy(g.specularColor),g.specularColorMap&&(y.specularColorMap.value=g.specularColorMap,n(g.specularColorMap,y.specularColorMapTransform)),g.specularIntensityMap&&(y.specularIntensityMap.value=g.specularIntensityMap,n(g.specularIntensityMap,y.specularIntensityMapTransform))}function m(y,g){g.matcap&&(y.matcap.value=g.matcap)}function v(y,g){const S=e.get(g).light;y.referencePosition.value.setFromMatrixPosition(S.matrixWorld),y.nearDistance.value=S.shadow.camera.near,y.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:s}}function LZ(t,e,n,r){let s={},i={},o=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,_){const w=_.program;r.uniformBlockBinding(S,w)}function c(S,_){let w=s[S.id];w===void 0&&(m(S),w=u(S),s[S.id]=w,S.addEventListener("dispose",y));const E=_.program;r.updateUBOMapping(S,E);const C=e.render.frame;i[S.id]!==C&&(h(S),i[S.id]=C)}function u(S){const _=d();S.__bindingPointIndex=_;const w=t.createBuffer(),E=S.__size,C=S.usage;return t.bindBuffer(t.UNIFORM_BUFFER,w),t.bufferData(t.UNIFORM_BUFFER,E,C),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,_,w),w}function d(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(S){const _=s[S.id],w=S.uniforms,E=S.__cache;t.bindBuffer(t.UNIFORM_BUFFER,_);for(let C=0,T=w.length;C<T;C++){const I=Array.isArray(w[C])?w[C]:[w[C]];for(let k=0,M=I.length;k<M;k++){const L=I[k];if(f(L,C,k,E)===!0){const N=L.__offset,G=Array.isArray(L.value)?L.value:[L.value];let V=0;for(let X=0;X<G.length;X++){const F=G[X],$=v(F);typeof F=="number"||typeof F=="boolean"?(L.__data[0]=F,t.bufferSubData(t.UNIFORM_BUFFER,N+V,L.__data)):F.isMatrix3?(L.__data[0]=F.elements[0],L.__data[1]=F.elements[1],L.__data[2]=F.elements[2],L.__data[3]=0,L.__data[4]=F.elements[3],L.__data[5]=F.elements[4],L.__data[6]=F.elements[5],L.__data[7]=0,L.__data[8]=F.elements[6],L.__data[9]=F.elements[7],L.__data[10]=F.elements[8],L.__data[11]=0):(F.toArray(L.__data,V),V+=$.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,N,L.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function f(S,_,w,E){const C=S.value,T=_+"_"+w;if(E[T]===void 0)return typeof C=="number"||typeof C=="boolean"?E[T]=C:E[T]=C.clone(),!0;{const I=E[T];if(typeof C=="number"||typeof C=="boolean"){if(I!==C)return E[T]=C,!0}else if(I.equals(C)===!1)return I.copy(C),!0}return!1}function m(S){const _=S.uniforms;let w=0;const E=16;for(let T=0,I=_.length;T<I;T++){const k=Array.isArray(_[T])?_[T]:[_[T]];for(let M=0,L=k.length;M<L;M++){const N=k[M],G=Array.isArray(N.value)?N.value:[N.value];for(let V=0,X=G.length;V<X;V++){const F=G[V],$=v(F),O=w%E,z=O%$.boundary,re=O+z;w+=z,re!==0&&E-re<$.storage&&(w+=E-re),N.__data=new Float32Array($.storage/Float32Array.BYTES_PER_ELEMENT),N.__offset=w,w+=$.storage}}}const C=w%E;return C>0&&(w+=E-C),S.__size=w,S.__cache={},this}function v(S){const _={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(_.boundary=4,_.storage=4):S.isVector2?(_.boundary=8,_.storage=8):S.isVector3||S.isColor?(_.boundary=16,_.storage=12):S.isVector4?(_.boundary=16,_.storage=16):S.isMatrix3?(_.boundary=48,_.storage=48):S.isMatrix4?(_.boundary=64,_.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),_}function y(S){const _=S.target;_.removeEventListener("dispose",y);const w=o.indexOf(_.__bindingPointIndex);o.splice(w,1),t.deleteBuffer(s[_.id]),delete s[_.id],delete i[_.id]}function g(){for(const S in s)t.deleteBuffer(s[S]);o=[],s={},i={}}return{bind:l,update:c,dispose:g}}class OZ{constructor(e={}){const{canvas:n=PW(),context:r=null,depth:s=!0,stencil:i=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let f;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=r.getContextAttributes().alpha}else f=o;const m=new Uint32Array(4),v=new Int32Array(4);let y=null,g=null;const S=[],_=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ko,this.toneMapping=Au,this.toneMappingExposure=1;const w=this;let E=!1,C=0,T=0,I=null,k=-1,M=null;const L=new ps,N=new ps;let G=null;const V=new ar(0);let X=0,F=n.width,$=n.height,O=1,z=null,re=null;const q=new ps(0,0,F,$),le=new ps(0,0,F,$);let fe=!1;const se=new u6;let ye=!1,we=!1;this.transmissionResolutionScale=1;const ve=new Rr,xe=new Rr,je=new Ze,nt=new ps,ue={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let j=!1;function he(){return I===null?O:1}let K=r;function Fe(Se,Ke){return n.getContext(Se,Ke)}try{const Se={alpha:!0,depth:s,stencil:i,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${dC}`),n.addEventListener("webglcontextlost",vt,!1),n.addEventListener("webglcontextrestored",Rt,!1),n.addEventListener("webglcontextcreationerror",jt,!1),K===null){const Ke="webgl2";if(K=Fe(Ke,Se),K===null)throw Fe(Ke)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Se){throw console.error("THREE.WebGLRenderer: "+Se.message),Se}let Oe,Re,te,oe,Ee,J,Q,_e,ie,Te,We,ut,lt,St,Ot,et,ht,Mt,ze,Me,be,Ve,mt,Ue;function Ct(){Oe=new HY(K),Oe.init(),Ve=new CZ(K,Oe),Re=new FY(K,Oe,e,Ve),te=new SZ(K,Oe),Re.reverseDepthBuffer&&h&&te.buffers.depth.setReversed(!0),oe=new jY(K),Ee=new uZ,J=new EZ(K,Oe,te,Ee,Re,Ve,oe),Q=new UY(w),_e=new VY(w),ie=new Qj(K),mt=new NY(K,ie),Te=new GY(K,ie,oe,mt),We=new qY(K,Te,ie,oe),ze=new KY(K,Re,J),et=new BY(Ee),ut=new cZ(w,Q,_e,Oe,Re,mt,et),lt=new RZ(w,Ee),St=new hZ,Ot=new yZ(Oe),Mt=new OY(w,Q,_e,te,We,f,l),ht=new wZ(w,We,Re),Ue=new LZ(K,oe,Re,te),Me=new DY(K,Oe,oe),be=new WY(K,Oe,oe),oe.programs=ut.programs,w.capabilities=Re,w.extensions=Oe,w.properties=Ee,w.renderLists=St,w.shadowMap=ht,w.state=te,w.info=oe}Ct();const st=new IZ(w,K);this.xr=st,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const Se=Oe.get("WEBGL_lose_context");Se&&Se.loseContext()},this.forceContextRestore=function(){const Se=Oe.get("WEBGL_lose_context");Se&&Se.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(Se){Se!==void 0&&(O=Se,this.setSize(F,$,!1))},this.getSize=function(Se){return Se.set(F,$)},this.setSize=function(Se,Ke,ke=!0){if(st.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}F=Se,$=Ke,n.width=Math.floor(Se*O),n.height=Math.floor(Ke*O),ke===!0&&(n.style.width=Se+"px",n.style.height=Ke+"px"),this.setViewport(0,0,Se,Ke)},this.getDrawingBufferSize=function(Se){return Se.set(F*O,$*O).floor()},this.setDrawingBufferSize=function(Se,Ke,ke){F=Se,$=Ke,O=ke,n.width=Math.floor(Se*ke),n.height=Math.floor(Ke*ke),this.setViewport(0,0,Se,Ke)},this.getCurrentViewport=function(Se){return Se.copy(L)},this.getViewport=function(Se){return Se.copy(q)},this.setViewport=function(Se,Ke,ke,He){Se.isVector4?q.set(Se.x,Se.y,Se.z,Se.w):q.set(Se,Ke,ke,He),te.viewport(L.copy(q).multiplyScalar(O).round())},this.getScissor=function(Se){return Se.copy(le)},this.setScissor=function(Se,Ke,ke,He){Se.isVector4?le.set(Se.x,Se.y,Se.z,Se.w):le.set(Se,Ke,ke,He),te.scissor(N.copy(le).multiplyScalar(O).round())},this.getScissorTest=function(){return fe},this.setScissorTest=function(Se){te.setScissorTest(fe=Se)},this.setOpaqueSort=function(Se){z=Se},this.setTransparentSort=function(Se){re=Se},this.getClearColor=function(Se){return Se.copy(Mt.getClearColor())},this.setClearColor=function(){Mt.setClearColor.apply(Mt,arguments)},this.getClearAlpha=function(){return Mt.getClearAlpha()},this.setClearAlpha=function(){Mt.setClearAlpha.apply(Mt,arguments)},this.clear=function(Se=!0,Ke=!0,ke=!0){let He=0;if(Se){let $e=!1;if(I!==null){const dt=I.texture.format;$e=dt===vC||dt===gC||dt===mC}if($e){const dt=I.texture.type,wt=dt===yc||dt===Yd||dt===hg||dt===np||dt===fC||dt===pC,en=Mt.getClearColor(),pn=Mt.getClearAlpha(),An=en.r,$n=en.g,kn=en.b;wt?(m[0]=An,m[1]=$n,m[2]=kn,m[3]=pn,K.clearBufferuiv(K.COLOR,0,m)):(v[0]=An,v[1]=$n,v[2]=kn,v[3]=pn,K.clearBufferiv(K.COLOR,0,v))}else He|=K.COLOR_BUFFER_BIT}Ke&&(He|=K.DEPTH_BUFFER_BIT),ke&&(He|=K.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),K.clear(He)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",vt,!1),n.removeEventListener("webglcontextrestored",Rt,!1),n.removeEventListener("webglcontextcreationerror",jt,!1),Mt.dispose(),St.dispose(),Ot.dispose(),Ee.dispose(),Q.dispose(),_e.dispose(),We.dispose(),mt.dispose(),Ue.dispose(),ut.dispose(),st.dispose(),st.removeEventListener("sessionstart",Ur),st.removeEventListener("sessionend",Y),Pn.stop()};function vt(Se){Se.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function Rt(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const Se=oe.autoReset,Ke=ht.enabled,ke=ht.autoUpdate,He=ht.needsUpdate,$e=ht.type;Ct(),oe.autoReset=Se,ht.enabled=Ke,ht.autoUpdate=ke,ht.needsUpdate=He,ht.type=$e}function jt(Se){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Se.statusMessage)}function dn(Se){const Ke=Se.target;Ke.removeEventListener("dispose",dn),sn(Ke)}function sn(Se){At(Se),Ee.remove(Se)}function At(Se){const Ke=Ee.get(Se).programs;Ke!==void 0&&(Ke.forEach(function(ke){ut.releaseProgram(ke)}),Se.isShaderMaterial&&ut.releaseShaderCache(Se))}this.renderBufferDirect=function(Se,Ke,ke,He,$e,dt){Ke===null&&(Ke=ue);const wt=$e.isMesh&&$e.matrixWorld.determinant()<0,en=On(Se,Ke,ke,He,$e);te.setMaterial(He,wt);let pn=ke.index,An=1;if(He.wireframe===!0){if(pn=Te.getWireframeAttribute(ke),pn===void 0)return;An=2}const $n=ke.drawRange,kn=ke.attributes.position;let Zn=$n.start*An,ur=($n.start+$n.count)*An;dt!==null&&(Zn=Math.max(Zn,dt.start*An),ur=Math.min(ur,(dt.start+dt.count)*An)),pn!==null?(Zn=Math.max(Zn,0),ur=Math.min(ur,pn.count)):kn!=null&&(Zn=Math.max(Zn,0),ur=Math.min(ur,kn.count));const zr=ur-Zn;if(zr<0||zr===1/0)return;mt.setup($e,He,en,ke,pn);let $r,dr=Me;if(pn!==null&&($r=ie.get(pn),dr=be,dr.setIndex($r)),$e.isMesh)He.wireframe===!0?(te.setLineWidth(He.wireframeLinewidth*he()),dr.setMode(K.LINES)):dr.setMode(K.TRIANGLES);else if($e.isLine){let Sn=He.linewidth;Sn===void 0&&(Sn=1),te.setLineWidth(Sn*he()),$e.isLineSegments?dr.setMode(K.LINES):$e.isLineLoop?dr.setMode(K.LINE_LOOP):dr.setMode(K.LINE_STRIP)}else $e.isPoints?dr.setMode(K.POINTS):$e.isSprite&&dr.setMode(K.TRIANGLES);if($e.isBatchedMesh)if($e._multiDrawInstances!==null)dr.renderMultiDrawInstances($e._multiDrawStarts,$e._multiDrawCounts,$e._multiDrawCount,$e._multiDrawInstances);else if(Oe.get("WEBGL_multi_draw"))dr.renderMultiDraw($e._multiDrawStarts,$e._multiDrawCounts,$e._multiDrawCount);else{const Sn=$e._multiDrawStarts,Ms=$e._multiDrawCounts,xr=$e._multiDrawCount,ts=pn?ie.get(pn).bytesPerElement:1,Fc=Ee.get(He).currentProgram.getUniforms();for(let Pi=0;Pi<xr;Pi++)Fc.setValue(K,"_gl_DrawID",Pi),dr.render(Sn[Pi]/ts,Ms[Pi])}else if($e.isInstancedMesh)dr.renderInstances(Zn,zr,$e.count);else if(ke.isInstancedBufferGeometry){const Sn=ke._maxInstanceCount!==void 0?ke._maxInstanceCount:1/0,Ms=Math.min(ke.instanceCount,Sn);dr.renderInstances(Zn,zr,Ms)}else dr.render(Zn,zr)};function on(Se,Ke,ke){Se.transparent===!0&&Se.side===dl&&Se.forceSinglePass===!1?(Se.side=lo,Se.needsUpdate=!0,Ye(Se,Ke,ke),Se.side=Ru,Se.needsUpdate=!0,Ye(Se,Ke,ke),Se.side=dl):Ye(Se,Ke,ke)}this.compile=function(Se,Ke,ke=null){ke===null&&(ke=Se),g=Ot.get(ke),g.init(Ke),_.push(g),ke.traverseVisible(function($e){$e.isLight&&$e.layers.test(Ke.layers)&&(g.pushLight($e),$e.castShadow&&g.pushShadow($e))}),Se!==ke&&Se.traverseVisible(function($e){$e.isLight&&$e.layers.test(Ke.layers)&&(g.pushLight($e),$e.castShadow&&g.pushShadow($e))}),g.setupLights();const He=new Set;return Se.traverse(function($e){if(!($e.isMesh||$e.isPoints||$e.isLine||$e.isSprite))return;const dt=$e.material;if(dt)if(Array.isArray(dt))for(let wt=0;wt<dt.length;wt++){const en=dt[wt];on(en,ke,$e),He.add(en)}else on(dt,ke,$e),He.add(dt)}),_.pop(),g=null,He},this.compileAsync=function(Se,Ke,ke=null){const He=this.compile(Se,Ke,ke);return new Promise($e=>{function dt(){if(He.forEach(function(wt){Ee.get(wt).currentProgram.isReady()&&He.delete(wt)}),He.size===0){$e(Se);return}setTimeout(dt,10)}Oe.get("KHR_parallel_shader_compile")!==null?dt():setTimeout(dt,10)})};let Jt=null;function jr(Se){Jt&&Jt(Se)}function Ur(){Pn.stop()}function Y(){Pn.start()}const Pn=new w6;Pn.setAnimationLoop(jr),typeof self<"u"&&Pn.setContext(self),this.setAnimationLoop=function(Se){Jt=Se,st.setAnimationLoop(Se),Se===null?Pn.stop():Pn.start()},st.addEventListener("sessionstart",Ur),st.addEventListener("sessionend",Y),this.render=function(Se,Ke){if(Ke!==void 0&&Ke.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;if(Se.matrixWorldAutoUpdate===!0&&Se.updateMatrixWorld(),Ke.parent===null&&Ke.matrixWorldAutoUpdate===!0&&Ke.updateMatrixWorld(),st.enabled===!0&&st.isPresenting===!0&&(st.cameraAutoUpdate===!0&&st.updateCamera(Ke),Ke=st.getCamera()),Se.isScene===!0&&Se.onBeforeRender(w,Se,Ke,I),g=Ot.get(Se,_.length),g.init(Ke),_.push(g),xe.multiplyMatrices(Ke.projectionMatrix,Ke.matrixWorldInverse),se.setFromProjectionMatrix(xe),we=this.localClippingEnabled,ye=et.init(this.clippingPlanes,we),y=St.get(Se,S.length),y.init(),S.push(y),st.enabled===!0&&st.isPresenting===!0){const dt=w.xr.getDepthSensingMesh();dt!==null&&ii(dt,Ke,-1/0,w.sortObjects)}ii(Se,Ke,0,w.sortObjects),y.finish(),w.sortObjects===!0&&y.sort(z,re),j=st.enabled===!1||st.isPresenting===!1||st.hasDepthSensing()===!1,j&&Mt.addToRenderList(y,Se),this.info.render.frame++,ye===!0&&et.beginShadows();const ke=g.state.shadowsArray;ht.render(ke,Se,Ke),ye===!0&&et.endShadows(),this.info.autoReset===!0&&this.info.reset();const He=y.opaque,$e=y.transmissive;if(g.setupLights(),Ke.isArrayCamera){const dt=Ke.cameras;if($e.length>0)for(let wt=0,en=dt.length;wt<en;wt++){const pn=dt[wt];as(He,$e,Se,pn)}j&&Mt.render(Se);for(let wt=0,en=dt.length;wt<en;wt++){const pn=dt[wt];Fs(y,Se,pn,pn.viewport)}}else $e.length>0&&as(He,$e,Se,Ke),j&&Mt.render(Se),Fs(y,Se,Ke);I!==null&&T===0&&(J.updateMultisampleRenderTarget(I),J.updateRenderTargetMipmap(I)),Se.isScene===!0&&Se.onAfterRender(w,Se,Ke),mt.resetDefaultState(),k=-1,M=null,_.pop(),_.length>0?(g=_[_.length-1],ye===!0&&et.setGlobalState(w.clippingPlanes,g.state.camera)):g=null,S.pop(),S.length>0?y=S[S.length-1]:y=null};function ii(Se,Ke,ke,He){if(Se.visible===!1)return;if(Se.layers.test(Ke.layers)){if(Se.isGroup)ke=Se.renderOrder;else if(Se.isLOD)Se.autoUpdate===!0&&Se.update(Ke);else if(Se.isLight)g.pushLight(Se),Se.castShadow&&g.pushShadow(Se);else if(Se.isSprite){if(!Se.frustumCulled||se.intersectsSprite(Se)){He&&nt.setFromMatrixPosition(Se.matrixWorld).applyMatrix4(xe);const wt=We.update(Se),en=Se.material;en.visible&&y.push(Se,wt,en,ke,nt.z,null)}}else if((Se.isMesh||Se.isLine||Se.isPoints)&&(!Se.frustumCulled||se.intersectsObject(Se))){const wt=We.update(Se),en=Se.material;if(He&&(Se.boundingSphere!==void 0?(Se.boundingSphere===null&&Se.computeBoundingSphere(),nt.copy(Se.boundingSphere.center)):(wt.boundingSphere===null&&wt.computeBoundingSphere(),nt.copy(wt.boundingSphere.center)),nt.applyMatrix4(Se.matrixWorld).applyMatrix4(xe)),Array.isArray(en)){const pn=wt.groups;for(let An=0,$n=pn.length;An<$n;An++){const kn=pn[An],Zn=en[kn.materialIndex];Zn&&Zn.visible&&y.push(Se,wt,Zn,ke,nt.z,kn)}}else en.visible&&y.push(Se,wt,en,ke,nt.z,null)}}const dt=Se.children;for(let wt=0,en=dt.length;wt<en;wt++)ii(dt[wt],Ke,ke,He)}function Fs(Se,Ke,ke,He){const $e=Se.opaque,dt=Se.transmissive,wt=Se.transparent;g.setupLightsView(ke),ye===!0&&et.setGlobalState(w.clippingPlanes,ke),He&&te.viewport(L.copy(He)),$e.length>0&&Ii($e,Ke,ke),dt.length>0&&Ii(dt,Ke,ke),wt.length>0&&Ii(wt,Ke,ke),te.buffers.depth.setTest(!0),te.buffers.depth.setMask(!0),te.buffers.color.setMask(!0),te.setPolygonOffset(!1)}function as(Se,Ke,ke,He){if((ke.isScene===!0?ke.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[He.id]===void 0&&(g.state.transmissionRenderTarget[He.id]=new Xd(1,1,{generateMipmaps:!0,type:Oe.has("EXT_color_buffer_half_float")||Oe.has("EXT_color_buffer_float")?fv:yc,minFilter:Ld,samples:4,stencilBuffer:i,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Sr.workingColorSpace}));const dt=g.state.transmissionRenderTarget[He.id],wt=He.viewport||L;dt.setSize(wt.z*w.transmissionResolutionScale,wt.w*w.transmissionResolutionScale);const en=w.getRenderTarget();w.setRenderTarget(dt),w.getClearColor(V),X=w.getClearAlpha(),X<1&&w.setClearColor(16777215,.5),w.clear(),j&&Mt.render(ke);const pn=w.toneMapping;w.toneMapping=Au;const An=He.viewport;if(He.viewport!==void 0&&(He.viewport=void 0),g.setupLightsView(He),ye===!0&&et.setGlobalState(w.clippingPlanes,He),Ii(Se,ke,He),J.updateMultisampleRenderTarget(dt),J.updateRenderTargetMipmap(dt),Oe.has("WEBGL_multisampled_render_to_texture")===!1){let $n=!1;for(let kn=0,Zn=Ke.length;kn<Zn;kn++){const ur=Ke[kn],zr=ur.object,$r=ur.geometry,dr=ur.material,Sn=ur.group;if(dr.side===dl&&zr.layers.test(He.layers)){const Ms=dr.side;dr.side=lo,dr.needsUpdate=!0,Xe(zr,ke,He,$r,dr,Sn),dr.side=Ms,dr.needsUpdate=!0,$n=!0}}$n===!0&&(J.updateMultisampleRenderTarget(dt),J.updateRenderTargetMipmap(dt))}w.setRenderTarget(en),w.setClearColor(V,X),An!==void 0&&(He.viewport=An),w.toneMapping=pn}function Ii(Se,Ke,ke){const He=Ke.isScene===!0?Ke.overrideMaterial:null;for(let $e=0,dt=Se.length;$e<dt;$e++){const wt=Se[$e],en=wt.object,pn=wt.geometry,An=He===null?wt.material:He,$n=wt.group;en.layers.test(ke.layers)&&Xe(en,Ke,ke,pn,An,$n)}}function Xe(Se,Ke,ke,He,$e,dt){Se.onBeforeRender(w,Ke,ke,He,$e,dt),Se.modelViewMatrix.multiplyMatrices(ke.matrixWorldInverse,Se.matrixWorld),Se.normalMatrix.getNormalMatrix(Se.modelViewMatrix),$e.onBeforeRender(w,Ke,ke,He,Se,dt),$e.transparent===!0&&$e.side===dl&&$e.forceSinglePass===!1?($e.side=lo,$e.needsUpdate=!0,w.renderBufferDirect(ke,Ke,He,$e,Se,dt),$e.side=Ru,$e.needsUpdate=!0,w.renderBufferDirect(ke,Ke,He,$e,Se,dt),$e.side=dl):w.renderBufferDirect(ke,Ke,He,$e,Se,dt),Se.onAfterRender(w,Ke,ke,He,$e,dt)}function Ye(Se,Ke,ke){Ke.isScene!==!0&&(Ke=ue);const He=Ee.get(Se),$e=g.state.lights,dt=g.state.shadowsArray,wt=$e.state.version,en=ut.getParameters(Se,$e.state,dt,Ke,ke),pn=ut.getProgramCacheKey(en);let An=He.programs;He.environment=Se.isMeshStandardMaterial?Ke.environment:null,He.fog=Ke.fog,He.envMap=(Se.isMeshStandardMaterial?_e:Q).get(Se.envMap||He.environment),He.envMapRotation=He.environment!==null&&Se.envMap===null?Ke.environmentRotation:Se.envMapRotation,An===void 0&&(Se.addEventListener("dispose",dn),An=new Map,He.programs=An);let $n=An.get(pn);if($n!==void 0){if(He.currentProgram===$n&&He.lightsStateVersion===wt)return Gt(Se,en),$n}else en.uniforms=ut.getUniforms(Se),Se.onBeforeCompile(en,w),$n=ut.acquireProgram(en,pn),An.set(pn,$n),He.uniforms=en.uniforms;const kn=He.uniforms;return(!Se.isShaderMaterial&&!Se.isRawShaderMaterial||Se.clipping===!0)&&(kn.clippingPlanes=et.uniform),Gt(Se,en),He.needsLights=Ts(Se),He.lightsStateVersion=wt,He.needsLights&&(kn.ambientLightColor.value=$e.state.ambient,kn.lightProbe.value=$e.state.probe,kn.directionalLights.value=$e.state.directional,kn.directionalLightShadows.value=$e.state.directionalShadow,kn.spotLights.value=$e.state.spot,kn.spotLightShadows.value=$e.state.spotShadow,kn.rectAreaLights.value=$e.state.rectArea,kn.ltc_1.value=$e.state.rectAreaLTC1,kn.ltc_2.value=$e.state.rectAreaLTC2,kn.pointLights.value=$e.state.point,kn.pointLightShadows.value=$e.state.pointShadow,kn.hemisphereLights.value=$e.state.hemi,kn.directionalShadowMap.value=$e.state.directionalShadowMap,kn.directionalShadowMatrix.value=$e.state.directionalShadowMatrix,kn.spotShadowMap.value=$e.state.spotShadowMap,kn.spotLightMatrix.value=$e.state.spotLightMatrix,kn.spotLightMap.value=$e.state.spotLightMap,kn.pointShadowMap.value=$e.state.pointShadowMap,kn.pointShadowMatrix.value=$e.state.pointShadowMatrix),He.currentProgram=$n,He.uniformsList=null,$n}function gt(Se){if(Se.uniformsList===null){const Ke=Se.currentProgram.getUniforms();Se.uniformsList=Wy.seqWithValue(Ke.seq,Se.uniforms)}return Se.uniformsList}function Gt(Se,Ke){const ke=Ee.get(Se);ke.outputColorSpace=Ke.outputColorSpace,ke.batching=Ke.batching,ke.batchingColor=Ke.batchingColor,ke.instancing=Ke.instancing,ke.instancingColor=Ke.instancingColor,ke.instancingMorph=Ke.instancingMorph,ke.skinning=Ke.skinning,ke.morphTargets=Ke.morphTargets,ke.morphNormals=Ke.morphNormals,ke.morphColors=Ke.morphColors,ke.morphTargetsCount=Ke.morphTargetsCount,ke.numClippingPlanes=Ke.numClippingPlanes,ke.numIntersection=Ke.numClipIntersection,ke.vertexAlphas=Ke.vertexAlphas,ke.vertexTangents=Ke.vertexTangents,ke.toneMapping=Ke.toneMapping}function On(Se,Ke,ke,He,$e){Ke.isScene!==!0&&(Ke=ue),J.resetTextureUnits();const dt=Ke.fog,wt=He.isMeshStandardMaterial?Ke.environment:null,en=I===null?w.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:sp,pn=(He.isMeshStandardMaterial?_e:Q).get(He.envMap||wt),An=He.vertexColors===!0&&!!ke.attributes.color&&ke.attributes.color.itemSize===4,$n=!!ke.attributes.tangent&&(!!He.normalMap||He.anisotropy>0),kn=!!ke.morphAttributes.position,Zn=!!ke.morphAttributes.normal,ur=!!ke.morphAttributes.color;let zr=Au;He.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(zr=w.toneMapping);const $r=ke.morphAttributes.position||ke.morphAttributes.normal||ke.morphAttributes.color,dr=$r!==void 0?$r.length:0,Sn=Ee.get(He),Ms=g.state.lights;if(ye===!0&&(we===!0||Se!==M)){const Us=Se===M&&He.id===k;et.setState(He,Se,Us)}let xr=!1;He.version===Sn.__version?(Sn.needsLights&&Sn.lightsStateVersion!==Ms.state.version||Sn.outputColorSpace!==en||$e.isBatchedMesh&&Sn.batching===!1||!$e.isBatchedMesh&&Sn.batching===!0||$e.isBatchedMesh&&Sn.batchingColor===!0&&$e.colorTexture===null||$e.isBatchedMesh&&Sn.batchingColor===!1&&$e.colorTexture!==null||$e.isInstancedMesh&&Sn.instancing===!1||!$e.isInstancedMesh&&Sn.instancing===!0||$e.isSkinnedMesh&&Sn.skinning===!1||!$e.isSkinnedMesh&&Sn.skinning===!0||$e.isInstancedMesh&&Sn.instancingColor===!0&&$e.instanceColor===null||$e.isInstancedMesh&&Sn.instancingColor===!1&&$e.instanceColor!==null||$e.isInstancedMesh&&Sn.instancingMorph===!0&&$e.morphTexture===null||$e.isInstancedMesh&&Sn.instancingMorph===!1&&$e.morphTexture!==null||Sn.envMap!==pn||He.fog===!0&&Sn.fog!==dt||Sn.numClippingPlanes!==void 0&&(Sn.numClippingPlanes!==et.numPlanes||Sn.numIntersection!==et.numIntersection)||Sn.vertexAlphas!==An||Sn.vertexTangents!==$n||Sn.morphTargets!==kn||Sn.morphNormals!==Zn||Sn.morphColors!==ur||Sn.toneMapping!==zr||Sn.morphTargetsCount!==dr)&&(xr=!0):(xr=!0,Sn.__version=He.version);let ts=Sn.currentProgram;xr===!0&&(ts=Ye(He,Ke,$e));let Fc=!1,Pi=!1,Bc=!1;const Kr=ts.getUniforms(),Ri=Sn.uniforms;if(te.useProgram(ts.program)&&(Fc=!0,Pi=!0,Bc=!0),He.id!==k&&(k=He.id,Pi=!0),Fc||M!==Se){te.buffers.depth.getReversed()?(ve.copy(Se.projectionMatrix),LW(ve),OW(ve),Kr.setValue(K,"projectionMatrix",ve)):Kr.setValue(K,"projectionMatrix",Se.projectionMatrix),Kr.setValue(K,"viewMatrix",Se.matrixWorldInverse);const zs=Kr.map.cameraPosition;zs!==void 0&&zs.setValue(K,je.setFromMatrixPosition(Se.matrixWorld)),Re.logarithmicDepthBuffer&&Kr.setValue(K,"logDepthBufFC",2/(Math.log(Se.far+1)/Math.LN2)),(He.isMeshPhongMaterial||He.isMeshToonMaterial||He.isMeshLambertMaterial||He.isMeshBasicMaterial||He.isMeshStandardMaterial||He.isShaderMaterial)&&Kr.setValue(K,"isOrthographic",Se.isOrthographicCamera===!0),M!==Se&&(M=Se,Pi=!0,Bc=!0)}if($e.isSkinnedMesh){Kr.setOptional(K,$e,"bindMatrix"),Kr.setOptional(K,$e,"bindMatrixInverse");const Us=$e.skeleton;Us&&(Us.boneTexture===null&&Us.computeBoneTexture(),Kr.setValue(K,"boneTexture",Us.boneTexture,J))}$e.isBatchedMesh&&(Kr.setOptional(K,$e,"batchingTexture"),Kr.setValue(K,"batchingTexture",$e._matricesTexture,J),Kr.setOptional(K,$e,"batchingIdTexture"),Kr.setValue(K,"batchingIdTexture",$e._indirectTexture,J),Kr.setOptional(K,$e,"batchingColorTexture"),$e._colorsTexture!==null&&Kr.setValue(K,"batchingColorTexture",$e._colorsTexture,J));const Li=ke.morphAttributes;if((Li.position!==void 0||Li.normal!==void 0||Li.color!==void 0)&&ze.update($e,ke,ts),(Pi||Sn.receiveShadow!==$e.receiveShadow)&&(Sn.receiveShadow=$e.receiveShadow,Kr.setValue(K,"receiveShadow",$e.receiveShadow)),He.isMeshGouraudMaterial&&He.envMap!==null&&(Ri.envMap.value=pn,Ri.flipEnvMap.value=pn.isCubeTexture&&pn.isRenderTargetTexture===!1?-1:1),He.isMeshStandardMaterial&&He.envMap===null&&Ke.environment!==null&&(Ri.envMapIntensity.value=Ke.environmentIntensity),Pi&&(Kr.setValue(K,"toneMappingExposure",w.toneMappingExposure),Sn.needsLights&&Xr(Ri,Bc),dt&&He.fog===!0&&lt.refreshFogUniforms(Ri,dt),lt.refreshMaterialUniforms(Ri,He,O,$,g.state.transmissionRenderTarget[Se.id]),Wy.upload(K,gt(Sn),Ri,J)),He.isShaderMaterial&&He.uniformsNeedUpdate===!0&&(Wy.upload(K,gt(Sn),Ri,J),He.uniformsNeedUpdate=!1),He.isSpriteMaterial&&Kr.setValue(K,"center",$e.center),Kr.setValue(K,"modelViewMatrix",$e.modelViewMatrix),Kr.setValue(K,"normalMatrix",$e.normalMatrix),Kr.setValue(K,"modelMatrix",$e.matrixWorld),He.isShaderMaterial||He.isRawShaderMaterial){const Us=He.uniformsGroups;for(let zs=0,Qu=Us.length;zs<Qu;zs++){const b=Us[zs];Ue.update(b,ts),Ue.bind(b,ts)}}return ts}function Xr(Se,Ke){Se.ambientLightColor.needsUpdate=Ke,Se.lightProbe.needsUpdate=Ke,Se.directionalLights.needsUpdate=Ke,Se.directionalLightShadows.needsUpdate=Ke,Se.pointLights.needsUpdate=Ke,Se.pointLightShadows.needsUpdate=Ke,Se.spotLights.needsUpdate=Ke,Se.spotLightShadows.needsUpdate=Ke,Se.rectAreaLights.needsUpdate=Ke,Se.hemisphereLights.needsUpdate=Ke}function Ts(Se){return Se.isMeshLambertMaterial||Se.isMeshToonMaterial||Se.isMeshPhongMaterial||Se.isMeshStandardMaterial||Se.isShadowMaterial||Se.isShaderMaterial&&Se.lights===!0}this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(Se,Ke,ke){Ee.get(Se.texture).__webglTexture=Ke,Ee.get(Se.depthTexture).__webglTexture=ke;const He=Ee.get(Se);He.__hasExternalTextures=!0,He.__autoAllocateDepthBuffer=ke===void 0,He.__autoAllocateDepthBuffer||Oe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),He.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Se,Ke){const ke=Ee.get(Se);ke.__webglFramebuffer=Ke,ke.__useDefaultFramebuffer=Ke===void 0};const Un=K.createFramebuffer();this.setRenderTarget=function(Se,Ke=0,ke=0){I=Se,C=Ke,T=ke;let He=!0,$e=null,dt=!1,wt=!1;if(Se){const pn=Ee.get(Se);if(pn.__useDefaultFramebuffer!==void 0)te.bindFramebuffer(K.FRAMEBUFFER,null),He=!1;else if(pn.__webglFramebuffer===void 0)J.setupRenderTarget(Se);else if(pn.__hasExternalTextures)J.rebindTextures(Se,Ee.get(Se.texture).__webglTexture,Ee.get(Se.depthTexture).__webglTexture);else if(Se.depthBuffer){const kn=Se.depthTexture;if(pn.__boundDepthTexture!==kn){if(kn!==null&&Ee.has(kn)&&(Se.width!==kn.image.width||Se.height!==kn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");J.setupDepthRenderbuffer(Se)}}const An=Se.texture;(An.isData3DTexture||An.isDataArrayTexture||An.isCompressedArrayTexture)&&(wt=!0);const $n=Ee.get(Se).__webglFramebuffer;Se.isWebGLCubeRenderTarget?(Array.isArray($n[Ke])?$e=$n[Ke][ke]:$e=$n[Ke],dt=!0):Se.samples>0&&J.useMultisampledRTT(Se)===!1?$e=Ee.get(Se).__webglMultisampledFramebuffer:Array.isArray($n)?$e=$n[ke]:$e=$n,L.copy(Se.viewport),N.copy(Se.scissor),G=Se.scissorTest}else L.copy(q).multiplyScalar(O).floor(),N.copy(le).multiplyScalar(O).floor(),G=fe;if(ke!==0&&($e=Un),te.bindFramebuffer(K.FRAMEBUFFER,$e)&&He&&te.drawBuffers(Se,$e),te.viewport(L),te.scissor(N),te.setScissorTest(G),dt){const pn=Ee.get(Se.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,pn.__webglTexture,ke)}else if(wt){const pn=Ee.get(Se.texture),An=Ke;K.framebufferTextureLayer(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,pn.__webglTexture,ke,An)}else if(Se!==null&&ke!==0){const pn=Ee.get(Se.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,pn.__webglTexture,ke)}k=-1},this.readRenderTargetPixels=function(Se,Ke,ke,He,$e,dt,wt){if(!(Se&&Se.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let en=Ee.get(Se).__webglFramebuffer;if(Se.isWebGLCubeRenderTarget&&wt!==void 0&&(en=en[wt]),en){te.bindFramebuffer(K.FRAMEBUFFER,en);try{const pn=Se.texture,An=pn.format,$n=pn.type;if(!Re.textureFormatReadable(An)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Re.textureTypeReadable($n)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ke>=0&&Ke<=Se.width-He&&ke>=0&&ke<=Se.height-$e&&K.readPixels(Ke,ke,He,$e,Ve.convert(An),Ve.convert($n),dt)}finally{const pn=I!==null?Ee.get(I).__webglFramebuffer:null;te.bindFramebuffer(K.FRAMEBUFFER,pn)}}},this.readRenderTargetPixelsAsync=async function(Se,Ke,ke,He,$e,dt,wt){if(!(Se&&Se.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let en=Ee.get(Se).__webglFramebuffer;if(Se.isWebGLCubeRenderTarget&&wt!==void 0&&(en=en[wt]),en){const pn=Se.texture,An=pn.format,$n=pn.type;if(!Re.textureFormatReadable(An))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Re.textureTypeReadable($n))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Ke>=0&&Ke<=Se.width-He&&ke>=0&&ke<=Se.height-$e){te.bindFramebuffer(K.FRAMEBUFFER,en);const kn=K.createBuffer();K.bindBuffer(K.PIXEL_PACK_BUFFER,kn),K.bufferData(K.PIXEL_PACK_BUFFER,dt.byteLength,K.STREAM_READ),K.readPixels(Ke,ke,He,$e,Ve.convert(An),Ve.convert($n),0);const Zn=I!==null?Ee.get(I).__webglFramebuffer:null;te.bindFramebuffer(K.FRAMEBUFFER,Zn);const ur=K.fenceSync(K.SYNC_GPU_COMMANDS_COMPLETE,0);return K.flush(),await RW(K,ur,4),K.bindBuffer(K.PIXEL_PACK_BUFFER,kn),K.getBufferSubData(K.PIXEL_PACK_BUFFER,0,dt),K.deleteBuffer(kn),K.deleteSync(ur),dt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(Se,Ke=null,ke=0){Se.isTexture!==!0&&(gf("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Ke=arguments[0]||null,Se=arguments[1]);const He=Math.pow(2,-ke),$e=Math.floor(Se.image.width*He),dt=Math.floor(Se.image.height*He),wt=Ke!==null?Ke.x:0,en=Ke!==null?Ke.y:0;J.setTexture2D(Se,0),K.copyTexSubImage2D(K.TEXTURE_2D,ke,0,0,wt,en,$e,dt),te.unbindTexture()};const oi=K.createFramebuffer(),Bs=K.createFramebuffer();this.copyTextureToTexture=function(Se,Ke,ke=null,He=null,$e=0,dt=null){Se.isTexture!==!0&&(gf("WebGLRenderer: copyTextureToTexture function signature has changed."),He=arguments[0]||null,Se=arguments[1],Ke=arguments[2],dt=arguments[3]||0,ke=null),dt===null&&($e!==0?(gf("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),dt=$e,$e=0):dt=0);let wt,en,pn,An,$n,kn,Zn,ur,zr;const $r=Se.isCompressedTexture?Se.mipmaps[dt]:Se.image;if(ke!==null)wt=ke.max.x-ke.min.x,en=ke.max.y-ke.min.y,pn=ke.isBox3?ke.max.z-ke.min.z:1,An=ke.min.x,$n=ke.min.y,kn=ke.isBox3?ke.min.z:0;else{const Li=Math.pow(2,-$e);wt=Math.floor($r.width*Li),en=Math.floor($r.height*Li),Se.isDataArrayTexture?pn=$r.depth:Se.isData3DTexture?pn=Math.floor($r.depth*Li):pn=1,An=0,$n=0,kn=0}He!==null?(Zn=He.x,ur=He.y,zr=He.z):(Zn=0,ur=0,zr=0);const dr=Ve.convert(Ke.format),Sn=Ve.convert(Ke.type);let Ms;Ke.isData3DTexture?(J.setTexture3D(Ke,0),Ms=K.TEXTURE_3D):Ke.isDataArrayTexture||Ke.isCompressedArrayTexture?(J.setTexture2DArray(Ke,0),Ms=K.TEXTURE_2D_ARRAY):(J.setTexture2D(Ke,0),Ms=K.TEXTURE_2D),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,Ke.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ke.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,Ke.unpackAlignment);const xr=K.getParameter(K.UNPACK_ROW_LENGTH),ts=K.getParameter(K.UNPACK_IMAGE_HEIGHT),Fc=K.getParameter(K.UNPACK_SKIP_PIXELS),Pi=K.getParameter(K.UNPACK_SKIP_ROWS),Bc=K.getParameter(K.UNPACK_SKIP_IMAGES);K.pixelStorei(K.UNPACK_ROW_LENGTH,$r.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,$r.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,An),K.pixelStorei(K.UNPACK_SKIP_ROWS,$n),K.pixelStorei(K.UNPACK_SKIP_IMAGES,kn);const Kr=Se.isDataArrayTexture||Se.isData3DTexture,Ri=Ke.isDataArrayTexture||Ke.isData3DTexture;if(Se.isDepthTexture){const Li=Ee.get(Se),Us=Ee.get(Ke),zs=Ee.get(Li.__renderTarget),Qu=Ee.get(Us.__renderTarget);te.bindFramebuffer(K.READ_FRAMEBUFFER,zs.__webglFramebuffer),te.bindFramebuffer(K.DRAW_FRAMEBUFFER,Qu.__webglFramebuffer);for(let b=0;b<pn;b++)Kr&&(K.framebufferTextureLayer(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,Ee.get(Se).__webglTexture,$e,kn+b),K.framebufferTextureLayer(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,Ee.get(Ke).__webglTexture,dt,zr+b)),K.blitFramebuffer(An,$n,wt,en,Zn,ur,wt,en,K.DEPTH_BUFFER_BIT,K.NEAREST);te.bindFramebuffer(K.READ_FRAMEBUFFER,null),te.bindFramebuffer(K.DRAW_FRAMEBUFFER,null)}else if($e!==0||Se.isRenderTargetTexture||Ee.has(Se)){const Li=Ee.get(Se),Us=Ee.get(Ke);te.bindFramebuffer(K.READ_FRAMEBUFFER,oi),te.bindFramebuffer(K.DRAW_FRAMEBUFFER,Bs);for(let zs=0;zs<pn;zs++)Kr?K.framebufferTextureLayer(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,Li.__webglTexture,$e,kn+zs):K.framebufferTexture2D(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,Li.__webglTexture,$e),Ri?K.framebufferTextureLayer(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,Us.__webglTexture,dt,zr+zs):K.framebufferTexture2D(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,Us.__webglTexture,dt),$e!==0?K.blitFramebuffer(An,$n,wt,en,Zn,ur,wt,en,K.COLOR_BUFFER_BIT,K.NEAREST):Ri?K.copyTexSubImage3D(Ms,dt,Zn,ur,zr+zs,An,$n,wt,en):K.copyTexSubImage2D(Ms,dt,Zn,ur,An,$n,wt,en);te.bindFramebuffer(K.READ_FRAMEBUFFER,null),te.bindFramebuffer(K.DRAW_FRAMEBUFFER,null)}else Ri?Se.isDataTexture||Se.isData3DTexture?K.texSubImage3D(Ms,dt,Zn,ur,zr,wt,en,pn,dr,Sn,$r.data):Ke.isCompressedArrayTexture?K.compressedTexSubImage3D(Ms,dt,Zn,ur,zr,wt,en,pn,dr,$r.data):K.texSubImage3D(Ms,dt,Zn,ur,zr,wt,en,pn,dr,Sn,$r):Se.isDataTexture?K.texSubImage2D(K.TEXTURE_2D,dt,Zn,ur,wt,en,dr,Sn,$r.data):Se.isCompressedTexture?K.compressedTexSubImage2D(K.TEXTURE_2D,dt,Zn,ur,$r.width,$r.height,dr,$r.data):K.texSubImage2D(K.TEXTURE_2D,dt,Zn,ur,wt,en,dr,Sn,$r);K.pixelStorei(K.UNPACK_ROW_LENGTH,xr),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,ts),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Fc),K.pixelStorei(K.UNPACK_SKIP_ROWS,Pi),K.pixelStorei(K.UNPACK_SKIP_IMAGES,Bc),dt===0&&Ke.generateMipmaps&&K.generateMipmap(Ms),te.unbindTexture()},this.copyTextureToTexture3D=function(Se,Ke,ke=null,He=null,$e=0){return Se.isTexture!==!0&&(gf("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ke=arguments[0]||null,He=arguments[1]||null,Se=arguments[2],Ke=arguments[3],$e=arguments[4]||0),gf('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Se,Ke,ke,He,$e)},this.initRenderTarget=function(Se){Ee.get(Se).__webglFramebuffer===void 0&&J.setupRenderTarget(Se)},this.initTexture=function(Se){Se.isCubeTexture?J.setTextureCube(Se,0):Se.isData3DTexture?J.setTexture3D(Se,0):Se.isDataArrayTexture||Se.isCompressedArrayTexture?J.setTexture2DArray(Se,0):J.setTexture2D(Se,0),te.unbindTexture()},this.resetState=function(){C=0,T=0,I=null,te.reset(),mt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return oc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorspace=Sr._getDrawingBufferColorSpace(e),n.unpackColorSpace=Sr._getUnpackColorSpace()}}function NZ(t,e=!1){const n=t[0].index!==null,r=new Set(Object.keys(t[0].attributes)),s=new Set(Object.keys(t[0].morphAttributes)),i={},o={},a=t[0].morphTargetsRelative,l=new mr;let c=0;for(let u=0;u<t.length;++u){const d=t[u];let h=0;if(n!==(d.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const f in d.attributes){if(!r.has(f))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;i[f]===void 0&&(i[f]=[]),i[f].push(d.attributes[f]),h++}if(h!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". Make sure all geometries have the same number of attributes."),null;if(a!==d.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const f in d.morphAttributes){if(!s.has(f))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+".  .morphAttributes must be consistent throughout all geometries."),null;o[f]===void 0&&(o[f]=[]),o[f].push(d.morphAttributes[f])}if(e){let f;if(n)f=d.index.count;else if(d.attributes.position!==void 0)f=d.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,f,u),c+=f}}if(n){let u=0;const d=[];for(let h=0;h<t.length;++h){const f=t[h].index;for(let m=0;m<f.count;++m)d.push(f.getX(m)+u);u+=t[h].attributes.position.count}l.setIndex(d)}for(const u in i){const d=ok(i[u]);if(!d)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+u+" attribute."),null;l.setAttribute(u,d)}for(const u in o){const d=o[u][0].length;if(d===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[u]=[];for(let h=0;h<d;++h){const f=[];for(let v=0;v<o[u].length;++v)f.push(o[u][v][h]);const m=ok(f);if(!m)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+u+" morphAttribute."),null;l.morphAttributes[u].push(m)}}return l}function ok(t){let e,n,r,s=-1,i=0;for(let c=0;c<t.length;++c){const u=t[c];if(e===void 0&&(e=u.array.constructor),e!==u.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(n===void 0&&(n=u.itemSize),n!==u.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=u.normalized),r!==u.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(s===-1&&(s=u.gpuType),s!==u.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;i+=u.count*n}const o=new e(i),a=new Ar(o,n,r);let l=0;for(let c=0;c<t.length;++c){const u=t[c];if(u.isInterleavedBufferAttribute){const d=l/n;for(let h=0,f=u.count;h<f;h++)for(let m=0;m<n;m++){const v=u.getComponent(h,m);a.setComponent(h+d,m,v)}}else o.set(u.array,l);l+=u.count*n}return s!==void 0&&(a.gpuType=s),a}const ak={type:"change"},CC={type:"start"},T6={type:"end"},V0=new pv,lk=new pu,DZ=Math.cos(70*WS.DEG2RAD),$s=new Ze,no=2*Math.PI,Hr={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Fw=1e-6;class FZ extends Zj{constructor(e,n=null){super(e,n),this.state=Hr.NONE,this.enabled=!0,this.target=new Ze,this.cursor=new Ze,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:uc.ROTATE,MIDDLE:uc.DOLLY,RIGHT:uc.PAN},this.touches={ONE:Mf.ROTATE,TWO:Mf.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Ze,this._lastQuaternion=new Lu,this._lastTargetPosition=new Ze,this._quat=new Lu().setFromUnitVectors(e.up,new Ze(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new L3,this._sphericalDelta=new L3,this._scale=1,this._panOffset=new Ze,this._rotateStart=new Dt,this._rotateEnd=new Dt,this._rotateDelta=new Dt,this._panStart=new Dt,this._panEnd=new Dt,this._panDelta=new Dt,this._dollyStart=new Dt,this._dollyEnd=new Dt,this._dollyDelta=new Dt,this._dollyDirection=new Ze,this._mouse=new Dt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=UZ.bind(this),this._onPointerDown=BZ.bind(this),this._onPointerUp=zZ.bind(this),this._onContextMenu=KZ.bind(this),this._onMouseWheel=HZ.bind(this),this._onKeyDown=GZ.bind(this),this._onTouchStart=WZ.bind(this),this._onTouchMove=jZ.bind(this),this._onMouseDown=$Z.bind(this),this._onMouseMove=VZ.bind(this),this._interceptControlDown=qZ.bind(this),this._interceptControlUp=YZ.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(ak),this.update(),this.state=Hr.NONE}update(e=null){const n=this.object.position;$s.copy(n).sub(this.target),$s.applyQuaternion(this._quat),this._spherical.setFromVector3($s),this.autoRotate&&this.state===Hr.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let r=this.minAzimuthAngle,s=this.maxAzimuthAngle;isFinite(r)&&isFinite(s)&&(r<-Math.PI?r+=no:r>Math.PI&&(r-=no),s<-Math.PI?s+=no:s>Math.PI&&(s-=no),r<=s?this._spherical.theta=Math.max(r,Math.min(s,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(r+s)/2?Math.max(r,this._spherical.theta):Math.min(s,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let i=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),i=o!=this._spherical.radius}if($s.setFromSpherical(this._spherical),$s.applyQuaternion(this._quatInverse),n.copy(this.target).add($s),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const a=$s.length();o=this._clampDistance(a*this._scale);const l=a-o;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),i=!!l}else if(this.object.isOrthographicCamera){const a=new Ze(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),i=l!==this.object.zoom;const c=new Ze(this._mouse.x,this._mouse.y,0);c.unproject(this.object),this.object.position.sub(c).add(a),this.object.updateMatrixWorld(),o=$s.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;o!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(V0.origin.copy(this.object.position),V0.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(V0.direction))<DZ?this.object.lookAt(this.target):(lk.setFromNormalAndCoplanarPoint(this.object.up,this.target),V0.intersectPlane(lk,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&&(this.object.updateProjectionMatrix(),i=!0)}return this._scale=1,this._performCursorZoom=!1,i||this._lastPosition.distanceToSquared(this.object.position)>Fw||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Fw||this._lastTargetPosition.distanceToSquared(this.target)>Fw?(this.dispatchEvent(ak),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?no/60*this.autoRotateSpeed*e:no/60/60*this.autoRotateSpeed}_getZoomScale(e){const n=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*n)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,n){$s.setFromMatrixColumn(n,0),$s.multiplyScalar(-e),this._panOffset.add($s)}_panUp(e,n){this.screenSpacePanning===!0?$s.setFromMatrixColumn(n,1):($s.setFromMatrixColumn(n,0),$s.crossVectors(this.object.up,$s)),$s.multiplyScalar(e),this._panOffset.add($s)}_pan(e,n){const r=this.domElement;if(this.object.isPerspectiveCamera){const s=this.object.position;$s.copy(s).sub(this.target);let i=$s.length();i*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*i/r.clientHeight,this.object.matrix),this._panUp(2*n*i/r.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this._panUp(n*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,n){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const r=this.domElement.getBoundingClientRect(),s=e-r.left,i=n-r.top,o=r.width,a=r.height;this._mouse.x=s/o*2-1,this._mouse.y=-(i/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const n=this.domElement;this._rotateLeft(no*this._rotateDelta.x/n.clientHeight),this._rotateUp(no*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let n=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(no*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),n=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-no*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),n=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(no*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),n=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-no*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),n=!0;break}n&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),s=.5*(e.pageY+n.y);this._rotateStart.set(r,s)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),s=.5*(e.pageY+n.y);this._panStart.set(r,s)}}_handleTouchStartDolly(e){const n=this._getSecondPointerPosition(e),r=e.pageX-n.x,s=e.pageY-n.y,i=Math.sqrt(r*r+s*s);this._dollyStart.set(0,i)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),s=.5*(e.pageX+r.x),i=.5*(e.pageY+r.y);this._rotateEnd.set(s,i)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const n=this.domElement;this._rotateLeft(no*this._rotateDelta.x/n.clientHeight),this._rotateUp(no*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),s=.5*(e.pageY+n.y);this._panEnd.set(r,s)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const n=this._getSecondPointerPosition(e),r=e.pageX-n.x,s=e.pageY-n.y,i=Math.sqrt(r*r+s*s);this._dollyEnd.set(0,i),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const o=(e.pageX+n.x)*.5,a=(e.pageY+n.y)*.5;this._updateZoomParameters(o,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId){this._pointers.splice(n,1);return}}_isTrackingPointer(e){for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId)return!0;return!1}_trackPointer(e){let n=this._pointerPositions[e.pointerId];n===void 0&&(n=new Dt,this._pointerPositions[e.pointerId]=n),n.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const n=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[n]}_customWheelEvent(e){const n=e.deltaMode,r={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(n){case 1:r.deltaY*=16;break;case 2:r.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(r.deltaY*=10),r}}function BZ(t){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(t)&&(this._addPointer(t),t.pointerType==="touch"?this._onTouchStart(t):this._onMouseDown(t)))}function UZ(t){this.enabled!==!1&&(t.pointerType==="touch"?this._onTouchMove(t):this._onMouseMove(t))}function zZ(t){switch(this._removePointer(t),this._pointers.length){case 0:this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(T6),this.state=Hr.NONE;break;case 1:const e=this._pointers[0],n=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:n.x,pageY:n.y});break}}function $Z(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case uc.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(t),this.state=Hr.DOLLY;break;case uc.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=Hr.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=Hr.ROTATE}break;case uc.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=Hr.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=Hr.PAN}break;default:this.state=Hr.NONE}this.state!==Hr.NONE&&this.dispatchEvent(CC)}function VZ(t){switch(this.state){case Hr.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(t);break;case Hr.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(t);break;case Hr.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(t);break}}function HZ(t){this.enabled===!1||this.enableZoom===!1||this.state!==Hr.NONE||(t.preventDefault(),this.dispatchEvent(CC),this._handleMouseWheel(this._customWheelEvent(t)),this.dispatchEvent(T6))}function GZ(t){this.enabled!==!1&&this._handleKeyDown(t)}function WZ(t){switch(this._trackPointer(t),this._pointers.length){case 1:switch(this.touches.ONE){case Mf.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(t),this.state=Hr.TOUCH_ROTATE;break;case Mf.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(t),this.state=Hr.TOUCH_PAN;break;default:this.state=Hr.NONE}break;case 2:switch(this.touches.TWO){case Mf.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(t),this.state=Hr.TOUCH_DOLLY_PAN;break;case Mf.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(t),this.state=Hr.TOUCH_DOLLY_ROTATE;break;default:this.state=Hr.NONE}break;default:this.state=Hr.NONE}this.state!==Hr.NONE&&this.dispatchEvent(CC)}function jZ(t){switch(this._trackPointer(t),this.state){case Hr.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(t),this.update();break;case Hr.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(t),this.update();break;case Hr.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(t),this.update();break;case Hr.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(t),this.update();break;default:this.state=Hr.NONE}}function KZ(t){this.enabled!==!1&&t.preventDefault()}function qZ(t){t.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function YZ(t){t.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var M6=typeof global=="object"&&global&&global.Object===Object&&global,XZ=typeof self=="object"&&self&&self.Object===Object&&self,Ga=M6||XZ||Function("return this")(),na=Ga.Symbol,A6=Object.prototype,ZZ=A6.hasOwnProperty,JZ=A6.toString,hm=na?na.toStringTag:void 0;function QZ(t){var e=ZZ.call(t,hm),n=t[hm];try{t[hm]=void 0;var r=!0}catch{}var s=JZ.call(t);return r&&(e?t[hm]=n:delete t[hm]),s}var eJ=Object.prototype,tJ=eJ.toString;function nJ(t){return tJ.call(t)}var rJ="[object Null]",sJ="[object Undefined]",ck=na?na.toStringTag:void 0;function fh(t){return t==null?t===void 0?sJ:rJ:ck&&ck in Object(t)?QZ(t):nJ(t)}function xl(t){return t!=null&&typeof t=="object"}var iJ="[object Symbol]";function L1(t){return typeof t=="symbol"||xl(t)&&fh(t)==iJ}function TC(t,e){for(var n=-1,r=t==null?0:t.length,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}var qi=Array.isArray,uk=na?na.prototype:void 0,dk=uk?uk.toString:void 0;function k6(t){if(typeof t=="string")return t;if(qi(t))return TC(t,k6)+"";if(L1(t))return dk?dk.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var oJ=/\s/;function aJ(t){for(var e=t.length;e--&&oJ.test(t.charAt(e)););return e}var lJ=/^\s+/;function cJ(t){return t&&t.slice(0,aJ(t)+1).replace(lJ,"")}function Yi(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var hk=NaN,uJ=/^[-+]0x[0-9a-f]+$/i,dJ=/^0b[01]+$/i,hJ=/^0o[0-7]+$/i,fJ=parseInt;function JS(t){if(typeof t=="number")return t;if(L1(t))return hk;if(Yi(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Yi(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=cJ(t);var n=dJ.test(t);return n||hJ.test(t)?fJ(t.slice(2),n?2:8):uJ.test(t)?hk:+t}var fk=1/0,pJ=17976931348623157e292;function mJ(t){if(!t)return t===0?t:0;if(t=JS(t),t===fk||t===-fk){var e=t<0?-1:1;return e*pJ}return t===t?t:0}function gJ(t){var e=mJ(t),n=e%1;return e===e?n?e-n:e:0}function MC(t){return t}var vJ="[object AsyncFunction]",yJ="[object Function]",bJ="[object GeneratorFunction]",_J="[object Proxy]";function AC(t){if(!Yi(t))return!1;var e=fh(t);return e==yJ||e==bJ||e==vJ||e==_J}var Bw=Ga["__core-js_shared__"],pk=function(){var t=/[^.]+$/.exec(Bw&&Bw.keys&&Bw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function wJ(t){return!!pk&&pk in t}var xJ=Function.prototype,SJ=xJ.toString;function ph(t){if(t!=null){try{return SJ.call(t)}catch{}try{return t+""}catch{}}return""}var EJ=/[\\^$.*+?()[\]{}|]/g,CJ=/^\[object .+?Constructor\]$/,TJ=Function.prototype,MJ=Object.prototype,AJ=TJ.toString,kJ=MJ.hasOwnProperty,IJ=RegExp("^"+AJ.call(kJ).replace(EJ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function PJ(t){if(!Yi(t)||wJ(t))return!1;var e=AC(t)?IJ:CJ;return e.test(ph(t))}function RJ(t,e){return t==null?void 0:t[e]}function mh(t,e){var n=RJ(t,e);return PJ(n)?n:void 0}var QS=mh(Ga,"WeakMap"),mk=Object.create,LJ=function(){function t(){}return function(e){if(!Yi(e))return{};if(mk)return mk(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function OJ(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function NJ(){}function I6(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var DJ=800,FJ=16,BJ=Date.now;function UJ(t){var e=0,n=0;return function(){var r=BJ(),s=FJ-(r-n);if(n=r,s>0){if(++e>=DJ)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function zJ(t){return function(){return t}}var Tb=function(){try{var t=mh(Object,"defineProperty");return t({},"",{}),t}catch{}}(),$J=Tb?function(t,e){return Tb(t,"toString",{configurable:!0,enumerable:!1,value:zJ(e),writable:!0})}:MC,P6=UJ($J);function VJ(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function kC(t,e,n,r){for(var s=t.length,i=n+(r?1:-1);r?i--:++i<s;)if(e(t[i],i,t))return i;return-1}function HJ(t){return t!==t}function GJ(t,e,n){for(var r=n-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}function WJ(t,e,n){return e===e?GJ(t,e,n):kC(t,HJ,n)}function jJ(t,e){var n=t==null?0:t.length;return!!n&&WJ(t,e,0)>-1}var KJ=9007199254740991,qJ=/^(?:0|[1-9]\d*)$/;function O1(t,e){var n=typeof t;return e=e??KJ,!!e&&(n=="number"||n!="symbol"&&qJ.test(t))&&t>-1&&t%1==0&&t<e}function IC(t,e,n){e=="__proto__"&&Tb?Tb(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Up(t,e){return t===e||t!==t&&e!==e}var YJ=Object.prototype,XJ=YJ.hasOwnProperty;function PC(t,e,n){var r=t[e];(!(XJ.call(t,e)&&Up(r,n))||n===void 0&&!(e in t))&&IC(t,e,n)}function zp(t,e,n,r){var s=!n;n||(n={});for(var i=-1,o=e.length;++i<o;){var a=e[i],l=void 0;l===void 0&&(l=t[a]),s?IC(n,a,l):PC(n,a,l)}return n}var gk=Math.max;function R6(t,e,n){return e=gk(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,i=gk(r.length-e,0),o=Array(i);++s<i;)o[s]=r[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=r[s];return a[e]=n(o),OJ(t,this,a)}}function RC(t,e){return P6(R6(t,e,MC),t+"")}var ZJ=9007199254740991;function LC(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ZJ}function gh(t){return t!=null&&LC(t.length)&&!AC(t)}function L6(t,e,n){if(!Yi(n))return!1;var r=typeof e;return(r=="number"?gh(n)&&O1(e,n.length):r=="string"&&e in n)?Up(n[e],t):!1}function JJ(t){return RC(function(e,n){var r=-1,s=n.length,i=s>1?n[s-1]:void 0,o=s>2?n[2]:void 0;for(i=t.length>3&&typeof i=="function"?(s--,i):void 0,o&&L6(n[0],n[1],o)&&(i=s<3?void 0:i,s=1),e=Object(e);++r<s;){var a=n[r];a&&t(e,a,r,i)}return e})}var QJ=Object.prototype;function OC(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||QJ;return t===n}function eQ(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var tQ="[object Arguments]";function vk(t){return xl(t)&&fh(t)==tQ}var O6=Object.prototype,nQ=O6.hasOwnProperty,rQ=O6.propertyIsEnumerable,xg=vk(function(){return arguments}())?vk:function(t){return xl(t)&&nQ.call(t,"callee")&&!rQ.call(t,"callee")};function sQ(){return!1}var N6=typeof exports=="object"&&exports&&!exports.nodeType&&exports,yk=N6&&typeof module=="object"&&module&&!module.nodeType&&module,iQ=yk&&yk.exports===N6,bk=iQ?Ga.Buffer:void 0,oQ=bk?bk.isBuffer:void 0,Sg=oQ||sQ,aQ="[object Arguments]",lQ="[object Array]",cQ="[object Boolean]",uQ="[object Date]",dQ="[object Error]",hQ="[object Function]",fQ="[object Map]",pQ="[object Number]",mQ="[object Object]",gQ="[object RegExp]",vQ="[object Set]",yQ="[object String]",bQ="[object WeakMap]",_Q="[object ArrayBuffer]",wQ="[object DataView]",xQ="[object Float32Array]",SQ="[object Float64Array]",EQ="[object Int8Array]",CQ="[object Int16Array]",TQ="[object Int32Array]",MQ="[object Uint8Array]",AQ="[object Uint8ClampedArray]",kQ="[object Uint16Array]",IQ="[object Uint32Array]",rs={};rs[xQ]=rs[SQ]=rs[EQ]=rs[CQ]=rs[TQ]=rs[MQ]=rs[AQ]=rs[kQ]=rs[IQ]=!0;rs[aQ]=rs[lQ]=rs[_Q]=rs[cQ]=rs[wQ]=rs[uQ]=rs[dQ]=rs[hQ]=rs[fQ]=rs[pQ]=rs[mQ]=rs[gQ]=rs[vQ]=rs[yQ]=rs[bQ]=!1;function PQ(t){return xl(t)&&LC(t.length)&&!!rs[fh(t)]}function NC(t){return function(e){return t(e)}}var D6=typeof exports=="object"&&exports&&!exports.nodeType&&exports,jm=D6&&typeof module=="object"&&module&&!module.nodeType&&module,RQ=jm&&jm.exports===D6,Uw=RQ&&M6.process,op=function(){try{var t=jm&&jm.require&&jm.require("util").types;return t||Uw&&Uw.binding&&Uw.binding("util")}catch{}}(),_k=op&&op.isTypedArray,DC=_k?NC(_k):PQ,LQ=Object.prototype,OQ=LQ.hasOwnProperty;function F6(t,e){var n=qi(t),r=!n&&xg(t),s=!n&&!r&&Sg(t),i=!n&&!r&&!s&&DC(t),o=n||r||s||i,a=o?eQ(t.length,String):[],l=a.length;for(var c in t)(e||OQ.call(t,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||O1(c,l)))&&a.push(c);return a}function B6(t,e){return function(n){return t(e(n))}}var NQ=B6(Object.keys,Object),DQ=Object.prototype,FQ=DQ.hasOwnProperty;function BQ(t){if(!OC(t))return NQ(t);var e=[];for(var n in Object(t))FQ.call(t,n)&&n!="constructor"&&e.push(n);return e}function $p(t){return gh(t)?F6(t):BQ(t)}function UQ(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var zQ=Object.prototype,$Q=zQ.hasOwnProperty;function VQ(t){if(!Yi(t))return UQ(t);var e=OC(t),n=[];for(var r in t)r=="constructor"&&(e||!$Q.call(t,r))||n.push(r);return n}function Vp(t){return gh(t)?F6(t,!0):VQ(t)}var HQ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,GQ=/^\w*$/;function FC(t,e){if(qi(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||L1(t)?!0:GQ.test(t)||!HQ.test(t)||e!=null&&t in Object(e)}var Eg=mh(Object,"create");function WQ(){this.__data__=Eg?Eg(null):{},this.size=0}function jQ(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var KQ="__lodash_hash_undefined__",qQ=Object.prototype,YQ=qQ.hasOwnProperty;function XQ(t){var e=this.__data__;if(Eg){var n=e[t];return n===KQ?void 0:n}return YQ.call(e,t)?e[t]:void 0}var ZQ=Object.prototype,JQ=ZQ.hasOwnProperty;function QQ(t){var e=this.__data__;return Eg?e[t]!==void 0:JQ.call(e,t)}var eee="__lodash_hash_undefined__";function tee(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Eg&&e===void 0?eee:e,this}function Qd(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Qd.prototype.clear=WQ;Qd.prototype.delete=jQ;Qd.prototype.get=XQ;Qd.prototype.has=QQ;Qd.prototype.set=tee;function nee(){this.__data__=[],this.size=0}function N1(t,e){for(var n=t.length;n--;)if(Up(t[n][0],e))return n;return-1}var ree=Array.prototype,see=ree.splice;function iee(t){var e=this.__data__,n=N1(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():see.call(e,n,1),--this.size,!0}function oee(t){var e=this.__data__,n=N1(e,t);return n<0?void 0:e[n][1]}function aee(t){return N1(this.__data__,t)>-1}function lee(t,e){var n=this.__data__,r=N1(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Ac(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ac.prototype.clear=nee;Ac.prototype.delete=iee;Ac.prototype.get=oee;Ac.prototype.has=aee;Ac.prototype.set=lee;var Cg=mh(Ga,"Map");function cee(){this.size=0,this.__data__={hash:new Qd,map:new(Cg||Ac),string:new Qd}}function uee(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function D1(t,e){var n=t.__data__;return uee(e)?n[typeof e=="string"?"string":"hash"]:n.map}function dee(t){var e=D1(this,t).delete(t);return this.size-=e?1:0,e}function hee(t){return D1(this,t).get(t)}function fee(t){return D1(this,t).has(t)}function pee(t,e){var n=D1(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function kc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}kc.prototype.clear=cee;kc.prototype.delete=dee;kc.prototype.get=hee;kc.prototype.has=fee;kc.prototype.set=pee;var mee="Expected a function";function F1(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(mee);var n=function(){var r=arguments,s=e?e.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var o=t.apply(this,r);return n.cache=i.set(s,o)||i,o};return n.cache=new(F1.Cache||kc),n}F1.Cache=kc;var gee=500;function vee(t){var e=F1(t,function(r){return n.size===gee&&n.clear(),r}),n=e.cache;return e}var yee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bee=/\\(\\)?/g,_ee=vee(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(yee,function(n,r,s,i){e.push(s?i.replace(bee,"$1"):r||n)}),e});function wee(t){return t==null?"":k6(t)}function Hp(t,e){return qi(t)?t:FC(t,e)?[t]:_ee(wee(t))}function Gp(t){if(typeof t=="string"||L1(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function B1(t,e){e=Hp(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[Gp(e[n++])];return n&&n==r?t:void 0}function cs(t,e,n){var r=t==null?void 0:B1(t,e);return r===void 0?n:r}function BC(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var wk=na?na.isConcatSpreadable:void 0;function xee(t){return qi(t)||xg(t)||!!(wk&&t&&t[wk])}function vv(t,e,n,r,s){var i=-1,o=t.length;for(n||(n=xee),s||(s=[]);++i<o;){var a=t[i];e>0&&n(a)?e>1?vv(a,e-1,n,r,s):BC(s,a):r||(s[s.length]=a)}return s}function U6(t){var e=t==null?0:t.length;return e?vv(t,1):[]}function z6(t){return P6(R6(t,void 0,U6),t+"")}var UC=B6(Object.getPrototypeOf,Object),See="[object Object]",Eee=Function.prototype,Cee=Object.prototype,$6=Eee.toString,Tee=Cee.hasOwnProperty,Mee=$6.call(Object);function V6(t){if(!xl(t)||fh(t)!=See)return!1;var e=UC(t);if(e===null)return!0;var n=Tee.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&$6.call(n)==Mee}function Aee(t,e,n){var r=-1,s=t.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(s);++r<s;)i[r]=t[r+e];return i}function Hs(){if(!arguments.length)return[];var t=arguments[0];return qi(t)?t:[t]}function kee(){this.__data__=new Ac,this.size=0}function Iee(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Pee(t){return this.__data__.get(t)}function Ree(t){return this.__data__.has(t)}var Lee=200;function Oee(t,e){var n=this.__data__;if(n instanceof Ac){var r=n.__data__;if(!Cg||r.length<Lee-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new kc(r)}return n.set(t,e),this.size=n.size,this}function Ra(t){var e=this.__data__=new Ac(t);this.size=e.size}Ra.prototype.clear=kee;Ra.prototype.delete=Iee;Ra.prototype.get=Pee;Ra.prototype.has=Ree;Ra.prototype.set=Oee;function Nee(t,e){return t&&zp(e,$p(e),t)}function Dee(t,e){return t&&zp(e,Vp(e),t)}var H6=typeof exports=="object"&&exports&&!exports.nodeType&&exports,xk=H6&&typeof module=="object"&&module&&!module.nodeType&&module,Fee=xk&&xk.exports===H6,Sk=Fee?Ga.Buffer:void 0,Ek=Sk?Sk.allocUnsafe:void 0;function G6(t,e){if(e)return t.slice();var n=t.length,r=Ek?Ek(n):new t.constructor(n);return t.copy(r),r}function Bee(t,e){for(var n=-1,r=t==null?0:t.length,s=0,i=[];++n<r;){var o=t[n];e(o,n,t)&&(i[s++]=o)}return i}function W6(){return[]}var Uee=Object.prototype,zee=Uee.propertyIsEnumerable,Ck=Object.getOwnPropertySymbols,zC=Ck?function(t){return t==null?[]:(t=Object(t),Bee(Ck(t),function(e){return zee.call(t,e)}))}:W6;function $ee(t,e){return zp(t,zC(t),e)}var Vee=Object.getOwnPropertySymbols,j6=Vee?function(t){for(var e=[];t;)BC(e,zC(t)),t=UC(t);return e}:W6;function Hee(t,e){return zp(t,j6(t),e)}function K6(t,e,n){var r=e(t);return qi(t)?r:BC(r,n(t))}function e2(t){return K6(t,$p,zC)}function q6(t){return K6(t,Vp,j6)}var t2=mh(Ga,"DataView"),n2=mh(Ga,"Promise"),Df=mh(Ga,"Set"),Tk="[object Map]",Gee="[object Object]",Mk="[object Promise]",Ak="[object Set]",kk="[object WeakMap]",Ik="[object DataView]",Wee=ph(t2),jee=ph(Cg),Kee=ph(n2),qee=ph(Df),Yee=ph(QS),Sa=fh;(t2&&Sa(new t2(new ArrayBuffer(1)))!=Ik||Cg&&Sa(new Cg)!=Tk||n2&&Sa(n2.resolve())!=Mk||Df&&Sa(new Df)!=Ak||QS&&Sa(new QS)!=kk)&&(Sa=function(t){var e=fh(t),n=e==Gee?t.constructor:void 0,r=n?ph(n):"";if(r)switch(r){case Wee:return Ik;case jee:return Tk;case Kee:return Mk;case qee:return Ak;case Yee:return kk}return e});var Xee=Object.prototype,Zee=Xee.hasOwnProperty;function Jee(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Zee.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Mb=Ga.Uint8Array;function $C(t){var e=new t.constructor(t.byteLength);return new Mb(e).set(new Mb(t)),e}function Qee(t,e){var n=e?$C(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var ete=/\w*$/;function tte(t){var e=new t.constructor(t.source,ete.exec(t));return e.lastIndex=t.lastIndex,e}var Pk=na?na.prototype:void 0,Rk=Pk?Pk.valueOf:void 0;function nte(t){return Rk?Object(Rk.call(t)):{}}function Y6(t,e){var n=e?$C(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var rte="[object Boolean]",ste="[object Date]",ite="[object Map]",ote="[object Number]",ate="[object RegExp]",lte="[object Set]",cte="[object String]",ute="[object Symbol]",dte="[object ArrayBuffer]",hte="[object DataView]",fte="[object Float32Array]",pte="[object Float64Array]",mte="[object Int8Array]",gte="[object Int16Array]",vte="[object Int32Array]",yte="[object Uint8Array]",bte="[object Uint8ClampedArray]",_te="[object Uint16Array]",wte="[object Uint32Array]";function xte(t,e,n){var r=t.constructor;switch(e){case dte:return $C(t);case rte:case ste:return new r(+t);case hte:return Qee(t,n);case fte:case pte:case mte:case gte:case vte:case yte:case bte:case _te:case wte:return Y6(t,n);case ite:return new r;case ote:case cte:return new r(t);case ate:return tte(t);case lte:return new r;case ute:return nte(t)}}function X6(t){return typeof t.constructor=="function"&&!OC(t)?LJ(UC(t)):{}}var Ste="[object Map]";function Ete(t){return xl(t)&&Sa(t)==Ste}var Lk=op&&op.isMap,Cte=Lk?NC(Lk):Ete,Tte="[object Set]";function Mte(t){return xl(t)&&Sa(t)==Tte}var Ok=op&&op.isSet,Ate=Ok?NC(Ok):Mte,kte=1,Ite=2,Pte=4,Z6="[object Arguments]",Rte="[object Array]",Lte="[object Boolean]",Ote="[object Date]",Nte="[object Error]",J6="[object Function]",Dte="[object GeneratorFunction]",Fte="[object Map]",Bte="[object Number]",Q6="[object Object]",Ute="[object RegExp]",zte="[object Set]",$te="[object String]",Vte="[object Symbol]",Hte="[object WeakMap]",Gte="[object ArrayBuffer]",Wte="[object DataView]",jte="[object Float32Array]",Kte="[object Float64Array]",qte="[object Int8Array]",Yte="[object Int16Array]",Xte="[object Int32Array]",Zte="[object Uint8Array]",Jte="[object Uint8ClampedArray]",Qte="[object Uint16Array]",ene="[object Uint32Array]",Jr={};Jr[Z6]=Jr[Rte]=Jr[Gte]=Jr[Wte]=Jr[Lte]=Jr[Ote]=Jr[jte]=Jr[Kte]=Jr[qte]=Jr[Yte]=Jr[Xte]=Jr[Fte]=Jr[Bte]=Jr[Q6]=Jr[Ute]=Jr[zte]=Jr[$te]=Jr[Vte]=Jr[Zte]=Jr[Jte]=Jr[Qte]=Jr[ene]=!0;Jr[Nte]=Jr[J6]=Jr[Hte]=!1;function Ff(t,e,n,r,s,i){var o,a=e&kte,l=e&Ite,c=e&Pte;if(n&&(o=s?n(t,r,s,i):n(t)),o!==void 0)return o;if(!Yi(t))return t;var u=qi(t);if(u){if(o=Jee(t),!a)return I6(t,o)}else{var d=Sa(t),h=d==J6||d==Dte;if(Sg(t))return G6(t,a);if(d==Q6||d==Z6||h&&!s){if(o=l||h?{}:X6(t),!a)return l?Hee(t,Dee(o,t)):$ee(t,Nee(o,t))}else{if(!Jr[d])return s?t:{};o=xte(t,d,a)}}i||(i=new Ra);var f=i.get(t);if(f)return f;i.set(t,o),Ate(t)?t.forEach(function(y){o.add(Ff(y,e,n,y,t,i))}):Cte(t)&&t.forEach(function(y,g){o.set(g,Ff(y,e,n,g,t,i))});var m=c?l?q6:e2:l?Vp:$p,v=u?void 0:m(t);return VJ(v||t,function(y,g){v&&(g=y,y=t[g]),PC(o,g,Ff(y,e,n,g,t,i))}),o}var tne=4;function Nk(t){return Ff(t,tne)}var nne=1,rne=4;function Ab(t){return Ff(t,nne|rne)}var sne="__lodash_hash_undefined__";function ine(t){return this.__data__.set(t,sne),this}function one(t){return this.__data__.has(t)}function Tg(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new kc;++e<n;)this.add(t[e])}Tg.prototype.add=Tg.prototype.push=ine;Tg.prototype.has=one;function ane(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function e5(t,e){return t.has(e)}var lne=1,cne=2;function t5(t,e,n,r,s,i){var o=n&lne,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=i.get(t),u=i.get(e);if(c&&u)return c==e&&u==t;var d=-1,h=!0,f=n&cne?new Tg:void 0;for(i.set(t,e),i.set(e,t);++d<a;){var m=t[d],v=e[d];if(r)var y=o?r(v,m,d,e,t,i):r(m,v,d,t,e,i);if(y!==void 0){if(y)continue;h=!1;break}if(f){if(!ane(e,function(g,S){if(!e5(f,S)&&(m===g||s(m,g,n,r,i)))return f.push(S)})){h=!1;break}}else if(!(m===v||s(m,v,n,r,i))){h=!1;break}}return i.delete(t),i.delete(e),h}function une(t){var e=-1,n=Array(t.size);return t.forEach(function(r,s){n[++e]=[s,r]}),n}function VC(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var dne=1,hne=2,fne="[object Boolean]",pne="[object Date]",mne="[object Error]",gne="[object Map]",vne="[object Number]",yne="[object RegExp]",bne="[object Set]",_ne="[object String]",wne="[object Symbol]",xne="[object ArrayBuffer]",Sne="[object DataView]",Dk=na?na.prototype:void 0,zw=Dk?Dk.valueOf:void 0;function Ene(t,e,n,r,s,i,o){switch(n){case Sne:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case xne:return!(t.byteLength!=e.byteLength||!i(new Mb(t),new Mb(e)));case fne:case pne:case vne:return Up(+t,+e);case mne:return t.name==e.name&&t.message==e.message;case yne:case _ne:return t==e+"";case gne:var a=une;case bne:var l=r&dne;if(a||(a=VC),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=hne,o.set(t,e);var u=t5(a(t),a(e),r,s,i,o);return o.delete(t),u;case wne:if(zw)return zw.call(t)==zw.call(e)}return!1}var Cne=1,Tne=Object.prototype,Mne=Tne.hasOwnProperty;function Ane(t,e,n,r,s,i){var o=n&Cne,a=e2(t),l=a.length,c=e2(e),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var h=a[d];if(!(o?h in e:Mne.call(e,h)))return!1}var f=i.get(t),m=i.get(e);if(f&&m)return f==e&&m==t;var v=!0;i.set(t,e),i.set(e,t);for(var y=o;++d<l;){h=a[d];var g=t[h],S=e[h];if(r)var _=o?r(S,g,h,e,t,i):r(g,S,h,t,e,i);if(!(_===void 0?g===S||s(g,S,n,r,i):_)){v=!1;break}y||(y=h=="constructor")}if(v&&!y){var w=t.constructor,E=e.constructor;w!=E&&"constructor"in t&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof E=="function"&&E instanceof E)&&(v=!1)}return i.delete(t),i.delete(e),v}var kne=1,Fk="[object Arguments]",Bk="[object Array]",H0="[object Object]",Ine=Object.prototype,Uk=Ine.hasOwnProperty;function Pne(t,e,n,r,s,i){var o=qi(t),a=qi(e),l=o?Bk:Sa(t),c=a?Bk:Sa(e);l=l==Fk?H0:l,c=c==Fk?H0:c;var u=l==H0,d=c==H0,h=l==c;if(h&&Sg(t)){if(!Sg(e))return!1;o=!0,u=!1}if(h&&!u)return i||(i=new Ra),o||DC(t)?t5(t,e,n,r,s,i):Ene(t,e,l,n,r,s,i);if(!(n&kne)){var f=u&&Uk.call(t,"__wrapped__"),m=d&&Uk.call(e,"__wrapped__");if(f||m){var v=f?t.value():t,y=m?e.value():e;return i||(i=new Ra),s(v,y,n,r,i)}}return h?(i||(i=new Ra),Ane(t,e,n,r,s,i)):!1}function U1(t,e,n,r,s){return t===e?!0:t==null||e==null||!xl(t)&&!xl(e)?t!==t&&e!==e:Pne(t,e,n,r,U1,s)}var Rne=1,Lne=2;function One(t,e,n,r){var s=n.length,i=s;if(t==null)return!i;for(t=Object(t);s--;){var o=n[s];if(o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++s<i;){o=n[s];var a=o[0],l=t[a],c=o[1];if(o[2]){if(l===void 0&&!(a in t))return!1}else{var u=new Ra,d;if(!(d===void 0?U1(c,l,Rne|Lne,r,u):d))return!1}}return!0}function n5(t){return t===t&&!Yi(t)}function Nne(t){for(var e=$p(t),n=e.length;n--;){var r=e[n],s=t[r];e[n]=[r,s,n5(s)]}return e}function r5(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function Dne(t){var e=Nne(t);return e.length==1&&e[0][2]?r5(e[0][0],e[0][1]):function(n){return n===t||One(n,t,e)}}function Fne(t,e){return t!=null&&e in Object(t)}function Bne(t,e,n){e=Hp(e,t);for(var r=-1,s=e.length,i=!1;++r<s;){var o=Gp(e[r]);if(!(i=t!=null&&n(t,o)))break;t=t[o]}return i||++r!=s?i:(s=t==null?0:t.length,!!s&&LC(s)&&O1(o,s)&&(qi(t)||xg(t)))}function s5(t,e){return t!=null&&Bne(t,e,Fne)}var Une=1,zne=2;function $ne(t,e){return FC(t)&&n5(e)?r5(Gp(t),e):function(n){var r=cs(n,t);return r===void 0&&r===e?s5(n,t):U1(e,r,Une|zne)}}function Vne(t){return function(e){return e==null?void 0:e[t]}}function Hne(t){return function(e){return B1(e,t)}}function Gne(t){return FC(t)?Vne(Gp(t)):Hne(t)}function z1(t){return typeof t=="function"?t:t==null?MC:typeof t=="object"?qi(t)?$ne(t[0],t[1]):Dne(t):Gne(t)}function Wne(t){return function(e,n,r){for(var s=-1,i=Object(e),o=r(e),a=o.length;a--;){var l=o[++s];if(n(i[l],l,i)===!1)break}return e}}var i5=Wne();function jne(t,e){return t&&i5(t,e,$p)}function Kne(t,e){return function(n,r){if(n==null)return n;if(!gh(n))return t(n,r);for(var s=n.length,i=-1,o=Object(n);++i<s&&r(o[i],i,o)!==!1;);return n}}var qne=Kne(jne),$w=function(){return Ga.Date.now()},Yne="Expected a function",Xne=Math.max,Zne=Math.min;function mo(t,e,n){var r,s,i,o,a,l,c=0,u=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(Yne);e=JS(e)||0,Yi(n)&&(u=!!n.leading,d="maxWait"in n,i=d?Xne(JS(n.maxWait)||0,e):i,h="trailing"in n?!!n.trailing:h);function f(C){var T=r,I=s;return r=s=void 0,c=C,o=t.apply(I,T),o}function m(C){return c=C,a=setTimeout(g,e),u?f(C):o}function v(C){var T=C-l,I=C-c,k=e-T;return d?Zne(k,i-I):k}function y(C){var T=C-l,I=C-c;return l===void 0||T>=e||T<0||d&&I>=i}function g(){var C=$w();if(y(C))return S(C);a=setTimeout(g,v(C))}function S(C){return a=void 0,h&&r?f(C):(r=s=void 0,o)}function _(){a!==void 0&&clearTimeout(a),c=0,r=l=s=a=void 0}function w(){return a===void 0?o:S($w())}function E(){var C=$w(),T=y(C);if(r=arguments,s=this,l=C,T){if(a===void 0)return m(l);if(d)return clearTimeout(a),a=setTimeout(g,e),f(l)}return a===void 0&&(a=setTimeout(g,e)),o}return E.cancel=_,E.flush=w,E}var o5=Object.prototype,Jne=o5.hasOwnProperty,Qne=RC(function(t,e){t=Object(t);var n=-1,r=e.length,s=r>2?e[2]:void 0;for(s&&L6(e[0],e[1],s)&&(r=1);++n<r;)for(var i=e[n],o=Vp(i),a=-1,l=o.length;++a<l;){var c=o[a],u=t[c];(u===void 0||Up(u,o5[c])&&!Jne.call(t,c))&&(t[c]=i[c])}return t});function r2(t,e,n){(n!==void 0&&!Up(t[e],n)||n===void 0&&!(e in t))&&IC(t,e,n)}function a5(t){return xl(t)&&gh(t)}function s2(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function ere(t){return zp(t,Vp(t))}function tre(t,e,n,r,s,i,o){var a=s2(t,n),l=s2(e,n),c=o.get(l);if(c){r2(t,n,c);return}var u=i?i(a,l,n+"",t,e,o):void 0,d=u===void 0;if(d){var h=qi(l),f=!h&&Sg(l),m=!h&&!f&&DC(l);u=l,h||f||m?qi(a)?u=a:a5(a)?u=I6(a):f?(d=!1,u=G6(l,!0)):m?(d=!1,u=Y6(l,!0)):u=[]:V6(l)||xg(l)?(u=a,xg(a)?u=ere(a):(!Yi(a)||AC(a))&&(u=X6(l))):d=!1}d&&(o.set(l,u),s(u,l,r,i,o),o.delete(l)),r2(t,n,u)}function l5(t,e,n,r,s){t!==e&&i5(e,function(i,o){if(s||(s=new Ra),Yi(i))tre(t,e,o,n,l5,r,s);else{var a=r?r(s2(t,o),i,o+"",t,e,s):void 0;a===void 0&&(a=i),r2(t,o,a)}},Vp)}function nre(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function rre(t){return function(e,n,r){var s=Object(e);if(!gh(e)){var i=z1(n);e=$p(e),n=function(a){return i(s[a],a,s)}}var o=t(e,n,r);return o>-1?s[i?e[o]:o]:void 0}}var sre=Math.max;function c5(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var s=n==null?0:gJ(n);return s<0&&(s=sre(r+s,0)),kC(t,z1(e),s)}var ire=rre(c5);function u5(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var s=r-1;return kC(t,z1(e),s,!0)}function ore(t,e){var n=-1,r=gh(t)?Array(t.length):[];return qne(t,function(s,i,o){r[++n]=e(s,i,o)}),r}function are(t,e){var n=qi(t)?TC:ore;return n(t,z1(e))}function d5(t,e){return vv(are(t,e),1)}var lre=1/0;function cre(t){var e=t==null?0:t.length;return e?vv(t,lre):[]}function Mg(t){for(var e=-1,n=t==null?0:t.length,r={};++e<n;){var s=t[e];r[s[0]]=s[1]}return r}function ure(t,e){return e.length<2?t:B1(t,Aee(e,0,-1))}function _s(t,e){return U1(t,e)}function vs(t){return t==null}function yv(t){return t===null}function dre(t){return t===void 0}var h5=JJ(function(t,e,n){l5(t,e,n)});function hre(t,e){return e=Hp(e,t),t=ure(t,e),t==null||delete t[Gp(nre(e))]}function fre(t){return V6(t)?void 0:t}var pre=1,mre=2,gre=4,f5=z6(function(t,e){var n={};if(t==null)return n;var r=!1;e=TC(e,function(i){return i=Hp(i,t),r||(r=i.length>1),i}),zp(t,q6(t),n),r&&(n=Ff(n,pre|mre|gre,fre));for(var s=e.length;s--;)hre(n,e[s]);return n});function p5(t,e,n,r){if(!Yi(t))return t;e=Hp(e,t);for(var s=-1,i=e.length,o=i-1,a=t;a!=null&&++s<i;){var l=Gp(e[s]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(s!=o){var u=a[l];c=void 0,c===void 0&&(c=Yi(u)?u:O1(e[s+1])?[]:{})}PC(a,l,c),a=a[l]}return t}function vre(t,e,n){for(var r=-1,s=e.length,i={};++r<s;){var o=e[r],a=B1(t,o);n(a,o)&&p5(i,Hp(o,t),a)}return i}function yre(t,e){return vre(t,e,function(n,r){return s5(t,r)})}var Yo=z6(function(t,e){return t==null?{}:yre(t,e)});function bre(t,e,n){return t==null?t:p5(t,e,n)}var _re="Expected a function";function Vd(t,e,n){var r=!0,s=!0;if(typeof t!="function")throw new TypeError(_re);return Yi(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),mo(t,e,{leading:r,maxWait:e,trailing:s})}var wre=1/0,xre=Df&&1/VC(new Df([,-0]))[1]==wre?function(t){return new Df(t)}:NJ,Sre=200;function Ere(t,e,n){var r=-1,s=jJ,i=t.length,o=!0,a=[],l=a;if(i>=Sre){var c=xre(t);if(c)return VC(c);o=!1,s=e5,l=new Tg}else l=a;e:for(;++r<i;){var u=t[r],d=u;if(u=u!==0?u:0,o&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;a.push(u)}else s(l,d,n)||(l!==a&&l.push(d),a.push(u))}return a}var Vw=RC(function(t){return Ere(vv(t,1,a5,!0))}),Km=function(){var t=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(u){u.preventDefault(),r(++t%e.children.length)},!1);function n(u){return e.appendChild(u.dom),u}function r(u){for(var d=0;d<e.children.length;d++)e.children[d].style.display=d===u?"block":"none";t=u}var s=(performance||Date).now(),i=s,o=0,a=n(new Km.Panel("FPS","#0ff","#002")),l=n(new Km.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=n(new Km.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:e,addPanel:n,showPanel:r,begin:function(){s=(performance||Date).now()},end:function(){o++;var u=(performance||Date).now();if(l.update(u-s,200),u>=i+1e3&&(a.update(o*1e3/(u-i),100),i=u,o=0,c)){var d=performance.memory;c.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return u},update:function(){s=this.end()},domElement:e,setMode:r}};Km.Panel=function(t,e,n){var r=1/0,s=0,i=Math.round,o=i(window.devicePixelRatio||1),a=80*o,l=48*o,c=3*o,u=2*o,d=3*o,h=15*o,f=74*o,m=30*o,v=document.createElement("canvas");v.width=a,v.height=l,v.style.cssText="width:80px;height:48px";var y=v.getContext("2d");return y.font="bold "+9*o+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=n,y.fillRect(0,0,a,l),y.fillStyle=e,y.fillText(t,c,u),y.fillRect(d,h,f,m),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(d,h,f,m),{dom:v,update:function(g,S){r=Math.min(r,g),s=Math.max(s,g),y.fillStyle=n,y.globalAlpha=1,y.fillRect(0,0,a,h),y.fillStyle=e,y.fillText(i(g)+" "+t+" ("+i(r)+"-"+i(s)+")",c,u),y.drawImage(v,d+o,h,f-o,m,d,h,f-o,m),y.fillRect(d+f-o,h,o,m),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(d+f-o,h,o,i((1-g/S)*m))}}};let Cre=class{constructor(e,n){this._view=e,this._doc=n,n.database.events.entityAppended.addEventListener(r=>{this.view.addEntity(r.entity)}),n.database.events.entityModified.addEventListener(r=>{this.view.updateEntity(r.entity)}),n.database.events.layerAppended.addEventListener(r=>{this._view.addLayer(r.layer)}),n.database.events.layerModified.addEventListener(r=>{this._view.updateLayer(r.layer)}),n.database.events.headerSysVarChanged.addEventListener(r=>{r.name=="pdmode"&&this._view.rerenderPoints(r.database.pdmode)}),n.database.events.dictObjetSet.addEventListener(r=>{r.object instanceof C1&&this._view.addLayout(r.object)}),e.selectionSet.events.selectionAdded.addEventListener(r=>{e.highlight(r.ids)}),e.selectionSet.events.selectionRemoved.addEventListener(r=>{e.unhighlight(r.ids)})}get view(){return this._view}get doc(){return this._doc}},Wa=class{constructor(){this.events={commandWillStart:new Tr,commandEnded:new Tr},this._globalName="",this._localName=""}get globalName(){return this._globalName}set globalName(e){this._globalName=e}get localName(){return this._localName}set localName(e){this._localName=e}tirgger(e){this.events.commandWillStart.dispatch({command:this}),this.execute(e),this.events.commandEnded.dispatch({command:this})}execute(e){}};class Tre{constructor(e){this._index=0,this._commands=[],e.forEach(n=>{const r=n.groupName;n.commandsByGlobalName.forEach(s=>{this._commands.push({command:s,commandGroup:r})})})}[Symbol.iterator](){return this}get command(){return this._index<this._commands.length?this._commands[this._index].command:null}get commandGroup(){return this._index<this._commands.length?this._commands[this._index].commandGroup:null}next(){for(;this._index<this._commands.length;){const e=this._commands[this._index];return this._index+=1,{value:e,done:!1}}return{value:null,done:!0}}}const i2=class bd{constructor(){this._commandsByGroup=[],this._systemCommandGroup={groupName:bd.SYSTEMT_COMMAND_GROUP_NAME,commandsByGlobalName:new Map,commandsByLocalName:new Map},this._defaultCommandGroup={groupName:bd.DEFAUT_COMMAND_GROUP_NAME,commandsByGlobalName:new Map,commandsByLocalName:new Map},this._commandsByGroup.push(this._systemCommandGroup),this._commandsByGroup.push(this._defaultCommandGroup)}static get instance(){return bd._instance||(bd._instance=new bd),bd._instance}addCommand(e,n,r,s){if(!n)throw new Error("[AcEdCommandStack] The global name of the command is required!");r||(r=n);let i=this._defaultCommandGroup;if(e){const o=this._commandsByGroup.find(a=>a.groupName==e);o?i=o:i={groupName:e,commandsByGlobalName:new Map,commandsByLocalName:new Map}}if(i.commandsByGlobalName.has(n))throw new Error(`[AcEdCommandStack] The command with global name '${n}' already exists!`);if(i.commandsByLocalName.has(r))throw new Error(`[AcEdCommandStack] The command with local name '${r}' already exists!`);i.commandsByGlobalName.set(n,s),i.commandsByLocalName.set(r,s),s.globalName=n,s.localName=r}iterator(){return new Tre(this._commandsByGroup)}lookupGlobalCmd(e){let n;for(const r of this._commandsByGroup)if(n=r.commandsByGlobalName.get(e),n)break;return n}lookupLocalCmd(e){let n;for(const r of this._commandsByGroup)if(n=r.commandsByLocalName.get(e),n)break;return n}removeCmd(e,n){for(const r of this._commandsByGroup)if(r.groupName==e)return r.commandsByGlobalName.delete(n);return!1}removeGroup(e){let n=-1;return this._commandsByGroup.some((r,s)=>(n=s,r.groupName==e)),n>=0?(this._commandsByGroup.splice(n,1),!0):!1}};i2.SYSTEMT_COMMAND_GROUP_NAME="ACAD",i2.DEFAUT_COMMAND_GROUP_NAME="USER";let ei=i2;function Mre(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(s){s(n)}),(r=t.get("*"))&&r.slice().map(function(s){s(e,n)})}}}const ji=Mre();var bv=(t=>(t[t.NoSpecialCursor=-1]="NoSpecialCursor",t[t.Crosshair=0]="Crosshair",t[t.RectCursor=1]="RectCursor",t[t.RubberBand=2]="RubberBand",t[t.NotRotated=3]="NotRotated",t[t.TargetBox=4]="TargetBox",t[t.RotatedCrosshair=5]="RotatedCrosshair",t[t.CrosshairNoRotate=6]="CrosshairNoRotate",t[t.Invisible=7]="Invisible",t[t.EntitySelect=8]="EntitySelect",t[t.Parallelogram=9]="Parallelogram",t[t.EntitySelectNoPersp=10]="EntitySelectNoPersp",t[t.PkfirstOrGrips=11]="PkfirstOrGrips",t[t.CrosshairDashed=12]="CrosshairDashed",t[t.Grab=13]="Grab",t))(bv||{});class Are{constructor(){this._cursorMap=new Map,this._cursorMap.set(0,this.createRectCrossIcon(10,10))}setCursor(e,n){if(e<=-1)n.style.cursor="default";else if(e==13)n.style.cursor="grab";else{const r=this._cursorMap.get(e);r&&(n.style.cursor=r)}}encodeSvgToCursor(e,n,r){return`url('data:image/svg+xml;base64,${btoa(e)}') ${n} ${r}, auto`}createRectCrossIcon(e,n,r="white"){const s=e/2,i=e+2*n,o=`
      <svg xmlns="http://www.w3.org/2000/svg" width="${i}" height="${i}" viewBox="0 0 ${i} ${i}">
        <rect x="${n}" y="${n}" width="${e}" height="${e}" fill="none" stroke="${r}" />
        <line x1="${s+n}" y1="0" x2="${s+n}" y2="${n}" stroke="${r}" />
        <line x1="${e+n}" y1="${s+n}" x2="${e+2*n}" y2="${s+n}" stroke="${r}" />
        <line x1="${s+n}" y1="${e+n}" x2="${s+n}" y2="${e+2*n}" stroke="${r}" />
        <line x1="0" y1="${s+n}" x2="${n}" y2="${s+n}" stroke="${r}" />
      </svg>
    `;return this.encodeSvgToCursor(o,s+n,s+n)}}class HC{constructor(e){this.active=!1,this.isResolvedOrRejected=!1,this.onKeyDown=n=>{n.code==="Escape"&&this.reject("Canceled by user!")},this.view=e}get isActive(){return this.active}activate(){this.isActive&&console.warn("Something wrong here!"),this.active=!0,this.view.canvas.addEventListener("keydown",this.onKeyDown)}deactivate(){this.active=!1,this.view.canvas.removeEventListener("keydown",this.onKeyDown)}resolve(e){this.deactivate(),this._resolve&&!this.isResolvedOrRejected&&(this._resolve(e),this.isResolvedOrRejected=!0)}reject(e){this.deactivate(),this._reject&&!this.isResolvedOrRejected&&(this._reject(e),this.isResolvedOrRejected=!0)}async start(){return this.isResolvedOrRejected=!1,new Promise((e,n)=>{this._resolve=e,this._reject=n,this.activate()})}}class kre extends HC{constructor(e){super(e),this.events={update:new Tr},this.onMouseMove=n=>{this.curPos.set(n.clientX,n.clientY),this.events.update.dispatch()},this.curPos=new Dn}activate(){super.activate(),this.view.canvas.addEventListener("mousemove",this.onMouseMove)}deactivate(){super.deactivate(),this.view.canvas.removeEventListener("mousemove",this.onMouseMove)}}class Ire{constructor(e){this.onUpdate=()=>{this.update()},this._view=e,this._jigLoop=new kre(e),this._jigLoop.events.update.addEventListener(this.onUpdate)}get view(){return this._view}resolve(e){this._jigLoop.events.update.removeEventListener(this.onUpdate),this._jigLoop.resolve(e)}reject(e){this._jigLoop.events.update.removeEventListener(this.onUpdate),this._jigLoop.reject(e)}async drag(){const e=this._jigLoop.start(),n=this.sampler();await Promise.allSettled([e,n])}async sampler(){}update(){}}const Pre=16777215,Rre="1px";class Lre extends HC{constructor(e){super(e),this.mouseDown=!1,this.mouseMove=!1,this.mouseDownPositionX=-1,this.mouseDownPositionY=-1,this.mousedown=n=>{if(n.button===0){this.mouseDown=!0;const r=new Dn(n.x,n.y);this.mouseDownPositionX=r.x,this.mouseDownPositionY=r.y}},this.mousemove=n=>{if(!this.mouseDown)return;const r=new Dn(n.x,n.y);if(this.mouseDownPositionX>=0&&this.mouseDownPositionY>=0&&(Math.abs(r.x-this.mouseDownPositionX)>=5||Math.abs(r.y-this.mouseDownPositionY)>=5)){this.mouseMove=!0;const s=new Dn(Math.min(this.mouseDownPositionX,r.x),Math.min(this.mouseDownPositionY,r.y)),i=new Dn(Math.max(this.mouseDownPositionX,r.x),Math.max(this.mouseDownPositionY,r.y));this.drawRect(s,i)}},this.mouseup=n=>{if(this.mouseDown&&this.mouseMove){const r=new Dn(n.x,n.y),s=new Dn(Math.min(this.mouseDownPositionX,r.x),Math.min(this.mouseDownPositionY,r.y)),i=new Dn(Math.max(this.mouseDownPositionX,r.x),Math.max(this.mouseDownPositionY,r.y)),o=new ds(s,i);this.resolve(this.toWcs(o))}this.mouseDown=!1,this.mouseMove=!1,this.mouseDownPositionX=-1,this.mouseDownPositionY=-1},this.container=e.canvas,this.color=Pre}activate(){super.activate(),this.active=!0,this.container.addEventListener("pointerdown",this.mousedown),this.container.addEventListener("pointermove",this.mousemove),this.container.addEventListener("pointerup",this.mouseup)}deactivate(){super.deactivate(),this.container.removeEventListener("pointerdown",this.mousedown),this.container.removeEventListener("pointermove",this.mousemove),this.container.removeEventListener("pointerup",this.mouseup),this.setRectDomVisible(!1)}reject(e){var n;super.reject(e),(n=this.boxDom)==null||n.remove(),this.boxDom=void 0}drawRect(e,n){if(!this.boxDom){const i=new Gu;i.color=this.color,this.boxDom=document.createElement("div"),this.boxDom.style.cssText=`position: absolute;border: ${Rre} solid ${i.cssColor};`,document.body.appendChild(this.boxDom)}this.setRectDomVisible(!0),e.x<=0&&(e.x=0),e.y<=0&&(e.y=0),n.x>=this.container.clientWidth-2&&(n.x=this.container.clientWidth-2),n.y>=this.container.clientHeight-2&&(n.y=this.container.clientHeight-2),this.boxDom.style.left=`${e.x}px`,this.boxDom.style.top=`${e.y}px`;const r=Math.abs(n.x-e.x),s=Math.abs(n.y-e.y);this.boxDom.style.width=`${r}px`,this.boxDom.style.height=`${s}px`}setRectDomVisible(e){this.boxDom&&(this.boxDom.style.display=e?"inline-block":"none")}toWcs(e){const n=new ds,r=new Dn(e.min.x,e.min.y),s=new Dn(e.max.x,e.max.y);return n.expandByPoint(this.view.cwcs2Wcs(r)),n.expandByPoint(this.view.cwcs2Wcs(s)),n}}class Ore extends HC{constructor(e){super(e),this.onClick=n=>{this.resolve(this.view.cwcs2Wcs({x:n.clientX,y:n.clientY}))}}activate(){super.activate(),this.view.canvas.addEventListener("click",this.onClick)}deactivate(){super.deactivate(),this.view.canvas.removeEventListener("click",this.onClick)}}class Nre{constructor(e){this._view=e,this._cursorManager=new Are}get currentCursor(){return this._currentCursor}restoreCursor(){this._previousCursor!=null&&this.setCursor(this._previousCursor)}setCursor(e){this._cursorManager.setCursor(e,this._view.canvas),this._previousCursor=this._currentCursor,this._currentCursor=e}async getPoint(){return await new Ore(this._view).start()}async getSelection(){return await new Lre(this._view).start()}}class Dre{constructor(e=[]){this.events={selectionAdded:new Tr,selectionRemoved:new Tr},this._ids=new Set(e)}get ids(){return Array.from(this._ids)}get count(){return this._ids.size}add(e){Array.isArray(e)?(e.forEach(n=>this._ids.add(n)),this.events.selectionAdded.dispatch({ids:e})):(this._ids.add(e),this.events.selectionAdded.dispatch({ids:[e]}))}delete(e){Array.isArray(e)?(e.forEach(n=>this._ids.delete(n)),this.events.selectionRemoved.dispatch({ids:e})):(this._ids.delete(e),this.events.selectionRemoved.dispatch({ids:[e]}))}has(e){return this._ids.has(e)}clear(){if(this._ids.size>0){const e=Array.from(this._ids);this._ids.clear(),this.events.selectionRemoved.dispatch({ids:e})}}}var ku=(t=>(t[t.SELECTION=0]="SELECTION",t[t.PAN=1]="PAN",t))(ku||{});class Fre{constructor(e){this.events={mouseMove:new Tr,viewResize:new Tr,hover:new Tr,unhover:new Tr},this._canvas=e;const n=e.getBoundingClientRect();this._bbox=new Lr,this._width=n.width,this._height=n.height,this._curPos=new Dn,this._curScreenPos=new Dn,this._selectionSet=new Dre,this._editor=new Nre(this),this._canvas.addEventListener("mousemove",r=>this.onMouseMove(r)),this._canvas.addEventListener("mousedown",r=>{r.button===1&&this._editor.setCursor(bv.Grab)}),this._canvas.addEventListener("mouseup",r=>{r.button===1&&this._editor.restoreCursor()}),window.addEventListener("resize",this.onWindowResize.bind(this)),this._selectionBoxSize=4,this._hoverTimer=null,this._pauseTimer=null,this._hoveredObjectId=null}get editor(){return this._editor}get selectionBoxSize(){return this._selectionBoxSize}set selectionBoxSize(e){this._selectionBoxSize=e}setCursor(e){this._editor.setCursor(e)}setCalculateSizeCallback(e){this._calculateSizeCallback=e}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}get bbox(){return this._bbox}get canvas(){return this._canvas}get aspect(){return this._width/this._height}get curPos(){return this._curPos}get curScreenPos(){return this._curScreenPos}get selectionSet(){return this._selectionSet}onWindowResize(){if(this._calculateSizeCallback){const{width:e,height:n}=this._calculateSizeCallback();this._width=e,this._height=n}else this._width=this._canvas.clientWidth,this._height=this._canvas.clientHeight;this.events.viewResize.dispatch({width:this._width,height:this._height})}onMouseMove(e){this._curScreenPos=new Dn(e.clientX,e.clientY);const n=this.cwcs2Wcs(this._curScreenPos);this._curPos.copy(n),this.events.mouseMove.dispatch({x:n.x,y:n.y}),this.mode==0&&this.startHoverTimer(n.x,n.y)}setHoveredObjectId(e){this._hoveredObjectId&&(this.events.unhover.dispatch({id:this._hoveredObjectId,x:this.curScreenPos.x,y:this.curScreenPos.y}),this.onUnhover(this._hoveredObjectId)),this._hoveredObjectId=e,e&&(this.startPauseTimer(e),this.onHover(e))}hoverAt(e,n){const r=this.pick({x:e,y:n});r.length>0?this.setHoveredObjectId(r[0]):(this.setHoveredObjectId(null),this.clearPauseTimer())}clearHoverTimer(){this._hoverTimer&&clearTimeout(this._hoverTimer)}clearPauseTimer(){this._pauseTimer&&clearTimeout(this._pauseTimer)}startHoverTimer(e,n){this.clearHoverTimer(),this._hoverTimer=setTimeout(()=>{this.hoverAt(e,n)},50)}startPauseTimer(e){this._pauseTimer=setTimeout(()=>{this.events.hover.dispatch({id:e,x:this.curScreenPos.x,y:this.curScreenPos.y})},500)}}let Bre=class{constructor(){this._fileName="",this._docTitle="",this._isReadOnly=!0,this._database=new SG,this.docTitle="Untitled"}async openUri(e,n){this._uri=e,this._isReadOnly=n&&n.readOnly||!1,this._fileName=this.getFileNameFromUri(e);let r=!0;try{await this._database.openUri(e,n),this.docTitle=this._fileName}catch{r=!1,ji.emit("failed-to-open-file",{fileName:e})}return r}async openDocument(e,n,r){var s;let i=!0;this._fileName=e;try{const o=(s=e.split(".").pop())==null?void 0:s.toLocaleLowerCase();await this._database.read(n,r,o=="dwg"?Tu.DWG:Tu.DXF),this.docTitle=this._fileName}catch(o){i=!1,ji.emit("failed-to-open-file",{fileName:e}),console.error(o)}return i}get uri(){return this._uri}get database(){return this._database}get docTitle(){return this._docTitle}set docTitle(e){this._docTitle=e,typeof document<"u"&&(document.title=e)}get isReadOnly(){return this._isReadOnly}getFileNameFromUri(e){try{const n=new URL(e).pathname.split("/");return n[n.length-1]||""}catch(n){return console.error("Invalid URI:",n),""}}},$1=class{constructor(){this._objectId="",this._ownerId="",this._layerName="",this._visible=!0,this._userData={},this._box=new ds,this._svg=""}get box(){return this._box}set box(e){this._box.copy(e)}get svg(){return this._svg}set svg(e){this._svg=e}get objectId(){return this._objectId}set objectId(e){this._objectId=e}get ownerId(){return this._ownerId}set ownerId(e){this._ownerId=e}get layerName(){return this._layerName}set layerName(e){this._layerName=e}get visible(){return this._visible}set visible(e){this._visible=e}get userData(){return this._userData}set userData(e){this._userData=e}applyMatrix(e){}recomputeBoundingBox(){}highlight(){}unhighlight(){}fastDeepClone(){return this}};class Ure extends $1{constructor(e){if(super(),e.closed)this.svg=`
<circle cx="${e.center.x}" cy="${e.center.y}" r="${e.radius}"/>`;else{const r=e.startPoint,s=e.endPoint,i=e.clockwise?0:1;this.svg=`
<path d="M${r.x},${r.y} A${e.radius},${e.radius} 0 ${e.isLargeArc},${i} ${s.x},${s.y}"/>`}const n=e.box;this._box.min.copy(n.min),this._box.max.copy(n.max)}}let zre=class extends $1{constructor(t){if(super(),t.closed)this.svg=`
<epllise cx="${t.center.x}" cy="${t.center.y}" rx="${t.majorAxisRadius}" ry="${t.minorAxisRadius}"/>`;else{const n=t.startPoint,r=t.endPoint,s=vr.radToDeg(t.majorAxis.angleTo(qt.X_AXIS)),i=t.clockwise?0:1;this.svg=`
<path d="M${n.x},${n.y} A${t.majorAxisRadius},${t.minorAxisRadius} ${s} ${t.isLargeArc},${i} ${r.x},${r.y}"/>`}const e=t.box;this._box.min.copy(e.min),this._box.max.copy(e.max)}},$re=class extends $1{constructor(t){super();const e=t.reduce((n,r,s)=>(n+=s===0?"M":"L",n+=r.x+","+r.y,this.box.expandByPoint(r),n),"");e&&(this.svg=`<path d="${e}" />`)}};class Vre{constructor(){this._container=new Array,this._bbox=new ds}setFontMapping(e){}group(e){return Zh}point(e){return Zh}circularArc(e){const n=new Ure(e);return this._container.push(n.svg),this._bbox.union(n.box),n}ellipticalArc(e){const n=new zre(e);return this._container.push(n.svg),this._bbox.union(n.box),n}lines(e,n){const r=new $re(e);return this._container.push(r.svg),this._bbox.union(r.box),r}lineSegments(e,n,r,s){return Zh}area(e){return Zh}mtext(e,n,r){return Zh}image(e,n){return Zh}export(){const e=this._container.join(`
`),n=this._bbox.isEmpty()?{x:0,y:0,width:0,height:0}:{x:this._bbox.min.x,y:-this._bbox.max.y,width:this._bbox.max.x-this._bbox.min.x,height:this._bbox.max.y-this._bbox.min.y};return`<?xml version="1.0"?>
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
      preserveAspectRatio="xMinYMin meet"
      viewBox="${n.x} ${n.y} ${n.width} ${n.height}"
      width="100%" height="100%"
    >
      <g stroke="#000000" stroke-width="0.1%" fill="none" transform="matrix(1,0,0,-1,0,0)">
        ${e}
      </g>
    </svg>`}}const Zh=new $1;class Hre{convert(){const e=fr.instance.curDocument.database.tables.blockTable.modelSpace.newIterator(),n=new Vre;for(const r of e)r.draw(n);this.createFileAndDownloadIt(n.export())}createFileAndDownloadIt(e){const n=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download="example.svg",document.body.appendChild(s),s.click()}}class m5 extends Wa{execute(e){new Hre().convert()}}class g5 extends Wa{execute(e){ji.emit("open-file",{})}}class v5 extends Wa{execute(e){fr.instance.openUrl("https://cdn.jsdelivr.net/gh/mlight-lee/cad-data/templates/acadiso.dxf")}}class Gre extends Wa{execute(e){e.view.mode=ku.SELECTION,e.view.setCursor(bv.Crosshair)}}class Wre extends Wa{execute(e){const n=e.doc.database;e.view.zoomTo(new ds(n.extmin,n.extmax),1.1)}}let jre=class extends Ire{constructor(e){super(e)}async sampler(){await fr.instance.editor.getSelection().then(e=>this.view.zoomTo(e,1))}};class Kre extends Wa{async execute(e){await new jre(e.view).drag()}}class qre extends Wa{execute(e){e.view.mode=ku.PAN,e.view.setCursor(bv.Grab)}}class zk{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}removeEventListener(e){this.listeners=this.listeners.filter(n=>n!==e)}replaceEventListener(e){this.removeEventListener(e),this.addEventListener(e)}dispatch(e,...n){for(const r of this.listeners)r.call(null,e,...n)}}class Yre{constructor(){this.cache=new Map}hasGeometry(e,n){const r=this.generateKey(e,n);return this.cache.has(r)}getGeometry(e,n){const r=this.generateKey(e,n);if(this.cache.has(r))return this.cache.get(r)}setGeometry(e,n,r){const s=this.generateKey(e,n);this.cache.set(s,r)}dispose(){for(const e of this.cache.values())e.dispose();this.cache.clear()}generateKey(e,n){return`${e}_${n}`}}class y5{constructor(){this.unsupportedChars={},this.cache=new Yre}addUnsupportedChar(e){this.unsupportedChars[e]||(this.unsupportedChars[e]=0),this.unsupportedChars[e]++}}class b5 extends hc{constructor(e){super(),this.width=0,this.char=e}}const o2=(t,e)=>e.some(n=>t instanceof n);let $k,Vk;function Xre(){return $k||($k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zre(){return Vk||(Vk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const a2=new WeakMap,Hw=new WeakMap,V1=new WeakMap;function Jre(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Hd(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return V1.set(e,t),e}function Qre(t){if(a2.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});a2.set(t,e)}let l2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return a2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hd(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _5(t){l2=t(l2)}function ese(t){return Zre().includes(t)?function(...e){return t.apply(c2(this),e),Hd(this.request)}:function(...e){return Hd(t.apply(c2(this),e))}}function tse(t){return typeof t=="function"?ese(t):(t instanceof IDBTransaction&&Qre(t),o2(t,Xre())?new Proxy(t,l2):t)}function Hd(t){if(t instanceof IDBRequest)return Jre(t);if(Hw.has(t))return Hw.get(t);const e=tse(t);return e!==t&&(Hw.set(t,e),V1.set(e,t)),e}const c2=t=>V1.get(t);function nse(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Hd(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Hd(o.result),l.oldVersion,l.newVersion,Hd(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const rse=["get","getKey","getAll","getAllKeys","count"],sse=["put","add","delete","clear"],Gw=new Map;function Hk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gw.get(e))return Gw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=sse.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||rse.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Gw.set(e,i),i}_5(t=>({...t,get:(e,n,r)=>Hk(e,n)||t.get(e,n,r),has:(e,n)=>!!Hk(e,n)||t.has(e,n)}));const ise=["continue","continuePrimaryKey","advance"],Gk={},u2=new WeakMap,w5=new WeakMap,ose={get(t,e){if(!ise.includes(e))return t[e];let n=Gk[e];return n||(n=Gk[e]=function(...r){u2.set(this,w5.get(this)[e](...r))}),n}};async function*ase(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,ose);for(w5.set(n,e),V1.set(n,c2(e));e;)yield n,e=await(u2.get(n)||e.continue()),u2.delete(n)}function Wk(t,e){return e===Symbol.asyncIterator&&o2(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&o2(t,[IDBIndex,IDBObjectStore])}_5(t=>({...t,get(e,n,r){return Wk(e,n)?ase:t.get(e,n,r)},has(e,n){return Wk(e,n)||t.has(e,n)}}));const vf={fonts:"fonts"},d2=[{version:1,stores:[{name:vf.fonts,keyPath:"name"}]}],h2=class il{constructor(){this.isClosing=!1,typeof window<"u"&&window.addEventListener("unload",()=>{this.close()})}static get instance(){return il._instance||(il._instance=new il),il._instance}async set(e,n){await(await this.getDatabase()).put(vf.fonts,{...n,name:e})}async get(e){return await(await this.getDatabase()).get(vf.fonts,e)}async delete(e){await(await this.getDatabase()).delete(vf.fonts,e)}async getAll(){return await(await this.getDatabase()).getAll(vf.fonts)}async clear(){await(await this.getDatabase()).clear(vf.fonts)}async has(e){return await this.get(e)!==void 0}close(){if(!this.isClosing){this.isClosing=!0;try{this.db&&(this.db.close(),this.db=void 0)}finally{this.isClosing=!1}}}async destroy(){this.close(),await indexedDB.deleteDatabase(il.DATABASE_NAME),il._instance=void 0}async getDatabase(){if(this.isClosing)throw new Error("Cannot perform operation while database is closing");return this.db?this.db:(this.db=await nse(il.DATABASE_NAME,il.DATABASE_VERSION,{upgrade:(e,n,r)=>this.handleUpgrade(e,n,r),blocked(){console.warn("Database upgrade blocked - please close other tabs using the application")},blocking(){console.warn("Database blocking newer version - closing connection"),il.instance.close()}}),this.db)}handleUpgrade(e,n,r){const s=d2.filter(i=>i.version>n&&(!r||i.version<=r));for(const i of s)this.applySchemaVersion(e,i)}applySchemaVersion(e,n){for(const r of n.stores)e.objectStoreNames.contains(r.name)||e.createObjectStore(r.name,{keyPath:r.keyPath})}};h2.DATABASE_NAME="mlightcad",h2.DATABASE_VERSION=d2[d2.length-1].version;let Ww=h2;const lse=t=>t.substring(t.lastIndexOf(".")+1),x5=t=>t.split("/").pop(),jk=t=>{const e=x5(t);if(e){const n=e.lastIndexOf(".");return n===-1?e:e.substring(0,n)}return t},cse=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215,0],use=t=>cse[t];let dse=class{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],r=hse(t,e,this.data);for(let s=0,i=r.length;s<i;s++)n.push(...r[s].toShapes());return n}};function hse(t,e,n){const r=Array.from(t),s=e/n.resolution,i=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*s,o=[];let a=0,l=0;for(let c=0;c<r.length;c++){const u=r[c];if(u===`
`)a=0,l-=i;else{const d=fse(u,s,a,l,n);a+=d.offsetX,o.push(d.path)}}return o}function fse(t,e,n,r,s){const i=s.glyphs[t]||s.glyphs["?"];if(!i){console.error('THREE.Font: character "'+t+'" does not exists in font family '+s.familyName+".");return}const o=new Xj;let a,l,c,u,d,h,f,m;if(i.o){const v=i._cachedOutline||(i._cachedOutline=i.o.split(" "));for(let y=0,g=v.length;y<g;)switch(v[y++]){case"m":a=v[y++]*e+n,l=v[y++]*e+r,o.moveTo(a,l);break;case"l":a=v[y++]*e+n,l=v[y++]*e+r,o.lineTo(a,l);break;case"q":c=v[y++]*e+n,u=v[y++]*e+r,d=v[y++]*e+n,h=v[y++]*e+r,o.quadraticCurveTo(d,h,c,u);break;case"b":c=v[y++]*e+n,u=v[y++]*e+r,d=v[y++]*e+n,h=v[y++]*e+r,f=v[y++]*e+n,m=v[y++]*e+r,o.bezierCurveTo(d,h,f,m,c,u);break}}return{offsetX:i.ha*e,path:o}}/*! https://mths.be/codepointat v0.2.0 by @mathias */String.prototype.codePointAt||function(){var t=function(){try{var n={},r=Object.defineProperty,s=r(n,n,n)&&r}catch{}return s}(),e=function(n){if(this==null)throw TypeError();var r=String(this),s=r.length,i=n?Number(n):0;if(i!=i&&(i=0),!(i<0||i>=s)){var o=r.charCodeAt(i),a;return o>=55296&&o<=56319&&s>i+1&&(a=r.charCodeAt(i+1),a>=56320&&a<=57343)?(o-55296)*1024+a-56320+65536:o}};t?t(String.prototype,"codePointAt",{value:e,configurable:!0,writable:!0}):String.prototype.codePointAt=e}();var GC=0,S5=-3;function Ag(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function pse(t,e){this.source=t,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=e,this.destLen=0,this.ltree=new Ag,this.dtree=new Ag}var E5=new Ag,C5=new Ag,WC=new Uint8Array(30),jC=new Uint16Array(30),T5=new Uint8Array(30),M5=new Uint16Array(30),mse=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Kk=new Ag,el=new Uint8Array(320);function A5(t,e,n,r){var s,i;for(s=0;s<n;++s)t[s]=0;for(s=0;s<30-n;++s)t[s+n]=s/n|0;for(i=r,s=0;s<30;++s)e[s]=i,i+=1<<t[s]}function gse(t,e){var n;for(n=0;n<7;++n)t.table[n]=0;for(t.table[7]=24,t.table[8]=152,t.table[9]=112,n=0;n<24;++n)t.trans[n]=256+n;for(n=0;n<144;++n)t.trans[24+n]=n;for(n=0;n<8;++n)t.trans[168+n]=280+n;for(n=0;n<112;++n)t.trans[176+n]=144+n;for(n=0;n<5;++n)e.table[n]=0;for(e.table[5]=32,n=0;n<32;++n)e.trans[n]=n}var qk=new Uint16Array(16);function jw(t,e,n,r){var s,i;for(s=0;s<16;++s)t.table[s]=0;for(s=0;s<r;++s)t.table[e[n+s]]++;for(t.table[0]=0,i=0,s=0;s<16;++s)qk[s]=i,i+=t.table[s];for(s=0;s<r;++s)e[n+s]&&(t.trans[qk[e[n+s]]++]=s)}function vse(t){t.bitcount--||(t.tag=t.source[t.sourceIndex++],t.bitcount=7);var e=t.tag&1;return t.tag>>>=1,e}function ll(t,e,n){if(!e)return n;for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var r=t.tag&65535>>>16-e;return t.tag>>>=e,t.bitcount-=e,r+n}function f2(t,e){for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var n=0,r=0,s=0,i=t.tag;do r=2*r+(i&1),i>>>=1,++s,n+=e.table[s],r-=e.table[s];while(r>=0);return t.tag=i,t.bitcount-=s,e.trans[n+r]}function yse(t,e,n){var r,s,i,o,a,l;for(r=ll(t,5,257),s=ll(t,5,1),i=ll(t,4,4),o=0;o<19;++o)el[o]=0;for(o=0;o<i;++o){var c=ll(t,3,0);el[mse[o]]=c}for(jw(Kk,el,0,19),a=0;a<r+s;){var u=f2(t,Kk);switch(u){case 16:var d=el[a-1];for(l=ll(t,2,3);l;--l)el[a++]=d;break;case 17:for(l=ll(t,3,3);l;--l)el[a++]=0;break;case 18:for(l=ll(t,7,11);l;--l)el[a++]=0;break;default:el[a++]=u;break}}jw(e,el,0,r),jw(n,el,r,s)}function Yk(t,e,n){for(;;){var r=f2(t,e);if(r===256)return GC;if(r<256)t.dest[t.destLen++]=r;else{var s,i,o,a;for(r-=257,s=ll(t,WC[r],jC[r]),i=f2(t,n),o=t.destLen-ll(t,T5[i],M5[i]),a=o;a<o+s;++a)t.dest[t.destLen++]=t.dest[a]}}}function bse(t){for(var e,n,r;t.bitcount>8;)t.sourceIndex--,t.bitcount-=8;if(e=t.source[t.sourceIndex+1],e=256*e+t.source[t.sourceIndex],n=t.source[t.sourceIndex+3],n=256*n+t.source[t.sourceIndex+2],e!==(~n&65535))return S5;for(t.sourceIndex+=4,r=e;r;--r)t.dest[t.destLen++]=t.source[t.sourceIndex++];return t.bitcount=0,GC}function _se(t,e){var n=new pse(t,e),r,s,i;do{switch(r=vse(n),s=ll(n,2,0),s){case 0:i=bse(n);break;case 1:i=Yk(n,E5,C5);break;case 2:yse(n,n.ltree,n.dtree),i=Yk(n,n.ltree,n.dtree);break;default:i=S5}if(i!==GC)throw new Error("Data error")}while(!r);return n.destLen<n.dest.length?typeof n.dest.slice=="function"?n.dest.slice(0,n.destLen):n.dest.subarray(0,n.destLen):n.dest}gse(E5,C5);A5(WC,jC,4,3);A5(T5,M5,2,1);WC[28]=0;jC[28]=258;var wse=_se;function Jh(t,e,n,r,s){return Math.pow(1-s,3)*t+3*Math.pow(1-s,2)*s*e+3*(1-s)*Math.pow(s,2)*n+Math.pow(s,3)*r}function ju(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}ju.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};ju.prototype.addPoint=function(t,e){typeof t=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof e=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))};ju.prototype.addX=function(t){this.addPoint(t,null)};ju.prototype.addY=function(t){this.addPoint(null,t)};ju.prototype.addBezier=function(t,e,n,r,s,i,o,a){var l=[t,e],c=[n,r],u=[s,i],d=[o,a];this.addPoint(t,e),this.addPoint(o,a);for(var h=0;h<=1;h++){var f=6*l[h]-12*c[h]+6*u[h],m=-3*l[h]+9*c[h]-9*u[h]+3*d[h],v=3*c[h]-3*l[h];if(m===0){if(f===0)continue;var y=-v/f;0<y&&y<1&&(h===0&&this.addX(Jh(l[h],c[h],u[h],d[h],y)),h===1&&this.addY(Jh(l[h],c[h],u[h],d[h],y)));continue}var g=Math.pow(f,2)-4*v*m;if(!(g<0)){var S=(-f+Math.sqrt(g))/(2*m);0<S&&S<1&&(h===0&&this.addX(Jh(l[h],c[h],u[h],d[h],S)),h===1&&this.addY(Jh(l[h],c[h],u[h],d[h],S)));var _=(-f-Math.sqrt(g))/(2*m);0<_&&_<1&&(h===0&&this.addX(Jh(l[h],c[h],u[h],d[h],_)),h===1&&this.addY(Jh(l[h],c[h],u[h],d[h],_)))}}};ju.prototype.addQuad=function(t,e,n,r,s,i){var o=t+.6666666666666666*(n-t),a=e+2/3*(r-e),l=o+1/3*(s-t),c=a+1/3*(i-e);this.addBezier(t,e,o,a,l,c,s,i)};function Ys(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}Ys.prototype.moveTo=function(t,e){this.commands.push({type:"M",x:t,y:e})};Ys.prototype.lineTo=function(t,e){this.commands.push({type:"L",x:t,y:e})};Ys.prototype.curveTo=Ys.prototype.bezierCurveTo=function(t,e,n,r,s,i){this.commands.push({type:"C",x1:t,y1:e,x2:n,y2:r,x:s,y:i})};Ys.prototype.quadTo=Ys.prototype.quadraticCurveTo=function(t,e,n,r){this.commands.push({type:"Q",x1:t,y1:e,x:n,y:r})};Ys.prototype.close=Ys.prototype.closePath=function(){this.commands.push({type:"Z"})};Ys.prototype.extend=function(t){if(t.commands)t=t.commands;else if(t instanceof ju){var e=t;this.moveTo(e.x1,e.y1),this.lineTo(e.x2,e.y1),this.lineTo(e.x2,e.y2),this.lineTo(e.x1,e.y2),this.close();return}Array.prototype.push.apply(this.commands,t)};Ys.prototype.getBoundingBox=function(){for(var t=new ju,e=0,n=0,r=0,s=0,i=0;i<this.commands.length;i++){var o=this.commands[i];switch(o.type){case"M":t.addPoint(o.x,o.y),e=r=o.x,n=s=o.y;break;case"L":t.addPoint(o.x,o.y),r=o.x,s=o.y;break;case"Q":t.addQuad(r,s,o.x1,o.y1,o.x,o.y),r=o.x,s=o.y;break;case"C":t.addBezier(r,s,o.x1,o.y1,o.x2,o.y2,o.x,o.y),r=o.x,s=o.y;break;case"Z":r=e,s=n;break;default:throw new Error("Unexpected path command "+o.type)}}return t.isEmpty()&&t.addPoint(0,0),t};Ys.prototype.draw=function(t){t.beginPath();for(var e=0;e<this.commands.length;e+=1){var n=this.commands[e];n.type==="M"?t.moveTo(n.x,n.y):n.type==="L"?t.lineTo(n.x,n.y):n.type==="C"?t.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):n.type==="Q"?t.quadraticCurveTo(n.x1,n.y1,n.x,n.y):n.type==="Z"&&t.closePath()}this.fill&&(t.fillStyle=this.fill,t.fill()),this.stroke&&(t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke())};Ys.prototype.toPathData=function(t){t=t!==void 0?t:2;function e(o){return Math.round(o)===o?""+Math.round(o):o.toFixed(t)}function n(){for(var o=arguments,a="",l=0;l<arguments.length;l+=1){var c=o[l];c>=0&&l>0&&(a+=" "),a+=e(c)}return a}for(var r="",s=0;s<this.commands.length;s+=1){var i=this.commands[s];i.type==="M"?r+="M"+n(i.x,i.y):i.type==="L"?r+="L"+n(i.x,i.y):i.type==="C"?r+="C"+n(i.x1,i.y1,i.x2,i.y2,i.x,i.y):i.type==="Q"?r+="Q"+n(i.x1,i.y1,i.x,i.y):i.type==="Z"&&(r+="Z")}return r};Ys.prototype.toSVG=function(t){var e='<path d="';return e+=this.toPathData(t),e+='"',this.fill&&this.fill!=="black"&&(this.fill===null?e+=' fill="none"':e+=' fill="'+this.fill+'"'),this.stroke&&(e+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),e+="/>",e};Ys.prototype.toDOMElement=function(t){var e=this.toPathData(t),n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",e),n};function k5(t){throw new Error(t)}function Xk(t,e){t||k5(e)}var jn={fail:k5,argument:Xk,assert:Xk},Zk=32768,Jk=2147483648,ap={},fn={},qn={};function ja(t){return function(){return t}}fn.BYTE=function(t){return jn.argument(t>=0&&t<=255,"Byte value should be between 0 and 255."),[t]};qn.BYTE=ja(1);fn.CHAR=function(t){return[t.charCodeAt(0)]};qn.CHAR=ja(1);fn.CHARARRAY=function(t){typeof t>"u"&&(t="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var e=[],n=0;n<t.length;n+=1)e[n]=t.charCodeAt(n);return e};qn.CHARARRAY=function(t){return typeof t>"u"?0:t.length};fn.USHORT=function(t){return[t>>8&255,t&255]};qn.USHORT=ja(2);fn.SHORT=function(t){return t>=Zk&&(t=-(2*Zk-t)),[t>>8&255,t&255]};qn.SHORT=ja(2);fn.UINT24=function(t){return[t>>16&255,t>>8&255,t&255]};qn.UINT24=ja(3);fn.ULONG=function(t){return[t>>24&255,t>>16&255,t>>8&255,t&255]};qn.ULONG=ja(4);fn.LONG=function(t){return t>=Jk&&(t=-(2*Jk-t)),[t>>24&255,t>>16&255,t>>8&255,t&255]};qn.LONG=ja(4);fn.FIXED=fn.ULONG;qn.FIXED=qn.ULONG;fn.FWORD=fn.SHORT;qn.FWORD=qn.SHORT;fn.UFWORD=fn.USHORT;qn.UFWORD=qn.USHORT;fn.LONGDATETIME=function(t){return[0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255]};qn.LONGDATETIME=ja(8);fn.TAG=function(t){return jn.argument(t.length===4,"Tag should be exactly 4 ASCII characters."),[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]};qn.TAG=ja(4);fn.Card8=fn.BYTE;qn.Card8=qn.BYTE;fn.Card16=fn.USHORT;qn.Card16=qn.USHORT;fn.OffSize=fn.BYTE;qn.OffSize=qn.BYTE;fn.SID=fn.USHORT;qn.SID=qn.USHORT;fn.NUMBER=function(t){return t>=-107&&t<=107?[t+139]:t>=108&&t<=1131?(t=t-108,[(t>>8)+247,t&255]):t>=-1131&&t<=-108?(t=-t-108,[(t>>8)+251,t&255]):t>=-32768&&t<=32767?fn.NUMBER16(t):fn.NUMBER32(t)};qn.NUMBER=function(t){return fn.NUMBER(t).length};fn.NUMBER16=function(t){return[28,t>>8&255,t&255]};qn.NUMBER16=ja(3);fn.NUMBER32=function(t){return[29,t>>24&255,t>>16&255,t>>8&255,t&255]};qn.NUMBER32=ja(5);fn.REAL=function(t){var e=t.toString(),n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(e);if(n){var r=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));e=(Math.round(t*r)/r).toString()}for(var s="",i=0,o=e.length;i<o;i+=1){var a=e[i];a==="e"?s+=e[++i]==="-"?"c":"b":a==="."?s+="a":a==="-"?s+="e":s+=a}s+=s.length&1?"f":"ff";for(var l=[30],c=0,u=s.length;c<u;c+=2)l.push(parseInt(s.substr(c,2),16));return l};qn.REAL=function(t){return fn.REAL(t).length};fn.NAME=fn.CHARARRAY;qn.NAME=qn.CHARARRAY;fn.STRING=fn.CHARARRAY;qn.STRING=qn.CHARARRAY;ap.UTF8=function(t,e,n){for(var r=[],s=n,i=0;i<s;i++,e+=1)r[i]=t.getUint8(e);return String.fromCharCode.apply(null,r)};ap.UTF16=function(t,e,n){for(var r=[],s=n/2,i=0;i<s;i++,e+=2)r[i]=t.getUint16(e);return String.fromCharCode.apply(null,r)};fn.UTF16=function(t){for(var e=[],n=0;n<t.length;n+=1){var r=t.charCodeAt(n);e[e.length]=r>>8&255,e[e.length]=r&255}return e};qn.UTF16=function(t){return t.length*2};var p2={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};ap.MACSTRING=function(t,e,n,r){var s=p2[r];if(s!==void 0){for(var i="",o=0;o<n;o++){var a=t.getUint8(e+o);a<=127?i+=String.fromCharCode(a):i+=s[a&127]}return i}};var G0=typeof WeakMap=="function"&&new WeakMap,W0,xse=function(t){if(!W0){W0={};for(var e in p2)W0[e]=new String(e)}var n=W0[t];if(n!==void 0){if(G0){var r=G0.get(n);if(r!==void 0)return r}var s=p2[t];if(s!==void 0){for(var i={},o=0;o<s.length;o++)i[s.charCodeAt(o)]=o+128;return G0&&G0.set(n,i),i}}};fn.MACSTRING=function(t,e){var n=xse(e);if(n!==void 0){for(var r=[],s=0;s<t.length;s++){var i=t.charCodeAt(s);if(i>=128&&(i=n[i],i===void 0))return;r[s]=i}return r}};qn.MACSTRING=function(t,e){var n=fn.MACSTRING(t,e);return n!==void 0?n.length:0};function m2(t){return t>=-128&&t<=127}function Sse(t,e,n){for(var r=0,s=t.length;e<s&&r<64&&t[e]===0;)++e,++r;return n.push(128|r-1),e}function Ese(t,e,n){for(var r=0,s=t.length,i=e;i<s&&r<64;){var o=t[i];if(!m2(o)||o===0&&i+1<s&&t[i+1]===0)break;++i,++r}n.push(r-1);for(var a=e;a<i;++a)n.push(t[a]+256&255);return i}function Cse(t,e,n){for(var r=0,s=t.length,i=e;i<s&&r<64;){var o=t[i];if(o===0||m2(o)&&i+1<s&&m2(t[i+1]))break;++i,++r}n.push(64|r-1);for(var a=e;a<i;++a){var l=t[a];n.push(l+65536>>8&255,l+256&255)}return i}fn.VARDELTAS=function(t){for(var e=0,n=[];e<t.length;){var r=t[e];r===0?e=Sse(t,e,n):r>=-128&&r<=127?e=Ese(t,e,n):e=Cse(t,e,n)}return n};fn.INDEX=function(t){for(var e=1,n=[e],r=[],s=0;s<t.length;s+=1){var i=fn.OBJECT(t[s]);Array.prototype.push.apply(r,i),e+=i.length,n.push(e)}if(r.length===0)return[0,0];for(var o=[],a=1+Math.floor(Math.log(e)/Math.log(2))/8|0,l=[void 0,fn.BYTE,fn.USHORT,fn.UINT24,fn.ULONG][a],c=0;c<n.length;c+=1){var u=l(n[c]);Array.prototype.push.apply(o,u)}return Array.prototype.concat(fn.Card16(t.length),fn.OffSize(a),o,r)};qn.INDEX=function(t){return fn.INDEX(t).length};fn.DICT=function(t){for(var e=[],n=Object.keys(t),r=n.length,s=0;s<r;s+=1){var i=parseInt(n[s],0),o=t[i];e=e.concat(fn.OPERAND(o.value,o.type)),e=e.concat(fn.OPERATOR(i))}return e};qn.DICT=function(t){return fn.DICT(t).length};fn.OPERATOR=function(t){return t<1200?[t]:[12,t-1200]};fn.OPERAND=function(t,e){var n=[];if(Array.isArray(e))for(var r=0;r<e.length;r+=1)jn.argument(t.length===e.length,"Not enough arguments given for type"+e),n=n.concat(fn.OPERAND(t[r],e[r]));else if(e==="SID")n=n.concat(fn.NUMBER(t));else if(e==="offset")n=n.concat(fn.NUMBER32(t));else if(e==="number")n=n.concat(fn.NUMBER(t));else if(e==="real")n=n.concat(fn.REAL(t));else throw new Error("Unknown operand type "+e);return n};fn.OP=fn.BYTE;qn.OP=qn.BYTE;var j0=typeof WeakMap=="function"&&new WeakMap;fn.CHARSTRING=function(t){if(j0){var e=j0.get(t);if(e!==void 0)return e}for(var n=[],r=t.length,s=0;s<r;s+=1){var i=t[s];n=n.concat(fn[i.type](i.value))}return j0&&j0.set(t,n),n};qn.CHARSTRING=function(t){return fn.CHARSTRING(t).length};fn.OBJECT=function(t){var e=fn[t.type];return jn.argument(e!==void 0,"No encoding function for type "+t.type),e(t.value)};qn.OBJECT=function(t){var e=qn[t.type];return jn.argument(e!==void 0,"No sizeOf function for type "+t.type),e(t.value)};fn.TABLE=function(t){for(var e=[],n=t.fields.length,r=[],s=[],i=0;i<n;i+=1){var o=t.fields[i],a=fn[o.type];jn.argument(a!==void 0,"No encoding function for field type "+o.type+" ("+o.name+")");var l=t[o.name];l===void 0&&(l=o.value);var c=a(l);o.type==="TABLE"?(s.push(e.length),e=e.concat([0,0]),r.push(c)):e=e.concat(c)}for(var u=0;u<r.length;u+=1){var d=s[u],h=e.length;jn.argument(h<65536,"Table "+t.tableName+" too big."),e[d]=h>>8,e[d+1]=h&255,e=e.concat(r[u])}return e};qn.TABLE=function(t){for(var e=0,n=t.fields.length,r=0;r<n;r+=1){var s=t.fields[r],i=qn[s.type];jn.argument(i!==void 0,"No sizeOf function for field type "+s.type+" ("+s.name+")");var o=t[s.name];o===void 0&&(o=s.value),e+=i(o),s.type==="TABLE"&&(e+=2)}return e};fn.RECORD=fn.TABLE;qn.RECORD=qn.TABLE;fn.LITERAL=function(t){return t};qn.LITERAL=function(t){return t.length};function ti(t,e,n){if(e.length&&(e[0].name!=="coverageFormat"||e[0].value===1))for(var r=0;r<e.length;r+=1){var s=e[r];this[s.name]=s.value}if(this.tableName=t,this.fields=e,n)for(var i=Object.keys(n),o=0;o<i.length;o+=1){var a=i[o],l=n[a];this[a]!==void 0&&(this[a]=l)}}ti.prototype.encode=function(){return fn.TABLE(this)};ti.prototype.sizeOf=function(){return qn.TABLE(this)};function kg(t,e,n){n===void 0&&(n=e.length);var r=new Array(e.length+1);r[0]={name:t+"Count",type:"USHORT",value:n};for(var s=0;s<e.length;s++)r[s+1]={name:t+s,type:"USHORT",value:e[s]};return r}function g2(t,e,n){var r=e.length,s=new Array(r+1);s[0]={name:t+"Count",type:"USHORT",value:r};for(var i=0;i<r;i++)s[i+1]={name:t+i,type:"TABLE",value:n(e[i],i)};return s}function Ig(t,e,n){var r=e.length,s=[];s[0]={name:t+"Count",type:"USHORT",value:r};for(var i=0;i<r;i++)s=s.concat(n(e[i],i));return s}function kb(t){t.format===1?ti.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(kg("glyph",t.glyphs))):t.format===2?ti.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(Ig("rangeRecord",t.ranges,function(e){return[{name:"startGlyphID",type:"USHORT",value:e.start},{name:"endGlyphID",type:"USHORT",value:e.end},{name:"startCoverageIndex",type:"USHORT",value:e.index}]}))):jn.assert(!1,"Coverage format must be 1 or 2.")}kb.prototype=Object.create(ti.prototype);kb.prototype.constructor=kb;function Ib(t){ti.call(this,"scriptListTable",Ig("scriptRecord",t,function(e,n){var r=e.script,s=r.defaultLangSys;return jn.assert(!!s,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+n,type:"TAG",value:e.tag},{name:"script"+n,type:"TABLE",value:new ti("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ti("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:s.reqFeatureIndex}].concat(kg("featureIndex",s.featureIndexes)))}].concat(Ig("langSys",r.langSysRecords,function(i,o){var a=i.langSys;return[{name:"langSysTag"+o,type:"TAG",value:i.tag},{name:"langSys"+o,type:"TABLE",value:new ti("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:a.reqFeatureIndex}].concat(kg("featureIndex",a.featureIndexes)))}]})))}]}))}Ib.prototype=Object.create(ti.prototype);Ib.prototype.constructor=Ib;function Pb(t){ti.call(this,"featureListTable",Ig("featureRecord",t,function(e,n){var r=e.feature;return[{name:"featureTag"+n,type:"TAG",value:e.tag},{name:"feature"+n,type:"TABLE",value:new ti("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(kg("lookupListIndex",r.lookupListIndexes)))}]}))}Pb.prototype=Object.create(ti.prototype);Pb.prototype.constructor=Pb;function Rb(t,e){ti.call(this,"lookupListTable",g2("lookup",t,function(n){var r=e[n.lookupType];return jn.assert(!!r,"Unable to write GSUB lookup type "+n.lookupType+" tables."),new ti("lookupTable",[{name:"lookupType",type:"USHORT",value:n.lookupType},{name:"lookupFlag",type:"USHORT",value:n.lookupFlag}].concat(g2("subtable",n.subtables,r)))}))}Rb.prototype=Object.create(ti.prototype);Rb.prototype.constructor=Rb;var vn={Table:ti,Record:ti,Coverage:kb,ScriptList:Ib,FeatureList:Pb,LookupList:Rb,ushortList:kg,tableList:g2,recordList:Ig};function Qk(t,e){return t.getUint8(e)}function Lb(t,e){return t.getUint16(e,!1)}function Tse(t,e){return t.getInt16(e,!1)}function KC(t,e){return t.getUint32(e,!1)}function I5(t,e){var n=t.getInt16(e,!1),r=t.getUint16(e+2,!1);return n+r/65535}function Mse(t,e){for(var n="",r=e;r<e+4;r+=1)n+=String.fromCharCode(t.getInt8(r));return n}function Ase(t,e,n){for(var r=0,s=0;s<n;s+=1)r<<=8,r+=t.getUint8(e+s);return r}function kse(t,e,n){for(var r=[],s=e;s<n;s+=1)r.push(t.getUint8(s));return r}function Ise(t){for(var e="",n=0;n<t.length;n+=1)e+=String.fromCharCode(t[n]);return e}var Pse={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ft(t,e){this.data=t,this.offset=e,this.relativeOffset=0}ft.prototype.parseByte=function(){var t=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t};ft.prototype.parseChar=function(){var t=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t};ft.prototype.parseCard8=ft.prototype.parseByte;ft.prototype.parseUShort=function(){var t=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t};ft.prototype.parseCard16=ft.prototype.parseUShort;ft.prototype.parseSID=ft.prototype.parseUShort;ft.prototype.parseOffset16=ft.prototype.parseUShort;ft.prototype.parseShort=function(){var t=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t};ft.prototype.parseF2Dot14=function(){var t=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,t};ft.prototype.parseULong=function(){var t=KC(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t};ft.prototype.parseOffset32=ft.prototype.parseULong;ft.prototype.parseFixed=function(){var t=I5(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t};ft.prototype.parseString=function(t){var e=this.data,n=this.offset+this.relativeOffset,r="";this.relativeOffset+=t;for(var s=0;s<t;s++)r+=String.fromCharCode(e.getUint8(n+s));return r};ft.prototype.parseTag=function(){return this.parseString(4)};ft.prototype.parseLongDateTime=function(){var t=KC(this.data,this.offset+this.relativeOffset+4);return t-=2082844800,this.relativeOffset+=8,t};ft.prototype.parseVersion=function(t){var e=Lb(this.data,this.offset+this.relativeOffset),n=Lb(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,t===void 0&&(t=4096),e+n/t/10};ft.prototype.skip=function(t,e){e===void 0&&(e=1),this.relativeOffset+=Pse[t]*e};ft.prototype.parseULongList=function(t){t===void 0&&(t=this.parseULong());for(var e=new Array(t),n=this.data,r=this.offset+this.relativeOffset,s=0;s<t;s++)e[s]=n.getUint32(r),r+=4;return this.relativeOffset+=t*4,e};ft.prototype.parseOffset16List=ft.prototype.parseUShortList=function(t){t===void 0&&(t=this.parseUShort());for(var e=new Array(t),n=this.data,r=this.offset+this.relativeOffset,s=0;s<t;s++)e[s]=n.getUint16(r),r+=2;return this.relativeOffset+=t*2,e};ft.prototype.parseShortList=function(t){for(var e=new Array(t),n=this.data,r=this.offset+this.relativeOffset,s=0;s<t;s++)e[s]=n.getInt16(r),r+=2;return this.relativeOffset+=t*2,e};ft.prototype.parseByteList=function(t){for(var e=new Array(t),n=this.data,r=this.offset+this.relativeOffset,s=0;s<t;s++)e[s]=n.getUint8(r++);return this.relativeOffset+=t,e};ft.prototype.parseList=function(t,e){e||(e=t,t=this.parseUShort());for(var n=new Array(t),r=0;r<t;r++)n[r]=e.call(this);return n};ft.prototype.parseList32=function(t,e){e||(e=t,t=this.parseULong());for(var n=new Array(t),r=0;r<t;r++)n[r]=e.call(this);return n};ft.prototype.parseRecordList=function(t,e){e||(e=t,t=this.parseUShort());for(var n=new Array(t),r=Object.keys(e),s=0;s<t;s++){for(var i={},o=0;o<r.length;o++){var a=r[o],l=e[a];i[a]=l.call(this)}n[s]=i}return n};ft.prototype.parseRecordList32=function(t,e){e||(e=t,t=this.parseULong());for(var n=new Array(t),r=Object.keys(e),s=0;s<t;s++){for(var i={},o=0;o<r.length;o++){var a=r[o],l=e[a];i[a]=l.call(this)}n[s]=i}return n};ft.prototype.parseStruct=function(t){if(typeof t=="function")return t.call(this);for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var s=e[r],i=t[s];n[s]=i.call(this)}return n};ft.prototype.parseValueRecord=function(t){if(t===void 0&&(t=this.parseUShort()),t!==0){var e={};return t&1&&(e.xPlacement=this.parseShort()),t&2&&(e.yPlacement=this.parseShort()),t&4&&(e.xAdvance=this.parseShort()),t&8&&(e.yAdvance=this.parseShort()),t&16&&(e.xPlaDevice=void 0,this.parseShort()),t&32&&(e.yPlaDevice=void 0,this.parseShort()),t&64&&(e.xAdvDevice=void 0,this.parseShort()),t&128&&(e.yAdvDevice=void 0,this.parseShort()),e}};ft.prototype.parseValueRecordList=function(){for(var t=this.parseUShort(),e=this.parseUShort(),n=new Array(e),r=0;r<e;r++)n[r]=this.parseValueRecord(t);return n};ft.prototype.parsePointer=function(t){var e=this.parseOffset16();if(e>0)return new ft(this.data,this.offset+e).parseStruct(t)};ft.prototype.parsePointer32=function(t){var e=this.parseOffset32();if(e>0)return new ft(this.data,this.offset+e).parseStruct(t)};ft.prototype.parseListOfLists=function(t){for(var e=this.parseOffset16List(),n=e.length,r=this.relativeOffset,s=new Array(n),i=0;i<n;i++){var o=e[i];if(o===0){s[i]=void 0;continue}if(this.relativeOffset=o,t){for(var a=this.parseOffset16List(),l=new Array(a.length),c=0;c<a.length;c++)this.relativeOffset=o+a[c],l[c]=t.call(this);s[i]=l}else s[i]=this.parseUShortList()}return this.relativeOffset=r,s};ft.prototype.parseCoverage=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort(),n=this.parseUShort();if(e===1)return{format:1,glyphs:this.parseUShortList(n)};if(e===2){for(var r=new Array(n),s=0;s<n;s++)r[s]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}}throw new Error("0x"+t.toString(16)+": Coverage format must be 1 or 2.")};ft.prototype.parseClassDef=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort();if(e===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(e===2)return{format:2,ranges:this.parseRecordList({start:ft.uShort,end:ft.uShort,classId:ft.uShort})};throw new Error("0x"+t.toString(16)+": ClassDef format must be 1 or 2.")};ft.list=function(t,e){return function(){return this.parseList(t,e)}};ft.list32=function(t,e){return function(){return this.parseList32(t,e)}};ft.recordList=function(t,e){return function(){return this.parseRecordList(t,e)}};ft.recordList32=function(t,e){return function(){return this.parseRecordList32(t,e)}};ft.pointer=function(t){return function(){return this.parsePointer(t)}};ft.pointer32=function(t){return function(){return this.parsePointer32(t)}};ft.tag=ft.prototype.parseTag;ft.byte=ft.prototype.parseByte;ft.uShort=ft.offset16=ft.prototype.parseUShort;ft.uShortList=ft.prototype.parseUShortList;ft.uLong=ft.offset32=ft.prototype.parseULong;ft.uLongList=ft.prototype.parseULongList;ft.struct=ft.prototype.parseStruct;ft.coverage=ft.prototype.parseCoverage;ft.classDef=ft.prototype.parseClassDef;var eI={reserved:ft.uShort,reqFeatureIndex:ft.uShort,featureIndexes:ft.uShortList};ft.prototype.parseScriptList=function(){return this.parsePointer(ft.recordList({tag:ft.tag,script:ft.pointer({defaultLangSys:ft.pointer(eI),langSysRecords:ft.recordList({tag:ft.tag,langSys:ft.pointer(eI)})})}))||[]};ft.prototype.parseFeatureList=function(){return this.parsePointer(ft.recordList({tag:ft.tag,feature:ft.pointer({featureParams:ft.offset16,lookupListIndexes:ft.uShortList})}))||[]};ft.prototype.parseLookupList=function(t){return this.parsePointer(ft.list(ft.pointer(function(){var e=this.parseUShort();jn.argument(1<=e&&e<=9,"GPOS/GSUB lookup type "+e+" unknown.");var n=this.parseUShort(),r=n&16;return{lookupType:e,lookupFlag:n,subtables:this.parseList(ft.pointer(t[e])),markFilteringSet:r?this.parseUShort():void 0}})))||[]};ft.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var t=this.parseUShort(),e=this.parseUShort();jn.argument(t===1&&e<1,"GPOS/GSUB feature variations table unknown.");var n=this.parseRecordList32({conditionSetOffset:ft.offset32,featureTableSubstitutionOffset:ft.offset32});return n})||[]};var En={getByte:Qk,getCard8:Qk,getUShort:Lb,getCard16:Lb,getShort:Tse,getULong:KC,getFixed:I5,getTag:Mse,getOffset:Ase,getBytes:kse,bytesToString:Ise,Parser:ft};function Rse(t,e){e.parseUShort(),t.length=e.parseULong(),t.language=e.parseULong();var n;t.groupCount=n=e.parseULong(),t.glyphIndexMap={};for(var r=0;r<n;r+=1)for(var s=e.parseULong(),i=e.parseULong(),o=e.parseULong(),a=s;a<=i;a+=1)t.glyphIndexMap[a]=o,o++}function Lse(t,e,n,r,s){t.length=e.parseUShort(),t.language=e.parseUShort();var i;t.segCount=i=e.parseUShort()>>1,e.skip("uShort",3),t.glyphIndexMap={};for(var o=new En.Parser(n,r+s+14),a=new En.Parser(n,r+s+16+i*2),l=new En.Parser(n,r+s+16+i*4),c=new En.Parser(n,r+s+16+i*6),u=r+s+16+i*8,d=0;d<i-1;d+=1)for(var h=void 0,f=o.parseUShort(),m=a.parseUShort(),v=l.parseShort(),y=c.parseUShort(),g=m;g<=f;g+=1)y!==0?(u=c.offset+c.relativeOffset-2,u+=y,u+=(g-m)*2,h=En.getUShort(n,u),h!==0&&(h=h+v&65535)):h=g+v&65535,t.glyphIndexMap[g]=h}function Ose(t,e){var n={};n.version=En.getUShort(t,e),jn.argument(n.version===0,"cmap table version should be 0."),n.numTables=En.getUShort(t,e+2);for(var r=-1,s=n.numTables-1;s>=0;s-=1){var i=En.getUShort(t,e+4+s*8),o=En.getUShort(t,e+4+s*8+2);if(i===3&&(o===0||o===1||o===10)||i===0&&(o===0||o===1||o===2||o===3||o===4)){r=En.getULong(t,e+4+s*8+4);break}}if(r===-1)throw new Error("No valid cmap sub-tables found.");var a=new En.Parser(t,e+r);if(n.format=a.parseUShort(),n.format===12)Rse(n,a);else if(n.format===4)Lse(n,a,t,e,r);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+n.format+").");return n}function Nse(t,e,n){t.segments.push({end:e,start:e,delta:-(e-n),offset:0,glyphIndex:n})}function Dse(t){t.segments.push({end:65535,start:65535,delta:1,offset:0})}function Fse(t){var e=!0,n;for(n=t.length-1;n>0;n-=1){var r=t.get(n);if(r.unicode>65535){console.log("Adding CMAP format 12 (needed!)"),e=!1;break}}var s=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:e?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:e?12:20}];e||(s=s.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),s=s.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var i=new vn.Table("cmap",s);for(i.segments=[],n=0;n<t.length;n+=1){for(var o=t.get(n),a=0;a<o.unicodes.length;a+=1)Nse(i,o.unicodes[a],n);i.segments=i.segments.sort(function(S,_){return S.start-_.start})}Dse(i);var l=i.segments.length,c=0,u=[],d=[],h=[],f=[],m=[],v=[];for(n=0;n<l;n+=1){var y=i.segments[n];y.end<=65535&&y.start<=65535?(u=u.concat({name:"end_"+n,type:"USHORT",value:y.end}),d=d.concat({name:"start_"+n,type:"USHORT",value:y.start}),h=h.concat({name:"idDelta_"+n,type:"SHORT",value:y.delta}),f=f.concat({name:"idRangeOffset_"+n,type:"USHORT",value:y.offset}),y.glyphId!==void 0&&(m=m.concat({name:"glyph_"+n,type:"USHORT",value:y.glyphId}))):c+=1,!e&&y.glyphIndex!==void 0&&(v=v.concat({name:"cmap12Start_"+n,type:"ULONG",value:y.start}),v=v.concat({name:"cmap12End_"+n,type:"ULONG",value:y.end}),v=v.concat({name:"cmap12Glyph_"+n,type:"ULONG",value:y.glyphIndex}))}if(i.segCountX2=(l-c)*2,i.searchRange=Math.pow(2,Math.floor(Math.log(l-c)/Math.log(2)))*2,i.entrySelector=Math.log(i.searchRange/2)/Math.log(2),i.rangeShift=i.segCountX2-i.searchRange,i.fields=i.fields.concat(u),i.fields.push({name:"reservedPad",type:"USHORT",value:0}),i.fields=i.fields.concat(d),i.fields=i.fields.concat(h),i.fields=i.fields.concat(f),i.fields=i.fields.concat(m),i.cmap4Length=14+u.length*2+2+d.length*2+h.length*2+f.length*2+m.length*2,!e){var g=16+v.length*4;i.cmap12Offset=12+2*2+4+i.cmap4Length,i.fields=i.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:g},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:v.length/3}]),i.fields=i.fields.concat(v)}return i}var P5={parse:Ose,make:Fse},jy=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Bse=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Use=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Cd=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function R5(t){this.font=t}R5.prototype.charToGlyphIndex=function(t){var e=t.codePointAt(0),n=this.font.glyphs;if(n){for(var r=0;r<n.length;r+=1)for(var s=n.get(r),i=0;i<s.unicodes.length;i+=1)if(s.unicodes[i]===e)return r}return null};function L5(t){this.cmap=t}L5.prototype.charToGlyphIndex=function(t){return this.cmap.glyphIndexMap[t.codePointAt(0)]||0};function Ob(t,e){this.encoding=t,this.charset=e}Ob.prototype.charToGlyphIndex=function(t){var e=t.codePointAt(0),n=this.encoding[e];return this.charset.indexOf(n)};function qC(t){switch(t.version){case 1:this.names=Cd.slice();break;case 2:this.names=new Array(t.numberOfGlyphs);for(var e=0;e<t.numberOfGlyphs;e++)t.glyphNameIndex[e]<Cd.length?this.names[e]=Cd[t.glyphNameIndex[e]]:this.names[e]=t.names[t.glyphNameIndex[e]-Cd.length];break;case 2.5:this.names=new Array(t.numberOfGlyphs);for(var n=0;n<t.numberOfGlyphs;n++)this.names[n]=Cd[n+t.glyphNameIndex[n]];break;case 3:this.names=[];break;default:this.names=[];break}}qC.prototype.nameToGlyphIndex=function(t){return this.names.indexOf(t)};qC.prototype.glyphIndexToName=function(t){return this.names[t]};function zse(t){for(var e,n=t.tables.cmap.glyphIndexMap,r=Object.keys(n),s=0;s<r.length;s+=1){var i=r[s],o=n[i];e=t.glyphs.get(o),e.addUnicode(parseInt(i))}for(var a=0;a<t.glyphs.length;a+=1)e=t.glyphs.get(a),t.cffEncoding?t.isCIDFont?e.name="gid"+a:e.name=t.cffEncoding.charset[a]:t.glyphNames.names&&(e.name=t.glyphNames.glyphIndexToName(a))}function $se(t){t._IndexToUnicodeMap={};for(var e=t.tables.cmap.glyphIndexMap,n=Object.keys(e),r=0;r<n.length;r+=1){var s=n[r],i=e[s];t._IndexToUnicodeMap[i]===void 0?t._IndexToUnicodeMap[i]={unicodes:[parseInt(s)]}:t._IndexToUnicodeMap[i].unicodes.push(parseInt(s))}}function Vse(t,e){e.lowMemory?$se(t):zse(t)}function Hse(t,e,n,r,s){t.beginPath(),t.moveTo(e,n),t.lineTo(r,s),t.stroke()}var dd={line:Hse};function Gse(t,e){var n=e||new Ys;return{configurable:!0,get:function(){return typeof n=="function"&&(n=n()),n},set:function(r){n=r}}}function aa(t){this.bindConstructorValues(t)}aa.prototype.bindConstructorValues=function(t){this.index=t.index||0,this.name=t.name||null,this.unicode=t.unicode||void 0,this.unicodes=t.unicodes||t.unicode!==void 0?[t.unicode]:[],"xMin"in t&&(this.xMin=t.xMin),"yMin"in t&&(this.yMin=t.yMin),"xMax"in t&&(this.xMax=t.xMax),"yMax"in t&&(this.yMax=t.yMax),"advanceWidth"in t&&(this.advanceWidth=t.advanceWidth),Object.defineProperty(this,"path",Gse(this,t.path))};aa.prototype.addUnicode=function(t){this.unicodes.length===0&&(this.unicode=t),this.unicodes.push(t)};aa.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};aa.prototype.getPath=function(t,e,n,r,s){t=t!==void 0?t:0,e=e!==void 0?e:0,n=n!==void 0?n:72;var i,o;r||(r={});var a=r.xScale,l=r.yScale;if(r.hinting&&s&&s.hinting&&(o=this.path&&s.hinting.exec(this,n)),o)i=s.hinting.getCommands(o),t=Math.round(t),e=Math.round(e),a=l=1;else{i=this.path.commands;var c=1/(this.path.unitsPerEm||1e3)*n;a===void 0&&(a=c),l===void 0&&(l=c)}for(var u=new Ys,d=0;d<i.length;d+=1){var h=i[d];h.type==="M"?u.moveTo(t+h.x*a,e+-h.y*l):h.type==="L"?u.lineTo(t+h.x*a,e+-h.y*l):h.type==="Q"?u.quadraticCurveTo(t+h.x1*a,e+-h.y1*l,t+h.x*a,e+-h.y*l):h.type==="C"?u.curveTo(t+h.x1*a,e+-h.y1*l,t+h.x2*a,e+-h.y2*l,t+h.x*a,e+-h.y*l):h.type==="Z"&&u.closePath()}return u};aa.prototype.getContours=function(){if(this.points===void 0)return[];for(var t=[],e=[],n=0;n<this.points.length;n+=1){var r=this.points[n];e.push(r),r.lastPointOfContour&&(t.push(e),e=[])}return jn.argument(e.length===0,"There are still points left in the current contour."),t};aa.prototype.getMetrics=function(){for(var t=this.path.commands,e=[],n=[],r=0;r<t.length;r+=1){var s=t[r];s.type!=="Z"&&(e.push(s.x),n.push(s.y)),(s.type==="Q"||s.type==="C")&&(e.push(s.x1),n.push(s.y1)),s.type==="C"&&(e.push(s.x2),n.push(s.y2))}var i={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,e),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(i.xMin)||(i.xMin=0),isFinite(i.xMax)||(i.xMax=this.advanceWidth),isFinite(i.yMin)||(i.yMin=0),isFinite(i.yMax)||(i.yMax=0),i.rightSideBearing=this.advanceWidth-i.leftSideBearing-(i.xMax-i.xMin),i};aa.prototype.draw=function(t,e,n,r,s){this.getPath(e,n,r,s).draw(t)};aa.prototype.drawPoints=function(t,e,n,r){function s(d,h,f,m){t.beginPath();for(var v=0;v<d.length;v+=1)t.moveTo(h+d[v].x*m,f+d[v].y*m),t.arc(h+d[v].x*m,f+d[v].y*m,2,0,Math.PI*2,!1);t.closePath(),t.fill()}e=e!==void 0?e:0,n=n!==void 0?n:0,r=r!==void 0?r:24;for(var i=1/this.path.unitsPerEm*r,o=[],a=[],l=this.path,c=0;c<l.commands.length;c+=1){var u=l.commands[c];u.x!==void 0&&o.push({x:u.x,y:-u.y}),u.x1!==void 0&&a.push({x:u.x1,y:-u.y1}),u.x2!==void 0&&a.push({x:u.x2,y:-u.y2})}t.fillStyle="blue",s(o,e,n,i),t.fillStyle="red",s(a,e,n,i)};aa.prototype.drawMetrics=function(t,e,n,r){var s;e=e!==void 0?e:0,n=n!==void 0?n:0,r=r!==void 0?r:24,s=1/this.path.unitsPerEm*r,t.lineWidth=1,t.strokeStyle="black",dd.line(t,e,-1e4,e,1e4),dd.line(t,-1e4,n,1e4,n);var i=this.xMin||0,o=this.yMin||0,a=this.xMax||0,l=this.yMax||0,c=this.advanceWidth||0;t.strokeStyle="blue",dd.line(t,e+i*s,-1e4,e+i*s,1e4),dd.line(t,e+a*s,-1e4,e+a*s,1e4),dd.line(t,-1e4,n+-o*s,1e4,n+-o*s),dd.line(t,-1e4,n+-l*s,1e4,n+-l*s),t.strokeStyle="green",dd.line(t,e+c*s,-1e4,e+c*s,1e4)};function K0(t,e,n){Object.defineProperty(t,e,{get:function(){return t.path,t[n]},set:function(r){t[n]=r},enumerable:!0,configurable:!0})}function YC(t,e){if(this.font=t,this.glyphs={},Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];r.path.unitsPerEm=t.unitsPerEm,this.glyphs[n]=r}this.length=e&&e.length||0}YC.prototype.get=function(t){if(this.glyphs[t]===void 0){this.font._push(t),typeof this.glyphs[t]=="function"&&(this.glyphs[t]=this.glyphs[t]());var e=this.glyphs[t],n=this.font._IndexToUnicodeMap[t];if(n)for(var r=0;r<n.unicodes.length;r++)e.addUnicode(n.unicodes[r]);this.font.cffEncoding?this.font.isCIDFont?e.name="gid"+t:e.name=this.font.cffEncoding.charset[t]:this.font.glyphNames.names&&(e.name=this.font.glyphNames.glyphIndexToName(t)),this.glyphs[t].advanceWidth=this.font._hmtxTableData[t].advanceWidth,this.glyphs[t].leftSideBearing=this.font._hmtxTableData[t].leftSideBearing}else typeof this.glyphs[t]=="function"&&(this.glyphs[t]=this.glyphs[t]());return this.glyphs[t]};YC.prototype.push=function(t,e){this.glyphs[t]=e,this.length++};function Wse(t,e){return new aa({index:e,font:t})}function jse(t,e,n,r,s,i){return function(){var o=new aa({index:e,font:t});return o.path=function(){n(o,r,s);var a=i(t.glyphs,o);return a.unitsPerEm=t.unitsPerEm,a},K0(o,"xMin","_xMin"),K0(o,"xMax","_xMax"),K0(o,"yMin","_yMin"),K0(o,"yMax","_yMax"),o}}function Kse(t,e,n,r){return function(){var s=new aa({index:e,font:t});return s.path=function(){var i=n(t,s,r);return i.unitsPerEm=t.unitsPerEm,i},s}}var vl={GlyphSet:YC,glyphLoader:Wse,ttfGlyphLoader:jse,cffGlyphLoader:Kse};function O5(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n+=1)if(!O5(t[n],e[n]))return!1;return!0}else return!1}function v2(t){var e;return t.length<1240?e=107:t.length<33900?e=1131:e=32768,e}function lu(t,e,n){var r=[],s=[],i=En.getCard16(t,e),o,a;if(i!==0){var l=En.getByte(t,e+2);o=e+(i+1)*l+2;for(var c=e+3,u=0;u<i+1;u+=1)r.push(En.getOffset(t,c,l)),c+=l;a=o+r[i]}else a=e+2;for(var d=0;d<r.length-1;d+=1){var h=En.getBytes(t,o+r[d],o+r[d+1]);n&&(h=n(h)),s.push(h)}return{objects:s,startOffset:e,endOffset:a}}function qse(t,e){var n=[],r=En.getCard16(t,e),s,i;if(r!==0){var o=En.getByte(t,e+2);s=e+(r+1)*o+2;for(var a=e+3,l=0;l<r+1;l+=1)n.push(En.getOffset(t,a,o)),a+=o;i=s+n[r]}else i=e+2;return{offsets:n,startOffset:e,endOffset:i}}function Yse(t,e,n,r,s){var i=En.getCard16(n,r),o=0;if(i!==0){var a=En.getByte(n,r+2);o=r+(i+1)*a+2}var l=En.getBytes(n,o+e[t],o+e[t+1]);return l}function Xse(t){for(var e="",n=15,r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var s=t.parseByte(),i=s>>4,o=s&15;if(i===n||(e+=r[i],o===n))break;e+=r[o]}return parseFloat(e)}function Zse(t,e){var n,r,s,i;if(e===28)return n=t.parseByte(),r=t.parseByte(),n<<8|r;if(e===29)return n=t.parseByte(),r=t.parseByte(),s=t.parseByte(),i=t.parseByte(),n<<24|r<<16|s<<8|i;if(e===30)return Xse(t);if(e>=32&&e<=246)return e-139;if(e>=247&&e<=250)return n=t.parseByte(),(e-247)*256+n+108;if(e>=251&&e<=254)return n=t.parseByte(),-(e-251)*256-n-108;throw new Error("Invalid b0 "+e)}function Jse(t){for(var e={},n=0;n<t.length;n+=1){var r=t[n][0],s=t[n][1],i=void 0;if(s.length===1?i=s[0]:i=s,e.hasOwnProperty(r)&&!isNaN(e[r]))throw new Error("Object "+e+" already has key "+r);e[r]=i}return e}function N5(t,e,n){e=e!==void 0?e:0;var r=new En.Parser(t,e),s=[],i=[];for(n=n!==void 0?n:t.length;r.relativeOffset<n;){var o=r.parseByte();o<=21?(o===12&&(o=1200+r.parseByte()),s.push([o,i]),i=[]):i.push(Zse(r,o))}return Jse(s)}function qm(t,e){return e<=390?e=jy[e]:e=t[e-391],e}function D5(t,e,n){for(var r={},s,i=0;i<e.length;i+=1){var o=e[i];if(Array.isArray(o.type)){var a=[];a.length=o.type.length;for(var l=0;l<o.type.length;l++)s=t[o.op]!==void 0?t[o.op][l]:void 0,s===void 0&&(s=o.value!==void 0&&o.value[l]!==void 0?o.value[l]:null),o.type[l]==="SID"&&(s=qm(n,s)),a[l]=s;r[o.name]=a}else s=t[o.op],s===void 0&&(s=o.value!==void 0?o.value:null),o.type==="SID"&&(s=qm(n,s)),r[o.name]=s}return r}function Qse(t,e){var n={};return n.formatMajor=En.getCard8(t,e),n.formatMinor=En.getCard8(t,e+1),n.size=En.getCard8(t,e+2),n.offsetSize=En.getCard8(t,e+3),n.startOffset=e,n.endOffset=e+4,n}var F5=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],B5=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function eie(t,e){var n=N5(t,0,t.byteLength);return D5(n,F5,e)}function U5(t,e,n,r){var s=N5(t,e,n);return D5(s,B5,r)}function tI(t,e,n,r){for(var s=[],i=0;i<n.length;i+=1){var o=new DataView(new Uint8Array(n[i]).buffer),a=eie(o,r);a._subrs=[],a._subrsBias=0,a._defaultWidthX=0,a._nominalWidthX=0;var l=a.private[0],c=a.private[1];if(l!==0&&c!==0){var u=U5(t,c+e,l,r);if(a._defaultWidthX=u.defaultWidthX,a._nominalWidthX=u.nominalWidthX,u.subrs!==0){var d=c+u.subrs,h=lu(t,d+e);a._subrs=h.objects,a._subrsBias=v2(a._subrs)}a._privateDict=u}s.push(a)}return s}function tie(t,e,n,r){var s,i,o=new En.Parser(t,e);n-=1;var a=[".notdef"],l=o.parseCard8();if(l===0)for(var c=0;c<n;c+=1)s=o.parseSID(),a.push(qm(r,s));else if(l===1)for(;a.length<=n;){s=o.parseSID(),i=o.parseCard8();for(var u=0;u<=i;u+=1)a.push(qm(r,s)),s+=1}else if(l===2)for(;a.length<=n;){s=o.parseSID(),i=o.parseCard16();for(var d=0;d<=i;d+=1)a.push(qm(r,s)),s+=1}else throw new Error("Unknown charset format "+l);return a}function nie(t,e,n){var r,s={},i=new En.Parser(t,e),o=i.parseCard8();if(o===0)for(var a=i.parseCard8(),l=0;l<a;l+=1)r=i.parseCard8(),s[r]=l;else if(o===1){var c=i.parseCard8();r=1;for(var u=0;u<c;u+=1)for(var d=i.parseCard8(),h=i.parseCard8(),f=d;f<=d+h;f+=1)s[f]=r,r+=1}else throw new Error("Unknown encoding format "+o);return new Ob(s,n)}function nI(t,e,n){var r,s,i,o,a=new Ys,l=[],c=0,u=!1,d=!1,h=0,f=0,m,v,y,g;if(t.isCIDFont){var S=t.tables.cff.topDict._fdSelect[e.index],_=t.tables.cff.topDict._fdArray[S];m=_._subrs,v=_._subrsBias,y=_._defaultWidthX,g=_._nominalWidthX}else m=t.tables.cff.topDict._subrs,v=t.tables.cff.topDict._subrsBias,y=t.tables.cff.topDict._defaultWidthX,g=t.tables.cff.topDict._nominalWidthX;var w=y;function E(I,k){d&&a.closePath(),a.moveTo(I,k),d=!0}function C(){var I;I=l.length%2!==0,I&&!u&&(w=l.shift()+g),c+=l.length>>1,l.length=0,u=!0}function T(I){for(var k,M,L,N,G,V,X,F,$,O,z,re,q=0;q<I.length;){var le=I[q];switch(q+=1,le){case 1:C();break;case 3:C();break;case 4:l.length>1&&!u&&(w=l.shift()+g,u=!0),f+=l.pop(),E(h,f);break;case 5:for(;l.length>0;)h+=l.shift(),f+=l.shift(),a.lineTo(h,f);break;case 6:for(;l.length>0&&(h+=l.shift(),a.lineTo(h,f),l.length!==0);)f+=l.shift(),a.lineTo(h,f);break;case 7:for(;l.length>0&&(f+=l.shift(),a.lineTo(h,f),l.length!==0);)h+=l.shift(),a.lineTo(h,f);break;case 8:for(;l.length>0;)r=h+l.shift(),s=f+l.shift(),i=r+l.shift(),o=s+l.shift(),h=i+l.shift(),f=o+l.shift(),a.curveTo(r,s,i,o,h,f);break;case 10:G=l.pop()+v,V=m[G],V&&T(V);break;case 11:return;case 12:switch(le=I[q],q+=1,le){case 35:r=h+l.shift(),s=f+l.shift(),i=r+l.shift(),o=s+l.shift(),X=i+l.shift(),F=o+l.shift(),$=X+l.shift(),O=F+l.shift(),z=$+l.shift(),re=O+l.shift(),h=z+l.shift(),f=re+l.shift(),l.shift(),a.curveTo(r,s,i,o,X,F),a.curveTo($,O,z,re,h,f);break;case 34:r=h+l.shift(),s=f,i=r+l.shift(),o=s+l.shift(),X=i+l.shift(),F=o,$=X+l.shift(),O=o,z=$+l.shift(),re=f,h=z+l.shift(),a.curveTo(r,s,i,o,X,F),a.curveTo($,O,z,re,h,f);break;case 36:r=h+l.shift(),s=f+l.shift(),i=r+l.shift(),o=s+l.shift(),X=i+l.shift(),F=o,$=X+l.shift(),O=o,z=$+l.shift(),re=O+l.shift(),h=z+l.shift(),a.curveTo(r,s,i,o,X,F),a.curveTo($,O,z,re,h,f);break;case 37:r=h+l.shift(),s=f+l.shift(),i=r+l.shift(),o=s+l.shift(),X=i+l.shift(),F=o+l.shift(),$=X+l.shift(),O=F+l.shift(),z=$+l.shift(),re=O+l.shift(),Math.abs(z-h)>Math.abs(re-f)?h=z+l.shift():f=re+l.shift(),a.curveTo(r,s,i,o,X,F),a.curveTo($,O,z,re,h,f);break;default:console.log("Glyph "+e.index+": unknown operator 1200"+le),l.length=0}break;case 14:l.length>0&&!u&&(w=l.shift()+g,u=!0),d&&(a.closePath(),d=!1);break;case 18:C();break;case 19:case 20:C(),q+=c+7>>3;break;case 21:l.length>2&&!u&&(w=l.shift()+g,u=!0),f+=l.pop(),h+=l.pop(),E(h,f);break;case 22:l.length>1&&!u&&(w=l.shift()+g,u=!0),h+=l.pop(),E(h,f);break;case 23:C();break;case 24:for(;l.length>2;)r=h+l.shift(),s=f+l.shift(),i=r+l.shift(),o=s+l.shift(),h=i+l.shift(),f=o+l.shift(),a.curveTo(r,s,i,o,h,f);h+=l.shift(),f+=l.shift(),a.lineTo(h,f);break;case 25:for(;l.length>6;)h+=l.shift(),f+=l.shift(),a.lineTo(h,f);r=h+l.shift(),s=f+l.shift(),i=r+l.shift(),o=s+l.shift(),h=i+l.shift(),f=o+l.shift(),a.curveTo(r,s,i,o,h,f);break;case 26:for(l.length%2&&(h+=l.shift());l.length>0;)r=h,s=f+l.shift(),i=r+l.shift(),o=s+l.shift(),h=i,f=o+l.shift(),a.curveTo(r,s,i,o,h,f);break;case 27:for(l.length%2&&(f+=l.shift());l.length>0;)r=h+l.shift(),s=f,i=r+l.shift(),o=s+l.shift(),h=i+l.shift(),f=o,a.curveTo(r,s,i,o,h,f);break;case 28:k=I[q],M=I[q+1],l.push((k<<24|M<<16)>>16),q+=2;break;case 29:G=l.pop()+t.gsubrsBias,V=t.gsubrs[G],V&&T(V);break;case 30:for(;l.length>0&&(r=h,s=f+l.shift(),i=r+l.shift(),o=s+l.shift(),h=i+l.shift(),f=o+(l.length===1?l.shift():0),a.curveTo(r,s,i,o,h,f),l.length!==0);)r=h+l.shift(),s=f,i=r+l.shift(),o=s+l.shift(),f=o+l.shift(),h=i+(l.length===1?l.shift():0),a.curveTo(r,s,i,o,h,f);break;case 31:for(;l.length>0&&(r=h+l.shift(),s=f,i=r+l.shift(),o=s+l.shift(),f=o+l.shift(),h=i+(l.length===1?l.shift():0),a.curveTo(r,s,i,o,h,f),l.length!==0);)r=h,s=f+l.shift(),i=r+l.shift(),o=s+l.shift(),h=i+l.shift(),f=o+(l.length===1?l.shift():0),a.curveTo(r,s,i,o,h,f);break;default:le<32?console.log("Glyph "+e.index+": unknown operator "+le):le<247?l.push(le-139):le<251?(k=I[q],q+=1,l.push((le-247)*256+k+108)):le<255?(k=I[q],q+=1,l.push(-(le-251)*256-k-108)):(k=I[q],M=I[q+1],L=I[q+2],N=I[q+3],q+=4,l.push((k<<24|M<<16|L<<8|N)/65536))}}}return T(n),e.advanceWidth=w,a}function rie(t,e,n,r){var s=[],i,o=new En.Parser(t,e),a=o.parseCard8();if(a===0)for(var l=0;l<n;l++){if(i=o.parseCard8(),i>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+i+" (FD count "+r+")");s.push(i)}else if(a===3){var c=o.parseCard16(),u=o.parseCard16();if(u!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+u);for(var d,h=0;h<c;h++){if(i=o.parseCard8(),d=o.parseCard16(),i>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+i+" (FD count "+r+")");if(d>n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+d);for(;u<d;u++)s.push(i);u=d}if(d!==n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+d)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+a);return s}function sie(t,e,n,r){n.tables.cff={};var s=Qse(t,e),i=lu(t,s.endOffset,En.bytesToString),o=lu(t,i.endOffset),a=lu(t,o.endOffset,En.bytesToString),l=lu(t,a.endOffset);n.gsubrs=l.objects,n.gsubrsBias=v2(n.gsubrs);var c=tI(t,e,o.objects,a.objects);if(c.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+c.length);var u=c[0];if(n.tables.cff.topDict=u,u._privateDict&&(n.defaultWidthX=u._privateDict.defaultWidthX,n.nominalWidthX=u._privateDict.nominalWidthX),u.ros[0]!==void 0&&u.ros[1]!==void 0&&(n.isCIDFont=!0),n.isCIDFont){var d=u.fdArray,h=u.fdSelect;if(d===0||h===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");d+=e;var f=lu(t,d),m=tI(t,e,f.objects,a.objects);u._fdArray=m,h+=e,u._fdSelect=rie(t,h,n.numGlyphs,m.length)}var v=e+u.private[1],y=U5(t,v,u.private[0],a.objects);if(n.defaultWidthX=y.defaultWidthX,n.nominalWidthX=y.nominalWidthX,y.subrs!==0){var g=v+y.subrs,S=lu(t,g);n.subrs=S.objects,n.subrsBias=v2(n.subrs)}else n.subrs=[],n.subrsBias=0;var _;r.lowMemory?(_=qse(t,e+u.charStrings),n.nGlyphs=_.offsets.length):(_=lu(t,e+u.charStrings),n.nGlyphs=_.objects.length);var w=tie(t,e+u.charset,n.nGlyphs,a.objects);if(u.encoding===0?n.cffEncoding=new Ob(Bse,w):u.encoding===1?n.cffEncoding=new Ob(Use,w):n.cffEncoding=nie(t,e+u.encoding,w),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new vl.GlyphSet(n),r.lowMemory)n._push=function(T){var I=Yse(T,_.offsets,t,e+u.charStrings);n.glyphs.push(T,vl.cffGlyphLoader(n,T,nI,I))};else for(var E=0;E<n.nGlyphs;E+=1){var C=_.objects[E];n.glyphs.push(E,vl.cffGlyphLoader(n,E,nI,C))}}function z5(t,e){var n,r=jy.indexOf(t);return r>=0&&(n=r),r=e.indexOf(t),r>=0?n=r+jy.length:(n=jy.length+e.length,e.push(t)),n}function iie(){return new vn.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function oie(t){var e=new vn.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);e.names=[];for(var n=0;n<t.length;n+=1)e.names.push({name:"name_"+n,type:"NAME",value:t[n]});return e}function $5(t,e,n){for(var r={},s=0;s<t.length;s+=1){var i=t[s],o=e[i.name];o!==void 0&&!O5(o,i.value)&&(i.type==="SID"&&(o=z5(o,n)),r[i.op]={name:i.name,type:i.type,value:o})}return r}function rI(t,e){var n=new vn.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=$5(F5,t,e),n}function sI(t){var e=new vn.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return e.topDicts=[{name:"topDict_0",type:"TABLE",value:t}],e}function aie(t){var e=new vn.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);e.strings=[];for(var n=0;n<t.length;n+=1)e.strings.push({name:"string_"+n,type:"STRING",value:t[n]});return e}function lie(){return new vn.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function cie(t,e){for(var n=new vn.Record("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<t.length;r+=1){var s=t[r],i=z5(s,e);n.fields.push({name:"glyph_"+r,type:"SID",value:i})}return n}function uie(t){var e=[],n=t.path;e.push({name:"width",type:"NUMBER",value:t.advanceWidth});for(var r=0,s=0,i=0;i<n.commands.length;i+=1){var o=void 0,a=void 0,l=n.commands[i];if(l.type==="Q"){var c=.3333333333333333,u=2/3;l={type:"C",x:l.x,y:l.y,x1:Math.round(c*r+u*l.x1),y1:Math.round(c*s+u*l.y1),x2:Math.round(c*l.x+u*l.x1),y2:Math.round(c*l.y+u*l.y1)}}if(l.type==="M")o=Math.round(l.x-r),a=Math.round(l.y-s),e.push({name:"dx",type:"NUMBER",value:o}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(l.x),s=Math.round(l.y);else if(l.type==="L")o=Math.round(l.x-r),a=Math.round(l.y-s),e.push({name:"dx",type:"NUMBER",value:o}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rlineto",type:"OP",value:5}),r=Math.round(l.x),s=Math.round(l.y);else if(l.type==="C"){var d=Math.round(l.x1-r),h=Math.round(l.y1-s),f=Math.round(l.x2-l.x1),m=Math.round(l.y2-l.y1);o=Math.round(l.x-l.x2),a=Math.round(l.y-l.y2),e.push({name:"dx1",type:"NUMBER",value:d}),e.push({name:"dy1",type:"NUMBER",value:h}),e.push({name:"dx2",type:"NUMBER",value:f}),e.push({name:"dy2",type:"NUMBER",value:m}),e.push({name:"dx",type:"NUMBER",value:o}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(l.x),s=Math.round(l.y)}}return e.push({name:"endchar",type:"OP",value:14}),e}function die(t){for(var e=new vn.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),n=0;n<t.length;n+=1){var r=t.get(n),s=uie(r);e.charStrings.push({name:r.name,type:"CHARSTRING",value:s})}return e}function hie(t,e){var n=new vn.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=$5(B5,t,e),n}function fie(t,e){for(var n=new vn.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),r=1/e.unitsPerEm,s={version:e.version,fullName:e.fullName,familyName:e.familyName,weight:e.weightName,fontBBox:e.fontBBox||[0,0,0,0],fontMatrix:[r,0,0,r,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},i={},o=[],a,l=1;l<t.length;l+=1)a=t.get(l),o.push(a.name);var c=[];n.header=iie(),n.nameIndex=oie([e.postScriptName]);var u=rI(s,c);n.topDictIndex=sI(u),n.globalSubrIndex=lie(),n.charsets=cie(o,c),n.charStringsIndex=die(t),n.privateDict=hie(i,c),n.stringIndex=aie(c);var d=n.header.sizeOf()+n.nameIndex.sizeOf()+n.topDictIndex.sizeOf()+n.stringIndex.sizeOf()+n.globalSubrIndex.sizeOf();return s.charset=d,s.encoding=0,s.charStrings=s.charset+n.charsets.sizeOf(),s.private[1]=s.charStrings+n.charStringsIndex.sizeOf(),u=rI(s,c),n.topDictIndex=sI(u),n}var V5={parse:sie,make:fie};function pie(t,e){var n={},r=new En.Parser(t,e);return n.version=r.parseVersion(),n.fontRevision=Math.round(r.parseFixed()*1e3)/1e3,n.checkSumAdjustment=r.parseULong(),n.magicNumber=r.parseULong(),jn.argument(n.magicNumber===1594834165,"Font header has wrong magic number."),n.flags=r.parseUShort(),n.unitsPerEm=r.parseUShort(),n.created=r.parseLongDateTime(),n.modified=r.parseLongDateTime(),n.xMin=r.parseShort(),n.yMin=r.parseShort(),n.xMax=r.parseShort(),n.yMax=r.parseShort(),n.macStyle=r.parseUShort(),n.lowestRecPPEM=r.parseUShort(),n.fontDirectionHint=r.parseShort(),n.indexToLocFormat=r.parseShort(),n.glyphDataFormat=r.parseShort(),n}function mie(t){var e=Math.round(new Date().getTime()/1e3)+2082844800,n=e;return t.createdTimestamp&&(n=t.createdTimestamp+2082844800),new vn.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:n},{name:"modified",type:"LONGDATETIME",value:e},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],t)}var H5={parse:pie,make:mie};function gie(t,e){var n={},r=new En.Parser(t,e);return n.version=r.parseVersion(),n.ascender=r.parseShort(),n.descender=r.parseShort(),n.lineGap=r.parseShort(),n.advanceWidthMax=r.parseUShort(),n.minLeftSideBearing=r.parseShort(),n.minRightSideBearing=r.parseShort(),n.xMaxExtent=r.parseShort(),n.caretSlopeRise=r.parseShort(),n.caretSlopeRun=r.parseShort(),n.caretOffset=r.parseShort(),r.relativeOffset+=8,n.metricDataFormat=r.parseShort(),n.numberOfHMetrics=r.parseUShort(),n}function vie(t){return new vn.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],t)}var G5={parse:gie,make:vie};function yie(t,e,n,r,s){for(var i,o,a=new En.Parser(t,e),l=0;l<r;l+=1){l<n&&(i=a.parseUShort(),o=a.parseShort());var c=s.get(l);c.advanceWidth=i,c.leftSideBearing=o}}function bie(t,e,n,r,s){t._hmtxTableData={};for(var i,o,a=new En.Parser(e,n),l=0;l<s;l+=1)l<r&&(i=a.parseUShort(),o=a.parseShort()),t._hmtxTableData[l]={advanceWidth:i,leftSideBearing:o}}function _ie(t,e,n,r,s,i,o){o.lowMemory?bie(t,e,n,r,s):yie(e,n,r,s,i)}function wie(t){for(var e=new vn.Table("hmtx",[]),n=0;n<t.length;n+=1){var r=t.get(n),s=r.advanceWidth||0,i=r.leftSideBearing||0;e.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:s}),e.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:i})}return e}var W5={parse:_ie,make:wie};function xie(t){for(var e=new vn.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:t.length}]),n="",r=12+t.length*4,s=0;s<t.length;++s){var i=n.indexOf(t[s]);i<0&&(i=n.length,n+=t[s]),e.fields.push({name:"offset "+s,type:"USHORT",value:r+i}),e.fields.push({name:"length "+s,type:"USHORT",value:t[s].length})}return e.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),e}function Sie(t,e){var n=new En.Parser(t,e),r=n.parseULong();jn.argument(r===1,"Unsupported ltag table version."),n.skip("uLong",1);for(var s=n.parseULong(),i=[],o=0;o<s;o++){for(var a="",l=e+n.parseUShort(),c=n.parseUShort(),u=l;u<l+c;++u)a+=String.fromCharCode(t.getInt8(u));i.push(a)}return i}var j5={make:xie,parse:Sie};function Eie(t,e){var n={},r=new En.Parser(t,e);return n.version=r.parseVersion(),n.numGlyphs=r.parseUShort(),n.version===1&&(n.maxPoints=r.parseUShort(),n.maxContours=r.parseUShort(),n.maxCompositePoints=r.parseUShort(),n.maxCompositeContours=r.parseUShort(),n.maxZones=r.parseUShort(),n.maxTwilightPoints=r.parseUShort(),n.maxStorage=r.parseUShort(),n.maxFunctionDefs=r.parseUShort(),n.maxInstructionDefs=r.parseUShort(),n.maxStackElements=r.parseUShort(),n.maxSizeOfInstructions=r.parseUShort(),n.maxComponentElements=r.parseUShort(),n.maxComponentDepth=r.parseUShort()),n}function Cie(t){return new vn.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:t}])}var K5={parse:Eie,make:Cie},q5=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Y5={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Tie={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},X5={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Mie(t,e,n){switch(t){case 0:if(e===65535)return"und";if(n)return n[e];break;case 1:return Y5[e];case 3:return X5[e]}}var y2="utf-16",Aie={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},kie={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Z5(t,e,n){switch(t){case 0:return y2;case 1:return kie[n]||Aie[e];case 3:if(e===1||e===10)return y2;break}}function Iie(t,e,n){for(var r={},s=new En.Parser(t,e),i=s.parseUShort(),o=s.parseUShort(),a=s.offset+s.parseUShort(),l=0;l<o;l++){var c=s.parseUShort(),u=s.parseUShort(),d=s.parseUShort(),h=s.parseUShort(),f=q5[h]||h,m=s.parseUShort(),v=s.parseUShort(),y=Mie(c,d,n),g=Z5(c,u,d);if(g!==void 0&&y!==void 0){var S=void 0;if(g===y2?S=ap.UTF16(t,a+v,m):S=ap.MACSTRING(t,a+v,m,g),S){var _=r[f];_===void 0&&(_=r[f]={}),_[y]=S}}}return i===1&&s.parseUShort(),r}function Kw(t){var e={};for(var n in t)e[t[n]]=parseInt(n);return e}function iI(t,e,n,r,s,i){return new vn.Record("NameRecord",[{name:"platformID",type:"USHORT",value:t},{name:"encodingID",type:"USHORT",value:e},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:s},{name:"offset",type:"USHORT",value:i}])}function Pie(t,e){var n=t.length,r=e.length-n+1;e:for(var s=0;s<r;s++)for(;s<r;s++){for(var i=0;i<n;i++)if(e[s+i]!==t[i])continue e;return s}return-1}function oI(t,e){var n=Pie(t,e);if(n<0){n=e.length;for(var r=0,s=t.length;r<s;++r)e.push(t[r])}return n}function Rie(t,e){var n,r=[],s={},i=Kw(q5);for(var o in t){var a=i[o];if(a===void 0&&(a=o),n=parseInt(a),isNaN(n))throw new Error('Name table entry "'+o+'" does not exist, see nameTableNames for complete list.');s[n]=t[o],r.push(n)}for(var l=Kw(Y5),c=Kw(X5),u=[],d=[],h=0;h<r.length;h++){n=r[h];var f=s[n];for(var m in f){var v=f[m],y=1,g=l[m],S=Tie[g],_=Z5(y,S,g),w=fn.MACSTRING(v,_);w===void 0&&(y=0,g=e.indexOf(m),g<0&&(g=e.length,e.push(m)),S=4,w=fn.UTF16(v));var E=oI(w,d);u.push(iI(y,S,g,n,w.length,E));var C=c[m];if(C!==void 0){var T=fn.UTF16(v),I=oI(T,d);u.push(iI(3,1,C,n,T.length,I))}}}u.sort(function(L,N){return L.platformID-N.platformID||L.encodingID-N.encodingID||L.languageID-N.languageID||L.nameID-N.nameID});for(var k=new vn.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:u.length},{name:"stringOffset",type:"USHORT",value:6+u.length*12}]),M=0;M<u.length;M++)k.fields.push({name:"record_"+M,type:"RECORD",value:u[M]});return k.fields.push({name:"strings",type:"LITERAL",value:d}),k}var J5={parse:Iie,make:Rie},b2=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function Lie(t){for(var e=0;e<b2.length;e+=1){var n=b2[e];if(t>=n.begin&&t<n.end)return e}return-1}function Oie(t,e){var n={},r=new En.Parser(t,e);n.version=r.parseUShort(),n.xAvgCharWidth=r.parseShort(),n.usWeightClass=r.parseUShort(),n.usWidthClass=r.parseUShort(),n.fsType=r.parseUShort(),n.ySubscriptXSize=r.parseShort(),n.ySubscriptYSize=r.parseShort(),n.ySubscriptXOffset=r.parseShort(),n.ySubscriptYOffset=r.parseShort(),n.ySuperscriptXSize=r.parseShort(),n.ySuperscriptYSize=r.parseShort(),n.ySuperscriptXOffset=r.parseShort(),n.ySuperscriptYOffset=r.parseShort(),n.yStrikeoutSize=r.parseShort(),n.yStrikeoutPosition=r.parseShort(),n.sFamilyClass=r.parseShort(),n.panose=[];for(var s=0;s<10;s++)n.panose[s]=r.parseByte();return n.ulUnicodeRange1=r.parseULong(),n.ulUnicodeRange2=r.parseULong(),n.ulUnicodeRange3=r.parseULong(),n.ulUnicodeRange4=r.parseULong(),n.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),n.fsSelection=r.parseUShort(),n.usFirstCharIndex=r.parseUShort(),n.usLastCharIndex=r.parseUShort(),n.sTypoAscender=r.parseShort(),n.sTypoDescender=r.parseShort(),n.sTypoLineGap=r.parseShort(),n.usWinAscent=r.parseUShort(),n.usWinDescent=r.parseUShort(),n.version>=1&&(n.ulCodePageRange1=r.parseULong(),n.ulCodePageRange2=r.parseULong()),n.version>=2&&(n.sxHeight=r.parseShort(),n.sCapHeight=r.parseShort(),n.usDefaultChar=r.parseUShort(),n.usBreakChar=r.parseUShort(),n.usMaxContent=r.parseUShort()),n}function Nie(t){return new vn.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],t)}var _2={parse:Oie,make:Nie,unicodeRanges:b2,getUnicodeRange:Lie};function Die(t,e){var n={},r=new En.Parser(t,e);switch(n.version=r.parseVersion(),n.italicAngle=r.parseFixed(),n.underlinePosition=r.parseShort(),n.underlineThickness=r.parseShort(),n.isFixedPitch=r.parseULong(),n.minMemType42=r.parseULong(),n.maxMemType42=r.parseULong(),n.minMemType1=r.parseULong(),n.maxMemType1=r.parseULong(),n.version){case 1:n.names=Cd.slice();break;case 2:n.numberOfGlyphs=r.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs);for(var s=0;s<n.numberOfGlyphs;s++)n.glyphNameIndex[s]=r.parseUShort();n.names=[];for(var i=0;i<n.numberOfGlyphs;i++)if(n.glyphNameIndex[i]>=Cd.length){var o=r.parseChar();n.names.push(r.parseString(o))}break;case 2.5:n.numberOfGlyphs=r.parseUShort(),n.offset=new Array(n.numberOfGlyphs);for(var a=0;a<n.numberOfGlyphs;a++)n.offset[a]=r.parseChar();break}return n}function Fie(){return new vn.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var Q5={parse:Die,make:Fie},Da=new Array(9);Da[1]=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort();if(e===1)return{substFormat:1,coverage:this.parsePointer(ft.coverage),deltaGlyphId:this.parseUShort()};if(e===2)return{substFormat:2,coverage:this.parsePointer(ft.coverage),substitute:this.parseOffset16List()};jn.assert(!1,"0x"+t.toString(16)+": lookup type 1 format must be 1 or 2.")};Da[2]=function(){var t=this.parseUShort();return jn.argument(t===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(ft.coverage),sequences:this.parseListOfLists()}};Da[3]=function(){var t=this.parseUShort();return jn.argument(t===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(ft.coverage),alternateSets:this.parseListOfLists()}};Da[4]=function(){var t=this.parseUShort();return jn.argument(t===1,"GSUB ligature table identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(ft.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var Bf={sequenceIndex:ft.uShort,lookupListIndex:ft.uShort};Da[5]=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort();if(e===1)return{substFormat:e,coverage:this.parsePointer(ft.coverage),ruleSets:this.parseListOfLists(function(){var s=this.parseUShort(),i=this.parseUShort();return{input:this.parseUShortList(s-1),lookupRecords:this.parseRecordList(i,Bf)}})};if(e===2)return{substFormat:e,coverage:this.parsePointer(ft.coverage),classDef:this.parsePointer(ft.classDef),classSets:this.parseListOfLists(function(){var s=this.parseUShort(),i=this.parseUShort();return{classes:this.parseUShortList(s-1),lookupRecords:this.parseRecordList(i,Bf)}})};if(e===3){var n=this.parseUShort(),r=this.parseUShort();return{substFormat:e,coverages:this.parseList(n,ft.pointer(ft.coverage)),lookupRecords:this.parseRecordList(r,Bf)}}jn.assert(!1,"0x"+t.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};Da[6]=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort();if(e===1)return{substFormat:1,coverage:this.parsePointer(ft.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Bf)}})};if(e===2)return{substFormat:2,coverage:this.parsePointer(ft.coverage),backtrackClassDef:this.parsePointer(ft.classDef),inputClassDef:this.parsePointer(ft.classDef),lookaheadClassDef:this.parsePointer(ft.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Bf)}})};if(e===3)return{substFormat:3,backtrackCoverage:this.parseList(ft.pointer(ft.coverage)),inputCoverage:this.parseList(ft.pointer(ft.coverage)),lookaheadCoverage:this.parseList(ft.pointer(ft.coverage)),lookupRecords:this.parseRecordList(Bf)};jn.assert(!1,"0x"+t.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};Da[7]=function(){var t=this.parseUShort();jn.argument(t===1,"GSUB Extension Substitution subtable identifier-format must be 1");var e=this.parseUShort(),n=new ft(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:e,extension:Da[e].call(n)}};Da[8]=function(){var t=this.parseUShort();return jn.argument(t===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(ft.coverage),backtrackCoverage:this.parseList(ft.pointer(ft.coverage)),lookaheadCoverage:this.parseList(ft.pointer(ft.coverage)),substitutes:this.parseUShortList()}};function Bie(t,e){e=e||0;var n=new ft(t,e),r=n.parseVersion(1);return jn.argument(r===1||r===1.1,"Unsupported GSUB table version."),r===1?{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(Da)}:{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(Da),variations:n.parseFeatureVariationsList()}}var Wp=new Array(9);Wp[1]=function(t){return t.substFormat===1?new vn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new vn.Coverage(t.coverage)},{name:"deltaGlyphID",type:"USHORT",value:t.deltaGlyphId}]):new vn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new vn.Coverage(t.coverage)}].concat(vn.ushortList("substitute",t.substitute)))};Wp[2]=function(t){return jn.assert(t.substFormat===1,"Lookup type 2 substFormat must be 1."),new vn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new vn.Coverage(t.coverage)}].concat(vn.tableList("seqSet",t.sequences,function(e){return new vn.Table("sequenceSetTable",vn.ushortList("sequence",e))})))};Wp[3]=function(t){return jn.assert(t.substFormat===1,"Lookup type 3 substFormat must be 1."),new vn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new vn.Coverage(t.coverage)}].concat(vn.tableList("altSet",t.alternateSets,function(e){return new vn.Table("alternateSetTable",vn.ushortList("alternate",e))})))};Wp[4]=function(t){return jn.assert(t.substFormat===1,"Lookup type 4 substFormat must be 1."),new vn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new vn.Coverage(t.coverage)}].concat(vn.tableList("ligSet",t.ligatureSets,function(e){return new vn.Table("ligatureSetTable",vn.tableList("ligature",e,function(n){return new vn.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:n.ligGlyph}].concat(vn.ushortList("component",n.components,n.components.length+1)))}))})))};Wp[6]=function(t){if(t.substFormat===1){var e=new vn.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:t.substFormat},{name:"coverage",type:"TABLE",value:new vn.Coverage(t.coverage)}].concat(vn.tableList("chainRuleSet",t.chainRuleSets,function(s){return new vn.Table("chainRuleSetTable",vn.tableList("chainRule",s,function(i){var o=vn.ushortList("backtrackGlyph",i.backtrack,i.backtrack.length).concat(vn.ushortList("inputGlyph",i.input,i.input.length+1)).concat(vn.ushortList("lookaheadGlyph",i.lookahead,i.lookahead.length)).concat(vn.ushortList("substitution",[],i.lookupRecords.length));return i.lookupRecords.forEach(function(a,l){o=o.concat({name:"sequenceIndex"+l,type:"USHORT",value:a.sequenceIndex}).concat({name:"lookupListIndex"+l,type:"USHORT",value:a.lookupListIndex})}),new vn.Table("chainRuleTable",o)}))})));return e}else if(t.substFormat===2)jn.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(t.substFormat===3){var n=[{name:"substFormat",type:"USHORT",value:t.substFormat}];n.push({name:"backtrackGlyphCount",type:"USHORT",value:t.backtrackCoverage.length}),t.backtrackCoverage.forEach(function(s,i){n.push({name:"backtrackCoverage"+i,type:"TABLE",value:new vn.Coverage(s)})}),n.push({name:"inputGlyphCount",type:"USHORT",value:t.inputCoverage.length}),t.inputCoverage.forEach(function(s,i){n.push({name:"inputCoverage"+i,type:"TABLE",value:new vn.Coverage(s)})}),n.push({name:"lookaheadGlyphCount",type:"USHORT",value:t.lookaheadCoverage.length}),t.lookaheadCoverage.forEach(function(s,i){n.push({name:"lookaheadCoverage"+i,type:"TABLE",value:new vn.Coverage(s)})}),n.push({name:"substitutionCount",type:"USHORT",value:t.lookupRecords.length}),t.lookupRecords.forEach(function(s,i){n=n.concat({name:"sequenceIndex"+i,type:"USHORT",value:s.sequenceIndex}).concat({name:"lookupListIndex"+i,type:"USHORT",value:s.lookupListIndex})});var r=new vn.Table("chainContextTable",n);return r}jn.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};function Uie(t){return new vn.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new vn.ScriptList(t.scripts)},{name:"features",type:"TABLE",value:new vn.FeatureList(t.features)},{name:"lookups",type:"TABLE",value:new vn.LookupList(t.lookups,Wp)}])}var e8={parse:Bie,make:Uie};function zie(t,e){var n=new En.Parser(t,e),r=n.parseULong();jn.argument(r===1,"Unsupported META table version."),n.parseULong(),n.parseULong();for(var s=n.parseULong(),i={},o=0;o<s;o++){var a=n.parseTag(),l=n.parseULong(),c=n.parseULong(),u=ap.UTF8(t,e+l,c);i[a]=u}return i}function $ie(t){var e=Object.keys(t).length,n="",r=16+e*12,s=new vn.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:r},{name:"numTags",type:"ULONG",value:e}]);for(var i in t){var o=n.length;n+=t[i],s.fields.push({name:"tag "+i,type:"TAG",value:i}),s.fields.push({name:"offset "+i,type:"ULONG",value:r+o}),s.fields.push({name:"length "+i,type:"ULONG",value:t[i].length})}return s.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),s}var t8={parse:zie,make:$ie};function aI(t){return Math.log(t)/Math.log(2)|0}function XC(t){for(;t.length%4!==0;)t.push(0);for(var e=0,n=0;n<t.length;n+=4)e+=(t[n]<<24)+(t[n+1]<<16)+(t[n+2]<<8)+t[n+3];return e%=Math.pow(2,32),e}function lI(t,e,n,r){return new vn.Record("Table Record",[{name:"tag",type:"TAG",value:t!==void 0?t:""},{name:"checkSum",type:"ULONG",value:e!==void 0?e:0},{name:"offset",type:"ULONG",value:n!==void 0?n:0},{name:"length",type:"ULONG",value:r!==void 0?r:0}])}function n8(t){var e=new vn.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);e.tables=t,e.numTables=t.length;var n=Math.pow(2,aI(e.numTables));e.searchRange=16*n,e.entrySelector=aI(n),e.rangeShift=e.numTables*16-e.searchRange;for(var r=[],s=[],i=e.sizeOf()+lI().sizeOf()*e.numTables;i%4!==0;)i+=1,s.push({name:"padding",type:"BYTE",value:0});for(var o=0;o<t.length;o+=1){var a=t[o];jn.argument(a.tableName.length===4,"Table name"+a.tableName+" is invalid.");var l=a.sizeOf(),c=lI(a.tableName,XC(a.encode()),i,l);for(r.push({name:c.tag+" Table Record",type:"RECORD",value:c}),s.push({name:a.tableName+" table",type:"RECORD",value:a}),i+=l,jn.argument(!isNaN(i),"Something went wrong calculating the offset.");i%4!==0;)i+=1,s.push({name:"padding",type:"BYTE",value:0})}return r.sort(function(u,d){return u.value.tag>d.value.tag?1:-1}),e.fields=e.fields.concat(r),e.fields=e.fields.concat(s),e}function cI(t,e,n){for(var r=0;r<e.length;r+=1){var s=t.charToGlyphIndex(e[r]);if(s>0){var i=t.glyphs.get(s);return i.getMetrics()}}return n}function Vie(t){for(var e=0,n=0;n<t.length;n+=1)e+=t[n];return e/t.length}function Hie(t){for(var e=[],n=[],r=[],s=[],i=[],o=[],a=[],l,c=0,u=0,d=0,h=0,f=0,m=0;m<t.glyphs.length;m+=1){var v=t.glyphs.get(m),y=v.unicode|0;if(isNaN(v.advanceWidth))throw new Error("Glyph "+v.name+" ("+m+"): advanceWidth is not a number.");(l>y||l===void 0)&&y>0&&(l=y),c<y&&(c=y);var g=_2.getUnicodeRange(y);if(g<32)u|=1<<g;else if(g<64)d|=1<<g-32;else if(g<96)h|=1<<g-64;else if(g<123)f|=1<<g-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(v.name!==".notdef"){var S=v.getMetrics();e.push(S.xMin),n.push(S.yMin),r.push(S.xMax),s.push(S.yMax),o.push(S.leftSideBearing),a.push(S.rightSideBearing),i.push(v.advanceWidth)}}var _={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,r),yMax:Math.max.apply(null,s),advanceWidthMax:Math.max.apply(null,i),advanceWidthAvg:Vie(i),minLeftSideBearing:Math.min.apply(null,o),maxLeftSideBearing:Math.max.apply(null,o),minRightSideBearing:Math.min.apply(null,a)};_.ascender=t.ascender,_.descender=t.descender;var w=H5.make({flags:3,unitsPerEm:t.unitsPerEm,xMin:_.xMin,yMin:_.yMin,xMax:_.xMax,yMax:_.yMax,lowestRecPPEM:3,createdTimestamp:t.createdTimestamp}),E=G5.make({ascender:_.ascender,descender:_.descender,advanceWidthMax:_.advanceWidthMax,minLeftSideBearing:_.minLeftSideBearing,minRightSideBearing:_.minRightSideBearing,xMaxExtent:_.maxLeftSideBearing+(_.xMax-_.xMin),numberOfHMetrics:t.glyphs.length}),C=K5.make(t.glyphs.length),T=_2.make(Object.assign({xAvgCharWidth:Math.round(_.advanceWidthAvg),usFirstCharIndex:l,usLastCharIndex:c,ulUnicodeRange1:u,ulUnicodeRange2:d,ulUnicodeRange3:h,ulUnicodeRange4:f,sTypoAscender:_.ascender,sTypoDescender:_.descender,sTypoLineGap:0,usWinAscent:_.yMax,usWinDescent:Math.abs(_.yMin),ulCodePageRange1:1,sxHeight:cI(t,"xyvw",{yMax:Math.round(_.ascender/2)}).yMax,sCapHeight:cI(t,"HIKLEFJMNTZBDPRAGOQSUVWXY",_).yMax,usDefaultChar:t.hasChar(" ")?32:0,usBreakChar:t.hasChar(" ")?32:0},t.tables.os2)),I=W5.make(t.glyphs),k=P5.make(t.glyphs),M=t.getEnglishName("fontFamily"),L=t.getEnglishName("fontSubfamily"),N=M+" "+L,G=t.getEnglishName("postScriptName");G||(G=M.replace(/\s/g,"")+"-"+L);var V={};for(var X in t.names)V[X]=t.names[X];V.uniqueID||(V.uniqueID={en:t.getEnglishName("manufacturer")+":"+N}),V.postScriptName||(V.postScriptName={en:G}),V.preferredFamily||(V.preferredFamily=t.names.fontFamily),V.preferredSubfamily||(V.preferredSubfamily=t.names.fontSubfamily);var F=[],$=J5.make(V,F),O=F.length>0?j5.make(F):void 0,z=Q5.make(),re=V5.make(t.glyphs,{version:t.getEnglishName("version"),fullName:N,familyName:M,weightName:L,postScriptName:G,unitsPerEm:t.unitsPerEm,fontBBox:[0,_.yMin,_.ascender,_.advanceWidthMax]}),q=t.metas&&Object.keys(t.metas).length>0?t8.make(t.metas):void 0,le=[w,E,C,T,$,k,z,re,I];O&&le.push(O),t.tables.gsub&&le.push(e8.make(t.tables.gsub)),q&&le.push(q);for(var fe=n8(le),se=fe.encode(),ye=XC(se),we=fe.fields,ve=!1,xe=0;xe<we.length;xe+=1)if(we[xe].name==="head table"){we[xe].value.checkSumAdjustment=2981146554-ye,ve=!0;break}if(!ve)throw new Error("Could not find head table with checkSum to adjust.");return fe}var Gie={make:n8,fontToTable:Hie,computeCheckSum:XC};function qw(t,e){for(var n=0,r=t.length-1;n<=r;){var s=n+r>>>1,i=t[s].tag;if(i===e)return s;i<e?n=s+1:r=s-1}return-n-1}function uI(t,e){for(var n=0,r=t.length-1;n<=r;){var s=n+r>>>1,i=t[s];if(i===e)return s;i<e?n=s+1:r=s-1}return-n-1}function dI(t,e){for(var n,r=0,s=t.length-1;r<=s;){var i=r+s>>>1;n=t[i];var o=n.start;if(o===e)return n;o<e?r=i+1:s=i-1}if(r>0)return n=t[r-1],e>n.end?0:n}function _v(t,e){this.font=t,this.tableName=e}_v.prototype={searchTag:qw,binSearch:uI,getTable:function(t){var e=this.font.tables[this.tableName];return!e&&t&&(e=this.font.tables[this.tableName]=this.createDefaultTable()),e},getScriptNames:function(){var t=this.getTable();return t?t.scripts.map(function(e){return e.tag}):[]},getDefaultScriptName:function(){var t=this.getTable();if(t){for(var e=!1,n=0;n<t.scripts.length;n++){var r=t.scripts[n].tag;if(r==="DFLT")return r;r==="latn"&&(e=!0)}if(e)return"latn"}},getScriptTable:function(t,e){var n=this.getTable(e);if(n){t=t||"DFLT";var r=n.scripts,s=qw(n.scripts,t);if(s>=0)return r[s].script;if(e){var i={tag:t,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return r.splice(-1-s,0,i),i.script}}},getLangSysTable:function(t,e,n){var r=this.getScriptTable(t,n);if(r){if(!e||e==="dflt"||e==="DFLT")return r.defaultLangSys;var s=qw(r.langSysRecords,e);if(s>=0)return r.langSysRecords[s].langSys;if(n){var i={tag:e,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return r.langSysRecords.splice(-1-s,0,i),i.langSys}}},getFeatureTable:function(t,e,n,r){var s=this.getLangSysTable(t,e,r);if(s){for(var i,o=s.featureIndexes,a=this.font.tables[this.tableName].features,l=0;l<o.length;l++)if(i=a[o[l]],i.tag===n)return i.feature;if(r){var c=a.length;return jn.assert(c===0||n>=a[c-1].tag,"Features must be added in alphabetical order."),i={tag:n,feature:{params:0,lookupListIndexes:[]}},a.push(i),o.push(c),i.feature}}},getLookupTables:function(t,e,n,r,s){var i=this.getFeatureTable(t,e,n,s),o=[];if(i){for(var a,l=i.lookupListIndexes,c=this.font.tables[this.tableName].lookups,u=0;u<l.length;u++)a=c[l[u]],a.lookupType===r&&o.push(a);if(o.length===0&&s){a={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0};var d=c.length;return c.push(a),l.push(d),[a]}}return o},getGlyphClass:function(t,e){switch(t.format){case 1:return t.startGlyph<=e&&e<t.startGlyph+t.classes.length?t.classes[e-t.startGlyph]:0;case 2:var n=dI(t.ranges,e);return n?n.classId:0}},getCoverageIndex:function(t,e){switch(t.format){case 1:var n=uI(t.glyphs,e);return n>=0?n:-1;case 2:var r=dI(t.ranges,e);return r?r.index+e-r.start:-1}},expandCoverage:function(t){if(t.format===1)return t.glyphs;for(var e=[],n=t.ranges,r=0;r<n.length;r++)for(var s=n[r],i=s.start,o=s.end,a=i;a<=o;a++)e.push(a);return e}};function wv(t){_v.call(this,t,"gpos")}wv.prototype=_v.prototype;wv.prototype.init=function(){var t=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(t)};wv.prototype.getKerningValue=function(t,e,n){for(var r=0;r<t.length;r++)for(var s=t[r].subtables,i=0;i<s.length;i++){var o=s[i],a=this.getCoverageIndex(o.coverage,e);if(!(a<0))switch(o.posFormat){case 1:for(var l=o.pairSets[a],c=0;c<l.length;c++){var u=l[c];if(u.secondGlyph===n)return u.value1&&u.value1.xAdvance||0}break;case 2:var d=this.getGlyphClass(o.classDef1,e),h=this.getGlyphClass(o.classDef2,n),f=o.classRecords[d][h];return f.value1&&f.value1.xAdvance||0}}return 0};wv.prototype.getKerningTables=function(t,e){if(this.font.tables.gpos)return this.getLookupTables(t,e,"kern",2)};function Do(t){_v.call(this,t,"gsub")}function Wie(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function ZC(t,e,n){for(var r=t.subtables,s=0;s<r.length;s++){var i=r[s];if(i.substFormat===e)return i}if(n)return r.push(n),n}Do.prototype=_v.prototype;Do.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};Do.prototype.getSingle=function(t,e,n){for(var r=[],s=this.getLookupTables(e,n,t,1),i=0;i<s.length;i++)for(var o=s[i].subtables,a=0;a<o.length;a++){var l=o[a],c=this.expandCoverage(l.coverage),u=void 0;if(l.substFormat===1){var d=l.deltaGlyphId;for(u=0;u<c.length;u++){var h=c[u];r.push({sub:h,by:h+d})}}else{var f=l.substitute;for(u=0;u<c.length;u++)r.push({sub:c[u],by:f[u]})}}return r};Do.prototype.getMultiple=function(t,e,n){for(var r=[],s=this.getLookupTables(e,n,t,2),i=0;i<s.length;i++)for(var o=s[i].subtables,a=0;a<o.length;a++){var l=o[a],c=this.expandCoverage(l.coverage),u=void 0;for(u=0;u<c.length;u++){var d=c[u],h=l.sequences[u];r.push({sub:d,by:h})}}return r};Do.prototype.getAlternates=function(t,e,n){for(var r=[],s=this.getLookupTables(e,n,t,3),i=0;i<s.length;i++)for(var o=s[i].subtables,a=0;a<o.length;a++)for(var l=o[a],c=this.expandCoverage(l.coverage),u=l.alternateSets,d=0;d<c.length;d++)r.push({sub:c[d],by:u[d]});return r};Do.prototype.getLigatures=function(t,e,n){for(var r=[],s=this.getLookupTables(e,n,t,4),i=0;i<s.length;i++)for(var o=s[i].subtables,a=0;a<o.length;a++)for(var l=o[a],c=this.expandCoverage(l.coverage),u=l.ligatureSets,d=0;d<c.length;d++)for(var h=c[d],f=u[d],m=0;m<f.length;m++){var v=f[m];r.push({sub:[h].concat(v.components),by:v.ligGlyph})}return r};Do.prototype.addSingle=function(t,e,n,r){var s=this.getLookupTables(n,r,t,1,!0)[0],i=ZC(s,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});jn.assert(i.coverage.format===1,"Single: unable to modify coverage table format "+i.coverage.format);var o=e.sub,a=this.binSearch(i.coverage.glyphs,o);a<0&&(a=-1-a,i.coverage.glyphs.splice(a,0,o),i.substitute.splice(a,0,0)),i.substitute[a]=e.by};Do.prototype.addMultiple=function(t,e,n,r){jn.assert(e.by instanceof Array&&e.by.length>1,'Multiple: "by" must be an array of two or more ids');var s=this.getLookupTables(n,r,t,2,!0)[0],i=ZC(s,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});jn.assert(i.coverage.format===1,"Multiple: unable to modify coverage table format "+i.coverage.format);var o=e.sub,a=this.binSearch(i.coverage.glyphs,o);a<0&&(a=-1-a,i.coverage.glyphs.splice(a,0,o),i.sequences.splice(a,0,0)),i.sequences[a]=e.by};Do.prototype.addAlternate=function(t,e,n,r){var s=this.getLookupTables(n,r,t,3,!0)[0],i=ZC(s,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});jn.assert(i.coverage.format===1,"Alternate: unable to modify coverage table format "+i.coverage.format);var o=e.sub,a=this.binSearch(i.coverage.glyphs,o);a<0&&(a=-1-a,i.coverage.glyphs.splice(a,0,o),i.alternateSets.splice(a,0,0)),i.alternateSets[a]=e.by};Do.prototype.addLigature=function(t,e,n,r){var s=this.getLookupTables(n,r,t,4,!0)[0],i=s.subtables[0];i||(i={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},s.subtables[0]=i),jn.assert(i.coverage.format===1,"Ligature: unable to modify coverage table format "+i.coverage.format);var o=e.sub[0],a=e.sub.slice(1),l={ligGlyph:e.by,components:a},c=this.binSearch(i.coverage.glyphs,o);if(c>=0){for(var u=i.ligatureSets[c],d=0;d<u.length;d++)if(Wie(u[d].components,a))return;u.push(l)}else c=-1-c,i.coverage.glyphs.splice(c,0,o),i.ligatureSets.splice(c,0,[l])};Do.prototype.getFeature=function(t,e,n){if(/ss\d\d/.test(t))return this.getSingle(t,e,n);switch(t){case"aalt":case"salt":return this.getSingle(t,e,n).concat(this.getAlternates(t,e,n));case"dlig":case"liga":case"rlig":return this.getLigatures(t,e,n);case"ccmp":return this.getMultiple(t,e,n).concat(this.getLigatures(t,e,n));case"stch":return this.getMultiple(t,e,n)}};Do.prototype.add=function(t,e,n,r){if(/ss\d\d/.test(t))return this.addSingle(t,e,n,r);switch(t){case"aalt":case"salt":return typeof e.by=="number"?this.addSingle(t,e,n,r):this.addAlternate(t,e,n,r);case"dlig":case"liga":case"rlig":return this.addLigature(t,e,n,r);case"ccmp":return e.by instanceof Array?this.addMultiple(t,e,n,r):this.addLigature(t,e,n,r)}};function jie(){return typeof window<"u"}function Kie(t){for(var e=new Buffer(t.byteLength),n=new Uint8Array(t),r=0;r<e.length;++r)e[r]=n[r];return e}function fm(t,e){if(!t)throw e}function hI(t,e,n,r,s){var i;return(e&r)>0?(i=t.parseByte(),e&s||(i=-i),i=n+i):(e&s)>0?i=n:i=n+t.parseShort(),i}function r8(t,e,n){var r=new En.Parser(e,n);t.numberOfContours=r.parseShort(),t._xMin=r.parseShort(),t._yMin=r.parseShort(),t._xMax=r.parseShort(),t._yMax=r.parseShort();var s,i;if(t.numberOfContours>0){for(var o=t.endPointIndices=[],a=0;a<t.numberOfContours;a+=1)o.push(r.parseUShort());t.instructionLength=r.parseUShort(),t.instructions=[];for(var l=0;l<t.instructionLength;l+=1)t.instructions.push(r.parseByte());var c=o[o.length-1]+1;s=[];for(var u=0;u<c;u+=1)if(i=r.parseByte(),s.push(i),(i&8)>0)for(var d=r.parseByte(),h=0;h<d;h+=1)s.push(i),u+=1;if(jn.argument(s.length===c,"Bad flags."),o.length>0){var f=[],m;if(c>0){for(var v=0;v<c;v+=1)i=s[v],m={},m.onCurve=!!(i&1),m.lastPointOfContour=o.indexOf(v)>=0,f.push(m);for(var y=0,g=0;g<c;g+=1)i=s[g],m=f[g],m.x=hI(r,i,y,2,16),y=m.x;for(var S=0,_=0;_<c;_+=1)i=s[_],m=f[_],m.y=hI(r,i,S,4,32),S=m.y}t.points=f}else t.points=[]}else if(t.numberOfContours===0)t.points=[];else{t.isComposite=!0,t.points=[],t.components=[];for(var w=!0;w;){s=r.parseUShort();var E={glyphIndex:r.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(s&1)>0?(s&2)>0?(E.dx=r.parseShort(),E.dy=r.parseShort()):E.matchedPoints=[r.parseUShort(),r.parseUShort()]:(s&2)>0?(E.dx=r.parseChar(),E.dy=r.parseChar()):E.matchedPoints=[r.parseByte(),r.parseByte()],(s&8)>0?E.xScale=E.yScale=r.parseF2Dot14():(s&64)>0?(E.xScale=r.parseF2Dot14(),E.yScale=r.parseF2Dot14()):(s&128)>0&&(E.xScale=r.parseF2Dot14(),E.scale01=r.parseF2Dot14(),E.scale10=r.parseF2Dot14(),E.yScale=r.parseF2Dot14()),t.components.push(E),w=!!(s&32)}if(s&256){t.instructionLength=r.parseUShort(),t.instructions=[];for(var C=0;C<t.instructionLength;C+=1)t.instructions.push(r.parseByte())}}}function Yw(t,e){for(var n=[],r=0;r<t.length;r+=1){var s=t[r],i={x:e.xScale*s.x+e.scale01*s.y+e.dx,y:e.scale10*s.x+e.yScale*s.y+e.dy,onCurve:s.onCurve,lastPointOfContour:s.lastPointOfContour};n.push(i)}return n}function qie(t){for(var e=[],n=[],r=0;r<t.length;r+=1){var s=t[r];n.push(s),s.lastPointOfContour&&(e.push(n),n=[])}return jn.argument(n.length===0,"There are still points left in the current contour."),e}function s8(t){var e=new Ys;if(!t)return e;for(var n=qie(t),r=0;r<n.length;++r){var s=n[r],i=null,o=s[s.length-1],a=s[0];if(o.onCurve)e.moveTo(o.x,o.y);else if(a.onCurve)e.moveTo(a.x,a.y);else{var l={x:(o.x+a.x)*.5,y:(o.y+a.y)*.5};e.moveTo(l.x,l.y)}for(var c=0;c<s.length;++c)if(i=o,o=a,a=s[(c+1)%s.length],o.onCurve)e.lineTo(o.x,o.y);else{var u=a;i.onCurve||((o.x+i.x)*.5,(o.y+i.y)*.5),a.onCurve||(u={x:(o.x+a.x)*.5,y:(o.y+a.y)*.5}),e.quadraticCurveTo(o.x,o.y,u.x,u.y)}e.closePath()}return e}function i8(t,e){if(e.isComposite)for(var n=0;n<e.components.length;n+=1){var r=e.components[n],s=t.get(r.glyphIndex);if(s.getPath(),s.points){var i=void 0;if(r.matchedPoints===void 0)i=Yw(s.points,r);else{if(r.matchedPoints[0]>e.points.length-1||r.matchedPoints[1]>s.points.length-1)throw Error("Matched points out of range in "+e.name);var o=e.points[r.matchedPoints[0]],a=s.points[r.matchedPoints[1]],l={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0};a=Yw([a],l)[0],l.dx=o.x-a.x,l.dy=o.y-a.y,i=Yw(s.points,l)}e.points=e.points.concat(i)}}return s8(e.points)}function Yie(t,e,n,r){for(var s=new vl.GlyphSet(r),i=0;i<n.length-1;i+=1){var o=n[i],a=n[i+1];o!==a?s.push(i,vl.ttfGlyphLoader(r,i,r8,t,e+o,i8)):s.push(i,vl.glyphLoader(r,i))}return s}function Xie(t,e,n,r){var s=new vl.GlyphSet(r);return r._push=function(i){var o=n[i],a=n[i+1];o!==a?s.push(i,vl.ttfGlyphLoader(r,i,r8,t,e+o,i8)):s.push(i,vl.glyphLoader(r,i))},s}function Zie(t,e,n,r,s){return s.lowMemory?Xie(t,e,n,r):Yie(t,e,n,r)}var o8={getPath:s8,parse:Zie},a8,eh,l8,w2;function c8(t){this.font=t,this.getCommands=function(e){return o8.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Jie(t){return t}function u8(t){return Math.sign(t)*Math.round(Math.abs(t))}function Qie(t){return Math.sign(t)*Math.round(Math.abs(t*2))/2}function eoe(t){return Math.sign(t)*(Math.round(Math.abs(t)+.5)-.5)}function toe(t){return Math.sign(t)*Math.ceil(Math.abs(t))}function noe(t){return Math.sign(t)*Math.floor(Math.abs(t))}var d8=function(t){var e=this.srPeriod,n=this.srPhase,r=this.srThreshold,s=1;return t<0&&(t=-t,s=-1),t+=r-n,t=Math.trunc(t/e)*e,t+=n,t<0?n*s:t*s},fl={x:1,y:0,axis:"x",distance:function(t,e,n,r){return(n?t.xo:t.x)-(r?e.xo:e.x)},interpolate:function(t,e,n,r){var s,i,o,a,l,c,u;if(!r||r===this){if(s=t.xo-e.xo,i=t.xo-n.xo,l=e.x-e.xo,c=n.x-n.xo,o=Math.abs(s),a=Math.abs(i),u=o+a,u===0){t.x=t.xo+(l+c)/2;return}t.x=t.xo+(l*a+c*o)/u;return}if(s=r.distance(t,e,!0,!0),i=r.distance(t,n,!0,!0),l=r.distance(e,e,!1,!0),c=r.distance(n,n,!1,!0),o=Math.abs(s),a=Math.abs(i),u=o+a,u===0){fl.setRelative(t,t,(l+c)/2,r,!0);return}fl.setRelative(t,t,(l*a+c*o)/u,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(t,e,n,r,s){if(!r||r===this){t.x=(s?e.xo:e.x)+n;return}var i=s?e.xo:e.x,o=s?e.yo:e.y,a=i+n*r.x,l=o+n*r.y;t.x=a+(t.y-l)/r.normalSlope},slope:0,touch:function(t){t.xTouched=!0},touched:function(t){return t.xTouched},untouch:function(t){t.xTouched=!1}},ac={x:0,y:1,axis:"y",distance:function(t,e,n,r){return(n?t.yo:t.y)-(r?e.yo:e.y)},interpolate:function(t,e,n,r){var s,i,o,a,l,c,u;if(!r||r===this){if(s=t.yo-e.yo,i=t.yo-n.yo,l=e.y-e.yo,c=n.y-n.yo,o=Math.abs(s),a=Math.abs(i),u=o+a,u===0){t.y=t.yo+(l+c)/2;return}t.y=t.yo+(l*a+c*o)/u;return}if(s=r.distance(t,e,!0,!0),i=r.distance(t,n,!0,!0),l=r.distance(e,e,!1,!0),c=r.distance(n,n,!1,!0),o=Math.abs(s),a=Math.abs(i),u=o+a,u===0){ac.setRelative(t,t,(l+c)/2,r,!0);return}ac.setRelative(t,t,(l*a+c*o)/u,r,!0)},normalSlope:0,setRelative:function(t,e,n,r,s){if(!r||r===this){t.y=(s?e.yo:e.y)+n;return}var i=s?e.xo:e.x,o=s?e.yo:e.y,a=i+n*r.x,l=o+n*r.y;t.y=l+r.normalSlope*(t.x-a)},slope:Number.POSITIVE_INFINITY,touch:function(t){t.yTouched=!0},touched:function(t){return t.yTouched},untouch:function(t){t.yTouched=!1}};Object.freeze(fl);Object.freeze(ac);function xv(t,e){this.x=t,this.y=e,this.axis=void 0,this.slope=e/t,this.normalSlope=-t/e,Object.freeze(this)}xv.prototype.distance=function(t,e,n,r){return this.x*fl.distance(t,e,n,r)+this.y*ac.distance(t,e,n,r)};xv.prototype.interpolate=function(t,e,n,r){var s,i,o,a,l,c,u;if(o=r.distance(t,e,!0,!0),a=r.distance(t,n,!0,!0),s=r.distance(e,e,!1,!0),i=r.distance(n,n,!1,!0),l=Math.abs(o),c=Math.abs(a),u=l+c,u===0){this.setRelative(t,t,(s+i)/2,r,!0);return}this.setRelative(t,t,(s*c+i*l)/u,r,!0)};xv.prototype.setRelative=function(t,e,n,r,s){r=r||this;var i=s?e.xo:e.x,o=s?e.yo:e.y,a=i+n*r.x,l=o+n*r.y,c=r.normalSlope,u=this.slope,d=t.x,h=t.y;t.x=(u*d-c*a+l-h)/(u-c),t.y=u*(t.x-d)+h};xv.prototype.touch=function(t){t.xTouched=!0,t.yTouched=!0};function Sv(t,e){var n=Math.sqrt(t*t+e*e);return t/=n,e/=n,t===1&&e===0?fl:t===0&&e===1?ac:new xv(t,e)}function pc(t,e,n,r){this.x=this.xo=Math.round(t*64)/64,this.y=this.yo=Math.round(e*64)/64,this.lastPointOfContour=n,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}pc.prototype.nextTouched=function(t){for(var e=this.nextPointOnContour;!t.touched(e)&&e!==this;)e=e.nextPointOnContour;return e};pc.prototype.prevTouched=function(t){for(var e=this.prevPointOnContour;!t.touched(e)&&e!==this;)e=e.prevPointOnContour;return e};var Pg=Object.freeze(new pc(0,0)),roe={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function wu(t,e){switch(this.env=t,this.stack=[],this.prog=e,t){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=fl,this.round=u8}}c8.prototype.exec=function(t,e){if(typeof e!="number")throw new Error("Point size is not a number!");if(!(this._errorState>2)){var n=this.font,r=this._prepState;if(!r||r.ppem!==e){var s=this._fpgmState;if(!s){wu.prototype=roe,s=this._fpgmState=new wu("fpgm",n.tables.fpgm),s.funcs=[],s.font=n,exports.DEBUG&&(console.log("---EXEC FPGM---"),s.step=-1);try{eh(s)}catch(c){console.log("Hinting error in FPGM:"+c),this._errorState=3;return}}wu.prototype=s,r=this._prepState=new wu("prep",n.tables.prep),r.ppem=e;var i=n.tables.cvt;if(i)for(var o=r.cvt=new Array(i.length),a=e/n.unitsPerEm,l=0;l<i.length;l++)o[l]=i[l]*a;else r.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),r.step=-1);try{eh(r)}catch(c){this._errorState<2&&console.log("Hinting error in PREP:"+c),this._errorState=2}}if(!(this._errorState>1))try{return l8(t,r)}catch(c){this._errorState<1&&(console.log("Hinting error:"+c),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}}};l8=function(t,e){var n=e.ppem/e.font.unitsPerEm,r=n,s=t.components,i,o,a;if(wu.prototype=e,!s)a=new wu("glyf",t.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),a.step=-1),w2(t,a,n,r),o=a.gZone;else{var l=e.font;o=[],i=[];for(var c=0;c<s.length;c++){var u=s[c],d=l.glyphs.get(u.glyphIndex);a=new wu("glyf",d.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+c+"---"),a.step=-1),w2(d,a,n,r);for(var h=Math.round(u.dx*n),f=Math.round(u.dy*r),m=a.gZone,v=a.contours,y=0;y<m.length;y++){var g=m[y];g.xTouched=g.yTouched=!1,g.xo=g.x=g.x+h,g.yo=g.y=g.y+f}var S=o.length;o.push.apply(o,m);for(var _=0;_<v.length;_++)i.push(v[_]+S)}t.instructions&&!a.inhibitGridFit&&(a=new wu("glyf",t.instructions),a.gZone=a.z0=a.z1=a.z2=o,a.contours=i,o.push(new pc(0,0),new pc(Math.round(t.advanceWidth*n),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),a.step=-1),eh(a),o.length-=2)}return o};w2=function(t,e,n,r){for(var s=t.points||[],i=s.length,o=e.gZone=e.z0=e.z1=e.z2=[],a=e.contours=[],l,c=0;c<i;c++)l=s[c],o[c]=new pc(l.x*n,l.y*r,l.lastPointOfContour,l.onCurve);for(var u,d,h=0;h<i;h++)l=o[h],u||(u=l,a.push(h)),l.lastPointOfContour?(l.nextPointOnContour=u,u.prevPointOnContour=l,u=void 0):(d=o[h+1],l.nextPointOnContour=d,d.prevPointOnContour=l);if(!e.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",e.stack);for(var f=0;f<i;f++)console.log(f,o[f].x,o[f].y)}if(o.push(new pc(0,0),new pc(Math.round(t.advanceWidth*n),0)),eh(e),o.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",e.stack);for(var m=0;m<i;m++)console.log(m,o[m].x,o[m].y)}}};eh=function(t){var e=t.prog;if(e){var n=e.length,r;for(t.ip=0;t.ip<n;t.ip++){if(exports.DEBUG&&t.step++,r=a8[e[t.ip]],!r)throw new Error("unknown instruction: 0x"+Number(e[t.ip]).toString(16));r(t)}}};function H1(t){for(var e=t.tZone=new Array(t.gZone.length),n=0;n<e.length;n++)e[n]=new pc(0,0)}function h8(t,e){var n=t.prog,r=t.ip,s=1,i;do if(i=n[++r],i===88)s++;else if(i===89)s--;else if(i===64)r+=n[r+1]+1;else if(i===65)r+=2*n[r+1]+1;else if(i>=176&&i<=183)r+=i-176+1;else if(i>=184&&i<=191)r+=(i-184+1)*2;else if(e&&s===1&&i===27)break;while(s>0);t.ip=r}function fI(t,e){exports.DEBUG&&console.log(e.step,"SVTCA["+t.axis+"]"),e.fv=e.pv=e.dpv=t}function pI(t,e){exports.DEBUG&&console.log(e.step,"SPVTCA["+t.axis+"]"),e.pv=e.dpv=t}function mI(t,e){exports.DEBUG&&console.log(e.step,"SFVTCA["+t.axis+"]"),e.fv=t}function gI(t,e){var n=e.stack,r=n.pop(),s=n.pop(),i=e.z2[r],o=e.z1[s];exports.DEBUG&&console.log("SPVTL["+t+"]",r,s);var a,l;t?(a=i.y-o.y,l=o.x-i.x):(a=o.x-i.x,l=o.y-i.y),e.pv=e.dpv=Sv(a,l)}function vI(t,e){var n=e.stack,r=n.pop(),s=n.pop(),i=e.z2[r],o=e.z1[s];exports.DEBUG&&console.log("SFVTL["+t+"]",r,s);var a,l;t?(a=i.y-o.y,l=o.x-i.x):(a=o.x-i.x,l=o.y-i.y),e.fv=Sv(a,l)}function soe(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"SPVFS[]",n,r),t.pv=t.dpv=Sv(r,n)}function ioe(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"SPVFS[]",n,r),t.fv=Sv(r,n)}function ooe(t){var e=t.stack,n=t.pv;exports.DEBUG&&console.log(t.step,"GPV[]"),e.push(n.x*16384),e.push(n.y*16384)}function aoe(t){var e=t.stack,n=t.fv;exports.DEBUG&&console.log(t.step,"GFV[]"),e.push(n.x*16384),e.push(n.y*16384)}function loe(t){t.fv=t.pv,exports.DEBUG&&console.log(t.step,"SFVTPV[]")}function coe(t){var e=t.stack,n=e.pop(),r=e.pop(),s=e.pop(),i=e.pop(),o=e.pop(),a=t.z0,l=t.z1,c=a[n],u=a[r],d=l[s],h=l[i],f=t.z2[o];exports.DEBUG&&console.log("ISECT[], ",n,r,s,i,o);var m=c.x,v=c.y,y=u.x,g=u.y,S=d.x,_=d.y,w=h.x,E=h.y,C=(m-y)*(_-E)-(v-g)*(S-w),T=m*g-v*y,I=S*E-_*w;f.x=(T*(S-w)-I*(m-y))/C,f.y=(T*(_-E)-I*(v-g))/C}function uoe(t){t.rp0=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP0[]",t.rp0)}function doe(t){t.rp1=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP1[]",t.rp1)}function hoe(t){t.rp2=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP2[]",t.rp2)}function foe(t){var e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP0[]",e),t.zp0=e,e){case 0:t.tZone||H1(t),t.z0=t.tZone;break;case 1:t.z0=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function poe(t){var e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP1[]",e),t.zp1=e,e){case 0:t.tZone||H1(t),t.z1=t.tZone;break;case 1:t.z1=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function moe(t){var e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP2[]",e),t.zp2=e,e){case 0:t.tZone||H1(t),t.z2=t.tZone;break;case 1:t.z2=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function goe(t){var e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZPS[]",e),t.zp0=t.zp1=t.zp2=e,e){case 0:t.tZone||H1(t),t.z0=t.z1=t.z2=t.tZone;break;case 1:t.z0=t.z1=t.z2=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function voe(t){t.loop=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SLOOP[]",t.loop)}function yoe(t){exports.DEBUG&&console.log(t.step,"RTG[]"),t.round=u8}function boe(t){exports.DEBUG&&console.log(t.step,"RTHG[]"),t.round=eoe}function _oe(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SMD[]",e),t.minDis=e/64}function woe(t){exports.DEBUG&&console.log(t.step,"ELSE[]"),h8(t,!1)}function xoe(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"JMPR[]",e),t.ip+=e-1}function Soe(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCVTCI[]",e),t.cvCutIn=e/64}function Eoe(t){var e=t.stack;exports.DEBUG&&console.log(t.step,"DUP[]"),e.push(e[e.length-1])}function Xw(t){exports.DEBUG&&console.log(t.step,"POP[]"),t.stack.pop()}function Coe(t){exports.DEBUG&&console.log(t.step,"CLEAR[]"),t.stack.length=0}function Toe(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"SWAP[]"),e.push(n),e.push(r)}function Moe(t){var e=t.stack;exports.DEBUG&&console.log(t.step,"DEPTH[]"),e.push(e.length)}function Aoe(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"LOOPCALL[]",n,r);var s=t.ip,i=t.prog;t.prog=t.funcs[n];for(var o=0;o<r;o++)eh(t),exports.DEBUG&&console.log(++t.step,o+1<r?"next loopcall":"done loopcall",o);t.ip=s,t.prog=i}function koe(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"CALL[]",e);var n=t.ip,r=t.prog;t.prog=t.funcs[e],eh(t),t.ip=n,t.prog=r,exports.DEBUG&&console.log(++t.step,"returning from",e)}function Ioe(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"CINDEX[]",n),e.push(e[e.length-n])}function Poe(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"MINDEX[]",n),e.push(e.splice(e.length-n,1)[0])}function Roe(t){if(t.env!=="fpgm")throw new Error("FDEF not allowed here");var e=t.stack,n=t.prog,r=t.ip,s=e.pop(),i=r;for(exports.DEBUG&&console.log(t.step,"FDEF[]",s);n[++r]!==45;);t.ip=r,t.funcs[s]=n.slice(i+1,r)}function yI(t,e){var n=e.stack.pop(),r=e.z0[n],s=e.fv,i=e.pv;exports.DEBUG&&console.log(e.step,"MDAP["+t+"]",n);var o=i.distance(r,Pg);t&&(o=e.round(o)),s.setRelative(r,Pg,o,i),s.touch(r),e.rp0=e.rp1=n}function bI(t,e){var n=e.z2,r=n.length-2,s,i,o;exports.DEBUG&&console.log(e.step,"IUP["+t.axis+"]");for(var a=0;a<r;a++)s=n[a],!t.touched(s)&&(i=s.prevTouched(t),i!==s&&(o=s.nextTouched(t),i===o&&t.setRelative(s,s,t.distance(i,i,!1,!0),t,!0),t.interpolate(s,i,o,t)))}function _I(t,e){for(var n=e.stack,r=t?e.rp1:e.rp2,s=(t?e.z0:e.z1)[r],i=e.fv,o=e.pv,a=e.loop,l=e.z2;a--;){var c=n.pop(),u=l[c],d=o.distance(s,s,!1,!0);i.setRelative(u,u,d,o),i.touch(u),exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-a)+": ":"")+"SHP["+(t?"rp1":"rp2")+"]",c)}e.loop=1}function wI(t,e){var n=e.stack,r=t?e.rp1:e.rp2,s=(t?e.z0:e.z1)[r],i=e.fv,o=e.pv,a=n.pop(),l=e.z2[e.contours[a]],c=l;exports.DEBUG&&console.log(e.step,"SHC["+t+"]",a);var u=o.distance(s,s,!1,!0);do c!==s&&i.setRelative(c,c,u,o),c=c.nextPointOnContour;while(c!==l)}function xI(t,e){var n=e.stack,r=t?e.rp1:e.rp2,s=(t?e.z0:e.z1)[r],i=e.fv,o=e.pv,a=n.pop();exports.DEBUG&&console.log(e.step,"SHZ["+t+"]",a);var l;switch(a){case 0:l=e.tZone;break;case 1:l=e.gZone;break;default:throw new Error("Invalid zone")}for(var c,u=o.distance(s,s,!1,!0),d=l.length-2,h=0;h<d;h++)c=l[h],i.setRelative(c,c,u,o)}function Loe(t){for(var e=t.stack,n=t.loop,r=t.fv,s=e.pop()/64,i=t.z2;n--;){var o=e.pop(),a=i[o];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-n)+": ":"")+"SHPIX[]",o,s),r.setRelative(a,a,s),r.touch(a)}t.loop=1}function Ooe(t){for(var e=t.stack,n=t.rp1,r=t.rp2,s=t.loop,i=t.z0[n],o=t.z1[r],a=t.fv,l=t.dpv,c=t.z2;s--;){var u=e.pop(),d=c[u];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-s)+": ":"")+"IP[]",u,n,"<->",r),a.interpolate(d,i,o,l),a.touch(d)}t.loop=1}function SI(t,e){var n=e.stack,r=n.pop()/64,s=n.pop(),i=e.z1[s],o=e.z0[e.rp0],a=e.fv,l=e.pv;a.setRelative(i,o,r,l),a.touch(i),exports.DEBUG&&console.log(e.step,"MSIRP["+t+"]",r,s),e.rp1=e.rp0,e.rp2=s,t&&(e.rp0=s)}function Noe(t){for(var e=t.stack,n=t.rp0,r=t.z0[n],s=t.loop,i=t.fv,o=t.pv,a=t.z1;s--;){var l=e.pop(),c=a[l];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-s)+": ":"")+"ALIGNRP[]",l),i.setRelative(c,r,0,o),i.touch(c)}t.loop=1}function Doe(t){exports.DEBUG&&console.log(t.step,"RTDG[]"),t.round=Qie}function EI(t,e){var n=e.stack,r=n.pop(),s=n.pop(),i=e.z0[s],o=e.fv,a=e.pv,l=e.cvt[r];exports.DEBUG&&console.log(e.step,"MIAP["+t+"]",r,"(",l,")",s);var c=a.distance(i,Pg);t&&(Math.abs(c-l)<e.cvCutIn&&(c=l),c=e.round(c)),o.setRelative(i,Pg,c,a),e.zp0===0&&(i.xo=i.x,i.yo=i.y),o.touch(i),e.rp0=e.rp1=s}function Foe(t){var e=t.prog,n=t.ip,r=t.stack,s=e[++n];exports.DEBUG&&console.log(t.step,"NPUSHB[]",s);for(var i=0;i<s;i++)r.push(e[++n]);t.ip=n}function Boe(t){var e=t.ip,n=t.prog,r=t.stack,s=n[++e];exports.DEBUG&&console.log(t.step,"NPUSHW[]",s);for(var i=0;i<s;i++){var o=n[++e]<<8|n[++e];o&32768&&(o=-((o^65535)+1)),r.push(o)}t.ip=e}function Uoe(t){var e=t.stack,n=t.store;n||(n=t.store=[]);var r=e.pop(),s=e.pop();exports.DEBUG&&console.log(t.step,"WS",r,s),n[s]=r}function zoe(t){var e=t.stack,n=t.store,r=e.pop();exports.DEBUG&&console.log(t.step,"RS",r);var s=n&&n[r]||0;e.push(s)}function $oe(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"WCVTP",n,r),t.cvt[r]=n/64}function Voe(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"RCVT",n),e.push(t.cvt[n]*64)}function CI(t,e){var n=e.stack,r=n.pop(),s=e.z2[r];exports.DEBUG&&console.log(e.step,"GC["+t+"]",r),n.push(e.dpv.distance(s,Pg,t,!1)*64)}function TI(t,e){var n=e.stack,r=n.pop(),s=n.pop(),i=e.z1[r],o=e.z0[s],a=e.dpv.distance(o,i,t,t);exports.DEBUG&&console.log(e.step,"MD["+t+"]",r,s,"->",a),e.stack.push(Math.round(a*64))}function Hoe(t){exports.DEBUG&&console.log(t.step,"MPPEM[]"),t.stack.push(t.ppem)}function Goe(t){exports.DEBUG&&console.log(t.step,"FLIPON[]"),t.autoFlip=!0}function Woe(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"LT[]",n,r),e.push(r<n?1:0)}function joe(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"LTEQ[]",n,r),e.push(r<=n?1:0)}function Koe(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"GT[]",n,r),e.push(r>n?1:0)}function qoe(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"GTEQ[]",n,r),e.push(r>=n?1:0)}function Yoe(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"EQ[]",n,r),e.push(n===r?1:0)}function Xoe(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"NEQ[]",n,r),e.push(n!==r?1:0)}function Zoe(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"ODD[]",n),e.push(Math.trunc(n)%2?1:0)}function Joe(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"EVEN[]",n),e.push(Math.trunc(n)%2?0:1)}function Qoe(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"IF[]",e),e||(h8(t,!0),exports.DEBUG&&console.log(t.step,"EIF[]"))}function eae(t){exports.DEBUG&&console.log(t.step,"EIF[]")}function tae(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"AND[]",n,r),e.push(n&&r?1:0)}function nae(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"OR[]",n,r),e.push(n||r?1:0)}function rae(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"NOT[]",n),e.push(n?0:1)}function Zw(t,e){var n=e.stack,r=n.pop(),s=e.fv,i=e.pv,o=e.ppem,a=e.deltaBase+(t-1)*16,l=e.deltaShift,c=e.z0;exports.DEBUG&&console.log(e.step,"DELTAP["+t+"]",r,n);for(var u=0;u<r;u++){var d=n.pop(),h=n.pop(),f=a+((h&240)>>4);if(f===o){var m=(h&15)-8;m>=0&&m++,exports.DEBUG&&console.log(e.step,"DELTAPFIX",d,"by",m*l);var v=c[d];s.setRelative(v,v,m*l,i)}}}function sae(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"SDB[]",n),t.deltaBase=n}function iae(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"SDS[]",n),t.deltaShift=Math.pow(.5,n)}function oae(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"ADD[]",n,r),e.push(r+n)}function aae(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"SUB[]",n,r),e.push(r-n)}function lae(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"DIV[]",n,r),e.push(r*64/n)}function cae(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"MUL[]",n,r),e.push(r*n/64)}function uae(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"ABS[]",n),e.push(Math.abs(n))}function dae(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"NEG[]",n),e.push(-n)}function hae(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"FLOOR[]",n),e.push(Math.floor(n/64)*64)}function fae(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"CEILING[]",n),e.push(Math.ceil(n/64)*64)}function q0(t,e){var n=e.stack,r=n.pop();exports.DEBUG&&console.log(e.step,"ROUND[]"),n.push(e.round(r/64)*64)}function pae(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"WCVTF[]",n,r),t.cvt[r]=n*t.ppem/t.font.unitsPerEm}function Jw(t,e){var n=e.stack,r=n.pop(),s=e.ppem,i=e.deltaBase+(t-1)*16,o=e.deltaShift;exports.DEBUG&&console.log(e.step,"DELTAC["+t+"]",r,n);for(var a=0;a<r;a++){var l=n.pop(),c=n.pop(),u=i+((c&240)>>4);if(u===s){var d=(c&15)-8;d>=0&&d++;var h=d*o;exports.DEBUG&&console.log(e.step,"DELTACFIX",l,"by",h),e.cvt[l]+=h}}}function mae(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SROUND[]",e),t.round=d8;var n;switch(e&192){case 0:n=.5;break;case 64:n=1;break;case 128:n=2;break;default:throw new Error("invalid SROUND value")}switch(t.srPeriod=n,e&48){case 0:t.srPhase=0;break;case 16:t.srPhase=.25*n;break;case 32:t.srPhase=.5*n;break;case 48:t.srPhase=.75*n;break;default:throw new Error("invalid SROUND value")}e&=15,e===0?t.srThreshold=0:t.srThreshold=(e/8-.5)*n}function gae(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"S45ROUND[]",e),t.round=d8;var n;switch(e&192){case 0:n=Math.sqrt(2)/2;break;case 64:n=Math.sqrt(2);break;case 128:n=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(t.srPeriod=n,e&48){case 0:t.srPhase=0;break;case 16:t.srPhase=.25*n;break;case 32:t.srPhase=.5*n;break;case 48:t.srPhase=.75*n;break;default:throw new Error("invalid S45ROUND value")}e&=15,e===0?t.srThreshold=0:t.srThreshold=(e/8-.5)*n}function vae(t){exports.DEBUG&&console.log(t.step,"ROFF[]"),t.round=Jie}function yae(t){exports.DEBUG&&console.log(t.step,"RUTG[]"),t.round=toe}function bae(t){exports.DEBUG&&console.log(t.step,"RDTG[]"),t.round=noe}function _ae(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCANCTRL[]",e)}function MI(t,e){var n=e.stack,r=n.pop(),s=n.pop(),i=e.z2[r],o=e.z1[s];exports.DEBUG&&console.log(e.step,"SDPVTL["+t+"]",r,s);var a,l;t?(a=i.y-o.y,l=o.x-i.x):(a=o.x-i.x,l=o.y-i.y),e.dpv=Sv(a,l)}function wae(t){var e=t.stack,n=e.pop(),r=0;exports.DEBUG&&console.log(t.step,"GETINFO[]",n),n&1&&(r=35),n&32&&(r|=4096),e.push(r)}function xae(t){var e=t.stack,n=e.pop(),r=e.pop(),s=e.pop();exports.DEBUG&&console.log(t.step,"ROLL[]"),e.push(r),e.push(n),e.push(s)}function Sae(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"MAX[]",n,r),e.push(Math.max(r,n))}function Eae(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"MIN[]",n,r),e.push(Math.min(r,n))}function Cae(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCANTYPE[]",e)}function Tae(t){var e=t.stack.pop(),n=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"INSTCTRL[]",e,n),e){case 1:t.inhibitGridFit=!!n;return;case 2:t.ignoreCvt=!!n;return;default:throw new Error("invalid INSTCTRL[] selector")}}function nu(t,e){var n=e.stack,r=e.prog,s=e.ip;exports.DEBUG&&console.log(e.step,"PUSHB["+t+"]");for(var i=0;i<t;i++)n.push(r[++s]);e.ip=s}function ru(t,e){var n=e.ip,r=e.prog,s=e.stack;exports.DEBUG&&console.log(e.ip,"PUSHW["+t+"]");for(var i=0;i<t;i++){var o=r[++n]<<8|r[++n];o&32768&&(o=-((o^65535)+1)),s.push(o)}e.ip=n}function wn(t,e,n,r,s,i){var o=i.stack,a=t&&o.pop(),l=o.pop(),c=i.rp0,u=i.z0[c],d=i.z1[l],h=i.minDis,f=i.fv,m=i.dpv,v,y,g,S;y=v=m.distance(d,u,!0,!0),g=y>=0?1:-1,y=Math.abs(y),t&&(S=i.cvt[a],r&&Math.abs(y-S)<i.cvCutIn&&(y=S)),n&&y<h&&(y=h),r&&(y=i.round(y)),f.setRelative(d,u,g*y,m),f.touch(d),exports.DEBUG&&console.log(i.step,(t?"MIRP[":"MDRP[")+(e?"M":"m")+(n?">":"_")+(r?"R":"_")+(s===0?"Gr":s===1?"Bl":s===2?"Wh":"")+"]",t?a+"("+i.cvt[a]+","+S+")":"",l,"(d =",v,"->",g*y,")"),i.rp1=i.rp0,i.rp2=l,e&&(i.rp0=l)}a8=[fI.bind(void 0,ac),fI.bind(void 0,fl),pI.bind(void 0,ac),pI.bind(void 0,fl),mI.bind(void 0,ac),mI.bind(void 0,fl),gI.bind(void 0,0),gI.bind(void 0,1),vI.bind(void 0,0),vI.bind(void 0,1),soe,ioe,ooe,aoe,loe,coe,uoe,doe,hoe,foe,poe,moe,goe,voe,yoe,boe,_oe,woe,xoe,Soe,void 0,void 0,Eoe,Xw,Coe,Toe,Moe,Ioe,Poe,void 0,void 0,void 0,Aoe,koe,Roe,void 0,yI.bind(void 0,0),yI.bind(void 0,1),bI.bind(void 0,ac),bI.bind(void 0,fl),_I.bind(void 0,0),_I.bind(void 0,1),wI.bind(void 0,0),wI.bind(void 0,1),xI.bind(void 0,0),xI.bind(void 0,1),Loe,Ooe,SI.bind(void 0,0),SI.bind(void 0,1),Noe,Doe,EI.bind(void 0,0),EI.bind(void 0,1),Foe,Boe,Uoe,zoe,$oe,Voe,CI.bind(void 0,0),CI.bind(void 0,1),void 0,TI.bind(void 0,0),TI.bind(void 0,1),Hoe,void 0,Goe,void 0,void 0,Woe,joe,Koe,qoe,Yoe,Xoe,Zoe,Joe,Qoe,eae,tae,nae,rae,Zw.bind(void 0,1),sae,iae,oae,aae,lae,cae,uae,dae,hae,fae,q0.bind(void 0,0),q0.bind(void 0,1),q0.bind(void 0,2),q0.bind(void 0,3),void 0,void 0,void 0,void 0,pae,Zw.bind(void 0,2),Zw.bind(void 0,3),Jw.bind(void 0,1),Jw.bind(void 0,2),Jw.bind(void 0,3),mae,gae,void 0,void 0,vae,void 0,yae,bae,Xw,Xw,void 0,void 0,void 0,void 0,void 0,_ae,MI.bind(void 0,0),MI.bind(void 0,1),wae,void 0,xae,Sae,Eae,Cae,Tae,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,nu.bind(void 0,1),nu.bind(void 0,2),nu.bind(void 0,3),nu.bind(void 0,4),nu.bind(void 0,5),nu.bind(void 0,6),nu.bind(void 0,7),nu.bind(void 0,8),ru.bind(void 0,1),ru.bind(void 0,2),ru.bind(void 0,3),ru.bind(void 0,4),ru.bind(void 0,5),ru.bind(void 0,6),ru.bind(void 0,7),ru.bind(void 0,8),wn.bind(void 0,0,0,0,0,0),wn.bind(void 0,0,0,0,0,1),wn.bind(void 0,0,0,0,0,2),wn.bind(void 0,0,0,0,0,3),wn.bind(void 0,0,0,0,1,0),wn.bind(void 0,0,0,0,1,1),wn.bind(void 0,0,0,0,1,2),wn.bind(void 0,0,0,0,1,3),wn.bind(void 0,0,0,1,0,0),wn.bind(void 0,0,0,1,0,1),wn.bind(void 0,0,0,1,0,2),wn.bind(void 0,0,0,1,0,3),wn.bind(void 0,0,0,1,1,0),wn.bind(void 0,0,0,1,1,1),wn.bind(void 0,0,0,1,1,2),wn.bind(void 0,0,0,1,1,3),wn.bind(void 0,0,1,0,0,0),wn.bind(void 0,0,1,0,0,1),wn.bind(void 0,0,1,0,0,2),wn.bind(void 0,0,1,0,0,3),wn.bind(void 0,0,1,0,1,0),wn.bind(void 0,0,1,0,1,1),wn.bind(void 0,0,1,0,1,2),wn.bind(void 0,0,1,0,1,3),wn.bind(void 0,0,1,1,0,0),wn.bind(void 0,0,1,1,0,1),wn.bind(void 0,0,1,1,0,2),wn.bind(void 0,0,1,1,0,3),wn.bind(void 0,0,1,1,1,0),wn.bind(void 0,0,1,1,1,1),wn.bind(void 0,0,1,1,1,2),wn.bind(void 0,0,1,1,1,3),wn.bind(void 0,1,0,0,0,0),wn.bind(void 0,1,0,0,0,1),wn.bind(void 0,1,0,0,0,2),wn.bind(void 0,1,0,0,0,3),wn.bind(void 0,1,0,0,1,0),wn.bind(void 0,1,0,0,1,1),wn.bind(void 0,1,0,0,1,2),wn.bind(void 0,1,0,0,1,3),wn.bind(void 0,1,0,1,0,0),wn.bind(void 0,1,0,1,0,1),wn.bind(void 0,1,0,1,0,2),wn.bind(void 0,1,0,1,0,3),wn.bind(void 0,1,0,1,1,0),wn.bind(void 0,1,0,1,1,1),wn.bind(void 0,1,0,1,1,2),wn.bind(void 0,1,0,1,1,3),wn.bind(void 0,1,1,0,0,0),wn.bind(void 0,1,1,0,0,1),wn.bind(void 0,1,1,0,0,2),wn.bind(void 0,1,1,0,0,3),wn.bind(void 0,1,1,0,1,0),wn.bind(void 0,1,1,0,1,1),wn.bind(void 0,1,1,0,1,2),wn.bind(void 0,1,1,0,1,3),wn.bind(void 0,1,1,1,0,0),wn.bind(void 0,1,1,1,0,1),wn.bind(void 0,1,1,1,0,2),wn.bind(void 0,1,1,1,0,3),wn.bind(void 0,1,1,1,1,0),wn.bind(void 0,1,1,1,1,1),wn.bind(void 0,1,1,1,1,2),wn.bind(void 0,1,1,1,1,3)];function jp(t){this.char=t,this.state={},this.activeState=null}function JC(t,e,n){this.contextName=n,this.startIndex=t,this.endOffset=e}function Mae(t,e,n){this.contextName=t,this.openRange=null,this.ranges=[],this.checkStart=e,this.checkEnd=n}function Fa(t,e){this.context=t,this.index=e,this.length=t.length,this.current=t[e],this.backtrack=t.slice(0,e),this.lookahead=t.slice(e+1)}function G1(t){this.eventId=t,this.subscribers=[]}function Aae(t){var e=this,n=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];n.forEach(function(s){Object.defineProperty(e.events,s,{value:new G1(s)})}),t&&n.forEach(function(s){var i=t[s];typeof i=="function"&&e.events[s].subscribe(i)});var r=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];r.forEach(function(s){e.events[s].subscribe(e.updateContextsRanges)})}function Cs(t){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],Aae.call(this,t)}jp.prototype.setState=function(t,e){return this.state[t]=e,this.activeState={key:t,value:this.state[t]},this.activeState};jp.prototype.getState=function(t){return this.state[t]||null};Cs.prototype.inboundIndex=function(t){return t>=0&&t<this.tokens.length};Cs.prototype.composeRUD=function(t){var e=this,n=!0,r=t.map(function(i){return e[i[0]].apply(e,i.slice(1).concat(n))}),s=function(i){return typeof i=="object"&&i.hasOwnProperty("FAIL")};if(r.every(s))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:r.filter(s)};this.dispatch("composeRUD",[r.filter(function(i){return!s(i)})])};Cs.prototype.replaceRange=function(t,e,n,r){e=e!==null?e:this.tokens.length;var s=n.every(function(o){return o instanceof jp});if(!isNaN(t)&&this.inboundIndex(t)&&s){var i=this.tokens.splice.apply(this.tokens,[t,e].concat(n));return r||this.dispatch("replaceToken",[t,e,n]),[i,n]}else return{FAIL:"replaceRange: invalid tokens or startIndex."}};Cs.prototype.replaceToken=function(t,e,n){if(!isNaN(t)&&this.inboundIndex(t)&&e instanceof jp){var r=this.tokens.splice(t,1,e);return n||this.dispatch("replaceToken",[t,e]),[r[0],e]}else return{FAIL:"replaceToken: invalid token or index."}};Cs.prototype.removeRange=function(t,e,n){e=isNaN(e)?this.tokens.length:e;var r=this.tokens.splice(t,e);return n||this.dispatch("removeRange",[r,t,e]),r};Cs.prototype.removeToken=function(t,e){if(!isNaN(t)&&this.inboundIndex(t)){var n=this.tokens.splice(t,1);return e||this.dispatch("removeToken",[n,t]),n}else return{FAIL:"removeToken: invalid token index."}};Cs.prototype.insertToken=function(t,e,n){var r=t.every(function(s){return s instanceof jp});return r?(this.tokens.splice.apply(this.tokens,[e,0].concat(t)),n||this.dispatch("insertToken",[t,e]),t):{FAIL:"insertToken: invalid token(s)."}};Cs.prototype.registerModifier=function(t,e,n){this.events.newToken.subscribe(function(r,s){var i=[r,s],o=e===null||e.apply(this,i)===!0,a=[r,s];if(o){var l=n.apply(this,a);r.setState(t,l)}}),this.registeredModifiers.push(t)};G1.prototype.subscribe=function(t){return typeof t=="function"?this.subscribers.push(t)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}};G1.prototype.unsubscribe=function(t){this.subscribers.splice(t,1)};Fa.prototype.setCurrentIndex=function(t){this.index=t,this.current=this.context[t],this.backtrack=this.context.slice(0,t),this.lookahead=this.context.slice(t+1)};Fa.prototype.get=function(t){switch(!0){case t===0:return this.current;case(t<0&&Math.abs(t)<=this.backtrack.length):return this.backtrack.slice(t)[0];case(t>0&&t<=this.lookahead.length):return this.lookahead[t-1];default:return null}};Cs.prototype.rangeToText=function(t){if(t instanceof JC)return this.getRangeTokens(t).map(function(e){return e.char}).join("")};Cs.prototype.getText=function(){return this.tokens.map(function(t){return t.char}).join("")};Cs.prototype.getContext=function(t){var e=this.registeredContexts[t];return e||null};Cs.prototype.on=function(t,e){var n=this.events[t];return n?n.subscribe(e):null};Cs.prototype.dispatch=function(t,e){var n=this,r=this.events[t];r instanceof G1&&r.subscribers.forEach(function(s){s.apply(n,e||[])})};Cs.prototype.registerContextChecker=function(t,e,n){if(this.getContext(t))return{FAIL:"context name '"+t+"' is already registered."};if(typeof e!="function")return{FAIL:"missing context start check."};if(typeof n!="function")return{FAIL:"missing context end check."};var r=new Mae(t,e,n);return this.registeredContexts[t]=r,this.contextCheckers.push(r),r};Cs.prototype.getRangeTokens=function(t){var e=t.startIndex+t.endOffset;return[].concat(this.tokens.slice(t.startIndex,e))};Cs.prototype.getContextRanges=function(t){var e=this.getContext(t);return e?e.ranges:{FAIL:"context checker '"+t+"' is not registered."}};Cs.prototype.resetContextsRanges=function(){var t=this.registeredContexts;for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];n.ranges=[]}};Cs.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var t=this.tokens.map(function(r){return r.char}),e=0;e<t.length;e++){var n=new Fa(t,e);this.runContextCheck(n)}this.dispatch("updateContextsRanges",[this.registeredContexts])};Cs.prototype.setEndOffset=function(t,e){var n=this.getContext(e).openRange.startIndex,r=new JC(n,t,e),s=this.getContext(e).ranges;return r.rangeId=e+"."+s.length,s.push(r),this.getContext(e).openRange=null,r};Cs.prototype.runContextCheck=function(t){var e=this,n=t.index;this.contextCheckers.forEach(function(r){var s=r.contextName,i=e.getContext(s).openRange;if(!i&&r.checkStart(t)&&(i=new JC(n,null,s),e.getContext(s).openRange=i,e.dispatch("contextStart",[s,n])),i&&r.checkEnd(t)){var o=n-i.startIndex+1,a=e.setEndOffset(o,s);e.dispatch("contextEnd",[s,a])}})};Cs.prototype.tokenize=function(t){this.tokens=[],this.resetContextsRanges();var e=Array.from(t);this.dispatch("start");for(var n=0;n<e.length;n++){var r=e[n],s=new Fa(e,n);this.dispatch("next",[s]),this.runContextCheck(s);var i=new jp(r);this.tokens.push(i),this.dispatch("newToken",[i,s])}return this.dispatch("end",[this.tokens]),this.tokens};function Iu(t){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(t)}function f8(t){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(t)}function Ou(t){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(t)}function Ky(t){return/[A-z]/.test(t)}function kae(t){return/\s/.test(t)}function Fo(t){this.font=t,this.features={}}function Td(t){this.id=t.id,this.tag=t.tag,this.substitution=t.substitution}function Ev(t,e){if(!t)return-1;switch(e.format){case 1:return e.glyphs.indexOf(t);case 2:for(var n=e.ranges,r=0;r<n.length;r++){var s=n[r];if(t>=s.start&&t<=s.end){var i=t-s.start;return s.index+i}}break;default:return-1}return-1}function Iae(t,e){var n=Ev(t,e.coverage);return n===-1?null:t+e.deltaGlyphId}function Pae(t,e){var n=Ev(t,e.coverage);return n===-1?null:e.substitute[n]}function Qw(t,e){for(var n=[],r=0;r<t.length;r++){var s=t[r],i=e.current;i=Array.isArray(i)?i[0]:i;var o=Ev(i,s);o!==-1&&n.push(o)}return n.length!==t.length?-1:n}function Rae(t,e){var n=e.inputCoverage.length+e.lookaheadCoverage.length+e.backtrackCoverage.length;if(t.context.length<n)return[];var r=Qw(e.inputCoverage,t);if(r===-1)return[];var s=e.inputCoverage.length-1;if(t.lookahead.length<e.lookaheadCoverage.length)return[];for(var i=t.lookahead.slice(s);i.length&&Ou(i[0].char);)i.shift();var o=new Fa(i,0),a=Qw(e.lookaheadCoverage,o),l=[].concat(t.backtrack);for(l.reverse();l.length&&Ou(l[0].char);)l.shift();if(l.length<e.backtrackCoverage.length)return[];var c=new Fa(l,0),u=Qw(e.backtrackCoverage,c),d=r.length===e.inputCoverage.length&&a.length===e.lookaheadCoverage.length&&u.length===e.backtrackCoverage.length,h=[];if(d)for(var f=0;f<e.lookupRecords.length;f++)for(var m=e.lookupRecords[f],v=m.lookupListIndex,y=this.getLookupByIndex(v),g=0;g<y.subtables.length;g++){var S=y.subtables[g],_=this.getLookupMethod(y,S),w=this.getSubstitutionType(y,S);if(w==="12")for(var E=0;E<r.length;E++){var C=t.get(E),T=_(C);T&&h.push(T)}}return h}function Lae(t,e){var n=t.current,r=Ev(n,e.coverage);if(r===-1)return null;for(var s,i=e.ligatureSets[r],o=0;o<i.length;o++){s=i[o];for(var a=0;a<s.components.length;a++){var l=t.lookahead[a],c=s.components[a];if(l!==c)break;if(a===s.components.length-1)return s}}return null}function Oae(t,e){var n=Ev(t,e.coverage);return n===-1?null:e.sequences[n]}Fo.prototype.getDefaultScriptFeaturesIndexes=function(){for(var t=this.font.tables.gsub.scripts,e=0;e<t.length;e++){var n=t[e];if(n.tag==="DFLT")return n.script.defaultLangSys.featureIndexes}return[]};Fo.prototype.getScriptFeaturesIndexes=function(t){var e=this.font.tables;if(!e.gsub)return[];if(!t)return this.getDefaultScriptFeaturesIndexes();for(var n=this.font.tables.gsub.scripts,r=0;r<n.length;r++){var s=n[r];if(s.tag===t&&s.script.defaultLangSys)return s.script.defaultLangSys.featureIndexes;var i=s.langSysRecords;if(i)for(var o=0;o<i.length;o++){var a=i[o];if(a.tag===t){var l=a.langSys;return l.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()};Fo.prototype.mapTagsToFeatures=function(t,e){for(var n={},r=0;r<t.length;r++){var s=t[r].tag,i=t[r].feature;n[s]=i}this.features[e].tags=n};Fo.prototype.getScriptFeatures=function(t){var e=this.features[t];if(this.features.hasOwnProperty(t))return e;var n=this.getScriptFeaturesIndexes(t);if(!n)return null;var r=this.font.tables.gsub;return e=n.map(function(s){return r.features[s]}),this.features[t]=e,this.mapTagsToFeatures(e,t),e};Fo.prototype.getSubstitutionType=function(t,e){var n=t.lookupType.toString(),r=e.substFormat.toString();return n+r};Fo.prototype.getLookupMethod=function(t,e){var n=this,r=this.getSubstitutionType(t,e);switch(r){case"11":return function(s){return Iae.apply(n,[s,e])};case"12":return function(s){return Pae.apply(n,[s,e])};case"63":return function(s){return Rae.apply(n,[s,e])};case"41":return function(s){return Lae.apply(n,[s,e])};case"21":return function(s){return Oae.apply(n,[s,e])};default:throw new Error("lookupType: "+t.lookupType+" - substFormat: "+e.substFormat+" is not yet supported")}};Fo.prototype.lookupFeature=function(t){var e=t.contextParams,n=e.index,r=this.getFeature({tag:t.tag,script:t.script});if(!r)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+t.tag+"' for script '"+t.script+"'.");for(var s=this.getFeatureLookups(r),i=[].concat(e.context),o=0;o<s.length;o++)for(var a=s[o],l=this.getLookupSubtables(a),c=0;c<l.length;c++){var u=l[c],d=this.getSubstitutionType(a,u),h=this.getLookupMethod(a,u),f=void 0;switch(d){case"11":f=h(e.current),f&&i.splice(n,1,new Td({id:11,tag:t.tag,substitution:f}));break;case"12":f=h(e.current),f&&i.splice(n,1,new Td({id:12,tag:t.tag,substitution:f}));break;case"63":f=h(e),Array.isArray(f)&&f.length&&i.splice(n,1,new Td({id:63,tag:t.tag,substitution:f}));break;case"41":f=h(e),f&&i.splice(n,1,new Td({id:41,tag:t.tag,substitution:f}));break;case"21":f=h(e.current),f&&i.splice(n,1,new Td({id:21,tag:t.tag,substitution:f}));break}e=new Fa(i,n),!(Array.isArray(f)&&!f.length)&&(f=null)}return i.length?i:null};Fo.prototype.supports=function(t){if(!t.script)return!1;this.getScriptFeatures(t.script);var e=this.features.hasOwnProperty(t.script);if(!t.tag)return e;var n=this.features[t.script].some(function(r){return r.tag===t.tag});return e&&n};Fo.prototype.getLookupSubtables=function(t){return t.subtables||null};Fo.prototype.getLookupByIndex=function(t){var e=this.font.tables.gsub.lookups;return e[t]||null};Fo.prototype.getFeatureLookups=function(t){return t.lookupListIndexes.map(this.getLookupByIndex.bind(this))};Fo.prototype.getFeature=function(t){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(t.script)||this.getScriptFeatures(t.script);var e=this.features[t.script];return e?e.tags[t.tag]?this.features[t.script].tags[t.tag]:null:{FAIL:"No feature for script "+t.script}};function Nae(t){var e=t.current,n=t.get(-1);return n===null&&Iu(e)||!Iu(n)&&Iu(e)}function Dae(t){var e=t.get(1);return e===null||!Iu(e)}var Fae={startCheck:Nae,endCheck:Dae};function Bae(t){var e=t.current,n=t.get(-1);return(Iu(e)||Ou(e))&&!Iu(n)}function Uae(t){var e=t.get(1);switch(!0){case e===null:return!0;case(!Iu(e)&&!Ou(e)):var n=kae(e);if(!n)return!0;if(n){var r=!1;if(r=t.lookahead.some(function(s){return Iu(s)||Ou(s)}),!r)return!0}break;default:return!1}}var zae={startCheck:Bae,endCheck:Uae};function $ae(t,e,n){e[n].setState(t.tag,t.substitution)}function Vae(t,e,n){e[n].setState(t.tag,t.substitution)}function Hae(t,e,n){t.substitution.forEach(function(r,s){var i=e[n+s];i.setState(t.tag,r)})}function Gae(t,e,n){var r=e[n];r.setState(t.tag,t.substitution.ligGlyph);for(var s=t.substitution.components.length,i=0;i<s;i++)r=e[n+i+1],r.setState("deleted",!0)}var AI={11:$ae,12:Vae,63:Hae,41:Gae};function QC(t,e,n){t instanceof Td&&AI[t.id]&&AI[t.id](t,e,n)}function Wae(t){for(var e=[].concat(t.backtrack),n=e.length-1;n>=0;n--){var r=e[n],s=f8(r),i=Ou(r);if(!s&&!i)return!0;if(s)return!1}return!1}function jae(t){if(f8(t.current))return!1;for(var e=0;e<t.lookahead.length;e++){var n=t.lookahead[e],r=Ou(n);if(!r)return!0}return!1}function Kae(t){var e=this,n="arab",r=this.featuresTags[n],s=this.tokenizer.getRangeTokens(t);if(s.length!==1){var i=new Fa(s.map(function(a){return a.getState("glyphIndex")}),0),o=new Fa(s.map(function(a){return a.char}),0);s.forEach(function(a,l){if(!Ou(a.char)){i.setCurrentIndex(l),o.setCurrentIndex(l);var c=0;Wae(o)&&(c|=1),jae(o)&&(c|=2);var u;switch(c){case 1:u="fina";break;case 2:u="init";break;case 3:u="medi";break}if(r.indexOf(u)!==-1){var d=e.query.lookupFeature({tag:u,script:n,contextParams:i});if(d instanceof Error)return console.info(d.message);d.forEach(function(h,f){h instanceof Td&&(QC(h,s,f),i.context[f]=h.substitution)})}}})}}function kI(t,e){var n=t.map(function(r){return r.activeState.value});return new Fa(n,0)}function qae(t){var e=this,n="arab",r=this.tokenizer.getRangeTokens(t),s=kI(r);s.context.forEach(function(i,o){s.setCurrentIndex(o);var a=e.query.lookupFeature({tag:"rlig",script:n,contextParams:s});a.length&&(a.forEach(function(l){return QC(l,r,o)}),s=kI(r))})}function Yae(t){var e=t.current,n=t.get(-1);return n===null&&Ky(e)||!Ky(n)&&Ky(e)}function Xae(t){var e=t.get(1);return e===null||!Ky(e)}var Zae={startCheck:Yae,endCheck:Xae};function II(t,e){var n=t.map(function(r){return r.activeState.value});return new Fa(n,0)}function Jae(t){var e=this,n="latn",r=this.tokenizer.getRangeTokens(t),s=II(r);s.context.forEach(function(i,o){s.setCurrentIndex(o);var a=e.query.lookupFeature({tag:"liga",script:n,contextParams:s});a.length&&(a.forEach(function(l){return QC(l,r,o)}),s=II(r))})}function Ka(t){this.baseDir=t||"ltr",this.tokenizer=new Cs,this.featuresTags={}}Ka.prototype.setText=function(t){this.text=t};Ka.prototype.contextChecks={latinWordCheck:Zae,arabicWordCheck:Fae,arabicSentenceCheck:zae};function ex(t){var e=this.contextChecks[t+"Check"];return this.tokenizer.registerContextChecker(t,e.startCheck,e.endCheck)}function Qae(){return ex.call(this,"latinWord"),ex.call(this,"arabicWord"),ex.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function ele(){var t=this,e=this.tokenizer.getContextRanges("arabicSentence");e.forEach(function(n){var r=t.tokenizer.getRangeTokens(n);t.tokenizer.replaceRange(n.startIndex,n.endOffset,r.reverse())})}Ka.prototype.registerFeatures=function(t,e){var n=this,r=e.filter(function(s){return n.query.supports({script:t,tag:s})});this.featuresTags.hasOwnProperty(t)?this.featuresTags[t]=this.featuresTags[t].concat(r):this.featuresTags[t]=r};Ka.prototype.applyFeatures=function(t,e){if(!t)throw new Error("No valid font was provided to apply features");this.query||(this.query=new Fo(t));for(var n=0;n<e.length;n++){var r=e[n];this.query.supports({script:r.script})&&this.registerFeatures(r.script,r.tags)}};Ka.prototype.registerModifier=function(t,e,n){this.tokenizer.registerModifier(t,e,n)};function eT(){if(this.tokenizer.registeredModifiers.indexOf("glyphIndex")===-1)throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function tle(){var t=this,e="arab";if(this.featuresTags.hasOwnProperty(e)){eT.call(this);var n=this.tokenizer.getContextRanges("arabicWord");n.forEach(function(r){Kae.call(t,r)})}}function nle(){var t=this,e="arab";if(this.featuresTags.hasOwnProperty(e)){var n=this.featuresTags[e];if(n.indexOf("rlig")!==-1){eT.call(this);var r=this.tokenizer.getContextRanges("arabicWord");r.forEach(function(s){qae.call(t,s)})}}}function rle(){var t=this,e="latn";if(this.featuresTags.hasOwnProperty(e)){var n=this.featuresTags[e];if(n.indexOf("liga")!==-1){eT.call(this);var r=this.tokenizer.getContextRanges("latinWord");r.forEach(function(s){Jae.call(t,s)})}}}Ka.prototype.checkContextReady=function(t){return!!this.tokenizer.getContext(t)};Ka.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(tle.call(this),nle.call(this)),this.checkContextReady("latinWord")&&rle.call(this),this.checkContextReady("arabicSentence")&&ele.call(this)};Ka.prototype.processText=function(t){(!this.text||this.text!==t)&&(this.setText(t),Qae.call(this),this.applyFeaturesToContexts())};Ka.prototype.getBidiText=function(t){return this.processText(t),this.tokenizer.getText()};Ka.prototype.getTextGlyphs=function(t){this.processText(t);for(var e=[],n=0;n<this.tokenizer.tokens.length;n++){var r=this.tokenizer.tokens[n];if(!r.state.deleted){var s=r.activeState.value;e.push(Array.isArray(s)?s[0]:s)}}return e};function Yr(t){t=t||{},t.tables=t.tables||{},t.empty||(fm(t.familyName,"When creating a new Font object, familyName is required."),fm(t.styleName,"When creating a new Font object, styleName is required."),fm(t.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),fm(t.ascender,"When creating a new Font object, ascender is required."),fm(t.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:t.familyName||" "},fontSubfamily:{en:t.styleName||" "},fullName:{en:t.fullName||t.familyName+" "+t.styleName},postScriptName:{en:t.postScriptName||(t.familyName+t.styleName).replace(/\s/g,"")},designer:{en:t.designer||" "},designerURL:{en:t.designerURL||" "},manufacturer:{en:t.manufacturer||" "},manufacturerURL:{en:t.manufacturerURL||" "},license:{en:t.license||" "},licenseURL:{en:t.licenseURL||" "},version:{en:t.version||"Version 0.1"},description:{en:t.description||" "},copyright:{en:t.copyright||" "},trademark:{en:t.trademark||" "}},this.unitsPerEm=t.unitsPerEm||1e3,this.ascender=t.ascender,this.descender=t.descender,this.createdTimestamp=t.createdTimestamp,this.tables=Object.assign(t.tables,{os2:Object.assign({usWeightClass:t.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:t.widthClass||this.usWidthClasses.MEDIUM,fsSelection:t.fsSelection||this.fsSelectionValues.REGULAR},t.tables.os2)})),this.supported=!0,this.glyphs=new vl.GlyphSet(this,t.glyphs||[]),this.encoding=new R5(this),this.position=new wv(this),this.substitution=new Do(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new c8(this)}})}Yr.prototype.hasChar=function(t){return this.encoding.charToGlyphIndex(t)!==null};Yr.prototype.charToGlyphIndex=function(t){return this.encoding.charToGlyphIndex(t)};Yr.prototype.charToGlyph=function(t){var e=this.charToGlyphIndex(t),n=this.glyphs.get(e);return n||(n=this.glyphs.get(0)),n};Yr.prototype.updateFeatures=function(t){return this.defaultRenderOptions.features.map(function(e){return e.script==="latn"?{script:"latn",tags:e.tags.filter(function(n){return t[n]})}:e})};Yr.prototype.stringToGlyphs=function(t,e){var n=this,r=new Ka,s=function(d){return n.charToGlyphIndex(d.char)};r.registerModifier("glyphIndex",null,s);var i=e?this.updateFeatures(e.features):this.defaultRenderOptions.features;r.applyFeatures(this,i);for(var o=r.getTextGlyphs(t),a=o.length,l=new Array(a),c=this.glyphs.get(0),u=0;u<a;u+=1)l[u]=this.glyphs.get(o[u])||c;return l};Yr.prototype.nameToGlyphIndex=function(t){return this.glyphNames.nameToGlyphIndex(t)};Yr.prototype.nameToGlyph=function(t){var e=this.nameToGlyphIndex(t),n=this.glyphs.get(e);return n||(n=this.glyphs.get(0)),n};Yr.prototype.glyphIndexToName=function(t){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(t):""};Yr.prototype.getKerningValue=function(t,e){t=t.index||t,e=e.index||e;var n=this.position.defaultKerningTables;return n?this.position.getKerningValue(n,t,e):this.kerningPairs[t+","+e]||0};Yr.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]};Yr.prototype.forEachGlyph=function(t,e,n,r,s,i){e=e!==void 0?e:0,n=n!==void 0?n:0,r=r!==void 0?r:72,s=Object.assign({},this.defaultRenderOptions,s);var o=1/this.unitsPerEm*r,a=this.stringToGlyphs(t,s),l;if(s.kerning){var c=s.script||this.position.getDefaultScriptName();l=this.position.getKerningTables(c,s.language)}for(var u=0;u<a.length;u+=1){var d=a[u];if(i.call(this,d,e,n,r,s),d.advanceWidth&&(e+=d.advanceWidth*o),s.kerning&&u<a.length-1){var h=l?this.position.getKerningValue(l,d.index,a[u+1].index):this.getKerningValue(d,a[u+1]);e+=h*o}s.letterSpacing?e+=s.letterSpacing*r:s.tracking&&(e+=s.tracking/1e3*r)}return e};Yr.prototype.getPath=function(t,e,n,r,s){var i=new Ys;return this.forEachGlyph(t,e,n,r,s,function(o,a,l,c){var u=o.getPath(a,l,c,s,this);i.extend(u)}),i};Yr.prototype.getPaths=function(t,e,n,r,s){var i=[];return this.forEachGlyph(t,e,n,r,s,function(o,a,l,c){var u=o.getPath(a,l,c,s,this);i.push(u)}),i};Yr.prototype.getAdvanceWidth=function(t,e,n){return this.forEachGlyph(t,0,0,e,n,function(){})};Yr.prototype.draw=function(t,e,n,r,s,i){this.getPath(e,n,r,s,i).draw(t)};Yr.prototype.drawPoints=function(t,e,n,r,s,i){this.forEachGlyph(e,n,r,s,i,function(o,a,l,c){o.drawPoints(t,a,l,c)})};Yr.prototype.drawMetrics=function(t,e,n,r,s,i){this.forEachGlyph(e,n,r,s,i,function(o,a,l,c){o.drawMetrics(t,a,l,c)})};Yr.prototype.getEnglishName=function(t){var e=this.names[t];if(e)return e.en};Yr.prototype.validate=function(){var t=this;function e(n){var r=t.getEnglishName(n);r&&r.trim().length>0}e("fontFamily"),e("weightName"),e("manufacturer"),e("copyright"),e("version"),this.unitsPerEm>0};Yr.prototype.toTables=function(){return Gie.fontToTable(this)};Yr.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};Yr.prototype.toArrayBuffer=function(){for(var t=this.toTables(),e=t.encode(),n=new ArrayBuffer(e.length),r=new Uint8Array(n),s=0;s<e.length;s++)r[s]=e[s];return n};Yr.prototype.download=function(t){var e=this.getEnglishName("fontFamily"),n=this.getEnglishName("fontSubfamily");t=t||e.replace(/\s/g,"")+"-"+n+".otf";var r=this.toArrayBuffer();if(jie())if(window.URL=window.URL||window.webkitURL,window.URL){var s=new DataView(r),i=new Blob([s],{type:"font/opentype"}),o=document.createElement("a");o.href=window.URL.createObjectURL(i),o.download=t;var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!1),o.dispatchEvent(a)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var l=require("fs"),c=Kie(r);l.writeFileSync(t,c)}};Yr.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};Yr.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};Yr.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};function p8(t,e){var n=JSON.stringify(t),r=256;for(var s in e){var i=parseInt(s);if(!(!i||i<256)){if(JSON.stringify(e[s])===n)return i;r<=i&&(r=i+1)}}return e[r]=t,r}function sle(t,e,n){var r=p8(e.name,n);return[{name:"tag_"+t,type:"TAG",value:e.tag},{name:"minValue_"+t,type:"FIXED",value:e.minValue<<16},{name:"defaultValue_"+t,type:"FIXED",value:e.defaultValue<<16},{name:"maxValue_"+t,type:"FIXED",value:e.maxValue<<16},{name:"flags_"+t,type:"USHORT",value:0},{name:"nameID_"+t,type:"USHORT",value:r}]}function ile(t,e,n){var r={},s=new En.Parser(t,e);return r.tag=s.parseTag(),r.minValue=s.parseFixed(),r.defaultValue=s.parseFixed(),r.maxValue=s.parseFixed(),s.skip("uShort",1),r.name=n[s.parseUShort()]||{},r}function ole(t,e,n,r){for(var s=p8(e.name,r),i=[{name:"nameID_"+t,type:"USHORT",value:s},{name:"flags_"+t,type:"USHORT",value:0}],o=0;o<n.length;++o){var a=n[o].tag;i.push({name:"axis_"+t+" "+a,type:"FIXED",value:e.coordinates[a]<<16})}return i}function ale(t,e,n,r){var s={},i=new En.Parser(t,e);s.name=r[i.parseUShort()]||{},i.skip("uShort",1),s.coordinates={};for(var o=0;o<n.length;++o)s.coordinates[n[o].tag]=i.parseFixed();return s}function lle(t,e){var n=new vn.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:t.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:t.instances.length},{name:"instanceSize",type:"USHORT",value:4+t.axes.length*4}]);n.offsetToData=n.sizeOf();for(var r=0;r<t.axes.length;r++)n.fields=n.fields.concat(sle(r,t.axes[r],e));for(var s=0;s<t.instances.length;s++)n.fields=n.fields.concat(ole(s,t.instances[s],t.axes,e));return n}function cle(t,e,n){var r=new En.Parser(t,e),s=r.parseULong();jn.argument(s===65536,"Unsupported fvar table version.");var i=r.parseOffset16();r.skip("uShort",1);for(var o=r.parseUShort(),a=r.parseUShort(),l=r.parseUShort(),c=r.parseUShort(),u=[],d=0;d<o;d++)u.push(ile(t,e+i+d*a,n));for(var h=[],f=e+i+o*a,m=0;m<l;m++)h.push(ale(t,f+m*c,u,n));return{axes:u,instances:h}}var ule={make:lle,parse:cle},dle=function(){return{coverage:this.parsePointer(ft.coverage),attachPoints:this.parseList(ft.pointer(ft.uShortList))}},hle=function(){var t=this.parseUShort();if(jn.argument(t===1||t===2||t===3,"Unsupported CaretValue table version."),t===1)return{coordinate:this.parseShort()};if(t===2)return{pointindex:this.parseShort()};if(t===3)return{coordinate:this.parseShort()}},fle=function(){return this.parseList(ft.pointer(hle))},ple=function(){return{coverage:this.parsePointer(ft.coverage),ligGlyphs:this.parseList(ft.pointer(fle))}},mle=function(){return this.parseUShort(),this.parseList(ft.pointer(ft.coverage))};function gle(t,e){e=e||0;var n=new ft(t,e),r=n.parseVersion(1);jn.argument(r===1||r===1.2||r===1.3,"Unsupported GDEF table version.");var s={version:r,classDef:n.parsePointer(ft.classDef),attachList:n.parsePointer(dle),ligCaretList:n.parsePointer(ple),markAttachClassDef:n.parsePointer(ft.classDef)};return r>=1.2&&(s.markGlyphSets=n.parsePointer(mle)),s}var vle={parse:gle},Ba=new Array(10);Ba[1]=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort();if(e===1)return{posFormat:1,coverage:this.parsePointer(ft.coverage),value:this.parseValueRecord()};if(e===2)return{posFormat:2,coverage:this.parsePointer(ft.coverage),values:this.parseValueRecordList()};jn.assert(!1,"0x"+t.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};Ba[2]=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort();jn.assert(e===1||e===2,"0x"+t.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var n=this.parsePointer(ft.coverage),r=this.parseUShort(),s=this.parseUShort();if(e===1)return{posFormat:e,coverage:n,valueFormat1:r,valueFormat2:s,pairSets:this.parseList(ft.pointer(ft.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(r),value2:this.parseValueRecord(s)}})))};if(e===2){var i=this.parsePointer(ft.classDef),o=this.parsePointer(ft.classDef),a=this.parseUShort(),l=this.parseUShort();return{posFormat:e,coverage:n,valueFormat1:r,valueFormat2:s,classDef1:i,classDef2:o,class1Count:a,class2Count:l,classRecords:this.parseList(a,ft.list(l,function(){return{value1:this.parseValueRecord(r),value2:this.parseValueRecord(s)}}))}}};Ba[3]=function(){return{error:"GPOS Lookup 3 not supported"}};Ba[4]=function(){return{error:"GPOS Lookup 4 not supported"}};Ba[5]=function(){return{error:"GPOS Lookup 5 not supported"}};Ba[6]=function(){return{error:"GPOS Lookup 6 not supported"}};Ba[7]=function(){return{error:"GPOS Lookup 7 not supported"}};Ba[8]=function(){return{error:"GPOS Lookup 8 not supported"}};Ba[9]=function(){return{error:"GPOS Lookup 9 not supported"}};function yle(t,e){e=e||0;var n=new ft(t,e),r=n.parseVersion(1);return jn.argument(r===1||r===1.1,"Unsupported GPOS table version "+r),r===1?{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(Ba)}:{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(Ba),variations:n.parseFeatureVariationsList()}}var ble=new Array(10);function _le(t){return new vn.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new vn.ScriptList(t.scripts)},{name:"features",type:"TABLE",value:new vn.FeatureList(t.features)},{name:"lookups",type:"TABLE",value:new vn.LookupList(t.lookups,ble)}])}var wle={parse:yle,make:_le};function xle(t){var e={};t.skip("uShort");var n=t.parseUShort();jn.argument(n===0,"Unsupported kern sub-table version."),t.skip("uShort",2);var r=t.parseUShort();t.skip("uShort",3);for(var s=0;s<r;s+=1){var i=t.parseUShort(),o=t.parseUShort(),a=t.parseShort();e[i+","+o]=a}return e}function Sle(t){var e={};t.skip("uShort");var n=t.parseULong();n>1&&console.warn("Only the first kern subtable is supported."),t.skip("uLong");var r=t.parseUShort(),s=r&255;if(t.skip("uShort"),s===0){var i=t.parseUShort();t.skip("uShort",3);for(var o=0;o<i;o+=1){var a=t.parseUShort(),l=t.parseUShort(),c=t.parseShort();e[a+","+l]=c}}return e}function Ele(t,e){var n=new En.Parser(t,e),r=n.parseUShort();if(r===0)return xle(n);if(r===1)return Sle(n);throw new Error("Unsupported kern table version ("+r+").")}var Cle={parse:Ele};function Tle(t,e,n,r){for(var s=new En.Parser(t,e),i=r?s.parseUShort:s.parseULong,o=[],a=0;a<n+1;a+=1){var l=i.call(s);r&&(l*=2),o.push(l)}return o}var Mle={parse:Tle};function PI(t,e){for(var n=[],r=12,s=0;s<e;s+=1){var i=En.getTag(t,r),o=En.getULong(t,r+4),a=En.getULong(t,r+8),l=En.getULong(t,r+12);n.push({tag:i,checksum:o,offset:a,length:l,compression:!1}),r+=16}return n}function Ale(t,e){for(var n=[],r=44,s=0;s<e;s+=1){var i=En.getTag(t,r),o=En.getULong(t,r+4),a=En.getULong(t,r+8),l=En.getULong(t,r+12),c=void 0;a<l?c="WOFF":c=!1,n.push({tag:i,offset:o,compression:c,compressedLength:a,length:l}),r+=20}return n}function As(t,e){if(e.compression==="WOFF"){var n=new Uint8Array(t.buffer,e.offset+2,e.compressedLength-2),r=new Uint8Array(e.length);if(wse(n,r),r.byteLength!==e.length)throw new Error("Decompression error: "+e.tag+" decompressed length doesn't match recorded length");var s=new DataView(r.buffer,0);return{data:s,offset:0}}else return{data:t,offset:e.offset}}function kle(t,e){e=e??{};var n,r,s=new Yr({empty:!0}),i=new DataView(t,0),o,a=[],l=En.getTag(i,0);if(l==="\0\0\0"||l==="true"||l==="typ1")s.outlinesFormat="truetype",o=En.getUShort(i,4),a=PI(i,o);else if(l==="OTTO")s.outlinesFormat="cff",o=En.getUShort(i,4),a=PI(i,o);else if(l==="wOFF"){var c=En.getTag(i,4);if(c==="\0\0\0")s.outlinesFormat="truetype";else if(c==="OTTO")s.outlinesFormat="cff";else throw new Error("Unsupported OpenType flavor "+l);o=En.getUShort(i,12),a=Ale(i,o)}else throw new Error("Unsupported OpenType signature "+l);for(var u,d,h,f,m,v,y,g,S,_,w,E,C=0;C<o;C+=1){var T=a[C],I=void 0;switch(T.tag){case"cmap":I=As(i,T),s.tables.cmap=P5.parse(I.data,I.offset),s.encoding=new L5(s.tables.cmap);break;case"cvt ":I=As(i,T),E=new En.Parser(I.data,I.offset),s.tables.cvt=E.parseShortList(T.length/2);break;case"fvar":d=T;break;case"fpgm":I=As(i,T),E=new En.Parser(I.data,I.offset),s.tables.fpgm=E.parseByteList(T.length);break;case"head":I=As(i,T),s.tables.head=H5.parse(I.data,I.offset),s.unitsPerEm=s.tables.head.unitsPerEm,n=s.tables.head.indexToLocFormat;break;case"hhea":I=As(i,T),s.tables.hhea=G5.parse(I.data,I.offset),s.ascender=s.tables.hhea.ascender,s.descender=s.tables.hhea.descender,s.numberOfHMetrics=s.tables.hhea.numberOfHMetrics;break;case"hmtx":y=T;break;case"ltag":I=As(i,T),r=j5.parse(I.data,I.offset);break;case"maxp":I=As(i,T),s.tables.maxp=K5.parse(I.data,I.offset),s.numGlyphs=s.tables.maxp.numGlyphs;break;case"name":_=T;break;case"OS/2":I=As(i,T),s.tables.os2=_2.parse(I.data,I.offset);break;case"post":I=As(i,T),s.tables.post=Q5.parse(I.data,I.offset),s.glyphNames=new qC(s.tables.post);break;case"prep":I=As(i,T),E=new En.Parser(I.data,I.offset),s.tables.prep=E.parseByteList(T.length);break;case"glyf":h=T;break;case"loca":S=T;break;case"CFF ":u=T;break;case"kern":g=T;break;case"GDEF":f=T;break;case"GPOS":m=T;break;case"GSUB":v=T;break;case"meta":w=T;break}}var k=As(i,_);if(s.tables.name=J5.parse(k.data,k.offset,r),s.names=s.tables.name,h&&S){var M=n===0,L=As(i,S),N=Mle.parse(L.data,L.offset,s.numGlyphs,M),G=As(i,h);s.glyphs=o8.parse(G.data,G.offset,N,s,e)}else if(u){var V=As(i,u);V5.parse(V.data,V.offset,s,e)}else throw new Error("Font doesn't contain TrueType or CFF outlines.");var X=As(i,y);if(W5.parse(s,X.data,X.offset,s.numberOfHMetrics,s.numGlyphs,s.glyphs,e),Vse(s,e),g){var F=As(i,g);s.kerningPairs=Cle.parse(F.data,F.offset)}else s.kerningPairs={};if(f){var $=As(i,f);s.tables.gdef=vle.parse($.data,$.offset)}if(m){var O=As(i,m);s.tables.gpos=wle.parse(O.data,O.offset),s.position.init()}if(v){var z=As(i,v);s.tables.gsub=e8.parse(z.data,z.offset)}if(d){var re=As(i,d);s.tables.fvar=ule.parse(re.data,re.offset,s.names)}if(w){var q=As(i,w);s.tables.meta=t8.parse(q.data,q.offset),s.metas=s.tables.meta}return s}function Ile(t){return((e,n)=>{const r=Math.round,s={},i=e.encoding.cmap.glyphIndexMap,o=Object.keys(i),a=e.glyphs.glyphs[i[65]];let l=1;a&&(l=e.unitsPerEm/a.yMax);for(let c=0;c<o.length;c++){const u=o[c],d=e.glyphs.glyphs[i[u]];if(u!==void 0){const h={ha:r(d.advanceWidth),x_min:r(d.xMin),x_max:r(d.xMax),o:""};d.path.commands.forEach(function(f){f.type.toLowerCase()==="c"&&(f.type="b"),h.o+=f.type.toLowerCase()+" ",f.x!==void 0&&f.y!==void 0&&(h.o+=r(f.x)+" "+r(f.y)+" "),f.x1!==void 0&&f.y1!==void 0&&(h.o+=r(f.x1)+" "+r(f.y1)+" "),f.x2!==void 0&&f.y2!==void 0&&(h.o+=r(f.x2)+" "+r(f.y2)+" ")}),s[String.fromCodePoint(d.unicode)]=h}}return{glyphs:s,familyName:e.getEnglishName("fullName"),ascender:r(e.ascender),descender:r(e.descender),underlinePosition:e.tables.post.underlinePosition,underlineThickness:e.tables.post.underlineThickness,boundingBox:{xMin:e.tables.head.xMin,xMax:e.tables.head.xMax,yMin:e.tables.head.yMin,yMax:e.tables.head.yMax},resolution:e.unitsPerEm||1e3,scaleFactor:l,original_font_information:e.tables.name}})(kle(t))}class Ple extends wg{constructor(e,n={}){const r=n.font;if(r===void 0)super();else{const s=r.generateShapes(e,n.size);n.depth===void 0&&n.height!==void 0&&console.warn("THREE.TextGeometry: .height is now depreciated. Please use .depth instead"),n.depth=n.depth!==void 0?n.depth:n.height!==void 0?n.height:50,n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),super(s,n)}this.type="TextGeometry"}}function RI(t,e=!1){const n=t[0].index!==null,r=new Set(Object.keys(t[0].attributes)),s=new Set(Object.keys(t[0].morphAttributes)),i={},o={},a=t[0].morphTargetsRelative,l=new mr;let c=0;for(let u=0;u<t.length;++u){const d=t[u];let h=0;if(n!==(d.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const f in d.attributes){if(!r.has(f))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;i[f]===void 0&&(i[f]=[]),i[f].push(d.attributes[f]),h++}if(h!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". Make sure all geometries have the same number of attributes."),null;if(a!==d.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const f in d.morphAttributes){if(!s.has(f))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+".  .morphAttributes must be consistent throughout all geometries."),null;o[f]===void 0&&(o[f]=[]),o[f].push(d.morphAttributes[f])}if(e){let f;if(n)f=d.index.count;else if(d.attributes.position!==void 0)f=d.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,f,u),c+=f}}if(n){let u=0;const d=[];for(let h=0;h<t.length;++h){const f=t[h].index;for(let m=0;m<f.count;++m)d.push(f.getX(m)+u);u+=t[h].attributes.position.count}l.setIndex(d)}for(const u in i){const d=LI(i[u]);if(!d)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+u+" attribute."),null;l.setAttribute(u,d)}for(const u in o){const d=o[u][0].length;if(d===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[u]=[];for(let h=0;h<d;++h){const f=[];for(let v=0;v<o[u].length;++v)f.push(o[u][v][h]);const m=LI(f);if(!m)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+u+" morphAttribute."),null;l.morphAttributes[u].push(m)}}return l}function LI(t){let e,n,r,s=-1,i=0;for(let c=0;c<t.length;++c){const u=t[c];if(e===void 0&&(e=u.array.constructor),e!==u.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(n===void 0&&(n=u.itemSize),n!==u.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=u.normalized),r!==u.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(s===-1&&(s=u.gpuType),s!==u.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;i+=u.count*n}const o=new e(i),a=new Ar(o,n,r);let l=0;for(let c=0;c<t.length;++c){const u=t[c];if(u.isInterleavedBufferAttribute){const d=l/n;for(let h=0,f=u.count;h<f;h++)for(let m=0;m<n;m++){const v=u.getComponent(h,m);a.setComponent(h+d,m,v)}}else o.set(u.array,l);l+=u.count*n}return s!==void 0&&(a.gpuType=s),a}function Rle(t,e=1e-4){e=Math.max(e,Number.EPSILON);const n={},r=t.getIndex(),s=t.getAttribute("position"),i=r?r.count:s.count;let o=0;const a=Object.keys(t.attributes),l={},c={},u=[],d=["getX","getY","getZ","getW"],h=["setX","setY","setZ","setW"];for(let S=0,_=a.length;S<_;S++){const w=a[S],E=t.attributes[w];l[w]=new E.constructor(new E.array.constructor(E.count*E.itemSize),E.itemSize,E.normalized);const C=t.morphAttributes[w];C&&(c[w]||(c[w]=[]),C.forEach((T,I)=>{const k=new T.array.constructor(T.count*T.itemSize);c[w][I]=new T.constructor(k,T.itemSize,T.normalized)}))}const f=e*.5,m=Math.log10(1/e),v=Math.pow(10,m),y=f*v;for(let S=0;S<i;S++){const _=r?r.getX(S):S;let w="";for(let E=0,C=a.length;E<C;E++){const T=a[E],I=t.getAttribute(T),k=I.itemSize;for(let M=0;M<k;M++)w+=`${~~(I[d[M]](_)*v+y)},`}if(w in n)u.push(n[w]);else{for(let E=0,C=a.length;E<C;E++){const T=a[E],I=t.getAttribute(T),k=t.morphAttributes[T],M=I.itemSize,L=l[T],N=c[T];for(let G=0;G<M;G++){const V=d[G],X=h[G];if(L[X](o,I[V](_)),k)for(let F=0,$=k.length;F<$;F++)N[F][X](o,k[F][V](_))}}n[w]=o,u.push(o),o++}}const g=t.clone();for(const S in t.attributes){const _=l[S];if(g.setAttribute(S,new _.constructor(_.array.slice(0,o*_.itemSize),_.itemSize,_.normalized)),S in c)for(let w=0;w<c[S].length;w++){const E=c[S][w];g.morphAttributes[S][w]=new E.constructor(E.array.slice(0,o*E.itemSize),E.itemSize,E.normalized)}}return g.setIndex(u),g}const m8=class{static dummyComputeVertexNormals(){}static disable(){mr.prototype.computeVertexNormals=this.dummyComputeVertexNormals}static restore(){mr.prototype.computeVertexNormals=this.originalComputeVertexNormals}static runWithoutNormals(t){this.disable();try{return t()}finally{this.restore()}}};m8.originalComputeVertexNormals=mr.prototype.computeVertexNormals;let Lle=m8;const hd=new Dt;class OI extends b5{constructor(e,n,r){super(e),this.isFound=!1,this.fontSize=n,this.font=r,this.width=this.getCharWidth(e,n,r)}toGeometry(){let e=this.font.cache.getGeometry(this.char,this.fontSize);return e==null&&(e=Lle.runWithoutNormals(()=>{const n=new Ple(this.char,{font:this.font.font,depth:0,size:this.fontSize,curveSegments:3,bevelSegments:3,UVGenerator:{generateTopUV:()=>[hd,hd,hd],generateSideWallUV:()=>[hd,hd,hd,hd]}});return n.hasAttribute("uv")&&n.deleteAttribute("uv"),n.hasAttribute("normal")&&n.deleteAttribute("normal"),Rle(n,1e-6)})),e}getCharWidth(e,n,r){const s=r.data.glyphs[e];return s?(this.isFound=!0,s.ha*n/r.data.resolution):(this.isFound=!1,0)}}class NI extends y5{constructor(e){super(),this.type="mesh",e instanceof ArrayBuffer?this.data=Ile(e):this.data=e,this.font=new dse(this.data)}hasChar(e){return this.data.glyphs[e]!=null}generateShapes(e,n){return this.font.generateShapes(e,n)}getCharShape(e,n){if(!this.data.glyphs[e]){this.addUnsupportedChar(e);return}return new OI(e,n,this)}getScaleFactor(){return this.scaleFactor==null?(this.scaleFactor=this.data.scaleFactor,this.scaleFactor):this.scaleFactor}getNotFoundTextShape(e){return new OI("?",e,this)}}let To=class{static byteToSByte(e){return(e&127)-(e&128?128:0)}constructor(e){this.position=0,this.data=new DataView(e)}readBytes(e=1){this.data.byteLength<this.position+e&&this.throwOutOfRangeError(this.position+e);const n=new Uint8Array(this.data.buffer,this.position,e);return this.position+=e,n}skip(e){this.data.byteLength<this.position+e&&this.throwOutOfRangeError(this.position+e),this.position+=e}readUint8(){this.data.byteLength<this.position+1&&this.throwOutOfRangeError(this.position+1);const e=this.data.getUint8(this.position);return this.position+=1,e}readInt8(){this.data.byteLength<this.position+1&&this.throwOutOfRangeError(this.position+1);const e=this.data.getInt8(this.position);return this.position+=1,e}readUint16(e=!0){this.data.byteLength<this.position+2&&this.throwOutOfRangeError(this.position+2);const n=this.data.getUint16(this.position,e);return this.position+=2,n}readInt16(){this.data.byteLength<this.position+2&&this.throwOutOfRangeError(this.position+2);const e=this.data.getInt16(this.position,!0);return this.position+=2,e}readUint32(){this.data.byteLength<this.position+4&&this.throwOutOfRangeError(this.position+4);const e=this.data.getUint32(this.position,!0);return this.position+=4,e}readInt32(){this.data.byteLength<this.position+4&&this.throwOutOfRangeError(this.position+4);const e=this.data.getInt32(this.position,!0);return this.position+=4,e}readFloat32(){this.data.byteLength<this.position+4&&this.throwOutOfRangeError(this.position+4);const e=this.data.getFloat32(this.position,!0);return this.position+=4,e}readFloat64(){this.data.byteLength<this.position+8&&this.throwOutOfRangeError(this.position+8);const e=this.data.getFloat64(this.position,!0);return this.position+=8,e}setPosition(e){this.data.byteLength<e&&this.throwOutOfRangeError(e),this.position=e}isEnd(){return this.position===this.data.byteLength-1}get currentPosition(){return this.position}get length(){return this.data.byteLength}throwOutOfRangeError(e){throw new Error(`Position ${e} is out of range for the data length ${this.data.byteLength}!`)}};var Io=(t=>(t.SHAPES="shapes",t.BIGFONT="bigfont",t.UNIFONT="unifont",t))(Io||{});let Ole=class{parse(t){const e=this.parseHeader(t).split(" "),n=e[1].toLocaleLowerCase();if(!Object.values(Io).includes(n))throw new Error(`Invalid font type: ${n}`);return{fileHeader:e[0],fontType:n,fileVersion:e[2]}}parseHeader(t){let e="",n=0;for(;t.currentPosition<t.length-2&&n<1024;){const r=t.readUint8();if(r===13){const s=t.currentPosition,i=t.readUint8(),o=t.readUint8();if(i===10&&o===26)break;t.setPosition(s),e+=String.fromCharCode(r)}else e+=String.fromCharCode(r);n++}return e.trim()}};class Nle{parse(e){try{e.readBytes(4);const n=e.readInt16();if(n<=0)throw new Error("Invalid shape count in font file");const r=[];for(let o=0;o<n;o++){const a=e.readUint16(),l=e.readUint16();l>0&&r.push({code:a,length:l})}const s={};for(const o of r)try{const a=e.readBytes(o.length);if(a.length===o.length){const l=a.indexOf(0);let c=0;l>=0&&l<a.length&&(c=l+1),c<a.length&&(s[o.code]=a.subarray(c))}}catch{console.warn(`Failed to read shape data for code ${o.code}`)}const i={data:s,info:"",baseUp:8,baseDown:2,orientation:"horizontal",isExtended:!1};if(0 in s){const o=s[0];try{const a=new TextDecoder().decode(o);let l=a.indexOf("\0");l>=0&&(i.info=a.substring(0,l),l+3<o.length&&(i.baseUp=o[l+1],i.baseDown=o[l+2],i.orientation=o[l+3]===0?"horizontal":"vertical"))}catch{console.warn("Failed to parse font info block")}}return i}catch(n){return console.error("Error parsing shape font:",n),{data:{},info:"Failed to parse font file",baseUp:8,baseDown:2,orientation:"horizontal",isExtended:!1}}}}class Dle{parse(e){try{e.readInt16();const n=e.readInt16(),r=e.readInt16();if(n<=0)throw new Error("Invalid character count in font file");e.skip(r*4);const s=[];for(let a=0;a<n;a++){const l=e.readUint16(!1),c=e.readUint16(),u=e.readUint32();(l!==0||c!==0||u!==0)&&s.push({code:l,length:c,offset:u})}const i={};for(const a of s)try{e.setPosition(a.offset);const l=e.readBytes(a.length);l.length===a.length&&(i[a.code]=l)}catch{console.warn(`Failed to read bigfont data for code ${a.code}`)}const o={data:i,info:"",baseUp:8,baseDown:2,orientation:"horizontal",isExtended:!1};if(0 in i){const a=i[0];try{const l=this.utf8ArrayToStr(a);let c=l.indexOf("\0");c>=0&&(o.info=l.substring(0,c),c++,c+3<a.length&&(a.length-c===4?(o.baseUp=a[c++],o.baseDown=a[c++],o.orientation=a[c++]===0?"horizontal":"vertical"):(o.baseUp=a[c++],c++,o.orientation=a[c++]===0?"horizontal":"vertical",o.baseDown=a[c++],o.isExtended=!0)))}catch{console.warn("Failed to parse bigfont info block")}}return o}catch(n){return console.error("Error parsing big font:",n),{data:{},info:"Failed to parse font file",baseUp:8,baseDown:2,orientation:"horizontal",isExtended:!1}}}utf8ArrayToStr(e){let n="",r=0;for(;r<e.length;){const s=e[r++];switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n+=String.fromCharCode(s);break;case 12:case 13:{const i=e[r++];n+=String.fromCharCode((s&31)<<6|i&63);break}case 14:{const i=e[r++],o=e[r++];n+=String.fromCharCode((s&15)<<12|(i&63)<<6|(o&63)<<0);break}}}return n}}class Fle{parse(e){try{const n=e.readInt32();if(n<=0)throw new Error("Invalid character count in font file");const r=e.readInt16(),s=e.readBytes(r),i={data:{},info:"",baseUp:8,baseDown:2,orientation:"horizontal",isExtended:!1};try{const a=new TextDecoder().decode(s);let l=a.indexOf("\0");l>=0&&(i.info=a.substring(0,l),l+3<s.length&&(i.baseUp=s[l+1],i.baseDown=s[l+2],i.orientation=s[l+3]===0?"horizontal":"vertical"))}catch{console.warn("Failed to parse unifont info block")}const o={};for(let a=0;a<n-1;a++)try{const l=e.readUint16(),c=e.readUint16();if(c>0){const u=e.readBytes(c);if(u.length===c){const d=u.indexOf(0);let h=0;d>=0&&d<u.length&&(h=d+1),h<u.length&&(o[l]=u.subarray(h))}}}catch{console.warn("Failed to read unifont character data");break}return i.data=o,i}catch(n){return console.error("Error parsing unifont:",n),{data:{},info:"Failed to parse font file",baseUp:8,baseDown:2,orientation:"horizontal",isExtended:!1}}}}class Ble{static createParser(e){switch(e){case Io.SHAPES:return new Nle;case Io.BIGFONT:return new Dle;case Io.UNIFONT:return new Fle;default:throw new Error(`Unsupported font type: ${e}`)}}}class ks{constructor(e=0,n=0){this.x=e,this.y=n}set(e,n){return this.x=e,this.y=n,this}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){const e=this.length();return e!==0&&(this.x/=e,this.y/=e),this}clone(){return new ks(this.x,this.y)}add(e){return this.x+=e.x,this.y+=e.y,this}subtract(e){return this.x-=e.x,this.y-=e.y,this}multiply(e){return this.x*=e,this.y*=e,this}divide(e){return e!==0&&(this.x/=e,this.y/=e),this}multiplyScalars(e,n){return this.x*=e,this.y*=n,this}divideScalars(e,n){return e!==0&&(this.x/=e),n!==0&&(this.y/=n),this}distanceTo(e){const n=this.x-e.x,r=this.y-e.y;return Math.sqrt(n*n+r*r)}}const DI=Math.PI/4;let FI=class x2{static fromBulge(e,n,r){const s=Math.max(-1,Math.min(1,r));return new x2({start:e,end:n,bulge:s})}static fromOctant(e,n,r,s,i){return new x2({center:e,radius:n,startOctant:r,octantCount:s,isClockwise:i})}constructor(e){if(e.start&&e.end&&e.bulge!==void 0){this.start=e.start.clone(),this.end=e.end.clone(),this.bulge=e.bulge,this.isClockwise=e.bulge<0;const n=this.end.clone().subtract(this.start),r=n.length();if(Math.abs(this.bulge)*r/2===0){this.radius=0,this.center=this.start.clone(),this.startAngle=Math.atan2(n.y,n.x),this.endAngle=this.startAngle;return}const s=4*Math.atan(Math.abs(this.bulge));this.radius=r/(2*Math.sin(s/2));const i=this.start.clone().add(n.clone().divide(2)),o=new ks(-n.y,n.x);o.normalize(),o.multiply(Math.abs(this.radius*Math.cos(s/2))),this.center=i.clone(),this.isClockwise?this.center.subtract(o):this.center.add(o),this.startAngle=Math.atan2(this.start.y-this.center.y,this.start.x-this.center.x),this.endAngle=Math.atan2(this.end.y-this.center.y,this.end.x-this.center.x),this.isClockwise?this.endAngle>=this.startAngle&&(this.endAngle-=2*Math.PI):this.endAngle<=this.startAngle&&(this.endAngle+=2*Math.PI)}else if(e.center&&e.radius!==void 0&&e.startOctant!==void 0&&e.octantCount!==void 0&&e.isClockwise!==void 0){this.center=e.center.clone(),this.radius=e.radius,this.isClockwise=e.isClockwise,this.startAngle=e.startOctant*DI;const n=(e.octantCount===0?8:e.octantCount)*DI;this.endAngle=this.startAngle+(this.isClockwise?-n:n),this.start=this.center.clone().add(new ks(this.radius*Math.cos(this.startAngle),this.radius*Math.sin(this.startAngle))),this.end=this.center.clone().add(new ks(this.radius*Math.cos(this.endAngle),this.radius*Math.sin(this.endAngle)))}else throw new Error("Invalid arc parameters")}tessellate(e=Math.PI/18){if(this.radius===0)return[this.start.clone(),this.end.clone()];const n=[this.start.clone()],r=Math.abs(this.endAngle-this.startAngle),s=Math.max(1,Math.floor(r/e));for(let i=1;i<s;i++){const o=i/s,a=this.isClockwise?this.startAngle-o*r:this.startAngle+o*r;n.push(this.center.clone().add(new ks(this.radius*Math.cos(a),this.radius*Math.sin(a))))}return n.push(this.end?this.end.clone():this.center.clone().add(new ks(this.radius*Math.cos(this.endAngle),this.radius*Math.sin(this.endAngle)))),n}},tx=class g8{constructor(e,n=[]){this.lastPoint=e,this.polylines=n}get bbox(){let e=1/0,n=-1/0,r=1/0,s=-1/0;return this.polylines.forEach(i=>{i.forEach(o=>{e=Math.min(e,o.x),n=Math.max(n,o.x),r=Math.min(r,o.y),s=Math.max(s,o.y)})}),{minX:e,minY:r,maxX:n,maxY:s}}offset(e,n=!0){var r,s;return n?new g8((r=this.lastPoint)==null?void 0:r.clone().add(e),this.polylines.map(i=>i.map(o=>o.clone().add(e)))):((s=this.lastPoint)==null||s.add(e),this.polylines.forEach(i=>i.forEach(o=>o.add(e))),this)}toSVG(e={}){const{strokeWidth:n="0.5%",strokeColor:r="black",isAutoFit:s=!1}=e;let i,o;if(s){const a=this.bbox,l=.2,c=a.maxX-a.minX,u=a.maxY-a.minY,d=a.minX-c*l,h=a.maxX+c*l,f=a.minY-u*l,m=a.maxY+u*l;o=this.polylines.map(v=>{let y="";return v.forEach((g,S)=>{const _=g.x,w=-g.y;y+=S===0?`M ${_} ${w} `:`L ${_} ${w} `}),`<path d="${y}" stroke="${r}" stroke-width="${n}" fill="none"/>`}).join(""),i=`${d} ${-m} ${h-d} ${m-f}`}else i="0 0 20 20",o=this.polylines.map(a=>{let l="";return a.forEach((c,u)=>{const d=c.x+5,h=-c.y+15;l+=u===0?`M ${d} ${h} `:`L ${d} ${h} `}),`<path d="${l}" stroke="${r}" stroke-width="${n}" fill="none"/>`}).join("");return`<svg width="100%" height="100%" viewBox="${i}" preserveAspectRatio="xMidYMid meet">${o}</svg>`}};const Ule=Math.PI/18,BI=12;let zle=class{constructor(t){this.shapeCache=new Map,this.shapeData=new Map,this.fontData=t}release(){this.shapeCache.clear(),this.shapeData.clear()}parse(t,e){var n;const r=`${t}_${e}`;if(this.shapeCache.has(r))return this.shapeCache.get(r);if(t===0)return;const s=this.fontData.content.data;let i;if(!this.shapeData.has(t)&&s[t]){const o=s[t],a=BI/this.fontData.content.baseUp;i=this.parseShape(o,a),this.shapeData.set(t,i)}if(this.shapeData.has(t)){const o=e/BI,a=this.shapeData.get(t);i=new tx((n=a.lastPoint)==null?void 0:n.clone().multiply(o),a.polylines.map(l=>l.map(c=>c.clone().multiply(o))))}return i}parseShape(t,e){const n={currentPoint:new ks,polylines:[],currentPolyline:[],sp:[],isPenDown:!1,scale:e};for(let r=0;r<t.length;r++){const s=t[r];s<=15?r=this.handleSpecialCommand(s,t,r,n):this.handleVectorCommand(s,n)}return new tx(n.currentPoint,n.polylines)}handleSpecialCommand(t,e,n,r){let s=n;switch(t){case 0:r.currentPolyline=[],r.isPenDown=!1;break;case 1:r.isPenDown=!0,r.currentPolyline.push(r.currentPoint.clone());break;case 2:r.isPenDown=!1,r.currentPolyline.length>1&&r.polylines.push(r.currentPolyline.slice()),r.currentPolyline=[];break;case 3:s++,r.scale/=e[s];break;case 4:s++,r.scale*=e[s];break;case 5:if(r.sp.length===4)throw new Error("The position stack is only four locations deep");r.sp.push(r.currentPoint.clone());break;case 6:r.currentPoint=r.sp.pop()??r.currentPoint;break;case 7:s=this.handleSubshapeCommand(e,s,r);break;case 8:s=this.handleXYDisplacement(e,s,r);break;case 9:s=this.handleMultipleXYDisplacements(e,s,r);break;case 10:s=this.handleOctantArc(e,s,r);break;case 11:s=this.handleFractionalArc(e,s,r);break;case 12:s=this.handleBulgeArc(e,s,r);break;case 13:s=this.handleMultipleBulgeArcs(e,s,r);break;case 14:s=this.skipCode(e,++s);break}return s}handleVectorCommand(t,e){const n=(t&240)>>4,r=t&15,s=this.getVectorForDirection(r);e.currentPoint.add(s.multiply(n*e.scale)),e.isPenDown&&e.currentPolyline.push(e.currentPoint.clone())}getVectorForDirection(t){const e=new ks;switch(t){case 0:e.x=1;break;case 1:e.x=1,e.y=.5;break;case 2:e.x=1,e.y=1;break;case 3:e.x=.5,e.y=1;break;case 4:e.y=1;break;case 5:e.x=-.5,e.y=1;break;case 6:e.x=-1,e.y=1;break;case 7:e.x=-1,e.y=.5;break;case 8:e.x=-1;break;case 9:e.x=-1,e.y=-.5;break;case 10:e.x=-1,e.y=-1;break;case 11:e.x=-.5,e.y=-1;break;case 12:e.y=-1;break;case 13:e.x=.5,e.y=-1;break;case 14:e.x=1,e.y=-1;break;case 15:e.x=1,e.y=-.5;break}return e}handleSubshapeCommand(t,e,n){let r=e,s=0,i,o=n.scale*this.fontData.content.baseUp,a=o;const l=n.currentPoint.clone();switch(n.currentPolyline.length>1&&(n.polylines.push(n.currentPolyline.slice()),n.currentPolyline=[]),this.fontData.header.fontType){case Io.SHAPES:r++,s=t[r];break;case Io.BIGFONT:r++,s=t[r],s===0&&(r++,s=t[r++]|t[r++]<<8,l.x=t[r++]*n.scale,l.y=t[r++]*n.scale,this.fontData.content.isExtended&&(a=t[r++]*n.scale),o=t[r]*n.scale);break;case Io.UNIFONT:r++,s=t[r++]<<8|t[r++];break}return s!==0&&(i=this.getShapeByCodeWithOffset(s,a,o,l),i&&(n.polylines.push(...i.polylines.slice()),n.currentPoint=i.lastPoint?i.lastPoint.clone():l.clone())),n.currentPolyline=[],r}handleXYDisplacement(t,e,n){let r=e;const s=new ks;return s.x=To.byteToSByte(t[++r]),s.y=To.byteToSByte(t[++r]),n.currentPoint.add(s.multiply(n.scale)),n.isPenDown&&n.currentPolyline.push(n.currentPoint.clone()),r}handleMultipleXYDisplacements(t,e,n){let r=e;for(;;){const s=new ks;if(s.x=To.byteToSByte(t[++r]),s.y=To.byteToSByte(t[++r]),s.x===0&&s.y===0)break;n.currentPoint.add(s.multiply(n.scale)),n.isPenDown&&n.currentPolyline.push(n.currentPoint.clone())}return r}handleOctantArc(t,e,n){var r;let s=e;const i=t[++s]*n.scale,o=To.byteToSByte(t[++s]),a=(o&112)>>4;let l=o&7;const c=o<0,u=Math.PI/4*a,d=n.currentPoint.clone().subtract(new ks(Math.cos(u)*i,Math.sin(u)*i)),h=FI.fromOctant(d,i,a,l,c);if(n.isPenDown){const f=h.tessellate();n.currentPolyline.pop(),n.currentPolyline.push(...f.slice())}return n.currentPoint=(r=h.tessellate().pop())==null?void 0:r.clone(),s}handleFractionalArc(t,e,n){let r=e;const s=t[++r],i=t[++r],o=t[++r],a=t[++r],l=(o*255+a)*n.scale,c=To.byteToSByte(t[++r]),u=(c&112)>>4;let d=c&7;d===0&&(d=8),i!==0&&d--;const h=Math.PI/4;let f=h*d,m=Ule,v=1;c<0&&(m=-m,f=-f,v=-1);let y=h*u,g=y+f;y+=h*s/256*v,g+=h*i/256*v;const S=n.currentPoint.clone().subtract(new ks(l*Math.cos(y),l*Math.sin(y)));if(n.currentPoint=S.clone().add(new ks(l*Math.cos(g),l*Math.sin(g))),n.isPenDown){let _=y;const w=[];if(w.push(S.clone().add(new ks(l*Math.cos(_),l*Math.sin(_)))),m>0)for(;_+m<g;)_+=m,w.push(S.clone().add(new ks(l*Math.cos(_),l*Math.sin(_))));else for(;_+m>g;)_+=m,w.push(S.clone().add(new ks(l*Math.cos(_),l*Math.sin(_))));w.push(S.clone().add(new ks(l*Math.cos(g),l*Math.sin(g)))),n.currentPolyline.push(...w)}return r}handleBulgeArc(t,e,n){let r=e;const s=new ks;s.x=To.byteToSByte(t[++r]),s.y=To.byteToSByte(t[++r]);const i=To.byteToSByte(t[++r]);return n.currentPoint=this.handleArcSegment(n.currentPoint,s,i,n.scale,n.isPenDown,n.currentPolyline),r}handleMultipleBulgeArcs(t,e,n){let r=e;for(;;){const s=new ks;if(s.x=To.byteToSByte(t[++r]),s.y=To.byteToSByte(t[++r]),s.x===0&&s.y===0)break;const i=To.byteToSByte(t[++r]);n.currentPoint=this.handleArcSegment(n.currentPoint,s,i,n.scale,n.isPenDown,n.currentPolyline)}return r}skipCode(t,e){switch(t[e]){case 0:break;case 1:break;case 2:break;case 3:case 4:e++;break;case 5:break;case 6:break;case 7:switch(this.fontData.header.fontType){case Io.SHAPES:e++;break;case Io.BIGFONT:e++,t[e]===0&&(e+=5);break;case Io.UNIFONT:e+=2;break}break;case 8:e+=2;break;case 9:for(;;){const n=t[++e],r=t[++e];if(n===0&&r===0)break}break;case 10:e+=2;break;case 11:e+=5;break;case 12:e+=3;break;case 13:for(;;){const n=t[++e],r=t[++e];if(n===0&&r===0)break;e++}break}return e}getShapeByCodeWithOffset(t,e,n,r){var s;const i=this.parse(t,n);if(i){if(e===n)return i.offset(r);{const o=(s=i.lastPoint)==null?void 0:s.clone();o&&(o.x*=e/n);const a=i.polylines.map(l=>l.map(c=>c.clone()));return a.forEach(l=>l.forEach(c=>c.x*=e/n)),new tx(o==null?void 0:o.add(r),a.map(l=>l.map(c=>c.add(r))))}}}handleArcSegment(t,e,n,r,s,i){e.x*=r,e.y*=r,n<-127&&(n=-127);const o=t.clone();if(s)if(n===0)i.push(o.clone().add(e));else{const a=o.clone().add(e),l=FI.fromBulge(o,a,n/127).tessellate();i.push(...l.slice(1))}return o.add(e),o}};class $le{constructor(e){if(e instanceof ArrayBuffer){const n=new To(e),r=new Ole().parse(n),s=Ble.createParser(r.fontType).parse(n);this.fontData={header:r,content:s}}else this.fontData=e;this.shapeParser=new zle(this.fontData)}hasChar(e){return this.fontData.content.data[e]!==void 0}getCharShape(e,n){return this.shapeParser.parse(e,n)}release(){this.shapeParser.release()}}class tT extends b5{constructor(e,n,r,s){super(e),this.fontSize=n,this.shape=r,this.font=s,this.width=this.calcWidth()}calcWidth(){const e=this.shape.bbox;return e.maxX-e.minX}offset(e){return new tT(this.char,this.fontSize,this.shape.offset(e),this.font)}toGeometry(){let e=this.font.cache.getGeometry(this.char,this.fontSize);if(e==null){const n=this.shape.polylines,r=[],s=[];let i=0;e=new mr;for(let o=0;o<n.length;o++){const a=n[o];for(let l=0;l<a.length;l++){const c=a[l];r.push(c.x,c.y,0),l===a.length-1||s.push(i,i+1),i++}}e.setAttribute("position",new Ws(r,3)),e.setIndex(s)}return e}}class UI extends y5{constructor(e){super(),this.type="shx",this.font=new $le(e),this.data=this.font.fontData}hasChar(e){const n=e.charCodeAt(0);return this.font.hasChar(n)}generateShapes(e,n){const r=[];let s=0;for(let i=0;i<e.length;i++){const o=e[i];if(o===" "){s+=n;continue}const a=this.getCharShape(o,n);if(!a){s+=n,this.addUnsupportedChar(o);continue}r.push(a.offset(new ks(s,0))),s+=a.width}return r}getScaleFactor(){return 1}getCharShape(e,n){const r=this.getCode(e),s=this.font.getCharShape(r,n);return s?new tT(e,n,s,this):void 0}getNotFoundTextShape(e){const n=this.font.fontData.header.fontType===Io.BIGFONT?"":"?";return this.getCharShape(n,e)}getCode(e){if(this.font.fontData.header.fontType===Io.BIGFONT)throw new Error(`Can't get font glyph for '${e}' because big font is not supported yet!`);return e.charCodeAt(0)}}let nx=class km{constructor(){}static get instance(){return km._instance||(km._instance=new km),km._instance}createFont(e){if(e.type==="shx")return new UI(e.data);if(e.type==="mesh")return new NI(e.data);throw new Error("Unsupported font data type")}createFontFromBuffer(e,n){const r=lse(e).toLowerCase();if(r==="shx")return new UI(n);if(["ttf","otf","woff"].includes(r))return new NI(n);throw new Error(`Unsupported font file type: ${r}`)}},hl=class Im{constructor(){this.fontMapping={},this.fontMap=new Map,this.unsupportedChars={},this.missedFonts={},this.enableFontCache=!0,this.defaultFont="simkai",this.events={fontNotFound:new zk,fontLoaded:new zk},this.loader=new Wj,this.loader.setResponseType("arraybuffer"),this.fileNames=[],this.fontLoader=new Vle}static get instance(){return Im._instance||(Im._instance=new Im),Im._instance}setFontMapping(e){this.fontMapping=e}setFontLoader(e){this.fontLoader=e}async getAvaiableFonts(){return await this.fontLoader.getAvaiableFonts()}isDefaultFontLoaded(){return this.fontMap.get(this.defaultFont.toLowerCase())!=null}async loadDefaultFont(){return await this.loadFontsByNames(this.defaultFont)}async loadFontsByNames(e){return e=Array.isArray(e)?e:[e],(await this.fontLoader.load(e))[0]}async loadFontsByUrls(e){e=Array.isArray(e)?e:[e];const n=[];for(let s=0;s<e.length;s++){const i=e[s];n.push(this.loadFont(i))}const r=[];return await Promise.allSettled(n).then(s=>{s.forEach((i,o)=>{const a=i.status==="fulfilled",l=e[o],c=jk(l.toLowerCase());r.push({fontName:c,url:l,status:a}),a&&this.fileNames.push(c)})}),r}findAndReplaceFont(e){let n=this.fontMap.get(e.toLowerCase());if(n==null){const r=this.fontMapping[e];if(r)return n=this.fontMap.get(r.toLowerCase()),r}return n?e:this.defaultFont}getFontByName(e,n=!0){if(this.fontMap.size===0)return;e==null&&(e="");const r=this.fontMap.get(e.toLowerCase());if(!r){n&&this.recordMissedFonts(e);return}return r}getFontByChar(e){for(const[,n]of this.fontMap)if(n.hasChar(e))return n}getCharShape(e,n,r){let s=this.getFontByName(n);return s||(s=this.getFontByChar(e)),s==null?void 0:s.getCharShape(e,r)}getFontScaleFactor(e){const n=this.fontMap.get(e.toLowerCase());return n?n.getScaleFactor():1}getFontType(e){const n=this.fontMap.get(e.toLowerCase());return n==null?void 0:n.type}getNotFoundTextShape(e){for(const[,n]of this.fontMap){const r=n.getNotFoundTextShape(e);if(r)return r}}isFontLoaded(e){return this.fontMap.has(e.toLowerCase())}recordMissedFonts(e){e&&(this.missedFonts[e]||(this.missedFonts[e]=0),this.missedFonts[e]++,this.events.fontNotFound.dispatch({fontName:e,count:this.missedFonts[e]}))}async loadFont(e){const n=x5(e);if(!n)throw new Error(`Invalid font url: ${e}`);const r=jk(e).toLowerCase(),s=await Ww.instance.get(r);if(s){const i=nx.instance.createFont(s);this.fontMap.set(r,i)}else{const i=await this.loader.loadAsync(e),o=nx.instance.createFontFromBuffer(n,i);o&&(this.fontMap.set(r,o),this.enableFontCache&&await Ww.instance.set(r,{name:r,type:o.type,data:o.data}))}this.events.fontLoaded.dispatch({fontName:r})}async getAllFontsFromCache(){if(this.fontMap.size!==0)return;const e=await Ww.instance.getAll();for(const n of e){const{name:r}=n;if(this.fileNames&&!this.fileNames.includes(r))continue;const s=nx.instance.createFont(n);this.fontMap.set(r,s)}}getUnsupportedChar(){for(const[,e]of this.fontMap)Object.assign(this.unsupportedChars,e.unsupportedChars);return this.unsupportedChars}release(e){return e==null?(this.fontMap.clear(),!0):this.fontMap.delete(e)}};class Vle{constructor(){this._avaiableFonts=[]}get avaiableFonts(){return this._avaiableFonts}async getAvaiableFonts(){if(this._avaiableFonts.length==0){const e="https://cdn.jsdelivr.net/gh/mlight-lee/cad-data/fonts/",n=e+"fonts.json";try{const r=await fetch(n);this._avaiableFonts=await r.json()}catch{throw new Error(`Filed to get avaiable font from '${n}'`)}this._avaiableFonts.forEach(r=>{r.url=e+r.file})}return this._avaiableFonts}async load(e){e.length==0&&await this.getAvaiableFonts();const n=[],r=[],s={};this._avaiableFonts.forEach(a=>{a.name.forEach(l=>{s[l.toLowerCase()]=a.url})}),e.forEach(a=>{const l=a.toLowerCase(),c=s[l];c&&(hl.instance.isFontLoaded(l)?r.push({fontName:l,url:c,status:!0}):n.push(c))});let i=[];n.length>0&&(i=await hl.instance.loadFontsByUrls(n));const o={};return[...r,...i].forEach(a=>{o[a.fontName]=a}),e.map(a=>{const l=a.toLowerCase();return o[l]||{fontName:l,url:s[l]||"",status:!1}})}}var yf=(t=>(t[t.NONE=0]="NONE",t[t.WORD=1]="WORD",t[t.STACK=2]="STACK",t[t.SPACE=3]="SPACE",t[t.NBSP=4]="NBSP",t[t.TABULATOR=5]="TABULATOR",t[t.NEW_PARAGRAPH=6]="NEW_PARAGRAPH",t[t.NEW_COLUMN=7]="NEW_COLUMN",t[t.WRAP_AT_DIMLINE=8]="WRAP_AT_DIMLINE",t[t.PROPERTIES_CHANGED=9]="PROPERTIES_CHANGED",t))(yf||{}),Pm=(t=>(t[t.BOTTOM=0]="BOTTOM",t[t.MIDDLE=1]="MIDDLE",t[t.TOP=2]="TOP",t))(Pm||{}),Ea=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.CENTER=3]="CENTER",t[t.JUSTIFIED=4]="JUSTIFIED",t[t.DISTRIBUTED=5]="DISTRIBUTED",t))(Ea||{});const Hle={c:"",d:"",p:""},Gle={l:1,r:2,c:3,j:4,d:5};function Wle(t,e=!1){const n=new Set,r=/\\[fF](.*?)[;|]/g;return[...t.matchAll(r)].forEach(s=>{let i=s[1].toLowerCase();e&&(i=i.replace(/\.(ttf|otf|woff|shx)$/,"")),n.add(i)}),n}class jle{constructor(e){this.stack=[],this.stack.push(e)}push(e){this.stack.push(e)}pop(){if(this.stack.length<=1)return;const e=this.stack.pop(),n=this.stack[this.stack.length-1];return JSON.stringify(n.paragraph)!==JSON.stringify(e.paragraph)&&(n.paragraph={...e.paragraph}),e}get current(){return this.stack[this.stack.length-1]}get depth(){return this.stack.length-1}get root(){return this.stack[0]}setCurrent(e){this.stack[this.stack.length-1]=e}}class Kle{constructor(e,n,r={}){this.continueStroke=!1,this.inStackContext=!1,this.scanner=new rx(e);const s=n??new rT;this.ctxStack=new jle(s),this.yieldPropertyCommands=r.yieldPropertyCommands??!1,this.resetParagraphParameters=r.resetParagraphParameters??!1}decodeMultiByteChar(e){try{const n=new Uint8Array([parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16)]),r=new TextDecoder("gbk").decode(n);if(r!=="")return r;const s=new TextDecoder("big5").decode(n);return s!==""?s:""}catch{return""}}pushCtx(){this.ctxStack.push(this.ctxStack.current)}popCtx(){this.ctxStack.pop()}parseStacking(){const e=new rx(this.extractExpression(!0));let n="",r="",s="";const i=()=>{let l=e.peek(),c=!1;return l.charCodeAt(0)<32&&(l=" "),l==="\\"&&(c=!0,e.consume(1),l=e.peek()),e.consume(1),[l,c]},o=()=>{let l="";for(;e.hasData;){const[c,u]=i();if(!u&&(c==="/"||c==="#"||c==="^"))return[l,c];l+=c}return[l,""]},a=l=>{let c="",u=l;for(;e.hasData;){const[d,h]=i();if(!(u&&d===" ")){if(u=!1,!h&&d===";")break;c+=d}}return c};return[n,s]=o(),s&&(r=a(s==="^")),n===""&&r.includes("I/")?[2,[" "," ","/"]]:s==="^"?[2,[n,r,"^"]]:[2,[n,r,s]]}parseProperties(e){const n=this.ctxStack.current.copy(),r=this.ctxStack.current.copy();switch(e){case"L":r.underline=!0,this.continueStroke=!0;break;case"l":r.underline=!1,r.hasAnyStroke||(this.continueStroke=!1);break;case"O":r.overline=!0,this.continueStroke=!0;break;case"o":r.overline=!1,r.hasAnyStroke||(this.continueStroke=!1);break;case"K":r.strikeThrough=!0,this.continueStroke=!0;break;case"k":r.strikeThrough=!1,r.hasAnyStroke||(this.continueStroke=!1);break;case"A":this.parseAlign(r);break;case"C":this.parseAciColor(r);break;case"c":this.parseRgbColor(r);break;case"H":this.parseHeight(r);break;case"W":this.parseWidth(r);break;case"Q":this.parseOblique(r);break;case"T":this.parseCharTracking(r);break;case"p":this.parseParagraphProperties(r);break;case"f":case"F":this.parseFontProperties(r);break;default:throw new Error(`Unknown command: ${e}`)}if(this.continueStroke=r.hasAnyStroke,r.continueStroke=this.continueStroke,this.ctxStack.setCurrent(r),this.yieldPropertyCommands){const s=this.getPropertyChanges(n,r);if(Object.keys(s).length>0)return{command:e,changes:s,depth:this.ctxStack.depth}}}getPropertyChanges(e,n){const r={};if(e.underline!==n.underline&&(r.underline=n.underline),e.overline!==n.overline&&(r.overline=n.overline),e.strikeThrough!==n.strikeThrough&&(r.strikeThrough=n.strikeThrough),e.color.aci!==n.color.aci&&(r.aci=n.color.aci),e.color.rgbValue!==n.color.rgbValue&&(r.rgb=n.color.rgb),e.align!==n.align&&(r.align=n.align),JSON.stringify(e.fontFace)!==JSON.stringify(n.fontFace)&&(r.fontFace=n.fontFace),(e.capHeight.value!==n.capHeight.value||e.capHeight.isRelative!==n.capHeight.isRelative)&&(r.capHeight=n.capHeight),(e.widthFactor.value!==n.widthFactor.value||e.widthFactor.isRelative!==n.widthFactor.isRelative)&&(r.widthFactor=n.widthFactor),(e.charTrackingFactor.value!==n.charTrackingFactor.value||e.charTrackingFactor.isRelative!==n.charTrackingFactor.isRelative)&&(r.charTrackingFactor=n.charTrackingFactor),e.oblique!==n.oblique&&(r.oblique=n.oblique),JSON.stringify(e.paragraph)!==JSON.stringify(n.paragraph)){const s={};e.paragraph.indent!==n.paragraph.indent&&(s.indent=n.paragraph.indent),e.paragraph.align!==n.paragraph.align&&(s.align=n.paragraph.align),e.paragraph.left!==n.paragraph.left&&(s.left=n.paragraph.left),e.paragraph.right!==n.paragraph.right&&(s.right=n.paragraph.right),JSON.stringify(e.paragraph.tabs)!==JSON.stringify(n.paragraph.tabs)&&(s.tabs=n.paragraph.tabs),Object.keys(s).length>0&&(r.paragraph=s)}return r}parseAlign(e){const n=this.scanner.get();"012".includes(n)?e.align=parseInt(n):e.align=0,this.consumeOptionalTerminator()}parseHeight(e){const n=this.extractFloatExpression(!0);if(n)try{n.endsWith("x")?e.capHeight={value:parseFloat(n.slice(0,-1)),isRelative:!0}:e.capHeight={value:parseFloat(n),isRelative:!1}}catch{this.scanner.consume(-n.length);return}this.consumeOptionalTerminator()}parseWidth(e){const n=this.extractFloatExpression(!0);if(n)try{n.endsWith("x")?e.widthFactor={value:parseFloat(n.slice(0,-1)),isRelative:!0}:e.widthFactor={value:parseFloat(n),isRelative:!1}}catch{this.scanner.consume(-n.length);return}this.consumeOptionalTerminator()}parseCharTracking(e){const n=this.extractFloatExpression(!0);if(n)try{n.endsWith("x")?e.charTrackingFactor={value:Math.abs(parseFloat(n.slice(0,-1))),isRelative:!0}:e.charTrackingFactor={value:Math.abs(parseFloat(n)),isRelative:!1}}catch{this.scanner.consume(-n.length);return}this.consumeOptionalTerminator()}parseFloatValueOrFactor(e){const n=this.extractFloatExpression(!0);if(n)if(n.endsWith("x")){const r=parseFloat(n.slice(0,-1));e*=r}else e=parseFloat(n);return e}parseOblique(e){const n=this.extractFloatExpression(!1);n&&(e.oblique=parseFloat(n)),this.consumeOptionalTerminator()}parseAciColor(e){const n=this.extractIntExpression();if(n){const r=parseInt(n);r<257&&(e.color.aci=r)}this.consumeOptionalTerminator()}parseRgbColor(e){const n=this.extractIntExpression();if(n){const r=parseInt(n)&16777215;e.color.rgbValue=r}this.consumeOptionalTerminator()}extractFloatExpression(e=!1){const n=e?/^[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?x?/:/^[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?/,r=this.scanner.tail.match(n);if(r){const s=r[0];return this.scanner.consume(s.length),s}return""}extractIntExpression(){const e=this.scanner.tail.match(/^\d+/);if(e){const n=e[0];return this.scanner.consume(n.length),n}return""}extractExpression(e=!1){const n=this.scanner.find(";",e);if(n<0){const i=this.scanner.tail;return this.scanner.consume(i.length),i}const r=this.scanner.peek(n-this.scanner.currentIndex-1)==="\\",s=this.scanner.tail.slice(0,n-this.scanner.currentIndex+(r?1:0));return this.scanner.consume(s.length+1),s}parseFontProperties(e){const n=this.extractExpression().split("|");if(n.length>0&&n[0]){const r=n[0];let s="Regular",i=400;for(const o of n.slice(1))o.startsWith("b1")?i=700:o==="i"||o.startsWith("i1")?s="Italic":(o==="i0"||o.startsWith("i0"))&&(s="Regular");e.fontFace={family:r,style:s,weight:i}}}parseParagraphProperties(e){const n=new rx(this.extractExpression());let r=e.paragraph.indent,s=e.paragraph.left,i=e.paragraph.right,o=e.paragraph.align,a=[];const l=()=>{const c=n.tail.match(/^[+-]?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?/);if(c){const u=parseFloat(c[0]);for(n.consume(c[0].length);n.peek()===",";)n.consume(1);return u}return 0};for(;n.hasData;)switch(n.get()){case"i":r=l();break;case"l":s=l();break;case"r":i=l();break;case"x":break;case"q":{const c=n.get();for(o=Gle[c]||0;n.peek()===",";)n.consume(1);break}case"t":for(a=[];n.hasData;){const c=n.peek();if(c==="r"||c==="c"){n.consume(1);const u=l();a.push(c+u.toString())}else{const u=l();isNaN(u)?n.consume(1):a.push(u)}}break}e.paragraph={indent:r,left:s,right:i,align:o,tabs:a}}consumeOptionalTerminator(){this.scanner.peek()===";"&&this.scanner.consume(1)}*parse(){let e=null;function n(s){const i={...s.paragraph};s.paragraph={indent:0,left:0,right:0,align:0,tabs:[]};const o={};return i.indent!==0&&(o.indent=0),i.left!==0&&(o.left=0),i.right!==0&&(o.right=0),i.align!==0&&(o.align=0),JSON.stringify(i.tabs)!==JSON.stringify([])&&(o.tabs=[]),o}const r=()=>{var s;let i="";for(;this.scanner.hasData;){let o=!1,a=this.scanner.peek();const l=this.scanner.currentIndex;if(a.charCodeAt(0)<32){if(this.scanner.consume(1),a==="	")return[5,null];if(a===`
`)return[6,null];a=" "}if(a==="\\")if("\\{}".includes(this.scanner.peek(1)))o=!0,this.scanner.consume(1),a=this.scanner.peek();else{if(i)return[1,i];this.scanner.consume(1);const c=this.scanner.get();switch(c){case"~":return[4,null];case"P":return[6,null];case"N":return[7,null];case"X":return[8,null];case"S":{this.inStackContext=!0;const u=this.parseStacking();return this.inStackContext=!1,u}case"m":case"M":if(this.scanner.peek()==="+"){this.scanner.consume(1);const u=(s=this.scanner.tail.match(/^[0-9A-Fa-f]{4}/))==null?void 0:s[0];if(u){this.scanner.consume(4);const d=this.decodeMultiByteChar(u);return i?[1,i]:[1,d]}this.scanner.consume(-1)}i+="\\M";continue;case"U":if(this.scanner.peek()==="+"){this.scanner.consume(1);const u=this.scanner.tail.match(/^[0-9A-Fa-f]{4,8}/);if(u){const d=u[0];this.scanner.consume(d.length);const h=parseInt(d,16);let f="";try{f=String.fromCodePoint(h)}catch{f=""}return i?[1,i]:[1,f]}this.scanner.consume(-1)}i+="\\U";continue;default:if(c)try{const u=this.parseProperties(c);if(this.yieldPropertyCommands&&u)return[9,u];continue}catch{const u=this.scanner.tail.slice(l,this.scanner.currentIndex);i+=u}}continue}if(a==="%"&&this.scanner.peek(1)==="%"){const c=this.scanner.peek(2).toLowerCase(),u=Hle[c];if(u){this.scanner.consume(3),i+=u;continue}else{this.scanner.consume(3);continue}}if(a===" ")return i?(this.scanner.consume(1),e=3,[1,i]):(this.scanner.consume(1),[3,null]);if(!o){if(a==="{"){if(i)return[1,i];this.scanner.consume(1),this.pushCtx();continue}else if(a==="}"){if(i)return[1,i];if(this.scanner.consume(1),this.yieldPropertyCommands){const c=this.ctxStack.current;this.popCtx();const u=this.getPropertyChanges(c,this.ctxStack.current);if(Object.keys(u).length>0)return[9,{command:void 0,changes:u,depth:this.ctxStack.depth}]}else this.popCtx();continue}}if(!this.inStackContext&&a==="^"){const c=this.scanner.peek(1);if(c){const u=c.charCodeAt(0);if(this.scanner.consume(2),u===32)i+="^";else{if(u===73)return i?[1,i]:[5,null];if(u===74)return i?[1,i]:[6,null];if(u===77)continue;i+=""}continue}}this.scanner.consume(1),a.charCodeAt(0)>=32&&(i+=a)}return i?[1,i]:[0,null]};for(;;){const[s,i]=r.call(this);if(s){if(yield new sx(s,this.ctxStack.current.copy(),i),s===6&&this.resetParagraphParameters){const o=this.ctxStack.current,a=n(o);this.yieldPropertyCommands&&Object.keys(a).length>0&&(yield new sx(9,o.copy(),{command:void 0,changes:{paragraph:a},depth:this.ctxStack.depth}))}e&&(yield new sx(e,this.ctxStack.current.copy(),null),e=null)}else break}}}let rx=class{constructor(e){this.text=e,this.textLen=e.length,this._index=0}get currentIndex(){return this._index}get isEmpty(){return this._index>=this.textLen}get hasData(){return this._index<this.textLen}get(){if(this.isEmpty)return"";const e=this.text[this._index];return this._index++,e}consume(e=1){this._index=Math.max(0,Math.min(this._index+e,this.textLen))}peek(e=0){const n=this._index+e;return n>=this.textLen||n<0?"":this.text[n]}find(e,n=!1){let r=this._index;for(;r<this.textLen;){if(n&&this.text[r]==="\\"){if(r+1<this.textLen){if(this.text[r+1]===e)return r+1;r+=2;continue}r++;continue}if(this.text[r]===e)return r;r++}return-1}get tail(){return this.text.slice(this._index)}isNextSpace(){return this.peek()===" "}consumeSpaces(){let e=0;for(;this.isNextSpace();)this.consume(),e++;return e}};class nT{constructor(e){this._aci=256,this._rgbValue=null,Array.isArray(e)?this.rgb=e:typeof e=="number"?this.aci=e:this.aci=256}get aci(){return this._aci}set aci(e){if(e===null)this._aci=null;else if(e>=0&&e<=256)this._aci=e,this._rgbValue=null;else throw new Error("ACI not in range [0, 256]")}get rgb(){if(this._rgbValue===null)return null;const e=this._rgbValue>>16&255,n=this._rgbValue>>8&255,r=this._rgbValue&255;return[e,n,r]}set rgb(e){if(e){const[n,r,s]=e;this._rgbValue=(n&255)<<16|(r&255)<<8|s&255,this._aci=null}else this._rgbValue=null}get isRgb(){return this._rgbValue!==null}get isAci(){return this._rgbValue===null&&this._aci!==null}get rgbValue(){return this._rgbValue}set rgbValue(e){e===null?this._rgbValue=null:(this._rgbValue=e&16777215,this._aci=null)}copy(){const e=new nT;return e._aci=this._aci,e._rgbValue=this._rgbValue,e}toObject(){return{aci:this._aci,rgb:this.rgb,rgbValue:this._rgbValue}}equals(e){return this._aci===e._aci&&this._rgbValue===e._rgbValue}}let rT=class v8{constructor(){this._stroke=0,this.continueStroke=!1,this.color=new nT,this.align=0,this.fontFace={family:"",style:"Regular",weight:400},this._capHeight={value:1,isRelative:!1},this._widthFactor={value:1,isRelative:!1},this._charTrackingFactor={value:1,isRelative:!1},this.oblique=0,this.paragraph={indent:0,left:0,right:0,align:0,tabs:[]}}get capHeight(){return this._capHeight}set capHeight(e){this._capHeight={value:Math.abs(e.value),isRelative:e.isRelative}}get widthFactor(){return this._widthFactor}set widthFactor(e){this._widthFactor={value:Math.abs(e.value),isRelative:e.isRelative}}get charTrackingFactor(){return this._charTrackingFactor}set charTrackingFactor(e){this._charTrackingFactor={value:Math.abs(e.value),isRelative:e.isRelative}}get aci(){return this.color.aci}set aci(e){this.color.aci=e}get rgb(){return this.color.rgb}set rgb(e){this.color.rgb=e}get italic(){return this.fontFace.style==="Italic"}set italic(e){this.fontFace.style=e?"Italic":"Regular"}get bold(){return(this.fontFace.weight||400)>=700}set bold(e){this.fontFace.weight=e?700:400}get underline(){return!!(this._stroke&1)}set underline(e){this._setStrokeState(1,e)}get strikeThrough(){return!!(this._stroke&4)}set strikeThrough(e){this._setStrokeState(4,e)}get overline(){return!!(this._stroke&2)}set overline(e){this._setStrokeState(2,e)}get hasAnyStroke(){return!!this._stroke}_setStrokeState(e,n=!0){n?this._stroke|=e:this._stroke&=~e}copy(){const e=new v8;return e._stroke=this._stroke,e.continueStroke=this.continueStroke,e.color=this.color.copy(),e.align=this.align,e.fontFace={...this.fontFace},e._capHeight={...this._capHeight},e._widthFactor={...this._widthFactor},e._charTrackingFactor={...this._charTrackingFactor},e.oblique=this.oblique,e.paragraph={...this.paragraph},e}},sx=class{constructor(e,n,r){this.type=e,this.ctx=n,this.data=r}};var Rg=(t=>(t[t.LEFT_TO_RIGHT=1]="LEFT_TO_RIGHT",t[t.RIGHT_TO_LEFT=2]="RIGHT_TO_LEFT",t[t.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM",t[t.BOTTOM_TO_TOP=4]="BOTTOM_TO_TOP",t[t.BY_STYLE=5]="BY_STYLE",t))(Rg||{});const qle=new Ze,Yle=1.666666;class sT extends rT{constructor(e){super(),this.fontScaleFactor=1,this.fontSize=1,this.fontSizeScaleFactor=1,this.blankWidth=0,e&&Object.assign(this,e)}clone(){const e=new sT;return e.continueStroke=this.continueStroke,e.color=this.color.copy(),e.align=this.align,e.fontFace={...this.fontFace},e.capHeight={...this.capHeight},e.widthFactor={...this.widthFactor},e.charTrackingFactor={...this.charTrackingFactor},e.oblique=this.oblique,e.paragraph={...this.paragraph},e.fontScaleFactor=this.fontScaleFactor,e.fontSize=this.fontSize,e.fontSizeScaleFactor=this.fontSizeScaleFactor,e.blankWidth=this.blankWidth,e}getColorAsHex(){return this.color.isRgb&&this.color.rgbValue!==null?this.color.rgbValue:this.color.isAci&&this.color.aci!==null?use(this.color.aci):16777215}setColorFromHex(e){const n=e>>16&255,r=e>>8&255,s=e&255;this.color.rgb=[n,r,s]}}class Xle{constructor(e,n,r,s){this._contextStack=[],this._maxFontSize=0,this._currentIndent=0,this._currentLeftMargin=0,this._currentRightMargin=0,this._style=e,this._styleManager=n,this._fontManager=r,this._options=s,this._totalHeight=0,this._hOffset=0,this._vOffset=0,this._lineCount=1,this._currentLineObjects=[],this._currentContext=new sT({fontScaleFactor:this.fontManager.getFontScaleFactor(this.textStyle.font.toLowerCase()),fontSize:s.fontSize,fontSizeScaleFactor:1,italic:!1,bold:!1,blankWidth:this.calculateBlankWidthForFont(this.textStyle.font.toLowerCase(),s.fontSize)}),this._currentContext.setColorFromHex(e.color),this._currentContext.fontFace.family=this.textStyle.font.toLowerCase(),this._currentContext.widthFactor={value:s.widthFactor,isRelative:!0},this._currentContext.oblique=e.obliqueAngle||0,this._maxFontSize=0,this._currentHorizontalAlignment=s.horizontalAlignment,this._currentIndent=0,this._currentLeftMargin=0,this._currentRightMargin=0,this.initLineParams()}get fontManager(){return this._fontManager}get styleManager(){return this._styleManager}get textStyle(){return this._style}get totalHeight(){return this._lineCount==1?this.currentMaxFontSize:this._totalHeight+this.currentLineHeight}get maxWidth(){return this._options.maxWidth}get flowDirection(){return this._options.flowDirection}get defaultHorizontalAlignment(){return this._options.horizontalAlignment}get defaultWidthFactor(){return this._options.widthFactor}get defaultFontSize(){return this._options.fontSize}get defaultLineSpaceFactor(){return this._options.lineSpaceFactor}get currentFont(){return this._currentContext.fontFace.family}get currentHorizontalAlignment(){return this._currentHorizontalAlignment}get currentFontSize(){return this._currentContext.fontSize}get currentLineHeight(){return this.defaultLineSpaceFactor*this.currentFontSize*Yle+this.currentMaxFontSize}get currentMaxFontSize(){return this._maxFontSize}get currentWordSpace(){return this._currentContext.charTrackingFactor.value}get currentWidthFactor(){return this._currentContext.widthFactor.value}get currentLineObjects(){return this._currentLineObjects}get hOffset(){return this._hOffset}set hOffset(e){this._hOffset=e}get vOffset(){return this._vOffset}set vOffset(e){this._vOffset=e}get currentIndent(){return this._currentIndent}get currentLeftMargin(){return this._currentLeftMargin}get currentRightMargin(){return this._currentRightMargin}get maxLineWidth(){return this.maxWidth-this._currentLeftMargin-this._currentRightMargin}processFormat(e){switch(e.command){case"f":case"F":e.changes.fontFace&&(this.changeFont(e.changes.fontFace.family),this.fontManager.getFontType(this._currentContext.fontFace.family)==="mesh"?(this._currentContext.italic=e.changes.fontFace.style==="Italic",this._currentContext.bold=(e.changes.fontFace.weight||400)>=700,this._currentContext.oblique=this.textStyle.obliqueAngle||0):(this._currentContext.italic=!1,this._currentContext.bold=!1,e.changes.fontFace.style==="Italic"?this._currentContext.oblique=15:this._currentContext.oblique=this.textStyle.obliqueAngle||0));break;case"c":case"C":e.changes.aci?e.changes.aci===0?this._currentContext.setColorFromHex(this._options.byBlockColor):e.changes.aci===256?this._currentContext.setColorFromHex(this._options.byLayerColor):this._currentContext.color.aci=e.changes.aci:e.changes.rgb&&(this._currentContext.color.rgb=e.changes.rgb);break;case"W":e.changes.widthFactor&&(e.changes.widthFactor.isRelative?this._currentContext.widthFactor={value:e.changes.widthFactor.value*this.maxWidth,isRelative:!1}:this._currentContext.widthFactor={value:e.changes.widthFactor.value*.93,isRelative:!1});break;case"H":e.changes.capHeight&&(e.changes.capHeight.isRelative?this.changeFontSizeScaleFactor(e.changes.capHeight.value):this.changeFontHeight(e.changes.capHeight.value));break;case"T":e.changes.charTrackingFactor&&(e.changes.charTrackingFactor.isRelative?this._currentContext.charTrackingFactor={value:e.changes.charTrackingFactor.value+1,isRelative:!1}:this._currentContext.charTrackingFactor={value:e.changes.charTrackingFactor.value,isRelative:!1});break;case"p":e.changes.paragraph&&(e.changes.paragraph.align&&(this._currentHorizontalAlignment=e.changes.paragraph.align),typeof e.changes.paragraph.indent=="number"&&(this._currentIndent=e.changes.paragraph.indent*this.defaultFontSize,this._hOffset+=this._currentIndent),typeof e.changes.paragraph.left=="number"&&(this._currentLeftMargin=e.changes.paragraph.left*this.defaultFontSize),typeof e.changes.paragraph.right=="number"&&(this._currentRightMargin=e.changes.paragraph.right*this.defaultFontSize));break;case"L":this._currentContext.underline=!0;break;case"l":this._currentContext.underline=!1;break;case"O":this._currentContext.overline=!0;break;case"o":this._currentContext.overline=!1;break;case"K":this._currentContext.strikeThrough=!0;break;case"k":this._currentContext.strikeThrough=!1;break;case"Q":e.changes.oblique!==void 0&&(this._currentContext.oblique=e.changes.oblique);break}}resetParagraphProperties(){this._currentIndent=0,this._currentLeftMargin=0,this._currentRightMargin=0,this._currentHorizontalAlignment=this._options.horizontalAlignment}startNewParagraph(e,n,r){this.processGeometries(e,n,r),this.startNewLine(),this.resetParagraphProperties()}processText(e){const n=[],r=[],s=new Aa;for(const i of e)if(i.type===yf.NEW_PARAGRAPH)this.startNewParagraph(n,r,s);else if(i.type===yf.WORD){const o=i.data;Array.isArray(o)?o.forEach(a=>this.processWord(a,n,r)):typeof o=="string"&&o.length>0&&this.processWord(o,n,r)}else if(i.type===yf.SPACE)this.processBlank();else if(i.type===yf.PROPERTIES_CHANGED){this.processGeometries(n,r,s);const o=i.data;o.command===void 0?this._contextStack.length>0&&(this._currentContext=this._contextStack.pop()):(o.depth>0&&this._contextStack.push(this._currentContext.clone()),this.processFormat(o))}else i.type===yf.STACK&&(this.processStack(i.data,n,r),this.processGeometries(n,r,s));return(n.length>0||r.length>0)&&this.processGeometries(n,r,s),this.processLastLine(),s}processGeometries(e,n,r){if(e.length>0||n.length>0){const s=this.toThreeObject(e,n);r.add(s),this._currentLineObjects.push(s),e.length=0,n.length=0}}processWord(e,n,r){let s=0;for(let i=0;i<e.length;i++){const o=this.getCharShape(e[i]);o?this.currentHorizontalAlignment==Ea.DISTRIBUTED?s+=o.width*this.currentWidthFactor:s+=o.width*this.currentWordSpace*this.currentWidthFactor:s+=this._currentContext.blankWidth}this.hOffset+s>(this.maxLineWidth||1/0)&&this.startNewLine();for(let i=0;i<e.length;i++)this.processChar(e[i],n,r)}processStack(e,n,r){const[s,i,o]=e,a=this._hOffset,l=this._vOffset,c=this._currentContext.charTrackingFactor.value,u=this._currentContext.fontSize,d=this._currentContext.fontSizeScaleFactor;this._hOffset=a,this._currentContext.charTrackingFactor={value:1,isRelative:!1};let h=0;for(let g=0;g<s.length;g++){const S=this.getCharShape(s[g]);S&&(h+=S.width*this.currentWidthFactor)}this._hOffset=a;let f=0;for(let g=0;g<i.length;g++){const S=this.getCharShape(i[g]);S&&(f+=S.width*this.currentWidthFactor)}const m=Math.max(h,f),v=(m-h)/2,y=(m-f)/2;if(o==="^"){if(this._currentContext.fontSizeScaleFactor=d*.7,this.calcuateLineParams(),s&&!i){const g=[],S=[];this._hOffset=a,this._vOffset=l+u*.1;for(let _=0;_<s.length;_++)this.processChar(s[_],g,S);n.push(...g),r.push(...S),this._hOffset=a+h}else if(!s&&i){const g=[],S=[];this._hOffset=a,this._vOffset=l-u*.6;for(let _=0;_<i.length;_++)this.processChar(i[_],g,S);n.push(...g),r.push(...S),this._hOffset=a+f}this._currentContext.fontSizeScaleFactor=d,this.calcuateLineParams()}else{const g=[],S=[];this._hOffset=a+v,this._vOffset=l+this.currentFontSize*.3;for(let E=0;E<s.length;E++)this.processChar(s[E],g,S);n.push(...g),r.push(...S);const _=[],w=[];this._hOffset=a+y,this._vOffset=l-this.currentFontSize*.6;for(let E=0;E<i.length;E++)this.processChar(i[E],_,w);if(n.push(..._),r.push(...w),o==="/"||o==="#"){const E=new mr,C=new Float32Array([a,l-this.currentFontSize*.8,0,a+m,l-this.currentFontSize*.8,0]);E.setAttribute("position",new Ar(C,3)),E.setIndex(null),r.push(E)}this._hOffset=a+m}this._vOffset=l,this._currentContext.charTrackingFactor={value:c,isRelative:!1}}processBlank(){this._hOffset+=this._currentContext.blankWidth}processChar(e,n,r){const s=this.getCharShape(e);if(!s){this.processBlank();return}const i=s.toGeometry();i.scale(this.currentWidthFactor,1,1);let o=this._currentContext.oblique;if(this._currentContext.italic&&(o+=15),o){const m=o*Math.PI/180,v=new Rr;v.set(1,Math.tan(m),0,0,0,1,0,0,0,0,1,0,0,0,0,1),i.applyMatrix4(v)}const a=this.fontManager.getFontType(this.currentFont);this._currentContext.bold&&a==="mesh"&&i.scale(1.06,1.06,1),this.hOffset>(this.maxLineWidth||1/0)&&this.startNewLine();const l=this.hOffset,c=this.flowDirection==Rg.BOTTOM_TO_TOP?this.vOffset:this.vOffset-this.currentFontSize,u=s.width*this.currentWidthFactor,d=this.currentFontSize;i.translate(l,c,0),this.currentHorizontalAlignment==Ea.DISTRIBUTED?this._hOffset+=s.width*this.currentWidthFactor:this._hOffset+=s.width*this.currentWordSpace*this.currentWidthFactor,n.push(i);const h=d*.05,f=.001;if(this._currentContext.underline){const m=new mr,v=c-h;m.setAttribute("position",new Ar(new Float32Array([l,v,f,l+u,v,f]),3)),m.setIndex(null),r.push(m)}if(this._currentContext.overline){const m=new mr,v=c+d+h;m.setAttribute("position",new Ar(new Float32Array([l,v,f,l+u,v,f]),3)),m.setIndex(null),r.push(m)}if(this._currentContext.strikeThrough){const m=new mr,v=c+d/2-d*.2;m.setAttribute("position",new Ar(new Float32Array([l,v,f,l+u,v,f]),3)),m.setIndex(null),r.push(m)}}processLastLine(){this.processAlignment()}initLineParams(){this.calcuateLineParams()}changeFont(e){let n=e;this._options.removeFontExtension&&(n=e.replace(/\.(ttf|otf|woff|shx)$/,"")),this._currentContext.fontFace.family=this.fontManager.findAndReplaceFont(n),this._currentContext.blankWidth=this.calculateBlankWidthForFont(this._currentContext.fontFace.family,this._currentContext.fontSize),this.calcuateLineParams()}calcuateLineParams(e){this._currentContext.fontScaleFactor=this.fontManager.getFontScaleFactor(this.currentFont);const n=e||this.defaultFontSize||this.textStyle.fixedTextHeight;this._currentContext.fontSize=n*this._currentContext.fontScaleFactor*this._currentContext.fontSizeScaleFactor}getCharShape(e){let n=this.fontManager.getCharShape(e,this.currentFont,this.currentFontSize);return this.textStyle.bigFont&&!n&&(n=this.fontManager.getCharShape(e,this.textStyle.bigFont,this.currentFontSize)),n||(n=this.fontManager.getCharShape(e,"",this.currentFontSize)),n||(n=this.fontManager.getNotFoundTextShape(this.currentFontSize)),this.currentFontSize>this._maxFontSize&&(this._maxFontSize=this.currentFontSize),n}startNewLine(){this._hOffset=0,this.flowDirection==Rg.BOTTOM_TO_TOP?this._vOffset+=this.currentLineHeight:this._vOffset-=this.currentLineHeight,this._lineCount++,this.processAlignment(),this._currentLineObjects=[],this._lineCount==2?this._totalHeight=this.currentMaxFontSize:this._totalHeight=this._totalHeight+this.currentLineHeight,this._maxFontSize=0}processAlignment(){const e=[];if(this.currentLineObjects.forEach(r=>r.traverse(s=>{"geometry"in s&&e.push(s.geometry)})),e.length==0)return;let n;if(e.forEach((r,s)=>{r.boundingBox||r.computeBoundingBox(),s===0?n=r.boundingBox:n.union(r.boundingBox)}),n){const r=n.getSize(qle);switch(this.currentHorizontalAlignment){case Ea.LEFT:e.forEach(s=>s.translate(this._currentLeftMargin-n.min.x,0,0));break;case Ea.CENTER:e.forEach(s=>s.translate(this._currentLeftMargin+(this.maxLineWidth-r.x)/2-n.min.x,0,0));break;case Ea.RIGHT:e.forEach(s=>s.translate(this._currentLeftMargin+this.maxLineWidth-r.x-n.min.x,0,0));break;case Ea.DISTRIBUTED:if(e.length>1){const s=(this.maxLineWidth-r.x)/(e.length-1);for(let i=1;i<e.length;i++)e[i].translate(s*i,0,0)}e.forEach(s=>s.translate(this._currentLeftMargin-n.min.x,0,0));break}}}calculateBlankWidthForFont(e,n){return this.fontManager.getFontType(e)==="shx"?n*.5:n*.3}toThreeObject(e,n){const r=new Aa,s=this._currentContext.getColorAsHex(),i=e.filter(a=>a instanceof wg);if(i.length>0){const a=new Os;a.geometry=RI(i),a.material=this.styleManager.getMeshBasicMaterial(s),a.userData.bboxIntersectionCheck=!0,r.add(a)}const o=[...n,...e.filter(a=>!(a instanceof wg))];if(o.length>0){const a=new bc;a.geometry=RI(o),a.material=this.styleManager.getLineBasicMaterial(s),a.userData.bboxIntersectionCheck=!0,r.add(a)}return r.children.length===1?r.children[0]:r}changeFontSizeScaleFactor(e){this._currentContext.fontSizeScaleFactor*=e,this.calcuateLineParams()}changeFontHeight(e){this._currentContext.fontSize=e*this._currentContext.fontScaleFactor*this._currentContext.fontSizeScaleFactor,this.calcuateLineParams()}}const ix=new Ze,fd=new Ze,ox=new Ze,ax=new Lu,lx=new Rr,zI=new Rr,$I=new Ze(1,0,0);let VI=class y8 extends Gs{static getFonts(e,n=!1){return Wle(e,n)}constructor(e,n,r,s,i={byLayerColor:16777215,byBlockColor:16777215}){super(),this._style=n,this._styleManager=r,this._fontManager=s,this._colorSettings={byLayerColor:i.byLayerColor,byBlockColor:i.byBlockColor},this._box=new us,this._boxes=[],this._mtextData=e}get fontManager(){return this._fontManager}async asyncDraw(){const e=Array.from(y8.getFonts(this._mtextData.text||"",!0));e.length>0&&await this._fontManager.loadFontsByNames(e),this.syncDraw()}syncDraw(){const e=this.loadMText(this._mtextData,this._style);e&&(this.getBoxes(e,this._boxes),this._boxes.forEach(n=>this.box.union(n)),this.add(e))}get styleManager(){return this._styleManager}get textStyle(){return this._style}get box(){return this._box}set box(e){this._box.copy(e)}raycast(e,n){this._boxes.forEach(r=>{if(e.ray.intersectBox(r,ix)){const s=e.ray.origin.distanceTo(ix);n.push({distance:s,point:ix.clone(),object:this,face:null,faceIndex:void 0,uv:void 0})}})}loadMText(e,n){const{object:r,height:s}=this.createMTextGroup(e,n);if(!r)return;r.matrix.decompose(fd,ax,ox),e.position&&(fd.x+=e.position.x,fd.y+=e.position.y,r.matrix.compose(fd,ax,ox));const i=e.width,o=this.calculateAnchorPoint(i,s,e.attachmentPoint,e.drawingDirection);r.traverse(c=>{"geometry"in c&&c.geometry.translate(o.x,o.y,0),c.layers.enableAll()});let a=e.rotation||0;if(e.directionVector){const c=e.directionVector,u=new Ze(c.x,c.y,c.z),d=u.clone().cross($I),h=$I.angleTo(u);a=d.z>0?-h:h}r.matrix.compose(fd,ax,ox);const l=e.position?fd.clone().sub(e.position):fd;return lx.makeTranslation(-l.x,-l.y,0),zI.makeRotationZ(a),r.matrix.multiply(lx),r.matrix.multiply(zI),r.matrix.multiply(lx.invert()),r.matrix.decompose(r.position,r.quaternion,r.scale),r}createMTextGroup(e,n){if(n&&n.font&&n.font.endsWith(".shx")){const f=`${n.font}_${n.name}`;this.styleManager.unsupportedTextStyles[f]||(this.styleManager.unsupportedTextStyles[f]=0),this.styleManager.unsupportedTextStyles[f]++}const r=e.width||0;let s=Ea.LEFT;e.width&&e.attachmentPoint&&([1,4,7].includes(e.attachmentPoint)?s=Ea.LEFT:[2,5,8].includes(e.attachmentPoint)?s=Ea.CENTER:[3,6,9].includes(e.attachmentPoint)&&(s=Ea.RIGHT));let i=Pm.BOTTOM;e.attachmentPoint&&([1,2,3].includes(e.attachmentPoint)?i=Pm.TOP:[4,5,6].includes(e.attachmentPoint)?i=Pm.MIDDLE:[7,8,9].includes(e.attachmentPoint)&&(i=Pm.BOTTOM));const o=e.height||0,a=e.lineSpaceFactor||.3,l=e.drawingDirection??Rg.LEFT_TO_RIGHT,c={fontSize:o,widthFactor:e.widthFactor??1,lineSpaceFactor:a,horizontalAlignment:s,maxWidth:r,flowDirection:l,byBlockColor:this._colorSettings.byBlockColor,byLayerColor:this._colorSettings.byLayerColor,removeFontExtension:!0},u=new rT;u.fontFace.family=n.font,u.capHeight={value:e.height||1,isRelative:!0},u.widthFactor={value:e.widthFactor??1,isRelative:!0},u.align=i,u.paragraph.align=s;const d=new Xle(n,this.styleManager,this.fontManager,c),h=new Kle(e.text,u,{resetParagraphParameters:!0,yieldPropertyCommands:!0}).parse();return{object:d.processText(h),height:d.totalHeight}}calculateAnchorPoint(e,n,r,s){let i=0,o=0;switch(r){case void 0:case 1:i=0,o=0;break;case 2:i-=e/2,o=0;break;case 3:i-=e,o=0;break;case 4:i=0,o+=n/2;break;case 5:i-=e/2,o+=n/2;break;case 6:i-=e,o+=n/2;break;case 7:i=0,o+=n;break;case 8:i-=e/2,o+=n;break;case 9:i-=e,o+=n;break}return s==Rg.BOTTOM_TO_TOP&&(o-=n),{x:i,y:o}}getBoxes(e,n){if(e.updateWorldMatrix(!1,!1),e instanceof gg||e instanceof Os){const s=e.geometry;s.boundingBox===null&&s.computeBoundingBox();const i=new us().copy(s.boundingBox);i.applyMatrix4(e.matrixWorld),n.push(i)}const r=e.children;for(let s=0,i=r.length;s<i;s++)this.getBoxes(r[s],n)}};class b8{constructor(){this.lineBasicMaterials={},this.meshBasicMaterials={},this.unsupportedTextStyles={}}getMeshBasicMaterial(e){return this.meshBasicMaterials[e]||(this.meshBasicMaterials[e]=new mv({color:e})),this.meshBasicMaterials[e]}getLineBasicMaterial(e){return this.lineBasicMaterials[e]||(this.lineBasicMaterials[e]=new Fp({color:e})),this.lineBasicMaterials[e]}}class Zle{constructor(e={}){this.workers=[],this.inFlightPerWorker=[],this.pendingRequests=new Map,this.requestId=0,this.readyPromise=null,this.poolSize=e.poolSize??Math.max(1,navigator.hardwareConcurrency?Math.min(4,navigator.hardwareConcurrency):2),this.styleManager=new b8;const n=e.workerUrl??"./mtext-renderer-worker.js";this.timeOut=e.timeOut??12e4;for(let r=0;r<this.poolSize;r++){const s=new Worker(new URL(n,import.meta.url),{type:"module"});this.attachWorkerHandlers(s,r),this.workers.push(s),this.inFlightPerWorker.push(0)}this.isInitialized=!1}async ensureInitialized(){this.isInitialized||(await this.loadFonts([hl.instance.defaultFont]),this.isInitialized=!0),await this.ensureTasksFinished()}handleWorkerMessage(e){const{id:n,success:r,data:s,error:i}=e,o=this.pendingRequests.get(n);if(o){this.pendingRequests.delete(n);const{workerIndex:a}=o;this.inFlightPerWorker[a]=Math.max(0,this.inFlightPerWorker[a]-1),r?o.resolve(s):o.reject(new Error(i||"Unknown worker error"))}}attachWorkerHandlers(e,n){e.onmessage=r=>{this.handleWorkerMessage(r.data)},e.onerror=r=>{console.error("Worker error:",r);const s=[];this.pendingRequests.forEach((i,o)=>{i.workerIndex===n&&s.push(o)}),s.forEach(i=>{const o=this.pendingRequests.get(i);o&&(o.reject(new Error("Worker error occurred")),this.pendingRequests.delete(i))}),this.inFlightPerWorker[n]=0}}pickLeastLoadedWorker(){let e=0,n=this.inFlightPerWorker[0]??0;for(let r=1;r<this.inFlightPerWorker.length;r++){const s=this.inFlightPerWorker[r]??0;s<n&&(n=s,e=r)}return e}sendMessage(e,n){const r=this.pickLeastLoadedWorker(),s=this.workers[r];return new Promise((i,o)=>{const a=`req_${++this.requestId}`;this.pendingRequests.set(a,{resolve:l=>i(l),reject:o,workerIndex:r}),this.inFlightPerWorker[r]=(this.inFlightPerWorker[r]??0)+1,s.postMessage({type:e,id:a,data:n}),setTimeout(()=>{this.pendingRequests.get(a)&&(this.pendingRequests.delete(a),this.inFlightPerWorker[r]=Math.max(0,this.inFlightPerWorker[r]-1),o(new Error("Worker request timeout")))},this.timeOut)})}ensureTasksFinished(){return this.readyPromise?this.readyPromise:this.workers.length===0?Promise.resolve():(this.readyPromise=Promise.all(this.workers.map((e,n)=>new Promise((r,s)=>{const i=`req_${++this.requestId}`;this.pendingRequests.set(i,{resolve:()=>r(),reject:s,workerIndex:n}),this.inFlightPerWorker[n]=(this.inFlightPerWorker[n]??0)+1,e.postMessage({type:"getAvailableFonts",id:i}),setTimeout(()=>{this.pendingRequests.get(i)&&(this.pendingRequests.delete(i),this.inFlightPerWorker[n]=Math.max(0,this.inFlightPerWorker[n]-1),s(new Error("Worker init timeout")))},this.timeOut)}))).then(()=>{}),this.readyPromise)}async asyncRenderMText(e,n,r={byLayerColor:16777215,byBlockColor:16777215}){await this.ensureInitialized();const s=await this.sendMessage("render",{mtextContent:e,textStyle:n,colorSettings:r});return this.reconstructMText(s)}syncRenderMText(e,n,r={byLayerColor:16777215,byBlockColor:16777215}){throw new Error("Fuction 'syncRenderMText' isn't supported in 'WebWorkerRenderer'!")}async loadFonts(e){await this.ensureTasksFinished();const n=await Promise.all(this.workers.map((s,i)=>new Promise((o,a)=>{const l=`req_${++this.requestId}`;this.pendingRequests.set(l,{resolve:c=>o(c),reject:a,workerIndex:i}),this.inFlightPerWorker[i]=(this.inFlightPerWorker[i]??0)+1,s.postMessage({type:"loadFonts",id:l,data:{fonts:e}}),setTimeout(()=>{this.pendingRequests.get(l)&&(this.pendingRequests.delete(l),this.inFlightPerWorker[i]=Math.max(0,this.inFlightPerWorker[i]-1),a(new Error("Worker request timeout")))},this.timeOut)}))),r=new Set;return n.forEach(s=>{var i;return(i=s.loaded)==null?void 0:i.forEach(o=>r.add(o))}),{loaded:Array.from(r)}}async getAvailableFonts(){if(this.workers.length===0)return{fonts:[]};await this.ensureTasksFinished();const e=0,n=this.workers[e];return new Promise((r,s)=>{const i=`req_${++this.requestId}`;this.pendingRequests.set(i,{resolve:o=>r(o),reject:s,workerIndex:e}),this.inFlightPerWorker[e]=(this.inFlightPerWorker[e]??0)+1,n.postMessage({type:"getAvailableFonts",id:i}),setTimeout(()=>{this.pendingRequests.get(i)&&(this.pendingRequests.delete(i),this.inFlightPerWorker[e]=Math.max(0,this.inFlightPerWorker[e]-1),s(new Error("Worker request timeout")))},this.timeOut)})}reconstructMText(e){const n=new Aa;return e.children.forEach(r=>{const s=new mr;if(Object.keys(r.geometry.attributes).forEach(a=>{const l=r.geometry.attributes[a],c=new Float32Array(l.arrayBuffer,l.byteOffset,l.length),u=new Ar(c,l.itemSize,l.normalized);s.setAttribute(a,u)}),r.geometry.index)if(r.geometry.index.componentType==="uint32"){const a=new Uint32Array(r.geometry.index.arrayBuffer,r.geometry.index.byteOffset,r.geometry.index.length);s.setIndex(new _C(a,1))}else{const a=new Uint16Array(r.geometry.index.arrayBuffer,r.geometry.index.byteOffset,r.geometry.index.length);s.setIndex(new M1(a,1))}let i;r.type==="mesh"?(i=this.styleManager.getMeshBasicMaterial(r.material.color),r.material.transparent!==void 0&&(i.transparent=r.material.transparent),r.material.opacity!==void 0&&(i.opacity=r.material.opacity),r.material.side!==void 0&&(i.side=r.material.side)):(i=this.styleManager.getLineBasicMaterial(r.material.color),r.material.transparent!==void 0&&(i.transparent=r.material.transparent),r.material.opacity!==void 0&&(i.opacity=r.material.opacity),r.material.linewidth!==void 0&&(i.linewidth=r.material.linewidth));let o;r.type==="mesh"?o=new Os(s,i):o=new gg(s,i),s.boundingBox||s.computeBoundingBox(),s.boundingSphere||s.computeBoundingSphere(),o.position.set(r.position.x,r.position.y,r.position.z),o.quaternion.set(r.rotation.x,r.rotation.y,r.rotation.z,r.rotation.w),o.scale.set(r.scale.x,r.scale.y,r.scale.z),n.add(o)}),n.box=new us(new Ze(e.box.min.x,e.box.min.y,e.box.min.z),new Ze(e.box.max.x,e.box.max.y,e.box.max.z)),n}terminate(){this.workers.forEach(e=>e.terminate()),this.workers=[],this.inFlightPerWorker=[],this.readyPromise=null,this.pendingRequests.forEach(({reject:e})=>{e(new Error("Renderer terminated"))}),this.pendingRequests.clear()}destroy(){this.terminate()}}class Jle{constructor(){this.fontManager=hl.instance,this.styleManager=new b8,this.isInitialized=!1}async asyncRenderMText(e,n,r={byLayerColor:16777215,byBlockColor:16777215}){await this.ensureInitialized();const s=new VI(e,n,this.styleManager,this.fontManager,r);return await s.asyncDraw(),s.updateMatrixWorld(!0),s}syncRenderMText(e,n,r={byLayerColor:16777215,byBlockColor:16777215}){const s=new VI(e,n,this.styleManager,this.fontManager,r);return s.syncDraw(),s.updateMatrixWorld(!0),s}async loadFonts(e){return await this.fontManager.loadFontsByNames(e),{loaded:e}}async getAvailableFonts(){return{fonts:await this.fontManager.getAvaiableFonts()}}destroy(){}async ensureInitialized(){this.isInitialized||(await this.loadFonts([hl.instance.defaultFont]),this.isInitialized=!0)}}class Qle{constructor(e="main",n={}){this.defaultMode=e,this.mainThreadRenderer=new Jle,this.webWorkerRenderer=new Zle(n),this.renderer=this.mainThreadRenderer,e==="worker"&&(this.renderer=this.webWorkerRenderer)}setDefaultMode(e){this.defaultMode!==e&&(this.defaultMode=e,e==="worker"?this.renderer=this.webWorkerRenderer:this.renderer=this.mainThreadRenderer)}getDefaultMode(){return this.defaultMode}async asyncRenderMText(e,n,r={byLayerColor:16777215,byBlockColor:16777215},s){return s?(s==="worker"?this.webWorkerRenderer:this.mainThreadRenderer).asyncRenderMText(e,n,r):this.renderer.asyncRenderMText(e,n,r)}syncRenderMText(e,n,r={byLayerColor:16777215,byBlockColor:16777215}){return this.mainThreadRenderer.syncRenderMText(e,n,r)}async loadFonts(e){return this.renderer.loadFonts(e)}async getAvailableFonts(){return this.renderer.getAvailableFonts()}destroy(){this.webWorkerRenderer&&this.webWorkerRenderer.terminate(),this.mainThreadRenderer.destroy()}}var Hi;(function(t){t[t.BeforeStart=0]="BeforeStart",t[t.EqualStart=1]="EqualStart",t[t.BetweenStartAndEnd=2]="BetweenStartAndEnd",t[t.EqualEnd=3]="EqualEnd",t[t.AfterEnd=4]="AfterEnd"})(Hi||(Hi={}));class ece{pointsSame(e,n){return this.pointsSameX(e,n)&&this.pointsSameY(e,n)}pointsCompare(e,n){return this.pointsSameX(e,n)?this.pointsSameY(e,n)?0:e[1]<n[1]?-1:1:e[0]<n[0]?-1:1}}class _8 extends ece{constructor(e=1e-10){super(),this.epsilon=e}pointAboveOrOnLine(e,n,r){const s=n[0],i=n[1],o=r[0],a=r[1],l=e[0],c=e[1];return(o-s)*(c-i)-(a-i)*(l-s)>=-this.epsilon}pointBetween(e,n,r){const s=e[1]-n[1],i=r[0]-n[0],o=e[0]-n[0],a=r[1]-n[1],l=o*i+s*a;if(l<this.epsilon)return!1;const c=i*i+a*a;return!(l-c>-this.epsilon)}pointsSameX(e,n){return Math.abs(e[0]-n[0])<this.epsilon}pointsSameY(e,n){return Math.abs(e[1]-n[1])<this.epsilon}pointsCollinear(e,n,r){const s=e[0]-n[0],i=e[1]-n[1],o=n[0]-r[0],a=n[1]-r[1];return Math.abs(s*a-o*i)<this.epsilon}linesIntersect(e,n,r,s){const i=n[0]-e[0],o=n[1]-e[1],a=s[0]-r[0],l=s[1]-r[1],c=i*l-o*a;if(Math.abs(c)<this.epsilon)return null;const u=e[0]-r[0],d=e[1]-r[1],h=(a*d-l*u)/c,f=(i*d-o*u)/c,m=y=>y<=-this.epsilon?Hi.BeforeStart:y<this.epsilon?Hi.EqualStart:y-1<=-this.epsilon?Hi.BetweenStartAndEnd:y-1<this.epsilon?Hi.EqualEnd:Hi.AfterEnd,v=[e[0]+h*i,e[1]+h*o];return{alongA:m(h),alongB:m(f),p:v}}}class HI{constructor(){this.nodes=[]}remove(e){const n=this.nodes.indexOf(e);n>=0&&this.nodes.splice(n,1)}getIndex(e){return this.nodes.indexOf(e)}isEmpty(){return this.nodes.length<=0}getHead(){return this.nodes[0]}removeHead(){this.nodes.shift()}insertBefore(e,n){this.findTransition(e,n).insert(e)}findTransition(e,n){var r,s;const i=(l,c)=>n(c)-n(l);let o=0,a=this.nodes.length;for(;o<a;){const l=o+a>>1;i(this.nodes[l],e)>0?a=l:o=l+1}return{before:o<=0?null:(r=this.nodes[o-1])!==null&&r!==void 0?r:null,after:(s=this.nodes[o])!==null&&s!==void 0?s:null,insert:l=>(this.nodes.splice(o,0,l),l)}}}let Uf=class{constructor(e,n,r,s){var i;this.otherFill=null,this.id=(i=s==null?void 0:s.segmentId())!==null&&i!==void 0?i:-1,this.start=e,this.end=n,this.myFill={above:r?r.myFill.above:null,below:r?r.myFill.below:null}}};class GI{constructor(e,n,r,s){this.status=null,this.isStart=e,this.p=n,this.seg=r,this.primary=s}}class WI{constructor(e,n,r=null){this.events=new HI,this.status=new HI,this.selfIntersection=e,this.geo=n,this.log=r}compareEvents(e,n,r,s,i,o){const a=this.geo.pointsCompare(n,i);return a!==0?a:this.geo.pointsSame(r,o)?0:e!==s?e?1:-1:this.geo.pointAboveOrOnLine(r,s?i:o,s?o:i)?1:-1}addEvent(e){this.events.insertBefore(e,n=>n===e?0:this.compareEvents(e.isStart,e.p,e.other.p,n.isStart,n.p,n.other.p))}divideEvent(e,n){var r;const s=new Uf(n,e.seg.end,e.seg,this.log);return(r=this.log)===null||r===void 0||r.segmentChop(e.seg,n),this.events.remove(e.other),e.seg.end=n,e.other.p=n,this.addEvent(e.other),this.addSegment(s,e.primary)}newSegment(e,n){const r=this.geo.pointsCompare(e,n);return r===0?null:r<0?new Uf(e,n,null,this.log):new Uf(n,e,null,this.log)}addSegment(e,n){const r=new GI(!0,e.start,e,n),s=new GI(!1,e.end,e,n);return r.other=s,s.other=r,this.addEvent(r),this.addEvent(s),r}addRegion(e){let n,r=e[e.length-1];for(let s=0;s<e.length;s++){n=r,r=e[s];const i=this.newSegment(n,r);i&&this.addSegment(i,!0)}}compareStatus(e,n){const r=e.seg.start,s=e.seg.end,i=n.seg.start,o=n.seg.end;return this.geo.pointsCollinear(r,i,o)?this.geo.pointsCollinear(s,i,o)||this.geo.pointAboveOrOnLine(s,i,o)?1:-1:this.geo.pointAboveOrOnLine(r,i,o)?1:-1}statusFindSurrounding(e){return this.status.findTransition(e,n=>n===e?0:-this.compareStatus(e,n))}checkIntersection(e,n){var r;const s=e.seg,i=n.seg,o=s.start,a=s.end,l=i.start,c=i.end;(r=this.log)===null||r===void 0||r.checkIntersection(s,i);const u=this.geo.linesIntersect(o,a,l,c);if(u===null){if(!this.geo.pointsCollinear(o,a,l)||this.geo.pointsSame(o,c)||this.geo.pointsSame(a,l))return null;const d=this.geo.pointsSame(o,l),h=this.geo.pointsSame(a,c);if(d&&h)return n;const f=!d&&this.geo.pointBetween(o,l,c),m=!h&&this.geo.pointBetween(a,l,c);if(d)return m?this.divideEvent(n,a):this.divideEvent(e,c),n;f&&(h||(m?this.divideEvent(n,a):this.divideEvent(e,c)),this.divideEvent(n,o))}else u.alongA===Hi.BetweenStartAndEnd&&(u.alongB===Hi.EqualStart?this.divideEvent(e,l):u.alongB===Hi.BetweenStartAndEnd?this.divideEvent(e,u.p):u.alongB===Hi.EqualEnd&&this.divideEvent(e,c)),u.alongB===Hi.BetweenStartAndEnd&&(u.alongA===Hi.EqualStart?this.divideEvent(n,o):u.alongA===Hi.BetweenStartAndEnd?this.divideEvent(n,u.p):u.alongA===Hi.EqualEnd&&this.divideEvent(n,a));return null}calculate(e,n){var r,s,i,o,a,l,c,u;const d=[];for(;!this.events.isEmpty();){const h=this.events.getHead();if((r=this.log)===null||r===void 0||r.vert(h.p[0]),h.isStart){(s=this.log)===null||s===void 0||s.segmentNew(h.seg,h.primary);const f=this.statusFindSurrounding(h),m=f.before,v=f.after;(i=this.log)===null||i===void 0||i.tempStatus(h.seg,m?m.seg:!1,v?v.seg:!1);const y=(()=>{if(m){const g=this.checkIntersection(h,m);if(g)return g}return v?this.checkIntersection(h,v):null})();if(y){if(this.selfIntersection){let g;h.seg.myFill.below===null?g=!0:g=h.seg.myFill.above!==h.seg.myFill.below,g&&(y.seg.myFill.above=!y.seg.myFill.above)}else y.seg.otherFill=h.seg.myFill;(o=this.log)===null||o===void 0||o.segmentUpdate(y.seg),this.events.remove(h.other),this.events.remove(h)}if(this.events.getHead()!==h){(a=this.log)===null||a===void 0||a.rewind(h.seg);continue}if(this.selfIntersection){let g;h.seg.myFill.below===null?g=!0:g=h.seg.myFill.above!==h.seg.myFill.below,v?h.seg.myFill.below=v.seg.myFill.above:h.seg.myFill.below=e,g?h.seg.myFill.above=!h.seg.myFill.below:h.seg.myFill.above=h.seg.myFill.below}else if(h.seg.otherFill===null){let g;if(!v)g=h.primary?n:e;else if(h.primary===v.primary){if(v.seg.otherFill===null)throw new Error("otherFill is null");g=v.seg.otherFill.above}else g=v.seg.myFill.above;h.seg.otherFill={above:g,below:g}}(l=this.log)===null||l===void 0||l.status(h.seg,m?m.seg:!1,v?v.seg:!1),h.other.status=f.insert(h)}else{const f=h.status;if(f===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");const m=this.status.getIndex(f);if(m>0&&m<this.status.nodes.length-1){const v=this.status.nodes[m-1],y=this.status.nodes[m+1];this.checkIntersection(v,y)}if((c=this.log)===null||c===void 0||c.statusRemove(f.seg),this.status.remove(f),!h.primary){if(!h.seg.otherFill)throw new Error("otherFill is null");const v=h.seg.myFill;h.seg.myFill=h.seg.otherFill,h.seg.otherFill=v}d.push(h.seg)}this.events.removeHead()}return(u=this.log)===null||u===void 0||u.done(),d}}function pm(t,e,n){const r=[];for(const s of t){const i=(s.myFill.above?8:0)+(s.myFill.below?4:0)+(s.otherFill&&s.otherFill.above?2:0)+(s.otherFill&&s.otherFill.below?1:0);if(e[i]!==0){const o=new Uf(s.start,s.end,null,n);o.myFill.above=e[i]===1,o.myFill.below=e[i]===2,r.push(o)}}return n==null||n.selected(r),r}let mm=class{static union(e,n){return pm(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],n)}static intersect(e,n){return pm(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],n)}static difference(e,n){return pm(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],n)}static differenceRev(e,n){return pm(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],n)}static xor(e,n){return pm(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],n)}};function tce(t,e,n){const r=[],s=[];for(const i of t){let o=function(g,S,_){return f&&(f.index=g,f.matches_head=S,f.matches_pt1=_),f===d?(f=h,!1):(f=null,!0)},a=function(g){n==null||n.chainReverse(g),r[g].reverse()},l=function(g,S){const _=r[g],w=r[S];let E=_[_.length-1];const C=_[_.length-2],T=w[0],I=w[1];e.pointsCollinear(C,E,T)&&(n==null||n.chainRemoveTail(g,E),_.pop(),E=C),e.pointsCollinear(E,T,I)&&(n==null||n.chainRemoveHead(S,T),w.shift()),n==null||n.chainJoin(g,S),r[g]=_.concat(w),r.splice(S,1)};const c=i.start,u=i.end;if(e.pointsSame(c,u)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");continue}n==null||n.chainStart(i);const d={index:0,matches_head:!1,matches_pt1:!1},h={index:0,matches_head:!1,matches_pt1:!1};let f=d;for(let g=0;g<r.length;g++){const S=r[g],_=S[0],w=S[S.length-1];if(e.pointsSame(_,c)){if(o(g,!0,!0))break}else if(e.pointsSame(_,u)){if(o(g,!0,!1))break}else if(e.pointsSame(w,c)){if(o(g,!1,!0))break}else if(e.pointsSame(w,u)&&o(g,!1,!1))break}if(f===d){r.push([c,u]),n==null||n.chainNew(c,u);continue}if(f===h){n==null||n.chainMatch(d.index);const g=d.index,S=d.matches_pt1?u:c,_=d.matches_head,w=r[g];let E=_?w[0]:w[w.length-1];const C=_?w[1]:w[w.length-2],T=_?w[w.length-1]:w[0],I=_?w[w.length-2]:w[1];if(e.pointsCollinear(C,E,S)&&(_?(n==null||n.chainRemoveHead(d.index,S),w.shift()):(n==null||n.chainRemoveTail(d.index,S),w.pop()),E=C),e.pointsSame(T,S)){r.splice(g,1),e.pointsCollinear(I,T,E)&&(_?(n==null||n.chainRemoveTail(d.index,E),w.pop()):(n==null||n.chainRemoveHead(d.index,E),w.shift())),n==null||n.chainClose(d.index),s.push(w);continue}_?(n==null||n.chainAddHead(d.index,S),w.unshift(S)):(n==null||n.chainAddTail(d.index,S),w.push(S));continue}const m=d.index,v=h.index;n==null||n.chainConnect(m,v);const y=r[m].length<r[v].length;d.matches_head?h.matches_head?y?(a(m),l(m,v)):(a(v),l(v,m)):l(v,m):h.matches_head?l(m,v):y?(a(m),l(v,m)):(a(v),l(m,v))}return s}class nce{constructor(){this.list=[],this.nextSegmentId=0,this.curVert=NaN}push(e,n){this.list.push({type:e,data:JSON.parse(JSON.stringify(n))})}segmentId(){return this.nextSegmentId++}checkIntersection(e,n){this.push("check",{seg1:e,seg2:n})}segmentChop(e,n){this.push("div_seg",{seg:e,p:n}),this.push("chop",{seg:e,p:n})}statusRemove(e){this.push("pop_seg",{seg:e})}segmentUpdate(e){this.push("seg_update",{seg:e})}segmentNew(e,n){this.push("new_seg",{seg:e,primary:n})}tempStatus(e,n,r){this.push("temp_status",{seg:e,above:n,below:r})}rewind(e){this.push("rewind",{seg:e})}status(e,n,r){this.push("status",{seg:e,above:n,below:r})}vert(e){e!==this.curVert&&(this.push("vert",{x:e}),this.curVert=e)}selected(e){this.push("selected",{segs:e})}chainStart(e){this.push("chain_start",{seg:e})}chainRemoveHead(e,n){this.push("chain_rem_head",{index:e,p:n})}chainRemoveTail(e,n){this.push("chain_rem_tail",{index:e,p:n})}chainNew(e,n){this.push("chain_new",{p1:e,p2:n})}chainMatch(e){this.push("chain_match",{index:e})}chainClose(e){this.push("chain_close",{index:e})}chainAddHead(e,n){this.push("chain_add_head",{index:e,p:n})}chainAddTail(e,n){this.push("chain_add_tail",{index:e,p:n})}chainConnect(e,n){this.push("chain_con",{index1:e,index2:n})}chainReverse(e){this.push("chain_rev",{index:e})}chainJoin(e,n){this.push("chain_join",{index1:e,index2:n})}done(){this.push("done",null)}}class w8{constructor(e){this.log=null,this.geo=e}buildLog(e){var n;return this.log=e?new nce:null,(n=this.log)===null||n===void 0?void 0:n.list}segments(e){const n=new WI(!0,this.geo,this.log);for(const r of e.regions)n.addRegion(r);return{segments:n.calculate(e.inverted,!1),inverted:e.inverted}}combine(e,n){const r=new WI(!1,this.geo,this.log);for(const s of e.segments)r.addSegment(new Uf(s.start,s.end,s,this.log),!0);for(const s of n.segments)r.addSegment(new Uf(s.start,s.end,s,this.log),!1);return{combined:r.calculate(e.inverted,n.inverted),inverted1:e.inverted,inverted2:n.inverted}}selectUnion(e){return{segments:mm.union(e.combined,this.log),inverted:e.inverted1||e.inverted2}}selectIntersect(e){return{segments:mm.intersect(e.combined,this.log),inverted:e.inverted1&&e.inverted2}}selectDifference(e){return{segments:mm.difference(e.combined,this.log),inverted:e.inverted1&&!e.inverted2}}selectDifferenceRev(e){return{segments:mm.differenceRev(e.combined,this.log),inverted:!e.inverted1&&e.inverted2}}selectXor(e){return{segments:mm.xor(e.combined,this.log),inverted:e.inverted1!==e.inverted2}}polygon(e){return{regions:tce(e.segments,this.geo,this.log),inverted:e.inverted}}union(e,n){const r=this.segments(e),s=this.segments(n),i=this.combine(r,s),o=this.selectUnion(i);return this.polygon(o)}intersect(e,n){const r=this.segments(e),s=this.segments(n),i=this.combine(r,s),o=this.selectIntersect(i);return this.polygon(o)}difference(e,n){const r=this.segments(e),s=this.segments(n),i=this.combine(r,s),o=this.selectDifference(i);return this.polygon(o)}differenceRev(e,n){const r=this.segments(e),s=this.segments(n),i=this.combine(r,s),o=this.selectDifferenceRev(i);return this.polygon(o)}xor(e,n){const r=this.segments(e),s=this.segments(n),i=this.combine(r,s),o=this.selectXor(i);return this.polygon(o)}}new w8(new _8);const tl=[.5,0,0,.48429158056431554,-.1243449435824274,0,.4381533400219318,-.24087683705085766,0,.3644843137107058,-.3422735529643443,0,.2679133974894983,-.42216396275100754,0,.15450849718747373,-.47552825814757677,0,.03139525976465676,-.4990133642141358,0,-.09369065729286241,-.4911436253643443,0,-.21288964578253636,-.45241352623300973,0,-.3187119948743449,-.3852566213878946,0,-.40450849718747367,-.2938926261462366,0,-.4648882429441257,-.18406227634233907,0,-.4960573506572389,-.06266661678215227,0,-.49605735065723894,.06266661678215214,0,-.4648882429441256,.18406227634233915,0,-.4045084971874738,.2938926261462365,0,-.31871199487434476,.3852566213878947,0,-.21288964578253608,.4524135262330099,0,-.09369065729286231,.49114362536434436,0,.031395259764656416,.4990133642141358,0,.15450849718747361,.4755282581475768,0,.267913397489498,.42216396275100776,0,.3644843137107056,.3422735529643445,0,.4381533400219318,.24087683705085766,0,.4842915805643155,.12434494358242767,0,.5,0,0],nl=[0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15,15,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25],rce=new Map([[2,{position:new Float32Array([-1,0,0,1,0,0,0,-1,0,0,1,0]),indices:new Uint16Array([0,1,2,3])}],[3,{position:new Float32Array([-Math.SQRT1_2,Math.SQRT1_2,0,Math.SQRT1_2,-Math.SQRT1_2,0,-Math.SQRT1_2,-Math.SQRT1_2,0,Math.SQRT1_2,Math.SQRT1_2,0]),indices:new Uint16Array([0,1,2,3])}],[4,{position:new Float32Array([0,0,0,0,.5,0]),indices:new Uint16Array([0,1,2,3])}],[32,{position:new Float32Array(tl),indices:new Uint16Array(nl)}],[33,{position:new Float32Array(tl),indices:new Uint16Array(nl)}],[34,{position:new Float32Array([...tl,-1,0,0,1,0,0,0,-1,0,0,1,0]),indices:new Uint16Array([...nl,26,27,28,29])}],[35,{position:new Float32Array([...tl,-Math.SQRT1_2,Math.SQRT1_2,0,Math.SQRT1_2,-Math.SQRT1_2,0,-Math.SQRT1_2,-Math.SQRT1_2,0,Math.SQRT1_2,Math.SQRT1_2,0]),indices:new Uint16Array([...nl,26,27,28,29])}],[36,{position:new Float32Array([...tl,0,0,0,0,.5,0]),indices:new Uint16Array([...nl,26,27])}],[64,{position:new Float32Array([-.5,.5,0,.5,.5,0,.5,-.5,0,-.5,-.5,0,-.5,.5,0]),indices:new Uint16Array([0,1,1,2,2,3,3,4])}],[65,{position:new Float32Array([-.5,.5,0,.5,.5,0,.5,-.5,0,-.5,-.5,0,-.5,.5,0]),indices:new Uint16Array([0,1,1,2,2,3,3,4])}],[66,{position:new Float32Array([-.5,.5,0,.5,.5,0,.5,-.5,0,-.5,-.5,0,-.5,.5,0,-1,0,0,1,0,0,0,-1,0,0,1,0]),indices:new Uint16Array([0,1,1,2,2,3,3,4,5,6,7,8])}],[67,{position:new Float32Array([-.5,.5,0,.5,.5,0,.5,-.5,0,-.5,-.5,0,-Math.SQRT1_2,Math.SQRT1_2,0,Math.SQRT1_2,-Math.SQRT1_2,0,-Math.SQRT1_2,-Math.SQRT1_2,0,Math.SQRT1_2,Math.SQRT1_2,0]),indices:new Uint16Array([0,1,1,2,2,3,3,0,4,5,6,7])}],[68,{position:new Float32Array([-.5,.5,0,.5,.5,0,.5,-.5,0,-.5,-.5,0,-.5,.5,0,0,0,0,0,.5,0]),indices:new Uint16Array([0,1,1,2,2,3,3,4,5,6])}],[96,{position:new Float32Array([...tl,-.5,.5,0,.5,.5,0,.5,-.5,0,-.5,-.5,0]),indices:new Uint16Array([...nl,26,27,27,28,28,29,29,26])}],[97,{position:new Float32Array([...tl,-.5,.5,0,.5,.5,0,.5,-.5,0,-.5,-.5,0,-.5,.5,0]),indices:new Uint16Array([...nl,26,27,27,28,28,29,29,30])}],[98,{position:new Float32Array([...tl,-.5,.5,0,.5,.5,0,.5,-.5,0,-.5,-.5,0,-.5,.5,0,-1,0,0,1,0,0,0,-1,0,0,1,0]),indices:new Uint16Array([...nl,26,27,27,28,28,29,29,30,31,32,33,34])}],[99,{position:new Float32Array([...tl,-.5,.5,0,.5,.5,0,.5,-.5,0,-.5,-.5,0,-Math.SQRT1_2,Math.SQRT1_2,0,Math.SQRT1_2,-Math.SQRT1_2,0,-Math.SQRT1_2,-Math.SQRT1_2,0,Math.SQRT1_2,Math.SQRT1_2,0]),indices:new Uint16Array([...nl,26,27,27,28,28,29,29,26,30,31,32,33])}],[100,{position:new Float32Array([...tl,-.5,.5,0,.5,.5,0,.5,-.5,0,-.5,-.5,0,-.5,.5,0,0,0,0,0,.5,0]),indices:new Uint16Array([...nl,26,27,27,28,28,29,29,30,31,32])}]]);class xu{constructor(){this._symbols=this.initialize()}static get instance(){return xu._instance||(xu._instance=new xu),xu._instance}isShowPoint(e=null){return e==null||e==0||e==32||e==64||e==96}create(e=null,n={x:0,y:0,z:0}){const r={};if(e==null||e==0)gm.copy(n),r.point=new mr().setFromPoints([gm]);else if(e!=1){const s=this._symbols.get(e);if(s==null)throw new Error(`[AcTrPointSymbolCreator] Invalid point type value: '${e}'!`);gm.copy(n),jI.identity().makeTranslation(gm),r.line=s.clone().applyMatrix4(jI),(e==32||e==64||e==96)&&(r.point=new mr().setFromPoints([gm]))}return r}initialize(){const e=new Map;return rce.forEach((n,r)=>{const s=new mr;s.setAttribute("position",new Ar(n.position,3)),s.setIndex(new Ar(n.indices,1)),e.set(r,s)}),e}}const jI=new Rr,gm=new Ze,sce=new ar(583902);let Nb=class{static cloneMaterial(e){if(!e)return e;if(Array.isArray(e)){const n=[];return e.forEach(r=>{n.push(r.clone())}),n}return e.clone()}static setMaterialColor(e,n=sce){if(Array.isArray(e)){e.forEach(r=>this.setMaterialColor(r,n));return}this.hasColorProperty(e)&&(e.color.set(n),this.hasEmissiveProperty(e)&&e.emissive.set(n)),this.hasUniformsProperty(e)&&e.uniforms.u_color&&e.uniforms.u_color.value.set(n)}static hasColorProperty(e){return"color"in e&&e.color instanceof ar}static hasEmissiveProperty(e){return"emissive"in e&&e.emissive instanceof ar}static hasUniformsProperty(e){return"uniforms"in e&&e.uniforms!==void 0}},iT=class x8{static getExtension(e){return e.substring(e.lastIndexOf(".")+1)}static estimateObjectSize(e){const n=new WeakSet;function r(s){if(s==null)return 0;const i=typeof s;if(i==="boolean")return 4;if(i==="number")return 8;if(i==="string")return s.length*2;if(i==="symbol"||i==="function"||n.has(s))return 0;if(n.add(s),Array.isArray(s))return s.map(r).reduce((o,a)=>o+a,0);if(i==="object"){let o=0;for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o+=a.length*2,o+=r(s[a]));return o}return 0}return r(e)}static getFileName(e){return e.split("/").pop()}static getFileNameWithoutExtension(e){const n=x8.getFileName(e);if(n){const r=n.lastIndexOf(".");return r===-1?n:n.substring(0,r)}return e}};function oT(t,e){return t-e}function aT(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const s=t.count;for(let i=0;i<s;i++)for(let o=0;o<r;o++)e.setComponent(i+n,o,t.getComponent(i,o))}else e.array.set(t.array,n*r);e.needsUpdate=!0}function lp(t,e){if(t.constructor!==e.constructor){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++)e[r]=t[r]}else{const n=Math.min(t.length,e.length);e.set(new t.constructor(t.buffer,0,n))}}const KI=new us,Qh=new Ze,ef=new bc,Y0=[];class ice extends bc{constructor(e=1e3,n=e*2,r){super(new mr,r),this.boundingBox=null,this.boundingSphere=null,this._geometryInfo=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._geometryInitialized=!1,this.frustumCulled=!1,this._maxVertexCount=e,this._maxIndexCount=n}get geometryCount(){return this._geometryCount}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}get mappingStats(){const e=this._geometryInfo.length;let n=0;return e>0&&(n=iT.estimateObjectSize(this._geometryInfo[0])),{count:e,size:e*n}}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const i in e.attributes){const o=e.getAttribute(i),{array:a,itemSize:l,normalized:c}=o,u=new a.constructor(r*l),d=new Ar(u,l,c);n.setAttribute(i,d)}if(e.getIndex()!==null){const i=r>65535?new Uint32Array(s):new Uint16Array(s);n.setIndex(new Ar(i,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('AcTrBatchedLine: All geometries must consistently have "index".');for(const r in n.attributes){if(!e.hasAttribute(r))throw new Error(`AcTrBatchedLine: Added geometry missing "${r}". All geometries must have consistent attributes.`);const s=e.getAttribute(r),i=n.getAttribute(r);if(s.itemSize!==i.itemSize||s.normalized!==i.normalized)throw new Error("AcTrBatchedLine: All attributes must have a consistent itemSize and normalized value.")}}_resizeSpaceIfNeeded(e){const n=e.getIndex(),r=n!==null;let s=this._maxIndexCount;r&&this.unusedIndexCount<n.count&&(s=(this._maxIndexCount+n.count)*1.5);const i=e.getAttribute("position");let o=this._maxVertexCount;i&&this.unusedVertexCount<i.count&&(o=(this._maxVertexCount+i.count)*1.5),(s>this._maxIndexCount||o>this._maxVertexCount)&&this.setGeometrySize(o,s)}validateGeometryId(e){const n=this._geometryInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`AcTrBatchedLine: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}reset(){this.boundingBox=null,this.boundingSphere=null,this._geometryInfo=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._geometryInfo.length=0,this._geometryInitialized=!1,this.geometry.dispose()}getUserData(){const e=[];return this._geometryInfo.forEach(n=>{e.push({position:n.position,objectId:n.objectId,bboxIntersectionCheck:n.bboxIntersectionCheck})}),e}resetGeometry(e){const n=this.getUserData();this.reset();const r=xu.instance;n.forEach(s=>{if(s.position){const i=r.create(e,s.position);if(i.line){const o=this.addGeometry(i.line);this.setGeometryInfo(o,s)}}})}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new us);const e=this.boundingBox,n=this._geometryInfo;e.makeEmpty();for(let r=0,s=n.length;r<s;r++){const i=n[r];i.active!==!1&&i.boundingBox!=null&&e.union(i.boundingBox)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new co);const e=this.boundingSphere,n=this._geometryInfo;e.makeEmpty();for(let r=0,s=n.length;r<s;r++){const i=n[r];i.active!==!1&&i.boundingSphere!=null&&e.union(i.boundingSphere)}}addGeometry(e,n=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e),e.boundingBox==null&&e.computeBoundingBox(),e.boundingSphere==null&&e.computeBoundingSphere(),this._resizeSpaceIfNeeded(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:e.boundingBox,boundingSphere:e.boundingSphere,active:!0,visible:!0},i=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=n===-1?e.getAttribute("position").count:n;const o=e.getIndex();if(o!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=r===-1?o.count:r),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("AcTrBatchedLine: Reserved space request exceeds the maximum buffer size.");let a;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(oT),a=this._availableGeometryIds.shift(),i[a]=s):(a=this._geometryCount,this._geometryCount++,i.push(s)),this.setGeometryAt(a,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,a}setGeometryInfo(e,n){if(e>=this._geometryCount)throw new Error("AcTrBatchedLine: Maximum geometry count reached.");const r=this._geometryInfo[e],s=n.position;s&&(r.position={...s}),r.objectId=n.objectId,r.bboxIntersectionCheck=n.bboxIntersectionCheck}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("AcTrBatchedLine: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,s=r.getIndex()!==null,i=r.getIndex(),o=n.getIndex(),a=this._geometryInfo[e];if(s&&o.count>a.reservedIndexCount||n.attributes.position.count>a.reservedVertexCount)throw new Error("AcTrBatchedLine: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=n.getAttribute("position").count;for(const u in r.attributes){const d=n.getAttribute(u),h=r.getAttribute(u);aT(d,h,l);const f=d.itemSize;for(let m=d.count,v=c;m<v;m++){const y=l+m;for(let g=0;g<f;g++)h.setComponent(y,g,0)}h.needsUpdate=!0,h.addUpdateRange(l*f,c*f)}if(s&&i){const u=a.indexStart,d=a.reservedIndexCount;a.indexCount=n.getIndex().count;for(let h=0;h<o.count;h++)i.setX(u+h,l+o.getX(h));for(let h=o.count,f=d;h<f;h++)i.setX(u+h,l);i.needsUpdate=!0,i.addUpdateRange(u,a.reservedIndexCount)}return a.start=s?a.indexStart:a.vertexStart,a.count=s?a.indexCount:a.vertexCount,a.boundingBox=null,n.boundingBox!==null&&(a.boundingBox=n.boundingBox.clone()),a.boundingSphere=null,n.boundingSphere!==null&&(a.boundingSphere=n.boundingSphere.clone()),e}deleteGeometry(e){const n=this._geometryInfo;return e>=n.length||n[e].active===!1?this:(n[e].active=!1,this._availableGeometryIds.push(e),this)}optimize(){let e=0,n=0;const r=this._geometryInfo,s=r.map((o,a)=>a).sort((o,a)=>r[o].vertexStart-r[a].vertexStart),i=this.geometry;for(let o=0,a=r.length;o<a;o++){const l=s[o],c=r[l];if(c.active!==!1){if(i.index!==null){if(c.indexStart!==n){const{indexStart:u,vertexStart:d,reservedIndexCount:h}=c,f=i.index,m=f.array,v=e-d;for(let y=u;y<u+h;y++)m[y]=m[y]+v;f.array.copyWithin(n,u,u+h),f.addUpdateRange(n,h),c.indexStart=n}n+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:d}=c,h=i.attributes;for(const f in h){const m=h[f],{array:v,itemSize:y}=m;v.copyWithin(e*y,u*y,(u+d)*y),m.addUpdateRange(e*y,d*y)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=i.index?c.indexStart:c.vertexStart,this._nextIndexStart=i.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const i=new us,o=r.index,a=r.attributes.position;for(let l=s.start,c=s.start+s.count;l<c;l++){let u=l;o&&(u=o.getX(u)),i.expandByPoint(Qh.fromBufferAttribute(a,u))}s.boundingBox=i}return n.copy(s.boundingBox),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const i=new co;this.getBoundingBoxAt(e,KI),KI.getCenter(i.center);const o=r.index,a=r.attributes.position;let l=0;for(let c=s.start,u=s.start+s.count;c<u;c++){let d=c;o&&(d=o.getX(d)),Qh.fromBufferAttribute(a,d),l=Math.max(l,i.center.distanceToSquared(Qh))}i.radius=Math.sqrt(l),s.boundingSphere=i}return n.copy(s.boundingSphere),n}setVisibleAt(e,n){return this.validateGeometryId(e),this._geometryInfo[e].visible===n?this:(this._geometryInfo[e].visible=n,this)}getVisibleAt(e){return this.validateGeometryId(e),this._geometryInfo[e].visible}getGeometryAt(e){return this.validateGeometryId(e),this._geometryInfo[e]}setGeometrySize(e,n){const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new mr,this._initializeGeometry(r));const s=this.geometry;r.index&&lp(r.index.array,s.index.array);for(const i in r.attributes)lp(r.attributes[i].array,s.attributes[i].array)}getObjectAt(e){const n=new bc;this._initializeRaycastObject(n);const r=this._geometryInfo[e];return this._setRaycastObjectInfo(n,e,r.start,r.count),n}_initializeRaycastObject(e){const n=this.geometry;return e.material=this.material,e.geometry.index=n.index,e.geometry.attributes=n.attributes,e.geometry.boundingBox===null&&(e.geometry.boundingBox=new us),e.geometry.boundingSphere===null&&(e.geometry.boundingSphere=new co),e}_setRaycastObjectInfo(e,n,r,s){e.geometry.setDrawRange(r,s),this.getBoundingBoxAt(n,e.geometry.boundingBox),this.getBoundingSphereAt(n,e.geometry.boundingSphere)}_resetRaycastObjectInfo(e){e.geometry.index=null,e.geometry.attributes={},e.geometry.setDrawRange(0,1/0)}intersectWith(e,n,r){this._initializeRaycastObject(ef),this._intersectWith(e,n,r),this._resetRaycastObjectInfo(ef)}_intersectWith(e,n,r){const s=this._geometryInfo[e];if(!(!s.visible||!s.active))if(s.bboxIntersectionCheck){const i=s.boundingBox;if(n.ray.intersectBox(i,Qh)){const o=n.ray.origin.distanceTo(Qh);r.push({distance:o,point:Qh.clone(),object:this,face:null,faceIndex:void 0,uv:void 0,batchId:e,objectId:s.objectId})}}else{this._setRaycastObjectInfo(ef,e,s.start,s.count),ef.raycast(n,Y0);for(let i=0,o=Y0.length;i<o;i++){const a=Y0[i];a.object=this,a.batchId=e,a.objectId=s.objectId,r.push(a)}Y0.length=0}}raycast(e,n){const r=this._geometryInfo;this._initializeRaycastObject(ef);for(let s=0,i=r.length;s<i;s++)this._intersectWith(s,e,n);this._resetRaycastObjectInfo(ef)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(n=>({...n,boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this}dispose(){return this.geometry.dispose(),this}}const qI=new us,tf=new Ze,nf=new Os,X0=[];class oce extends Os{constructor(e=1e3,n=e*2,r){super(new mr,r),this.boundingBox=null,this.boundingSphere=null,this._geometryInfo=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._geometryInitialized=!1,this.frustumCulled=!1,this._maxVertexCount=e,this._maxIndexCount=n}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}get mappingStats(){const e=this._geometryInfo.length;let n=0;return e>0&&(n=iT.estimateObjectSize(this._geometryInfo[0])),{count:e,size:e*n}}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const i in e.attributes){const o=e.getAttribute(i),{array:a,itemSize:l,normalized:c}=o,u=new a.constructor(r*l),d=new Ar(u,l,c);n.setAttribute(i,d)}if(e.getIndex()!==null){const i=r>65535?new Uint32Array(s):new Uint16Array(s);n.setIndex(new Ar(i,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('AcTrBatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(!e.hasAttribute(r))throw new Error(`AcTrBatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const s=e.getAttribute(r),i=n.getAttribute(r);if(s.itemSize!==i.itemSize||s.normalized!==i.normalized)throw new Error("AcTrBatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}_resizeSpaceIfNeeded(e){const n=e.getIndex(),r=n!==null;let s=this._maxIndexCount;r&&this.unusedIndexCount<n.count&&(s=(this._maxIndexCount+n.count)*1.5);const i=e.getAttribute("position");let o=this._maxVertexCount;i&&this.unusedVertexCount<i.count&&(o=(this._maxVertexCount+i.count)*1.5),(s>this._maxIndexCount||o>this._maxVertexCount)&&this.setGeometrySize(o,s)}validateGeometryId(e){const n=this._geometryInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`AcTrBatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new us);const e=this.boundingBox,n=this._geometryInfo;e.makeEmpty();for(let r=0,s=n.length;r<s;r++){const i=n[r];i.active!==!1&&i.boundingBox!=null&&e.union(i.boundingBox)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new co);const e=this.boundingSphere,n=this._geometryInfo;e.makeEmpty();for(let r=0,s=n.length;r<s;r++){const i=n[r];i.active!==!1&&i.boundingSphere!=null&&e.union(i.boundingSphere)}}addGeometry(e,n=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e),e.boundingBox==null&&e.computeBoundingBox(),e.boundingSphere==null&&e.computeBoundingSphere(),this._resizeSpaceIfNeeded(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:e.boundingBox,boundingSphere:e.boundingSphere,active:!0,visible:!0},i=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=n===-1?e.getAttribute("position").count:n;const o=e.getIndex();if(o!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=r===-1?o.count:r),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("AcTrBatchedMesh: Reserved space request exceeds the maximum buffer size.");let a;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(oT),a=this._availableGeometryIds.shift(),i[a]=s):(a=this._geometryCount,this._geometryCount++,i.push(s)),this.setGeometryAt(a,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,a}setGeometryInfo(e,n){if(e>=this._geometryCount)throw new Error("AcTrBatchedMesh: Maximum geometry count reached.");const r=this._geometryInfo[e];r.objectId=n.objectId,r.bboxIntersectionCheck=n.bboxIntersectionCheck}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("AcTrBatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,s=r.getIndex()!==null,i=r.getIndex(),o=n.getIndex(),a=this._geometryInfo[e];if(s&&o.count>a.reservedIndexCount||n.attributes.position.count>a.reservedVertexCount)throw new Error("AcTrBatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=n.getAttribute("position").count;for(const u in r.attributes){const d=n.getAttribute(u),h=r.getAttribute(u);aT(d,h,l);const f=d.itemSize;for(let m=d.count,v=c;m<v;m++){const y=l+m;for(let g=0;g<f;g++)h.setComponent(y,g,0)}h.needsUpdate=!0,h.addUpdateRange(l*f,c*f)}if(s&&i){const u=a.indexStart,d=a.reservedIndexCount;a.indexCount=n.getIndex().count;for(let h=0;h<o.count;h++)i.setX(u+h,l+o.getX(h));for(let h=o.count,f=d;h<f;h++)i.setX(u+h,l);i.needsUpdate=!0,i.addUpdateRange(u,a.reservedIndexCount)}return a.start=s?a.indexStart:a.vertexStart,a.count=s?a.indexCount:a.vertexCount,a.boundingBox=null,n.boundingBox!==null&&(a.boundingBox=n.boundingBox.clone()),a.boundingSphere=null,n.boundingSphere!==null&&(a.boundingSphere=n.boundingSphere.clone()),e}deleteGeometry(e){const n=this._geometryInfo;return e>=n.length||n[e].active===!1?this:(n[e].active=!1,this._availableGeometryIds.push(e),this)}optimize(){let e=0,n=0;const r=this._geometryInfo,s=r.map((o,a)=>a).sort((o,a)=>r[o].vertexStart-r[a].vertexStart),i=this.geometry;for(let o=0,a=r.length;o<a;o++){const l=s[o],c=r[l];if(c.active!==!1){if(i.index!==null){if(c.indexStart!==n){const{indexStart:u,vertexStart:d,reservedIndexCount:h}=c,f=i.index,m=f.array,v=e-d;for(let y=u;y<u+h;y++)m[y]=m[y]+v;f.array.copyWithin(n,u,u+h),f.addUpdateRange(n,h),c.indexStart=n}n+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:d}=c,h=i.attributes;for(const f in h){const m=h[f],{array:v,itemSize:y}=m;v.copyWithin(e*y,u*y,(u+d)*y),m.addUpdateRange(e*y,d*y)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=i.index?c.indexStart:c.vertexStart,this._nextIndexStart=i.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const i=new us,o=r.index,a=r.attributes.position;for(let l=s.start,c=s.start+s.count;l<c;l++){let u=l;o&&(u=o.getX(u)),i.expandByPoint(tf.fromBufferAttribute(a,u))}s.boundingBox=i}return n.copy(s.boundingBox),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const i=new co;this.getBoundingBoxAt(e,qI),qI.getCenter(i.center);const o=r.index,a=r.attributes.position;let l=0;for(let c=s.start,u=s.start+s.count;c<u;c++){let d=c;o&&(d=o.getX(d)),tf.fromBufferAttribute(a,d),l=Math.max(l,i.center.distanceToSquared(tf))}i.radius=Math.sqrt(l),s.boundingSphere=i}return n.copy(s.boundingSphere),n}setVisibleAt(e,n){return this.validateGeometryId(e),this._geometryInfo[e].visible===n?this:(this._geometryInfo[e].visible=n,this)}getVisibleAt(e){return this.validateGeometryId(e),this._geometryInfo[e].visible}getGeometryRangeAt(e){return this.validateGeometryId(e),this._geometryInfo[e]}setGeometrySize(e,n){const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new mr,this._initializeGeometry(r));const s=this.geometry;r.index&&lp(r.index.array,s.index.array);for(const i in r.attributes)lp(r.attributes[i].array,s.attributes[i].array)}getObjectAt(e){const n=new Os;this._initializeRaycastObject(n);const r=this._geometryInfo[e];return this._setRaycastObjectInfo(n,e,r.start,r.count),n}_initializeRaycastObject(e){const n=this.geometry;return e.material=this.material,e.geometry.index=n.index,e.geometry.attributes=n.attributes,e.geometry.boundingBox===null&&(e.geometry.boundingBox=new us),e.geometry.boundingSphere===null&&(e.geometry.boundingSphere=new co),e}_setRaycastObjectInfo(e,n,r,s){e.geometry.setDrawRange(r,s),this.getBoundingBoxAt(n,e.geometry.boundingBox),this.getBoundingSphereAt(n,e.geometry.boundingSphere)}_resetRaycastObjectInfo(e){e.geometry.index=null,e.geometry.attributes={},e.geometry.setDrawRange(0,1/0)}intersectWith(e,n,r){this._initializeRaycastObject(nf),this._intersectWith(e,n,r),this._resetRaycastObjectInfo(nf)}_intersectWith(e,n,r){const s=this._geometryInfo[e];if(!(!s.visible||!s.active))if(s.bboxIntersectionCheck){const i=s.boundingBox;if(n.ray.intersectBox(i,tf)){const o=n.ray.origin.distanceTo(tf);r.push({distance:o,point:tf.clone(),object:this,face:null,faceIndex:void 0,uv:void 0,batchId:e,objectId:s.objectId})}}else{this._setRaycastObjectInfo(nf,e,s.start,s.count),nf.raycast(n,X0);for(let i=0,o=X0.length;i<o;i++){const a=X0[i];a.object=this,a.batchId=e,a.objectId=s.objectId,r.push(a)}X0.length=0}}raycast(e,n){const r=this._geometryInfo;this._initializeRaycastObject(nf);for(let s=0,i=r.length;s<i;s++)this._intersectWith(s,e,n);this._resetRaycastObjectInfo(nf)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(n=>({...n,boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this}dispose(){return this.geometry.dispose(),this}}const YI=new us,rf=new Ze,sf=new Zd,Z0=[];class ace extends Zd{constructor(e=1e3,n){super(new mr,n),this.boundingBox=null,this.boundingSphere=null,this._geometryInfo=[],this._availableGeometryIds=[],this._nextVertexStart=0,this._geometryCount=0,this._geometryInitialized=!1,this.frustumCulled=!1,this._maxVertexCount=e}get geometryCount(){return this._geometryCount}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get mappingStats(){const e=this._geometryInfo.length;let n=0;return e>0&&(n=iT.estimateObjectSize(this._geometryInfo[0])),{count:e,size:e*n}}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const i=e.getAttribute(s),{array:o,itemSize:a,normalized:l}=i,c=new o.constructor(r*a),u=new Ar(c,a,l);n.setAttribute(s,u)}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;for(const r in n.attributes){if(!e.hasAttribute(r))throw new Error(`AcTrBatchedLine: Added geometry missing "${r}". All geometries must have consistent attributes.`);const s=e.getAttribute(r),i=n.getAttribute(r);if(s.itemSize!==i.itemSize||s.normalized!==i.normalized)throw new Error("AcTrBatchedLine: All attributes must have a consistent itemSize and normalized value.")}}_resizeSpaceIfNeeded(e){const n=e.getAttribute("position");let r=this._maxVertexCount;n&&this.unusedVertexCount<n.count&&(r=(this._maxVertexCount+n.count)*1.5),r>this._maxVertexCount&&this.setGeometrySize(r)}validateGeometryId(e){const n=this._geometryInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`AcTrBatchedLine: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}reset(){this.boundingBox=null,this.boundingSphere=null,this._geometryInfo=[],this._availableGeometryIds=[],this._nextVertexStart=0,this._geometryCount=0,this._geometryInfo.length=0,this._geometryInitialized=!1,this.geometry.dispose()}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new us);const e=this.boundingBox,n=this._geometryInfo;e.makeEmpty();for(let r=0,s=n.length;r<s;r++){const i=n[r];i.active!==!1&&i.boundingBox!=null&&e.union(i.boundingBox)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new co);const e=this.boundingSphere,n=this._geometryInfo;e.makeEmpty();for(let r=0,s=n.length;r<s;r++){const i=n[r];i.active!==!1&&i.boundingSphere!=null&&e.union(i.boundingSphere)}}addGeometry(e,n=-1){this._initializeGeometry(e),this._validateGeometry(e),e.boundingBox==null&&e.computeBoundingBox(),e.boundingSphere==null&&e.computeBoundingSphere(),this._resizeSpaceIfNeeded(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,boundingBox:e.boundingBox,boundingSphere:e.boundingSphere,active:!0,visible:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=n===-1?e.getAttribute("position").count:n;let i;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(oT),i=this._availableGeometryIds.shift(),s[i]=r):(i=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(i,e),this._nextVertexStart=r.vertexStart+r.reservedVertexCount,this.geometry.setDrawRange(0,this._nextVertexStart),i}setGeometryInfo(e,n){if(e>=this._geometryCount)throw new Error("AcTrBatchedLine: Maximum geometry count reached.");const r=this._geometryInfo[e],s=n.position;s&&(r.position={...s}),r.objectId=n.objectId,r.bboxIntersectionCheck=n.bboxIntersectionCheck}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("AcTrBatchedLine: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,s=this._geometryInfo[e],i=s.vertexStart,o=s.reservedVertexCount;s.vertexCount=n.getAttribute("position").count;for(const a in r.attributes){const l=n.getAttribute(a),c=r.getAttribute(a);aT(l,c,i);const u=l.itemSize;for(let d=l.count,h=o;d<h;d++){const f=i+d;for(let m=0;m<u;m++)c.setComponent(f,m,0)}c.needsUpdate=!0,c.addUpdateRange(i*u,o*u)}return s.boundingBox=null,n.boundingBox!==null&&(s.boundingBox=n.boundingBox.clone()),s.boundingSphere=null,n.boundingSphere!==null&&(s.boundingSphere=n.boundingSphere.clone()),e}deleteGeometry(e){const n=this._geometryInfo;return e>=n.length||n[e].active===!1?this:(n[e].active=!1,this._availableGeometryIds.push(e),this)}optimize(){let e=0;const n=this._geometryInfo,r=n.map((i,o)=>o).sort((i,o)=>n[i].vertexStart-n[o].vertexStart),s=this.geometry;for(let i=0,o=n.length;i<o;i++){const a=r[i],l=n[a];if(l.active!==!1){if(l.vertexStart!==e){const{vertexStart:c,reservedVertexCount:u}=l,d=s.attributes;for(const h in d){const f=d[h],{array:m,itemSize:v}=f;m.copyWithin(e*v,c*v,(c+u)*v),f.addUpdateRange(e*v,u*v)}l.vertexStart=e}e+=l.reservedVertexCount,this._nextVertexStart=l.vertexStart+l.reservedVertexCount}}return this}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const i=new us,o=r.index,a=r.attributes.position;for(let l=s.vertexStart,c=s.vertexStart+s.vertexCount;l<c;l++){let u=l;o&&(u=o.getX(u)),i.expandByPoint(rf.fromBufferAttribute(a,u))}s.boundingBox=i}return n.copy(s.boundingBox),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const i=new co;this.getBoundingBoxAt(e,YI),YI.getCenter(i.center);const o=r.index,a=r.attributes.position;let l=0;for(let c=s.vertexStart,u=s.vertexStart+s.vertexCount;c<u;c++){let d=c;o&&(d=o.getX(d)),rf.fromBufferAttribute(a,d),l=Math.max(l,i.center.distanceToSquared(rf))}i.radius=Math.sqrt(l),s.boundingSphere=i}return n.copy(s.boundingSphere),n}setVisibleAt(e,n){return this.validateGeometryId(e),this._geometryInfo[e].visible===n?this:(this._geometryInfo[e].visible=n,this)}getVisibleAt(e){return this.validateGeometryId(e),this._geometryInfo[e].visible}getGeometryAt(e){return this.validateGeometryId(e),this._geometryInfo[e]}setGeometrySize(e){const n=this.geometry;n.dispose(),this._maxVertexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new mr,this._initializeGeometry(n));const r=this.geometry;n.index&&lp(n.index.array,r.index.array);for(const s in n.attributes)lp(n.attributes[s].array,r.attributes[s].array)}getObjectAt(e){const n=new Zd;this._initializeRaycastObject(n);const r=this._geometryInfo[e];return this._setRaycastObjectInfo(n,e,r.vertexStart,r.vertexCount),n}_initializeRaycastObject(e){const n=this.geometry;return e.material=this.material,e.geometry.index=n.index,e.geometry.attributes=n.attributes,e.geometry.boundingBox===null&&(e.geometry.boundingBox=new us),e.geometry.boundingSphere===null&&(e.geometry.boundingSphere=new co),e}_setRaycastObjectInfo(e,n,r,s){e.geometry.setDrawRange(r,s),this.getBoundingBoxAt(n,e.geometry.boundingBox),this.getBoundingSphereAt(n,e.geometry.boundingSphere)}_resetRaycastObjectInfo(e){e.geometry.index=null,e.geometry.attributes={},e.geometry.setDrawRange(0,1/0)}intersectWith(e,n,r){this._initializeRaycastObject(sf),this._intersectWith(e,n,r),this._resetRaycastObjectInfo(sf)}_intersectWith(e,n,r){const s=this._geometryInfo[e];if(!(!s.visible||!s.active))if(s.bboxIntersectionCheck){const i=s.boundingBox;if(n.ray.intersectBox(i,rf)){const o=n.ray.origin.distanceTo(rf);r.push({distance:o,point:rf.clone(),object:this,face:null,faceIndex:void 0,uv:void 0,batchId:e,objectId:s.objectId})}}else{this._setRaycastObjectInfo(sf,e,s.vertexStart,s.vertexCount),sf.raycast(n,Z0);for(let i=0,o=Z0.length;i<o;i++){const a=Z0[i];a.object=this,a.batchId=e,a.objectId=s.objectId,r.push(a)}Z0.length=0}}raycast(e,n){const r=this._geometryInfo;this._initializeRaycastObject(sf);for(let s=0,i=r.length;s<i;s++)this._intersectWith(s,e,n);this._resetRaycastObjectInfo(sf)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(n=>({...n,boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._maxVertexCount=e._maxVertexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this}dispose(){return this.geometry.dispose(),this}}class lce extends Aa{constructor(){super(),this._pointBatches=new Map,this._pointSymbolBatches=new Map,this._lineBatches=new Map,this._lineWithIndexBatches=new Map,this._meshBatches=new Map,this._meshWithIndexBatches=new Map,this._entitiesMap=new Map,this._selectedObjects=new Aa,this._hoverObjects=new Aa,this.add(this._selectedObjects),this.add(this._hoverObjects)}get entityCount(){return this._entitiesMap.size}get stats(){const e={summary:{entityCount:this._entitiesMap.size,totalGeometrySize:0,totalMappingSize:0},mesh:{indexed:{count:this._meshWithIndexBatches.size,geometrySize:this.getBatchedGeometrySize(this._meshWithIndexBatches),mappingSize:this.getBatchedGeometryMappingSize(this._meshWithIndexBatches)},nonIndexed:{count:this._meshBatches.size,geometrySize:this.getBatchedGeometrySize(this._meshBatches),mappingSize:this.getBatchedGeometryMappingSize(this._meshBatches)}},line:{indexed:{count:this._lineWithIndexBatches.size,geometrySize:this.getBatchedGeometrySize(this._lineWithIndexBatches),mappingSize:this.getBatchedGeometryMappingSize(this._lineWithIndexBatches)},nonIndexed:{count:this._lineBatches.size,geometrySize:this.getBatchedGeometrySize(this._lineBatches),mappingSize:this.getBatchedGeometryMappingSize(this._lineBatches)}},point:{indexed:{count:this._pointSymbolBatches.size,geometrySize:this.getBatchedGeometrySize(this._pointSymbolBatches),mappingSize:this.getBatchedGeometryMappingSize(this._pointSymbolBatches)},nonIndexed:{count:this._pointBatches.size,geometrySize:this.getBatchedGeometrySize(this._pointBatches),mappingSize:this.getBatchedGeometryMappingSize(this._pointBatches)}}};return e.summary.totalGeometrySize=e.line.indexed.geometrySize+e.line.nonIndexed.geometrySize+e.mesh.indexed.geometrySize+e.mesh.nonIndexed.geometrySize+e.point.indexed.geometrySize+e.point.nonIndexed.geometrySize,e.summary.totalMappingSize=e.line.indexed.mappingSize+e.line.nonIndexed.mappingSize+e.mesh.indexed.mappingSize+e.mesh.nonIndexed.mappingSize+e.point.indexed.mappingSize+e.point.nonIndexed.mappingSize,e}rerenderPoints(e){const n=xu.instance.create(e);n.line&&this._pointSymbolBatches.forEach(s=>{s.resetGeometry(e)});const r=n.point!=null;this._pointBatches.forEach(s=>{s.visible=r})}clear(){return this.clearPoint(),this.clearLine(),this.clearMesh(),this}clearPoint(){this.clearBatch(this._pointBatches),this.clearBatch(this._pointSymbolBatches)}clearLine(){this.clearBatch(this._lineBatches),this.clearBatch(this._lineWithIndexBatches)}clearMesh(){this.clearBatch(this._meshBatches),this.clearBatch(this._meshWithIndexBatches)}hasEntity(e){return this._entitiesMap.has(e)}addEntity(e){const n=[];this._entitiesMap.set(e.objectId,n),e.updateMatrixWorld(!0),e.traverse(r=>{const s=!!r.userData.bboxIntersectionCheck;r instanceof bc?n.push(this.addLine(r,{position:r.userData.position,objectId:e.objectId,bboxIntersectionCheck:s})):r instanceof Os?n.push(this.addMesh(r,{objectId:e.objectId,bboxIntersectionCheck:s})):r instanceof Zd&&n.push(this.addPoint(r,{objectId:e.objectId,bboxIntersectionCheck:s}))})}isIntersectWith(e,n){const r=this._entitiesMap.get(e);if(r){const s=[];for(let i=0,o=r.length;i<o;i++){const a=r[i];if(this.getObjectById(a.batchedObjectId).intersectWith(a.batchId,n,s),s.length>0)return!0}}return!1}hover(e){this.highlight(e,this._hoverObjects)}unhover(e){this.unhighlight(e,this._hoverObjects)}select(e){this.highlight(e,this._selectedObjects)}unselect(e){this.unhighlight(e,this._selectedObjects)}highlight(e,n){const r=this._entitiesMap.get(e);r&&r.forEach(s=>{const i=this.getObjectById(s.batchedObjectId).getObjectAt(s.batchId),o=Nb.cloneMaterial(i.material);Nb.setMaterialColor(o),i.material=o,i.userData.objectId=e,n.add(i)})}unhighlight(e,n){const r=[];n.children.forEach(s=>{s.userData.objectId===e&&r.push(s)}),n.remove(...r)}addLine(e,n){const r=e.material,s=this.getMatchedLineBatches(e);let i=s.get(r.id);i==null&&(i=new ice(1e3,2e3,r),s.set(r.id,i),this.add(i)),e.geometry.applyMatrix4(e.matrixWorld);const o=i.addGeometry(e.geometry);return i.setGeometryInfo(o,n),{batchedObjectId:i.id,batchId:o}}addMesh(e,n){const r=e.material,s=this.getMatchedMeshBatches(e);let i=s.get(r.id);i==null&&(i=new oce(1e3,2e3,r),s.set(r.id,i),this.add(i)),e.geometry.applyMatrix4(e.matrixWorld);const o=i.addGeometry(e.geometry);return i.setGeometryInfo(o,n),{batchedObjectId:i.id,batchId:o}}addPoint(e,n){const r=e.material;let s=this._pointBatches.get(r.id);s==null&&(s=new ace(100,r),s.visible=e.visible,this._pointBatches.set(r.id,s),this.add(s)),e.geometry.applyMatrix4(e.matrixWorld);const i=s.addGeometry(e.geometry);return s.setGeometryInfo(i,n),{batchedObjectId:s.id,batchId:i}}getMatchedLineBatches(e){if(e.userData.isPoint)return this._pointSymbolBatches;{const n=e.geometry.getIndex()!==null;let r=this._lineBatches;return n&&(r=this._lineWithIndexBatches),r}}getMatchedMeshBatches(e){const n=e.geometry.getIndex()!==null;let r=this._meshBatches;return n&&(r=this._meshWithIndexBatches),r}clearBatch(e){e.forEach(n=>{n.dispose()}),e.clear()}getBatchedGeometrySize(e){let n=0;return e.forEach(r=>{n+=this.getGeometrySize(r)}),n}getBatchedGeometryMappingSize(e){let n=0;return e.forEach(r=>{n+=r.mappingStats.size}),n}getGeometrySize(e){let n=0;if("geometry"in e){const r=e.geometry;r.attributes.position&&(n+=r.attributes.position.array.byteLength),r.attributes.normal&&(n+=r.attributes.normal.array.byteLength),r.attributes.uv&&(n+=r.attributes.uv.array.byteLength),r.index&&(n+=r.index.array.byteLength)}return n}}let S8=class extends Gs{constructor(e){super(),this._styleManager=e}get styleManager(){return this._styleManager}copy(e,n){return this._styleManager=e._styleManager,super.copy(e,n)}};class uo extends S8{constructor(e){super(e),this._box=new us}get box(){return this._box}set box(e){this._box.copy(e)}get objectId(){return this.userData.objectId}set objectId(e){this.userData.objectId=e}get ownerId(){return this.userData.ownerId}set ownerId(e){this.userData.ownerId=e}get layerName(){return this.userData.layerName}set layerName(e){this.userData.layerName=e}static flattenObject(e){const n=[];function r(i){i.position.set(0,0,0),i.rotation.set(0,0,0),i.scale.set(1,1,1),i.matrix.identity()}function s(i,o){const a=[...i.children];for(const l of a)!l.userData.layerName&&i.userData.layerName&&(l.userData.layerName=i.userData.layerName),l.applyMatrix4(o),r(l),l.children.length>0?s(l,l.matrixWorld):n.push(l);i.children=[]}e.updateMatrixWorld(!0),s(e,e.matrixWorld);for(const i of n)"geometry"in i&&(i.geometry.applyMatrix4(i.matrixWorld),i.matrixWorld.identity(),i.matrixWorldNeedsUpdate=!1,e.add(i));r(e),e.matrixWorld.identity(),e.matrixWorldNeedsUpdate=!1}static disposeObject(e,n=!0){n&&e.removeFromParent(),(e instanceof Os||e instanceof gg||e instanceof Zd)&&e.geometry&&e.geometry.dispose(),(e instanceof Os||e instanceof gg||e instanceof Zd)&&(Array.isArray(e.material)?e.material:[e.material]).forEach(r=>{var s,i,o,a,l,c,u,d;r.dispose(),(s=r.map)==null||s.dispose(),(i=r.envMap)==null||i.dispose(),(o=r.lightMap)==null||o.dispose(),(a=r.bumpMap)==null||a.dispose(),(l=r.normalMap)==null||l.dispose(),(c=r.roughnessMap)==null||c.dispose(),(u=r.metalnessMap)==null||u.dispose(),(d=r.alphaMap)==null||d.dispose()}),e.children.forEach(r=>this.disposeObject(r)),"geometry"in e&&(e.geometry=null),"material"in e&&(e.material=null),e.children=[]}flatten(){uo.flattenObject(this)}dispose(){uo.disposeObject(this)}async draw(){}applyMatrix(e){const n=e.elements,r=new Rr(n[0],n[4],n[8],n[12],n[1],n[5],n[9],n[13],n[2],n[6],n[10],n[14],n[3],n[7],n[11],n[15]);this.applyMatrix4(r),this.updateMatrixWorld(!0),this._box.applyMatrix4(r)}highlight(){this.highlightObject(this)}highlightObject(e){if("material"in e){const n=e.material;if(e.userData.originalMaterial==null){const r=Nb.cloneMaterial(n);Nb.setMaterialColor(r),e.userData.originalMaterial=e.material,e.material=r}}else e.children.length>0&&e.children.forEach(n=>{this.highlightObject(n)})}unhighlight(){this.unhighlightObject(this)}fastDeepClone(){const e=new uo(this.styleManager);return e.copy(this,!1),this.copyGeometry(this,e),e}copy(e,n){return this.objectId=e.objectId,this.ownerId=e.ownerId,this.layerName=e.layerName,this.box=e.box,super.copy(e,n)}copyGeometry(e,n){for(let r=0;r<e.children.length;r++){const s=e.children[r].clone(!1);"geometry"in s&&(s.geometry=s.geometry.clone()),n.add(s)}}unhighlightObject(e){if("material"in e){const n=e.material;e.material=e.userData.originalMaterial,delete e.userData.originalMaterial,Array.isArray(n)?n.forEach(r=>r.dispose()):n instanceof Wu&&n.dispose()}else e.children.length>0&&e.children.forEach(n=>{this.unhighlightObject(n)})}createColorArray(e,n){const r=(e>>16&255)/256,s=(e>>8&255)/256,i=(e&255)/256,o=new Float32Array(n*3);for(let a=0,l=0;a<n;a++)o[l]=r,o[l+1]=s,o[l+2]=i,l+=3;return o}}let E8=class C8 extends uo{constructor(e,n){super(n),e.forEach(i=>{if(Array.isArray(i)){const o=new uo(n);this.add(o),this.box.union(o.box)}else this.add(i),this.box.union(i.box)}),this.flatten();let r=!1;const s=this.children;for(let i=0;i<s.length;++i){const o=s[i];if(o.userData.layerName!=null&&o.userData.layerName!=="0"){r=!0;break}}this._isOnTheSameLayer=!r}get isOnTheSameLayer(){return this._isOnTheSameLayer}copy(e,n){return this._isOnTheSameLayer=e._isOnTheSameLayer,super.copy(e,n)}fastDeepClone(){const e=new C8([],this.styleManager);return e.copy(this,!1),this.copyGeometry(this,e),e}};const T8=class bf{constructor(){}static getInstance(){return bf._instance||(bf._instance=new bf),bf._instance}async asyncRenderMText(e,n,r={byLayerColor:16777215,byBlockColor:16777215}){if(!this._renderer)throw new Error("AcTrMTextRenderer not initialized!");return await this._renderer.asyncRenderMText(e,n,r,"worker")}syncRenderMText(e,n,r={byLayerColor:16777215,byBlockColor:16777215}){if(!this._renderer)throw new Error("AcTrMTextRenderer not initialized!");return this._renderer.syncRenderMText(e,n,r)}initialize(e){this._renderer=new Qle("main",{workerUrl:e})}dispose(){this._renderer&&(this._renderer.destroy(),this._renderer=void 0),bf._instance=null}};T8._instance=null;let Db=T8;class cce extends uo{constructor(e,n,r){super(r);const s=URL.createObjectURL(e),i=new Kj().load(s);i.colorSpace=ko;const o=new mv({side:dl,map:i}),a=new hc(n.boundary),l=new I1(a);this.generateUVs(l);const c=new Os(l,o);this.add(c)}generateUVs(e){const n=e.attributes.position.array,r=new Float32Array(n.length/3*2),s=Math.min(...n.filter((u,d)=>d%3===0)),i=Math.max(...n.filter((u,d)=>d%3===0)),o=Math.min(...n.filter((u,d)=>d%3===1)),a=Math.max(...n.filter((u,d)=>d%3===1)),l=i-s,c=a-o;for(let u=0;u<n.length;u+=3){const d=n[u],h=n[u+1];r[u/3*2]=(d-s)/l,r[u/3*2+1]=(h-o)/c}e.setAttribute("uv",new Ar(r,2))}}const J0=new Ze,Q0=new Ze;let M8=class S2{static release(e){e.index=null,e.attributes={}}static toNonIndexed(e){if(!e.index)return e;const n=new mr,r=e.index;for(const s in e.attributes)n.setAttribute(s,S2.createGeometryAttributeByIndex(e.attributes[s],r));return n}static createGeometryAttributeByIndex(e,n){const r=n.count,s=e.itemSize,i=e.array.constructor,o=new i(r*s);for(let a=0;a<r;a++){const l=n.getX(a)*s;for(let c=0;c<s;c++)o[a*s+c]=e.array[l+c]}return new Ar(o,s,e.normalized)}static tryConvertInterleavedBufferAttributes(e){!e||!e.attributes||Object.keys(e.attributes).forEach(n=>{const r=e.attributes[n];if(r instanceof mg){const s=r.clone();e.attributes[n]=s}})}static createBufferGeometryByPoints(e){const n=new mr,r=new Float32Array(e.length*3),s=new Uint16Array((e.length-1)*2);return e.forEach((i,o)=>{let a=o*3;r[a]=i.x,r[a+1]=i.y,r[a+2]=i.z,o>0&&(a=(o-1)*2,s[a]=o-1,s[a+1]=o)}),n.setAttribute("position",new Ws(r,3)),n.setIndex(new M1(s,1)),n}static computeLineDistance(e){const n=e.isLineSegments===!0;let r=e.geometry;const s=e.matrixWorld;if(r.index&&(r=S2.toNonIndexed(r)),r.index===null){const i=r.attributes.position;if(!i||i.count===0)return;const o=[];if(n)for(let a=0,l=i.count;a<l;a+=2)J0.fromBufferAttribute(i,a).applyMatrix4(s),Q0.fromBufferAttribute(i,a+1).applyMatrix4(s),o[a]=a===0?0:o[a-1],o[a+1]=o[a]+J0.distanceTo(Q0);else{o[0]=0;for(let a=1,l=i.count;a<l;a++)J0.fromBufferAttribute(i,a-1).applyMatrix4(s),Q0.fromBufferAttribute(i,a).applyMatrix4(s),o[a]=o[a-1],o[a]+=J0.distanceTo(Q0)}r.setAttribute("lineDistance",new Ws(o,1)),e.geometry.dispose(),e.geometry=r}}static computeLineDistances(e){e.traverse(n=>{let r=n;r.isLine&&r.material instanceof Na&&this.computeLineDistance(r)})}static apply2dTransform(e,n,r=0,s=1){const i=e.attributes.position,o=i.itemSize,a=i.array;if(r!=0){const l=Math.cos(r),c=Math.sin(r);for(let u=0;u<a.length;u+=o){const d=a[u],h=a[u+1],f=d*l-h*c,m=d*c+h*l;a[u]=f*s+n.x,a[u+1]=m*s+n.y}}else for(let l=0;l<a.length;l+=o)a[l]=a[l]*s+n.x,a[l+1]+=a[l+1]*s+n.y;return i.needsUpdate=!0,e}static apply3dTransform(e,n,r){const s=e.attributes.position,i=s.itemSize,o=s.array,a=Math.cos(r.x),l=Math.sin(r.x),c=Math.cos(r.y),u=Math.sin(r.y),d=Math.cos(r.z),h=Math.sin(r.z);for(let f=0;f<o.length;f+=i){let m=o[f],v=o[f+1],y=o[f+2],g=v*a-y*l,S=v*l+y*a;v=g,y=S;let _=m*c+y*u;S=-m*u+y*c,m=_,y=S,_=m*d-v*h,g=m*h+v*d,m=_,v=g,o[f]=m+n.x,o[f+1]=v+n.y,o[f+2]=y+n.z}return s.needsUpdate=!0,e}};class uce extends uo{constructor(e,n,r){super(r);let s;const i=n?n.color:16777215;n?s=this.styleManager.getLineShaderMaterial(n,1):s=new Fp({color:i});const o=e.length,a=new Float32Array(o*3),l=o*2>65535?new Uint32Array(o*2):new Uint16Array(o*2);for(let d=0,h=0;d<o;d++){const f=e[d];a[h++]=f.x,a[h++]=f.y,a[h++]=f.z??0}for(let d=0,h=0;d<o-1;d++)l[h++]=d,l[h++]=d+1;const c=new mr;c.setAttribute("position",new Ar(a,3)),c.setIndex(new Ar(l,1)),this.setBoundingBox(c),this.geometry=c;const u=new bc(c,s);M8.computeLineDistances(u),this.add(u)}setBoundingBox(e){e.computeBoundingBox(),this.box=e.boundingBox}}class dce extends uo{constructor(e,n,r,s,i){super(i);let o;s?o=this.styleManager.getLineShaderMaterial(s,1):o=new Fp({color:16777215});const a=new mr;a.setAttribute("position",new Ar(e,n)),a.setIndex(new Ar(r,1)),a.computeBoundingBox(),this.box=a.boundingBox;const l=new bc(a,o);M8.computeLineDistances(l),this.add(l)}}class hce extends uo{constructor(e,n,r,s=!1){super(r),this._text=e,this._style=n,s||this.syncDraw()}async syncDraw(){const e=Db.getInstance();if(e)try{const n=this._style;this._mtext=e.syncRenderMText(this._text,n,{byLayerColor:n.byLayerColor,byBlockColor:n.byBlockColor}),this.add(this._mtext),this.flatten(),this.traverse(r=>{r.userData.bboxIntersectionCheck=!0})}catch(n){console.log(`Failed to render mtext '${this._text.text}' with the following error:
`,n)}}async draw(){const e=Db.getInstance();if(e)try{const n=this._style;this._mtext=await e.asyncRenderMText(this._text,n,{byLayerColor:n.byLayerColor,byBlockColor:n.byBlockColor}).then(r=>{this._mtext=r,this.add(this._mtext),this.flatten(),this.traverse(s=>{s.userData.bboxIntersectionCheck=!0})})}catch(n){console.log(`Failed to render mtext '${this._text.text}' with the following error:
`,n)}}raycast(e,n){var r;(r=this._mtext)==null||r.raycast(e,n)}getTextEncoding(e){return e!=null&&e.bigFont&&e.bigFont.toUpperCase().startsWith("GB")?"gbk":"utf8"}}const fce=new Ze;class pce extends uo{constructor(e,n,r){super(r);const s=xu.instance.create(n.displayMode,e);this.isShowPoint=s.point!=null;const i=s.point??new mr().setFromPoints([fce.copy(e)]);i.computeBoundingBox(),i.boundingBox&&this.box.union(i.boundingBox);const o=this.styleManager.getPointsMaterial(n.color),a=new Zd(i,o);if(a.userData.bboxIntersectionCheck=!0,a.visible=this.isShowPoint,this.add(a),s.line){const l=s.line;l.computeBoundingBox(),l.boundingBox&&this.box.union(l.boundingBox);const c=this.styleManager.getLineBasicMaterial(n.color),u=new bc(l,c);u.userData.bboxIntersectionCheck=!0,u.userData.isPoint=!0,u.userData.position={x:e.x,y:e.y,z:e.z},this.add(u)}}}class mce extends uo{constructor(e,n,r){var s;super(r);const i=e.getPoints(100),o=e.buildHierarchy(),a=[];this.buildHatchGeometry(i,o,a);let l;if(a.length>0&&(l=NZ(a)),!l||!l.getIndex()||((s=l.getIndex())==null?void 0:s.count)===0)console.warn("Failed to convert hatch boundaries!");else{l.computeBoundingBox(),this.box=l.boundingBox;const c=this.styleManager.getHatchShaderMaterial(n,new Dt(0,0));this.add(new Os(l,c))}}buildHatchGeometry(e,n,r){if(n.children.length===0)return;const s=[],i=new Map;n.children.forEach(l=>{l.children.length===0?s.push(l.index):i.set(l.index,l.children.map(c=>c.index))});const o=l=>{try{const c=new I1(l);c.hasAttribute("uv")&&c.deleteAttribute("uv"),c.hasAttribute("normal")&&c.deleteAttribute("normal"),r.push(c)}catch{console.warn(`Triangulate shape error: ${l.getPoints().map(c=>c.toArray()).toString()}`)}};s.forEach(l=>{const c=e[l];if(c.length===0)return;const u=new hc(c);o(u)});const a=l=>l.map(c=>c.toArray());for(const l of i){const c=new hc(e[l[0]]);let u={regions:[],inverted:!1};const d=this.findIntersectHole(e,l[1]);d.forEach(f=>{let m={segments:[],inverted:!1},v=1e-6;try{f.forEach((y,g)=>{v=Math.min(e[y][0].relativeEps(),1e-6);const S=new w8(new _8(v));if(g===0)m=S.segments({regions:[a(e[y])],inverted:!1});else{const _=S.segments({regions:[a(e[y])],inverted:!1}),w=S.combine(m,_);u=S.polygon(S.selectUnion(w)),u.regions.length>0?u.regions.forEach(E=>{if(E.length===0)return;const C=E.map(T=>new Dt(T[0],T[1]));c.holes.push(new vg(C))}):console.warn("mergedHoles.regions is empty!")}})}catch(y){console.warn(`Polybool error: ${y}, epsilon is ${v}`)}});const h=d.flat(2);for(let f=0;f<l[1].length;f++){const m=l[1][f];h.includes(m)||c.holes.push(new vg(e[m]))}o(c)}n.children.forEach(l=>{l.children.forEach(c=>{this.buildHatchGeometry(e,c,r)})})}findIntersectHole(e,n){const r=n.length,s=[];for(let i=0;i<r;i++){const o=e[n[i]];let a=!1;const l=[];for(let c=i+1;c<r;c++){const u=e[n[c]];fN.isPolygonIntersect(o,u)&&(a=!0,l.push(n[c]))}a&&(l.push(n[i]),s.push(l))}return s}}function gce(t,e,n,r,s=0){const i={u_cameraZoom:n,u_patternLines:{value:t},u_patternAngle:{value:e},u_color:{value:r}},o=`
        varying vec3 v_pos;

        #include <clipping_planes_pars_vertex>
        void main() {
            //vec4 worldPosition = modelMatrix * vec4(position, 1.0);
            v_pos = position;

            #include <begin_vertex>
            #include <project_vertex>
            #include <clipping_planes_vertex>
        }`,a=`
        uniform mat4 modelMatrix;
        uniform float u_cameraZoom;
        uniform vec3 u_color;
        varying vec3 v_pos;

        struct PatternLine {
            vec2 origin;
            vec2 delta;
            float angle;
            float pattern[MAX_PATTERN_SEGMENT_COUNT];
            float patternSum[MAX_PATTERN_SEGMENT_COUNT+1];
            float patternLength;
        };

        uniform PatternLine u_patternLines[${t.length}];
        uniform float u_patternAngle;

        #include <clipping_planes_pars_fragment>

        // Clamp [0..1] range
        #define saturate(a) clamp(a, 0.0, 1.0)

        const float EPS = 1000.0;

        vec2 getWorldScale() {
            return vec2(length(modelMatrix[0].xyz), length(modelMatrix[1].xyz));
        }

        vec2 rotate(vec2 st, float rotation) {
            const float PI = 3.1415926;
            float angle = rotation * PI/180.0;
            float sine = sin(angle), cosine = cos(angle);
            return vec2(cosine * st.x - sine * st.y, cosine * st.y + sine * st.x);
        }

        vec2 translate(vec2 samplePosition, vec2 offset) {
            //move sample point in the opposite direction that we want to move shapes in
            return samplePosition - offset;
        }

        vec2 scale(vec2 samplePosition, float scale) {
            return samplePosition / scale;
        }

        float sdfLine(vec2 st, vec2 a, vec2 b) {
            vec2 ap = st - a;
            vec2 ab = b - a;
            return abs(((ap.x * ab.y) - (ab.x * ap.y))) / length(ab);
        }

        float drawSpaceLine(vec2 st, float distanceBetweenLines, float thick) {
            float dist = sdfLine(st , vec2(0.0, 0.0) , vec2(1.0, 0.0));

            //vec2 tt = dFdy(st);
            //float scale = (abs(tt.x)+abs(tt.y))/2.0;
            //float scale = length(fwidth(st)) * 0.5;
            // close to a pixel
            //float thick = 2.0;
            //thick = (thick * 0.5 - 0.5) * scale;

            float lineDistance = abs(fract(dist / distanceBetweenLines + 0.5) - 0.5) * distanceBetweenLines;
            //float lineDistance = fract(dist / distanceBetweenLines);
            //float distanceChange = fwidth(dist) * 0.5;
            //float threshold = smoothstep(thick - distanceChange, thick + distanceChange, lineDistance);
            //float threshold = step(thick, lineDistance);
            // remove gradient
            //float threshold = step(0.001, lineDistance);
            float threshold = step(thick, lineDistance);

            return threshold;
        }

        float drawSolidLine(PatternLine patternLine, float thick) {
            vec2 origin = patternLine.origin;
            vec2 delta = patternLine.delta;
            float distanceBetweenLines = length(delta);

            origin = rotate(origin,u_patternAngle);
            vec2 st = rotate(v_pos.xy - origin, -(patternLine.angle + u_patternAngle));

            return drawSpaceLine(st, distanceBetweenLines , thick);
        }

        int getPatternIndex(PatternLine patternLine, float u, out float distance ) {
            //u = mod(u, patternLine.patternLength);
            float y = floor(u/patternLine.patternLength);
            u = u - patternLine.patternLength * y;
            //float distance = 0.0;

            #pragma unroll_loop_start
            for(int i = 1; i < patternLine.patternSum.length(); i++){
                if(u <= patternLine.patternSum[i]) {
                    distance = u - patternLine.patternSum[i-1];
                    return i - 1;
                }
            }
            #pragma unroll_loop_end

            return -1;
        }

        float drawDashedLine(PatternLine patternLine, float thick){
            float threshold = 1.0;
            vec2 origin = patternLine.origin;
            vec2 delta = patternLine.delta;        
            float distanceBetweenLines = abs(delta.y);

            origin = rotate(origin, u_patternAngle);
            vec2 st = rotate(v_pos.xy - origin, -(patternLine.angle + u_patternAngle));

            float offsetX = st.y * delta.x/delta.y;
            float u = st.x - offsetX;
            float distance = 0.0;
            int index = getPatternIndex(patternLine, u, distance);
            if(index < 0) {
                return threshold;
            }

            float size = patternLine.pattern[index];
            if(size >= 0.0) {
                threshold = drawSpaceLine(st, distanceBetweenLines , thick);
                // Try to solve the problem caused by the precision after zooming out by drawing a part of the dashed line
            } else if (distance < thick) {
                //threshold = 0.8;
                threshold = drawSpaceLine(st, distanceBetweenLines , thick);
            }

            return threshold;
        }

        float drawLine(PatternLine patternLine, float thick) {
            float t = 0.0;
            if(patternLine.patternLength > 0.0) {
                t = drawDashedLine(patternLine, thick);
            } else {
                t = drawSolidLine(patternLine, thick);
            }
            return t;
        }

        void main() {
            #include <clipping_planes_fragment>

            // Idealy, the thickness of lines in hatch pattern should always be 1 pixel.
            // In Viewer2d, it uses orthographic camera and always in top view,
            // so we adjust thickness by cameraZoom (and also consider worldScale).
            // While 3d view is more complex, it can use perspective camera,
            // its camera position and direction is flexible. We cannot keep line thickness
            // in a fixed pixel any more, and there is no proper way to adjust thickness as camera
            // position changes. So, we need to use a fixed thickness in world coordinates.
#if ${s} > 0
            float thick = float(${s});
#else
            vec2 worldScale = getWorldScale();
            float averageScale = (abs(worldScale.x) + abs(worldScale.y))/2.0;
            // possible size of a pixel 
            float thick = (0.7 / averageScale) / u_cameraZoom;
#endif

            if(thick > EPS) {
                gl_FragColor = vec4(u_color, 1.0);
                #include <colorspace_fragment>
                return;
            }

            float total = 0.0;

#if ${t.length} > 1
            #pragma unroll_loop_start
            for (int i = 0; i < u_patternLines.length(); i++) {
                PatternLine pl = u_patternLines[i];
                float t = drawLine(pl, thick);
                total += (1.0 - t);
            }
            #pragma unroll_loop_end
#else
            float t = drawLine(u_patternLines[0], thick);
            total += (1.0 - t);
#endif

            total = saturate(total);
            if (total < 0.001) {
                discard;
            }

            gl_FragColor = vec4(u_color * total, 1.0);
            #include <colorspace_fragment>
        }
        `;return new Na({uniforms:i,vertexShader:o,fragmentShader:a,clipping:!0})}class vce{static createLineShaderMaterial(e,n,r,s,i){let o=0;const a=[];for(let d=0;d<e.length;d++)a[d]=e[d].elementLength*r,o+=Math.abs(a[d]);for(let d=0;d<a.length;d++)a[d]===0&&(a[d]=o*.01*r,o+=a[d]);const l=i6.merge([hn.common,{pattern:{value:a},patternLength:{value:o},u_color:{value:new ar(n)}}]);l.u_viewportScale=s,l.u_cameraZoom=i;const c=`
            attribute float lineDistance;
            varying float vLineDistance;

            #include <clipping_planes_pars_vertex>

            void main() {
                vLineDistance = lineDistance;

                #include <begin_vertex>
                #include <project_vertex>
                #include <clipping_planes_vertex>
            }`,u=`
            uniform mat4 modelMatrix;
            uniform vec3 diffuse;
            uniform vec3 u_color;
            uniform float opacity;
            uniform float pattern[${e.length}];
            uniform float patternLength;
            uniform float u_viewportScale;
            uniform float u_cameraZoom;
            varying float vLineDistance;

            #include <clipping_planes_pars_fragment>

            vec2 getWorldScale() {
                return vec2(length(modelMatrix[0].xyz), length(modelMatrix[1].xyz));
            }

            void main() {

                #include <clipping_planes_fragment>

                // vec2 worldScale = getWorldScale();
                // float averageScale = (abs(worldScale.x) + abs(worldScale.y))/2.0;
                // When zoomed out to a certain extent, it is displayed as a solid line.
                if(patternLength * u_viewportScale * u_cameraZoom/1.5 < 1.0){
                    gl_FragColor = vec4(u_color, opacity);
                    #include <colorspace_fragment>
                    return;
                }

                float pos = mod(vLineDistance, patternLength * u_viewportScale);

                for ( int i = 0; i < ${e.length}; i++ ) {
                    pos = pos - abs(pattern[i] * u_viewportScale);
                    if ( pos < 0.0 ) {
                        if ( pattern[i] > 0.0 ) {
                            gl_FragColor = vec4(u_color, opacity);
                            break;
                        }
                        discard;
                    }
                }
                #include <colorspace_fragment>
            }`;return new Na({uniforms:l,vertexShader:c,fragmentShader:u,clipping:!0})}}const qy=class Rm{constructor(){this.pointMaterials={},this.lineShaderMaterials={},this.lineBasicMaterials={},this.hatchShaderMaterials=[],this.meshBasicMaterials={},this.unsupportedTextStyles={}}getPointsMaterial(e,n=2){const r=`${e}_${n}`;return this.pointMaterials[r]||(this.pointMaterials[r]=new d6({size:n,color:e})),this.pointMaterials[r]}getMeshBasicMaterial(e){return this.meshBasicMaterials[e]||(this.meshBasicMaterials[e]=new mv({color:e})),this.meshBasicMaterials[e]}getLineBasicMaterial(e){return this.lineBasicMaterials[e]||(this.lineBasicMaterials[e]=new Fp({color:e})),this.lineBasicMaterials[e]}getLineShaderMaterial(e,n){if(e.pattern&&e.pattern.length!==0){const r=`${e.name}_${e.color}_${n}`;return this.lineShaderMaterials[r]||(this.lineShaderMaterials[r]=vce.createLineShaderMaterial(e.pattern,e.color,n,Rm.ViewportScaleUniform,Rm.CameraZoomUniform)),this.lineShaderMaterials[r]}else return this.getLineBasicMaterial(e.color)}getHatchShaderMaterial(e,n){if(!e.patternLines||e.patternLines.length<1)return this.getMeshBasicMaterial(e.color);let r=!1;if(e.patternLines.forEach(h=>{h.dashPattern||(r=!0,console.log("Invalid dash pattern: ",e))}),r)return;const s=this.findMatchedHatchShaderMaterial(e);if(s)return s;const i=.005,o=.05;let a=2;e.patternLines.forEach(h=>{a=Math.max(h.dashPattern.length,a)});let l=0;const c=[],u=new Dt;for(const h of e.patternLines){const f=new Dt(h.origin.x,h.origin.y).sub(n).rotateAround(u,-WS.degToRad(e.patternAngle)),m=new Dt(h.delta.x,h.delta.y).rotateAround(u,-WS.degToRad(h.angle));if(m.y===0){console.warn("delta.y is equal to zero!");return}const v=h.dashPattern.length;let y=!0,g=0;for(let T=0;T<v;++T){const I=h.dashPattern[T];I>0&&(y=!1),g+=Math.abs(I)}const S=y?o:i,_=[],w=[];let E=0;w[0]=E;for(let T=0;T<v;++T)_[T]=h.dashPattern[T],_[T]===0&&(_[T]=S*g),E+=Math.abs(_[T]),w[T+1]=E;for(let T=v;T<a;++T)_[T]=0;for(let T=w.length;T<a+1;++T)w[T]=E;const C={origin:f,delta:m,angle:h.angle-e.patternAngle,pattern:_,patternSum:w,patternLength:E};if(l+=4,l+=a,l+=a+1,l>Rm.MaxFragmentUniforms){console.warn("There will be warning in fragment shader when number of uniforms exceeds 1024, so extra hatch line patterns are ignored here!");break}c.push(C)}const d=gce(c,e.patternAngle,Rm.CameraZoomUniform,new ar(e.color));return d.defines={MAX_PATTERN_SEGMENT_COUNT:a},this.hatchShaderMaterials.push({patternLines:e.patternLines,patternAngle:e.patternAngle,color:e.color,material:d}),d}findMatchedHatchShaderMaterial(e){const n=e.patternLines;if(!n||n.length<1)return;const r=(l,c)=>Math.abs(l-c)<1e-5,s=(l,c)=>{if(l.length!==c.length)return!1;for(let u=0;u<l.length;++u)if(!r(l[u],c[u]))return!1;return!0},i=(l,c)=>r(l.angle,c.angle)&&r(l.delta.x,c.delta.x)&&r(l.delta.y,c.delta.y)&&r(l.origin.x,c.origin.x)&&r(l.origin.y,c.origin.y)&&s(l.dashPattern,c.dashPattern),o=(l,c)=>{if(l.length!==c.length)return!1;for(let u=0;u<l.length;++u)if(!i(l[u],c[u]))return!1;return!0},a=this.hatchShaderMaterials.find(l=>l.color===e.color&&l.patternAngle===e.patternAngle&&o(l.patternLines,n));return a==null?void 0:a.material}};qy.CameraZoomUniform={value:1},qy.ViewportScaleUniform={value:1},qy.MaxFragmentUniforms=1024;let yce=qy;class bce{constructor(e){this.events={fontNotFound:new Tr},this._renderer=e,this._styleManager=new yce,hl.instance.events.fontNotFound.addEventListener(n=>{this.events.fontNotFound.dispatch(n)})}get autoClear(){return this._renderer.autoClear}set autoClear(e){this._renderer.autoClear=e}get domElement(){return this._renderer.domElement}setSize(e,n){this._renderer.setSize(e,n)}getViewport(e){return this._renderer.getViewport(e)}setViewport(e,n,r,s){this._renderer.setViewport(e,n,r,s)}clear(){this._renderer.clear()}clearDepth(){this._renderer.clearDepth()}render(e,n){this._renderer.render(e,n.internalCamera)}setClearColor(e,n){this._renderer.setClearColor(e,n)}getClearColor(){const e=new ar;return this._renderer.getClearColor(e),e.getHex()}setClearAlpha(e){this._renderer.setClearAlpha(e)}getClearAlpha(){return this._renderer.getClearAlpha()}get internalRenderer(){return this._renderer}async loadFonts(e){return await hl.instance.loadFontsByUrls(e)}setFontMapping(e){hl.instance.setFontMapping(e)}get missedFonts(){return hl.instance.missedFonts}clearMissedFonts(){hl.instance.missedFonts={}}createObject(){return new S8(this._styleManager)}createEntity(){return new uo(this._styleManager)}group(e){return new E8(e,this._styleManager)}point(e,n){return new pce(e,n,this._styleManager)}circularArc(e,n){return this.linePoints(e.getPoints(100),n)}ellipticalArc(e,n){return this.linePoints(e.getPoints(100),n)}lines(e,n){return this.linePoints(e,n)}lineSegments(e,n,r,s){return new dce(e,n,r,s,this._styleManager)}area(e,n){return new mce(e,n,this._styleManager)}mtext(e,n,r){return new hce(e,n,this._styleManager,r)}image(e,n){return new cce(e,n,this._styleManager)}linePoints(e,n=void 0){return new uce(e,n,this._styleManager)}}class _ce{constructor(e){this._camera=e}get position(){return this._camera.position}get left(){return this._camera.left}set left(e){this._camera.left=e}get right(){return this._camera.right}set right(e){this._camera.right=e}get top(){return this._camera.top}set top(e){this._camera.top=e}get bottom(){return this._camera.bottom}set bottom(e){this._camera.bottom=e}get zoom(){return this._camera.zoom}set zoom(e){this._camera.zoom=e}get internalCamera(){return this._camera}lookAt(e){this._camera.lookAt(e)}setRotationFromEuler(e){this._camera.setRotationFromEuler(e)}updateProjectionMatrix(){this._camera.updateProjectionMatrix()}cwcs2Wcs(e,n,r){const s=new Ze(e.x,e.y,0);s.x=e.x/n*2-1,s.y=-(e.y/r)*2+1;const i=s.unproject(this._camera);return new Dn(i.x,i.y)}wcs2Cwcs(e,n,r){const s=new Ze(e.x,e.y,0).project(this._camera);return new Dn((s.x+1)/2*n,(-s.y+1)/2*r)}wcs2Ndc(e,n,r){const s=this.wcs2Cwcs(e,n,r);return this.cwcs2Ndc(s,n,r)}cwcs2Ndc(e,n,r){return new Dn(e.x/n*2-1,-(e.y/r)*2+1)}}let A8=class{constructor(e,n,r){this._frustum=400,this.events={viewChanged:new Tr},this._renderer=e,this._width=n,this._height=r;const s=this.createCamera();this._camera=new _ce(s),this._cameraControls=this.createCameraControls(),this._cameraControls.addEventListener("change",()=>{this.events.viewChanged.dispatch({view:this})}),this._raycaster=new Yj}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}get enabled(){return this._cameraControls.enabled}set enabled(e){this._cameraControls.enabled=e}get center(){return this._camera.cwcs2Wcs({x:this._width/2,y:this._height/2},this._width,this._height)}set center(e){this._camera.position.set(e.x,e.y,this._camera.position.z),this._camera.updateProjectionMatrix()}cwcs2Wcs(e){return this._camera.cwcs2Wcs(e,this._width,this._height)}wcs2Cwcs(e){return this._camera.wcs2Cwcs(e,this._width,this._height)}pointToBox(e,n){const r=this.wcs2Cwcs(e),s=this.cwcs2Wcs({x:r.x+n,y:r.y+n}),i=this.cwcs2Wcs({x:r.x-n,y:r.y-n});return new ds().setFromPoints([s,i])}resetRaycaster(e,n){const r=this._camera.wcs2Ndc(e,this._width,this._height);return this._raycaster.setFromCamera(new Dt(r.x,r.y),this._camera.internalCamera),this._raycaster.params.Line.threshold=n,this._raycaster.params.Points.threshold=n,this._raycaster}zoomTo(e,n=1.1){const r=new is;e.getSize(r);const s=new is;e.getCenter(s);const i=new Ze(s.x,s.y,0);this._camera.position.set(s.x,s.y,this._camera.position.z),this._camera.lookAt(i),this._camera.setRotationFromEuler(new wl(0,0,0));const o=r.x*n,a=r.y*n,l=this._width/o,c=this._height/a;this._camera.zoom=Math.min(l,c),this._cameraControls.target=i,this.updateCameraFrustum()}updateCameraFrustum(e,n){const r=(e??this._width)/(n??this._height);this._camera.left=-r*this._frustum,this._camera.right=r*this._frustum,this._camera.top=this._frustum,this._camera.bottom=-this._frustum,this._camera.updateProjectionMatrix(),this._cameraControls.update()}createCamera(){const e=new SC(-this._width/2,this._width/2,this._height/2,-this._height/2,.1,1e3);return e.position.set(0,0,500),e.up.set(0,1,0),e.updateProjectionMatrix(),e}createCameraControls(){const e=new FZ(this._camera.internalCamera,this._renderer.domElement);return e.enableDamping=!1,e.autoRotate=!1,e.enableRotate=!1,e.zoomSpeed=5,e.mouseButtons={MIDDLE:uc.PAN},e.update(),e}},wce=class E2 extends A8{static calculateViewportWindowBox(e,n){const r=n.box,s=new ds;return s.expandByPoint(e.wcs2Cwcs(r.min)),s.expandByPoint(e.wcs2Cwcs(r.max)),s}constructor(e,n,r){const s=E2.calculateViewportWindowBox(e,n).size;super(r,s.width,s.height),this._parentView=e,this._viewport=n.clone(),this._frustum*=n.height/e.height,this.zoomTo(this._viewport.viewBox),this.enabled=!1}get viewport(){return this._viewport}update(){this.zoomTo(this._viewport.viewBox)}render(e){const n=E2.calculateViewportWindowBox(this._parentView,this._viewport);if(!n.isEmpty()){const r=this._parentView.height-n.min.y-n.size.height;this._renderer.setViewport(n.min.x,r,n.size.width,n.size.height),this._renderer.internalRenderer.setScissor(n.min.x,r,n.size.width,n.size.height),this._renderer.internalRenderer.setScissorTest(!0),this._renderer.render(e,this._camera),this._renderer.internalRenderer.setScissorTest(!1)}}};const xce=t=>new Lr(t.min,t.max),Sce=t=>new ds(t.min,t.max),Ece=t=>new us(t.min,t.max),Cce=t=>new ds(t.min,t.max),Tce=t=>new _6(t.min,t.max),Mce=t=>new ds(t.min,t.max),Ace=t=>{const e=new us;return e.min.set(t.min.x,t.min.y,0),e.max.set(t.max.x,t.max.y,0),e},kce={threeBo2dToGeBox2d:Cce,geBox2dToThreeBox2d:Tce,threeBox3dToGeBox3d:xce,geBox3dToThreeBox3d:Ece,goBox3dToGeBox2d:Sce,threeBox3dToGeBox2d:Mce,geBox2dToThreeBox3d:Ace};var W1=(t=>(t[t.LEFT_BOTTOM=0]="LEFT_BOTTOM",t[t.LEFT_TOP=1]="LEFT_TOP",t[t.RIGHT_TOP=2]="RIGHT_TOP",t[t.RIGHT_BOTTOM=4]="RIGHT_BOTTOM",t))(W1||{});class Ice extends Gs{constructor(e,n,r=150,s=2){super(),this.camera=e,this.renderer=n,this.gizmoCamera=new SC(-2,2,2,-2,0,4),this.gizmoCamera.position.set(0,0,2),this.gizmoDim=r,this.gizmoPos=s,this.initialize()}initialize(){}update(){this.updateOrientation();const e=this.renderer.autoClear;this.renderer.autoClear=!1,this.renderer.clearDepth();const n=new ps;this.renderer.getViewport(n);const r=this.calculateViewportPos();this.renderer.setViewport(r.x,r.y,this.gizmoDim,this.gizmoDim),this.renderer.render(this,this.gizmoCamera),this.renderer.setViewport(n.x,n.y,n.z,n.w),this.renderer.autoClear=e}dispose(){}updateOrientation(){this.quaternion.copy(this.camera.quaternion).invert(),this.updateMatrixWorld()}calculatePosInViewport(e,n,r){const s=(e-r.min.x)/this.gizmoDim*2-1,i=-((n-r.min.y)/this.gizmoDim)*2+1;return{x:s,y:i}}calculateViewportPos(){const e=this.renderer.domElement,n=e.offsetWidth,r=e.offsetHeight,s=this.gizmoPos,i=this.gizmoDim;let o=n-i,a=r-i;switch(s){case 0:o=0,a=0;break;case 1:o=0;break;case 4:a=0;break}return{x:o,y:a}}calculateViewportBbox(){const e=this.renderer.domElement,n=e.offsetWidth,r=e.offsetHeight,s=this.gizmoPos,i=this.gizmoDim,o=new _6(new Dt(n-i,0),new Dt(n,i));switch(s){case 0:o.set(new Dt(0,r-i),new Dt(i,r));break;case 1:o.set(new Dt(0,0),new Dt(i,i));break;case 4:o.set(new Dt(n-i,r-i),new Dt(n,r));break}return o}}function Pce(t,e){const n=e.font||"Helvetica",r=e.fontSize||30,s=e.width||200,i=e.height||200,o=e.bgColor?e.bgColor.join(", "):"255, 255, 255, 1.0",a=e.color?e.color.join(", "):"0, 0, 0, 1.0",l=document.createElement("canvas");l.width=s,l.height=i;const c=l.getContext("2d");if(c){c.font=`bold ${r}px ${n}`,c.fillStyle=`rgba(${o})`,c.fillRect(0,0,s,i);const d=c.measureText(t).width;c.fillStyle=`rgba(${a})`,c.fillText(t,s/2-d/2,i/2+r/2-2)}const u=new Ti(l);return u.minFilter=Ta,u.needsUpdate=!0,u}function cx(t){const e=Pce(t,{fontSize:100,font:"Arial Narrow, sans-serif",color:[255,255,255,1],bgColor:[0,0,0,0]}),n=new l6({map:e,transparent:!0});return new sj(n)}W1.RIGHT_TOP;const Rce={pos:W1.LEFT_BOTTOM,size:100,hasZAxis:!0};class Lce extends Ice{constructor(e,n,r){const s={...Rce,...r};super(e,n,s.size,r.pos),this.hasZAxis=s.hasZAxis;const i=[0,0,0,2,0,0,0,0,0,0,2,0],o=[1,0,0,1,.6,0,0,1,0,.6,1,0];this.hasZAxis&&(i.push(0,0,0,0,0,2),o.push(0,0,1,0,.6,1));const a=new mr;a.setAttribute("position",new Ws(i,3)),a.setAttribute("color",new Ws(o,3));const l=new Fp({vertexColors:!0,toneMapped:!1});this.axes=new bc(a,l),this.axes.position.set(-1,-1,-1),this.add(this.axes),this.xText=cx("X"),this.xText.position.set(1.5,-1,-1),this.add(this.xText),this.yText=cx("Y"),this.yText.position.set(-1,1.5,-1),this.add(this.yText),this.hasZAxis&&(this.zText=cx("Z"),this.zText.position.set(-1,-1,1.5),this.add(this.zText))}setLineColors(e,n){const r=new ar,s=this.axes.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(n),r.toArray(s,6),r.toArray(s,9),this.axes.geometry.attributes.color.needsUpdate=!0,this}setTextColor(e){this.xText.material.color=e,this.yText.material.color=e}dispose(){var e,n;this.axes.geometry.dispose(),this.axes.material.dispose(),this.xText.geometry.dispose(),this.xText.material.dispose(),this.yText.geometry.dispose(),this.yText.material.dispose(),this.hasZAxis&&((e=this.zText)==null||e.geometry.dispose(),(n=this.zText)==null||n.material.dispose())}}class Oce extends A8{constructor(e,n,r,s){super(e,r,s),this._layoutBtrId=n,this._mode=ku.SELECTION,this._axesGizmo=this.createAxesGizmo(),this._viewportViews=new Map}get layoutBtrId(){return this._layoutBtrId}get mode(){return this._mode}set mode(e){e==ku.SELECTION?this._cameraControls.mouseButtons={MIDDLE:uc.PAN}:e==ku.PAN&&(this._cameraControls.mouseButtons={LEFT:uc.PAN}),this._cameraControls.update(),this._mode=e}get viewportCount(){return this._viewportViews.size}addViewport(e){this._viewportViews.set(e.viewport.id,e)}removeViewport(e){this._viewportViews.delete(e)}resize(e,n){this._height=n,this._width=e,this.updateCameraFrustum(),this._viewportViews.forEach(r=>{r.update()})}render(e){var n;this._renderer.clear(),this._renderer.render(e.internalScene,this._camera);const r=e.modelSpaceLayout;r&&this.drawViewports(r.internalObject),(n=this._axesGizmo)==null||n.update()}createAxesGizmo(){return new Lce(this._camera.internalCamera,this._renderer.internalRenderer,{hasZAxis:!1,pos:W1.LEFT_BOTTOM})}drawViewports(e){if(this._viewportViews.size>0){const n=this._renderer.autoClear;this._renderer.autoClear=!1;const r=new ps;this._renderer.getViewport(r),this._renderer.clearDepth();const s=e.visible;e.visible=!0,this._viewportViews.forEach(i=>{i.render(e)}),e.visible=s,this._renderer.setViewport(r.x,r.y,r.z,r.w),this._renderer.autoClear=n}}}class Nce{constructor(){this._activeLayoutBtrId="",this._layoutViews=new Map}get activeLayoutBtrId(){return this._activeLayoutBtrId}set activeLayoutBtrId(e){this._activeLayoutBtrId=e,this._layoutViews.forEach(n=>{n.enabled=n.layoutBtrId==e})}get activeLayoutView(){return this._layoutViews.get(this._activeLayoutBtrId)}has(e){return this._layoutViews.has(e)}getAt(e){return this._layoutViews.get(e)}resize(e,n){this._layoutViews.forEach(r=>{r.resize(e,n)})}add(e){this._layoutViews.set(e.layoutBtrId,e)}render(e){var n;(n=this.activeLayoutView)==null||n.render(e)}}function k8(t,e,n=0,r=t.length-1,s=Dce){for(;r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),f=Math.max(n,Math.floor(e-c*d/l+h)),m=Math.min(r,Math.floor(e+(l-c)*d/l+h));k8(t,e,f,m,s)}const i=t[e];let o=n,a=r;for(vm(t,n,e),s(t[r],i)>0&&vm(t,n,r);o<a;){for(vm(t,o,a),o++,a--;s(t[o],i)<0;)o++;for(;s(t[a],i)>0;)a--}s(t[n],i)===0?vm(t,n,a):(a++,vm(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}}function vm(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Dce(t,e){return t<e?-1:t>e?1:0}class Fce{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;const r=[];if(!ty(e,n))return r;const s=this.toBBox,i=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],l=n.leaf?s(a):a;ty(e,l)&&(n.leaf?r.push(a):dx(e,l)?this._all(a,r):i.push(a))}n=i.pop()}return r}collides(e){let n=this.data;if(!ty(e,n))return!1;const r=[];for(;n;){for(let s=0;s<n.children.length;s++){const i=n.children[s],o=n.leaf?this.toBBox(i):i;if(ty(e,o)){if(n.leaf||dx(e,o))return!0;r.push(i)}}n=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=_f([]),this}remove(e,n){if(!e)return this;let r=this.data;const s=this.toBBox(e),i=[],o=[];let a,l,c;for(;r||i.length;){if(r||(r=i.pop(),l=i[i.length-1],a=o.pop(),c=!0),r.leaf){const u=Bce(e,r.children,n);if(u!==-1)return r.children.splice(u,1),i.push(r),this._condense(i),this}!c&&!r.leaf&&dx(r,s)?(i.push(r),o.push(a),a=0,l=r,r=r.children[0]):l?(a++,r=l.children[a],c=!1):r=null}return this}toBBox(e){return e}compareMinX(e,n){return e.minX-n.minX}compareMinY(e,n){return e.minY-n.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,n){const r=[];for(;e;)e.leaf?n.push(...e.children):r.push(...e.children),e=r.pop();return n}_build(e,n,r,s){const i=r-n+1;let o=this._maxEntries,a;if(i<=o)return a=_f(e.slice(n,r+1)),of(a,this.toBBox),a;s||(s=Math.ceil(Math.log(i)/Math.log(o)),o=Math.ceil(i/Math.pow(o,s-1))),a=_f([]),a.leaf=!1,a.height=s;const l=Math.ceil(i/o),c=l*Math.ceil(Math.sqrt(o));XI(e,n,r,c,this.compareMinX);for(let u=n;u<=r;u+=c){const d=Math.min(u+c-1,r);XI(e,u,d,l,this.compareMinY);for(let h=u;h<=d;h+=l){const f=Math.min(h+l-1,d);a.children.push(this._build(e,h,f,s-1))}}return of(a,this.toBBox),a}_chooseSubtree(e,n,r,s){for(;s.push(n),!(n.leaf||s.length-1===r);){let i=1/0,o=1/0,a;for(let l=0;l<n.children.length;l++){const c=n.children[l],u=ux(c),d=$ce(e,c)-u;d<o?(o=d,i=u<i?u:i,a=c):d===o&&u<i&&(i=u,a=c)}n=a||n.children[0]}return n}_insert(e,n,r){const s=r?e:this.toBBox(e),i=[],o=this._chooseSubtree(s,this.data,n,i);for(o.children.push(e),Om(o,s);n>=0&&i[n].children.length>this._maxEntries;)this._split(i,n),n--;this._adjustParentBBoxes(s,i,n)}_split(e,n){const r=e[n],s=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,s);const o=this._chooseSplitIndex(r,i,s),a=_f(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,of(r,this.toBBox),of(a,this.toBBox),n?e[n-1].children.push(a):this._splitRoot(r,a)}_splitRoot(e,n){this.data=_f([e,n]),this.data.height=e.height+1,this.data.leaf=!1,of(this.data,this.toBBox)}_chooseSplitIndex(e,n,r){let s,i=1/0,o=1/0;for(let a=n;a<=r-n;a++){const l=Lm(e,0,a,this.toBBox),c=Lm(e,a,r,this.toBBox),u=Vce(l,c),d=ux(l)+ux(c);u<i?(i=u,s=a,o=d<o?d:o):u===i&&d<o&&(o=d,s=a)}return s||r-n}_chooseSplitAxis(e,n,r){const s=e.leaf?this.compareMinX:Uce,i=e.leaf?this.compareMinY:zce,o=this._allDistMargin(e,n,r,s),a=this._allDistMargin(e,n,r,i);o<a&&e.children.sort(s)}_allDistMargin(e,n,r,s){e.children.sort(s);const i=this.toBBox,o=Lm(e,0,n,i),a=Lm(e,r-n,r,i);let l=ey(o)+ey(a);for(let c=n;c<r-n;c++){const u=e.children[c];Om(o,e.leaf?i(u):u),l+=ey(o)}for(let c=r-n-1;c>=n;c--){const u=e.children[c];Om(a,e.leaf?i(u):u),l+=ey(a)}return l}_adjustParentBBoxes(e,n,r){for(let s=r;s>=0;s--)Om(n[s],e)}_condense(e){for(let n=e.length-1,r;n>=0;n--)e[n].children.length===0?n>0?(r=e[n-1].children,r.splice(r.indexOf(e[n]),1)):this.clear():of(e[n],this.toBBox)}}function Bce(t,e,n){if(!n)return e.indexOf(t);for(let r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function of(t,e){Lm(t,0,t.children.length,e,t)}function Lm(t,e,n,r,s){s||(s=_f(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let i=e;i<n;i++){const o=t.children[i];Om(s,t.leaf?r(o):o)}return s}function Om(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Uce(t,e){return t.minX-e.minX}function zce(t,e){return t.minY-e.minY}function ux(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ey(t){return t.maxX-t.minX+(t.maxY-t.minY)}function $ce(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function Vce(t,e){const n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),s=Math.min(t.maxX,e.maxX),i=Math.min(t.maxY,e.maxY);return Math.max(0,s-n)*Math.max(0,i-r)}function dx(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function ty(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function _f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function XI(t,e,n,r,s){const i=[e,n];for(;i.length;){if(n=i.pop(),e=i.pop(),n-e<=r)continue;const o=e+Math.ceil((n-e)/r/2)*r;k8(t,o,e,n,s),i.push(e,o,o,n)}}class Hce{constructor(e){this._group=new lce,this._name=e}get name(){return this._name}set name(e){this._name=e}get visible(){return this._group.visible}set visible(e){this._group.visible=e}get internalObject(){return this._group}get stats(){const e=this._group.stats;return{name:this._name,...e}}get entityCount(){return this._group.entityCount}rerenderPoints(e){this._group.rerenderPoints(e)}hasEntity(e){return this._group.hasEntity(e)}addEntity(e){this._group.addEntity(e)}isIntersectWith(e,n){return this._group.isIntersectWith(e,n)}remove(e){throw new Error("Not implemented yet!")}update(e){return this._group.add(e),!0}hover(e){e.forEach(n=>{this._group.hover(n)})}unhover(e){e.forEach(n=>{this._group.unhover(n)})}select(e){e.forEach(n=>{this._group.select(n)})}unselect(e){e.forEach(n=>{this._group.unselect(n)})}}class Gce{constructor(){this._group=new Aa,this._indexTree=new Fce,this._box=new us,this._layers=new Map}get internalObject(){return this._group}get layers(){return this._layers}get box(){return this._box}get visible(){return this._group.visible}set visible(e){this._group.visible=e}get entityCount(){let e=0;return this._layers.forEach(n=>e+=n.entityCount),e}get stats(){const e=[];let n=0,r=0,s=0,i=0,o=0;return this._layers.forEach(a=>{const l=a.stats;e.push(l),s+=l.line.indexed.geometrySize+l.line.nonIndexed.geometrySize,i+=l.mesh.indexed.geometrySize+l.mesh.nonIndexed.geometrySize,o+=l.point.indexed.geometrySize+l.point.nonIndexed.geometrySize,n+=l.summary.totalGeometrySize,r+=l.summary.totalMappingSize}),{layers:e,summary:{entityCount:this.entityCount,totalSize:{line:s,mesh:i,point:o,geometry:n,mapping:r}}}}clear(){return this._layers.forEach(e=>{this._group.remove(e.internalObject)}),this._layers.clear(),this._box.makeEmpty(),this._indexTree.clear(),this}rerenderPoints(e){this._layers.forEach(n=>{n.rerenderPoints(e)})}isIntersectWith(e,n){const r=this.getLayerByObjectId(e);return r&&r.isIntersectWith(e,n)}addEntity(e,n=!0){if(!e.objectId)throw new Error("Object id is required to add one entity!");if(!e.layerName)throw new Error("Layer name is required to add one entity!");const r=this._layers.get(e.layerName);if(!r)throw new Error(`layer '${e.layerName}' doesn't exist!`);r.addEntity(e);const s=e.box;return n&&this._box.union(s),this._indexTree.insert({minX:s.min.x,minY:s.min.y,maxX:s.max.x,maxY:s.max.y,id:e.objectId}),this}remove(e){for(const[n,r]of this._layers)if(r.remove(e))return!0;return!1}updateEntity(e){for(const[n,r]of this._layers)if(r.update(e))return!0;return!1}addLayer(e){const n=e.name;let r=this._layers.get(n);return r===void 0&&(r=new Hce(n),r.visible=!(e.isFrozen||e.isOff),this._layers.set(n,r),this._group.add(r.internalObject)),e}updateLayer(e){const n=this._layers.get(e.name);return n&&(n.visible=!(e.isFrozen||e.isOff)),n}hover(e){e.forEach(n=>{const r=this.getLayerByObjectId(n);r&&r.hover([n])})}unhover(e){e.forEach(n=>{const r=this.getLayerByObjectId(n);r&&r.unhover([n])})}select(e){e.forEach(n=>{const r=this.getLayerByObjectId(n);r&&r.select([n])})}unselect(e){e.forEach(n=>{const r=this.getLayerByObjectId(n);r&&r.unselect([n])})}setSnapObject(e){this._snapPointsObject&&this._group.remove(this._snapPointsObject),this._snapPointsObject=e,this._group.add(e)}search(e){return this._indexTree.search({minX:e.min.x,minY:e.min.y,maxX:e.max.x,maxY:e.max.y})}getLayerByObjectId(e){for(const[n,r]of this._layers)if(r.hasEntity(e))return r}}class Wce{constructor(){this._scene=new nj,this._layers=new Map,this._layouts=new Map,this._activeLayoutBtrId="",this._modelSpaceBtrId=""}get layers(){return this._layers}get layouts(){return this._layouts}get box(){var e;return(e=this.activeLayout)==null?void 0:e.box}get internalScene(){return this._scene}get modelSpaceBtrId(){return this._modelSpaceBtrId}set modelSpaceBtrId(e){if(this._modelSpaceBtrId=e,!this._layouts.has(e))throw new Error(`[AcTrScene] No layout assiciated with the specified block table record id '${e}'!`)}get activeLayoutBtrId(){return this._activeLayoutBtrId}set activeLayoutBtrId(e){this._activeLayoutBtrId=e,this._layouts.forEach((n,r)=>{n.visible=e==r})}get activeLayout(){if(this._activeLayoutBtrId&&this._layouts.has(this._activeLayoutBtrId))return this._layouts.get(this._activeLayoutBtrId)}get modelSpaceLayout(){if(this._modelSpaceBtrId&&this._layouts.has(this._modelSpaceBtrId))return this._layouts.get(this._modelSpaceBtrId)}get stats(){const e=[];return this._layouts.forEach(n=>e.push(n.stats)),{layouts:e}}addEmptyLayout(e){const n=new Gce;return this._layouts.set(e,n),this._scene.add(n.internalObject),n.visible=e==this._activeLayoutBtrId,this._layers.forEach(r=>{n.addLayer(r)}),n}clear(){return this._layouts.forEach(e=>{this._scene.remove(e.internalObject),e.clear()}),this._layouts.clear(),this._layers.clear(),this._scene.clear(),this}hover(e){return this.activeLayout?(this.activeLayout.hover(e),!0):!1}unhover(e){return this.activeLayout?(this.activeLayout.unhover(e),!0):!1}select(e){return this.activeLayout?(this.activeLayout.select(e),!0):!1}unselect(e){return this.activeLayout?(this.activeLayout.unselect(e),!0):!1}search(e){const n=this.activeLayout;return n?n==null?void 0:n.search(e):[]}addLayer(e){this._layers.set(e.name,e),this._layouts.forEach(n=>{n.addLayer(e)})}updateLayer(e){this._layers.set(e.name,e),this._layouts.forEach(n=>{n.updateLayer(e)})}addEntity(e,n=!0){const r=e.ownerId;if(r){let s=this._layouts.get(r);s||(s=this.addEmptyLayout(r)),s.addEntity(e,n)}else console.warn("[AcTrSecene] The owner id of one entity cannot be empty!");return this}remove(e){for(const[n,r]of this._layouts)if(r.remove(e))return!0;return!1}update(e){for(const[n,r]of this._layouts)if(r.updateEntity(e))return!0;return!1}setSnapObject(e){return this._layouts.forEach(n=>{n.setSnapObject(e)}),this}}const ZI={background:0};class jce extends Fre{constructor(e=ZI){const n={...ZI,...e},r=new OZ({antialias:!0,alpha:!0,canvas:e.canvas});n.canvas==null&&(n.canvas=r.domElement),super(n.canvas),e.calculateSizeCallback&&this.setCalculateSizeCallback(e.calculateSizeCallback),r.setPixelRatio(Math.min(window.devicePixelRatio,2)),r.setSize(this.width,this.height),this._renderer=new bce(r);const s=Xo.instance.fontMapping;this._renderer.setFontMapping(s),this._renderer.events.fontNotFound.addEventListener(i=>{ji.emit("font-not-found",{fontName:i.fontName,count:i.count??0})}),this._scene=this.createScene(),this._renderer.setClearColor(n.background||0),this._stats=this.createStats(Xo.instance.isShowStats),Xo.instance.events.modified.addEventListener(i=>{i.key=="isShowStats"&&this.toggleStatsVisibility(this._stats,i.value)}),this.canvas.addEventListener("click",()=>{this.mode==ku.SELECTION&&this.select()}),document.addEventListener("keydown",i=>{i.code==="Escape"&&this.selectionSet.clear()}),Dp().layoutManager.events.layoutSwitched.addEventListener(i=>{this.activeLayoutBtrId=i.layout.blockTableRecordId}),this._missedImages=new Map,this._layoutViewManager=new Nce,this.initialize(),this.onWindowResize(),this.animate(),this._isDirty=!0}initialize(){this.setCursor(bv.Crosshair)}get mode(){const e=this.activeLayoutView;return e?e.mode:ku.SELECTION}set mode(e){this.activeLayoutView.mode=e,this.editor.getPoint()}get renderer(){return this._renderer}get isDirty(){return this._isDirty}set isDirty(e){this._isDirty=e}get missedData(){return{fonts:this._renderer.missedFonts,images:this._missedImages}}get center(){return this.activeLayoutView.center}set center(e){this.activeLayoutView.center=e}get backgroundColor(){return this._renderer.getClearColor()}set backgroundColor(e){this._renderer.setClearColor(e),this._isDirty=!0}get modelSpaceBtrId(){return this._scene.modelSpaceBtrId}set modelSpaceBtrId(e){this._scene.modelSpaceBtrId=e}get activeLayoutBtrId(){return this._scene.activeLayoutBtrId}set activeLayoutBtrId(e){this._layoutViewManager.activeLayoutBtrId=e,this._scene.activeLayoutBtrId=e,this._isDirty=!0}get activeLayoutView(){return this._layoutViewManager.activeLayoutView}get stats(){return this._scene.stats}animate(){var e;requestAnimationFrame(this.animate.bind(this)),this._isDirty&&(this._layoutViewManager.render(this._scene),(e=this._stats)==null||e.update(),this._isDirty=!1)}cwcs2Wcs(e){const n=this.activeLayoutView;return n?n.cwcs2Wcs(e):new Dn(e)}wcs2Cwcs(e){const n=this.activeLayoutView;return n?n.wcs2Cwcs(e):new Dn(e)}zoomTo(e,n=1.1){this.activeLayoutView.zoomTo(e,n),this._isDirty=!0}rerenderPoints(e){const n=this._scene.activeLayout;n&&(n.rerenderPoints(e),this._isDirty=!0)}zoomToFit(){if(this._scene.box){const e=kce.threeBox3dToGeBox2d(this._scene.box);this.zoomTo(e),this._isDirty=!0}}pick(e){e==null&&(e=this.curPos);const n=[],r=this._scene.activeLayout;if(r){const s=this.activeLayoutView,i=s.pointToBox(e,this.selectionBoxSize),o=this._scene.search(i),a=Math.max(i.size.width/2,i.size.height/2),l=s.resetRaycaster(e,a);o.forEach(c=>{const u=c.id;r.isIntersectWith(u,l)&&n.push(u)})}return n}search(e){return this._scene.search(e)}select(e){const n=[];this.pick(e).forEach(r=>n.push(r)),n.length>0&&this.selectionSet.add(n)}selectByBox(e){const n=[];this._scene.search(e).forEach(r=>n.push(r.id)),this.selectionSet.add(n)}addLayer(e){this._scene.addLayer({name:e.name,isFrozen:e.isFrozen,isOff:e.isOff}),this._isDirty=!0}updateLayer(e){this._scene.updateLayer({name:e.name,isFrozen:e.isFrozen,isOff:e.isOff}),this._isDirty=!0}addEntity(e){const n=Array.isArray(e)?e:[e];setTimeout(async()=>{await this.batchConvert(n)})}removeEntity(e){this._scene.remove(e)}updateEntity(e){let n=[];Array.isArray(e)?n=e:n.push(e);for(let r=0;r<n.length;++r){const s=n[r],i=s.draw(this._renderer);i&&(i.objectId=s.objectId,i.ownerId=s.ownerId,i.layerName=s.layer,i.visible=s.visibility,this._scene.update(i))}this._isDirty=!0,setTimeout(()=>{this._isDirty=!0},100)}addLayout(e){this._scene.addEmptyLayout(e.blockTableRecordId),this.createLayoutViewIfNeeded(e.blockTableRecordId),this._isDirty=!0}clear(){this._scene.clear(),this._isDirty=!0,this._missedImages.clear(),this._renderer.clearMissedFonts()}highlight(e){this._isDirty=this._scene.select(e)}unhighlight(e){this._isDirty=this._scene.unselect(e)}onHover(e){this._isDirty=this._scene.hover([e])}onUnhover(e){this._isDirty=this._scene.unhover([e])}createScene(){const e=new Wce;return e.layouts.forEach(n=>{n.setSnapObject(this.renderer.createObject())}),e}createStats(e){const n=new Km;document.body.appendChild(n.dom);const r=n.dom;return r.style.position="fixed",r.style.inset="unset",r.style.bottom="30px",r.style.right="0px",this.toggleStatsVisibility(n,e),n}onWindowResize(){super.onWindowResize(),this._renderer.setSize(this.width,this.height),this._layoutViewManager.resize(this.width,this.height),this._isDirty=!0}createLayoutViewIfNeeded(e){let n=this._layoutViewManager.getAt(e);return n==null&&(n=new Oce(this._renderer,e,this.width,this.height),n.events.viewChanged.addEventListener(()=>{this._isDirty=!0}),this._layoutViewManager.add(n)),n}toggleStatsVisibility(e,n){n?e.dom.style.display="block":e.dom.style.display="none"}async batchConvert(e){for(let n=0;n<e.length;++n){const r=e[n],s=r.draw(this._renderer,!0);if(s){if(s.objectId=r.objectId,s.ownerId=r.ownerId,s.layerName=r.layer,s.visible=r.visibility,s instanceof E8&&!s.isOnTheSameLayer)this.handleGroup(s);else{const i=!(r instanceof oC||r instanceof lC);await s.draw().then(()=>{this._scene.addEntity(s,i),s.dispose(),this._isDirty=!0})}if(r instanceof aC){if(r.number>1){const i=this._layoutViewManager.getAt(r.ownerId);if(i){const o=new wce(i,r.toGiViewport(),this._renderer);i.addViewport(o)}}}else if(r instanceof E1){const i=r.imageFileName;i&&this._missedImages.set(r.objectId,i)}}}}handleGroup(e){const n=e.children,r=new Map;n.forEach(l=>{var c;const u=l.userData.layerName;r.has(u)||r.set(u,[]),(c=r.get(u))==null||c.push(l)});const s=e.styleManager,i=e.objectId,o=e.layerName,a=e.box;r.forEach((l,c)=>{const u=new uo(s);u.applyMatrix4(e.matrix),u.objectId=i,u.ownerId=e.ownerId,u.layerName=c==="0"?o:c,u.box=a,u.add(...l),this._scene.addEntity(u,!0),u.dispose()}),this._isDirty=!0}}class Kce{constructor(e){this._cadRenderer=e,this._avaiableFonts=[]}get avaiableFonts(){return this._avaiableFonts}async getAvaiableFonts(){if(this._avaiableFonts.length==0){const e="https://cdn.jsdelivr.net/gh/mlight-lee/cad-data/fonts/",n=e+"fonts.json";try{const r=await fetch(n);this._avaiableFonts=await r.json()}catch{ji.emit("failed-to-get-avaiable-fonts",{url:n})}this._avaiableFonts.forEach(r=>{r.url=e+r.file})}return this._avaiableFonts}async load(e){await this.getAvaiableFonts();const n=[];e.forEach(r=>{const s=r.toLowerCase(),i=ire(this._avaiableFonts,o=>c5(o.name,a=>a.toLowerCase()==s)>=0);i&&n.push(i.url)}),(await this._cadRenderer.loadFonts(n)).forEach(r=>{r.status||ji.emit("font-not-loaded",{fontName:r.fontName,url:r.url})})}}class fr{constructor(e){this.events={documentCreated:new Tr,documentActivated:new Tr};const n=new Bre;n.database.events.openProgress.addEventListener(i=>{ji.emit("open-file-progress",{database:n.database,percentage:i.percentage,stage:i.stage,subStage:i.subStage,stageStatus:i.stageStatus})});const r=()=>({width:window.innerWidth,height:window.innerHeight-30}),s=new jce({canvas:e,calculateSizeCallback:r});this._context=new Cre(s,n),this._fontLoader=new Kce(s.renderer),Dp().workingDatabase=n.database,this.registerCommands()}static createInstance(e){return fr._instance==null&&(fr._instance=new fr(e)),this._instance}static get instance(){return fr._instance||(fr._instance=new fr),fr._instance}get context(){return this._context}get curDocument(){return this._context.doc}get mdiActiveDocument(){return this._context.doc}get curView(){return this._context.view}get editor(){return this._context.view.editor}get avaiableFonts(){return this._fontLoader.avaiableFonts}async loadFonts(e){await this._fontLoader.load(e)}async loadDefaultFonts(e){e==null?await this._fontLoader.load(["simkai"]):await this._fontLoader.load(e)}async openUrl(e,n){this.onBeforeOpenDocument(),n=this.setOptions(n);const r=await this.context.doc.openUri(e,n);return this.onAfterOpenDocument(r),r}async openDocument(e,n,r){this.onBeforeOpenDocument(),r=this.setOptions(r);const s=await this.context.doc.openDocument(e,n,r);return this.onAfterOpenDocument(s),s}registerCommands(){const e=ei.instance;e.addCommand(ei.SYSTEMT_COMMAND_GROUP_NAME,"pan","pan",new qre),e.addCommand(ei.SYSTEMT_COMMAND_GROUP_NAME,"select","select",new Gre),e.addCommand(ei.SYSTEMT_COMMAND_GROUP_NAME,"zoom","zoom",new Wre),e.addCommand(ei.SYSTEMT_COMMAND_GROUP_NAME,"zoomw","zoomw",new Kre),e.addCommand(ei.SYSTEMT_COMMAND_GROUP_NAME,"csvg","csvg",new m5),e.addCommand(ei.SYSTEMT_COMMAND_GROUP_NAME,"qnew","qnew",new v5),e.addCommand(ei.SYSTEMT_COMMAND_GROUP_NAME,"open","open",new g5)}sendStringToExecute(e){const n=ei.instance.lookupGlobalCmd(e);n==null||n.execute(this.context)}setActiveLayout(){const e=this.curView;e.activeLayoutBtrId=this.curDocument.database.currentSpaceId,e.modelSpaceBtrId=this.curDocument.database.currentSpaceId}onBeforeOpenDocument(){this.curView.clear()}onAfterOpenDocument(e){if(e){const n=this.context.doc;this.events.documentActivated.dispatch({doc:n}),this.setActiveLayout();const r=n.database;this.curView.zoomTo(new ds(r.extmin,r.extmax))}}setOptions(e){return e==null?e={fontLoader:this._fontLoader}:e.fontLoader==null&&(e.fontLoader=this._fontLoader),e}}class JI{convert(e){const n=this.createEntity(e);return n&&this.processCommonAttrs(e,n),n}createEntity(e){return e.type=="ARC"?this.convertArc(e):e.type=="CIRCLE"?this.convertCirle(e):e.type=="DIMENSION"?this.convertDimension(e):e.type=="ELLIPSE"?this.convertEllipse(e):e.type=="HATCH"?this.convertHatch(e):e.type=="IMAGE"?this.convertImage(e):e.type=="LEADER"?this.convertLeader(e):e.type=="LINE"?this.convertLine(e):e.type=="LWPOLYLINE"?this.convertLWPolyline(e):e.type=="MTEXT"?this.convertMText(e):e.type=="POINT"?this.convertPoint(e):e.type=="POLYLINE"?this.convertPolyline(e):e.type=="RAY"?this.convertRay(e):e.type=="SPLINE"?this.convertSpline(e):e.type=="ACAD_TABLE"?this.convertTable(e):e.type=="TEXT"?this.convertText(e):e.type=="SOLID"?this.convertSolid(e):e.type=="VIEWPORT"?this.convertViewport(e):e.type=="WIPEOUT"?this.convertWipeout(e):e.type=="XLINE"?this.convertXline(e):e.type=="INSERT"?this.convertBlockReference(e):null}convertArc(e){return new VN(e.center,e.radius,e.startAngle,e.endAngle)}convertCirle(e){return new GN(e.center,e.radius)}convertEllipse(e){const n=new qt(e.majorAxisEndPoint),r=n.length();return new zN(e.center,qt.Z_AXIS,n,r,r*e.axisRatio,e.startAngle,e.endAngle)}convertLine(e){const n=e.startPoint,r=e.endPoint;return new XN(new Yt(n.x,n.y,n.z),new Yt(r.x,r.y,r.z))}convertSpline(e){return e.numberOfControlPoints>0&&e.numberOfKnots>0?new bb(e.controlPoints,e.knots,e.weights,e.degree,!!(e.flag&1)):e.numberOfFitPoints>0?new bb(e.fitPoints,"Uniform",e.degree,!!(e.flag&1)):null}convertPoint(e){const n=new fD;return n.position=e.position,n}convertSolid(e){const n=new uD;return n.setPointAt(0,{...e.corner1,z:0}),n.setPointAt(1,{...e.corner2,z:0}),n.setPointAt(2,{...e.corner3,z:0}),n.setPointAt(3,e.corner4?{...e.corner4,z:0}:{...e.corner3,z:0}),n.thickness=e.thickness,n}convertLWPolyline(e){const n=new nS;return n.closed=!!(e.flag&512),e.vertices.forEach((r,s)=>{n.addVertexAt(s,new Dn(r.x,r.y),r.bulge,r.startWidth,r.endWidth)}),n}convertPolyline(e){const n=new nS;return n.closed=!!(e.flag&1),e.vertices.forEach((r,s)=>{n.addVertexAt(s,new Dn(r.x,r.y),r.bulge,r.startWidth,r.endWidth)}),n}convertHatch(e){var n;const r=new jN;return(n=e.definitionLines)==null||n.forEach(s=>{r.definitionLines.push({angle:s.angle,origin:s.base,delta:s.offset,dashPattern:s.numberOfDashLengths>0?s.dashLengths:[]})}),r.hatchStyle=e.hatchStyle,r.patternName=e.patternName,r.patternType=e.patternType,r.patternAngle=e.patternAngle==null?0:e.patternAngle,r.patternScale=e.patternScale==null?0:e.patternScale,e.boundaryPaths.forEach(s=>{if(s.boundaryPathTypeFlag&2){const i=s,o=new hv;o.closed=i.isClosed,i.vertices.forEach((a,l)=>{o.addVertexAt(l,{x:a.x,y:a.y,bulge:a.bulge})}),r.add(o)}else{const i=s,o=new RN;i.edges.forEach(a=>{if(a.type==1){const l=a;o.add(new IN(l.start,l.end))}else if(a.type==2){const l=a;o.add(new yb(l.center,l.radius,l.startAngle,l.endAngle,!l.isCCW))}else if(a.type==3){const l=a;new is().subVectors(l.end,l.center);const c=Math.sqrt(Math.pow(l.end.x,2)+Math.pow(l.end.y,2)),u=c*l.lengthOfMinorAxis;let d=l.startAngle,h=l.endAngle;const f=Math.atan2(l.end.y,l.end.x);l.isCCW||(d=Math.PI*2-d,h=Math.PI*2-h),o.add(new MN({...l.center,z:0},c,u,d,h,!l.isCCW,f))}else if(a.type==4){const l=a;if(l.numberOfControlPoints>0&&l.numberOfKnots>0){const c=l.controlPoints.map(h=>({x:h.x,y:h.y,z:0}));let u=!0;const d=l.controlPoints.map(h=>(h.weight==null&&(u=!1),h.weight||1));o.add(new qd(c,l.knots,u?d:void 0))}else if(l.numberOfFitData>0){const c=l.fitDatum.map(u=>({x:u.x,y:u.y,z:0}));o.add(new qd(c,"Uniform"))}}}),r.add(o)}}),r}convertTable(e){const n=new oD(e.name,e.rowCount,e.columnCount);return n.attachmentPoint=e.attachmentPoint,n.position.copy(e.startPoint),e.columnWidthArr.forEach((r,s)=>n.setColumnWidth(s,r)),e.rowHeightArr.forEach((r,s)=>n.setRowHeight(s,r)),e.cells.forEach((r,s)=>{n.setCell(s,r)}),n}convertText(e){const n=new lD;return n.textString=e.text,n.styleName=e.styleName,n.height=e.textHeight,n.position.copy(e.startPoint),n.rotation=e.rotation,n.oblique=e.obliqueAngle??0,n.thickness=e.thickness,n.horizontalMode=e.halign,n.verticalMode=e.valign,n.widthFactor=e.xScale??1,n}convertMText(e){const n=new rD;return n.contents=e.text,e.styleName!=null&&(n.styleName=e.styleName),n.height=e.textHeight,n.width=e.rectWidth,n.rotation=e.rotation||0,n.location=e.insertionPoint,n.attachmentPoint=e.attachmentPoint,e.direction&&(n.direction=new qt(e.direction)),n.drawingDirection=e.drawingDirection,n}convertLeader(e){const n=new qN;return e.vertices.forEach(r=>{n.appendVertex(r)}),n.hasArrowHead=e.isArrowheadEnabled,n.hasHookLine=e.isHooklineExists,n.isSplined=e.isSpline,n.dimensionStyle=e.styleName,n.annoType=e.leaderCreationFlag,n}convertDimension(e){if(e.subclassMarker=="AcDbAlignedDimension"||e.subclassMarker=="AcDbRotatedDimension"){const n=e,r=new ED(n.subDefinitionPoint1,n.subDefinitionPoint2,n.definitionPoint);return r.rotation=n.rotationAngle,this.processDimensionCommonAttrs(e,r),r}else if(e.subclassMarker=="AcDb3PointAngularDimension"){const n=e,r=new xD(n.centerPoint,n.subDefinitionPoint1,n.subDefinitionPoint2,n.definitionPoint);return this.processDimensionCommonAttrs(e,r),r}else if(e.subclassMarker=="AcDbOrdinateDimension"){const n=e,r=new AD(n.subDefinitionPoint1,n.subDefinitionPoint2);return this.processDimensionCommonAttrs(e,r),r}else if(e.subclassMarker=="AcDbRadialDimension"){const n=e,r=new ID(n.definitionPoint,n.centerPoint,n.leaderLength);return this.processDimensionCommonAttrs(e,r),r}else if(e.subclassMarker=="AcDbDiametricDimension"){const n=e,r=new TD(n.definitionPoint,n.centerPoint,n.leaderLength);return this.processDimensionCommonAttrs(e,r),r}return null}processImage(e,n){n.position.copy(e.position),n.brightness=e.brightness,n.contrast=e.contrast,n.fade=e.fade,n.imageDefId=e.imageDefHandle.toString(),n.isClipped=e.clipping>0,n.isShownClipped=(e.flags|4)>0,n.isImageShown=(e.flags|3)>0,n.isImageTransparent=(e.flags|8)>0,e.clippingBoundaryPath.forEach(r=>{n.clipBoundary.push(new Dn(r))}),n.clipBoundaryType=e.clippingBoundaryType,n.width=Math.sqrt(e.uPixel.x**2+e.uPixel.y**2+e.uPixel.z**2)*e.imageSize.x,n.height=Math.sqrt(e.vPixel.x**2+e.vPixel.y**2+e.vPixel.z**2)*e.imageSize.y,n.rotation=Math.atan2(e.uPixel.y,e.uPixel.x)}convertImage(e){const n=new E1;return this.processImage(e,n),n}convertWipeout(e){const n=new yD;return this.processImage(e,n),n}convertViewport(e){const n=new aC;return n.number=e.viewportId,n.centerPoint.copy(e.viewportCenter),n.height=e.height,n.width=e.width,n.viewCenter.copy(e.displayCenter),n.viewHeight=e.viewHeight,n}convertRay(e){const n=new oC;return n.basePoint.copy(e.firstPoint),n.unitDir.copy(e.unitDirection),n}convertXline(e){const n=new lC;return n.basePoint.copy(e.firstPoint),n.unitDir.copy(e.unitDirection),n}convertBlockReference(e){const n=new sC(e.name);return e.insertionPoint&&n.position.copy(e.insertionPoint),n.scaleFactors.x=e.xScale,n.scaleFactors.y=e.yScale,n.scaleFactors.z=e.zScale,n.rotation=e.rotation,n.normal.copy(e.extrusionDirection),n}processDimensionCommonAttrs(e,n){n.dimBlockId=e.name,n.textPosition.copy(e.textPoint),n.textRotation=e.textRotation||0,e.textLineSpacingFactor&&(n.textLineSpacingFactor=e.textLineSpacingFactor),e.textLineSpacingStyle&&(n.textLineSpacingStyle=e.textLineSpacingStyle),n.dimensionStyleName=e.styleName,n.dimensionText=e.text||"",n.measurement=e.measurement}processCommonAttrs(e,n){n.layer=e.layer,n.objectId=e.handle.toString(),n.ownerId=e.ownerBlockRecordSoftId.toString(),e.lineType!=null&&(n.lineType=e.lineType),e.lineweight!=null&&(n.lineWeight=e.lineweight),e.lineTypeScale!=null&&(n.linetypeScale=e.lineTypeScale),e.color!=null&&(n.color.color=e.color),e.colorIndex!=null&&(n.color.colorIndex=e.colorIndex),e.colorName!=null&&(n.color.colorName=e.colorName),e.isVisible!=null&&(n.visibility=e.isVisible),e.transparency!=null&&(n.transparency=e.transparency)}}class qce extends tN{constructor(e={}){super(e),e.useWorker=!0,e.parserWorkerUrl||(e.parserWorkerUrl="/assets/libredwg-parser-worker.js")}async parse(e){if(this.config.useWorker&&this.config.parserWorkerUrl){const n=LD({workerUrl:this.config.parserWorkerUrl,maxConcurrentWorkers:1}),r=await n.execute(e);return n.destroy(),r.data}else throw new Error("dwg converter can run in web worker only!")}getFonts(e){const n=new Map;e.tables.BLOCK_RECORD.entries.forEach(o=>{n.set(o.name,o)});const r=new Map,s=o=>{if(o){const a=o.lastIndexOf(".");return a>=0?o.substring(0,a).toLowerCase():o.toLowerCase()}};e.tables.STYLE.entries.forEach(o=>{const a=[];let l=s(o.font);l&&a.push(l),l=s(o.bigFont),l&&a.push(l),r.set(o.name,a)});const i=new Set;return this.getFontsInBlock(e.entities,n,r,i),Array.from(i)}getFontsInBlock(e,n,r,s){const i=/\\f(.*?)\|/g;e.forEach(o=>{if(o.type=="MTEXT"){const a=o;[...a.text.matchAll(i)].forEach(c=>{s.add(c[1].toLowerCase())});const l=r.get(a.styleName);l==null||l.forEach(c=>s.add(c))}else if(o.type=="TEXT"){const a=o,l=r.get(a.styleName);l==null||l.forEach(c=>s.add(c))}else if(o.type=="INSERT"){const a=o,l=n.get(a.name);l&&this.getFontsInBlock(l.entities,n,r,s)}})}processLineTypes(e,n){e.tables.LTYPE.entries.forEach(r=>{const s={name:r.name,description:r.description,standardFlag:r.standardFlag,totalPatternLength:r.totalPatternLength,pattern:r.pattern},i=new FD(s);this.processCommonTableEntryAttrs(r,i),i.name=r.name,n.tables.linetypeTable.add(i)})}processTextStyles(e,n){e.tables.STYLE.entries.forEach(r=>{const s=new BD(r);this.processCommonTableEntryAttrs(r,s),n.tables.textStyleTable.add(s)})}processDimStyles(e,n){e.tables.DIMSTYLE.entries.forEach(r=>{const s={name:r.name,ownerId:r.ownerHandle.toString(),dimpost:r.DIMPOST||"",dimapost:r.DIMAPOST||"",dimscale:r.DIMSCALE,dimasz:r.DIMASZ,dimexo:r.DIMEXO,dimdli:r.DIMDLI,dimexe:r.DIMEXE,dimrnd:r.DIMRND,dimdle:r.DIMDLE,dimtp:r.DIMTP,dimtm:r.DIMTM,dimtxt:r.DIMTXT,dimcen:r.DIMCEN,dimtsz:r.DIMTSZ,dimaltf:r.DIMALTF,dimlfac:r.DIMLFAC,dimtvp:r.DIMTVP,dimtfac:r.DIMTFAC,dimgap:r.DIMGAP,dimaltrnd:r.DIMALTRND,dimtol:r.DIMTOL==null||r.DIMTOL==0?0:1,dimlim:r.DIMLIM==null||r.DIMLIM==0?0:1,dimtih:r.DIMTIH==null||r.DIMTIH==0?0:1,dimtoh:r.DIMTOH==null||r.DIMTOH==0?0:1,dimse1:r.DIMSE1==null||r.DIMSE1==0?0:1,dimse2:r.DIMSE2==null||r.DIMSE2==0?0:1,dimtad:r.DIMTAD,dimzin:r.DIMZIN,dimazin:r.DIMAZIN,dimalt:r.DIMALT,dimaltd:r.DIMALTD,dimtofl:r.DIMTOFL,dimsah:r.DIMSAH,dimtix:r.DIMTIX,dimsoxd:r.DIMSOXD,dimclrd:r.DIMCLRD,dimclre:r.DIMCLRE,dimclrt:r.DIMCLRT,dimadec:r.DIMADEC||0,dimunit:r.DIMUNIT||2,dimdec:r.DIMDEC,dimtdec:r.DIMTDEC,dimaltu:r.DIMALTU,dimalttd:r.DIMALTTD,dimaunit:r.DIMAUNIT,dimfrac:r.DIMFRAC,dimlunit:r.DIMLUNIT,dimdsep:r.DIMDSEP,dimtmove:r.DIMTMOVE||0,dimjust:r.DIMJUST,dimsd1:r.DIMSD1,dimsd2:r.DIMSD2,dimtolj:r.DIMTOLJ,dimtzin:r.DIMTZIN,dimaltz:r.DIMALTZ,dimalttz:r.DIMALTTZ,dimfit:r.DIMFIT||0,dimupt:r.DIMUPT,dimatfit:r.DIMATFIT,dimtxsty:"Standard",dimldrblk:"",dimblk:r.DIMBLK||"",dimblk1:r.DIMBLK1||"",dimblk2:r.DIMBLK2||"",dimlwd:r.DIMLWD,dimlwe:r.DIMLWE},i=new uC(s);this.processCommonTableEntryAttrs(r,i),n.tables.dimStyleTable.add(i)})}processLayers(e,n){e.tables.LAYER.entries.forEach(r=>{const s=new Gu;s.colorIndex=r.colorIndex;const i=new cC({name:r.name,standardFlags:r.standardFlag,linetype:r.lineType,lineWeight:r.lineweight,isOff:r.off,color:s,isPlottable:r.plotFlag!=0});this.processCommonTableEntryAttrs(r,i),n.tables.layerTable.add(i)})}processViewports(e,n){e.tables.VPORT.entries.forEach(r=>{const s=new UD;this.processCommonTableEntryAttrs(r,s),r.circleSides&&(s.circleSides=r.circleSides),s.standardFlag=r.standardFlag,s.center.copy(r.center),s.lowerLeftCorner.copy(r.lowerLeftCorner),s.upperRightCorner.copy(r.upperRightCorner),r.snapBasePoint&&s.snapBase.copy(r.snapBasePoint),r.snapRotationAngle&&(s.snapAngle=r.snapRotationAngle),r.snapSpacing&&s.snapIncrements.copy(r.snapSpacing),r.majorGridLines&&(s.gridMajor=r.majorGridLines),r.gridSpacing&&s.gridIncrements.copy(r.gridSpacing),r.backgroundObjectId&&(s.backgroundObjectId=r.backgroundObjectId),s.gsView.center.copy(r.center),s.gsView.viewDirectionFromTarget.copy(r.viewDirectionFromTarget),s.gsView.viewTarget.copy(r.viewTarget),r.lensLength&&(s.gsView.lensLength=r.lensLength),r.frontClippingPlane&&(s.gsView.frontClippingPlane=r.frontClippingPlane),r.backClippingPlane&&(s.gsView.backClippingPlane=r.backClippingPlane),r.viewHeight&&(s.gsView.viewHeight=r.viewHeight),r.viewTwistAngle&&(s.gsView.viewTwistAngle=r.viewTwistAngle),r.frozenLayers&&(s.gsView.frozenLayers=r.frozenLayers),r.styleSheet&&(s.gsView.styleSheet=r.styleSheet),r.renderMode&&(s.gsView.renderMode=r.renderMode),r.viewMode&&(s.gsView.viewMode=r.viewMode),r.ucsIconSetting&&(s.gsView.ucsIconSetting=r.ucsIconSetting),r.ucsOrigin&&s.gsView.ucsOrigin.copy(r.ucsOrigin),r.ucsXAxis&&s.gsView.ucsXAxis.copy(r.ucsXAxis),r.ucsYAxis&&s.gsView.ucsYAxis.copy(r.ucsYAxis),r.orthographicType&&(s.gsView.orthographicType=r.orthographicType),r.shadePlotSetting&&(s.gsView.shadePlotSetting=r.shadePlotSetting),r.shadePlotObjectId&&(s.gsView.shadePlotObjectId=r.shadePlotObjectId),r.visualStyleObjectId&&(s.gsView.visualStyleObjectId=r.visualStyleObjectId),r.isDefaultLightingOn&&(s.gsView.isDefaultLightingOn=r.isDefaultLightingOn),r.defaultLightingType&&(s.gsView.defaultLightingType=r.defaultLightingType),r.brightness&&(s.gsView.brightness=r.brightness),r.contrast&&(s.gsView.contrast=r.contrast),r.ambientColor&&(s.gsView.ambientColor=r.ambientColor),n.tables.viewportTable.add(s)})}processBlockTables(e,n){e.tables.BLOCK_RECORD.entries.forEach(r=>{let s=n.tables.blockTable.getAt(r.name);s||(s=new wa,s.objectId=r.handle.toString(),s.name=r.name,s.ownerId=r.ownerHandle.toString(),s.origin.copy(r.basePoint),s.layoutId=r.layout.toString(),n.tables.blockTable.add(s)),!s.isModelSapce&&!s.isPaperSapce&&r.entities&&r.entities.length>0&&this.processEntitiesInBlock(r.entities,s)})}processBlocks(e,n){}async processEntitiesInBlock(e,n){const r=new JI,s=e.length,i=[];for(let o=0;o<s;o++){const a=e[o],l=r.convert(a);l&&i.push(l)}n.appendEntity(i)}async processEntities(e,n,r,s,i){const o=new JI;let a=e.entities;const l=a.length,c=new $L(l,100-s.value,r);this.config.convertByEntityType&&(a=this.groupAndFlattenByType(a));const u=n.tables.blockTable.modelSpace;await c.processChunk(async(d,h)=>{const f=[];for(let m=d;m<h;m++){const v=a[m],y=o.convert(v);y&&f.push(y)}if(u.appendEntity(f),i){let m=s.value+h/l*(100-s.value);m>100&&(m=100),await i(m,"ENTITY","IN-PROGRESS")}})}processHeader(e,n){const r=e.header;n.cecolor.colorIndex=r.CECOLOR||256,n.angBase=r.ANGBASE??0,n.angDir=r.ANGDIR??0,n.aunits=r.AUNITS??0,n.extmax=r.EXTMAX,n.extmin=r.EXTMIN,n.insunits=r.INSUNITS??1,n.pdmode=r.PDMODE??0,n.pdsize=r.PDSIZE??0}processCommonTableEntryAttrs(e,n){n.name=e.name,n.objectId=e.handle.toString(),n.ownerId=e.ownerHandle.toString()}processObjects(e,n){this.processLayouts(e,n),this.processImageDefs(e,n)}processLayouts(e,n){const r=n.dictionaries.layouts;e.objects.LAYOUT.forEach(s=>{const i=new C1;i.layoutName=s.layoutName,i.tabOrder=s.tabOrder;const o=n.tables.blockTable.newIterator();i.objectId=s.handle.toString();for(const a of o)if(a.layoutId===i.objectId){i.blockTableRecordId=a.objectId;break}i.limits.min.copy(s.minLimit),i.limits.max.copy(s.maxLimit),i.extents.min.copy(s.minExtent),i.extents.max.copy(s.maxExtent),this.processCommonObjectAttrs(s,i),r.setAt(i.layoutName,i)})}processImageDefs(e,n){const r=n.dictionaries.imageDefs;e.objects.IMAGEDEF.forEach(s=>{const i=new RD;i.sourceFileName=s.fileName,this.processCommonObjectAttrs(s,i),r.setAt(i.objectId,i)})}processCommonObjectAttrs(e,n){n.objectId=e.handle.toString(),n.ownerId=e.ownerHandle.toString()}groupAndFlattenByType(e){const n={},r=[];for(const s of e)n[s.type]||(n[s.type]=[],r.push(s.type)),n[s.type].push(s);return r.flatMap(s=>n[s])}}function Yce(){try{const t=new OD({convertByEntityType:!1,useWorker:!0,parserWorkerUrl:"./assets/dxf-parser-worker.js"});_b.instance.register(Tu.DXF,t)}catch(t){console.error("Failed to register dxf converter: ",t)}try{const t=new qce({convertByEntityType:!1,useWorker:!0,parserWorkerUrl:"./assets/libredwg-parser-worker.js"});_b.instance.register(Tu.DWG,t)}catch(t){console.error("Failed to register dwg converter: ",t)}}function Xce(){Yce(),typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?Db.getInstance().initialize("/assets/mtext-renderer-worker.js"):Db.getInstance().initialize("./mtext-renderer-worker.js")}const Zce={isDebug:!1,isShowCommandLine:!0,isShowCoordinate:!0,isShowToolbar:!0,isShowStats:!1,fontMapping:{}},QI="settings";let Xo=class I8{constructor(){this.events={modified:new Tr}}static get instance(){return this._instance||(this._instance=new I8),this._instance}set(e,n){const r=this.settings;r[e]=n,localStorage.setItem(QI,JSON.stringify(r)),this.events.modified.dispatch({key:e,value:n})}get(e){return this.settings[e]}toggle(e){const n=this.get(e);this.set(e,!n)}get isDebug(){return this.get("isDebug")}set isDebug(e){this.set("isDebug",e)}get isShowCommandLine(){return this.get("isShowCommandLine")}set isShowCommandLine(e){this.set("isShowCommandLine",e)}get isShowCoordinate(){return this.get("isShowCoordinate")}set isShowCoordinate(e){this.set("isShowCoordinate",e)}get isShowToolbar(){return this.get("isShowToolbar")}set isShowToolbar(e){this.set("isShowToolbar",e)}get isShowStats(){return this.get("isShowStats")}set isShowStats(e){this.set("isShowStats",e)}get fontMapping(){return this.get("fontMapping")}set fontMapping(e){this.set("fontMapping",e)}setFontMapping(e,n){const r=this.get("fontMapping");r[e]=n,this.set("fontMapping",r)}get settings(){const e=localStorage.getItem(QI),n=e==null?{}:JSON.parse(e);return Qne(n,Zce)}};/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function lT(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Mr={},zf=[],er=()=>{},Jce=()=>!1,j1=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),cT=t=>t.startsWith("onUpdate:"),Ns=Object.assign,uT=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Qce=Object.prototype.hasOwnProperty,Kn=(t,e)=>Qce.call(t,e),rt=Array.isArray,$f=t=>Cv(t)==="[object Map]",K1=t=>Cv(t)==="[object Set]",Nu=t=>Cv(t)==="[object Date]",Lt=t=>typeof t=="function",kt=t=>typeof t=="string",Ua=t=>typeof t=="symbol",un=t=>t!==null&&typeof t=="object",th=t=>(un(t)||Lt(t))&&Lt(t.then)&&Lt(t.catch),P8=Object.prototype.toString,Cv=t=>P8.call(t),eue=t=>Cv(t).slice(8,-1),Lg=t=>Cv(t)==="[object Object]",dT=t=>kt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ym=lT(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),q1=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},tue=/-(\w)/g,ki=q1(t=>t.replace(tue,(e,n)=>n?n.toUpperCase():"")),nue=/\B([A-Z])/g,Il=q1(t=>t.replace(nue,"-$1").toLowerCase()),Tv=q1(t=>t.charAt(0).toUpperCase()+t.slice(1)),Xm=q1(t=>t?`on${Tv(t)}`:""),oo=(t,e)=>!Object.is(t,e),Yy=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},C2=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},T2=t=>{const e=parseFloat(t);return isNaN(e)?t:e},rue=t=>{const e=kt(t)?Number(t):NaN;return isNaN(e)?t:e};let eP;const Y1=()=>eP||(eP=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Pt(t){if(rt(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=kt(r)?aue(r):Pt(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(kt(t)||un(t))return t}const sue=/;(?![^(]*\))/g,iue=/:([^]+)/,oue=/\/\*[^]*?\*\//g;function aue(t){const e={};return t.replace(oue,"").split(sue).forEach(n=>{if(n){const r=n.split(iue);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function U(t){let e="";if(kt(t))e=t;else if(rt(t))for(let n=0;n<t.length;n++){const r=U(t[n]);r&&(e+=r+" ")}else if(un(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Ro(t){if(!t)return null;let{class:e,style:n}=t;return e&&!kt(e)&&(t.class=U(e)),n&&(t.style=Pt(n)),t}const lue="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",cue=lT(lue);function R8(t){return!!t||t===""}function uue(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=cp(t[r],e[r]);return n}function cp(t,e){if(t===e)return!0;let n=Nu(t),r=Nu(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Ua(t),r=Ua(e),n||r)return t===e;if(n=rt(t),r=rt(e),n||r)return n&&r?uue(t,e):!1;if(n=un(t),r=un(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!cp(t[o],e[o]))return!1}}return String(t)===String(e)}function L8(t,e){return t.findIndex(n=>cp(n,e))}const O8=t=>!!(t&&t.__v_isRef===!0),tt=t=>kt(t)?t:t==null?"":rt(t)||un(t)&&(t.toString===P8||!Lt(t.toString))?O8(t)?tt(t.value):JSON.stringify(t,N8,2):String(t),N8=(t,e)=>O8(e)?N8(t,e.value):$f(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[hx(r,i)+" =>"]=s,n),{})}:K1(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>hx(n))}:Ua(e)?hx(e):un(e)&&!rt(e)&&!Lg(e)?String(e):e,hx=(t,e="")=>{var n;return Ua(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};function due(t){return t==null?"initial":typeof t=="string"?t===""?" ":t:String(t)}/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let xi;class D8{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=xi,!e&&xi&&(this.index=(xi.scopes||(xi.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=xi;try{return xi=this,e()}finally{xi=n}}}on(){++this._on===1&&(this.prevScope=xi,xi=this)}off(){this._on>0&&--this._on===0&&(xi=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function F8(t){return new D8(t)}function hT(){return xi}function fT(t,e=!1){xi&&xi.cleanups.push(t)}let Qr;const fx=new WeakSet;class B8{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,xi&&xi.active&&xi.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,fx.has(this)&&(fx.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||z8(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,tP(this),$8(this);const e=Qr,n=La;Qr=this,La=!0;try{return this.fn()}finally{V8(this),Qr=e,La=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)gT(e);this.deps=this.depsTail=void 0,tP(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?fx.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){M2(this)&&this.run()}get dirty(){return M2(this)}}let U8=0,Zm,Jm;function z8(t,e=!1){if(t.flags|=8,e){t.next=Jm,Jm=t;return}t.next=Zm,Zm=t}function pT(){U8++}function mT(){if(--U8>0)return;if(Jm){let e=Jm;for(Jm=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Zm;){let e=Zm;for(Zm=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function $8(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function V8(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),gT(r),hue(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function M2(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(H8(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function H8(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Og)||(t.globalVersion=Og,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!M2(t))))return;t.flags|=2;const e=t.dep,n=Qr,r=La;Qr=t,La=!0;try{$8(t);const s=t.fn(t._value);(e.version===0||oo(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Qr=n,La=r,V8(t),t.flags&=-3}}function gT(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)gT(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function hue(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let La=!0;const G8=[];function _c(){G8.push(La),La=!1}function wc(){const t=G8.pop();La=t===void 0?!0:t}function tP(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Qr;Qr=void 0;try{e()}finally{Qr=n}}}let Og=0,fue=class{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class X1{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Qr||!La||Qr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Qr)n=this.activeLink=new fue(Qr,this),Qr.deps?(n.prevDep=Qr.depsTail,Qr.depsTail.nextDep=n,Qr.depsTail=n):Qr.deps=Qr.depsTail=n,W8(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Qr.depsTail,n.nextDep=void 0,Qr.depsTail.nextDep=n,Qr.depsTail=n,Qr.deps===n&&(Qr.deps=r)}return n}trigger(e){this.version++,Og++,this.notify(e)}notify(e){pT();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{mT()}}}function W8(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)W8(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Fb=new WeakMap,Gd=Symbol(""),A2=Symbol(""),Ng=Symbol("");function Si(t,e,n){if(La&&Qr){let r=Fb.get(t);r||Fb.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new X1),s.map=r,s.key=n),s.track()}}function tc(t,e,n,r,s,i){const o=Fb.get(t);if(!o){Og++;return}const a=l=>{l&&l.trigger()};if(pT(),e==="clear")o.forEach(a);else{const l=rt(t),c=l&&dT(n);if(l&&n==="length"){const u=Number(r);o.forEach((d,h)=>{(h==="length"||h===Ng||!Ua(h)&&h>=u)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Ng)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Gd)),$f(t)&&a(o.get(A2)));break;case"delete":l||(a(o.get(Gd)),$f(t)&&a(o.get(A2)));break;case"set":$f(t)&&a(o.get(Gd));break}}mT()}function pue(t,e){const n=Fb.get(t);return n&&n.get(e)}function af(t){const e=gr(t);return e===t?e:(Si(e,"iterate",Ng),ea(t)?e:e.map(ai))}function Z1(t){return Si(t=gr(t),"iterate",Ng),t}const mue={__proto__:null,[Symbol.iterator](){return px(this,Symbol.iterator,ai)},concat(...t){return af(this).concat(...t.map(e=>rt(e)?af(e):e))},entries(){return px(this,"entries",t=>(t[1]=ai(t[1]),t))},every(t,e){return ql(this,"every",t,e,void 0,arguments)},filter(t,e){return ql(this,"filter",t,e,n=>n.map(ai),arguments)},find(t,e){return ql(this,"find",t,e,ai,arguments)},findIndex(t,e){return ql(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ql(this,"findLast",t,e,ai,arguments)},findLastIndex(t,e){return ql(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ql(this,"forEach",t,e,void 0,arguments)},includes(...t){return mx(this,"includes",t)},indexOf(...t){return mx(this,"indexOf",t)},join(t){return af(this).join(t)},lastIndexOf(...t){return mx(this,"lastIndexOf",t)},map(t,e){return ql(this,"map",t,e,void 0,arguments)},pop(){return ym(this,"pop")},push(...t){return ym(this,"push",t)},reduce(t,...e){return nP(this,"reduce",t,e)},reduceRight(t,...e){return nP(this,"reduceRight",t,e)},shift(){return ym(this,"shift")},some(t,e){return ql(this,"some",t,e,void 0,arguments)},splice(...t){return ym(this,"splice",t)},toReversed(){return af(this).toReversed()},toSorted(t){return af(this).toSorted(t)},toSpliced(...t){return af(this).toSpliced(...t)},unshift(...t){return ym(this,"unshift",t)},values(){return px(this,"values",ai)}};function px(t,e,n){const r=Z1(t),s=r[e]();return r!==t&&!ea(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const gue=Array.prototype;function ql(t,e,n,r,s,i){const o=Z1(t),a=o!==t&&!ea(t),l=o[e];if(l!==gue[e]){const d=l.apply(t,i);return a?ai(d):d}let c=n;o!==t&&(a?c=function(d,h){return n.call(this,ai(d),h,t)}:n.length>2&&(c=function(d,h){return n.call(this,d,h,t)}));const u=l.call(o,c,r);return a&&s?s(u):u}function nP(t,e,n,r){const s=Z1(t);let i=n;return s!==t&&(ea(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,ai(a),l,t)}),s[e](i,...r)}function mx(t,e,n){const r=gr(t);Si(r,"iterate",Ng);const s=r[e](...n);return(s===-1||s===!1)&&bT(n[0])?(n[0]=gr(n[0]),r[e](...n)):s}function ym(t,e,n=[]){_c(),pT();const r=gr(t)[e].apply(t,n);return mT(),wc(),r}const vue=lT("__proto__,__v_isRef,__isVue"),j8=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ua));function yue(t){Ua(t)||(t=String(t));const e=gr(this);return Si(e,"has",t),e.hasOwnProperty(t)}class K8{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Aue:Z8:i?X8:Y8).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=rt(e);if(!s){let l;if(o&&(l=mue[n]))return l;if(n==="hasOwnProperty")return yue}const a=Reflect.get(e,n,yr(e)?e:r);return(Ua(n)?j8.has(n):vue(n))||(s||Si(e,"get",n),i)?a:yr(a)?o&&dT(n)?a:a.value:un(a)?s?Ku(a):Ln(a):a}}class q8 extends K8{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=Du(i);if(!ea(r)&&!Du(r)&&(i=gr(i),r=gr(r)),!rt(e)&&yr(i)&&!yr(r))return l?!1:(i.value=r,!0)}const o=rt(e)&&dT(n)?Number(n)<e.length:Kn(e,n),a=Reflect.set(e,n,r,yr(e)?e:s);return e===gr(s)&&(o?oo(r,i)&&tc(e,"set",n,r):tc(e,"add",n,r)),a}deleteProperty(e,n){const r=Kn(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&tc(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Ua(n)||!j8.has(n))&&Si(e,"has",n),r}ownKeys(e){return Si(e,"iterate",rt(e)?"length":Gd),Reflect.ownKeys(e)}}class bue extends K8{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const _ue=new q8,wue=new bue,xue=new q8(!0);const k2=t=>t,ny=t=>Reflect.getPrototypeOf(t);function Sue(t,e,n){return function(...r){const s=this.__v_raw,i=gr(s),o=$f(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...r),u=n?k2:e?Bb:ai;return!e&&Si(i,"iterate",l?A2:Gd),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function ry(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Eue(t,e){const n={get(s){const i=this.__v_raw,o=gr(i),a=gr(s);t||(oo(s,a)&&Si(o,"get",s),Si(o,"get",a));const{has:l}=ny(o),c=e?k2:t?Bb:ai;if(l.call(o,s))return c(i.get(s));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Si(gr(s),"iterate",Gd),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=gr(i),a=gr(s);return t||(oo(s,a)&&Si(o,"has",s),Si(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=gr(a),c=e?k2:t?Bb:ai;return!t&&Si(l,"iterate",Gd),a.forEach((u,d)=>s.call(i,c(u),c(d),o))}};return Ns(n,t?{add:ry("add"),set:ry("set"),delete:ry("delete"),clear:ry("clear")}:{add(s){!e&&!ea(s)&&!Du(s)&&(s=gr(s));const i=gr(this);return ny(i).has.call(i,s)||(i.add(s),tc(i,"add",s,s)),this},set(s,i){!e&&!ea(i)&&!Du(i)&&(i=gr(i));const o=gr(this),{has:a,get:l}=ny(o);let c=a.call(o,s);c||(s=gr(s),c=a.call(o,s));const u=l.call(o,s);return o.set(s,i),c?oo(i,u)&&tc(o,"set",s,i):tc(o,"add",s,i),this},delete(s){const i=gr(this),{has:o,get:a}=ny(i);let l=o.call(i,s);l||(s=gr(s),l=o.call(i,s)),a&&a.call(i,s);const c=i.delete(s);return l&&tc(i,"delete",s,void 0),c},clear(){const s=gr(this),i=s.size!==0,o=s.clear();return i&&tc(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Sue(s,t,e)}),n}function vT(t,e){const n=Eue(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Kn(n,s)&&s in r?n:r,s,i)}const Cue={get:vT(!1,!1)},Tue={get:vT(!1,!0)},Mue={get:vT(!0,!1)};const Y8=new WeakMap,X8=new WeakMap,Z8=new WeakMap,Aue=new WeakMap;function kue(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Iue(t){return t.__v_skip||!Object.isExtensible(t)?0:kue(eue(t))}function Ln(t){return Du(t)?t:yT(t,!1,_ue,Cue,Y8)}function J8(t){return yT(t,!1,xue,Tue,X8)}function Ku(t){return yT(t,!0,wue,Mue,Z8)}function yT(t,e,n,r,s){if(!un(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Iue(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function Vf(t){return Du(t)?Vf(t.__v_raw):!!(t&&t.__v_isReactive)}function Du(t){return!!(t&&t.__v_isReadonly)}function ea(t){return!!(t&&t.__v_isShallow)}function bT(t){return t?!!t.__v_raw:!1}function gr(t){const e=t&&t.__v_raw;return e?gr(e):t}function Oa(t){return!Kn(t,"__v_skip")&&Object.isExtensible(t)&&C2(t,"__v_skip",!0),t}const ai=t=>un(t)?Ln(t):t,Bb=t=>un(t)?Ku(t):t;function yr(t){return t?t.__v_isRef===!0:!1}function H(t){return Q8(t,!1)}function br(t){return Q8(t,!0)}function Q8(t,e){return yr(t)?t:new Pue(t,e)}class Pue{constructor(e,n){this.dep=new X1,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:gr(e),this._value=n?e:ai(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||ea(e)||Du(e);e=r?e:gr(e),oo(e,n)&&(this._rawValue=e,this._value=r?e:ai(e),this.dep.trigger())}}function Xy(t){t.dep&&t.dep.trigger()}function p(t){return yr(t)?t.value:t}const Rue={get:(t,e,n)=>e==="__v_raw"?t:p(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return yr(s)&&!yr(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function eF(t){return Vf(t)?t:new Proxy(t,Rue)}class Lue{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new X1,{get:r,set:s}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function _T(t){return new Lue(t)}function Ds(t){const e=rt(t)?new Array(t.length):{};for(const n in t)e[n]=tF(t,n);return e}class Oue{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return pue(gr(this._object),this._key)}}class Nue{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Yn(t,e,n){return yr(t)?t:Lt(t)?new Nue(t):un(t)&&arguments.length>1?tF(t,e,n):H(t)}function tF(t,e,n){const r=t[e];return yr(r)?r:new Oue(t,e,n)}class Due{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new X1(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Og-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Qr!==this)return z8(this,!0),!0}get value(){const e=this.dep.track();return H8(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Fue(t,e,n=!1){let r,s;return Lt(t)?r=t:(r=t.get,s=t.set),new Due(r,s,n)}const sy={},Ub=new WeakMap;let _d;function Bue(t,e=!1,n=_d){if(n){let r=Ub.get(n);r||Ub.set(n,r=[]),r.push(t)}}function Uue(t,e,n=Mr){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=n,c=w=>s?w:ea(w)||s===!1||s===0?nc(w,1):nc(w);let u,d,h,f,m=!1,v=!1;if(yr(t)?(d=()=>t.value,m=ea(t)):Vf(t)?(d=()=>c(t),m=!0):rt(t)?(v=!0,m=t.some(w=>Vf(w)||ea(w)),d=()=>t.map(w=>{if(yr(w))return w.value;if(Vf(w))return c(w);if(Lt(w))return l?l(w,2):w()})):Lt(t)?e?d=l?()=>l(t,2):t:d=()=>{if(h){_c();try{h()}finally{wc()}}const w=_d;_d=u;try{return l?l(t,3,[f]):t(f)}finally{_d=w}}:d=er,e&&s){const w=d,E=s===!0?1/0:s;d=()=>nc(w(),E)}const y=hT(),g=()=>{u.stop(),y&&y.active&&uT(y.effects,u)};if(i&&e){const w=e;e=(...E)=>{w(...E),g()}}let S=v?new Array(t.length).fill(sy):sy;const _=w=>{if(!(!(u.flags&1)||!u.dirty&&!w))if(e){const E=u.run();if(s||m||(v?E.some((C,T)=>oo(C,S[T])):oo(E,S))){h&&h();const C=_d;_d=u;try{const T=[E,S===sy?void 0:v&&S[0]===sy?[]:S,f];S=E,l?l(e,3,T):e(...T)}finally{_d=C}}}else u.run()};return a&&a(_),u=new B8(d),u.scheduler=o?()=>o(_,!1):_,f=w=>Bue(w,!1,u),h=u.onStop=()=>{const w=Ub.get(u);if(w){if(l)l(w,4);else for(const E of w)E();Ub.delete(u)}},e?r?_(!0):S=u.run():o?o(_.bind(null,!0),!0):u.run(),g.pause=u.pause.bind(u),g.resume=u.resume.bind(u),g.stop=g,g}function nc(t,e=1/0,n){if(e<=0||!un(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,yr(t))nc(t.value,e,n);else if(rt(t))for(let r=0;r<t.length;r++)nc(t[r],e,n);else if(K1(t)||$f(t))t.forEach(r=>{nc(r,e,n)});else if(Lg(t)){for(const r in t)nc(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&nc(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Mv(t,e,n,r){try{return r?t(...r):t()}catch(s){J1(s,e,n)}}function za(t,e,n,r){if(Lt(t)){const s=Mv(t,e,n,r);return s&&th(s)&&s.catch(i=>{J1(i,e,n)}),s}if(rt(t)){const s=[];for(let i=0;i<t.length;i++)s.push(za(t[i],e,n,r));return s}}function J1(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Mr;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,l,c)===!1)return}a=a.parent}if(i){_c(),Mv(i,null,10,[t,l,c]),wc();return}}zue(t,n,s,r,o)}function zue(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Gi=[];let al=-1;const Hf=[];let mu=null,wf=0;const nF=Promise.resolve();let zb=null;function Tt(t){const e=zb||nF;return t?e.then(this?t.bind(this):t):e}function $ue(t){let e=al+1,n=Gi.length;for(;e<n;){const r=e+n>>>1,s=Gi[r],i=Dg(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function wT(t){if(!(t.flags&1)){const e=Dg(t),n=Gi[Gi.length-1];!n||!(t.flags&2)&&e>=Dg(n)?Gi.push(t):Gi.splice($ue(e),0,t),t.flags|=1,rF()}}function rF(){zb||(zb=nF.then(oF))}function sF(t){rt(t)?Hf.push(...t):mu&&t.id===-1?mu.splice(wf+1,0,t):t.flags&1||(Hf.push(t),t.flags|=1),rF()}function rP(t,e,n=al+1){for(;n<Gi.length;n++){const r=Gi[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Gi.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function iF(t){if(Hf.length){const e=[...new Set(Hf)].sort((n,r)=>Dg(n)-Dg(r));if(Hf.length=0,mu){mu.push(...e);return}for(mu=e,wf=0;wf<mu.length;wf++){const n=mu[wf];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}mu=null,wf=0}}const Dg=t=>t.id==null?t.flags&2?-1:1/0:t.id;function oF(t){try{for(al=0;al<Gi.length;al++){const e=Gi[al];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Mv(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;al<Gi.length;al++){const e=Gi[al];e&&(e.flags&=-2)}al=-1,Gi.length=0,iF(),zb=null,(Gi.length||Hf.length)&&oF()}}let ci=null,Q1=null;function $b(t){const e=ci;return ci=t,Q1=t&&t.type.__scopeId||null,e}function aF(t){Q1=t}function lF(){Q1=null}function me(t,e=ci,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&gP(-1);const i=$b(e);let o;try{o=t(...s)}finally{$b(i),r._d&&gP(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function cn(t,e){if(ci===null)return t;const n=l_(ci),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=Mr]=e[s];i&&(Lt(i)&&(i={mounted:i,updated:i}),i.deep&&nc(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function pd(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(_c(),za(l,n,8,[t.el,a,t,e]),wc())}}const cF=Symbol("_vte"),uF=t=>t.__isTeleport,Qm=t=>t&&(t.disabled||t.disabled===""),sP=t=>t&&(t.defer||t.defer===""),iP=t=>typeof SVGElement<"u"&&t instanceof SVGElement,oP=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,I2=(t,e)=>{const n=t&&t.to;return kt(n)?e?e(n):null:n},dF={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,a,l,c){const{mc:u,pc:d,pbc:h,o:{insert:f,querySelector:m,createText:v,createComment:y}}=c,g=Qm(e.props);let{shapeFlag:S,children:_,dynamicChildren:w}=e;if(t==null){const E=e.el=v(""),C=e.anchor=v("");f(E,n,r),f(C,n,r);const T=(k,M)=>{S&16&&(s&&s.isCE&&(s.ce._teleportTarget=k),u(_,k,M,s,i,o,a,l))},I=()=>{const k=e.target=I2(e.props,m),M=hF(k,e,v,f);k&&(o!=="svg"&&iP(k)?o="svg":o!=="mathml"&&oP(k)&&(o="mathml"),g||(T(k,M),Zy(e,!1)))};g&&(T(n,C),Zy(e,!0)),sP(e.props)?(e.el.__isMounted=!1,Vi(()=>{I(),delete e.el.__isMounted},i)):I()}else{if(sP(e.props)&&t.el.__isMounted===!1){Vi(()=>{dF.process(t,e,n,r,s,i,o,a,l,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const E=e.anchor=t.anchor,C=e.target=t.target,T=e.targetAnchor=t.targetAnchor,I=Qm(t.props),k=I?n:C,M=I?E:T;if(o==="svg"||iP(C)?o="svg":(o==="mathml"||oP(C))&&(o="mathml"),w?(h(t.dynamicChildren,w,k,s,i,o,a),MT(t,e,!0)):l||d(t,e,k,M,s,i,o,a,!1),g)I?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):iy(e,n,E,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const L=e.target=I2(e.props,m);L&&iy(e,L,null,c,0)}else I&&iy(e,C,T,c,1);Zy(e,g)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:d,props:h}=t;if(d&&(s(c),s(u)),i&&s(l),o&16){const f=i||!Qm(h);for(let m=0;m<a.length;m++){const v=a[m];r(v,e,n,f,!!v.dynamicChildren)}}},move:iy,hydrate:Vue};function iy(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,d=i===2;if(d&&r(o,e,n),(!d||Qm(u))&&l&16)for(let h=0;h<c.length;h++)s(c[h],e,n,2);d&&r(a,e,n)}function Vue(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},d){const h=e.target=I2(e.props,l);if(h){const f=Qm(e.props),m=h._lpa||h.firstChild;if(e.shapeFlag&16)if(f)e.anchor=d(o(t),e,a(t),n,r,s,i),e.targetStart=m,e.targetAnchor=m&&o(m);else{e.anchor=o(t);let v=m;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")e.targetStart=v;else if(v.data==="teleport anchor"){e.targetAnchor=v,h._lpa=e.targetAnchor&&o(e.targetAnchor);break}}v=o(v)}e.targetAnchor||hF(h,e,u,c),d(m&&o(m),e,h,n,r,s,i)}Zy(e,f)}return e.anchor&&o(e.anchor)}const Hue=dF;function Zy(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function hF(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[cF]=i,t&&(r(s,t),r(i,t)),i}const gu=Symbol("_leaveCb"),oy=Symbol("_enterCb");function fF(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Zt(()=>{t.isMounted=!0}),Xn(()=>{t.isUnmounting=!0}),t}const Go=[Function,Array],pF={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Go,onEnter:Go,onAfterEnter:Go,onEnterCancelled:Go,onBeforeLeave:Go,onLeave:Go,onAfterLeave:Go,onLeaveCancelled:Go,onBeforeAppear:Go,onAppear:Go,onAfterAppear:Go,onAppearCancelled:Go},mF=t=>{const e=t.subTree;return e.component?mF(e.component):e},Gue={name:"BaseTransition",props:pF,setup(t,{slots:e}){const n=tn(),r=fF();return()=>{const s=e.default&&xT(e.default(),!0);if(!s||!s.length)return;const i=gF(s),o=gr(t),{mode:a}=o;if(r.isLeaving)return gx(i);const l=aP(i);if(!l)return gx(i);let c=Fg(l,o,r,n,d=>c=d);l.type!==gs&&nh(l,c);let u=n.subTree&&aP(n.subTree);if(u&&u.type!==gs&&!Md(l,u)&&mF(n).type!==gs){let d=Fg(u,o,r,n);if(nh(u,d),a==="out-in"&&l.type!==gs)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,u=void 0},gx(i);a==="in-out"&&l.type!==gs?d.delayLeave=(h,f,m)=>{const v=vF(r,u);v[String(u.key)]=u,h[gu]=()=>{f(),h[gu]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{m(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function gF(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==gs){e=n;break}}return e}const Wue=Gue;function vF(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Fg(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:f,onAfterLeave:m,onLeaveCancelled:v,onBeforeAppear:y,onAppear:g,onAfterAppear:S,onAppearCancelled:_}=e,w=String(t.key),E=vF(n,t),C=(k,M)=>{k&&za(k,r,9,M)},T=(k,M)=>{const L=M[1];C(k,M),rt(k)?k.every(N=>N.length<=1)&&L():k.length<=1&&L()},I={mode:o,persisted:a,beforeEnter(k){let M=l;if(!n.isMounted)if(i)M=y||l;else return;k[gu]&&k[gu](!0);const L=E[w];L&&Md(t,L)&&L.el[gu]&&L.el[gu](),C(M,[k])},enter(k){let M=c,L=u,N=d;if(!n.isMounted)if(i)M=g||c,L=S||u,N=_||d;else return;let G=!1;const V=k[oy]=X=>{G||(G=!0,X?C(N,[k]):C(L,[k]),I.delayedLeave&&I.delayedLeave(),k[oy]=void 0)};M?T(M,[k,V]):V()},leave(k,M){const L=String(t.key);if(k[oy]&&k[oy](!0),n.isUnmounting)return M();C(h,[k]);let N=!1;const G=k[gu]=V=>{N||(N=!0,M(),V?C(v,[k]):C(m,[k]),k[gu]=void 0,E[L]===t&&delete E[L])};E[L]=t,f?T(f,[k,G]):G()},clone(k){const M=Fg(k,e,n,r,s);return s&&s(M),M}};return I}function gx(t){if(e_(t))return t=xc(t),t.children=null,t}function aP(t){if(!e_(t))return uF(t.type)&&t.children?gF(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Lt(n.default))return n.default()}}function nh(t,e){t.shapeFlag&6&&t.component?(t.transition=e,nh(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function xT(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===xt?(o.patchFlag&128&&s++,r=r.concat(xT(o.children,e,a))):(e||o.type!==gs)&&r.push(a!=null?xc(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function de(t,e){return Lt(t)?Ns({name:t.name},e,{setup:t}):t}function yF(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function eg(t,e,n,r,s=!1){if(rt(t)){t.forEach((m,v)=>eg(m,e&&(rt(e)?e[v]:e),n,r,s));return}if(Gf(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&eg(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?l_(r.component):r.el,o=s?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===Mr?a.refs={}:a.refs,d=a.setupState,h=gr(d),f=d===Mr?()=>!1:m=>Kn(h,m);if(c!=null&&c!==l&&(kt(c)?(u[c]=null,f(c)&&(d[c]=null)):yr(c)&&(c.value=null)),Lt(l))Mv(l,a,12,[o,u]);else{const m=kt(l),v=yr(l);if(m||v){const y=()=>{if(t.f){const g=m?f(l)?d[l]:u[l]:l.value;s?rt(g)&&uT(g,i):rt(g)?g.includes(i)||g.push(i):m?(u[l]=[i],f(l)&&(d[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else m?(u[l]=o,f(l)&&(d[l]=o)):v&&(l.value=o,t.k&&(u[t.k]=o))};o?(y.id=-1,Vi(y,n)):y()}}}Y1().requestIdleCallback;Y1().cancelIdleCallback;const Gf=t=>!!t.type.__asyncLoader,e_=t=>t.type.__isKeepAlive;function t_(t,e){_F(t,"a",e)}function bF(t,e){_F(t,"da",e)}function _F(t,e,n=Ei){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(n_(e,r,n),n){let s=n.parent;for(;s&&s.parent;)e_(s.parent.vnode)&&jue(r,e,n,s),s=s.parent}}function jue(t,e,n,r){const s=n_(e,t,r,!0);yo(()=>{uT(r[e],s)},n)}function n_(t,e,n=Ei,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{_c();const a=Av(n),l=za(e,n,t,o);return a(),wc(),l});return r?s.unshift(i):s.push(i),i}}const Ic=t=>(e,n=Ei)=>{(!Ug||t==="sp")&&n_(t,(...r)=>e(...r),n)},r_=Ic("bm"),Zt=Ic("m"),s_=Ic("bu"),qa=Ic("u"),Xn=Ic("bum"),yo=Ic("um"),Kue=Ic("sp"),que=Ic("rtg"),Yue=Ic("rtc");function Xue(t,e=Ei){n_("ec",t,e)}const ST="components",Zue="directives";function Xt(t,e){return ET(ST,t,!0,e)||t}const wF=Symbol.for("v-ndc");function mn(t){return kt(t)?ET(ST,t,!1)||t:t||wF}function i_(t){return ET(Zue,t)}function ET(t,e,n=!0,r=!1){const s=ci||Ei;if(s){const i=s.type;if(t===ST){const a=Nde(i,!1);if(a&&(a===e||a===ki(e)||a===Tv(ki(e))))return i}const o=lP(s[t]||i[t],e)||lP(s.appContext[t],e);return!o&&r?i:o}}function lP(t,e){return t&&(t[e]||t[ki(e)]||t[Tv(ki(e))])}function _n(t,e,n,r){let s;const i=n,o=rt(t);if(o||kt(t)){const a=o&&Vf(t);let l=!1,c=!1;a&&(l=!ea(t),c=Du(t),t=Z1(t)),s=new Array(t.length);for(let u=0,d=t.length;u<d;u++)s[u]=e(l?c?Bb(ai(t[u])):ai(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(un(t))if(t[Symbol.iterator])s=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=e(t[u],u,l,i)}}else s=[];return s}function go(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(rt(r))for(let s=0;s<r.length;s++)t[r[s].name]=r[s].fn;else r&&(t[r.name]=r.key?(...s)=>{const i=r.fn(...s);return i&&(i.key=r.key),i}:r.fn)}return t}function Ae(t,e,n={},r,s){if(ci.ce||ci.parent&&Gf(ci.parent)&&ci.parent.ce)return e!=="default"&&(n.name=e),D(),Le(xt,null,[ae("slot",n,r&&r())],64);let i=t[e];i&&i._c&&(i._d=!1),D();const o=i&&xF(i(n)),a=n.key||o&&o.key,l=Le(xt,{key:(a&&!Ua(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function xF(t){return t.some(e=>wr(e)?!(e.type===gs||e.type===xt&&!xF(e.children)):!0)?t:null}function Jue(t,e){const n={};for(const r in t)n[Xm(r)]=t[r];return n}const P2=t=>t?VF(t)?l_(t):P2(t.parent):null,tg=Ns(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>P2(t.parent),$root:t=>P2(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>CF(t),$forceUpdate:t=>t.f||(t.f=()=>{wT(t.update)}),$nextTick:t=>t.n||(t.n=Tt.bind(t.proxy)),$watch:t=>_de.bind(t)}),vx=(t,e)=>t!==Mr&&!t.__isScriptSetup&&Kn(t,e),Que={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(vx(r,e))return o[e]=1,r[e];if(s!==Mr&&Kn(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&Kn(c,e))return o[e]=3,i[e];if(n!==Mr&&Kn(n,e))return o[e]=4,n[e];R2&&(o[e]=0)}}const u=tg[e];let d,h;if(u)return e==="$attrs"&&Si(t.attrs,"get",""),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==Mr&&Kn(n,e))return o[e]=4,n[e];if(h=l.config.globalProperties,Kn(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return vx(s,e)?(s[e]=n,!0):r!==Mr&&Kn(r,e)?(r[e]=n,!0):Kn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==Mr&&Kn(t,o)||vx(e,o)||(a=i[0])&&Kn(a,o)||Kn(r,o)||Kn(tg,o)||Kn(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Kn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function bs(){return SF().slots}function Pc(){return SF().attrs}function SF(t){const e=tn();return e.setupContext||(e.setupContext=GF(e))}function Vb(t){return rt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function up(t,e){return!t||!e?t||e:rt(t)&&rt(e)?t.concat(e):Ns({},Vb(t),Vb(e))}let R2=!0;function ede(t){const e=CF(t),n=t.proxy,r=t.ctx;R2=!1,e.beforeCreate&&cP(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:m,activated:v,deactivated:y,beforeDestroy:g,beforeUnmount:S,destroyed:_,unmounted:w,render:E,renderTracked:C,renderTriggered:T,errorCaptured:I,serverPrefetch:k,expose:M,inheritAttrs:L,components:N,directives:G,filters:V}=e;if(c&&tde(c,r,null),o)for(const $ in o){const O=o[$];Lt(O)&&(r[$]=O.bind(n))}if(s){const $=s.call(n,n);un($)&&(t.data=Ln($))}if(R2=!0,i)for(const $ in i){const O=i[$],z=Lt(O)?O.bind(n,n):Lt(O.get)?O.get.bind(n,n):er,re=!Lt(O)&&Lt(O.set)?O.set.bind(n):er,q=R({get:z,set:re});Object.defineProperty(r,$,{enumerable:!0,configurable:!0,get:()=>q.value,set:le=>q.value=le})}if(a)for(const $ in a)EF(a[$],r,n,$);if(l){const $=Lt(l)?l.call(n):l;Reflect.ownKeys($).forEach(O=>{Mn(O,$[O])})}u&&cP(u,t,"c");function F($,O){rt(O)?O.forEach(z=>$(z.bind(n))):O&&$(O.bind(n))}if(F(r_,d),F(Zt,h),F(s_,f),F(qa,m),F(t_,v),F(bF,y),F(Xue,I),F(Yue,C),F(que,T),F(Xn,S),F(yo,w),F(Kue,k),rt(M))if(M.length){const $=t.exposed||(t.exposed={});M.forEach(O=>{Object.defineProperty($,O,{get:()=>n[O],set:z=>n[O]=z,enumerable:!0})})}else t.exposed||(t.exposed={});E&&t.render===er&&(t.render=E),L!=null&&(t.inheritAttrs=L),N&&(t.components=N),G&&(t.directives=G),k&&yF(t)}function tde(t,e,n=er){rt(t)&&(t=L2(t));for(const r in t){const s=t[r];let i;un(s)?"default"in s?i=_t(s.from||r,s.default,!0):i=_t(s.from||r):i=_t(s),yr(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function cP(t,e,n){za(rt(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function EF(t,e,n,r){let s=r.includes(".")?DF(n,r):()=>n[r];if(kt(t)){const i=e[t];Lt(i)&&Be(s,i)}else if(Lt(t))Be(s,t.bind(n));else if(un(t))if(rt(t))t.forEach(i=>EF(i,e,n,r));else{const i=Lt(t.handler)?t.handler.bind(n):e[t.handler];Lt(i)&&Be(s,i,t)}}function CF(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(c=>Hb(l,c,o,!0)),Hb(l,e,o)),un(e)&&i.set(e,l),l}function Hb(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Hb(t,i,n,!0),s&&s.forEach(o=>Hb(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=nde[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const nde={data:uP,props:dP,emits:dP,methods:Nm,computed:Nm,beforeCreate:Bi,created:Bi,beforeMount:Bi,mounted:Bi,beforeUpdate:Bi,updated:Bi,beforeDestroy:Bi,beforeUnmount:Bi,destroyed:Bi,unmounted:Bi,activated:Bi,deactivated:Bi,errorCaptured:Bi,serverPrefetch:Bi,components:Nm,directives:Nm,watch:sde,provide:uP,inject:rde};function uP(t,e){return e?t?function(){return Ns(Lt(t)?t.call(this,this):t,Lt(e)?e.call(this,this):e)}:e:t}function rde(t,e){return Nm(L2(t),L2(e))}function L2(t){if(rt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Bi(t,e){return t?[...new Set([].concat(t,e))]:e}function Nm(t,e){return t?Ns(Object.create(null),t,e):e}function dP(t,e){return t?rt(t)&&rt(e)?[...new Set([...t,...e])]:Ns(Object.create(null),Vb(t),Vb(e??{})):e}function sde(t,e){if(!t)return e;if(!e)return t;const n=Ns(Object.create(null),t);for(const r in e)n[r]=Bi(t[r],e[r]);return n}function TF(){return{app:null,config:{isNativeTag:Jce,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ide=0;function ode(t,e){return function(r,s=null){Lt(r)||(r=Ns({},r)),s!=null&&!un(s)&&(s=null);const i=TF(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:ide++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Fde,get config(){return i.config},set config(u){},use(u,...d){return o.has(u)||(u&&Lt(u.install)?(o.add(u),u.install(c,...d)):Lt(u)&&(o.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,h){if(!l){const f=c._ceVNode||ae(r,s);return f.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),t(f,u,h),l=!0,c._container=u,u.__vue_app__=c,l_(f.component)}},onUnmount(u){a.push(u)},unmount(){l&&(za(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=Wf;Wf=c;try{return u()}finally{Wf=d}}};return c}}let Wf=null;function Mn(t,e){if(Ei){let n=Ei.provides;const r=Ei.parent&&Ei.parent.provides;r===n&&(n=Ei.provides=Object.create(r)),n[t]=e}}function _t(t,e,n=!1){const r=tn();if(r||Wf){let s=Wf?Wf._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Lt(e)?e.call(r&&r.proxy):e}}const MF={},AF=()=>Object.create(MF),kF=t=>Object.getPrototypeOf(t)===MF;function ade(t,e,n,r=!1){const s={},i=AF();t.propsDefaults=Object.create(null),IF(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:J8(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function lde(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=gr(s),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(a_(t.emitsOptions,h))continue;const f=e[h];if(l)if(Kn(i,h))f!==i[h]&&(i[h]=f,c=!0);else{const m=ki(h);s[m]=O2(l,a,m,f,t,!1)}else f!==i[h]&&(i[h]=f,c=!0)}}}else{IF(t,e,s,i)&&(c=!0);let u;for(const d in a)(!e||!Kn(e,d)&&((u=Il(d))===d||!Kn(e,u)))&&(l?n&&(n[d]!==void 0||n[u]!==void 0)&&(s[d]=O2(l,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!Kn(e,d))&&(delete i[d],c=!0)}c&&tc(t.attrs,"set","")}function IF(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ym(l))continue;const c=e[l];let u;s&&Kn(s,u=ki(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:a_(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=gr(n),c=a||Mr;for(let u=0;u<i.length;u++){const d=i[u];n[d]=O2(s,l,d,c[d],t,!Kn(c,d))}}return o}function O2(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Kn(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Lt(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const u=Av(s);r=c[n]=l.call(null,e),u()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Il(n))&&(r=!0))}return r}const cde=new WeakMap;function PF(t,e,n=!1){const r=n?cde:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!Lt(t)){const u=d=>{l=!0;const[h,f]=PF(d,e,!0);Ns(o,h),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return un(t)&&r.set(t,zf),zf;if(rt(i))for(let u=0;u<i.length;u++){const d=ki(i[u]);hP(d)&&(o[d]=Mr)}else if(i)for(const u in i){const d=ki(u);if(hP(d)){const h=i[u],f=o[d]=rt(h)||Lt(h)?{type:h}:Ns({},h),m=f.type;let v=!1,y=!0;if(rt(m))for(let g=0;g<m.length;++g){const S=m[g],_=Lt(S)&&S.name;if(_==="Boolean"){v=!0;break}else _==="String"&&(y=!1)}else v=Lt(m)&&m.name==="Boolean";f[0]=v,f[1]=y,(v||Kn(f,"default"))&&a.push(d)}}const c=[o,a];return un(t)&&r.set(t,c),c}function hP(t){return t[0]!=="$"&&!Ym(t)}const CT=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",TT=t=>rt(t)?t.map(ul):[ul(t)],ude=(t,e,n)=>{if(e._n)return e;const r=me((...s)=>TT(e(...s)),n);return r._c=!1,r},RF=(t,e,n)=>{const r=t._ctx;for(const s in t){if(CT(s))continue;const i=t[s];if(Lt(i))e[s]=ude(s,i,r);else if(i!=null){const o=TT(i);e[s]=()=>o}}},LF=(t,e)=>{const n=TT(e);t.slots.default=()=>n},OF=(t,e,n)=>{for(const r in e)(n||!CT(r))&&(t[r]=e[r])},dde=(t,e,n)=>{const r=t.slots=AF();if(t.vnode.shapeFlag&32){const s=e.__;s&&C2(r,"__",s,!0);const i=e._;i?(OF(r,e,n),n&&C2(r,"_",i,!0)):RF(e,r)}else e&&LF(t,e)},hde=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Mr;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:OF(s,e,n):(i=!e.$stable,RF(e,s)),o=e}else e&&(LF(t,e),o={default:1});if(i)for(const a in s)!CT(a)&&o[a]==null&&delete s[a]},Vi=Tde;function fde(t){return pde(t)}function pde(t,e){const n=Y1();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=er,insertStaticContent:m}=t,v=(j,he,K,Fe=null,Oe=null,Re=null,te=void 0,oe=null,Ee=!!he.dynamicChildren)=>{if(j===he)return;j&&!Md(j,he)&&(Fe=ve(j),le(j,Oe,Re,!0),j=null),he.patchFlag===-2&&(Ee=!1,he.dynamicChildren=null);const{type:J,ref:Q,shapeFlag:_e}=he;switch(J){case vh:y(j,he,K,Fe);break;case gs:g(j,he,K,Fe);break;case Jy:j==null&&S(he,K,Fe,te);break;case xt:N(j,he,K,Fe,Oe,Re,te,oe,Ee);break;default:_e&1?E(j,he,K,Fe,Oe,Re,te,oe,Ee):_e&6?G(j,he,K,Fe,Oe,Re,te,oe,Ee):(_e&64||_e&128)&&J.process(j,he,K,Fe,Oe,Re,te,oe,Ee,nt)}Q!=null&&Oe?eg(Q,j&&j.ref,Re,he||j,!he):Q==null&&j&&j.ref!=null&&eg(j.ref,null,Re,j,!0)},y=(j,he,K,Fe)=>{if(j==null)r(he.el=a(he.children),K,Fe);else{const Oe=he.el=j.el;he.children!==j.children&&c(Oe,he.children)}},g=(j,he,K,Fe)=>{j==null?r(he.el=l(he.children||""),K,Fe):he.el=j.el},S=(j,he,K,Fe)=>{[j.el,j.anchor]=m(j.children,he,K,Fe,j.el,j.anchor)},_=({el:j,anchor:he},K,Fe)=>{let Oe;for(;j&&j!==he;)Oe=h(j),r(j,K,Fe),j=Oe;r(he,K,Fe)},w=({el:j,anchor:he})=>{let K;for(;j&&j!==he;)K=h(j),s(j),j=K;s(he)},E=(j,he,K,Fe,Oe,Re,te,oe,Ee)=>{he.type==="svg"?te="svg":he.type==="math"&&(te="mathml"),j==null?C(he,K,Fe,Oe,Re,te,oe,Ee):k(j,he,Oe,Re,te,oe,Ee)},C=(j,he,K,Fe,Oe,Re,te,oe)=>{let Ee,J;const{props:Q,shapeFlag:_e,transition:ie,dirs:Te}=j;if(Ee=j.el=o(j.type,Re,Q&&Q.is,Q),_e&8?u(Ee,j.children):_e&16&&I(j.children,Ee,null,Fe,Oe,yx(j,Re),te,oe),Te&&pd(j,null,Fe,"created"),T(Ee,j,j.scopeId,te,Fe),Q){for(const ut in Q)ut!=="value"&&!Ym(ut)&&i(Ee,ut,null,Q[ut],Re,Fe);"value"in Q&&i(Ee,"value",null,Q.value,Re),(J=Q.onVnodeBeforeMount)&&rl(J,Fe,j)}Te&&pd(j,null,Fe,"beforeMount");const We=mde(Oe,ie);We&&ie.beforeEnter(Ee),r(Ee,he,K),((J=Q&&Q.onVnodeMounted)||We||Te)&&Vi(()=>{J&&rl(J,Fe,j),We&&ie.enter(Ee),Te&&pd(j,null,Fe,"mounted")},Oe)},T=(j,he,K,Fe,Oe)=>{if(K&&f(j,K),Fe)for(let Re=0;Re<Fe.length;Re++)f(j,Fe[Re]);if(Oe){let Re=Oe.subTree;if(he===Re||UF(Re.type)&&(Re.ssContent===he||Re.ssFallback===he)){const te=Oe.vnode;T(j,te,te.scopeId,te.slotScopeIds,Oe.parent)}}},I=(j,he,K,Fe,Oe,Re,te,oe,Ee=0)=>{for(let J=Ee;J<j.length;J++){const Q=j[J]=oe?vu(j[J]):ul(j[J]);v(null,Q,he,K,Fe,Oe,Re,te,oe)}},k=(j,he,K,Fe,Oe,Re,te)=>{const oe=he.el=j.el;let{patchFlag:Ee,dynamicChildren:J,dirs:Q}=he;Ee|=j.patchFlag&16;const _e=j.props||Mr,ie=he.props||Mr;let Te;if(K&&md(K,!1),(Te=ie.onVnodeBeforeUpdate)&&rl(Te,K,he,j),Q&&pd(he,j,K,"beforeUpdate"),K&&md(K,!0),(_e.innerHTML&&ie.innerHTML==null||_e.textContent&&ie.textContent==null)&&u(oe,""),J?M(j.dynamicChildren,J,oe,K,Fe,yx(he,Oe),Re):te||O(j,he,oe,null,K,Fe,yx(he,Oe),Re,!1),Ee>0){if(Ee&16)L(oe,_e,ie,K,Oe);else if(Ee&2&&_e.class!==ie.class&&i(oe,"class",null,ie.class,Oe),Ee&4&&i(oe,"style",_e.style,ie.style,Oe),Ee&8){const We=he.dynamicProps;for(let ut=0;ut<We.length;ut++){const lt=We[ut],St=_e[lt],Ot=ie[lt];(Ot!==St||lt==="value")&&i(oe,lt,St,Ot,Oe,K)}}Ee&1&&j.children!==he.children&&u(oe,he.children)}else!te&&J==null&&L(oe,_e,ie,K,Oe);((Te=ie.onVnodeUpdated)||Q)&&Vi(()=>{Te&&rl(Te,K,he,j),Q&&pd(he,j,K,"updated")},Fe)},M=(j,he,K,Fe,Oe,Re,te)=>{for(let oe=0;oe<he.length;oe++){const Ee=j[oe],J=he[oe],Q=Ee.el&&(Ee.type===xt||!Md(Ee,J)||Ee.shapeFlag&198)?d(Ee.el):K;v(Ee,J,Q,null,Fe,Oe,Re,te,!0)}},L=(j,he,K,Fe,Oe)=>{if(he!==K){if(he!==Mr)for(const Re in he)!Ym(Re)&&!(Re in K)&&i(j,Re,he[Re],null,Oe,Fe);for(const Re in K){if(Ym(Re))continue;const te=K[Re],oe=he[Re];te!==oe&&Re!=="value"&&i(j,Re,oe,te,Oe,Fe)}"value"in K&&i(j,"value",he.value,K.value,Oe)}},N=(j,he,K,Fe,Oe,Re,te,oe,Ee)=>{const J=he.el=j?j.el:a(""),Q=he.anchor=j?j.anchor:a("");let{patchFlag:_e,dynamicChildren:ie,slotScopeIds:Te}=he;Te&&(oe=oe?oe.concat(Te):Te),j==null?(r(J,K,Fe),r(Q,K,Fe),I(he.children||[],K,Q,Oe,Re,te,oe,Ee)):_e>0&&_e&64&&ie&&j.dynamicChildren?(M(j.dynamicChildren,ie,K,Oe,Re,te,oe),(he.key!=null||Oe&&he===Oe.subTree)&&MT(j,he,!0)):O(j,he,K,Q,Oe,Re,te,oe,Ee)},G=(j,he,K,Fe,Oe,Re,te,oe,Ee)=>{he.slotScopeIds=oe,j==null?he.shapeFlag&512?Oe.ctx.activate(he,K,Fe,te,Ee):V(he,K,Fe,Oe,Re,te,Ee):X(j,he,Ee)},V=(j,he,K,Fe,Oe,Re,te)=>{const oe=j.component=Pde(j,Fe,Oe);if(e_(j)&&(oe.ctx.renderer=nt),Rde(oe,!1,te),oe.asyncDep){if(Oe&&Oe.registerDep(oe,F,te),!j.el){const Ee=oe.subTree=ae(gs);g(null,Ee,he,K),j.placeholder=Ee.el}}else F(oe,j,he,K,Oe,Re,te)},X=(j,he,K)=>{const Fe=he.component=j.component;if(Ede(j,he,K))if(Fe.asyncDep&&!Fe.asyncResolved){$(Fe,he,K);return}else Fe.next=he,Fe.update();else he.el=j.el,Fe.vnode=he},F=(j,he,K,Fe,Oe,Re,te)=>{const oe=()=>{if(j.isMounted){let{next:_e,bu:ie,u:Te,parent:We,vnode:ut}=j;{const ht=NF(j);if(ht){_e&&(_e.el=ut.el,$(j,_e,te)),ht.asyncDep.then(()=>{j.isUnmounted||oe()});return}}let lt=_e,St;md(j,!1),_e?(_e.el=ut.el,$(j,_e,te)):_e=ut,ie&&Yy(ie),(St=_e.props&&_e.props.onVnodeBeforeUpdate)&&rl(St,We,_e,ut),md(j,!0);const Ot=pP(j),et=j.subTree;j.subTree=Ot,v(et,Ot,d(et.el),ve(et),j,Oe,Re),_e.el=Ot.el,lt===null&&Cde(j,Ot.el),Te&&Vi(Te,Oe),(St=_e.props&&_e.props.onVnodeUpdated)&&Vi(()=>rl(St,We,_e,ut),Oe)}else{let _e;const{el:ie,props:Te}=he,{bm:We,m:ut,parent:lt,root:St,type:Ot}=j,et=Gf(he);md(j,!1),We&&Yy(We),!et&&(_e=Te&&Te.onVnodeBeforeMount)&&rl(_e,lt,he),md(j,!0);{St.ce&&St.ce._def.shadowRoot!==!1&&St.ce._injectChildStyle(Ot);const ht=j.subTree=pP(j);v(null,ht,K,Fe,j,Oe,Re),he.el=ht.el}if(ut&&Vi(ut,Oe),!et&&(_e=Te&&Te.onVnodeMounted)){const ht=he;Vi(()=>rl(_e,lt,ht),Oe)}(he.shapeFlag&256||lt&&Gf(lt.vnode)&&lt.vnode.shapeFlag&256)&&j.a&&Vi(j.a,Oe),j.isMounted=!0,he=K=Fe=null}};j.scope.on();const Ee=j.effect=new B8(oe);j.scope.off();const J=j.update=Ee.run.bind(Ee),Q=j.job=Ee.runIfDirty.bind(Ee);Q.i=j,Q.id=j.uid,Ee.scheduler=()=>wT(Q),md(j,!0),J()},$=(j,he,K)=>{he.component=j;const Fe=j.vnode.props;j.vnode=he,j.next=null,lde(j,he.props,Fe,K),hde(j,he.children,K),_c(),rP(j),wc()},O=(j,he,K,Fe,Oe,Re,te,oe,Ee=!1)=>{const J=j&&j.children,Q=j?j.shapeFlag:0,_e=he.children,{patchFlag:ie,shapeFlag:Te}=he;if(ie>0){if(ie&128){re(J,_e,K,Fe,Oe,Re,te,oe,Ee);return}else if(ie&256){z(J,_e,K,Fe,Oe,Re,te,oe,Ee);return}}Te&8?(Q&16&&we(J,Oe,Re),_e!==J&&u(K,_e)):Q&16?Te&16?re(J,_e,K,Fe,Oe,Re,te,oe,Ee):we(J,Oe,Re,!0):(Q&8&&u(K,""),Te&16&&I(_e,K,Fe,Oe,Re,te,oe,Ee))},z=(j,he,K,Fe,Oe,Re,te,oe,Ee)=>{j=j||zf,he=he||zf;const J=j.length,Q=he.length,_e=Math.min(J,Q);let ie;for(ie=0;ie<_e;ie++){const Te=he[ie]=Ee?vu(he[ie]):ul(he[ie]);v(j[ie],Te,K,null,Oe,Re,te,oe,Ee)}J>Q?we(j,Oe,Re,!0,!1,_e):I(he,K,Fe,Oe,Re,te,oe,Ee,_e)},re=(j,he,K,Fe,Oe,Re,te,oe,Ee)=>{let J=0;const Q=he.length;let _e=j.length-1,ie=Q-1;for(;J<=_e&&J<=ie;){const Te=j[J],We=he[J]=Ee?vu(he[J]):ul(he[J]);if(Md(Te,We))v(Te,We,K,null,Oe,Re,te,oe,Ee);else break;J++}for(;J<=_e&&J<=ie;){const Te=j[_e],We=he[ie]=Ee?vu(he[ie]):ul(he[ie]);if(Md(Te,We))v(Te,We,K,null,Oe,Re,te,oe,Ee);else break;_e--,ie--}if(J>_e){if(J<=ie){const Te=ie+1,We=Te<Q?he[Te].el:Fe;for(;J<=ie;)v(null,he[J]=Ee?vu(he[J]):ul(he[J]),K,We,Oe,Re,te,oe,Ee),J++}}else if(J>ie)for(;J<=_e;)le(j[J],Oe,Re,!0),J++;else{const Te=J,We=J,ut=new Map;for(J=We;J<=ie;J++){const Me=he[J]=Ee?vu(he[J]):ul(he[J]);Me.key!=null&&ut.set(Me.key,J)}let lt,St=0;const Ot=ie-We+1;let et=!1,ht=0;const Mt=new Array(Ot);for(J=0;J<Ot;J++)Mt[J]=0;for(J=Te;J<=_e;J++){const Me=j[J];if(St>=Ot){le(Me,Oe,Re,!0);continue}let be;if(Me.key!=null)be=ut.get(Me.key);else for(lt=We;lt<=ie;lt++)if(Mt[lt-We]===0&&Md(Me,he[lt])){be=lt;break}be===void 0?le(Me,Oe,Re,!0):(Mt[be-We]=J+1,be>=ht?ht=be:et=!0,v(Me,he[be],K,null,Oe,Re,te,oe,Ee),St++)}const ze=et?gde(Mt):zf;for(lt=ze.length-1,J=Ot-1;J>=0;J--){const Me=We+J,be=he[Me],Ve=he[Me+1],mt=Me+1<Q?Ve.el||Ve.placeholder:Fe;Mt[J]===0?v(null,be,K,mt,Oe,Re,te,oe,Ee):et&&(lt<0||J!==ze[lt]?q(be,K,mt,2):lt--)}}},q=(j,he,K,Fe,Oe=null)=>{const{el:Re,type:te,transition:oe,children:Ee,shapeFlag:J}=j;if(J&6){q(j.component.subTree,he,K,Fe);return}if(J&128){j.suspense.move(he,K,Fe);return}if(J&64){te.move(j,he,K,nt);return}if(te===xt){r(Re,he,K);for(let _e=0;_e<Ee.length;_e++)q(Ee[_e],he,K,Fe);r(j.anchor,he,K);return}if(te===Jy){_(j,he,K);return}if(Fe!==2&&J&1&&oe)if(Fe===0)oe.beforeEnter(Re),r(Re,he,K),Vi(()=>oe.enter(Re),Oe);else{const{leave:_e,delayLeave:ie,afterLeave:Te}=oe,We=()=>{j.ctx.isUnmounted?s(Re):r(Re,he,K)},ut=()=>{_e(Re,()=>{We(),Te&&Te()})};ie?ie(Re,We,ut):ut()}else r(Re,he,K)},le=(j,he,K,Fe=!1,Oe=!1)=>{const{type:Re,props:te,ref:oe,children:Ee,dynamicChildren:J,shapeFlag:Q,patchFlag:_e,dirs:ie,cacheIndex:Te}=j;if(_e===-2&&(Oe=!1),oe!=null&&(_c(),eg(oe,null,K,j,!0),wc()),Te!=null&&(he.renderCache[Te]=void 0),Q&256){he.ctx.deactivate(j);return}const We=Q&1&&ie,ut=!Gf(j);let lt;if(ut&&(lt=te&&te.onVnodeBeforeUnmount)&&rl(lt,he,j),Q&6)ye(j.component,K,Fe);else{if(Q&128){j.suspense.unmount(K,Fe);return}We&&pd(j,null,he,"beforeUnmount"),Q&64?j.type.remove(j,he,K,nt,Fe):J&&!J.hasOnce&&(Re!==xt||_e>0&&_e&64)?we(J,he,K,!1,!0):(Re===xt&&_e&384||!Oe&&Q&16)&&we(Ee,he,K),Fe&&fe(j)}(ut&&(lt=te&&te.onVnodeUnmounted)||We)&&Vi(()=>{lt&&rl(lt,he,j),We&&pd(j,null,he,"unmounted")},K)},fe=j=>{const{type:he,el:K,anchor:Fe,transition:Oe}=j;if(he===xt){se(K,Fe);return}if(he===Jy){w(j);return}const Re=()=>{s(K),Oe&&!Oe.persisted&&Oe.afterLeave&&Oe.afterLeave()};if(j.shapeFlag&1&&Oe&&!Oe.persisted){const{leave:te,delayLeave:oe}=Oe,Ee=()=>te(K,Re);oe?oe(j.el,Re,Ee):Ee()}else Re()},se=(j,he)=>{let K;for(;j!==he;)K=h(j),s(j),j=K;s(he)},ye=(j,he,K)=>{const{bum:Fe,scope:Oe,job:Re,subTree:te,um:oe,m:Ee,a:J,parent:Q,slots:{__:_e}}=j;fP(Ee),fP(J),Fe&&Yy(Fe),Q&&rt(_e)&&_e.forEach(ie=>{Q.renderCache[ie]=void 0}),Oe.stop(),Re&&(Re.flags|=8,le(te,j,he,K)),oe&&Vi(oe,he),Vi(()=>{j.isUnmounted=!0},he),he&&he.pendingBranch&&!he.isUnmounted&&j.asyncDep&&!j.asyncResolved&&j.suspenseId===he.pendingId&&(he.deps--,he.deps===0&&he.resolve())},we=(j,he,K,Fe=!1,Oe=!1,Re=0)=>{for(let te=Re;te<j.length;te++)le(j[te],he,K,Fe,Oe)},ve=j=>{if(j.shapeFlag&6)return ve(j.component.subTree);if(j.shapeFlag&128)return j.suspense.next();const he=h(j.anchor||j.el),K=he&&he[cF];return K?h(K):he};let xe=!1;const je=(j,he,K)=>{j==null?he._vnode&&le(he._vnode,null,null,!0):v(he._vnode||null,j,he,null,null,null,K),he._vnode=j,xe||(xe=!0,rP(),iF(),xe=!1)},nt={p:v,um:le,m:q,r:fe,mt:V,mc:I,pc:O,pbc:M,n:ve,o:t};return{render:je,hydrate:void 0,createApp:ode(je)}}function yx({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function md({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function mde(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function MT(t,e,n=!1){const r=t.children,s=e.children;if(rt(r)&&rt(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=vu(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&MT(o,a)),a.type===vh&&(a.el=o.el),a.type===gs&&!a.el&&(a.el=o.el)}}function gde(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function NF(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:NF(e)}function fP(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const vde=Symbol.for("v-scx"),yde=()=>_t(vde);function ui(t,e){return o_(t,null,e)}function bde(t,e){return o_(t,null,{flush:"sync"})}function Be(t,e,n){return o_(t,e,n)}function o_(t,e,n=Mr){const{immediate:r,deep:s,flush:i,once:o}=n,a=Ns({},n),l=e&&r||!e&&i!=="post";let c;if(Ug){if(i==="sync"){const f=yde();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=er,f.resume=er,f.pause=er,f}}const u=Ei;a.call=(f,m,v)=>za(f,u,m,v);let d=!1;i==="post"?a.scheduler=f=>{Vi(f,u&&u.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(f,m)=>{m?f():wT(f)}),a.augmentJob=f=>{e&&(f.flags|=4),d&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const h=Uue(t,e,a);return Ug&&(c?c.push(h):l&&h()),h}function _de(t,e,n){const r=this.proxy,s=kt(t)?t.includes(".")?DF(r,t):()=>r[t]:t.bind(r,r);let i;Lt(e)?i=e:(i=e.handler,n=e);const o=Av(this),a=o_(s,i.bind(r),n);return o(),a}function DF(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function AT(t,e,n=Mr){const r=tn(),s=ki(e),i=Il(e),o=FF(t,s),a=_T((l,c)=>{let u,d=Mr,h;return bde(()=>{const f=t[s];oo(u,f)&&(u=f,c())}),{get(){return l(),n.get?n.get(u):u},set(f){const m=n.set?n.set(f):f;if(!oo(m,u)&&!(d!==Mr&&oo(f,d)))return;const v=r.vnode.props;v&&(e in v||s in v||i in v)&&(`onUpdate:${e}`in v||`onUpdate:${s}`in v||`onUpdate:${i}`in v)||(u=f,c()),r.emit(`update:${e}`,m),oo(f,m)&&oo(f,d)&&!oo(m,h)&&c(),d=f,h=m}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||Mr:a,done:!1}:{done:!0}}}},a}const FF=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ki(e)}Modifiers`]||t[`${Il(e)}Modifiers`];function wde(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Mr;let s=n;const i=e.startsWith("update:"),o=i&&FF(r,e.slice(7));o&&(o.trim&&(s=n.map(u=>kt(u)?u.trim():u)),o.number&&(s=n.map(T2)));let a,l=r[a=Xm(e)]||r[a=Xm(ki(e))];!l&&i&&(l=r[a=Xm(Il(e))]),l&&za(l,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,za(c,t,6,s)}}function BF(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Lt(t)){const l=c=>{const u=BF(c,e,!0);u&&(a=!0,Ns(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(un(t)&&r.set(t,null),null):(rt(i)?i.forEach(l=>o[l]=null):Ns(o,i),un(t)&&r.set(t,o),o)}function a_(t,e){return!t||!j1(e)?!1:(e=e.slice(2).replace(/Once$/,""),Kn(t,e[0].toLowerCase()+e.slice(1))||Kn(t,Il(e))||Kn(t,e))}function pP(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:h,setupState:f,ctx:m,inheritAttrs:v}=t,y=$b(t);let g,S;try{if(n.shapeFlag&4){const w=s||r,E=w;g=ul(c.call(E,w,u,d,f,h,m)),S=a}else{const w=e;g=ul(w.length>1?w(d,{attrs:a,slots:o,emit:l}):w(d,null)),S=e.props?a:xde(a)}}catch(w){ng.length=0,J1(w,t,1),g=ae(gs)}let _=g;if(S&&v!==!1){const w=Object.keys(S),{shapeFlag:E}=_;w.length&&E&7&&(i&&w.some(cT)&&(S=Sde(S,i)),_=xc(_,S,!1,!0))}return n.dirs&&(_=xc(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&nh(_,n.transition),g=_,$b(y),g}const xde=t=>{let e;for(const n in t)(n==="class"||n==="style"||j1(n))&&((e||(e={}))[n]=t[n]);return e},Sde=(t,e)=>{const n={};for(const r in t)(!cT(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Ede(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?mP(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==r[h]&&!a_(c,h))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?mP(r,o,c):!0:!!o;return!1}function mP(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!a_(n,i))return!0}return!1}function Cde({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const UF=t=>t.__isSuspense;function Tde(t,e){e&&e.pendingBranch?rt(t)?e.effects.push(...t):e.effects.push(t):sF(t)}const xt=Symbol.for("v-fgt"),vh=Symbol.for("v-txt"),gs=Symbol.for("v-cmt"),Jy=Symbol.for("v-stc"),ng=[];let Lo=null;function D(t=!1){ng.push(Lo=t?null:[])}function Mde(){ng.pop(),Lo=ng[ng.length-1]||null}let Bg=1;function gP(t,e=!1){Bg+=t,t<0&&Lo&&e&&(Lo.hasOnce=!0)}function zF(t){return t.dynamicChildren=Bg>0?Lo||zf:null,Mde(),Bg>0&&Lo&&Lo.push(t),t}function Z(t,e,n,r,s,i){return zF(ne(t,e,n,r,s,i,!0))}function Le(t,e,n,r,s){return zF(ae(t,e,n,r,s,!0))}function wr(t){return t?t.__v_isVNode===!0:!1}function Md(t,e){return t.type===e.type&&t.key===e.key}const $F=({key:t})=>t??null,Qy=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?kt(t)||yr(t)||Lt(t)?{i:ci,r:t,k:e,f:!!n}:t:null);function ne(t,e=null,n=null,r=0,s=null,i=t===xt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&$F(e),ref:e&&Qy(e),scopeId:Q1,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ci};return a?(kT(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=kt(n)?8:16),Bg>0&&!o&&Lo&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Lo.push(l),l}const ae=Ade;function Ade(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===wF)&&(t=gs),wr(t)){const a=xc(t,e,!0);return n&&kT(a,n),Bg>0&&!i&&Lo&&(a.shapeFlag&6?Lo[Lo.indexOf(t)]=a:Lo.push(a)),a.patchFlag=-2,a}if(Dde(t)&&(t=t.__vccOpts),e){e=Sl(e);let{class:a,style:l}=e;a&&!kt(a)&&(e.class=U(a)),un(l)&&(bT(l)&&!rt(l)&&(l=Ns({},l)),e.style=Pt(l))}const o=kt(t)?1:UF(t)?128:uF(t)?64:un(t)?4:Lt(t)?2:0;return ne(t,e,n,r,s,o,i,!0)}function Sl(t){return t?bT(t)||kF(t)?Ns({},t):t:null}function xc(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=t,c=e?yn(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&$F(c),ref:e&&e.ref?n&&i?rt(i)?i.concat(Qy(e)):[i,Qy(e)]:Qy(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==xt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&xc(t.ssContent),ssFallback:t.ssFallback&&xc(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&nh(u,l.clone(u)),u}function rn(t=" ",e=0){return ae(vh,null,t,e)}function Pe(t="",e=!1){return e?(D(),Le(gs,null,t)):ae(gs,null,t)}function ul(t){return t==null||typeof t=="boolean"?ae(gs):rt(t)?ae(xt,null,t.slice()):wr(t)?vu(t):ae(vh,null,String(t))}function vu(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:xc(t)}function kT(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(rt(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),kT(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!kF(e)?e._ctx=ci:s===3&&ci&&(ci.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Lt(e)?(e={default:e,_ctx:ci},n=32):(e=String(e),r&64?(n=16,e=[rn(e)]):n=8);t.children=e,t.shapeFlag|=n}function yn(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=U([e.class,r.class]));else if(s==="style")e.style=Pt([e.style,r.style]);else if(j1(s)){const i=e[s],o=r[s];o&&i!==o&&!(rt(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function rl(t,e,n,r=null){za(t,e,7,[n,r])}const kde=TF();let Ide=0;function Pde(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||kde,i={uid:Ide++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new D8(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:PF(r,s),emitsOptions:BF(r,s),emit:null,emitted:null,propsDefaults:Mr,inheritAttrs:r.inheritAttrs,ctx:Mr,data:Mr,props:Mr,attrs:Mr,slots:Mr,refs:Mr,setupState:Mr,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=wde.bind(null,i),t.ce&&t.ce(i),i}let Ei=null;const tn=()=>Ei||ci;let Gb,N2;{const t=Y1(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Gb=e("__VUE_INSTANCE_SETTERS__",n=>Ei=n),N2=e("__VUE_SSR_SETTERS__",n=>Ug=n)}const Av=t=>{const e=Ei;return Gb(t),t.scope.on(),()=>{t.scope.off(),Gb(e)}},vP=()=>{Ei&&Ei.scope.off(),Gb(null)};function VF(t){return t.vnode.shapeFlag&4}let Ug=!1;function Rde(t,e=!1,n=!1){e&&N2(e);const{props:r,children:s}=t.vnode,i=VF(t);ade(t,r,i,e),dde(t,s,n||e);const o=i?Lde(t,e):void 0;return e&&N2(!1),o}function Lde(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Que);const{setup:r}=n;if(r){_c();const s=t.setupContext=r.length>1?GF(t):null,i=Av(t),o=Mv(r,t,0,[t.props,s]),a=th(o);if(wc(),i(),(a||t.sp)&&!Gf(t)&&yF(t),a){if(o.then(vP,vP),e)return o.then(l=>{yP(t,l)}).catch(l=>{J1(l,t,0)});t.asyncDep=o}else yP(t,o)}else HF(t)}function yP(t,e,n){Lt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:un(e)&&(t.setupState=eF(e)),HF(t)}function HF(t,e,n){const r=t.type;t.render||(t.render=r.render||er);{const s=Av(t);_c();try{ede(t)}finally{wc(),s()}}}const Ode={get(t,e){return Si(t,"get",""),t[e]}};function GF(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Ode),slots:t.slots,emit:t.emit,expose:e}}function l_(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(eF(Oa(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in tg)return tg[n](t)},has(e,n){return n in e||n in tg}})):t.proxy}function Nde(t,e=!0){return Lt(t)?t.displayName||t.name:t.name||e&&t.__name}function Dde(t){return Lt(t)&&"__vccOpts"in t}const R=(t,e)=>Fue(t,e,Ug);function Ut(t,e,n){const r=arguments.length;return r===2?un(e)&&!rt(e)?wr(e)?ae(t,null,[e]):ae(t,e):ae(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&wr(n)&&(n=[n]),ae(t,e,n))}const Fde="3.5.18",Bde=er;/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let D2;const bP=typeof window<"u"&&window.trustedTypes;if(bP)try{D2=bP.createPolicy("vue",{createHTML:t=>t})}catch{}const WF=D2?t=>D2.createHTML(t):t=>t,Ude="http://www.w3.org/2000/svg",zde="http://www.w3.org/1998/Math/MathML",Jl=typeof document<"u"?document:null,_P=Jl&&Jl.createElement("template"),$de={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Jl.createElementNS(Ude,t):e==="mathml"?Jl.createElementNS(zde,t):n?Jl.createElement(t,{is:n}):Jl.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Jl.createTextNode(t),createComment:t=>Jl.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Jl.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{_P.innerHTML=WF(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=_P.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},su="transition",bm="animation",dp=Symbol("_vtc"),jF={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},KF=Ns({},pF,jF),Vde=t=>(t.displayName="Transition",t.props=KF,t),Xs=Vde((t,{slots:e})=>Ut(Wue,qF(t),e)),gd=(t,e=[])=>{rt(t)?t.forEach(n=>n(...e)):t&&t(...e)},wP=t=>t?rt(t)?t.some(e=>e.length>1):t.length>1:!1;function qF(t){const e={};for(const N in t)N in jF||(e[N]=t[N]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,m=Hde(s),v=m&&m[0],y=m&&m[1],{onBeforeEnter:g,onEnter:S,onEnterCancelled:_,onLeave:w,onLeaveCancelled:E,onBeforeAppear:C=g,onAppear:T=S,onAppearCancelled:I=_}=e,k=(N,G,V,X)=>{N._enterCancelled=X,cu(N,G?u:a),cu(N,G?c:o),V&&V()},M=(N,G)=>{N._isLeaving=!1,cu(N,d),cu(N,f),cu(N,h),G&&G()},L=N=>(G,V)=>{const X=N?T:S,F=()=>k(G,N,V);gd(X,[G,F]),xP(()=>{cu(G,N?l:i),ol(G,N?u:a),wP(X)||SP(G,r,v,F)})};return Ns(e,{onBeforeEnter(N){gd(g,[N]),ol(N,i),ol(N,o)},onBeforeAppear(N){gd(C,[N]),ol(N,l),ol(N,c)},onEnter:L(!1),onAppear:L(!0),onLeave(N,G){N._isLeaving=!0;const V=()=>M(N,G);ol(N,d),N._enterCancelled?(ol(N,h),F2()):(F2(),ol(N,h)),xP(()=>{N._isLeaving&&(cu(N,d),ol(N,f),wP(w)||SP(N,r,y,V))}),gd(w,[N,V])},onEnterCancelled(N){k(N,!1,void 0,!0),gd(_,[N])},onAppearCancelled(N){k(N,!0,void 0,!0),gd(I,[N])},onLeaveCancelled(N){M(N),gd(E,[N])}})}function Hde(t){if(t==null)return null;if(un(t))return[bx(t.enter),bx(t.leave)];{const e=bx(t);return[e,e]}}function bx(t){return rue(t)}function ol(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[dp]||(t[dp]=new Set)).add(e)}function cu(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[dp];n&&(n.delete(e),n.size||(t[dp]=void 0))}function xP(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Gde=0;function SP(t,e,n,r){const s=t._endId=++Gde,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=YF(t,e);if(!o)return r();const c=o+"end";let u=0;const d=()=>{t.removeEventListener(c,h),i()},h=f=>{f.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),t.addEventListener(c,h)}function YF(t,e){const n=window.getComputedStyle(t),r=m=>(n[m]||"").split(", "),s=r(`${su}Delay`),i=r(`${su}Duration`),o=EP(s,i),a=r(`${bm}Delay`),l=r(`${bm}Duration`),c=EP(a,l);let u=null,d=0,h=0;e===su?o>0&&(u=su,d=o,h=i.length):e===bm?c>0&&(u=bm,d=c,h=l.length):(d=Math.max(o,c),u=d>0?o>c?su:bm:null,h=u?u===su?i.length:l.length:0);const f=u===su&&/\b(transform|all)(,|$)/.test(r(`${su}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function EP(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>CP(n)+CP(t[r])))}function CP(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function F2(){return document.body.offsetHeight}function Wde(t,e,n){const r=t[dp];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Wb=Symbol("_vod"),XF=Symbol("_vsh"),Wn={beforeMount(t,{value:e},{transition:n}){t[Wb]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):_m(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),_m(t,!0),r.enter(t)):r.leave(t,()=>{_m(t,!1)}):_m(t,e))},beforeUnmount(t,{value:e}){_m(t,e)}};function _m(t,e){t.style.display=e?t[Wb]:"none",t[XF]=!e}const ZF=Symbol("");function JF(t){const e=tn();if(!e)return;const n=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(i=>jb(i,s))},r=()=>{const s=t(e.proxy);e.ce?jb(e.ce,s):B2(e.subTree,s),n(s)};s_(()=>{sF(r)}),Zt(()=>{Be(r,er,{flush:"post"});const s=new MutationObserver(r);s.observe(e.subTree.el.parentNode,{childList:!0}),yo(()=>s.disconnect())})}function B2(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{B2(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)jb(t.el,e);else if(t.type===xt)t.children.forEach(n=>B2(n,e));else if(t.type===Jy){let{el:n,anchor:r}=t;for(;n&&(jb(n,e),n!==r);)n=n.nextSibling}}function jb(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const s in e){const i=due(e[s]);n.setProperty(`--${s}`,i),r+=`--${s}: ${i};`}n[ZF]=r}}const jde=/(^|;)\s*display\s*:/;function Kde(t,e,n){const r=t.style,s=kt(n);let i=!1;if(n&&!s){if(e)if(kt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&eb(r,a,"")}else for(const o in e)n[o]==null&&eb(r,o,"");for(const o in n)o==="display"&&(i=!0),eb(r,o,n[o])}else if(s){if(e!==n){const o=r[ZF];o&&(n+=";"+o),r.cssText=n,i=jde.test(n)}}else e&&t.removeAttribute("style");Wb in t&&(t[Wb]=i?r.display:"",t[XF]&&(r.display="none"))}const TP=/\s*!important$/;function eb(t,e,n){if(rt(n))n.forEach(r=>eb(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=qde(t,e);TP.test(n)?t.setProperty(Il(r),n.replace(TP,""),"important"):t[r]=n}}const MP=["Webkit","Moz","ms"],_x={};function qde(t,e){const n=_x[e];if(n)return n;let r=ki(e);if(r!=="filter"&&r in t)return _x[e]=r;r=Tv(r);for(let s=0;s<MP.length;s++){const i=MP[s]+r;if(i in t)return _x[e]=i}return e}const AP="http://www.w3.org/1999/xlink";function kP(t,e,n,r,s,i=cue(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(AP,e.slice(6,e.length)):t.setAttributeNS(AP,e,n):n==null||i&&!R8(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Ua(n)?String(n):n)}function IP(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?WF(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=R8(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function bu(t,e,n,r){t.addEventListener(e,n,r)}function Yde(t,e,n,r){t.removeEventListener(e,n,r)}const PP=Symbol("_vei");function Xde(t,e,n,r,s=null){const i=t[PP]||(t[PP]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=Zde(e);if(r){const c=i[e]=ehe(r,s);bu(t,a,c,l)}else o&&(Yde(t,a,o,l),i[e]=void 0)}}const RP=/(?:Once|Passive|Capture)$/;function Zde(t){let e;if(RP.test(t)){e={};let r;for(;r=t.match(RP);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Il(t.slice(2)),e]}let wx=0;const Jde=Promise.resolve(),Qde=()=>wx||(Jde.then(()=>wx=0),wx=Date.now());function ehe(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;za(the(r,n.value),e,5,[r])};return n.value=t,n.attached=Qde(),n}function the(t,e){if(rt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const LP=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,nhe=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?Wde(t,r,o):e==="style"?Kde(t,n,r):j1(e)?cT(e)||Xde(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):rhe(t,e,r,o))?(IP(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&kP(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!kt(r))?IP(t,ki(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),kP(t,e,r,o))};function rhe(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&LP(e)&&Lt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return LP(e)&&kt(n)?!1:e in t}const QF=new WeakMap,eB=new WeakMap,Kb=Symbol("_moveCb"),OP=Symbol("_enterCb"),she=t=>(delete t.props.mode,t),ihe=she({name:"TransitionGroup",props:Ns({},KF,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=tn(),r=fF();let s,i;return qa(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!che(s[0].el,n.vnode.el,o)){s=[];return}s.forEach(ohe),s.forEach(ahe);const a=s.filter(lhe);F2(),a.forEach(l=>{const c=l.el,u=c.style;ol(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[Kb]=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",d),c[Kb]=null,cu(c,o))};c.addEventListener("transitionend",d)}),s=[]}),()=>{const o=gr(t),a=qF(o);let l=o.tag||xt;if(s=[],i)for(let c=0;c<i.length;c++){const u=i[c];u.el&&u.el instanceof Element&&(s.push(u),nh(u,Fg(u,a,r,n)),QF.set(u,u.el.getBoundingClientRect()))}i=e.default?xT(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&nh(u,Fg(u,a,r,n))}return ae(l,null,i)}}}),tB=ihe;function ohe(t){const e=t.el;e[Kb]&&e[Kb](),e[OP]&&e[OP]()}function ahe(t){eB.set(t,t.el.getBoundingClientRect())}function lhe(t){const e=QF.get(t),n=eB.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function che(t,e,n){const r=t.cloneNode(),s=t[dp];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=YF(r);return i.removeChild(r),o}const hp=t=>{const e=t.props["onUpdate:modelValue"]||!1;return rt(e)?n=>Yy(e,n):e};function uhe(t){t.target.composing=!0}function NP(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const mc=Symbol("_assign"),c_={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[mc]=hp(s);const i=r||s.props&&s.props.type==="number";bu(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=T2(a)),t[mc](a)}),n&&bu(t,"change",()=>{t.value=t.value.trim()}),e||(bu(t,"compositionstart",uhe),bu(t,"compositionend",NP),bu(t,"change",NP))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[mc]=hp(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?T2(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},qb={deep:!0,created(t,e,n){t[mc]=hp(n),bu(t,"change",()=>{const r=t._modelValue,s=rB(t),i=t.checked,o=t[mc];if(rt(r)){const a=L8(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const c=[...r];c.splice(a,1),o(c)}}else if(K1(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(sB(t,i))})},mounted:DP,beforeUpdate(t,e,n){t[mc]=hp(n),DP(t,e,n)}};function DP(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(rt(e))s=L8(e,r.props.value)>-1;else if(K1(e))s=e.has(r.props.value);else{if(e===n)return;s=cp(e,sB(t,!0))}t.checked!==s&&(t.checked=s)}const nB={created(t,{value:e},n){t.checked=cp(e,n.props.value),t[mc]=hp(n),bu(t,"change",()=>{t[mc](rB(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[mc]=hp(r),e!==n&&(t.checked=cp(e,r.props.value))}};function rB(t){return"_value"in t?t._value:t.value}function sB(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const dhe=["ctrl","shift","alt","meta"],hhe={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>dhe.some(n=>t[`${n}Key`]&&!e.includes(n))},$t=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=hhe[e[o]];if(a&&a(s,e))return}return t(s,...i)})},fhe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},cr=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const i=Il(s.key);if(e.some(o=>o===i||fhe[o]===i))return t(s)})},phe=Ns({patchProp:nhe},$de);let FP;function iB(){return FP||(FP=fde(phe))}const Fu=(...t)=>{iB().render(...t)},oB=(...t)=>{const e=iB().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=ghe(r);if(!s)return;const i=e._component;!Lt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,mhe(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function mhe(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function ghe(t){return kt(t)?document.querySelector(t):t}function IT(t){return hT()?(fT(t),!0):!1}function fp(t){return typeof t=="function"?t():p(t)}const aB=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const vhe=Object.prototype.toString,yhe=t=>vhe.call(t)==="[object Object]",lB=()=>{};function bhe(t,e){function n(...r){return new Promise((s,i)=>{Promise.resolve(t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(s).catch(i)})}return n}const cB=t=>t();function _he(t=cB){const e=H(!0);function n(){e.value=!1}function r(){e.value=!0}const s=(...i)=>{e.value&&t(...i)};return{isActive:Ku(e),pause:n,resume:r,eventFilter:s}}function whe(t){return tn()}function xhe(...t){if(t.length!==1)return Yn(...t);const e=t[0];return typeof e=="function"?Ku(_T(()=>({get:e,set:lB}))):H(e)}function She(t,e,n={}){const{eventFilter:r=cB,...s}=n;return Be(t,bhe(r,e),s)}function Ehe(t,e,n={}){const{eventFilter:r,...s}=n,{eventFilter:i,pause:o,resume:a,isActive:l}=_he(r);return{stop:She(t,e,{...s,eventFilter:i}),pause:o,resume:a,isActive:l}}function uB(t,e=!0,n){whe()?Zt(t,n):e?t():Tt(t)}function Che(t=!1,e={}){const{truthyValue:n=!0,falsyValue:r=!1}=e,s=yr(t),i=H(t);function o(a){if(arguments.length)return i.value=a,i.value;{const l=fp(n);return i.value=i.value===l?fp(r):l,i.value}}return s?o:[i,o]}const pp=aB?window:void 0,The=aB?window.document:void 0;function Yb(t){var e;const n=fp(t);return(e=n==null?void 0:n.$el)!=null?e:n}function Xb(...t){let e,n,r,s;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,r,s]=t,e=pp):[e,n,r,s]=t,!e)return lB;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const i=[],o=()=>{i.forEach(u=>u()),i.length=0},a=(u,d,h,f)=>(u.addEventListener(d,h,f),()=>u.removeEventListener(d,h,f)),l=Be(()=>[Yb(e),fp(s)],([u,d])=>{if(o(),!u)return;const h=yhe(d)?{...d}:d;i.push(...n.flatMap(f=>r.map(m=>a(u,f,m,h))))},{immediate:!0,flush:"post"}),c=()=>{l(),o()};return IT(c),c}function Mhe(){const t=H(!1),e=tn();return e&&Zt(()=>{t.value=!0},e),t}function dB(t){const e=Mhe();return R(()=>(e.value,!!t()))}function Ahe(t,e={}){const{window:n=pp}=e,r=dB(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let s;const i=H(!1),o=c=>{i.value=c.matches},a=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",o):s.removeListener(o))},l=ui(()=>{r.value&&(a(),s=n.matchMedia(fp(t)),"addEventListener"in s?s.addEventListener("change",o):s.addListener(o),i.value=s.matches)});return IT(()=>{l(),a(),s=void 0}),i}const ay=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ly="__vueuse_ssr_handlers__",khe=Ihe();function Ihe(){return ly in ay||(ay[ly]=ay[ly]||{}),ay[ly]}function hB(t,e){return khe[t]||e}function fB(t){return Ahe("(prefers-color-scheme: dark)",t)}function Phe(t){return t==null?"any":t instanceof Set?"set":t instanceof Map?"map":t instanceof Date?"date":typeof t=="boolean"?"boolean":typeof t=="string"?"string":typeof t=="object"?"object":Number.isNaN(t)?"any":"number"}const Rhe={boolean:{read:t=>t==="true",write:t=>String(t)},object:{read:t=>JSON.parse(t),write:t=>JSON.stringify(t)},number:{read:t=>Number.parseFloat(t),write:t=>String(t)},any:{read:t=>t,write:t=>String(t)},string:{read:t=>t,write:t=>String(t)},map:{read:t=>new Map(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))},set:{read:t=>new Set(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t))},date:{read:t=>new Date(t),write:t=>t.toISOString()}},BP="vueuse-storage";function Lhe(t,e,n,r={}){var s;const{flush:i="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:l=!0,mergeDefaults:c=!1,shallow:u,window:d=pp,eventFilter:h,onError:f=M=>{console.error(M)},initOnMounted:m}=r,v=(u?br:H)(typeof e=="function"?e():e);if(!n)try{n=hB("getDefaultStorage",()=>{var M;return(M=pp)==null?void 0:M.localStorage})()}catch(M){f(M)}if(!n)return v;const y=fp(e),g=Phe(y),S=(s=r.serializer)!=null?s:Rhe[g],{pause:_,resume:w}=Ehe(v,()=>C(v.value),{flush:i,deep:o,eventFilter:h});d&&a&&uB(()=>{n instanceof Storage?Xb(d,"storage",I):Xb(d,BP,k),m&&I()}),m||I();function E(M,L){if(d){const N={key:t,oldValue:M,newValue:L,storageArea:n};d.dispatchEvent(n instanceof Storage?new StorageEvent("storage",N):new CustomEvent(BP,{detail:N}))}}function C(M){try{const L=n.getItem(t);if(M==null)E(L,null),n.removeItem(t);else{const N=S.write(M);L!==N&&(n.setItem(t,N),E(L,N))}}catch(L){f(L)}}function T(M){const L=M?M.newValue:n.getItem(t);if(L==null)return l&&y!=null&&n.setItem(t,S.write(y)),y;if(!M&&c){const N=S.read(L);return typeof c=="function"?c(N,y):g==="object"&&!Array.isArray(N)?{...y,...N}:N}else return typeof L!="string"?L:S.read(L)}function I(M){if(!(M&&M.storageArea!==n)){if(M&&M.key==null){v.value=y;return}if(!(M&&M.key!==t)){_();try{(M==null?void 0:M.newValue)!==S.write(v.value)&&(v.value=T(M))}catch(L){f(L)}finally{M?Tt(w):w()}}}}function k(M){I(M.detail)}return v}const Ohe="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function Nhe(t={}){const{selector:e="html",attribute:n="class",initialValue:r="auto",window:s=pp,storage:i,storageKey:o="vueuse-color-scheme",listenToStorageChanges:a=!0,storageRef:l,emitAuto:c,disableTransition:u=!0}=t,d={auto:"",light:"light",dark:"dark",...t.modes||{}},h=fB({window:s}),f=R(()=>h.value?"dark":"light"),m=l||(o==null?xhe(r):Lhe(o,r,i,{window:s,listenToStorageChanges:a})),v=R(()=>m.value==="auto"?f.value:m.value),y=hB("updateHTMLAttrs",(w,E,C)=>{const T=typeof w=="string"?s==null?void 0:s.document.querySelector(w):Yb(w);if(!T)return;const I=new Set,k=new Set;let M=null;if(E==="class"){const N=C.split(/\s/g);Object.values(d).flatMap(G=>(G||"").split(/\s/g)).filter(Boolean).forEach(G=>{N.includes(G)?I.add(G):k.add(G)})}else M={key:E,value:C};if(I.size===0&&k.size===0&&M===null)return;let L;u&&(L=s.document.createElement("style"),L.appendChild(document.createTextNode(Ohe)),s.document.head.appendChild(L));for(const N of I)T.classList.add(N);for(const N of k)T.classList.remove(N);M&&T.setAttribute(M.key,M.value),u&&(s.getComputedStyle(L).opacity,document.head.removeChild(L))});function g(w){var E;y(e,n,(E=d[w])!=null?E:w)}function S(w){t.onChanged?t.onChanged(w,g):g(w)}Be(v,S,{flush:"post",immediate:!0}),uB(()=>S(v.value));const _=R({get(){return c?m.value:v.value},set(w){m.value=w}});try{return Object.assign(_,{store:m,system:f,state:v})}catch{return _}}function Dhe(t={}){const{valueDark:e="dark",valueLight:n="",window:r=pp}=t,s=Nhe({...t,onChanged:(a,l)=>{var c;t.onChanged?(c=t.onChanged)==null||c.call(t,a==="dark",l,a):l(a)},modes:{dark:e,light:n}}),i=R(()=>s.system?s.system.value:fB({window:r}).value?"dark":"light");return R({get(){return s.value==="dark"},set(a){const l=a?"dark":"light";i.value===l?s.value="auto":s.value=l}})}const UP=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function Fhe(t,e={}){const{document:n=The,autoExit:r=!1}=e,s=R(()=>{var g;return(g=Yb(t))!=null?g:n==null?void 0:n.querySelector("html")}),i=H(!1),o=R(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(g=>n&&g in n||s.value&&g in s.value)),a=R(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(g=>n&&g in n||s.value&&g in s.value)),l=R(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(g=>n&&g in n||s.value&&g in s.value)),c=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(g=>n&&g in n),u=dB(()=>s.value&&n&&o.value!==void 0&&a.value!==void 0&&l.value!==void 0),d=()=>c?(n==null?void 0:n[c])===s.value:!1,h=()=>{if(l.value){if(n&&n[l.value]!=null)return n[l.value];{const g=s.value;if((g==null?void 0:g[l.value])!=null)return!!g[l.value]}}return!1};async function f(){if(!(!u.value||!i.value)){if(a.value)if((n==null?void 0:n[a.value])!=null)await n[a.value]();else{const g=s.value;(g==null?void 0:g[a.value])!=null&&await g[a.value]()}i.value=!1}}async function m(){if(!u.value||i.value)return;h()&&await f();const g=s.value;o.value&&(g==null?void 0:g[o.value])!=null&&(await g[o.value](),i.value=!0)}async function v(){await(i.value?f():m())}const y=()=>{const g=h();(!g||g&&d())&&(i.value=g)};return Xb(n,UP,y,!1),Xb(()=>Yb(s),UP,y,!1),r&&IT(f),{isSupported:u,isFullscreen:i,enter:m,exit:f,toggle:v}}var pB={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}},Bhe={name:"zh-cn",el:{breadcrumb:{label:""},colorpicker:{confirm:"",clear:"",defaultLabel:"",description:" {color} Enter ",alphaLabel:""},datepicker:{now:"",today:"",cancel:"",clear:"",confirm:"",dateTablePrompt:" Enter ",monthTablePrompt:" Enter ",yearTablePrompt:" Enter ",selectedDate:"",selectDate:"",selectTime:"",startDate:"",startTime:"",endDate:"",endTime:"",prevYear:"",nextYear:"",prevMonth:"",nextMonth:"",year:"",month1:"1 ",month2:"2 ",month3:"3 ",month4:"4 ",month5:"5 ",month6:"6 ",month7:"7 ",month8:"8 ",month9:"9 ",month10:"10 ",month11:"11 ",month12:"12 ",weeks:{sun:"",mon:"",tue:"",wed:"",thu:"",fri:"",sat:""},weeksFull:{sun:"",mon:"",tue:"",wed:"",thu:"",fri:"",sat:""},months:{jan:"",feb:"",mar:"",apr:"",may:"",jun:"",jul:"",aug:"",sep:"",oct:"",nov:"",dec:""}},inputNumber:{decrease:"",increase:""},select:{loading:"",noMatch:"",noData:"",placeholder:""},dropdown:{toggleDropdown:""},mention:{loading:""},cascader:{noMatch:"",loading:"",placeholder:"",noData:""},pagination:{goto:"",pagesize:"/",total:" {total} ",pageClassifier:"",page:"",prev:"",next:"",currentPage:" {pager} ",prevPages:" {pager} ",nextPages:" {pager} ",deprecationWarning:" el-pagination "},dialog:{close:""},drawer:{close:""},messagebox:{title:"",confirm:"",cancel:"",error:"!",close:""},upload:{deleteTip:" Delete ",delete:"",preview:"",continue:""},slider:{defaultLabel:" {min}  {max}",defaultRangeStartLabel:"",defaultRangeEndLabel:""},table:{emptyText:"",confirmFilter:"",resetFilter:"",clearFilter:"",sumText:""},tour:{next:"",previous:"",finish:""},tree:{emptyText:""},transfer:{noMatch:"",noData:"",titles:[" 1"," 2"],filterPlaceholder:"",noCheckedFormat:" {total} ",hasCheckedFormat:" {checked}/{total} "},image:{error:""},pageHeader:{title:""},popconfirm:{confirmButtonText:"",cancelButtonText:""},carousel:{leftArrow:"",rightArrow:"",indicator:" {index}"}}};/*!
  * shared v10.0.8
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function Uhe(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const Zb=typeof window<"u",qu=(t,e=!1)=>e?Symbol.for(t):Symbol(t),zhe=(t,e,n)=>$he({l:t,k:e,s:n}),$he=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Is=t=>typeof t=="number"&&isFinite(t),Vhe=t=>PT(t)==="[object Date]",mp=t=>PT(t)==="[object RegExp]",u_=t=>lr(t)&&Object.keys(t).length===0,js=Object.assign,Hhe=Object.create,Gr=(t=null)=>Hhe(t);let zP;const Od=()=>zP||(zP=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:Gr());function $P(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function VP(t){return t.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ghe(t){return t=t.replace(/(\w+)\s*=\s*"([^"]*)"/g,(r,s,i)=>`${s}="${VP(i)}"`),t=t.replace(/(\w+)\s*=\s*'([^']*)'/g,(r,s,i)=>`${s}='${VP(i)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(t)&&(t=t.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(r=>{t=t.replace(r,"$1javascript&#58;")}),t}const Whe=Object.prototype.hasOwnProperty;function ka(t,e){return Whe.call(t,e)}const ws=Array.isArray,os=t=>typeof t=="function",gn=t=>typeof t=="string",Cr=t=>typeof t=="boolean",kr=t=>t!==null&&typeof t=="object",jhe=t=>kr(t)&&os(t.then)&&os(t.catch),mB=Object.prototype.toString,PT=t=>mB.call(t),lr=t=>PT(t)==="[object Object]",Khe=t=>t==null?"":ws(t)||lr(t)&&t.toString===mB?JSON.stringify(t,null,2):String(t);function RT(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}const cy=t=>!kr(t)||ws(t);function tb(t,e){if(cy(t)||cy(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:r,des:s}=n.pop();Object.keys(r).forEach(i=>{i!=="__proto__"&&(kr(r[i])&&!kr(s[i])&&(s[i]=Array.isArray(r[i])?[]:Gr()),cy(s[i])||cy(r[i])?s[i]=r[i]:n.push({src:r[i],des:s[i]}))})}}/*!
  * message-compiler v10.0.8
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function qhe(t,e,n){return{line:t,column:e,offset:n}}function U2(t,e,n){return{start:t,end:e}}const Nr={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},Yhe=17;function d_(t,e,n={}){const{domain:r,messages:s,args:i}=n,o=t,a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=r,a}function Xhe(t){throw t}const Yl=" ",Zhe="\r",$i=`
`,Jhe="\u2028",Qhe="\u2029";function efe(t){const e=t;let n=0,r=1,s=1,i=0;const o=T=>e[T]===Zhe&&e[T+1]===$i,a=T=>e[T]===$i,l=T=>e[T]===Qhe,c=T=>e[T]===Jhe,u=T=>o(T)||a(T)||l(T)||c(T),d=()=>n,h=()=>r,f=()=>s,m=()=>i,v=T=>o(T)||l(T)||c(T)?$i:e[T],y=()=>v(n),g=()=>v(n+i);function S(){return i=0,u(n)&&(r++,s=0),o(n)&&n++,n++,s++,e[n]}function _(){return o(n+i)&&i++,i++,e[n+i]}function w(){n=0,r=1,s=1,i=0}function E(T=0){i=T}function C(){const T=n+i;for(;T!==n;)S();i=0}return{index:d,line:h,column:f,peekOffset:m,charAt:v,currentChar:y,currentPeek:g,next:S,peek:_,reset:w,resetPeek:E,skipToPeek:C}}const iu=void 0,tfe=".",HP="'",nfe="tokenizer";function rfe(t,e={}){const n=e.location!==!1,r=efe(t),s=()=>r.index(),i=()=>qhe(r.line(),r.column(),r.index()),o=i(),a=s(),l={currentType:13,offset:a,startLoc:o,endLoc:o,lastType:13,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=e;function d(te,oe,Ee,...J){const Q=c();if(oe.column+=Ee,oe.offset+=Ee,u){const _e=n?U2(Q.startLoc,oe):null,ie=d_(te,_e,{domain:nfe,args:J});u(ie)}}function h(te,oe,Ee){te.endLoc=i(),te.currentType=oe;const J={type:oe};return n&&(J.loc=U2(te.startLoc,te.endLoc)),Ee!=null&&(J.value=Ee),J}const f=te=>h(te,13);function m(te,oe){return te.currentChar()===oe?(te.next(),oe):(d(Nr.EXPECTED_TOKEN,i(),0,oe),"")}function v(te){let oe="";for(;te.currentPeek()===Yl||te.currentPeek()===$i;)oe+=te.currentPeek(),te.peek();return oe}function y(te){const oe=v(te);return te.skipToPeek(),oe}function g(te){if(te===iu)return!1;const oe=te.charCodeAt(0);return oe>=97&&oe<=122||oe>=65&&oe<=90||oe===95}function S(te){if(te===iu)return!1;const oe=te.charCodeAt(0);return oe>=48&&oe<=57}function _(te,oe){const{currentType:Ee}=oe;if(Ee!==2)return!1;v(te);const J=g(te.currentPeek());return te.resetPeek(),J}function w(te,oe){const{currentType:Ee}=oe;if(Ee!==2)return!1;v(te);const J=te.currentPeek()==="-"?te.peek():te.currentPeek(),Q=S(J);return te.resetPeek(),Q}function E(te,oe){const{currentType:Ee}=oe;if(Ee!==2)return!1;v(te);const J=te.currentPeek()===HP;return te.resetPeek(),J}function C(te,oe){const{currentType:Ee}=oe;if(Ee!==7)return!1;v(te);const J=te.currentPeek()===".";return te.resetPeek(),J}function T(te,oe){const{currentType:Ee}=oe;if(Ee!==8)return!1;v(te);const J=g(te.currentPeek());return te.resetPeek(),J}function I(te,oe){const{currentType:Ee}=oe;if(!(Ee===7||Ee===11))return!1;v(te);const J=te.currentPeek()===":";return te.resetPeek(),J}function k(te,oe){const{currentType:Ee}=oe;if(Ee!==9)return!1;const J=()=>{const _e=te.currentPeek();return _e==="{"?g(te.peek()):_e==="@"||_e==="|"||_e===":"||_e==="."||_e===Yl||!_e?!1:_e===$i?(te.peek(),J()):L(te,!1)},Q=J();return te.resetPeek(),Q}function M(te){v(te);const oe=te.currentPeek()==="|";return te.resetPeek(),oe}function L(te,oe=!0){const Ee=(Q=!1,_e="")=>{const ie=te.currentPeek();return ie==="{"||ie==="@"||!ie?Q:ie==="|"?!(_e===Yl||_e===$i):ie===Yl?(te.peek(),Ee(!0,Yl)):ie===$i?(te.peek(),Ee(!0,$i)):!0},J=Ee();return oe&&te.resetPeek(),J}function N(te,oe){const Ee=te.currentChar();return Ee===iu?iu:oe(Ee)?(te.next(),Ee):null}function G(te){const oe=te.charCodeAt(0);return oe>=97&&oe<=122||oe>=65&&oe<=90||oe>=48&&oe<=57||oe===95||oe===36}function V(te){return N(te,G)}function X(te){const oe=te.charCodeAt(0);return oe>=97&&oe<=122||oe>=65&&oe<=90||oe>=48&&oe<=57||oe===95||oe===36||oe===45}function F(te){return N(te,X)}function $(te){const oe=te.charCodeAt(0);return oe>=48&&oe<=57}function O(te){return N(te,$)}function z(te){const oe=te.charCodeAt(0);return oe>=48&&oe<=57||oe>=65&&oe<=70||oe>=97&&oe<=102}function re(te){return N(te,z)}function q(te){let oe="",Ee="";for(;oe=O(te);)Ee+=oe;return Ee}function le(te){let oe="";for(;;){const Ee=te.currentChar();if(Ee==="{"||Ee==="}"||Ee==="@"||Ee==="|"||!Ee)break;if(Ee===Yl||Ee===$i)if(L(te))oe+=Ee,te.next();else{if(M(te))break;oe+=Ee,te.next()}else oe+=Ee,te.next()}return oe}function fe(te){y(te);let oe="",Ee="";for(;oe=F(te);)Ee+=oe;return te.currentChar()===iu&&d(Nr.UNTERMINATED_CLOSING_BRACE,i(),0),Ee}function se(te){y(te);let oe="";return te.currentChar()==="-"?(te.next(),oe+=`-${q(te)}`):oe+=q(te),te.currentChar()===iu&&d(Nr.UNTERMINATED_CLOSING_BRACE,i(),0),oe}function ye(te){return te!==HP&&te!==$i}function we(te){y(te),m(te,"'");let oe="",Ee="";for(;oe=N(te,ye);)oe==="\\"?Ee+=ve(te):Ee+=oe;const J=te.currentChar();return J===$i||J===iu?(d(Nr.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),J===$i&&(te.next(),m(te,"'")),Ee):(m(te,"'"),Ee)}function ve(te){const oe=te.currentChar();switch(oe){case"\\":case"'":return te.next(),`\\${oe}`;case"u":return xe(te,oe,4);case"U":return xe(te,oe,6);default:return d(Nr.UNKNOWN_ESCAPE_SEQUENCE,i(),0,oe),""}}function xe(te,oe,Ee){m(te,oe);let J="";for(let Q=0;Q<Ee;Q++){const _e=re(te);if(!_e){d(Nr.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${oe}${J}${te.currentChar()}`);break}J+=_e}return`\\${oe}${J}`}function je(te){return te!=="{"&&te!=="}"&&te!==Yl&&te!==$i}function nt(te){y(te);let oe="",Ee="";for(;oe=N(te,je);)Ee+=oe;return Ee}function ue(te){let oe="",Ee="";for(;oe=V(te);)Ee+=oe;return Ee}function j(te){const oe=Ee=>{const J=te.currentChar();return J==="{"||J==="@"||J==="|"||J==="("||J===")"||!J||J===Yl?Ee:(Ee+=J,te.next(),oe(Ee))};return oe("")}function he(te){y(te);const oe=m(te,"|");return y(te),oe}function K(te,oe){let Ee=null;switch(te.currentChar()){case"{":return oe.braceNest>=1&&d(Nr.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),te.next(),Ee=h(oe,2,"{"),y(te),oe.braceNest++,Ee;case"}":return oe.braceNest>0&&oe.currentType===2&&d(Nr.EMPTY_PLACEHOLDER,i(),0),te.next(),Ee=h(oe,3,"}"),oe.braceNest--,oe.braceNest>0&&y(te),oe.inLinked&&oe.braceNest===0&&(oe.inLinked=!1),Ee;case"@":return oe.braceNest>0&&d(Nr.UNTERMINATED_CLOSING_BRACE,i(),0),Ee=Fe(te,oe)||f(oe),oe.braceNest=0,Ee;default:{let Q=!0,_e=!0,ie=!0;if(M(te))return oe.braceNest>0&&d(Nr.UNTERMINATED_CLOSING_BRACE,i(),0),Ee=h(oe,1,he(te)),oe.braceNest=0,oe.inLinked=!1,Ee;if(oe.braceNest>0&&(oe.currentType===4||oe.currentType===5||oe.currentType===6))return d(Nr.UNTERMINATED_CLOSING_BRACE,i(),0),oe.braceNest=0,Oe(te,oe);if(Q=_(te,oe))return Ee=h(oe,4,fe(te)),y(te),Ee;if(_e=w(te,oe))return Ee=h(oe,5,se(te)),y(te),Ee;if(ie=E(te,oe))return Ee=h(oe,6,we(te)),y(te),Ee;if(!Q&&!_e&&!ie)return Ee=h(oe,12,nt(te)),d(Nr.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,Ee.value),y(te),Ee;break}}return Ee}function Fe(te,oe){const{currentType:Ee}=oe;let J=null;const Q=te.currentChar();switch((Ee===7||Ee===8||Ee===11||Ee===9)&&(Q===$i||Q===Yl)&&d(Nr.INVALID_LINKED_FORMAT,i(),0),Q){case"@":return te.next(),J=h(oe,7,"@"),oe.inLinked=!0,J;case".":return y(te),te.next(),h(oe,8,".");case":":return y(te),te.next(),h(oe,9,":");default:return M(te)?(J=h(oe,1,he(te)),oe.braceNest=0,oe.inLinked=!1,J):C(te,oe)||I(te,oe)?(y(te),Fe(te,oe)):T(te,oe)?(y(te),h(oe,11,ue(te))):k(te,oe)?(y(te),Q==="{"?K(te,oe)||J:h(oe,10,j(te))):(Ee===7&&d(Nr.INVALID_LINKED_FORMAT,i(),0),oe.braceNest=0,oe.inLinked=!1,Oe(te,oe))}}function Oe(te,oe){let Ee={type:13};if(oe.braceNest>0)return K(te,oe)||f(oe);if(oe.inLinked)return Fe(te,oe)||f(oe);switch(te.currentChar()){case"{":return K(te,oe)||f(oe);case"}":return d(Nr.UNBALANCED_CLOSING_BRACE,i(),0),te.next(),h(oe,3,"}");case"@":return Fe(te,oe)||f(oe);default:{if(M(te))return Ee=h(oe,1,he(te)),oe.braceNest=0,oe.inLinked=!1,Ee;if(L(te))return h(oe,0,le(te));break}}return Ee}function Re(){const{currentType:te,offset:oe,startLoc:Ee,endLoc:J}=l;return l.lastType=te,l.lastOffset=oe,l.lastStartLoc=Ee,l.lastEndLoc=J,l.offset=s(),l.startLoc=i(),r.currentChar()===iu?h(l,13):Oe(r,l)}return{nextToken:Re,currentOffset:s,currentPosition:i,context:c}}const sfe="parser",ife=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function ofe(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):""}}}function afe(t={}){const e=t.location!==!1,{onError:n}=t;function r(g,S,_,w,...E){const C=g.currentPosition();if(C.offset+=w,C.column+=w,n){const T=e?U2(_,C):null,I=d_(S,T,{domain:sfe,args:E});n(I)}}function s(g,S,_){const w={type:g};return e&&(w.start=S,w.end=S,w.loc={start:_,end:_}),w}function i(g,S,_,w){e&&(g.end=S,g.loc&&(g.loc.end=_))}function o(g,S){const _=g.context(),w=s(3,_.offset,_.startLoc);return w.value=S,i(w,g.currentOffset(),g.currentPosition()),w}function a(g,S){const _=g.context(),{lastOffset:w,lastStartLoc:E}=_,C=s(5,w,E);return C.index=parseInt(S,10),g.nextToken(),i(C,g.currentOffset(),g.currentPosition()),C}function l(g,S){const _=g.context(),{lastOffset:w,lastStartLoc:E}=_,C=s(4,w,E);return C.key=S,g.nextToken(),i(C,g.currentOffset(),g.currentPosition()),C}function c(g,S){const _=g.context(),{lastOffset:w,lastStartLoc:E}=_,C=s(9,w,E);return C.value=S.replace(ife,ofe),g.nextToken(),i(C,g.currentOffset(),g.currentPosition()),C}function u(g){const S=g.nextToken(),_=g.context(),{lastOffset:w,lastStartLoc:E}=_,C=s(8,w,E);return S.type!==11?(r(g,Nr.UNEXPECTED_EMPTY_LINKED_MODIFIER,_.lastStartLoc,0),C.value="",i(C,w,E),{nextConsumeToken:S,node:C}):(S.value==null&&r(g,Nr.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,sl(S)),C.value=S.value||"",i(C,g.currentOffset(),g.currentPosition()),{node:C})}function d(g,S){const _=g.context(),w=s(7,_.offset,_.startLoc);return w.value=S,i(w,g.currentOffset(),g.currentPosition()),w}function h(g){const S=g.context(),_=s(6,S.offset,S.startLoc);let w=g.nextToken();if(w.type===8){const E=u(g);_.modifier=E.node,w=E.nextConsumeToken||g.nextToken()}switch(w.type!==9&&r(g,Nr.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,sl(w)),w=g.nextToken(),w.type===2&&(w=g.nextToken()),w.type){case 10:w.value==null&&r(g,Nr.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,sl(w)),_.key=d(g,w.value||"");break;case 4:w.value==null&&r(g,Nr.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,sl(w)),_.key=l(g,w.value||"");break;case 5:w.value==null&&r(g,Nr.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,sl(w)),_.key=a(g,w.value||"");break;case 6:w.value==null&&r(g,Nr.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,sl(w)),_.key=c(g,w.value||"");break;default:{r(g,Nr.UNEXPECTED_EMPTY_LINKED_KEY,S.lastStartLoc,0);const E=g.context(),C=s(7,E.offset,E.startLoc);return C.value="",i(C,E.offset,E.startLoc),_.key=C,i(_,E.offset,E.startLoc),{nextConsumeToken:w,node:_}}}return i(_,g.currentOffset(),g.currentPosition()),{node:_}}function f(g){const S=g.context(),_=S.currentType===1?g.currentOffset():S.offset,w=S.currentType===1?S.endLoc:S.startLoc,E=s(2,_,w);E.items=[];let C=null;do{const k=C||g.nextToken();switch(C=null,k.type){case 0:k.value==null&&r(g,Nr.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,sl(k)),E.items.push(o(g,k.value||""));break;case 5:k.value==null&&r(g,Nr.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,sl(k)),E.items.push(a(g,k.value||""));break;case 4:k.value==null&&r(g,Nr.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,sl(k)),E.items.push(l(g,k.value||""));break;case 6:k.value==null&&r(g,Nr.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,sl(k)),E.items.push(c(g,k.value||""));break;case 7:{const M=h(g);E.items.push(M.node),C=M.nextConsumeToken||null;break}}}while(S.currentType!==13&&S.currentType!==1);const T=S.currentType===1?S.lastOffset:g.currentOffset(),I=S.currentType===1?S.lastEndLoc:g.currentPosition();return i(E,T,I),E}function m(g,S,_,w){const E=g.context();let C=w.items.length===0;const T=s(1,S,_);T.cases=[],T.cases.push(w);do{const I=f(g);C||(C=I.items.length===0),T.cases.push(I)}while(E.currentType!==13);return C&&r(g,Nr.MUST_HAVE_MESSAGES_IN_PLURAL,_,0),i(T,g.currentOffset(),g.currentPosition()),T}function v(g){const S=g.context(),{offset:_,startLoc:w}=S,E=f(g);return S.currentType===13?E:m(g,_,w,E)}function y(g){const S=rfe(g,js({},t)),_=S.context(),w=s(0,_.offset,_.startLoc);return e&&w.loc&&(w.loc.source=g),w.body=v(S),t.onCacheKey&&(w.cacheKey=t.onCacheKey(g)),_.currentType!==13&&r(S,Nr.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,g[_.offset]||""),i(w,S.currentOffset(),S.currentPosition()),w}return{parse:y}}function sl(t){if(t.type===13)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"":e}function lfe(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:i=>(n.helpers.add(i),i)}}function GP(t,e){for(let n=0;n<t.length;n++)LT(t[n],e)}function LT(t,e){switch(t.type){case 1:GP(t.cases,e),e.helper("plural");break;case 2:GP(t.items,e);break;case 6:{LT(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function cfe(t,e={}){const n=lfe(t);n.helper("normalize"),t.body&&LT(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function ufe(t){const e=t.body;return e.type===2?WP(e):e.cases.forEach(n=>WP(n)),t}function WP(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=RT(e);for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.type===3||r.type===9)&&delete r.value}}}}function xf(t){switch(t.t=t.type,t.type){case 0:{const e=t;xf(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let r=0;r<n.length;r++)xf(n[r]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let r=0;r<n.length;r++)xf(n[r]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;xf(e.key),e.k=e.key,delete e.key,e.modifier&&(xf(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}}delete t.type}function dfe(t,e){const{filename:n,breakLineCode:r,needIndent:s}=e,i=e.location!==!1,o={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:s,indentLevel:0};i&&t.loc&&(o.source=t.loc.source);const a=()=>o;function l(v,y){o.code+=v}function c(v,y=!0){const g=y?r:"";l(s?g+"  ".repeat(v):g)}function u(v=!0){const y=++o.indentLevel;v&&c(y)}function d(v=!0){const y=--o.indentLevel;v&&c(y)}function h(){c(o.indentLevel)}return{context:a,push:l,indent:u,deindent:d,newline:h,helper:v=>`_${v}`,needIndent:()=>o.needIndent}}function hfe(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),gp(t,e.key),e.modifier?(t.push(", "),gp(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function ffe(t,e){const{helper:n,needIndent:r}=t;t.push(`${n("normalize")}([`),t.indent(r());const s=e.items.length;for(let i=0;i<s&&(gp(t,e.items[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}function pfe(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(r());const s=e.cases.length;for(let i=0;i<s&&(gp(t,e.cases[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}}function mfe(t,e){e.body?gp(t,e.body):t.push("null")}function gp(t,e){const{helper:n}=t;switch(e.type){case 0:mfe(t,e);break;case 1:pfe(t,e);break;case 2:ffe(t,e);break;case 6:hfe(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const gfe=(t,e={})=>{const n=gn(e.mode)?e.mode:"normal",r=gn(e.filename)?e.filename:"message.intl";e.sourceMap;const s=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,i=e.needIndent?e.needIndent:n!=="arrow",o=t.helpers||[],a=dfe(t,{filename:r,breakLineCode:s,needIndent:i});a.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),a.indent(i),o.length>0&&(a.push(`const { ${RT(o.map(u=>`${u}: _${u}`),", ")} } = ctx`),a.newline()),a.push("return "),gp(a,t),a.deindent(i),a.push("}"),delete t.helpers;const{code:l,map:c}=a.context();return{ast:t,code:l,map:c?c.toJSON():void 0}};function vfe(t,e={}){const n=js({},e),r=!!n.jit,s=!!n.minify,i=n.optimize==null?!0:n.optimize,a=afe(n).parse(t);return r?(i&&ufe(a),s&&xf(a),{ast:a,code:""}):(cfe(a,n),gfe(a,n))}/*!
  * core-base v10.0.8
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function yfe(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Od().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Od().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function yl(t){return kr(t)&&OT(t)===0&&(ka(t,"b")||ka(t,"body"))}const gB=["b","body"];function bfe(t){return Yu(t,gB)}const vB=["c","cases"];function _fe(t){return Yu(t,vB,[])}const yB=["s","static"];function wfe(t){return Yu(t,yB)}const bB=["i","items"];function xfe(t){return Yu(t,bB,[])}const _B=["t","type"];function OT(t){return Yu(t,_B)}const wB=["v","value"];function uy(t,e){const n=Yu(t,wB);if(n!=null)return n;throw zg(e)}const xB=["m","modifier"];function Sfe(t){return Yu(t,xB)}const SB=["k","key"];function Efe(t){const e=Yu(t,SB);if(e)return e;throw zg(6)}function Yu(t,e,n){for(let r=0;r<e.length;r++){const s=e[r];if(ka(t,s)&&t[s]!=null)return t[s]}return n}const EB=[...gB,...vB,...yB,...bB,...SB,...xB,...wB,..._B];function zg(t){return new Error(`unhandled node type: ${t}`)}function xx(t){return n=>Cfe(n,t)}function Cfe(t,e){const n=bfe(e);if(n==null)throw zg(0);if(OT(n)===1){const i=_fe(n);return t.plural(i.reduce((o,a)=>[...o,jP(t,a)],[]))}else return jP(t,n)}function jP(t,e){const n=wfe(e);if(n!=null)return t.type==="text"?n:t.normalize([n]);{const r=xfe(e).reduce((s,i)=>[...s,z2(t,i)],[]);return t.normalize(r)}}function z2(t,e){const n=OT(e);switch(n){case 3:return uy(e,n);case 9:return uy(e,n);case 4:{const r=e;if(ka(r,"k")&&r.k)return t.interpolate(t.named(r.k));if(ka(r,"key")&&r.key)return t.interpolate(t.named(r.key));throw zg(n)}case 5:{const r=e;if(ka(r,"i")&&Is(r.i))return t.interpolate(t.list(r.i));if(ka(r,"index")&&Is(r.index))return t.interpolate(t.list(r.index));throw zg(n)}case 6:{const r=e,s=Sfe(r),i=Efe(r);return t.linked(z2(t,i),s?z2(t,s):void 0,t.type)}case 7:return uy(e,n);case 8:return uy(e,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const Tfe=t=>t;let dy=Gr();function Mfe(t,e={}){let n=!1;const r=e.onError||Xhe;return e.onError=s=>{n=!0,r(s)},{...vfe(t,e),detectError:n}}function Afe(t,e){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&gn(t)){Cr(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||Tfe)(t),s=dy[r];if(s)return s;const{ast:i,detectError:o}=Mfe(t,{...e,location:!1,jit:!0}),a=xx(i);return o?a:dy[r]=a}else{const n=t.cacheKey;if(n){const r=dy[n];return r||(dy[n]=xx(t))}else return xx(t)}}let $g=null;function kfe(t){$g=t}function Ife(t,e,n){$g&&$g.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const Pfe=Rfe("function:translate");function Rfe(t){return e=>$g&&$g.emit(t,e)}const lc={INVALID_ARGUMENT:Yhe,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},Lfe=24;function cc(t){return d_(t,null,void 0)}function NT(t,e){return e.locale!=null?KP(e.locale):KP(t.locale)}let Sx;function KP(t){if(gn(t))return t;if(os(t)){if(t.resolvedOnce&&Sx!=null)return Sx;if(t.constructor.name==="Function"){const e=t();if(jhe(e))throw cc(lc.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Sx=e}else throw cc(lc.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw cc(lc.NOT_SUPPORT_LOCALE_TYPE)}function Ofe(t,e,n){return[...new Set([n,...ws(e)?e:kr(e)?Object.keys(e):gn(e)?[e]:[n]])]}function CB(t,e,n){const r=gn(n)?n:Vg,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let i=s.__localeChainCache.get(r);if(!i){i=[];let o=[n];for(;ws(o);)o=qP(i,o,e);const a=ws(e)||!lr(e)?e:e.default?e.default:null;o=gn(a)?[a]:a,ws(o)&&qP(i,o,!1),s.__localeChainCache.set(r,i)}return i}function qP(t,e,n){let r=!0;for(let s=0;s<e.length&&Cr(r);s++){const i=e[s];gn(i)&&(r=Nfe(t,e[s],n))}return r}function Nfe(t,e,n){let r;const s=e.split("-");do{const i=s.join("-");r=Dfe(t,i,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function Dfe(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(ws(n)||lr(n))&&n[s]&&(r=n[s])}return r}const Xu=[];Xu[0]={w:[0],i:[3,0],"[":[4],o:[7]};Xu[1]={w:[1],".":[2],"[":[4],o:[7]};Xu[2]={w:[2],i:[3,0],0:[3,0]};Xu[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Xu[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Xu[5]={"'":[4,0],o:8,l:[5,0]};Xu[6]={'"':[4,0],o:8,l:[6,0]};const Ffe=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function Bfe(t){return Ffe.test(t)}function Ufe(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function zfe(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function $fe(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:Bfe(e)?Ufe(e):"*"+e}function Vfe(t){const e=[];let n=-1,r=0,s=0,i,o,a,l,c,u,d;const h=[];h[0]=()=>{o===void 0?o=a:o+=a},h[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},h[2]=()=>{h[0](),s++},h[3]=()=>{if(s>0)s--,r=4,h[0]();else{if(s=0,o===void 0||(o=$fe(o),o===!1))return!1;h[1]()}};function f(){const m=t[n+1];if(r===5&&m==="'"||r===6&&m==='"')return n++,a="\\"+m,h[0](),!0}for(;r!==null;)if(n++,i=t[n],!(i==="\\"&&f())){if(l=zfe(i),d=Xu[r],c=d[l]||d.l||8,c===8||(r=c[0],c[1]!==void 0&&(u=h[c[1]],u&&(a=i,u()===!1))))return;if(r===7)return e}}const YP=new Map;function Hfe(t,e){return kr(t)?t[e]:null}function Gfe(t,e){if(!kr(t))return null;let n=YP.get(e);if(n||(n=Vfe(e),n&&YP.set(e,n)),!n)return null;const r=n.length;let s=t,i=0;for(;i<r;){const o=n[i];if(EB.includes(o)&&yl(s))return null;const a=s[o];if(a===void 0||os(s))return null;s=a,i++}return s}const Wfe="10.0.8",h_=-1,Vg="en-US",XP="",ZP=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function jfe(){return{upper:(t,e)=>e==="text"&&gn(t)?t.toUpperCase():e==="vnode"&&kr(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&gn(t)?t.toLowerCase():e==="vnode"&&kr(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&gn(t)?ZP(t):e==="vnode"&&kr(t)&&"__v_isVNode"in t?ZP(t.children):t}}let TB;function Kfe(t){TB=t}let MB;function qfe(t){MB=t}let AB;function Yfe(t){AB=t}let kB=null;const Xfe=t=>{kB=t},Zfe=()=>kB;let IB=null;const JP=t=>{IB=t},Jfe=()=>IB;let QP=0;function Qfe(t={}){const e=os(t.onWarn)?t.onWarn:Uhe,n=gn(t.version)?t.version:Wfe,r=gn(t.locale)||os(t.locale)?t.locale:Vg,s=os(r)?Vg:r,i=ws(t.fallbackLocale)||lr(t.fallbackLocale)||gn(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,o=lr(t.messages)?t.messages:Ex(s),a=lr(t.datetimeFormats)?t.datetimeFormats:Ex(s),l=lr(t.numberFormats)?t.numberFormats:Ex(s),c=js(Gr(),t.modifiers,jfe()),u=t.pluralRules||Gr(),d=os(t.missing)?t.missing:null,h=Cr(t.missingWarn)||mp(t.missingWarn)?t.missingWarn:!0,f=Cr(t.fallbackWarn)||mp(t.fallbackWarn)?t.fallbackWarn:!0,m=!!t.fallbackFormat,v=!!t.unresolving,y=os(t.postTranslation)?t.postTranslation:null,g=lr(t.processor)?t.processor:null,S=Cr(t.warnHtmlMessage)?t.warnHtmlMessage:!0,_=!!t.escapeParameter,w=os(t.messageCompiler)?t.messageCompiler:TB,E=os(t.messageResolver)?t.messageResolver:MB||Hfe,C=os(t.localeFallbacker)?t.localeFallbacker:AB||Ofe,T=kr(t.fallbackContext)?t.fallbackContext:void 0,I=t,k=kr(I.__datetimeFormatters)?I.__datetimeFormatters:new Map,M=kr(I.__numberFormatters)?I.__numberFormatters:new Map,L=kr(I.__meta)?I.__meta:{};QP++;const N={version:n,cid:QP,locale:r,fallbackLocale:i,messages:o,modifiers:c,pluralRules:u,missing:d,missingWarn:h,fallbackWarn:f,fallbackFormat:m,unresolving:v,postTranslation:y,processor:g,warnHtmlMessage:S,escapeParameter:_,messageCompiler:w,messageResolver:E,localeFallbacker:C,fallbackContext:T,onWarn:e,__meta:L};return N.datetimeFormats=a,N.numberFormats=l,N.__datetimeFormatters=k,N.__numberFormatters=M,__INTLIFY_PROD_DEVTOOLS__&&Ife(N,n,L),N}const Ex=t=>({[t]:Gr()});function DT(t,e,n,r,s){const{missing:i,onWarn:o}=t;if(i!==null){const a=i(t,n,e,s);return gn(a)?a:e}else return e}function wm(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function epe(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function tpe(t,e){const n=e.indexOf(t);if(n===-1)return!1;for(let r=n+1;r<e.length;r++)if(epe(t,e[r]))return!0;return!1}function eR(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[l,c,u,d]=$2(...e),h=Cr(u.missingWarn)?u.missingWarn:t.missingWarn;Cr(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const f=!!u.part,m=NT(t,u),v=o(t,s,m);if(!gn(l)||l==="")return new Intl.DateTimeFormat(m,d).format(c);let y={},g,S=null;const _="datetime format";for(let C=0;C<v.length&&(g=v[C],y=n[g]||{},S=y[l],!lr(S));C++)DT(t,l,g,h,_);if(!lr(S)||!gn(g))return r?h_:l;let w=`${g}__${l}`;u_(d)||(w=`${w}__${JSON.stringify(d)}`);let E=a.get(w);return E||(E=new Intl.DateTimeFormat(g,js({},S,d)),a.set(w,E)),f?E.formatToParts(c):E.format(c)}const PB=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function $2(...t){const[e,n,r,s]=t,i=Gr();let o=Gr(),a;if(gn(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw cc(lc.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(c);try{a.toISOString()}catch{throw cc(lc.INVALID_ISO_DATE_ARGUMENT)}}else if(Vhe(e)){if(isNaN(e.getTime()))throw cc(lc.INVALID_DATE_ARGUMENT);a=e}else if(Is(e))a=e;else throw cc(lc.INVALID_ARGUMENT);return gn(n)?i.key=n:lr(n)&&Object.keys(n).forEach(l=>{PB.includes(l)?o[l]=n[l]:i[l]=n[l]}),gn(r)?i.locale=r:lr(r)&&(o=r),lr(s)&&(o=s),[i.key||"",a,i,o]}function tR(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function nR(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__numberFormatters:a}=t,[l,c,u,d]=V2(...e),h=Cr(u.missingWarn)?u.missingWarn:t.missingWarn;Cr(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const f=!!u.part,m=NT(t,u),v=o(t,s,m);if(!gn(l)||l==="")return new Intl.NumberFormat(m,d).format(c);let y={},g,S=null;const _="number format";for(let C=0;C<v.length&&(g=v[C],y=n[g]||{},S=y[l],!lr(S));C++)DT(t,l,g,h,_);if(!lr(S)||!gn(g))return r?h_:l;let w=`${g}__${l}`;u_(d)||(w=`${w}__${JSON.stringify(d)}`);let E=a.get(w);return E||(E=new Intl.NumberFormat(g,js({},S,d)),a.set(w,E)),f?E.formatToParts(c):E.format(c)}const RB=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function V2(...t){const[e,n,r,s]=t,i=Gr();let o=Gr();if(!Is(e))throw cc(lc.INVALID_ARGUMENT);const a=e;return gn(n)?i.key=n:lr(n)&&Object.keys(n).forEach(l=>{RB.includes(l)?o[l]=n[l]:i[l]=n[l]}),gn(r)?i.locale=r:lr(r)&&(o=r),lr(s)&&(o=s),[i.key||"",a,i,o]}function rR(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}const npe=t=>t,rpe=t=>"",spe="text",ipe=t=>t.length===0?"":RT(t),ope=Khe;function sR(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function ape(t){const e=Is(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(Is(t.named.count)||Is(t.named.n))?Is(t.named.count)?t.named.count:Is(t.named.n)?t.named.n:e:e}function lpe(t,e){e.count||(e.count=t),e.n||(e.n=t)}function cpe(t={}){const e=t.locale,n=ape(t),r=kr(t.pluralRules)&&gn(e)&&os(t.pluralRules[e])?t.pluralRules[e]:sR,s=kr(t.pluralRules)&&gn(e)&&os(t.pluralRules[e])?sR:void 0,i=g=>g[r(n,g.length,s)],o=t.list||[],a=g=>o[g],l=t.named||Gr();Is(t.pluralIndex)&&lpe(n,l);const c=g=>l[g];function u(g,S){const _=os(t.messages)?t.messages(g,!!S):kr(t.messages)?t.messages[g]:!1;return _||(t.parent?t.parent.message(g):rpe)}const d=g=>t.modifiers?t.modifiers[g]:npe,h=lr(t.processor)&&os(t.processor.normalize)?t.processor.normalize:ipe,f=lr(t.processor)&&os(t.processor.interpolate)?t.processor.interpolate:ope,m=lr(t.processor)&&gn(t.processor.type)?t.processor.type:spe,y={list:a,named:c,plural:i,linked:(g,...S)=>{const[_,w]=S;let E="text",C="";S.length===1?kr(_)?(C=_.modifier||C,E=_.type||E):gn(_)&&(C=_||C):S.length===2&&(gn(_)&&(C=_||C),gn(w)&&(E=w||E));const T=u(g,!0)(y),I=E==="vnode"&&ws(T)&&C?T[0]:T;return C?d(C)(I,E):I},message:u,type:m,interpolate:f,normalize:h,values:js(Gr(),o,l)};return y}const iR=()=>"",Ko=t=>os(t);function oR(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:i,fallbackLocale:o,messages:a}=t,[l,c]=H2(...e),u=Cr(c.missingWarn)?c.missingWarn:t.missingWarn,d=Cr(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn,h=Cr(c.escapeParameter)?c.escapeParameter:t.escapeParameter,f=!!c.resolvedMessage,m=gn(c.default)||Cr(c.default)?Cr(c.default)?i?l:()=>l:c.default:n?i?l:()=>l:null,v=n||m!=null&&(gn(m)||os(m)),y=NT(t,c);h&&upe(c);let[g,S,_]=f?[l,y,a[y]||Gr()]:LB(t,l,y,o,d,u),w=g,E=l;if(!f&&!(gn(w)||yl(w)||Ko(w))&&v&&(w=m,E=w),!f&&(!(gn(w)||yl(w)||Ko(w))||!gn(S)))return s?h_:l;let C=!1;const T=()=>{C=!0},I=Ko(w)?w:OB(t,l,S,w,E,T);if(C)return w;const k=fpe(t,S,_,c),M=cpe(k),L=dpe(t,I,M);let N=r?r(L,l):L;if(h&&gn(N)&&(N=Ghe(N)),__INTLIFY_PROD_DEVTOOLS__){const G={timestamp:Date.now(),key:gn(l)?l:Ko(w)?w.key:"",locale:S||(Ko(w)?w.locale:""),format:gn(w)?w:Ko(w)?w.source:"",message:N};G.meta=js({},t.__meta,Zfe()||{}),Pfe(G)}return N}function upe(t){ws(t.list)?t.list=t.list.map(e=>gn(e)?$P(e):e):kr(t.named)&&Object.keys(t.named).forEach(e=>{gn(t.named[e])&&(t.named[e]=$P(t.named[e]))})}function LB(t,e,n,r,s,i){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:c}=t,u=c(t,r,n);let d=Gr(),h,f=null;const m="translate";for(let v=0;v<u.length&&(h=u[v],d=o[h]||Gr(),(f=l(d,e))===null&&(f=d[e]),!(gn(f)||yl(f)||Ko(f)));v++)if(!tpe(h,u)){const y=DT(t,e,h,i,m);y!==e&&(f=y)}return[f,h,d]}function OB(t,e,n,r,s,i){const{messageCompiler:o,warnHtmlMessage:a}=t;if(Ko(r)){const c=r;return c.locale=c.locale||n,c.key=c.key||e,c}if(o==null){const c=()=>r;return c.locale=n,c.key=e,c}const l=o(r,hpe(t,n,s,r,a,i));return l.locale=n,l.key=e,l.source=r,l}function dpe(t,e,n){return e(n)}function H2(...t){const[e,n,r]=t,s=Gr();if(!gn(e)&&!Is(e)&&!Ko(e)&&!yl(e))throw cc(lc.INVALID_ARGUMENT);const i=Is(e)?String(e):(Ko(e),e);return Is(n)?s.plural=n:gn(n)?s.default=n:lr(n)&&!u_(n)?s.named=n:ws(n)&&(s.list=n),Is(r)?s.plural=r:gn(r)?s.default=r:lr(r)&&js(s,r),[i,s]}function hpe(t,e,n,r,s,i){return{locale:e,key:n,warnHtmlMessage:s,onError:o=>{throw i&&i(o),o},onCacheKey:o=>zhe(e,n,o)}}function fpe(t,e,n,r){const{modifiers:s,pluralRules:i,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:c,fallbackContext:u}=t,h={locale:e,modifiers:s,pluralRules:i,messages:(f,m)=>{let v=o(n,f);if(v==null&&(u||m)){const[,,y]=LB(u||t,f,e,a,l,c);v=o(y,f)}if(gn(v)||yl(v)){let y=!1;const S=OB(t,f,e,v,f,()=>{y=!0});return y?iR:S}else return Ko(v)?v:iR}};return t.processor&&(h.processor=t.processor),r.list&&(h.list=r.list),r.named&&(h.named=r.named),Is(r.plural)&&(h.pluralIndex=r.plural),h}yfe();/*!
  * vue-i18n v10.0.8
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const ppe="10.0.8";function mpe(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(Od().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(Od().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Od().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Od().__INTLIFY_PROD_DEVTOOLS__=!1)}const Xi={UNEXPECTED_RETURN_TYPE:Lfe,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function vo(t,...e){return d_(t,null,void 0)}const G2=qu("__translateVNode"),W2=qu("__datetimeParts"),j2=qu("__numberParts"),NB=qu("__setPluralRules"),DB=qu("__injectWithOption"),K2=qu("__dispose");function Hg(t){if(!kr(t)||yl(t))return t;for(const e in t)if(ka(t,e))if(!e.includes("."))kr(t[e])&&Hg(t[e]);else{const n=e.split("."),r=n.length-1;let s=t,i=!1;for(let o=0;o<r;o++){if(n[o]==="__proto__")throw new Error(`unsafe key: ${n[o]}`);if(n[o]in s||(s[n[o]]=Gr()),!kr(s[n[o]])){i=!0;break}s=s[n[o]]}if(i||(yl(s)?EB.includes(n[r])||delete t[e]:(s[n[r]]=t[e],delete t[e])),!yl(s)){const o=s[n[r]];kr(o)&&Hg(o)}}return t}function FT(t,e){const{messages:n,__i18n:r,messageResolver:s,flatJson:i}=e,o=lr(n)?n:ws(r)?Gr():{[t]:Gr()};if(ws(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:c}=a;l?(o[l]=o[l]||Gr(),tb(c,o[l])):tb(c,o)}else gn(a)&&tb(JSON.parse(a),o)}),s==null&&i)for(const a in o)ka(o,a)&&Hg(o[a]);return o}function FB(t){return t.type}function BB(t,e,n){let r=kr(e.messages)?e.messages:Gr();"__i18nGlobal"in n&&(r=FT(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(i=>{t.mergeLocaleMessage(i,r[i])});{if(kr(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(kr(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function aR(t){return ae(vh,null,t,0)}const lR="__INTLIFY_META__",cR=()=>[],gpe=()=>!1;let uR=0;function dR(t){return(e,n,r,s)=>t(n,r,tn()||void 0,s)}const vpe=()=>{const t=tn();let e=null;return t&&(e=FB(t)[lR])?{[lR]:e}:null};function BT(t={}){const{__root:e,__injectWithOption:n}=t,r=e===void 0,s=t.flatJson,i=Zb?H:br;let o=Cr(t.inheritLocale)?t.inheritLocale:!0;const a=i(e&&o?e.locale.value:gn(t.locale)?t.locale:Vg),l=i(e&&o?e.fallbackLocale.value:gn(t.fallbackLocale)||ws(t.fallbackLocale)||lr(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:a.value),c=i(FT(a.value,t)),u=i(lr(t.datetimeFormats)?t.datetimeFormats:{[a.value]:{}}),d=i(lr(t.numberFormats)?t.numberFormats:{[a.value]:{}});let h=e?e.missingWarn:Cr(t.missingWarn)||mp(t.missingWarn)?t.missingWarn:!0,f=e?e.fallbackWarn:Cr(t.fallbackWarn)||mp(t.fallbackWarn)?t.fallbackWarn:!0,m=e?e.fallbackRoot:Cr(t.fallbackRoot)?t.fallbackRoot:!0,v=!!t.fallbackFormat,y=os(t.missing)?t.missing:null,g=os(t.missing)?dR(t.missing):null,S=os(t.postTranslation)?t.postTranslation:null,_=e?e.warnHtmlMessage:Cr(t.warnHtmlMessage)?t.warnHtmlMessage:!0,w=!!t.escapeParameter;const E=e?e.modifiers:lr(t.modifiers)?t.modifiers:{};let C=t.pluralRules||e&&e.pluralRules,T;T=(()=>{r&&JP(null);const ie={version:ppe,locale:a.value,fallbackLocale:l.value,messages:c.value,modifiers:E,pluralRules:C,missing:g===null?void 0:g,missingWarn:h,fallbackWarn:f,fallbackFormat:v,unresolving:!0,postTranslation:S===null?void 0:S,warnHtmlMessage:_,escapeParameter:w,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};ie.datetimeFormats=u.value,ie.numberFormats=d.value,ie.__datetimeFormatters=lr(T)?T.__datetimeFormatters:void 0,ie.__numberFormatters=lr(T)?T.__numberFormatters:void 0;const Te=Qfe(ie);return r&&JP(Te),Te})(),wm(T,a.value,l.value);function k(){return[a.value,l.value,c.value,u.value,d.value]}const M=R({get:()=>a.value,set:ie=>{a.value=ie,T.locale=a.value}}),L=R({get:()=>l.value,set:ie=>{l.value=ie,T.fallbackLocale=l.value,wm(T,a.value,ie)}}),N=R(()=>c.value),G=R(()=>u.value),V=R(()=>d.value);function X(){return os(S)?S:null}function F(ie){S=ie,T.postTranslation=ie}function $(){return y}function O(ie){ie!==null&&(g=dR(ie)),y=ie,T.missing=g}const z=(ie,Te,We,ut,lt,St)=>{k();let Ot;try{__INTLIFY_PROD_DEVTOOLS__,r||(T.fallbackContext=e?Jfe():void 0),Ot=ie(T)}finally{__INTLIFY_PROD_DEVTOOLS__,r||(T.fallbackContext=void 0)}if(We!=="translate exists"&&Is(Ot)&&Ot===h_||We==="translate exists"&&!Ot){const[et,ht]=Te();return e&&m?ut(e):lt(et)}else{if(St(Ot))return Ot;throw vo(Xi.UNEXPECTED_RETURN_TYPE)}};function re(...ie){return z(Te=>Reflect.apply(oR,null,[Te,...ie]),()=>H2(...ie),"translate",Te=>Reflect.apply(Te.t,Te,[...ie]),Te=>Te,Te=>gn(Te))}function q(...ie){const[Te,We,ut]=ie;if(ut&&!kr(ut))throw vo(Xi.INVALID_ARGUMENT);return re(Te,We,js({resolvedMessage:!0},ut||{}))}function le(...ie){return z(Te=>Reflect.apply(eR,null,[Te,...ie]),()=>$2(...ie),"datetime format",Te=>Reflect.apply(Te.d,Te,[...ie]),()=>XP,Te=>gn(Te))}function fe(...ie){return z(Te=>Reflect.apply(nR,null,[Te,...ie]),()=>V2(...ie),"number format",Te=>Reflect.apply(Te.n,Te,[...ie]),()=>XP,Te=>gn(Te))}function se(ie){return ie.map(Te=>gn(Te)||Is(Te)||Cr(Te)?aR(String(Te)):Te)}const we={normalize:se,interpolate:ie=>ie,type:"vnode"};function ve(...ie){return z(Te=>{let We;const ut=Te;try{ut.processor=we,We=Reflect.apply(oR,null,[ut,...ie])}finally{ut.processor=null}return We},()=>H2(...ie),"translate",Te=>Te[G2](...ie),Te=>[aR(Te)],Te=>ws(Te))}function xe(...ie){return z(Te=>Reflect.apply(nR,null,[Te,...ie]),()=>V2(...ie),"number format",Te=>Te[j2](...ie),cR,Te=>gn(Te)||ws(Te))}function je(...ie){return z(Te=>Reflect.apply(eR,null,[Te,...ie]),()=>$2(...ie),"datetime format",Te=>Te[W2](...ie),cR,Te=>gn(Te)||ws(Te))}function nt(ie){C=ie,T.pluralRules=C}function ue(ie,Te){return z(()=>{if(!ie)return!1;const We=gn(Te)?Te:a.value,ut=K(We),lt=T.messageResolver(ut,ie);return yl(lt)||Ko(lt)||gn(lt)},()=>[ie],"translate exists",We=>Reflect.apply(We.te,We,[ie,Te]),gpe,We=>Cr(We))}function j(ie){let Te=null;const We=CB(T,l.value,a.value);for(let ut=0;ut<We.length;ut++){const lt=c.value[We[ut]]||{},St=T.messageResolver(lt,ie);if(St!=null){Te=St;break}}return Te}function he(ie){const Te=j(ie);return Te??(e?e.tm(ie)||{}:{})}function K(ie){return c.value[ie]||{}}function Fe(ie,Te){if(s){const We={[ie]:Te};for(const ut in We)ka(We,ut)&&Hg(We[ut]);Te=We[ie]}c.value[ie]=Te,T.messages=c.value}function Oe(ie,Te){c.value[ie]=c.value[ie]||{};const We={[ie]:Te};if(s)for(const ut in We)ka(We,ut)&&Hg(We[ut]);Te=We[ie],tb(Te,c.value[ie]),T.messages=c.value}function Re(ie){return u.value[ie]||{}}function te(ie,Te){u.value[ie]=Te,T.datetimeFormats=u.value,tR(T,ie,Te)}function oe(ie,Te){u.value[ie]=js(u.value[ie]||{},Te),T.datetimeFormats=u.value,tR(T,ie,Te)}function Ee(ie){return d.value[ie]||{}}function J(ie,Te){d.value[ie]=Te,T.numberFormats=d.value,rR(T,ie,Te)}function Q(ie,Te){d.value[ie]=js(d.value[ie]||{},Te),T.numberFormats=d.value,rR(T,ie,Te)}uR++,e&&Zb&&(Be(e.locale,ie=>{o&&(a.value=ie,T.locale=ie,wm(T,a.value,l.value))}),Be(e.fallbackLocale,ie=>{o&&(l.value=ie,T.fallbackLocale=ie,wm(T,a.value,l.value))}));const _e={id:uR,locale:M,fallbackLocale:L,get inheritLocale(){return o},set inheritLocale(ie){o=ie,ie&&e&&(a.value=e.locale.value,l.value=e.fallbackLocale.value,wm(T,a.value,l.value))},get availableLocales(){return Object.keys(c.value).sort()},messages:N,get modifiers(){return E},get pluralRules(){return C||{}},get isGlobal(){return r},get missingWarn(){return h},set missingWarn(ie){h=ie,T.missingWarn=h},get fallbackWarn(){return f},set fallbackWarn(ie){f=ie,T.fallbackWarn=f},get fallbackRoot(){return m},set fallbackRoot(ie){m=ie},get fallbackFormat(){return v},set fallbackFormat(ie){v=ie,T.fallbackFormat=v},get warnHtmlMessage(){return _},set warnHtmlMessage(ie){_=ie,T.warnHtmlMessage=ie},get escapeParameter(){return w},set escapeParameter(ie){w=ie,T.escapeParameter=ie},t:re,getLocaleMessage:K,setLocaleMessage:Fe,mergeLocaleMessage:Oe,getPostTranslationHandler:X,setPostTranslationHandler:F,getMissingHandler:$,setMissingHandler:O,[NB]:nt};return _e.datetimeFormats=G,_e.numberFormats=V,_e.rt=q,_e.te=ue,_e.tm=he,_e.d=le,_e.n=fe,_e.getDateTimeFormat=Re,_e.setDateTimeFormat=te,_e.mergeDateTimeFormat=oe,_e.getNumberFormat=Ee,_e.setNumberFormat=J,_e.mergeNumberFormat=Q,_e[DB]=n,_e[G2]=ve,_e[W2]=je,_e[j2]=xe,_e}function ype(t){const e=gn(t.locale)?t.locale:Vg,n=gn(t.fallbackLocale)||ws(t.fallbackLocale)||lr(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,r=os(t.missing)?t.missing:void 0,s=Cr(t.silentTranslationWarn)||mp(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,i=Cr(t.silentFallbackWarn)||mp(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,o=Cr(t.fallbackRoot)?t.fallbackRoot:!0,a=!!t.formatFallbackMessages,l=lr(t.modifiers)?t.modifiers:{},c=t.pluralizationRules,u=os(t.postTranslation)?t.postTranslation:void 0,d=gn(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,h=!!t.escapeParameterHtml,f=Cr(t.sync)?t.sync:!0;let m=t.messages;if(lr(t.sharedMessages)){const E=t.sharedMessages;m=Object.keys(E).reduce((T,I)=>{const k=T[I]||(T[I]={});return js(k,E[I]),T},m||{})}const{__i18n:v,__root:y,__injectWithOption:g}=t,S=t.datetimeFormats,_=t.numberFormats,w=t.flatJson;return{locale:e,fallbackLocale:n,messages:m,flatJson:w,datetimeFormats:S,numberFormats:_,missing:r,missingWarn:s,fallbackWarn:i,fallbackRoot:o,fallbackFormat:a,modifiers:l,pluralRules:c,postTranslation:u,warnHtmlMessage:d,escapeParameter:h,messageResolver:t.messageResolver,inheritLocale:f,__i18n:v,__root:y,__injectWithOption:g}}function q2(t={}){const e=BT(ype(t)),{__extender:n}=t,r={id:e.id,get locale(){return e.locale.value},set locale(s){e.locale.value=s},get fallbackLocale(){return e.fallbackLocale.value},set fallbackLocale(s){e.fallbackLocale.value=s},get messages(){return e.messages.value},get datetimeFormats(){return e.datetimeFormats.value},get numberFormats(){return e.numberFormats.value},get availableLocales(){return e.availableLocales},get missing(){return e.getMissingHandler()},set missing(s){e.setMissingHandler(s)},get silentTranslationWarn(){return Cr(e.missingWarn)?!e.missingWarn:e.missingWarn},set silentTranslationWarn(s){e.missingWarn=Cr(s)?!s:s},get silentFallbackWarn(){return Cr(e.fallbackWarn)?!e.fallbackWarn:e.fallbackWarn},set silentFallbackWarn(s){e.fallbackWarn=Cr(s)?!s:s},get modifiers(){return e.modifiers},get formatFallbackMessages(){return e.fallbackFormat},set formatFallbackMessages(s){e.fallbackFormat=s},get postTranslation(){return e.getPostTranslationHandler()},set postTranslation(s){e.setPostTranslationHandler(s)},get sync(){return e.inheritLocale},set sync(s){e.inheritLocale=s},get warnHtmlInMessage(){return e.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(s){e.warnHtmlMessage=s!=="off"},get escapeParameterHtml(){return e.escapeParameter},set escapeParameterHtml(s){e.escapeParameter=s},get pluralizationRules(){return e.pluralRules||{}},__composer:e,t(...s){return Reflect.apply(e.t,e,[...s])},rt(...s){return Reflect.apply(e.rt,e,[...s])},tc(...s){const[i,o,a]=s,l={plural:1};let c=null,u=null;if(!gn(i))throw vo(Xi.INVALID_ARGUMENT);const d=i;return gn(o)?l.locale=o:Is(o)?l.plural=o:ws(o)?c=o:lr(o)&&(u=o),gn(a)?l.locale=a:ws(a)?c=a:lr(a)&&(u=a),Reflect.apply(e.t,e,[d,c||u||{},l])},te(s,i){return e.te(s,i)},tm(s){return e.tm(s)},getLocaleMessage(s){return e.getLocaleMessage(s)},setLocaleMessage(s,i){e.setLocaleMessage(s,i)},mergeLocaleMessage(s,i){e.mergeLocaleMessage(s,i)},d(...s){return Reflect.apply(e.d,e,[...s])},getDateTimeFormat(s){return e.getDateTimeFormat(s)},setDateTimeFormat(s,i){e.setDateTimeFormat(s,i)},mergeDateTimeFormat(s,i){e.mergeDateTimeFormat(s,i)},n(...s){return Reflect.apply(e.n,e,[...s])},getNumberFormat(s){return e.getNumberFormat(s)},setNumberFormat(s,i){e.setNumberFormat(s,i)},mergeNumberFormat(s,i){e.mergeNumberFormat(s,i)}};return r.__extender=n,r}function bpe(t,e,n){return{beforeCreate(){const r=tn();if(!r)throw vo(Xi.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const i=s.i18n;if(s.__i18n&&(i.__i18n=s.__i18n),i.__root=e,this===this.$root)this.$i18n=hR(t,i);else{i.__injectWithOption=!0,i.__extender=n.__vueI18nExtend,this.$i18n=q2(i);const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}}else if(s.__i18n)if(this===this.$root)this.$i18n=hR(t,s);else{this.$i18n=q2({__i18n:s.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:e});const i=this.$i18n;i.__extender&&(i.__disposer=i.__extender(this.$i18n))}else this.$i18n=t;s.__i18nGlobal&&BB(e,s,s),this.$t=(...i)=>this.$i18n.t(...i),this.$rt=(...i)=>this.$i18n.rt(...i),this.$tc=(...i)=>this.$i18n.tc(...i),this.$te=(i,o)=>this.$i18n.te(i,o),this.$d=(...i)=>this.$i18n.d(...i),this.$n=(...i)=>this.$i18n.n(...i),this.$tm=i=>this.$i18n.tm(i),n.__setInstance(r,this.$i18n)},mounted(){},unmounted(){const r=tn();if(!r)throw vo(Xi.UNEXPECTED_ERROR);const s=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,s.__disposer&&(s.__disposer(),delete s.__disposer,delete s.__extender),n.__deleteInstance(r),delete this.$i18n}}}function hR(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[NB](e.pluralizationRules||t.pluralizationRules);const n=FT(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(r=>t.mergeLocaleMessage(r,n[r])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(r=>t.mergeDateTimeFormat(r,e.datetimeFormats[r])),e.numberFormats&&Object.keys(e.numberFormats).forEach(r=>t.mergeNumberFormat(r,e.numberFormats[r])),t}const UT={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function _pe({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,s)=>[...r,...s.type===xt?s.children:[s]],[]):e.reduce((n,r)=>{const s=t[r];return s&&(n[r]=s()),n},Gr())}function UB(){return xt}const wpe=de({name:"i18n-t",props:js({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>Is(t)||!isNaN(t)}},UT),setup(t,e){const{slots:n,attrs:r}=e,s=t.i18n||si({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(n).filter(d=>d!=="_"),o=Gr();t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=gn(t.plural)?+t.plural:t.plural);const a=_pe(e,i),l=s[G2](t.keypath,a,o),c=js(Gr(),r),u=gn(t.tag)||kr(t.tag)?t.tag:UB();return Ut(u,c,l)}}}),fR=wpe;function xpe(t){return ws(t)&&!gn(t[0])}function zB(t,e,n,r){const{slots:s,attrs:i}=e;return()=>{const o={part:!0};let a=Gr();t.locale&&(o.locale=t.locale),gn(t.format)?o.key=t.format:kr(t.format)&&(gn(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((h,f)=>n.includes(f)?js(Gr(),h,{[f]:t.format[f]}):h,Gr()));const l=r(t.value,o,a);let c=[o.key];ws(l)?c=l.map((h,f)=>{const m=s[h.type],v=m?m({[h.type]:h.value,index:f,parts:l}):[h.value];return xpe(v)&&(v[0].key=`${h.type}-${f}`),v}):gn(l)&&(c=[l]);const u=js(Gr(),i),d=gn(t.tag)||kr(t.tag)?t.tag:UB();return Ut(d,u,c)}}const Spe=de({name:"i18n-n",props:js({value:{type:Number,required:!0},format:{type:[String,Object]}},UT),setup(t,e){const n=t.i18n||si({useScope:t.scope,__useComponent:!0});return zB(t,e,RB,(...r)=>n[j2](...r))}}),pR=Spe,Epe=de({name:"i18n-d",props:js({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},UT),setup(t,e){const n=t.i18n||si({useScope:t.scope,__useComponent:!0});return zB(t,e,PB,(...r)=>n[W2](...r))}}),mR=Epe;function Cpe(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function Tpe(t){const e=o=>{const{instance:a,value:l}=o;if(!a||!a.$)throw vo(Xi.UNEXPECTED_ERROR);const c=Cpe(t,a.$),u=gR(l);return[Reflect.apply(c.t,c,[...vR(u)]),c]};return{created:(o,a)=>{const[l,c]=e(a);Zb&&t.global===c&&(o.__i18nWatcher=Be(c.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=c,o.textContent=l},unmounted:o=>{Zb&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,c=gR(a);o.textContent=Reflect.apply(l.t,l,[...vR(c)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function gR(t){if(gn(t))return{path:t};if(lr(t)){if(!("path"in t))throw vo(Xi.REQUIRED_VALUE,"path");return t}else throw vo(Xi.INVALID_VALUE)}function vR(t){const{path:e,locale:n,args:r,choice:s,plural:i}=t,o={},a=r||{};return gn(n)&&(o.locale=n),Is(s)&&(o.plural=s),Is(i)&&(o.plural=i),[e,a,o]}function Mpe(t,e,...n){const r=lr(n[0])?n[0]:{};(Cr(r.globalInstall)?r.globalInstall:!0)&&([fR.name,"I18nT"].forEach(i=>t.component(i,fR)),[pR.name,"I18nN"].forEach(i=>t.component(i,pR)),[mR.name,"I18nD"].forEach(i=>t.component(i,mR))),t.directive("t",Tpe(e))}const Ape=qu("global-vue-i18n");function kpe(t={},e){const n=__VUE_I18N_LEGACY_API__&&Cr(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,r=Cr(t.globalInjection)?t.globalInjection:!0,s=new Map,[i,o]=Ipe(t,n),a=qu("");function l(h){return s.get(h)||null}function c(h,f){s.set(h,f)}function u(h){s.delete(h)}const d={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},async install(h,...f){if(h.__VUE_I18N_SYMBOL__=a,h.provide(h.__VUE_I18N_SYMBOL__,d),lr(f[0])){const y=f[0];d.__composerExtend=y.__composerExtend,d.__vueI18nExtend=y.__vueI18nExtend}let m=null;!n&&r&&(m=Bpe(h,d.global)),__VUE_I18N_FULL_INSTALL__&&Mpe(h,d,...f),__VUE_I18N_LEGACY_API__&&n&&h.mixin(bpe(o,o.__composer,d));const v=h.unmount;h.unmount=()=>{m&&m(),d.dispose(),v()}},get global(){return o},dispose(){i.stop()},__instances:s,__getInstance:l,__setInstance:c,__deleteInstance:u};return d}function si(t={}){const e=tn();if(e==null)throw vo(Xi.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw vo(Xi.NOT_INSTALLED);const n=Ppe(e),r=Lpe(n),s=FB(e),i=Rpe(t,s);if(i==="global")return BB(r,t,s),r;if(i==="parent"){let l=Ope(n,e,t.__useComponent);return l==null&&(l=r),l}const o=n;let a=o.__getInstance(e);if(a==null){const l=js({},t);"__i18n"in s&&(l.__i18n=s.__i18n),r&&(l.__root=r),a=BT(l),o.__composerExtend&&(a[K2]=o.__composerExtend(a)),Dpe(o,e,a),o.__setInstance(e,a)}return a}function Ipe(t,e,n){const r=F8(),s=__VUE_I18N_LEGACY_API__&&e?r.run(()=>q2(t)):r.run(()=>BT(t));if(s==null)throw vo(Xi.UNEXPECTED_ERROR);return[r,s]}function Ppe(t){const e=_t(t.isCE?Ape:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw vo(t.isCE?Xi.NOT_INSTALLED_WITH_PROVIDE:Xi.UNEXPECTED_ERROR);return e}function Rpe(t,e){return u_(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function Lpe(t){return t.mode==="composition"?t.global:t.global.__composer}function Ope(t,e,n=!1){let r=null;const s=e.root;let i=Npe(e,n);for(;i!=null;){const o=t;if(t.mode==="composition")r=o.__getInstance(i);else if(__VUE_I18N_LEGACY_API__){const a=o.__getInstance(i);a!=null&&(r=a.__composer,n&&r&&!r[DB]&&(r=null))}if(r!=null||s===i)break;i=i.parent}return r}function Npe(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function Dpe(t,e,n){Zt(()=>{},e),yo(()=>{const r=n;t.__deleteInstance(e);const s=r[K2];s&&(s(),delete r[K2])},e)}const Fpe=["locale","fallbackLocale","availableLocales"],yR=["t","rt","d","n","tm","te"];function Bpe(t,e){const n=Object.create(null);return Fpe.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i)throw vo(Xi.UNEXPECTED_ERROR);const o=yr(i.value)?{get(){return i.value.value},set(a){i.value.value=a}}:{get(){return i.get&&i.get()}};Object.defineProperty(n,s,o)}),t.config.globalProperties.$i18n=n,yR.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i||!i.value)throw vo(Xi.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${s}`,i)}),()=>{delete t.config.globalProperties.$i18n,yR.forEach(s=>{delete t.config.globalProperties[`$${s}`]})}}mpe();Kfe(Afe);qfe(Gfe);Yfe(CB);if(__INTLIFY_PROD_DEVTOOLS__){const t=Od();t.__INTLIFY__=!0,kfe(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const Upe="2.10.7",bR=Symbol("INSTALLED_KEY"),$B=Symbol(),rg="el",zpe="is-",vd=(t,e,n,r,s)=>{let i=`${t}-${e}`;return n&&(i+=`-${n}`),r&&(i+=`__${r}`),s&&(i+=`--${s}`),i},VB=Symbol("namespaceContextKey"),zT=t=>{const e=t||(tn()?_t(VB,H(rg)):H(rg));return R(()=>p(e)||rg)},Qe=(t,e)=>{const n=zT(e);return{namespace:n,b:(v="")=>vd(n.value,t,v,"",""),e:v=>v?vd(n.value,t,"",v,""):"",m:v=>v?vd(n.value,t,"","",v):"",be:(v,y)=>v&&y?vd(n.value,t,v,y,""):"",em:(v,y)=>v&&y?vd(n.value,t,"",v,y):"",bm:(v,y)=>v&&y?vd(n.value,t,v,"",y):"",bem:(v,y,g)=>v&&y&&g?vd(n.value,t,v,y,g):"",is:(v,...y)=>{const g=y.length>=1?y[0]:!0;return v&&g?`${zpe}${v}`:""},cssVar:v=>{const y={};for(const g in v)v[g]&&(y[`--${n.value}-${g}`]=v[g]);return y},cssVarName:v=>`--${n.value}-${v}`,cssVarBlock:v=>{const y={};for(const g in v)v[g]&&(y[`--${n.value}-${t}-${g}`]=v[g]);return y},cssVarBlockName:v=>`--${n.value}-${t}-${v}`}},Bn=t=>t===void 0,nr=t=>typeof t=="boolean",Ft=t=>typeof t=="number",Po=t=>!t&&t!==0||rt(t)&&t.length===0||un(t)&&!Object.keys(t).length,Ki=t=>typeof Element>"u"?!1:t instanceof Element,ho=t=>vs(t),$pe=t=>kt(t)?!Number.isNaN(Number(t)):!1,kv=t=>t===window;var Vpe=Object.defineProperty,Hpe=Object.defineProperties,Gpe=Object.getOwnPropertyDescriptors,_R=Object.getOwnPropertySymbols,Wpe=Object.prototype.hasOwnProperty,jpe=Object.prototype.propertyIsEnumerable,wR=(t,e,n)=>e in t?Vpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kpe=(t,e)=>{for(var n in e||(e={}))Wpe.call(e,n)&&wR(t,n,e[n]);if(_R)for(var n of _R(e))jpe.call(e,n)&&wR(t,n,e[n]);return t},qpe=(t,e)=>Hpe(t,Gpe(e));function Jb(t,e){var n;const r=br();return ui(()=>{r.value=t()},qpe(Kpe({},e),{flush:(n=void 0)!=null?n:"sync"})),Ku(r)}var xR;const Vn=typeof window<"u",Ype=t=>typeof t<"u",Y2=t=>typeof t=="function",Xpe=t=>typeof t=="string",gc=()=>{},Qb=Vn&&((xR=window==null?void 0:window.navigator)==null?void 0:xR.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Bu(t){return typeof t=="function"?t():p(t)}function HB(t,e){function n(...r){return new Promise((s,i)=>{Promise.resolve(t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(s).catch(i)})}return n}function Zpe(t,e={}){let n,r,s=gc;const i=a=>{clearTimeout(a),s(),s=gc};return a=>{const l=Bu(t),c=Bu(e.maxWait);return n&&i(n),l<=0||c!==void 0&&c<=0?(r&&(i(r),r=null),Promise.resolve(a())):new Promise((u,d)=>{s=e.rejectOnCancel?d:u,c&&!r&&(r=setTimeout(()=>{n&&i(n),r=null,u(a())},c)),n=setTimeout(()=>{r&&i(r),r=null,u(a())},l)})}}function Jpe(t,e=!0,n=!0,r=!1){let s=0,i,o=!0,a=gc,l;const c=()=>{i&&(clearTimeout(i),i=void 0,a(),a=gc)};return d=>{const h=Bu(t),f=Date.now()-s,m=()=>l=d();return c(),h<=0?(s=Date.now(),m()):(f>h&&(n||!o)?(s=Date.now(),m()):e&&(l=new Promise((v,y)=>{a=r?y:v,i=setTimeout(()=>{s=Date.now(),o=!0,v(m()),c()},Math.max(0,h-f))})),!n&&!i&&(i=setTimeout(()=>o=!0,h)),o=!1,l)}}function Qpe(t){return t}function eme(t,e){let n,r,s;const i=H(!0),o=()=>{i.value=!0,s()};Be(t,o,{flush:"sync"});const a=Y2(e)?e:e.get,l=Y2(e)?void 0:e.set,c=_T((u,d)=>(r=u,s=d,{get(){return i.value&&(n=a(),i.value=!1),r(),n},set(h){l==null||l(h)}}));return Object.isExtensible(c)&&(c.trigger=o),c}function Kp(t){return hT()?(fT(t),!0):!1}function tme(t,e=200,n={}){return HB(Zpe(e,n),t)}function nme(t,e=200,n={}){const r=H(t.value),s=tme(()=>{r.value=t.value},e,n);return Be(t,()=>s()),r}function GB(t,e=200,n=!1,r=!0,s=!1){return HB(Jpe(e,n,r,s),t)}function $T(t,e=!0){tn()?Zt(t):e?t():Tt(t)}function rh(t,e,n={}){const{immediate:r=!0}=n,s=H(!1);let i=null;function o(){i&&(clearTimeout(i),i=null)}function a(){s.value=!1,o()}function l(...c){o(),s.value=!0,i=setTimeout(()=>{s.value=!1,i=null,t(...c)},Bu(e))}return r&&(s.value=!0,Vn&&l()),Kp(a),{isPending:Ku(s),start:l,stop:a}}function Ps(t){var e;const n=Bu(t);return(e=n==null?void 0:n.$el)!=null?e:n}const Pl=Vn?window:void 0,rme=Vn?window.document:void 0;function pr(...t){let e,n,r,s;if(Xpe(t[0])||Array.isArray(t[0])?([n,r,s]=t,e=Pl):[e,n,r,s]=t,!e)return gc;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const i=[],o=()=>{i.forEach(u=>u()),i.length=0},a=(u,d,h,f)=>(u.addEventListener(d,h,f),()=>u.removeEventListener(d,h,f)),l=Be(()=>[Ps(e),Bu(s)],([u,d])=>{o(),u&&i.push(...n.flatMap(h=>r.map(f=>a(u,h,f,d))))},{immediate:!0,flush:"post"}),c=()=>{l(),o()};return Kp(c),c}let SR=!1;function VT(t,e,n={}){const{window:r=Pl,ignore:s=[],capture:i=!0,detectIframe:o=!1}=n;if(!r)return;Qb&&!SR&&(SR=!0,Array.from(r.document.body.children).forEach(h=>h.addEventListener("click",gc)));let a=!0;const l=h=>s.some(f=>{if(typeof f=="string")return Array.from(r.document.querySelectorAll(f)).some(m=>m===h.target||h.composedPath().includes(m));{const m=Ps(f);return m&&(h.target===m||h.composedPath().includes(m))}}),u=[pr(r,"click",h=>{const f=Ps(t);if(!(!f||f===h.target||h.composedPath().includes(f))){if(h.detail===0&&(a=!l(h)),!a){a=!0;return}e(h)}},{passive:!0,capture:i}),pr(r,"pointerdown",h=>{const f=Ps(t);f&&(a=!h.composedPath().includes(f)&&!l(h))},{passive:!0}),o&&pr(r,"blur",h=>{var f;const m=Ps(t);((f=r.document.activeElement)==null?void 0:f.tagName)==="IFRAME"&&!(m!=null&&m.contains(r.document.activeElement))&&e(h)})].filter(Boolean);return()=>u.forEach(h=>h())}function sme(t={}){var e;const{window:n=Pl}=t,r=(e=t.document)!=null?e:n==null?void 0:n.document,s=eme(()=>null,()=>r==null?void 0:r.activeElement);return n&&(pr(n,"blur",i=>{i.relatedTarget===null&&s.trigger()},!0),pr(n,"focus",s.trigger,!0)),s}function HT(t,e=!1){const n=H(),r=()=>n.value=!!t();return r(),$T(r,e),n}function ime(t){return JSON.parse(JSON.stringify(t))}const ER=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},CR="__vueuse_ssr_handlers__";ER[CR]=ER[CR]||{};function ome(t,e,{window:n=Pl,initialValue:r=""}={}){const s=H(r),i=R(()=>{var o;return Ps(e)||((o=n==null?void 0:n.document)==null?void 0:o.documentElement)});return Be([i,()=>Bu(t)],([o,a])=>{var l;if(o&&n){const c=(l=n.getComputedStyle(o).getPropertyValue(a))==null?void 0:l.trim();s.value=c||r}},{immediate:!0}),Be(s,o=>{var a;(a=i.value)!=null&&a.style&&i.value.style.setProperty(Bu(t),o)}),s}function ame({document:t=rme}={}){if(!t)return H("visible");const e=H(t.visibilityState);return pr(t,"visibilitychange",()=>{e.value=t.visibilityState}),e}var TR=Object.getOwnPropertySymbols,lme=Object.prototype.hasOwnProperty,cme=Object.prototype.propertyIsEnumerable,ume=(t,e)=>{var n={};for(var r in t)lme.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&TR)for(var r of TR(t))e.indexOf(r)<0&&cme.call(t,r)&&(n[r]=t[r]);return n};function Ir(t,e,n={}){const r=n,{window:s=Pl}=r,i=ume(r,["window"]);let o;const a=HT(()=>s&&"ResizeObserver"in s),l=()=>{o&&(o.disconnect(),o=void 0)},c=Be(()=>Ps(t),d=>{l(),a.value&&s&&d&&(o=new ResizeObserver(e),o.observe(d,i))},{immediate:!0,flush:"post"}),u=()=>{l(),c()};return Kp(u),{isSupported:a,stop:u}}function MR(t,e={}){const{reset:n=!0,windowResize:r=!0,windowScroll:s=!0,immediate:i=!0}=e,o=H(0),a=H(0),l=H(0),c=H(0),u=H(0),d=H(0),h=H(0),f=H(0);function m(){const v=Ps(t);if(!v){n&&(o.value=0,a.value=0,l.value=0,c.value=0,u.value=0,d.value=0,h.value=0,f.value=0);return}const y=v.getBoundingClientRect();o.value=y.height,a.value=y.bottom,l.value=y.left,c.value=y.right,u.value=y.top,d.value=y.width,h.value=y.x,f.value=y.y}return Ir(t,m),Be(()=>Ps(t),v=>!v&&m()),s&&pr("scroll",m,{capture:!0,passive:!0}),r&&pr("resize",m,{passive:!0}),$T(()=>{i&&m()}),{height:o,bottom:a,left:l,right:c,top:u,width:d,x:h,y:f,update:m}}function dme(t,e={width:0,height:0},n={}){const{window:r=Pl,box:s="content-box"}=n,i=R(()=>{var l,c;return(c=(l=Ps(t))==null?void 0:l.namespaceURI)==null?void 0:c.includes("svg")}),o=H(e.width),a=H(e.height);return Ir(t,([l])=>{const c=s==="border-box"?l.borderBoxSize:s==="content-box"?l.contentBoxSize:l.devicePixelContentBoxSize;if(r&&i.value){const u=Ps(t);if(u){const d=r.getComputedStyle(u);o.value=parseFloat(d.width),a.value=parseFloat(d.height)}}else if(c){const u=Array.isArray(c)?c:[c];o.value=u.reduce((d,{inlineSize:h})=>d+h,0),a.value=u.reduce((d,{blockSize:h})=>d+h,0)}else o.value=l.contentRect.width,a.value=l.contentRect.height},n),Be(()=>Ps(t),l=>{o.value=l?e.width:0,a.value=l?e.height:0}),{width:o,height:a}}function hme(t,e,n={}){const{root:r,rootMargin:s="0px",threshold:i=.1,window:o=Pl}=n,a=HT(()=>o&&"IntersectionObserver"in o);let l=gc;const c=a.value?Be(()=>({el:Ps(t),root:Ps(r)}),({el:d,root:h})=>{if(l(),!d)return;const f=new IntersectionObserver(e,{root:h,rootMargin:s,threshold:i});f.observe(d),l=()=>{f.disconnect(),l=gc}},{immediate:!0,flush:"post"}):gc,u=()=>{l(),c()};return Kp(u),{isSupported:a,stop:u}}var AR=Object.getOwnPropertySymbols,fme=Object.prototype.hasOwnProperty,pme=Object.prototype.propertyIsEnumerable,mme=(t,e)=>{var n={};for(var r in t)fme.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&AR)for(var r of AR(t))e.indexOf(r)<0&&pme.call(t,r)&&(n[r]=t[r]);return n};function WB(t,e,n={}){const r=n,{window:s=Pl}=r,i=mme(r,["window"]);let o;const a=HT(()=>s&&"MutationObserver"in s),l=()=>{o&&(o.disconnect(),o=void 0)},c=Be(()=>Ps(t),d=>{l(),a.value&&s&&d&&(o=new MutationObserver(e),o.observe(d,i))},{immediate:!0}),u=()=>{l(),c()};return Kp(u),{isSupported:a,stop:u}}var kR;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(kR||(kR={}));var gme=Object.defineProperty,IR=Object.getOwnPropertySymbols,vme=Object.prototype.hasOwnProperty,yme=Object.prototype.propertyIsEnumerable,PR=(t,e,n)=>e in t?gme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bme=(t,e)=>{for(var n in e||(e={}))vme.call(e,n)&&PR(t,n,e[n]);if(IR)for(var n of IR(e))yme.call(e,n)&&PR(t,n,e[n]);return t};const _me={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};bme({linear:Qpe},_me);function jB(t,e,n,r={}){var s,i,o;const{clone:a=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:d}=r,h=tn(),f=n||(h==null?void 0:h.emit)||((s=h==null?void 0:h.$emit)==null?void 0:s.bind(h))||((o=(i=h==null?void 0:h.proxy)==null?void 0:i.$emit)==null?void 0:o.bind(h==null?void 0:h.proxy));let m=c;e||(e="modelValue"),m=c||m||`update:${e.toString()}`;const v=g=>a?Y2(a)?a(g):ime(g):g,y=()=>Ype(t[e])?v(t[e]):d;if(l){const g=y(),S=H(g);return Be(()=>t[e],_=>S.value=v(_)),Be(S,_=>{(_!==t[e]||u)&&f(m,_)},{deep:u}),S}else return R({get(){return y()},set(g){f(m,g)}})}function wme({window:t=Pl}={}){if(!t)return H(!1);const e=H(t.document.hasFocus());return pr(t,"blur",()=>{e.value=!1}),pr(t,"focus",()=>{e.value=!0}),e}function xme(t={}){const{window:e=Pl,initialWidth:n=1/0,initialHeight:r=1/0,listenOrientation:s=!0,includeScrollbar:i=!0}=t,o=H(n),a=H(r),l=()=>{e&&(i?(o.value=e.innerWidth,a.value=e.innerHeight):(o.value=e.document.documentElement.clientWidth,a.value=e.document.documentElement.clientHeight))};return l(),$T(l),pr("resize",l,{passive:!0}),s&&pr("orientationchange",l,{passive:!0}),{width:o,height:a}}const RR={current:0},LR=H(0),KB=2e3,OR=Symbol("elZIndexContextKey"),qB=Symbol("zIndexContextKey"),qp=t=>{const e=tn()?_t(OR,RR):RR,n=t||(tn()?_t(qB,void 0):void 0),r=R(()=>{const o=p(n);return Ft(o)?o:KB}),s=R(()=>r.value+LR.value),i=()=>(e.current++,LR.value=e.current,s.value);return!Vn&&_t(OR),{initialZIndex:r,currentZIndex:s,nextZIndex:i}},Sme=t=>(e,n)=>Eme(e,n,p(t)),Eme=(t,e,n)=>cs(n,t,t).replace(/\{(\w+)\}/g,(r,s)=>{var i;return`${(i=e==null?void 0:e[s])!=null?i:`{${s}}`}`}),Cme=t=>{const e=R(()=>p(t).name),n=yr(t)?t:H(t);return{lang:e,locale:n,t:Sme(t)}},YB=Symbol("localeContextKey"),zn=t=>{const e=t||_t(YB,H());return Cme(R(()=>e.value||pB))},XB="__epPropKey",Ce=t=>t,Tme=t=>un(t)&&!!t[XB],Ya=(t,e)=>{if(!un(t)||Tme(t))return t;const{values:n,required:r,default:s,type:i,validator:o}=t,l={type:i,required:!!r,validator:n||o?c=>{let u=!1,d=[];if(n&&(d=Array.from(n),Kn(t,"default")&&d.push(s),u||(u=d.includes(c))),o&&(u||(u=o(c))),!u&&d.length>0){const h=[...new Set(d)].map(f=>JSON.stringify(f)).join(", ");Bde(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${h}], got value ${JSON.stringify(c)}.`)}return u}:void 0,[XB]:!0};return Kn(t,"default")&&(l.default=s),l},it=t=>Mg(Object.entries(t).map(([e,n])=>[e,Ya(n,e)])),Rl=["","default","small","large"],Es=Ya({type:String,values:Rl,required:!1}),ZB=Symbol("size"),JB=()=>{const t=_t(ZB,{});return R(()=>p(t.size)||"")},QB=Symbol("emptyValuesContextKey"),Mme=["",void 0,null],Ame=void 0,yh=it({emptyValues:Array,valueOnClear:{type:Ce([String,Number,Boolean,Function]),default:void 0,validator:t=>Lt(t)?!t():!t}}),Iv=(t,e)=>{const n=tn()?_t(QB,H({})):H({}),r=R(()=>t.emptyValues||n.value.emptyValues||Mme),s=R(()=>Lt(t.valueOnClear)?t.valueOnClear():t.valueOnClear!==void 0?t.valueOnClear:Lt(n.value.valueOnClear)?n.value.valueOnClear():n.value.valueOnClear!==void 0?n.value.valueOnClear:e!==void 0?e:Ame),i=o=>r.value.includes(o);return r.value.includes(s.value),{emptyValues:r,valueOnClear:s,isEmptyValue:i}},vp=t=>Object.keys(t),eU=t=>Object.entries(t),sg=(t,e,n)=>({get value(){return cs(t,e,n)},set value(r){bre(t,e,r)}}),e1=H();function Yp(t,e=void 0){const n=tn()?_t($B,e1):e1;return t?R(()=>{var r,s;return(s=(r=n.value)==null?void 0:r[t])!=null?s:e}):n}function f_(t,e){const n=Yp(),r=Qe(t,R(()=>{var a;return((a=n.value)==null?void 0:a.namespace)||rg})),s=zn(R(()=>{var a;return(a=n.value)==null?void 0:a.locale})),i=qp(R(()=>{var a;return((a=n.value)==null?void 0:a.zIndex)||KB})),o=R(()=>{var a;return p(e)||((a=n.value)==null?void 0:a.size)||""});return GT(R(()=>p(n)||{})),{ns:r,locale:s,zIndex:i,size:o}}const GT=(t,e,n=!1)=>{var r;const s=!!tn(),i=s?Yp():void 0,o=(r=e==null?void 0:e.provide)!=null?r:s?Mn:void 0;if(!o)return;const a=R(()=>{const l=p(t);return i!=null&&i.value?kme(i.value,l):l});return o($B,a),o(YB,R(()=>a.value.locale)),o(VB,R(()=>a.value.namespace)),o(qB,R(()=>a.value.zIndex)),o(ZB,{size:R(()=>a.value.size||"")}),o(QB,R(()=>({emptyValues:a.value.emptyValues,valueOnClear:a.value.valueOnClear}))),(n||!e1.value)&&(e1.value=a.value),a},kme=(t,e)=>{const n=[...new Set([...vp(t),...vp(e)])],r={};for(const s of n)r[s]=e[s]!==void 0?e[s]:t[s];return r},Ime=(t=[])=>({version:Upe,install:(n,r)=>{n[bR]||(n[bR]=!0,t.forEach(s=>n.use(s)),r&&GT(r,n,!0))}}),Qt="update:modelValue",xn="change",xs="input",Pme=it({zIndex:{type:Ce([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),Rme={scroll:({scrollTop:t,fixed:e})=>Ft(t)&&nr(e),[xn]:t=>nr(t)};var at=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n};function Lme(t,e,n,r){const s=n-e;return t/=r/2,t<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e}const Uu=t=>Vn?window.requestAnimationFrame(t):setTimeout(t,16),sh=t=>Vn?window.cancelAnimationFrame(t):clearTimeout(t),tU=(t="")=>t.split(" ").filter(e=>!!e.trim()),ao=(t,e)=>{if(!t||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return t.classList.contains(e)},Zo=(t,e)=>{!t||!e.trim()||t.classList.add(...tU(e))},Mi=(t,e)=>{!t||!e.trim()||t.classList.remove(...tU(e))},rc=(t,e)=>{var n;if(!Vn||!t||!e)return"";let r=ki(e);r==="float"&&(r="cssFloat");try{const s=t.style[r];if(s)return s;const i=(n=document.defaultView)==null?void 0:n.getComputedStyle(t,"");return i?i[r]:""}catch{return t.style[r]}},nU=(t,e,n)=>{if(!(!t||!e))if(un(e))eU(e).forEach(([r,s])=>nU(t,r,s));else{const r=ki(e);t.style[r]=n}};function qr(t,e="px"){if(!t)return"";if(Ft(t)||$pe(t))return`${t}${e}`;if(kt(t))return t}const Ome=(t,e)=>{if(!Vn)return!1;const n={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(e)],r=rc(t,n);return["scroll","auto","overlay"].some(s=>r.includes(s))},WT=(t,e)=>{if(!Vn)return;let n=t;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(Ome(n,e))return n;n=n.parentNode}return n};let hy;const rU=t=>{var e;if(!Vn)return 0;if(hy!==void 0)return hy;const n=document.createElement("div");n.className=`${t}-scrollbar__wrap`,n.style.visibility="hidden",n.style.width="100px",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);const r=n.offsetWidth;n.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",n.appendChild(s);const i=s.offsetWidth;return(e=n.parentNode)==null||e.removeChild(n),hy=r-i,hy};function jT(t,e){if(!Vn)return;if(!e){t.scrollTop=0;return}const n=[];let r=e.offsetParent;for(;r!==null&&t!==r&&t.contains(r);)n.push(r),r=r.offsetParent;const s=e.offsetTop+n.reduce((l,c)=>l+c.offsetTop,0),i=s+e.offsetHeight,o=t.scrollTop,a=o+t.clientHeight;s<o?t.scrollTop=s:i>a&&(t.scrollTop=i-t.clientHeight)}function Nme(t,e,n,r,s){const i=Date.now();let o;const a=()=>{const c=Date.now()-i,u=Lme(c>r?r:c,e,n,r);kv(t)?t.scrollTo(window.pageXOffset,u):t.scrollTop=u,c<r?o=Uu(a):Lt(s)&&s()};return a(),()=>{o&&sh(o)}}const NR=(t,e)=>kv(e)?t.ownerDocument.documentElement:e,DR=t=>kv(t)?window.scrollY:t.scrollTop;class Dme extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function hs(t,e){throw new Dme(`[${t}] ${e}`)}const sU="ElAffix",Fme=de({name:sU}),Bme=de({...Fme,props:Pme,emits:Rme,setup(t,{expose:e,emit:n}){const r=t,s=Qe("affix"),i=br(),o=br(),a=br(),{height:l}=xme(),{height:c,width:u,top:d,bottom:h,update:f}=MR(o,{windowScroll:!1}),m=MR(i),v=H(!1),y=H(0),g=H(0),S=R(()=>({height:v.value?`${c.value}px`:"",width:v.value?`${u.value}px`:""})),_=R(()=>{if(!v.value)return{};const T=r.offset?qr(r.offset):0;return{height:`${c.value}px`,width:`${u.value}px`,top:r.position==="top"?T:"",bottom:r.position==="bottom"?T:"",transform:g.value?`translateY(${g.value}px)`:"",zIndex:r.zIndex}}),w=()=>{if(!a.value)return;y.value=a.value instanceof Window?document.documentElement.scrollTop:a.value.scrollTop||0;const{position:T,target:I,offset:k}=r,M=k+c.value;if(T==="top")if(I){const L=m.bottom.value-M;v.value=k>d.value&&m.bottom.value>0,g.value=L<0?L:0}else v.value=k>d.value;else if(I){const L=l.value-m.top.value-M;v.value=l.value-k<h.value&&l.value>m.top.value,g.value=L<0?-L:0}else v.value=l.value-k<h.value},E=async()=>{if(!v.value){f();return}v.value=!1,await Tt(),f(),v.value=!0},C=async()=>{f(),await Tt(),n("scroll",{scrollTop:y.value,fixed:v.value})};return Be(v,T=>n(xn,T)),Zt(()=>{var T;r.target?(i.value=(T=document.querySelector(r.target))!=null?T:void 0,i.value||hs(sU,`Target does not exist: ${r.target}`)):i.value=document.documentElement,a.value=WT(o.value,!0),f()}),pr(a,"scroll",C),ui(w),e({update:w,updateRoot:E}),(T,I)=>(D(),Z("div",{ref_key:"root",ref:o,class:U(p(s).b()),style:Pt(p(S))},[ne("div",{class:U({[p(s).m("fixed")]:v.value}),style:Pt(p(_))},[Ae(T.$slots,"default")],6)],6))}});var Ume=at(Bme,[["__file","affix.vue"]]);const nn=(t,e)=>{if(t.install=n=>{for(const r of[t,...Object.values(e??{})])n.component(r.name,r)},e)for(const[n,r]of Object.entries(e))t[n]=r;return t},iU=(t,e)=>(t.install=n=>{t._context=n._context,n.config.globalProperties[e]=t},t),zme=(t,e)=>(t.install=n=>{n.directive(e,t)},t),Br=t=>(t.install=er,t),$me=nn(Ume),Vme=it({size:{type:Ce([Number,String])},color:{type:String}}),Hme=de({name:"ElIcon",inheritAttrs:!1}),Gme=de({...Hme,props:Vme,setup(t){const e=t,n=Qe("icon"),r=R(()=>{const{size:s,color:i}=e;return!s&&!i?{}:{fontSize:Bn(s)?void 0:qr(s),"--color":i}});return(s,i)=>(D(),Z("i",yn({class:p(n).b(),style:p(r)},s.$attrs),[Ae(s.$slots,"default")],16))}});var Wme=at(Gme,[["__file","icon.vue"]]);const Et=nn(Wme);function FR(){let t;const e=(r,s)=>{n(),t=window.setTimeout(r,s)},n=()=>window.clearTimeout(t);return Kp(()=>n()),{registerTimeout:e,cancelTimeout:n}}const oU=it({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),aU=({showAfter:t,hideAfter:e,autoClose:n,open:r,close:s})=>{const{registerTimeout:i}=FR(),{registerTimeout:o,cancelTimeout:a}=FR();return{onOpen:u=>{i(()=>{r(u);const d=p(n);Ft(d)&&d>0&&o(()=>{s(u)},d)},p(t))},onClose:u=>{a(),i(()=>{s(u)},p(e))}}};/*! Element Plus Icons Vue v2.3.2 */var jme=de({name:"ArrowDown",__name:"arrow-down",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.59 30.59 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.59 30.59 0 0 0-42.752 0z"})]))}}),Ll=jme,Kme=de({name:"ArrowLeft",__name:"arrow-left",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.59 30.59 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.59 30.59 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0"})]))}}),Sc=Kme,qme=de({name:"ArrowRight",__name:"arrow-right",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M340.864 149.312a30.59 30.59 0 0 0 0 42.752L652.736 512 340.864 831.872a30.59 30.59 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),Ai=qme,Yme=de({name:"ArrowUp",__name:"arrow-up",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),p_=Yme,Xme=de({name:"Back",__name:"back",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64"}),ne("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312z"})]))}}),Zme=Xme,Jme=de({name:"Calendar",__name:"calendar",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"})]))}}),Qme=Jme,ege=de({name:"CaretRight",__name:"caret-right",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"})]))}}),lU=ege,tge=de({name:"CaretTop",__name:"caret-top",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"})]))}}),nge=tge,rge=de({name:"Check",__name:"check",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),Pv=rge,sge=de({name:"CircleCheckFilled",__name:"circle-check-filled",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.27 38.27 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),ige=sge,oge=de({name:"CircleCheck",__name:"circle-check",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),ne("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752z"})]))}}),KT=oge,age=de({name:"CircleCloseFilled",__name:"circle-close-filled",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),qT=age,lge=de({name:"CircleClose",__name:"circle-close",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),ne("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),Rc=lge,cge=de({name:"Clock",__name:"clock",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),ne("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"}),ne("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"})]))}}),cU=cge,uge=de({name:"Close",__name:"close",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),ra=uge,dge=de({name:"DArrowLeft",__name:"d-arrow-left",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.59 30.59 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.59 30.59 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672zm256 0a29.12 29.12 0 0 1 41.728 0 30.59 30.59 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.59 30.59 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672z"})]))}}),zu=dge,hge=de({name:"DArrowRight",__name:"d-arrow-right",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.59 30.59 0 0 1 0-42.752L764.736 512 452.864 192a30.59 30.59 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.59 30.59 0 0 1 0-42.752L508.736 512 196.864 192a30.59 30.59 0 0 1 0-42.688"})]))}}),$u=hge,fge=de({name:"Delete",__name:"delete",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),pge=fge,mge=de({name:"Document",__name:"document",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),gge=mge,vge=de({name:"FullScreen",__name:"full-screen",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),yge=vge,bge=de({name:"Hide",__name:"hide",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4s-12.8-9.6-22.4-9.6-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176S0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4s3.2 16 9.6 22.4 12.8 9.6 22.4 9.6 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4m-646.4 528Q115.2 579.2 76.8 512q43.2-72 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4m140.8-96Q352 555.2 352 512c0-44.8 16-83.2 48-112s67.2-48 112-48c28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6q-43.2 72-153.6 172.8c-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176S1024 528 1024 512s-48.001-73.6-134.401-176"}),ne("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112s-67.2 48-112 48"})]))}}),_ge=bge,wge=de({name:"InfoFilled",__name:"info-filled",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.99 12.99 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),Gg=wge,xge=de({name:"Loading",__name:"loading",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248m452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248M828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0"})]))}}),El=xge,Sge=de({name:"Minus",__name:"minus",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),Ege=Sge,Cge=de({name:"MoreFilled",__name:"more-filled",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),BR=Cge,Tge=de({name:"More",__name:"more",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),Mge=Tge,Age=de({name:"PictureFilled",__name:"picture-filled",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112M256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384"})]))}}),kge=Age,Ige=de({name:"Plus",__name:"plus",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),uU=Ige,Pge=de({name:"QuestionFilled",__name:"question-filled",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592q0-64.416-42.24-101.376c-28.16-25.344-65.472-37.312-111.232-37.312m-12.672 406.208a54.27 54.27 0 0 0-38.72 14.784 49.4 49.4 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.85 54.85 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.97 51.97 0 0 0-15.488-38.016 55.94 55.94 0 0 0-39.424-14.784"})]))}}),Rge=Pge,Lge=de({name:"RefreshLeft",__name:"refresh-left",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),Oge=Lge,Nge=de({name:"RefreshRight",__name:"refresh-right",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88"})]))}}),Dge=Nge,Fge=de({name:"ScaleToOriginal",__name:"scale-to-original",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.12 30.12 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.12 30.12 0 0 0-30.118-30.118m-361.412 0a30.12 30.12 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.12 30.12 0 0 0-30.118-30.118M512 361.412a30.12 30.12 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.12 30.12 0 0 0 512 361.412M512 512a30.12 30.12 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.12 30.12 0 0 0 512 512"})]))}}),Bge=Fge,Uge=de({name:"Search",__name:"search",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),zge=Uge,$ge=de({name:"SortDown",__name:"sort-down",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0"})]))}}),Vge=$ge,Hge=de({name:"SortUp",__name:"sort-up",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248"})]))}}),Gge=Hge,Wge=de({name:"StarFilled",__name:"star-filled",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M313.6 924.48a70.4 70.4 0 0 1-74.152-5.365 70.4 70.4 0 0 1-27.992-68.875l37.888-220.928L88.96 472.96a70.4 70.4 0 0 1 3.788-104.225A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 100.246-28.595 70.4 70.4 0 0 1 25.962 28.595l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),fy=Wge,jge=de({name:"Star",__name:"star",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),Kge=jge,qge=de({name:"SuccessFilled",__name:"success-filled",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.27 38.27 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),dU=qge,Yge=de({name:"View",__name:"view",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288m0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.19 160.19 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),Xge=Yge,Zge=de({name:"WarningFilled",__name:"warning-filled",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.43 58.43 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.43 58.43 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),m_=Zge,Jge=de({name:"ZoomIn",__name:"zoom-in",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),hU=Jge,Qge=de({name:"ZoomOut",__name:"zoom-out",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),eve=Qge;const or=Ce([String,Object,Function]),fU={Close:ra},YT={Close:ra,SuccessFilled:dU,InfoFilled:Gg,WarningFilled:m_,CircleCloseFilled:qT},Vu={primary:Gg,success:dU,warning:m_,error:qT,info:Gg},g_={validating:El,success:KT,error:Rc},tve=["light","dark"],nve=it({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:vp(Vu),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:tve,default:"light"},...oU}),rve={open:()=>!0,close:t=>Bn(t)||t instanceof Event},sve=de({name:"ElAlert"}),ive=de({...sve,props:nve,emits:rve,setup(t,{emit:e}){const n=t,{Close:r}=YT,s=bs(),i=Qe("alert"),o=H(!1),a=R(()=>Vu[n.type]),l=R(()=>!!(n.description||s.default)),c=()=>{o.value=!0,e("open")},u=f=>{o.value=!1,e("close",f)},{onOpen:d,onClose:h}=aU({showAfter:Yn(n,"showAfter"),hideAfter:Yn(n,"hideAfter"),autoClose:Yn(n,"autoClose"),open:c,close:u});return Vn&&d(),(f,m)=>(D(),Le(Xs,{name:p(i).b("fade"),persisted:""},{default:me(()=>[cn(ne("div",{class:U([p(i).b(),p(i).m(f.type),p(i).is("center",f.center),p(i).is(f.effect)]),role:"alert"},[f.showIcon&&(f.$slots.icon||p(a))?(D(),Le(p(Et),{key:0,class:U([p(i).e("icon"),{[p(i).is("big")]:p(l)}])},{default:me(()=>[Ae(f.$slots,"icon",{},()=>[(D(),Le(mn(p(a))))])]),_:3},8,["class"])):Pe("v-if",!0),ne("div",{class:U(p(i).e("content"))},[f.title||f.$slots.title?(D(),Z("span",{key:0,class:U([p(i).e("title"),{"with-description":p(l)}])},[Ae(f.$slots,"title",{},()=>[rn(tt(f.title),1)])],2)):Pe("v-if",!0),p(l)?(D(),Z("p",{key:1,class:U(p(i).e("description"))},[Ae(f.$slots,"default",{},()=>[rn(tt(f.description),1)])],2)):Pe("v-if",!0),f.closable?(D(),Z(xt,{key:2},[f.closeText?(D(),Z("div",{key:0,class:U([p(i).e("close-btn"),p(i).is("customed")]),onClick:u},tt(f.closeText),3)):(D(),Le(p(Et),{key:1,class:U(p(i).e("close-btn")),onClick:p(h)},{default:me(()=>[ae(p(r))]),_:1},8,["class","onClick"]))],64)):Pe("v-if",!0)],2)],2),[[Wn,o.value]])]),_:3},8,["name"]))}});var ove=at(ive,[["__file","alert.vue"]]);const ave=nn(ove),XT=()=>Vn&&/firefox/i.test(window.navigator.userAgent);let ro;const lve={height:"0",visibility:"hidden",overflow:XT()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},cve=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function uve(t){const e=window.getComputedStyle(t),n=e.getPropertyValue("box-sizing"),r=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),s=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:cve.map(o=>[o,e.getPropertyValue(o)]),paddingSize:r,borderSize:s,boxSizing:n}}function UR(t,e=1,n){var r,s;ro||(ro=document.createElement("textarea"),((r=t.parentNode)!=null?r:document.body).appendChild(ro));const{paddingSize:i,borderSize:o,boxSizing:a,contextStyle:l}=uve(t);l.forEach(([h,f])=>ro==null?void 0:ro.style.setProperty(h,f)),Object.entries(lve).forEach(([h,f])=>ro==null?void 0:ro.style.setProperty(h,f,"important")),ro.value=t.value||t.placeholder||"";let c=ro.scrollHeight;const u={};a==="border-box"?c=c+o:a==="content-box"&&(c=c-i),ro.value="";const d=ro.scrollHeight-i;if(Ft(e)){let h=d*e;a==="border-box"&&(h=h+i+o),c=Math.max(h,c),u.minHeight=`${h}px`}if(Ft(n)){let h=d*n;a==="border-box"&&(h=h+i+o),c=Math.min(h,c)}return u.height=`${c}px`,(s=ro.parentNode)==null||s.removeChild(ro),ro=void 0,u}const Fr=t=>t,dve=it({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),hi=t=>Yo(dve,t),Rv=it({id:{type:String,default:void 0},size:Es,disabled:Boolean,modelValue:{type:Ce([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Ce([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:or},prefixIcon:{type:or},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Ce([Object,Array,String]),default:()=>Fr({})},autofocus:Boolean,rows:{type:Number,default:2},...hi(["ariaLabel"]),inputmode:{type:Ce(String),default:void 0},name:String}),hve={[Qt]:t=>kt(t),input:t=>kt(t),change:t=>kt(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},fve=["class","style"],pve=/^on[A-Z]/,v_=(t={})=>{const{excludeListeners:e=!1,excludeKeys:n}=t,r=R(()=>((n==null?void 0:n.value)||[]).concat(fve)),s=tn();return R(s?()=>{var i;return Mg(Object.entries((i=s.proxy)==null?void 0:i.$attrs).filter(([o])=>!r.value.includes(o)&&!(e&&pve.test(o))))}:()=>({}))},zR={prefix:Math.floor(Math.random()*1e4),current:0},mve=Symbol("elIdInjection"),ZT=()=>tn()?_t(mve,zR):zR,ni=t=>{const e=ZT(),n=zT();return Jb(()=>p(t)||`${n.value}-id-${e.prefix}-${e.current++}`)},bh=Symbol("formContextKey"),Cl=Symbol("formItemContextKey"),fi=()=>{const t=_t(bh,void 0),e=_t(Cl,void 0);return{form:t,formItem:e}},la=(t,{formItemContext:e,disableIdGeneration:n,disableIdManagement:r})=>{n||(n=H(!1)),r||(r=H(!1));const s=tn(),i=()=>{let c=s==null?void 0:s.parent;for(;c;){if(c.type.name==="ElFormItem")return!1;if(c.type.name==="ElLabelWrap")return!0;c=c.parent}return!1},o=H();let a;const l=R(()=>{var c;return!!(!(t.label||t.ariaLabel)&&e&&e.inputIds&&((c=e.inputIds)==null?void 0:c.length)<=1)});return Zt(()=>{a=Be([Yn(t,"id"),n],([c,u])=>{const d=c??(u?void 0:ni().value);d!==o.value&&(e!=null&&e.removeInputId&&!i()&&(o.value&&e.removeInputId(o.value),!(r!=null&&r.value)&&!u&&d&&e.addInputId(d)),o.value=d)},{immediate:!0})}),yo(()=>{a&&a(),e!=null&&e.removeInputId&&o.value&&e.removeInputId(o.value)}),{isLabeledByFormItem:l,inputId:o}},pU=t=>{const e=tn();return R(()=>{var n,r;return(r=(n=e==null?void 0:e.proxy)==null?void 0:n.$props)==null?void 0:r[t]})},ys=(t,e={})=>{const n=H(void 0),r=e.prop?n:pU("size"),s=e.global?n:JB(),i=e.form?{size:void 0}:_t(bh,void 0),o=e.formItem?{size:void 0}:_t(Cl,void 0);return R(()=>r.value||p(t)||(o==null?void 0:o.size)||(i==null?void 0:i.size)||s.value||"")},pi=t=>{const e=pU("disabled"),n=_t(bh,void 0);return R(()=>e.value||p(t)||(n==null?void 0:n.disabled)||!1)},gve='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',vve=t=>getComputedStyle(t).position==="fixed"?!1:t.offsetParent!==null,$R=t=>Array.from(t.querySelectorAll(gve)).filter(e=>Wg(e)&&vve(e)),Wg=t=>{if(t.tabIndex>0||t.tabIndex===0&&t.getAttribute("tabIndex")!==null)return!0;if(t.tabIndex<0||t.hasAttribute("disabled")||t.getAttribute("aria-disabled")==="true")return!1;switch(t.nodeName){case"A":return!!t.href&&t.rel!=="ignore";case"INPUT":return!(t.type==="hidden"||t.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},nb=function(t,e,...n){let r;e.includes("mouse")||e.includes("click")?r="MouseEvents":e.includes("key")?r="KeyboardEvent":r="HTMLEvents";const s=document.createEvent(r);return s.initEvent(e,...n),t.dispatchEvent(s),t},mU=t=>!t.getAttribute("aria-owns"),gU=(t,e,n)=>{const{parentNode:r}=t;if(!r)return null;const s=r.querySelectorAll(n),i=Array.prototype.indexOf.call(s,t);return s[i+e]||null},rb=t=>{t&&(t.focus(),!mU(t)&&t.click())};function Zu(t,{disabled:e,beforeFocus:n,afterFocus:r,beforeBlur:s,afterBlur:i}={}){const o=tn(),{emit:a}=o,l=br(),c=H(!1),u=f=>{const m=Lt(n)?n(f):!1;p(e)||c.value||m||(c.value=!0,a("focus",f),r==null||r())},d=f=>{var m;const v=Lt(s)?s(f):!1;p(e)||f.relatedTarget&&((m=l.value)!=null&&m.contains(f.relatedTarget))||v||(c.value=!1,a("blur",f),i==null||i())},h=f=>{var m,v;p(e)||Wg(f.target)||(m=l.value)!=null&&m.contains(document.activeElement)&&l.value!==document.activeElement||(v=t.value)==null||v.focus()};return Be([l,()=>p(e)],([f,m])=>{f&&(m?f.removeAttribute("tabindex"):f.setAttribute("tabindex","-1"))}),pr(l,"focus",u,!0),pr(l,"blur",d,!0),pr(l,"click",h,!0),{isFocused:c,wrapperRef:l,handleFocus:u,handleBlur:d}}const yve=t=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(t);function Lv({afterComposition:t,emit:e}){const n=H(!1),r=a=>{e==null||e("compositionstart",a),n.value=!0},s=a=>{var l;e==null||e("compositionupdate",a);const c=(l=a.target)==null?void 0:l.value,u=c[c.length-1]||"";n.value=!yve(u)},i=a=>{e==null||e("compositionend",a),n.value&&(n.value=!1,Tt(()=>t(a)))};return{isComposing:n,handleComposition:a=>{a.type==="compositionend"?i(a):s(a)},handleCompositionStart:r,handleCompositionUpdate:s,handleCompositionEnd:i}}function bve(t){let e;function n(){if(t.value==null)return;const{selectionStart:s,selectionEnd:i,value:o}=t.value;if(s==null||i==null)return;const a=o.slice(0,Math.max(0,s)),l=o.slice(Math.max(0,i));e={selectionStart:s,selectionEnd:i,value:o,beforeTxt:a,afterTxt:l}}function r(){if(t.value==null||e==null)return;const{value:s}=t.value,{beforeTxt:i,afterTxt:o,selectionStart:a}=e;if(i==null||o==null||a==null)return;let l=s.length;if(s.endsWith(o))l=s.length-o.length;else if(s.startsWith(i))l=i.length;else{const c=i[a-1],u=s.indexOf(c,a-1);u!==-1&&(l=u+1)}t.value.setSelectionRange(l,l)}return[n,r]}const _ve="ElInput",wve=de({name:_ve,inheritAttrs:!1}),xve=de({...wve,props:Rv,emits:hve,setup(t,{expose:e,emit:n}){const r=t,s=Pc(),i=v_(),o=bs(),a=R(()=>[r.type==="textarea"?v.b():m.b(),m.m(h.value),m.is("disabled",f.value),m.is("exceed",le.value),{[m.b("group")]:o.prepend||o.append,[m.m("prefix")]:o.prefix||r.prefixIcon,[m.m("suffix")]:o.suffix||r.suffixIcon||r.clearable||r.showPassword,[m.bm("suffix","password-clear")]:O.value&&z.value,[m.b("hidden")]:r.type==="hidden"},s.class]),l=R(()=>[m.e("wrapper"),m.is("focus",I.value)]),{form:c,formItem:u}=fi(),{inputId:d}=la(r,{formItemContext:u}),h=ys(),f=pi(),m=Qe("input"),v=Qe("textarea"),y=br(),g=br(),S=H(!1),_=H(!1),w=H(),E=br(r.inputStyle),C=R(()=>y.value||g.value),{wrapperRef:T,isFocused:I,handleFocus:k,handleBlur:M}=Zu(C,{disabled:f,afterBlur(){var ie;r.validateEvent&&((ie=u==null?void 0:u.validate)==null||ie.call(u,"blur").catch(Te=>void 0))}}),L=R(()=>{var ie;return(ie=c==null?void 0:c.statusIcon)!=null?ie:!1}),N=R(()=>(u==null?void 0:u.validateState)||""),G=R(()=>N.value&&g_[N.value]),V=R(()=>_.value?Xge:_ge),X=R(()=>[s.style]),F=R(()=>[r.inputStyle,E.value,{resize:r.resize}]),$=R(()=>vs(r.modelValue)?"":String(r.modelValue)),O=R(()=>r.clearable&&!f.value&&!r.readonly&&!!$.value&&(I.value||S.value)),z=R(()=>r.showPassword&&!f.value&&!!$.value),re=R(()=>r.showWordLimit&&!!r.maxlength&&(r.type==="text"||r.type==="textarea")&&!f.value&&!r.readonly&&!r.showPassword),q=R(()=>$.value.length),le=R(()=>!!re.value&&q.value>Number(r.maxlength)),fe=R(()=>!!o.suffix||!!r.suffixIcon||O.value||r.showPassword||re.value||!!N.value&&L.value),[se,ye]=bve(y);Ir(g,ie=>{if(xe(),!re.value||r.resize!=="both")return;const Te=ie[0],{width:We}=Te.contentRect;w.value={right:`calc(100% - ${We+15+6}px)`}});const we=()=>{const{type:ie,autosize:Te}=r;if(!(!Vn||ie!=="textarea"||!g.value))if(Te){const We=un(Te)?Te.minRows:void 0,ut=un(Te)?Te.maxRows:void 0,lt=UR(g.value,We,ut);E.value={overflowY:"hidden",...lt},Tt(()=>{g.value.offsetHeight,E.value=lt})}else E.value={minHeight:UR(g.value).minHeight}},xe=(ie=>{let Te=!1;return()=>{var We;if(Te||!r.autosize)return;((We=g.value)==null?void 0:We.offsetParent)===null||(ie(),Te=!0)}})(we),je=()=>{const ie=C.value,Te=r.formatter?r.formatter($.value):$.value;!ie||ie.value===Te||(ie.value=Te)},nt=async ie=>{se();let{value:Te}=ie.target;if(r.formatter&&r.parser&&(Te=r.parser(Te)),!j.value){if(Te===$.value){je();return}n(Qt,Te),n(xs,Te),await Tt(),je(),ye()}},ue=ie=>{let{value:Te}=ie.target;r.formatter&&r.parser&&(Te=r.parser(Te)),n(xn,Te)},{isComposing:j,handleCompositionStart:he,handleCompositionUpdate:K,handleCompositionEnd:Fe}=Lv({emit:n,afterComposition:nt}),Oe=()=>{se(),_.value=!_.value,setTimeout(ye)},Re=()=>{var ie;return(ie=C.value)==null?void 0:ie.focus()},te=()=>{var ie;return(ie=C.value)==null?void 0:ie.blur()},oe=ie=>{S.value=!1,n("mouseleave",ie)},Ee=ie=>{S.value=!0,n("mouseenter",ie)},J=ie=>{n("keydown",ie)},Q=()=>{var ie;(ie=C.value)==null||ie.select()},_e=()=>{n(Qt,""),n(xn,""),n("clear"),n(xs,"")};return Be(()=>r.modelValue,()=>{var ie;Tt(()=>we()),r.validateEvent&&((ie=u==null?void 0:u.validate)==null||ie.call(u,"change").catch(Te=>void 0))}),Be($,()=>je()),Be(()=>r.type,async()=>{await Tt(),je(),we()}),Zt(()=>{!r.formatter&&r.parser,je(),Tt(we)}),e({input:y,textarea:g,ref:C,textareaStyle:F,autosize:Yn(r,"autosize"),isComposing:j,focus:Re,blur:te,select:Q,clear:_e,resizeTextarea:we}),(ie,Te)=>(D(),Z("div",{class:U([p(a),{[p(m).bm("group","append")]:ie.$slots.append,[p(m).bm("group","prepend")]:ie.$slots.prepend}]),style:Pt(p(X)),onMouseenter:Ee,onMouseleave:oe},[Pe(" input "),ie.type!=="textarea"?(D(),Z(xt,{key:0},[Pe(" prepend slot "),ie.$slots.prepend?(D(),Z("div",{key:0,class:U(p(m).be("group","prepend"))},[Ae(ie.$slots,"prepend")],2)):Pe("v-if",!0),ne("div",{ref_key:"wrapperRef",ref:T,class:U(p(l))},[Pe(" prefix slot "),ie.$slots.prefix||ie.prefixIcon?(D(),Z("span",{key:0,class:U(p(m).e("prefix"))},[ne("span",{class:U(p(m).e("prefix-inner"))},[Ae(ie.$slots,"prefix"),ie.prefixIcon?(D(),Le(p(Et),{key:0,class:U(p(m).e("icon"))},{default:me(()=>[(D(),Le(mn(ie.prefixIcon)))]),_:1},8,["class"])):Pe("v-if",!0)],2)],2)):Pe("v-if",!0),ne("input",yn({id:p(d),ref_key:"input",ref:y,class:p(m).e("inner")},p(i),{name:ie.name,minlength:ie.minlength,maxlength:ie.maxlength,type:ie.showPassword?_.value?"text":"password":ie.type,disabled:p(f),readonly:ie.readonly,autocomplete:ie.autocomplete,tabindex:ie.tabindex,"aria-label":ie.ariaLabel,placeholder:ie.placeholder,style:ie.inputStyle,form:ie.form,autofocus:ie.autofocus,role:ie.containerRole,inputmode:ie.inputmode,onCompositionstart:p(he),onCompositionupdate:p(K),onCompositionend:p(Fe),onInput:nt,onChange:ue,onKeydown:J}),null,16,["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode","onCompositionstart","onCompositionupdate","onCompositionend"]),Pe(" suffix slot "),p(fe)?(D(),Z("span",{key:1,class:U(p(m).e("suffix"))},[ne("span",{class:U(p(m).e("suffix-inner"))},[!p(O)||!p(z)||!p(re)?(D(),Z(xt,{key:0},[Ae(ie.$slots,"suffix"),ie.suffixIcon?(D(),Le(p(Et),{key:0,class:U(p(m).e("icon"))},{default:me(()=>[(D(),Le(mn(ie.suffixIcon)))]),_:1},8,["class"])):Pe("v-if",!0)],64)):Pe("v-if",!0),p(O)?(D(),Le(p(Et),{key:1,class:U([p(m).e("icon"),p(m).e("clear")]),onMousedown:$t(p(er),["prevent"]),onClick:_e},{default:me(()=>[ae(p(Rc))]),_:1},8,["class","onMousedown"])):Pe("v-if",!0),p(z)?(D(),Le(p(Et),{key:2,class:U([p(m).e("icon"),p(m).e("password")]),onClick:Oe},{default:me(()=>[(D(),Le(mn(p(V))))]),_:1},8,["class"])):Pe("v-if",!0),p(re)?(D(),Z("span",{key:3,class:U(p(m).e("count"))},[ne("span",{class:U(p(m).e("count-inner"))},tt(p(q))+" / "+tt(ie.maxlength),3)],2)):Pe("v-if",!0),p(N)&&p(G)&&p(L)?(D(),Le(p(Et),{key:4,class:U([p(m).e("icon"),p(m).e("validateIcon"),p(m).is("loading",p(N)==="validating")])},{default:me(()=>[(D(),Le(mn(p(G))))]),_:1},8,["class"])):Pe("v-if",!0)],2)],2)):Pe("v-if",!0)],2),Pe(" append slot "),ie.$slots.append?(D(),Z("div",{key:1,class:U(p(m).be("group","append"))},[Ae(ie.$slots,"append")],2)):Pe("v-if",!0)],64)):(D(),Z(xt,{key:1},[Pe(" textarea "),ne("textarea",yn({id:p(d),ref_key:"textarea",ref:g,class:[p(v).e("inner"),p(m).is("focus",p(I))]},p(i),{minlength:ie.minlength,maxlength:ie.maxlength,tabindex:ie.tabindex,disabled:p(f),readonly:ie.readonly,autocomplete:ie.autocomplete,style:p(F),"aria-label":ie.ariaLabel,placeholder:ie.placeholder,form:ie.form,autofocus:ie.autofocus,rows:ie.rows,role:ie.containerRole,onCompositionstart:p(he),onCompositionupdate:p(K),onCompositionend:p(Fe),onInput:nt,onFocus:p(k),onBlur:p(M),onChange:ue,onKeydown:J}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),p(re)?(D(),Z("span",{key:0,style:Pt(w.value),class:U(p(m).e("count"))},tt(p(q))+" / "+tt(ie.maxlength),7)):Pe("v-if",!0)],64))],38))}});var Sve=at(xve,[["__file","input.vue"]]);const Ci=nn(Sve),lf=4,vU={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Eve=({move:t,size:e,bar:n})=>({[n.size]:e,transform:`translate${n.axis}(${t}%)`}),JT=Symbol("scrollbarContextKey"),Cve=it({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Tve="Thumb",Mve=de({__name:"thumb",props:Cve,setup(t){const e=t,n=_t(JT),r=Qe("scrollbar");n||hs(Tve,"can not inject scrollbar context");const s=H(),i=H(),o=H({}),a=H(!1);let l=!1,c=!1,u=0,d=0,h=Vn?document.onselectstart:null;const f=R(()=>vU[e.vertical?"vertical":"horizontal"]),m=R(()=>Eve({size:e.size,move:e.move,bar:f.value})),v=R(()=>s.value[f.value.offset]**2/n.wrapElement[f.value.scrollSize]/e.ratio/i.value[f.value.offset]),y=I=>{var k;if(I.stopPropagation(),I.ctrlKey||[1,2].includes(I.button))return;(k=window.getSelection())==null||k.removeAllRanges(),S(I);const M=I.currentTarget;M&&(o.value[f.value.axis]=M[f.value.offset]-(I[f.value.client]-M.getBoundingClientRect()[f.value.direction]))},g=I=>{if(!i.value||!s.value||!n.wrapElement)return;const k=Math.abs(I.target.getBoundingClientRect()[f.value.direction]-I[f.value.client]),M=i.value[f.value.offset]/2,L=(k-M)*100*v.value/s.value[f.value.offset];n.wrapElement[f.value.scroll]=L*n.wrapElement[f.value.scrollSize]/100},S=I=>{I.stopImmediatePropagation(),l=!0,u=n.wrapElement.scrollHeight,d=n.wrapElement.scrollWidth,document.addEventListener("mousemove",_),document.addEventListener("mouseup",w),h=document.onselectstart,document.onselectstart=()=>!1},_=I=>{if(!s.value||!i.value||l===!1)return;const k=o.value[f.value.axis];if(!k)return;const M=(s.value.getBoundingClientRect()[f.value.direction]-I[f.value.client])*-1,L=i.value[f.value.offset]-k,N=(M-L)*100*v.value/s.value[f.value.offset];f.value.scroll==="scrollLeft"?n.wrapElement[f.value.scroll]=N*d/100:n.wrapElement[f.value.scroll]=N*u/100},w=()=>{l=!1,o.value[f.value.axis]=0,document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",w),T(),c&&(a.value=!1)},E=()=>{c=!1,a.value=!!e.size},C=()=>{c=!0,a.value=l};Xn(()=>{T(),document.removeEventListener("mouseup",w)});const T=()=>{document.onselectstart!==h&&(document.onselectstart=h)};return pr(Yn(n,"scrollbarElement"),"mousemove",E),pr(Yn(n,"scrollbarElement"),"mouseleave",C),(I,k)=>(D(),Le(Xs,{name:p(r).b("fade"),persisted:""},{default:me(()=>[cn(ne("div",{ref_key:"instance",ref:s,class:U([p(r).e("bar"),p(r).is(p(f).key)]),onMousedown:g,onClick:$t(()=>{},["stop"])},[ne("div",{ref_key:"thumb",ref:i,class:U(p(r).e("thumb")),style:Pt(p(m)),onMousedown:y},null,38)],42,["onClick"]),[[Wn,I.always||a.value]])]),_:1},8,["name"]))}});var VR=at(Mve,[["__file","thumb.vue"]]);const Ave=it({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),kve=de({__name:"bar",props:Ave,setup(t,{expose:e}){const n=t,r=_t(JT),s=H(0),i=H(0),o=H(""),a=H(""),l=H(1),c=H(1);return e({handleScroll:h=>{if(h){const f=h.offsetHeight-lf,m=h.offsetWidth-lf;i.value=h.scrollTop*100/f*l.value,s.value=h.scrollLeft*100/m*c.value}},update:()=>{const h=r==null?void 0:r.wrapElement;if(!h)return;const f=h.offsetHeight-lf,m=h.offsetWidth-lf,v=f**2/h.scrollHeight,y=m**2/h.scrollWidth,g=Math.max(v,n.minSize),S=Math.max(y,n.minSize);l.value=v/(f-v)/(g/(f-g)),c.value=y/(m-y)/(S/(m-S)),a.value=g+lf<f?`${g}px`:"",o.value=S+lf<m?`${S}px`:""}}),(h,f)=>(D(),Z(xt,null,[ae(VR,{move:s.value,ratio:c.value,size:o.value,always:h.always},null,8,["move","ratio","size","always"]),ae(VR,{move:i.value,ratio:l.value,size:a.value,vertical:"",always:h.always},null,8,["move","ratio","size","always"])],64))}});var Ive=at(kve,[["__file","bar.vue"]]);const Pve=it({distance:{type:Number,default:0},height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:Ce([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...hi(["ariaLabel","ariaOrientation"])}),yU={"end-reached":t=>["left","right","top","bottom"].includes(t),scroll:({scrollTop:t,scrollLeft:e})=>[t,e].every(Ft)},Rve="ElScrollbar",Lve=de({name:Rve}),Ove=de({...Lve,props:Pve,emits:yU,setup(t,{expose:e,emit:n}){const r=t,s=Qe("scrollbar");let i,o,a,l=0,c=0,u="";const d={bottom:!1,top:!1,right:!1,left:!1},h=H(),f=H(),m=H(),v=H(),y=R(()=>{const L={};return r.height&&(L.height=qr(r.height)),r.maxHeight&&(L.maxHeight=qr(r.maxHeight)),[r.wrapStyle,L]}),g=R(()=>[r.wrapClass,s.e("wrap"),{[s.em("wrap","hidden-default")]:!r.native}]),S=R(()=>[s.e("view"),r.viewClass]),_=L=>{var N;return(N=d[L])!=null?N:!1},w={top:"bottom",bottom:"top",left:"right",right:"left"},E=L=>{const N=w[u];if(!N)return;const G=L[u],V=L[N];G&&!d[u]&&(d[u]=!0),!V&&d[N]&&(d[N]=!1)},C=()=>{var L;if(f.value){(L=v.value)==null||L.handleScroll(f.value);const N=l,G=c;l=f.value.scrollTop,c=f.value.scrollLeft;const V={bottom:l+f.value.clientHeight>=f.value.scrollHeight-r.distance,top:l<=r.distance&&N!==0,right:c+f.value.clientWidth>=f.value.scrollWidth-r.distance&&G!==c,left:c<=r.distance&&G!==0};if(n("scroll",{scrollTop:l,scrollLeft:c}),N!==l&&(u=l>N?"bottom":"top"),G!==c&&(u=c>G?"right":"left"),r.distance>0){if(_(u))return;E(V)}V[u]&&n("end-reached",u)}};function T(L,N){un(L)?f.value.scrollTo(L):Ft(L)&&Ft(N)&&f.value.scrollTo(L,N)}const I=L=>{Ft(L)&&(f.value.scrollTop=L)},k=L=>{Ft(L)&&(f.value.scrollLeft=L)},M=()=>{var L;(L=v.value)==null||L.update(),d[u]=!1};return Be(()=>r.noresize,L=>{L?(i==null||i(),o==null||o(),a==null||a()):({stop:i}=Ir(m,M),{stop:o}=Ir(f,M),a=pr("resize",M))},{immediate:!0}),Be(()=>[r.maxHeight,r.height],()=>{r.native||Tt(()=>{var L;M(),f.value&&((L=v.value)==null||L.handleScroll(f.value))})}),Mn(JT,Ln({scrollbarElement:h,wrapElement:f})),t_(()=>{f.value&&(f.value.scrollTop=l,f.value.scrollLeft=c)}),Zt(()=>{r.native||Tt(()=>{M()})}),qa(()=>M()),e({wrapRef:f,update:M,scrollTo:T,setScrollTop:I,setScrollLeft:k,handleScroll:C}),(L,N)=>(D(),Z("div",{ref_key:"scrollbarRef",ref:h,class:U(p(s).b())},[ne("div",{ref_key:"wrapRef",ref:f,class:U(p(g)),style:Pt(p(y)),tabindex:L.tabindex,onScroll:C},[(D(),Le(mn(L.tag),{id:L.id,ref_key:"resizeRef",ref:m,class:U(p(S)),style:Pt(L.viewStyle),role:L.role,"aria-label":L.ariaLabel,"aria-orientation":L.ariaOrientation},{default:me(()=>[Ae(L.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),L.native?Pe("v-if",!0):(D(),Le(Ive,{key:0,ref_key:"barRef",ref:v,always:L.always,"min-size":L.minSize},null,8,["always","min-size"]))],2))}});var Nve=at(Ove,[["__file","scrollbar.vue"]]);const $a=nn(Nve),QT=Symbol("popper"),bU=Symbol("popperContent"),_U=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],wU=it({role:{type:String,values:_U,default:"tooltip"}}),Dve=de({name:"ElPopper",inheritAttrs:!1}),Fve=de({...Dve,props:wU,setup(t,{expose:e}){const n=t,r=H(),s=H(),i=H(),o=H(),a=R(()=>n.role),l={triggerRef:r,popperInstanceRef:s,contentRef:i,referenceRef:o,role:a};return e(l),Mn(QT,l),(c,u)=>Ae(c.$slots,"default")}});var Bve=at(Fve,[["__file","popper.vue"]]);const Uve=de({name:"ElPopperArrow",inheritAttrs:!1}),zve=de({...Uve,setup(t,{expose:e}){const n=Qe("popper"),{arrowRef:r,arrowStyle:s}=_t(bU,void 0);return Xn(()=>{r.value=void 0}),e({arrowRef:r}),(i,o)=>(D(),Z("span",{ref_key:"arrowRef",ref:r,class:U(p(n).e("arrow")),style:Pt(p(s)),"data-popper-arrow":""},null,6))}});var $ve=at(zve,[["__file","arrow.vue"]]);const xU=it({virtualRef:{type:Ce(Object)},virtualTriggering:Boolean,onMouseenter:{type:Ce(Function)},onMouseleave:{type:Ce(Function)},onClick:{type:Ce(Function)},onKeydown:{type:Ce(Function)},onFocus:{type:Ce(Function)},onBlur:{type:Ce(Function)},onContextmenu:{type:Ce(Function)},id:String,open:Boolean}),SU=Symbol("elForwardRef"),Vve=t=>{Mn(SU,{setForwardRef:n=>{t.value=n}})},Hve=t=>({mounted(e){t(e)},updated(e){t(e)},unmounted(){t(null)}}),Gve="ElOnlyChild",EU=de({name:Gve,setup(t,{slots:e,attrs:n}){var r;const s=_t(SU),i=Hve((r=s==null?void 0:s.setForwardRef)!=null?r:er);return()=>{var o;const a=(o=e.default)==null?void 0:o.call(e,n);if(!a||a.length>1)return null;const l=CU(a);return l?cn(xc(l,n),[[i]]):null}}});function CU(t){if(!t)return null;const e=t;for(const n of e){if(un(n))switch(n.type){case gs:continue;case vh:case"svg":return HR(n);case xt:return CU(n.children);default:return n}return HR(n)}return null}function HR(t){const e=Qe("only-child");return ae("span",{class:e.e("content")},[t])}const Wve=de({name:"ElPopperTrigger",inheritAttrs:!1}),jve=de({...Wve,props:xU,setup(t,{expose:e}){const n=t,{role:r,triggerRef:s}=_t(QT,void 0);Vve(s);const i=R(()=>a.value?n.id:void 0),o=R(()=>{if(r&&r.value==="tooltip")return n.open&&n.id?n.id:void 0}),a=R(()=>{if(r&&r.value!=="tooltip")return r.value}),l=R(()=>a.value?`${n.open}`:void 0);let c;const u=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return Zt(()=>{Be(()=>n.virtualRef,d=>{d&&(s.value=Ps(d))},{immediate:!0}),Be(s,(d,h)=>{c==null||c(),c=void 0,Ki(d)&&(u.forEach(f=>{var m;const v=n[f];v&&(d.addEventListener(f.slice(2).toLowerCase(),v),(m=h==null?void 0:h.removeEventListener)==null||m.call(h,f.slice(2).toLowerCase(),v))}),Wg(d)&&(c=Be([i,o,a,l],f=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((m,v)=>{vs(f[v])?d.removeAttribute(m):d.setAttribute(m,f[v])})},{immediate:!0}))),Ki(h)&&Wg(h)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(f=>h.removeAttribute(f))},{immediate:!0})}),Xn(()=>{if(c==null||c(),c=void 0,s.value&&Ki(s.value)){const d=s.value;u.forEach(h=>{const f=n[h];f&&d.removeEventListener(h.slice(2).toLowerCase(),f)}),s.value=void 0}}),e({triggerRef:s}),(d,h)=>d.virtualTriggering?Pe("v-if",!0):(D(),Le(p(EU),yn({key:0},d.$attrs,{"aria-controls":p(i),"aria-describedby":p(o),"aria-expanded":p(l),"aria-haspopup":p(a)}),{default:me(()=>[Ae(d.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var Kve=at(jve,[["__file","trigger.vue"]]);const Cx="focus-trap.focus-after-trapped",Tx="focus-trap.focus-after-released",qve="focus-trap.focusout-prevented",GR={cancelable:!0,bubbles:!1},Yve={cancelable:!0,bubbles:!1},WR="focusAfterTrapped",jR="focusAfterReleased",eM=Symbol("elFocusTrap"),tM=H(),y_=H(0),nM=H(0);let py=0;const TU=t=>{const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0||r===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e},KR=(t,e)=>{for(const n of t)if(!Xve(n,e))return n},Xve=(t,e)=>{if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1},Zve=t=>{const e=TU(t),n=KR(e,t),r=KR(e.reverse(),t);return[n,r]},Jve=t=>t instanceof HTMLInputElement&&"select"in t,Ql=(t,e)=>{if(t&&t.focus){const n=document.activeElement;let r=!1;Ki(t)&&!Wg(t)&&!t.getAttribute("tabindex")&&(t.setAttribute("tabindex","-1"),r=!0),t.focus({preventScroll:!0}),nM.value=window.performance.now(),t!==n&&Jve(t)&&e&&t.select(),Ki(t)&&r&&t.removeAttribute("tabindex")}};function qR(t,e){const n=[...t],r=t.indexOf(e);return r!==-1&&n.splice(r,1),n}const Qve=()=>{let t=[];return{push:r=>{const s=t[0];s&&r!==s&&s.pause(),t=qR(t,r),t.unshift(r)},remove:r=>{var s,i;t=qR(t,r),(i=(s=t[0])==null?void 0:s.resume)==null||i.call(s)}}},e0e=(t,e=!1)=>{const n=document.activeElement;for(const r of t)if(Ql(r,e),document.activeElement!==n)return},YR=Qve(),t0e=()=>y_.value>nM.value,my=()=>{tM.value="pointer",y_.value=window.performance.now()},XR=()=>{tM.value="keyboard",y_.value=window.performance.now()},n0e=()=>(Zt(()=>{py===0&&(document.addEventListener("mousedown",my),document.addEventListener("touchstart",my),document.addEventListener("keydown",XR)),py++}),Xn(()=>{py--,py<=0&&(document.removeEventListener("mousedown",my),document.removeEventListener("touchstart",my),document.removeEventListener("keydown",XR))}),{focusReason:tM,lastUserFocusTimestamp:y_,lastAutomatedFocusTimestamp:nM}),gy=t=>new CustomEvent(qve,{...Yve,detail:t}),bt={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"};let Sf=[];const ZR=t=>{t.code===bt.esc&&Sf.forEach(e=>e(t))},r0e=t=>{Zt(()=>{Sf.length===0&&document.addEventListener("keydown",ZR),Vn&&Sf.push(t)}),Xn(()=>{Sf=Sf.filter(e=>e!==t),Sf.length===0&&Vn&&document.removeEventListener("keydown",ZR)})},s0e=de({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[WR,jR,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:e}){const n=H();let r,s;const{focusReason:i}=n0e();r0e(m=>{t.trapped&&!o.paused&&e("release-requested",m)});const o={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},a=m=>{if(!t.loop&&!t.trapped||o.paused)return;const{code:v,altKey:y,ctrlKey:g,metaKey:S,currentTarget:_,shiftKey:w}=m,{loop:E}=t,C=v===bt.tab&&!y&&!g&&!S,T=document.activeElement;if(C&&T){const I=_,[k,M]=Zve(I);if(k&&M){if(!w&&T===M){const N=gy({focusReason:i.value});e("focusout-prevented",N),N.defaultPrevented||(m.preventDefault(),E&&Ql(k,!0))}else if(w&&[k,I].includes(T)){const N=gy({focusReason:i.value});e("focusout-prevented",N),N.defaultPrevented||(m.preventDefault(),E&&Ql(M,!0))}}else if(T===I){const N=gy({focusReason:i.value});e("focusout-prevented",N),N.defaultPrevented||m.preventDefault()}}};Mn(eM,{focusTrapRef:n,onKeydown:a}),Be(()=>t.focusTrapEl,m=>{m&&(n.value=m)},{immediate:!0}),Be([n],([m],[v])=>{m&&(m.addEventListener("keydown",a),m.addEventListener("focusin",u),m.addEventListener("focusout",d)),v&&(v.removeEventListener("keydown",a),v.removeEventListener("focusin",u),v.removeEventListener("focusout",d))});const l=m=>{e(WR,m)},c=m=>e(jR,m),u=m=>{const v=p(n);if(!v)return;const y=m.target,g=m.relatedTarget,S=y&&v.contains(y);t.trapped||g&&v.contains(g)||(r=g),S&&e("focusin",m),!o.paused&&t.trapped&&(S?s=y:Ql(s,!0))},d=m=>{const v=p(n);if(!(o.paused||!v))if(t.trapped){const y=m.relatedTarget;!vs(y)&&!v.contains(y)&&setTimeout(()=>{if(!o.paused&&t.trapped){const g=gy({focusReason:i.value});e("focusout-prevented",g),g.defaultPrevented||Ql(s,!0)}},0)}else{const y=m.target;y&&v.contains(y)||e("focusout",m)}};async function h(){await Tt();const m=p(n);if(m){YR.push(o);const v=m.contains(document.activeElement)?r:document.activeElement;if(r=v,!m.contains(v)){const g=new Event(Cx,GR);m.addEventListener(Cx,l),m.dispatchEvent(g),g.defaultPrevented||Tt(()=>{let S=t.focusStartEl;kt(S)||(Ql(S),document.activeElement!==S&&(S="first")),S==="first"&&e0e(TU(m),!0),(document.activeElement===v||S==="container")&&Ql(m)})}}}function f(){const m=p(n);if(m){m.removeEventListener(Cx,l);const v=new CustomEvent(Tx,{...GR,detail:{focusReason:i.value}});m.addEventListener(Tx,c),m.dispatchEvent(v),!v.defaultPrevented&&(i.value=="keyboard"||!t0e()||m.contains(document.activeElement))&&Ql(r??document.body),m.removeEventListener(Tx,c),YR.remove(o)}}return Zt(()=>{t.trapped&&h(),Be(()=>t.trapped,m=>{m?h():f()})}),Xn(()=>{t.trapped&&f(),n.value&&(n.value.removeEventListener("keydown",a),n.value.removeEventListener("focusin",u),n.value.removeEventListener("focusout",d),n.value=void 0)}),{onKeydown:a}}});function i0e(t,e,n,r,s,i){return Ae(t.$slots,"default",{handleKeydown:t.onKeydown})}var Xp=at(s0e,[["render",i0e],["__file","focus-trap.vue"]]),fo="top",sa="bottom",ia="right",po="left",rM="auto",Ov=[fo,sa,ia,po],yp="start",jg="end",o0e="clippingParents",MU="viewport",xm="popper",a0e="reference",JR=Ov.reduce(function(t,e){return t.concat([e+"-"+yp,e+"-"+jg])},[]),Lc=[].concat(Ov,[rM]).reduce(function(t,e){return t.concat([e,e+"-"+yp,e+"-"+jg])},[]),l0e="beforeRead",c0e="read",u0e="afterRead",d0e="beforeMain",h0e="main",f0e="afterMain",p0e="beforeWrite",m0e="write",g0e="afterWrite",v0e=[l0e,c0e,u0e,d0e,h0e,f0e,p0e,m0e,g0e];function Tl(t){return t?(t.nodeName||"").toLowerCase():null}function Xa(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function bp(t){var e=Xa(t).Element;return t instanceof e||t instanceof Element}function ta(t){var e=Xa(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function sM(t){if(typeof ShadowRoot>"u")return!1;var e=Xa(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function y0e(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},i=e.elements[n];!ta(i)||!Tl(i)||(Object.assign(i.style,r),Object.keys(s).forEach(function(o){var a=s[o];a===!1?i.removeAttribute(o):i.setAttribute(o,a===!0?"":a)}))})}function b0e(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],i=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!ta(s)||!Tl(s)||(Object.assign(s.style,a),Object.keys(i).forEach(function(l){s.removeAttribute(l)}))})}}var AU={name:"applyStyles",enabled:!0,phase:"write",fn:y0e,effect:b0e,requires:["computeStyles"]};function bl(t){return t.split("-")[0]}var Wd=Math.max,t1=Math.min,_p=Math.round;function wp(t,e){e===void 0&&(e=!1);var n=t.getBoundingClientRect(),r=1,s=1;if(ta(t)&&e){var i=t.offsetHeight,o=t.offsetWidth;o>0&&(r=_p(n.width)/o||1),i>0&&(s=_p(n.height)/i||1)}return{width:n.width/r,height:n.height/s,top:n.top/s,right:n.right/r,bottom:n.bottom/s,left:n.left/r,x:n.left/r,y:n.top/s}}function iM(t){var e=wp(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function kU(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&sM(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ec(t){return Xa(t).getComputedStyle(t)}function _0e(t){return["table","td","th"].indexOf(Tl(t))>=0}function Ju(t){return((bp(t)?t.ownerDocument:t.document)||window.document).documentElement}function b_(t){return Tl(t)==="html"?t:t.assignedSlot||t.parentNode||(sM(t)?t.host:null)||Ju(t)}function QR(t){return!ta(t)||Ec(t).position==="fixed"?null:t.offsetParent}function w0e(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&ta(t)){var r=Ec(t);if(r.position==="fixed")return null}var s=b_(t);for(sM(s)&&(s=s.host);ta(s)&&["html","body"].indexOf(Tl(s))<0;){var i=Ec(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function Nv(t){for(var e=Xa(t),n=QR(t);n&&_0e(n)&&Ec(n).position==="static";)n=QR(n);return n&&(Tl(n)==="html"||Tl(n)==="body"&&Ec(n).position==="static")?e:n||w0e(t)||e}function oM(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ig(t,e,n){return Wd(t,t1(e,n))}function x0e(t,e,n){var r=ig(t,e,n);return r>n?n:r}function IU(){return{top:0,right:0,bottom:0,left:0}}function PU(t){return Object.assign({},IU(),t)}function RU(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var S0e=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,PU(typeof t!="number"?t:RU(t,Ov))};function E0e(t){var e,n=t.state,r=t.name,s=t.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,a=bl(n.placement),l=oM(a),c=[po,ia].indexOf(a)>=0,u=c?"height":"width";if(!(!i||!o)){var d=S0e(s.padding,n),h=iM(i),f=l==="y"?fo:po,m=l==="y"?sa:ia,v=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],y=o[l]-n.rects.reference[l],g=Nv(i),S=g?l==="y"?g.clientHeight||0:g.clientWidth||0:0,_=v/2-y/2,w=d[f],E=S-h[u]-d[m],C=S/2-h[u]/2+_,T=ig(w,C,E),I=l;n.modifiersData[r]=(e={},e[I]=T,e.centerOffset=T-C,e)}}function C0e(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||!kU(e.elements.popper,s)||(e.elements.arrow=s))}var T0e={name:"arrow",enabled:!0,phase:"main",fn:E0e,effect:C0e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function xp(t){return t.split("-")[1]}var M0e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function A0e(t){var e=t.x,n=t.y,r=window,s=r.devicePixelRatio||1;return{x:_p(e*s)/s||0,y:_p(n*s)/s||0}}function e4(t){var e,n=t.popper,r=t.popperRect,s=t.placement,i=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=o.x,f=h===void 0?0:h,m=o.y,v=m===void 0?0:m,y=typeof u=="function"?u({x:f,y:v}):{x:f,y:v};f=y.x,v=y.y;var g=o.hasOwnProperty("x"),S=o.hasOwnProperty("y"),_=po,w=fo,E=window;if(c){var C=Nv(n),T="clientHeight",I="clientWidth";if(C===Xa(n)&&(C=Ju(n),Ec(C).position!=="static"&&a==="absolute"&&(T="scrollHeight",I="scrollWidth")),C=C,s===fo||(s===po||s===ia)&&i===jg){w=sa;var k=d&&C===E&&E.visualViewport?E.visualViewport.height:C[T];v-=k-r.height,v*=l?1:-1}if(s===po||(s===fo||s===sa)&&i===jg){_=ia;var M=d&&C===E&&E.visualViewport?E.visualViewport.width:C[I];f-=M-r.width,f*=l?1:-1}}var L=Object.assign({position:a},c&&M0e),N=u===!0?A0e({x:f,y:v}):{x:f,y:v};if(f=N.x,v=N.y,l){var G;return Object.assign({},L,(G={},G[w]=S?"0":"",G[_]=g?"0":"",G.transform=(E.devicePixelRatio||1)<=1?"translate("+f+"px, "+v+"px)":"translate3d("+f+"px, "+v+"px, 0)",G))}return Object.assign({},L,(e={},e[w]=S?v+"px":"",e[_]=g?f+"px":"",e.transform="",e))}function k0e(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,i=n.adaptive,o=i===void 0?!0:i,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:bl(e.placement),variation:xp(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,e4(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,e4(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var LU={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:k0e,data:{}},vy={passive:!0};function I0e(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,i=s===void 0?!0:s,o=r.resize,a=o===void 0?!0:o,l=Xa(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&c.forEach(function(u){u.addEventListener("scroll",n.update,vy)}),a&&l.addEventListener("resize",n.update,vy),function(){i&&c.forEach(function(u){u.removeEventListener("scroll",n.update,vy)}),a&&l.removeEventListener("resize",n.update,vy)}}var OU={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:I0e,data:{}},P0e={left:"right",right:"left",bottom:"top",top:"bottom"};function sb(t){return t.replace(/left|right|bottom|top/g,function(e){return P0e[e]})}var R0e={start:"end",end:"start"};function t4(t){return t.replace(/start|end/g,function(e){return R0e[e]})}function aM(t){var e=Xa(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function lM(t){return wp(Ju(t)).left+aM(t).scrollLeft}function L0e(t){var e=Xa(t),n=Ju(t),r=e.visualViewport,s=n.clientWidth,i=n.clientHeight,o=0,a=0;return r&&(s=r.width,i=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,a=r.offsetTop)),{width:s,height:i,x:o+lM(t),y:a}}function O0e(t){var e,n=Ju(t),r=aM(t),s=(e=t.ownerDocument)==null?void 0:e.body,i=Wd(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Wd(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+lM(t),l=-r.scrollTop;return Ec(s||n).direction==="rtl"&&(a+=Wd(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:a,y:l}}function cM(t){var e=Ec(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function NU(t){return["html","body","#document"].indexOf(Tl(t))>=0?t.ownerDocument.body:ta(t)&&cM(t)?t:NU(b_(t))}function og(t,e){var n;e===void 0&&(e=[]);var r=NU(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=Xa(r),o=s?[i].concat(i.visualViewport||[],cM(r)?r:[]):r,a=e.concat(o);return s?a:a.concat(og(b_(o)))}function X2(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function N0e(t){var e=wp(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function n4(t,e){return e===MU?X2(L0e(t)):bp(e)?N0e(e):X2(O0e(Ju(t)))}function D0e(t){var e=og(b_(t)),n=["absolute","fixed"].indexOf(Ec(t).position)>=0,r=n&&ta(t)?Nv(t):t;return bp(r)?e.filter(function(s){return bp(s)&&kU(s,r)&&Tl(s)!=="body"}):[]}function F0e(t,e,n){var r=e==="clippingParents"?D0e(t):[].concat(e),s=[].concat(r,[n]),i=s[0],o=s.reduce(function(a,l){var c=n4(t,l);return a.top=Wd(c.top,a.top),a.right=t1(c.right,a.right),a.bottom=t1(c.bottom,a.bottom),a.left=Wd(c.left,a.left),a},n4(t,i));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function DU(t){var e=t.reference,n=t.element,r=t.placement,s=r?bl(r):null,i=r?xp(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(s){case fo:l={x:o,y:e.y-n.height};break;case sa:l={x:o,y:e.y+e.height};break;case ia:l={x:e.x+e.width,y:a};break;case po:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=s?oM(s):null;if(c!=null){var u=c==="y"?"height":"width";switch(i){case yp:l[c]=l[c]-(e[u]/2-n[u]/2);break;case jg:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function Kg(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,i=n.boundary,o=i===void 0?o0e:i,a=n.rootBoundary,l=a===void 0?MU:a,c=n.elementContext,u=c===void 0?xm:c,d=n.altBoundary,h=d===void 0?!1:d,f=n.padding,m=f===void 0?0:f,v=PU(typeof m!="number"?m:RU(m,Ov)),y=u===xm?a0e:xm,g=t.rects.popper,S=t.elements[h?y:u],_=F0e(bp(S)?S:S.contextElement||Ju(t.elements.popper),o,l),w=wp(t.elements.reference),E=DU({reference:w,element:g,placement:s}),C=X2(Object.assign({},g,E)),T=u===xm?C:w,I={top:_.top-T.top+v.top,bottom:T.bottom-_.bottom+v.bottom,left:_.left-T.left+v.left,right:T.right-_.right+v.right},k=t.modifiersData.offset;if(u===xm&&k){var M=k[s];Object.keys(I).forEach(function(L){var N=[ia,sa].indexOf(L)>=0?1:-1,G=[fo,sa].indexOf(L)>=0?"y":"x";I[L]+=M[G]*N})}return I}function B0e(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,i=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?Lc:l,u=xp(r),d=u?a?JR:JR.filter(function(m){return xp(m)===u}):Ov,h=d.filter(function(m){return c.indexOf(m)>=0});h.length===0&&(h=d);var f=h.reduce(function(m,v){return m[v]=Kg(t,{placement:v,boundary:s,rootBoundary:i,padding:o})[bl(v)],m},{});return Object.keys(f).sort(function(m,v){return f[m]-f[v]})}function U0e(t){if(bl(t)===rM)return[];var e=sb(t);return[t4(t),e,t4(e)]}function z0e(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,m=f===void 0?!0:f,v=n.allowedAutoPlacements,y=e.options.placement,g=bl(y),S=g===y,_=l||(S||!m?[sb(y)]:U0e(y)),w=[y].concat(_).reduce(function(se,ye){return se.concat(bl(ye)===rM?B0e(e,{placement:ye,boundary:u,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:v}):ye)},[]),E=e.rects.reference,C=e.rects.popper,T=new Map,I=!0,k=w[0],M=0;M<w.length;M++){var L=w[M],N=bl(L),G=xp(L)===yp,V=[fo,sa].indexOf(N)>=0,X=V?"width":"height",F=Kg(e,{placement:L,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),$=V?G?ia:po:G?sa:fo;E[X]>C[X]&&($=sb($));var O=sb($),z=[];if(i&&z.push(F[N]<=0),a&&z.push(F[$]<=0,F[O]<=0),z.every(function(se){return se})){k=L,I=!1;break}T.set(L,z)}if(I)for(var re=m?3:1,q=function(se){var ye=w.find(function(we){var ve=T.get(we);if(ve)return ve.slice(0,se).every(function(xe){return xe})});if(ye)return k=ye,"break"},le=re;le>0;le--){var fe=q(le);if(fe==="break")break}e.placement!==k&&(e.modifiersData[r]._skip=!0,e.placement=k,e.reset=!0)}}var $0e={name:"flip",enabled:!0,phase:"main",fn:z0e,requiresIfExists:["offset"],data:{_skip:!1}};function r4(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function s4(t){return[fo,ia,sa,po].some(function(e){return t[e]>=0})}function V0e(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,i=e.modifiersData.preventOverflow,o=Kg(e,{elementContext:"reference"}),a=Kg(e,{altBoundary:!0}),l=r4(o,r),c=r4(a,s,i),u=s4(l),d=s4(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var H0e={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:V0e};function G0e(t,e,n){var r=bl(t),s=[po,fo].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=i[0],a=i[1];return o=o||0,a=(a||0)*s,[po,ia].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function W0e(t){var e=t.state,n=t.options,r=t.name,s=n.offset,i=s===void 0?[0,0]:s,o=Lc.reduce(function(u,d){return u[d]=G0e(d,e.rects,i),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}var j0e={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:W0e};function K0e(t){var e=t.state,n=t.name;e.modifiersData[n]=DU({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}var FU={name:"popperOffsets",enabled:!0,phase:"read",fn:K0e,data:{}};function q0e(t){return t==="x"?"y":"x"}function Y0e(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,f=h===void 0?!0:h,m=n.tetherOffset,v=m===void 0?0:m,y=Kg(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),g=bl(e.placement),S=xp(e.placement),_=!S,w=oM(g),E=q0e(w),C=e.modifiersData.popperOffsets,T=e.rects.reference,I=e.rects.popper,k=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,M=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),L=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,N={x:0,y:0};if(C){if(i){var G,V=w==="y"?fo:po,X=w==="y"?sa:ia,F=w==="y"?"height":"width",$=C[w],O=$+y[V],z=$-y[X],re=f?-I[F]/2:0,q=S===yp?T[F]:I[F],le=S===yp?-I[F]:-T[F],fe=e.elements.arrow,se=f&&fe?iM(fe):{width:0,height:0},ye=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:IU(),we=ye[V],ve=ye[X],xe=ig(0,T[F],se[F]),je=_?T[F]/2-re-xe-we-M.mainAxis:q-xe-we-M.mainAxis,nt=_?-T[F]/2+re+xe+ve+M.mainAxis:le+xe+ve+M.mainAxis,ue=e.elements.arrow&&Nv(e.elements.arrow),j=ue?w==="y"?ue.clientTop||0:ue.clientLeft||0:0,he=(G=L==null?void 0:L[w])!=null?G:0,K=$+je-he-j,Fe=$+nt-he,Oe=ig(f?t1(O,K):O,$,f?Wd(z,Fe):z);C[w]=Oe,N[w]=Oe-$}if(a){var Re,te=w==="x"?fo:po,oe=w==="x"?sa:ia,Ee=C[E],J=E==="y"?"height":"width",Q=Ee+y[te],_e=Ee-y[oe],ie=[fo,po].indexOf(g)!==-1,Te=(Re=L==null?void 0:L[E])!=null?Re:0,We=ie?Q:Ee-T[J]-I[J]-Te+M.altAxis,ut=ie?Ee+T[J]+I[J]-Te-M.altAxis:_e,lt=f&&ie?x0e(We,Ee,ut):ig(f?We:Q,Ee,f?ut:_e);C[E]=lt,N[E]=lt-Ee}e.modifiersData[r]=N}}var X0e={name:"preventOverflow",enabled:!0,phase:"main",fn:Y0e,requiresIfExists:["offset"]};function Z0e(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function J0e(t){return t===Xa(t)||!ta(t)?aM(t):Z0e(t)}function Q0e(t){var e=t.getBoundingClientRect(),n=_p(e.width)/t.offsetWidth||1,r=_p(e.height)/t.offsetHeight||1;return n!==1||r!==1}function eye(t,e,n){n===void 0&&(n=!1);var r=ta(e),s=ta(e)&&Q0e(e),i=Ju(e),o=wp(t,s),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Tl(e)!=="body"||cM(i))&&(a=J0e(e)),ta(e)?(l=wp(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=lM(i))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function tye(t){var e=new Map,n=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function s(i){n.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&s(l)}}),r.push(i)}return t.forEach(function(i){n.has(i.name)||s(i)}),r}function nye(t){var e=tye(t);return v0e.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function rye(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function sye(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var i4={placement:"bottom",modifiers:[],strategy:"absolute"};function o4(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function uM(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,i=s===void 0?i4:s;return function(o,a,l){l===void 0&&(l=i);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},i4,i),modifiersData:{},elements:{reference:o,popper:a},attributes:{},styles:{}},u=[],d=!1,h={state:c,setOptions:function(v){var y=typeof v=="function"?v(c.options):v;m(),c.options=Object.assign({},i,c.options,y),c.scrollParents={reference:bp(o)?og(o):o.contextElement?og(o.contextElement):[],popper:og(a)};var g=nye(sye([].concat(r,c.options.modifiers)));return c.orderedModifiers=g.filter(function(S){return S.enabled}),f(),h.update()},forceUpdate:function(){if(!d){var v=c.elements,y=v.reference,g=v.popper;if(o4(y,g)){c.rects={reference:eye(y,Nv(g),c.options.strategy==="fixed"),popper:iM(g)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(I){return c.modifiersData[I.name]=Object.assign({},I.data)});for(var S=0;S<c.orderedModifiers.length;S++){if(c.reset===!0){c.reset=!1,S=-1;continue}var _=c.orderedModifiers[S],w=_.fn,E=_.options,C=E===void 0?{}:E,T=_.name;typeof w=="function"&&(c=w({state:c,options:C,name:T,instance:h})||c)}}}},update:rye(function(){return new Promise(function(v){h.forceUpdate(),v(c)})}),destroy:function(){m(),d=!0}};if(!o4(o,a))return h;h.setOptions(l).then(function(v){!d&&l.onFirstUpdate&&l.onFirstUpdate(v)});function f(){c.orderedModifiers.forEach(function(v){var y=v.name,g=v.options,S=g===void 0?{}:g,_=v.effect;if(typeof _=="function"){var w=_({state:c,name:y,instance:h,options:S}),E=function(){};u.push(w||E)}})}function m(){u.forEach(function(v){return v()}),u=[]}return h}}uM();var iye=[OU,FU,LU,AU];uM({defaultModifiers:iye});var oye=[OU,FU,LU,AU,j0e,$0e,X0e,T0e,H0e],aye=uM({defaultModifiers:oye});const BU=it({arrowOffset:{type:Number,default:5}}),lye=["fixed","absolute"],cye=it({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Ce(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Lc,default:"bottom"},popperOptions:{type:Ce(Object),default:()=>({})},strategy:{type:String,values:lye,default:"absolute"}}),UU=it({...cye,...BU,id:String,style:{type:Ce([String,Array,Object])},className:{type:Ce([String,Array,Object])},effect:{type:Ce(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:Boolean,trapping:Boolean,popperClass:{type:Ce([String,Array,Object])},popperStyle:{type:Ce([String,Array,Object])},referenceEl:{type:Ce(Object)},triggerTargetEl:{type:Ce(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...hi(["ariaLabel"])}),uye={mouseenter:t=>t instanceof MouseEvent,mouseleave:t=>t instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},dye=(t,e)=>{const n=H(!1),r=H();return{focusStartRef:r,trapped:n,onFocusAfterReleased:c=>{var u;((u=c.detail)==null?void 0:u.focusReason)!=="pointer"&&(r.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:c=>{t.visible&&!n.value&&(c.target&&(r.value=c.target),n.value=!0)},onFocusoutPrevented:c=>{t.trapping||(c.detail.focusReason==="pointer"&&c.preventDefault(),n.value=!1)},onReleaseRequested:()=>{n.value=!1,e("close")}}},hye=(t,e=[])=>{const{placement:n,strategy:r,popperOptions:s}=t,i={placement:n,strategy:r,...s,modifiers:[...pye(t),...e]};return mye(i,s==null?void 0:s.modifiers),i},fye=t=>{if(Vn)return Ps(t)};function pye(t){const{offset:e,gpuAcceleration:n,fallbackPlacements:r}=t;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:r}},{name:"computeStyles",options:{gpuAcceleration:n}}]}function mye(t,e){e&&(t.modifiers=[...t.modifiers,...e??[]])}const gye=(t,e,n={})=>{const r={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const c=vye(l);Object.assign(o.value,c)},requires:["computeStyles"]},s=R(()=>{const{onFirstUpdate:l,placement:c,strategy:u,modifiers:d}=p(n);return{onFirstUpdate:l,placement:c||"bottom",strategy:u||"absolute",modifiers:[...d||[],r,{name:"applyStyles",enabled:!1}]}}),i=br(),o=H({styles:{popper:{position:p(s).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),a=()=>{i.value&&(i.value.destroy(),i.value=void 0)};return Be(s,l=>{const c=p(i);c&&c.setOptions(l)},{deep:!0}),Be([t,e],([l,c])=>{a(),!(!l||!c)&&(i.value=aye(l,c,p(s)))}),Xn(()=>{a()}),{state:R(()=>{var l;return{...((l=p(i))==null?void 0:l.state)||{}}}),styles:R(()=>p(o).styles),attributes:R(()=>p(o).attributes),update:()=>{var l;return(l=p(i))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=p(i))==null?void 0:l.forceUpdate()},instanceRef:R(()=>p(i))}};function vye(t){const e=Object.keys(t.elements),n=Mg(e.map(s=>[s,t.styles[s]||{}])),r=Mg(e.map(s=>[s,t.attributes[s]]));return{styles:n,attributes:r}}const yye=0,bye=t=>{const{popperInstanceRef:e,contentRef:n,triggerRef:r,role:s}=_t(QT,void 0),i=H(),o=R(()=>t.arrowOffset),a=R(()=>({name:"eventListeners",enabled:!!t.visible})),l=R(()=>{var g;const S=p(i),_=(g=p(o))!=null?g:yye;return{name:"arrow",enabled:!dre(S),options:{element:S,padding:_}}}),c=R(()=>({onFirstUpdate:()=>{m()},...hye(t,[p(l),p(a)])})),u=R(()=>fye(t.referenceEl)||p(r)),{attributes:d,state:h,styles:f,update:m,forceUpdate:v,instanceRef:y}=gye(u,n,c);return Be(y,g=>e.value=g,{flush:"sync"}),Zt(()=>{Be(()=>{var g;return(g=p(u))==null?void 0:g.getBoundingClientRect()},()=>{m()})}),{attributes:d,arrowRef:i,contentRef:n,instanceRef:y,state:h,styles:f,role:s,forceUpdate:v,update:m}},_ye=(t,{attributes:e,styles:n,role:r})=>{const{nextZIndex:s}=qp(),i=Qe("popper"),o=R(()=>p(e).popper),a=H(Ft(t.zIndex)?t.zIndex:s()),l=R(()=>[i.b(),i.is("pure",t.pure),i.is(t.effect),t.popperClass]),c=R(()=>[{zIndex:p(a)},p(n).popper,t.popperStyle||{}]),u=R(()=>r.value==="dialog"?"false":void 0),d=R(()=>p(n).arrow||{});return{ariaModal:u,arrowStyle:d,contentAttrs:o,contentClass:l,contentStyle:c,contentZIndex:a,updateZIndex:()=>{a.value=Ft(t.zIndex)?t.zIndex:s()}}},wye=de({name:"ElPopperContent"}),xye=de({...wye,props:UU,emits:uye,setup(t,{expose:e,emit:n}){const r=t,{focusStartRef:s,trapped:i,onFocusAfterReleased:o,onFocusAfterTrapped:a,onFocusInTrap:l,onFocusoutPrevented:c,onReleaseRequested:u}=dye(r,n),{attributes:d,arrowRef:h,contentRef:f,styles:m,instanceRef:v,role:y,update:g}=bye(r),{ariaModal:S,arrowStyle:_,contentAttrs:w,contentClass:E,contentStyle:C,updateZIndex:T}=_ye(r,{styles:m,attributes:d,role:y}),I=_t(Cl,void 0);Mn(bU,{arrowStyle:_,arrowRef:h}),I&&Mn(Cl,{...I,addInputId:er,removeInputId:er});let k;const M=(N=!0)=>{g(),N&&T()},L=()=>{M(!1),r.visible&&r.focusOnShow?i.value=!0:r.visible===!1&&(i.value=!1)};return Zt(()=>{Be(()=>r.triggerTargetEl,(N,G)=>{k==null||k(),k=void 0;const V=p(N||f.value),X=p(G||f.value);Ki(V)&&(k=Be([y,()=>r.ariaLabel,S,()=>r.id],F=>{["role","aria-label","aria-modal","id"].forEach(($,O)=>{vs(F[O])?V.removeAttribute($):V.setAttribute($,F[O])})},{immediate:!0})),X!==V&&Ki(X)&&["role","aria-label","aria-modal","id"].forEach(F=>{X.removeAttribute(F)})},{immediate:!0}),Be(()=>r.visible,L,{immediate:!0})}),Xn(()=>{k==null||k(),k=void 0}),e({popperContentRef:f,popperInstanceRef:v,updatePopper:M,contentStyle:C}),(N,G)=>(D(),Z("div",yn({ref_key:"contentRef",ref:f},p(w),{style:p(C),class:p(E),tabindex:"-1",onMouseenter:V=>N.$emit("mouseenter",V),onMouseleave:V=>N.$emit("mouseleave",V)}),[ae(p(Xp),{trapped:p(i),"trap-on-focus-in":!0,"focus-trap-el":p(f),"focus-start-el":p(s),onFocusAfterTrapped:p(a),onFocusAfterReleased:p(o),onFocusin:p(l),onFocusoutPrevented:p(c),onReleaseRequested:p(u)},{default:me(()=>[Ae(N.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var Sye=at(xye,[["__file","content.vue"]]);const zU=nn(Bve),__=Symbol("elTooltip"),w_=it({to:{type:Ce([String,Object]),required:!0},disabled:Boolean}),ss=it({...oU,...UU,appendTo:{type:w_.to.type},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:Ce(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...hi(["ariaLabel"])}),jf=it({...xU,disabled:Boolean,trigger:{type:Ce([String,Array]),default:"hover"},triggerKeys:{type:Ce(Array),default:()=>[bt.enter,bt.numpadEnter,bt.space]}}),Eye=Ya({type:Ce(Boolean),default:null}),Cye=Ya({type:Ce(Function)}),Tye=t=>{const e=`update:${t}`,n=`onUpdate:${t}`,r=[e],s={[t]:Eye,[n]:Cye};return{useModelToggle:({indicator:o,toggleReason:a,shouldHideWhenRouteChanges:l,shouldProceed:c,onShow:u,onHide:d})=>{const h=tn(),{emit:f}=h,m=h.props,v=R(()=>Lt(m[n])),y=R(()=>m[t]===null),g=T=>{o.value!==!0&&(o.value=!0,a&&(a.value=T),Lt(u)&&u(T))},S=T=>{o.value!==!1&&(o.value=!1,a&&(a.value=T),Lt(d)&&d(T))},_=T=>{if(m.disabled===!0||Lt(c)&&!c())return;const I=v.value&&Vn;I&&f(e,!0),(y.value||!I)&&g(T)},w=T=>{if(m.disabled===!0||!Vn)return;const I=v.value&&Vn;I&&f(e,!1),(y.value||!I)&&S(T)},E=T=>{nr(T)&&(m.disabled&&T?v.value&&f(e,!1):o.value!==T&&(T?g():S()))},C=()=>{o.value?w():_()};return Be(()=>m[t],E),l&&h.appContext.config.globalProperties.$route!==void 0&&Be(()=>({...h.proxy.$route}),()=>{l.value&&o.value&&w()}),Zt(()=>{E(m[t])}),{hide:w,show:_,toggle:C,hasUpdateHandler:v}},useModelToggleProps:s,useModelToggleEmits:r}},{useModelToggleProps:Mye,useModelToggleEmits:Aye,useModelToggle:kye}=Tye("visible"),Iye=it({...wU,...Mye,...ss,...jf,...BU,showArrow:{type:Boolean,default:!0}}),Pye=[...Aye,"before-show","before-hide","show","hide","open","close"],Rye=(t,e)=>rt(t)?t.includes(e):t===e,cf=(t,e,n)=>r=>{Rye(p(t),e)&&n(r)},es=(t,e,{checkForDefaultPrevented:n=!0}={})=>s=>{const i=t==null?void 0:t(s);if(n===!1||!i)return e==null?void 0:e(s)},a4=t=>e=>e.pointerType==="mouse"?t(e):void 0,Lye=de({name:"ElTooltipTrigger"}),Oye=de({...Lye,props:jf,setup(t,{expose:e}){const n=t,r=Qe("tooltip"),{controlled:s,id:i,open:o,onOpen:a,onClose:l,onToggle:c}=_t(__,void 0),u=H(null),d=()=>{if(p(s)||n.disabled)return!0},h=Yn(n,"trigger"),f=es(d,cf(h,"hover",a)),m=es(d,cf(h,"hover",l)),v=es(d,cf(h,"click",w=>{w.button===0&&c(w)})),y=es(d,cf(h,"focus",a)),g=es(d,cf(h,"focus",l)),S=es(d,cf(h,"contextmenu",w=>{w.preventDefault(),c(w)})),_=es(d,w=>{const{code:E}=w;n.triggerKeys.includes(E)&&(w.preventDefault(),c(w))});return e({triggerRef:u}),(w,E)=>(D(),Le(p(Kve),{id:p(i),"virtual-ref":w.virtualRef,open:p(o),"virtual-triggering":w.virtualTriggering,class:U(p(r).e("trigger")),onBlur:p(g),onClick:p(v),onContextmenu:p(S),onFocus:p(y),onMouseenter:p(f),onMouseleave:p(m),onKeydown:p(_)},{default:me(()=>[Ae(w.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var Nye=at(Oye,[["__file","trigger.vue"]]);const Dye=de({__name:"teleport",props:w_,setup(t){return(e,n)=>e.disabled?Ae(e.$slots,"default",{key:0}):(D(),Le(Hue,{key:1,to:e.to},[Ae(e.$slots,"default")],8,["to"]))}});var Fye=at(Dye,[["__file","teleport.vue"]]);const Zp=nn(Fye),$U=()=>{const t=zT(),e=ZT(),n=R(()=>`${t.value}-popper-container-${e.prefix}`),r=R(()=>`#${n.value}`);return{id:n,selector:r}},Bye=t=>{const e=document.createElement("div");return e.id=t,document.body.appendChild(e),e},Uye=()=>{const{id:t,selector:e}=$U();return r_(()=>{Vn&&(document.body.querySelector(e.value)||Bye(t.value))}),{id:t,selector:e}},zye=de({name:"ElTooltipContent",inheritAttrs:!1}),$ye=de({...zye,props:ss,setup(t,{expose:e}){const n=t,{selector:r}=$U(),s=Qe("tooltip"),i=H(),o=Jb(()=>{var O;return(O=i.value)==null?void 0:O.popperContentRef});let a;const{controlled:l,id:c,open:u,trigger:d,onClose:h,onOpen:f,onShow:m,onHide:v,onBeforeShow:y,onBeforeHide:g}=_t(__,void 0),S=R(()=>n.transition||`${s.namespace.value}-fade-in-linear`),_=R(()=>n.persistent);Xn(()=>{a==null||a()});const w=R(()=>p(_)?!0:p(u)),E=R(()=>n.disabled?!1:p(u)),C=R(()=>n.appendTo||r.value),T=R(()=>{var O;return(O=n.style)!=null?O:{}}),I=H(!0),k=()=>{v(),$()&&Ql(document.body),I.value=!0},M=()=>{if(p(l))return!0},L=es(M,()=>{n.enterable&&p(d)==="hover"&&f()}),N=es(M,()=>{p(d)==="hover"&&h()}),G=()=>{var O,z;(z=(O=i.value)==null?void 0:O.updatePopper)==null||z.call(O),y==null||y()},V=()=>{g==null||g()},X=()=>{m()},F=()=>{n.virtualTriggering||h()},$=O=>{var z;const re=(z=i.value)==null?void 0:z.popperContentRef,q=(O==null?void 0:O.relatedTarget)||document.activeElement;return re==null?void 0:re.contains(q)};return Be(()=>p(u),O=>{O?(I.value=!1,a=VT(o,()=>{if(p(l))return;p(d)!=="hover"&&h()})):a==null||a()},{flush:"post"}),Be(()=>n.content,()=>{var O,z;(z=(O=i.value)==null?void 0:O.updatePopper)==null||z.call(O)}),e({contentRef:i,isFocusInsideContent:$}),(O,z)=>(D(),Le(p(Zp),{disabled:!O.teleported,to:p(C)},{default:me(()=>[p(w)||!I.value?(D(),Le(Xs,{key:0,name:p(S),appear:!p(_),onAfterLeave:k,onBeforeEnter:G,onAfterEnter:X,onBeforeLeave:V,persisted:""},{default:me(()=>[cn(ae(p(Sye),yn({id:p(c),ref_key:"contentRef",ref:i},O.$attrs,{"aria-label":O.ariaLabel,"aria-hidden":I.value,"boundaries-padding":O.boundariesPadding,"fallback-placements":O.fallbackPlacements,"gpu-acceleration":O.gpuAcceleration,offset:O.offset,placement:O.placement,"popper-options":O.popperOptions,"arrow-offset":O.arrowOffset,strategy:O.strategy,effect:O.effect,enterable:O.enterable,pure:O.pure,"popper-class":O.popperClass,"popper-style":[O.popperStyle,p(T)],"reference-el":O.referenceEl,"trigger-target-el":O.triggerTargetEl,visible:p(E),"z-index":O.zIndex,onMouseenter:p(L),onMouseleave:p(N),onBlur:F,onClose:p(h)}),{default:me(()=>[Ae(O.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","arrow-offset","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"]),[[Wn,p(E)]])]),_:3},8,["name","appear"])):Pe("v-if",!0)]),_:3},8,["disabled","to"]))}});var Vye=at($ye,[["__file","content.vue"]]);const Hye=de({name:"ElTooltip"}),Gye=de({...Hye,props:Iye,emits:Pye,setup(t,{expose:e,emit:n}){const r=t;Uye();const s=Qe("tooltip"),i=ni(),o=H(),a=H(),l=()=>{var _;const w=p(o);w&&((_=w.popperInstanceRef)==null||_.update())},c=H(!1),u=H(),{show:d,hide:h,hasUpdateHandler:f}=kye({indicator:c,toggleReason:u}),{onOpen:m,onClose:v}=aU({showAfter:Yn(r,"showAfter"),hideAfter:Yn(r,"hideAfter"),autoClose:Yn(r,"autoClose"),open:d,close:h}),y=R(()=>nr(r.visible)&&!f.value),g=R(()=>[s.b(),r.popperClass]);Mn(__,{controlled:y,id:i,open:Ku(c),trigger:Yn(r,"trigger"),onOpen:m,onClose:v,onToggle:_=>{p(c)?v(_):m(_)},onShow:()=>{n("show",u.value)},onHide:()=>{n("hide",u.value)},onBeforeShow:()=>{n("before-show",u.value)},onBeforeHide:()=>{n("before-hide",u.value)},updatePopper:l}),Be(()=>r.disabled,_=>{_&&c.value&&(c.value=!1)});const S=_=>{var w;return(w=a.value)==null?void 0:w.isFocusInsideContent(_)};return bF(()=>c.value&&h()),e({popperRef:o,contentRef:a,isFocusInsideContent:S,updatePopper:l,onOpen:m,onClose:v,hide:h}),(_,w)=>(D(),Le(p(zU),{ref_key:"popperRef",ref:o,role:_.role},{default:me(()=>[ae(Nye,{disabled:_.disabled,trigger:_.trigger,"trigger-keys":_.triggerKeys,"virtual-ref":_.virtualRef,"virtual-triggering":_.virtualTriggering},{default:me(()=>[_.$slots.default?Ae(_.$slots,"default",{key:0}):Pe("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),ae(Vye,{ref_key:"contentRef",ref:a,"aria-label":_.ariaLabel,"boundaries-padding":_.boundariesPadding,content:_.content,disabled:_.disabled,effect:_.effect,enterable:_.enterable,"fallback-placements":_.fallbackPlacements,"hide-after":_.hideAfter,"gpu-acceleration":_.gpuAcceleration,offset:_.offset,persistent:_.persistent,"popper-class":p(g),"popper-style":_.popperStyle,placement:_.placement,"popper-options":_.popperOptions,"arrow-offset":_.arrowOffset,pure:_.pure,"raw-content":_.rawContent,"reference-el":_.referenceEl,"trigger-target-el":_.triggerTargetEl,"show-after":_.showAfter,strategy:_.strategy,teleported:_.teleported,transition:_.transition,"virtual-triggering":_.virtualTriggering,"z-index":_.zIndex,"append-to":_.appendTo},{default:me(()=>[Ae(_.$slots,"content",{},()=>[_.rawContent?(D(),Z("span",{key:0,innerHTML:_.content},null,8,["innerHTML"])):(D(),Z("span",{key:1},tt(_.content),1))]),_.showArrow?(D(),Le(p($ve),{key:0})):Pe("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","arrow-offset","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Wye=at(Gye,[["__file","tooltip.vue"]]);const ri=nn(Wye),jye=it({...Rv,valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:Ce(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:Ce([Function,Array]),default:er},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:Boolean,hideLoading:Boolean,teleported:ss.teleported,appendTo:ss.appendTo,highlightFirstItem:Boolean,fitInputWidth:Boolean}),Kye={[Qt]:t=>kt(t),[xs]:t=>kt(t),[xn]:t=>kt(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,select:t=>un(t)},VU="ElAutocomplete",qye=de({name:VU,inheritAttrs:!1}),Yye=de({...qye,props:jye,emits:Kye,setup(t,{expose:e,emit:n}){const r=t,s=R(()=>Yo(r,Object.keys(Rv))),i=Pc(),o=pi(),a=Qe("autocomplete"),l=H(),c=H(),u=H(),d=H();let h=!1,f=!1;const m=H([]),v=H(-1),y=H(""),g=H(!1),S=H(!1),_=H(!1),w=ni(),E=R(()=>i.style),C=R(()=>(m.value.length>0||_.value)&&g.value),T=R(()=>!r.hideLoading&&_.value),I=R(()=>l.value?Array.from(l.value.$el.querySelectorAll("input")):[]),k=()=>{C.value&&(y.value=`${l.value.$el.offsetWidth}px`)},M=()=>{v.value=-1},L=async ve=>{if(S.value)return;const xe=je=>{_.value=!1,!S.value&&(rt(je)?(m.value=je,v.value=r.highlightFirstItem?0:-1):hs(VU,"autocomplete suggestions must be an array"))};if(_.value=!0,rt(r.fetchSuggestions))xe(r.fetchSuggestions);else{const je=await r.fetchSuggestions(ve,xe);rt(je)&&xe(je)}},N=mo(L,r.debounce),G=ve=>{const xe=!!ve;if(n(xs,ve),n(Qt,ve),S.value=!1,g.value||(g.value=xe),!r.triggerOnFocus&&!ve){S.value=!0,m.value=[];return}N(ve)},V=ve=>{var xe;o.value||(((xe=ve.target)==null?void 0:xe.tagName)!=="INPUT"||I.value.includes(document.activeElement))&&(g.value=!0)},X=ve=>{n(xn,ve)},F=ve=>{var xe;if(f)f=!1;else{g.value=!0,n("focus",ve);const je=(xe=r.modelValue)!=null?xe:"";r.triggerOnFocus&&!h&&N(String(je))}},$=ve=>{setTimeout(()=>{var xe;if((xe=u.value)!=null&&xe.isFocusInsideContent()){f=!0;return}g.value&&q(),n("blur",ve)})},O=()=>{g.value=!1,n(Qt,""),n("clear")},z=async()=>{C.value&&v.value>=0&&v.value<m.value.length?se(m.value[v.value]):r.selectWhenUnmatched&&(n("select",{value:r.modelValue}),m.value=[],v.value=-1)},re=ve=>{C.value&&(ve.preventDefault(),ve.stopPropagation(),q())},q=()=>{g.value=!1},le=()=>{var ve;(ve=l.value)==null||ve.focus()},fe=()=>{var ve;(ve=l.value)==null||ve.blur()},se=async ve=>{n(xs,ve[r.valueKey]),n(Qt,ve[r.valueKey]),n("select",ve),m.value=[],v.value=-1},ye=ve=>{if(!C.value||_.value)return;if(ve<0){v.value=-1;return}ve>=m.value.length&&(ve=m.value.length-1);const xe=c.value.querySelector(`.${a.be("suggestion","wrap")}`),nt=xe.querySelectorAll(`.${a.be("suggestion","list")} li`)[ve],ue=xe.scrollTop,{offsetTop:j,scrollHeight:he}=nt;j+he>ue+xe.clientHeight&&(xe.scrollTop+=he),j<ue&&(xe.scrollTop-=he),v.value=ve,l.value.ref.setAttribute("aria-activedescendant",`${w.value}-item-${v.value}`)},we=VT(d,()=>{var ve;(ve=u.value)!=null&&ve.isFocusInsideContent()||C.value&&q()});return Xn(()=>{we==null||we()}),Zt(()=>{l.value.ref.setAttribute("role","textbox"),l.value.ref.setAttribute("aria-autocomplete","list"),l.value.ref.setAttribute("aria-controls","id"),l.value.ref.setAttribute("aria-activedescendant",`${w.value}-item-${v.value}`),h=l.value.ref.hasAttribute("readonly")}),e({highlightedIndex:v,activated:g,loading:_,inputRef:l,popperRef:u,suggestions:m,handleSelect:se,handleKeyEnter:z,focus:le,blur:fe,close:q,highlight:ye,getData:L}),(ve,xe)=>(D(),Le(p(ri),{ref_key:"popperRef",ref:u,visible:p(C),placement:ve.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[p(a).e("popper"),ve.popperClass],teleported:ve.teleported,"append-to":ve.appendTo,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${p(a).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:k,onHide:M},{content:me(()=>[ne("div",{ref_key:"regionRef",ref:c,class:U([p(a).b("suggestion"),p(a).is("loading",p(T))]),style:Pt({[ve.fitInputWidth?"width":"minWidth"]:y.value,outline:"none"}),role:"region"},[ve.$slots.header?(D(),Z("div",{key:0,class:U(p(a).be("suggestion","header")),onClick:$t(()=>{},["stop"])},[Ae(ve.$slots,"header")],10,["onClick"])):Pe("v-if",!0),ae(p($a),{id:p(w),tag:"ul","wrap-class":p(a).be("suggestion","wrap"),"view-class":p(a).be("suggestion","list"),role:"listbox"},{default:me(()=>[p(T)?(D(),Z("li",{key:0},[Ae(ve.$slots,"loading",{},()=>[ae(p(Et),{class:U(p(a).is("loading"))},{default:me(()=>[ae(p(El))]),_:1},8,["class"])])])):(D(!0),Z(xt,{key:1},_n(m.value,(je,nt)=>(D(),Z("li",{id:`${p(w)}-item-${nt}`,key:nt,class:U({highlighted:v.value===nt}),role:"option","aria-selected":v.value===nt,onClick:ue=>se(je)},[Ae(ve.$slots,"default",{item:je},()=>[rn(tt(je[ve.valueKey]),1)])],10,["id","aria-selected","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class"]),ve.$slots.footer?(D(),Z("div",{key:1,class:U(p(a).be("suggestion","footer")),onClick:$t(()=>{},["stop"])},[Ae(ve.$slots,"footer")],10,["onClick"])):Pe("v-if",!0)],6)]),default:me(()=>[ne("div",{ref_key:"listboxRef",ref:d,class:U([p(a).b(),ve.$attrs.class]),style:Pt(p(E)),role:"combobox","aria-haspopup":"listbox","aria-expanded":p(C),"aria-owns":p(w)},[ae(p(Ci),yn({ref_key:"inputRef",ref:l},yn(p(s),ve.$attrs),{"model-value":ve.modelValue,disabled:p(o),onInput:G,onChange:X,onFocus:F,onBlur:$,onClear:O,onKeydown:[cr($t(je=>ye(v.value-1),["prevent"]),["up"]),cr($t(je=>ye(v.value+1),["prevent"]),["down"]),cr(z,["enter"]),cr(q,["tab"]),cr(re,["esc"])],onMousedown:V}),go({_:2},[ve.$slots.prepend?{name:"prepend",fn:me(()=>[Ae(ve.$slots,"prepend")])}:void 0,ve.$slots.append?{name:"append",fn:me(()=>[Ae(ve.$slots,"append")])}:void 0,ve.$slots.prefix?{name:"prefix",fn:me(()=>[Ae(ve.$slots,"prefix")])}:void 0,ve.$slots.suffix?{name:"suffix",fn:me(()=>[Ae(ve.$slots,"suffix")])}:void 0]),1040,["model-value","disabled","onKeydown"])],14,["aria-expanded","aria-owns"])]),_:3},8,["visible","placement","popper-class","teleported","append-to","transition"]))}});var Xye=at(Yye,[["__file","autocomplete.vue"]]);const HU=nn(Xye),Zye=it({size:{type:[Number,String],values:Rl,default:"",validator:t=>Ft(t)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:or},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:Ce(String),default:"cover"}}),Jye={error:t=>t instanceof Event},Qye=de({name:"ElAvatar"}),ebe=de({...Qye,props:Zye,emits:Jye,setup(t,{emit:e}){const n=t,r=Qe("avatar"),s=H(!1),i=R(()=>{const{size:c,icon:u,shape:d}=n,h=[r.b()];return kt(c)&&h.push(r.m(c)),u&&h.push(r.m("icon")),d&&h.push(r.m(d)),h}),o=R(()=>{const{size:c}=n;return Ft(c)?r.cssVarBlock({size:qr(c)||""}):void 0}),a=R(()=>({objectFit:n.fit}));Be(()=>n.src,()=>s.value=!1);function l(c){s.value=!0,e("error",c)}return(c,u)=>(D(),Z("span",{class:U(p(i)),style:Pt(p(o))},[(c.src||c.srcSet)&&!s.value?(D(),Z("img",{key:0,src:c.src,alt:c.alt,srcset:c.srcSet,style:Pt(p(a)),onError:l},null,44,["src","alt","srcset"])):c.icon?(D(),Le(p(Et),{key:1},{default:me(()=>[(D(),Le(mn(c.icon)))]),_:1})):Ae(c.$slots,"default",{key:2})],6))}});var tbe=at(ebe,[["__file","avatar.vue"]]);const nbe=nn(tbe),rbe={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},sbe={click:t=>t instanceof MouseEvent},ibe=(t,e,n)=>{const r=br(),s=br(),i=H(!1),o=()=>{r.value&&(i.value=r.value.scrollTop>=t.visibilityHeight)},a=c=>{var u;(u=r.value)==null||u.scrollTo({top:0,behavior:"smooth"}),e("click",c)},l=GB(o,300,!0);return pr(s,"scroll",l),Zt(()=>{var c;s.value=document,r.value=document.documentElement,t.target&&(r.value=(c=document.querySelector(t.target))!=null?c:void 0,r.value||hs(n,`target does not exist: ${t.target}`),s.value=r.value),o()}),{visible:i,handleClick:a}},GU="ElBacktop",obe=de({name:GU}),abe=de({...obe,props:rbe,emits:sbe,setup(t,{emit:e}){const n=t,r=Qe("backtop"),{handleClick:s,visible:i}=ibe(n,e,GU),o=R(()=>({right:`${n.right}px`,bottom:`${n.bottom}px`}));return(a,l)=>(D(),Le(Xs,{name:`${p(r).namespace.value}-fade-in`},{default:me(()=>[p(i)?(D(),Z("div",{key:0,style:Pt(p(o)),class:U(p(r).b()),onClick:$t(p(s),["stop"])},[Ae(a.$slots,"default",{},()=>[ae(p(Et),{class:U(p(r).e("icon"))},{default:me(()=>[ae(p(nge))]),_:1},8,["class"])])],14,["onClick"])):Pe("v-if",!0)]),_:3},8,["name"]))}});var lbe=at(abe,[["__file","backtop.vue"]]);const cbe=nn(lbe),ube=it({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:Ce([String,Object,Array])},offset:{type:Ce(Array),default:[0,0]},badgeClass:{type:String}}),dbe=de({name:"ElBadge"}),hbe=de({...dbe,props:ube,setup(t,{expose:e}){const n=t,r=Qe("badge"),s=R(()=>n.isDot?"":Ft(n.value)&&Ft(n.max)?n.max<n.value?`${n.max}+`:`${n.value}`:`${n.value}`),i=R(()=>{var o,a,l,c,u;return[{backgroundColor:n.color,marginRight:qr(-((a=(o=n.offset)==null?void 0:o[0])!=null?a:0)),marginTop:qr((c=(l=n.offset)==null?void 0:l[1])!=null?c:0)},(u=n.badgeStyle)!=null?u:{}]});return e({content:s}),(o,a)=>(D(),Z("div",{class:U(p(r).b())},[Ae(o.$slots,"default"),ae(Xs,{name:`${p(r).namespace.value}-zoom-in-center`,persisted:""},{default:me(()=>[cn(ne("sup",{class:U([p(r).e("content"),p(r).em("content",o.type),p(r).is("fixed",!!o.$slots.default),p(r).is("dot",o.isDot),p(r).is("hide-zero",!o.showZero&&n.value===0),o.badgeClass]),style:Pt(p(i))},[Ae(o.$slots,"content",{value:p(s)},()=>[rn(tt(p(s)),1)])],6),[[Wn,!o.hidden&&(p(s)||o.isDot||o.$slots.content)]])]),_:3},8,["name"])],2))}});var fbe=at(hbe,[["__file","badge.vue"]]);const WU=nn(fbe),jU=Symbol("breadcrumbKey"),pbe=it({separator:{type:String,default:"/"},separatorIcon:{type:or}}),mbe=de({name:"ElBreadcrumb"}),gbe=de({...mbe,props:pbe,setup(t){const e=t,{t:n}=zn(),r=Qe("breadcrumb"),s=H();return Mn(jU,e),Zt(()=>{const i=s.value.querySelectorAll(`.${r.e("item")}`);i.length&&i[i.length-1].setAttribute("aria-current","page")}),(i,o)=>(D(),Z("div",{ref_key:"breadcrumb",ref:s,class:U(p(r).b()),"aria-label":p(n)("el.breadcrumb.label"),role:"navigation"},[Ae(i.$slots,"default")],10,["aria-label"]))}});var vbe=at(gbe,[["__file","breadcrumb.vue"]]);const ybe=it({to:{type:Ce([String,Object]),default:""},replace:Boolean}),bbe=de({name:"ElBreadcrumbItem"}),_be=de({...bbe,props:ybe,setup(t){const e=t,n=tn(),r=_t(jU,void 0),s=Qe("breadcrumb"),i=n.appContext.config.globalProperties.$router,o=H(),a=()=>{!e.to||!i||(e.replace?i.replace(e.to):i.push(e.to))};return(l,c)=>{var u,d;return D(),Z("span",{class:U(p(s).e("item"))},[ne("span",{ref_key:"link",ref:o,class:U([p(s).e("inner"),p(s).is("link",!!l.to)]),role:"link",onClick:a},[Ae(l.$slots,"default")],2),(u=p(r))!=null&&u.separatorIcon?(D(),Le(p(Et),{key:0,class:U(p(s).e("separator"))},{default:me(()=>[(D(),Le(mn(p(r).separatorIcon)))]),_:1},8,["class"])):(D(),Z("span",{key:1,class:U(p(s).e("separator")),role:"presentation"},tt((d=p(r))==null?void 0:d.separator),3))],2)}}});var KU=at(_be,[["__file","breadcrumb-item.vue"]]);const wbe=nn(vbe,{BreadcrumbItem:KU}),xbe=Br(KU),qU=Symbol("buttonGroupContextKey"),vc=({from:t,replacement:e,scope:n,version:r,ref:s,type:i="API"},o)=>{Be(()=>p(o),a=>{},{immediate:!0})},Sbe=(t,e)=>{vc({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},R(()=>t.type==="text"));const n=_t(qU,void 0),r=Yp("button"),{form:s}=fi(),i=ys(R(()=>n==null?void 0:n.size)),o=pi(),a=H(),l=bs(),c=R(()=>{var y;return t.type||(n==null?void 0:n.type)||((y=r.value)==null?void 0:y.type)||""}),u=R(()=>{var y,g,S;return(S=(g=t.autoInsertSpace)!=null?g:(y=r.value)==null?void 0:y.autoInsertSpace)!=null?S:!1}),d=R(()=>{var y,g,S;return(S=(g=t.plain)!=null?g:(y=r.value)==null?void 0:y.plain)!=null?S:!1}),h=R(()=>{var y,g,S;return(S=(g=t.round)!=null?g:(y=r.value)==null?void 0:y.round)!=null?S:!1}),f=R(()=>t.tag==="button"?{ariaDisabled:o.value||t.loading,disabled:o.value||t.loading,autofocus:t.autofocus,type:t.nativeType}:{}),m=R(()=>{var y;const g=(y=l.default)==null?void 0:y.call(l);if(u.value&&(g==null?void 0:g.length)===1){const S=g[0];if((S==null?void 0:S.type)===vh){const _=S.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(_.trim())}}return!1});return{_disabled:o,_size:i,_type:c,_ref:a,_props:f,_plain:d,_round:h,shouldAddSpace:m,handleClick:y=>{if(o.value||t.loading){y.stopPropagation();return}t.nativeType==="reset"&&(s==null||s.resetFields()),e("click",y)}}},Z2=["default","primary","success","warning","info","danger","text",""],Ebe=["button","submit","reset"],J2=it({size:Es,disabled:Boolean,type:{type:String,values:Z2,default:""},icon:{type:or},nativeType:{type:String,values:Ebe,default:"button"},loading:Boolean,loadingIcon:{type:or,default:()=>El},plain:{type:Boolean,default:void 0},text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:{type:Boolean,default:void 0},circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:Ce([String,Object]),default:"button"}}),Cbe={click:t=>t instanceof MouseEvent};function di(t,e){Tbe(t)&&(t="100%");var n=Mbe(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function yy(t){return Math.min(1,Math.max(0,t))}function Tbe(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function Mbe(t){return typeof t=="string"&&t.indexOf("%")!==-1}function YU(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function by(t){return t<=1?"".concat(Number(t)*100,"%"):t}function Nd(t){return t.length===1?"0"+t:String(t)}function Abe(t,e,n){return{r:di(t,255)*255,g:di(e,255)*255,b:di(n,255)*255}}function l4(t,e,n){t=di(t,255),e=di(e,255),n=di(n,255);var r=Math.max(t,e,n),s=Math.min(t,e,n),i=0,o=0,a=(r+s)/2;if(r===s)o=0,i=0;else{var l=r-s;switch(o=a>.5?l/(2-r-s):l/(r+s),r){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4;break}i/=6}return{h:i,s:o,l:a}}function Mx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*(6*n):n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function kbe(t,e,n){var r,s,i;if(t=di(t,360),e=di(e,100),n=di(n,100),e===0)s=n,i=n,r=n;else{var o=n<.5?n*(1+e):n+e-n*e,a=2*n-o;r=Mx(a,o,t+1/3),s=Mx(a,o,t),i=Mx(a,o,t-1/3)}return{r:r*255,g:s*255,b:i*255}}function c4(t,e,n){t=di(t,255),e=di(e,255),n=di(n,255);var r=Math.max(t,e,n),s=Math.min(t,e,n),i=0,o=r,a=r-s,l=r===0?0:a/r;if(r===s)i=0;else{switch(r){case t:i=(e-n)/a+(e<n?6:0);break;case e:i=(n-t)/a+2;break;case n:i=(t-e)/a+4;break}i/=6}return{h:i,s:l,v:o}}function Ibe(t,e,n){t=di(t,360)*6,e=di(e,100),n=di(n,100);var r=Math.floor(t),s=t-r,i=n*(1-e),o=n*(1-s*e),a=n*(1-(1-s)*e),l=r%6,c=[n,o,i,i,a,n][l],u=[a,n,n,o,i,i][l],d=[i,i,a,n,n,o][l];return{r:c*255,g:u*255,b:d*255}}function u4(t,e,n,r){var s=[Nd(Math.round(t).toString(16)),Nd(Math.round(e).toString(16)),Nd(Math.round(n).toString(16))];return r&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function Pbe(t,e,n,r,s){var i=[Nd(Math.round(t).toString(16)),Nd(Math.round(e).toString(16)),Nd(Math.round(n).toString(16)),Nd(Rbe(r))];return s&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))&&i[3].startsWith(i[3].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function Rbe(t){return Math.round(parseFloat(t)*255).toString(16)}function d4(t){return Mo(t)/255}function Mo(t){return parseInt(t,16)}function Lbe(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var Q2={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Obe(t){var e={r:0,g:0,b:0},n=1,r=null,s=null,i=null,o=!1,a=!1;return typeof t=="string"&&(t=Fbe(t)),typeof t=="object"&&(Xl(t.r)&&Xl(t.g)&&Xl(t.b)?(e=Abe(t.r,t.g,t.b),o=!0,a=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Xl(t.h)&&Xl(t.s)&&Xl(t.v)?(r=by(t.s),s=by(t.v),e=Ibe(t.h,r,s),o=!0,a="hsv"):Xl(t.h)&&Xl(t.s)&&Xl(t.l)&&(r=by(t.s),i=by(t.l),e=kbe(t.h,r,i),o=!0,a="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=YU(n),{ok:o,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var Nbe="[-\\+]?\\d+%?",Dbe="[-\\+]?\\d*\\.\\d+%?",Su="(?:".concat(Dbe,")|(?:").concat(Nbe,")"),Ax="[\\s|\\(]+(".concat(Su,")[,|\\s]+(").concat(Su,")[,|\\s]+(").concat(Su,")\\s*\\)?"),kx="[\\s|\\(]+(".concat(Su,")[,|\\s]+(").concat(Su,")[,|\\s]+(").concat(Su,")[,|\\s]+(").concat(Su,")\\s*\\)?"),_a={CSS_UNIT:new RegExp(Su),rgb:new RegExp("rgb"+Ax),rgba:new RegExp("rgba"+kx),hsl:new RegExp("hsl"+Ax),hsla:new RegExp("hsla"+kx),hsv:new RegExp("hsv"+Ax),hsva:new RegExp("hsva"+kx),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Fbe(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(Q2[t])t=Q2[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=_a.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=_a.rgba.exec(t),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=_a.hsl.exec(t),n?{h:n[1],s:n[2],l:n[3]}:(n=_a.hsla.exec(t),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=_a.hsv.exec(t),n?{h:n[1],s:n[2],v:n[3]}:(n=_a.hsva.exec(t),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=_a.hex8.exec(t),n?{r:Mo(n[1]),g:Mo(n[2]),b:Mo(n[3]),a:d4(n[4]),format:e?"name":"hex8"}:(n=_a.hex6.exec(t),n?{r:Mo(n[1]),g:Mo(n[2]),b:Mo(n[3]),format:e?"name":"hex"}:(n=_a.hex4.exec(t),n?{r:Mo(n[1]+n[1]),g:Mo(n[2]+n[2]),b:Mo(n[3]+n[3]),a:d4(n[4]+n[4]),format:e?"name":"hex8"}:(n=_a.hex3.exec(t),n?{r:Mo(n[1]+n[1]),g:Mo(n[2]+n[2]),b:Mo(n[3]+n[3]),format:e?"name":"hex"}:!1)))))))))}function Xl(t){return!!_a.CSS_UNIT.exec(String(t))}var If=function(){function t(e,n){e===void 0&&(e=""),n===void 0&&(n={});var r;if(e instanceof t)return e;typeof e=="number"&&(e=Lbe(e)),this.originalInput=e;var s=Obe(e);this.originalInput=e,this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=n.format)!==null&&r!==void 0?r:s.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=s.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),n,r,s,i=e.r/255,o=e.g/255,a=e.b/255;return i<=.03928?n=i/12.92:n=Math.pow((i+.055)/1.055,2.4),o<=.03928?r=o/12.92:r=Math.pow((o+.055)/1.055,2.4),a<=.03928?s=a/12.92:s=Math.pow((a+.055)/1.055,2.4),.2126*n+.7152*r+.0722*s},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=YU(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=c4(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=c4(this.r,this.g,this.b),n=Math.round(e.h*360),r=Math.round(e.s*100),s=Math.round(e.v*100);return this.a===1?"hsv(".concat(n,", ").concat(r,"%, ").concat(s,"%)"):"hsva(".concat(n,", ").concat(r,"%, ").concat(s,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=l4(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=l4(this.r,this.g,this.b),n=Math.round(e.h*360),r=Math.round(e.s*100),s=Math.round(e.l*100);return this.a===1?"hsl(".concat(n,", ").concat(r,"%, ").concat(s,"%)"):"hsla(".concat(n,", ").concat(r,"%, ").concat(s,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),u4(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),Pbe(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),n=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(n,", ").concat(r,")"):"rgba(".concat(e,", ").concat(n,", ").concat(r,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(n){return"".concat(Math.round(di(n,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(n){return Math.round(di(n,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+u4(this.r,this.g,this.b,!1),n=0,r=Object.entries(Q2);n<r.length;n++){var s=r[n],i=s[0],o=s[1];if(e===o)return i}return!1},t.prototype.toString=function(e){var n=!!e;e=e??this.format;var r=!1,s=this.a<1&&this.a>=0,i=!n&&s&&(e.startsWith("hex")||e==="name");return i?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=yy(n.l),new t(n)},t.prototype.brighten=function(e){e===void 0&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),new t(n)},t.prototype.darken=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=yy(n.l),new t(n)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=yy(n.s),new t(n)},t.prototype.saturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=yy(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,new t(n)},t.prototype.mix=function(e,n){n===void 0&&(n=50);var r=this.toRgb(),s=new t(e).toRgb(),i=n/100,o={r:(s.r-r.r)*i+r.r,g:(s.g-r.g)*i+r.g,b:(s.b-r.b)*i+r.b,a:(s.a-r.a)*i+r.a};return new t(o)},t.prototype.analogous=function(e,n){e===void 0&&(e=6),n===void 0&&(n=30);var r=this.toHsl(),s=360/n,i=[this];for(r.h=(r.h-(s*e>>1)+720)%360;--e;)r.h=(r.h+s)%360,i.push(new t(r));return i},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var n=this.toHsv(),r=n.h,s=n.s,i=n.v,o=[],a=1/e;e--;)o.push(new t({h:r,s,v:i})),i=(i+a)%1;return o},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var n=this.toRgb(),r=new t(e).toRgb(),s=n.a+r.a*(1-n.a);return new t({r:(n.r*n.a+r.r*r.a*(1-n.a))/s,g:(n.g*n.a+r.g*r.a*(1-n.a))/s,b:(n.b*n.a+r.b*r.a*(1-n.a))/s,a:s})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),r=n.h,s=[this],i=360/e,o=1;o<e;o++)s.push(new t({h:(r+o*i)%360,s:n.s,l:n.l}));return s},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function ou(t,e=20){return t.mix("#141414",e).toString()}function Bbe(t){const e=pi(),n=Qe("button");return R(()=>{let r={},s=t.color;if(s){const i=s.match(/var\((.*?)\)/);i&&(s=window.getComputedStyle(window.document.documentElement).getPropertyValue(i[1]));const o=new If(s),a=t.dark?o.tint(20).toString():ou(o,20);if(t.plain)r=n.cssVarBlock({"bg-color":t.dark?ou(o,90):o.tint(90).toString(),"text-color":s,"border-color":t.dark?ou(o,50):o.tint(50).toString(),"hover-text-color":`var(${n.cssVarName("color-white")})`,"hover-bg-color":s,"hover-border-color":s,"active-bg-color":a,"active-text-color":`var(${n.cssVarName("color-white")})`,"active-border-color":a}),e.value&&(r[n.cssVarBlockName("disabled-bg-color")]=t.dark?ou(o,90):o.tint(90).toString(),r[n.cssVarBlockName("disabled-text-color")]=t.dark?ou(o,50):o.tint(50).toString(),r[n.cssVarBlockName("disabled-border-color")]=t.dark?ou(o,80):o.tint(80).toString());else{const l=t.dark?ou(o,30):o.tint(30).toString(),c=o.isDark()?`var(${n.cssVarName("color-white")})`:`var(${n.cssVarName("color-black")})`;if(r=n.cssVarBlock({"bg-color":s,"text-color":c,"border-color":s,"hover-bg-color":l,"hover-text-color":c,"hover-border-color":l,"active-bg-color":a,"active-border-color":a}),e.value){const u=t.dark?ou(o,50):o.tint(50).toString();r[n.cssVarBlockName("disabled-bg-color")]=u,r[n.cssVarBlockName("disabled-text-color")]=t.dark?"rgba(255, 255, 255, 0.5)":`var(${n.cssVarName("color-white")})`,r[n.cssVarBlockName("disabled-border-color")]=u}}}return r})}const Ube=de({name:"ElButton"}),zbe=de({...Ube,props:J2,emits:Cbe,setup(t,{expose:e,emit:n}){const r=t,s=Bbe(r),i=Qe("button"),{_ref:o,_size:a,_type:l,_disabled:c,_props:u,_plain:d,_round:h,shouldAddSpace:f,handleClick:m}=Sbe(r,n),v=R(()=>[i.b(),i.m(l.value),i.m(a.value),i.is("disabled",c.value),i.is("loading",r.loading),i.is("plain",d.value),i.is("round",h.value),i.is("circle",r.circle),i.is("text",r.text),i.is("link",r.link),i.is("has-bg",r.bg)]);return e({ref:o,size:a,type:l,disabled:c,shouldAddSpace:f}),(y,g)=>(D(),Le(mn(y.tag),yn({ref_key:"_ref",ref:o},p(u),{class:p(v),style:p(s),onClick:p(m)}),{default:me(()=>[y.loading?(D(),Z(xt,{key:0},[y.$slots.loading?Ae(y.$slots,"loading",{key:0}):(D(),Le(p(Et),{key:1,class:U(p(i).is("loading"))},{default:me(()=>[(D(),Le(mn(y.loadingIcon)))]),_:1},8,["class"]))],64)):y.icon||y.$slots.icon?(D(),Le(p(Et),{key:1},{default:me(()=>[y.icon?(D(),Le(mn(y.icon),{key:0})):Ae(y.$slots,"icon",{key:1})]),_:3})):Pe("v-if",!0),y.$slots.default?(D(),Z("span",{key:2,class:U({[p(i).em("text","expand")]:p(f)})},[Ae(y.$slots,"default")],2)):Pe("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var $be=at(zbe,[["__file","button.vue"]]);const Vbe={size:J2.size,type:J2.type},Hbe=de({name:"ElButtonGroup"}),Gbe=de({...Hbe,props:Vbe,setup(t){const e=t;Mn(qU,Ln({size:Yn(e,"size"),type:Yn(e,"type")}));const n=Qe("button");return(r,s)=>(D(),Z("div",{class:U(p(n).b("group"))},[Ae(r.$slots,"default")],2))}});var XU=at(Gbe,[["__file","button-group.vue"]]);const Ss=nn($be,{ButtonGroup:XU}),dM=Br(XU);var Oc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ZU={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Oc,function(){var n=1e3,r=6e4,s=36e5,i="millisecond",o="second",a="minute",l="hour",c="day",u="week",d="month",h="quarter",f="year",m="date",v="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(V){var X=["th","st","nd","rd"],F=V%100;return"["+V+(X[(F-20)%10]||X[F]||X[0])+"]"}},_=function(V,X,F){var $=String(V);return!$||$.length>=X?V:""+Array(X+1-$.length).join(F)+V},w={s:_,z:function(V){var X=-V.utcOffset(),F=Math.abs(X),$=Math.floor(F/60),O=F%60;return(X<=0?"+":"-")+_($,2,"0")+":"+_(O,2,"0")},m:function V(X,F){if(X.date()<F.date())return-V(F,X);var $=12*(F.year()-X.year())+(F.month()-X.month()),O=X.clone().add($,d),z=F-O<0,re=X.clone().add($+(z?-1:1),d);return+(-($+(F-O)/(z?O-re:re-O))||0)},a:function(V){return V<0?Math.ceil(V)||0:Math.floor(V)},p:function(V){return{M:d,y:f,w:u,d:c,D:m,h:l,m:a,s:o,ms:i,Q:h}[V]||String(V||"").toLowerCase().replace(/s$/,"")},u:function(V){return V===void 0}},E="en",C={};C[E]=S;var T="$isDayjsObject",I=function(V){return V instanceof N||!(!V||!V[T])},k=function V(X,F,$){var O;if(!X)return E;if(typeof X=="string"){var z=X.toLowerCase();C[z]&&(O=z),F&&(C[z]=F,O=z);var re=X.split("-");if(!O&&re.length>1)return V(re[0])}else{var q=X.name;C[q]=X,O=q}return!$&&O&&(E=O),O||!$&&E},M=function(V,X){if(I(V))return V.clone();var F=typeof X=="object"?X:{};return F.date=V,F.args=arguments,new N(F)},L=w;L.l=k,L.i=I,L.w=function(V,X){return M(V,{locale:X.$L,utc:X.$u,x:X.$x,$offset:X.$offset})};var N=function(){function V(F){this.$L=k(F.locale,null,!0),this.parse(F),this.$x=this.$x||F.x||{},this[T]=!0}var X=V.prototype;return X.parse=function(F){this.$d=function($){var O=$.date,z=$.utc;if(O===null)return new Date(NaN);if(L.u(O))return new Date;if(O instanceof Date)return new Date(O);if(typeof O=="string"&&!/Z$/i.test(O)){var re=O.match(y);if(re){var q=re[2]-1||0,le=(re[7]||"0").substring(0,3);return z?new Date(Date.UTC(re[1],q,re[3]||1,re[4]||0,re[5]||0,re[6]||0,le)):new Date(re[1],q,re[3]||1,re[4]||0,re[5]||0,re[6]||0,le)}}return new Date(O)}(F),this.init()},X.init=function(){var F=this.$d;this.$y=F.getFullYear(),this.$M=F.getMonth(),this.$D=F.getDate(),this.$W=F.getDay(),this.$H=F.getHours(),this.$m=F.getMinutes(),this.$s=F.getSeconds(),this.$ms=F.getMilliseconds()},X.$utils=function(){return L},X.isValid=function(){return this.$d.toString()!==v},X.isSame=function(F,$){var O=M(F);return this.startOf($)<=O&&O<=this.endOf($)},X.isAfter=function(F,$){return M(F)<this.startOf($)},X.isBefore=function(F,$){return this.endOf($)<M(F)},X.$g=function(F,$,O){return L.u(F)?this[$]:this.set(O,F)},X.unix=function(){return Math.floor(this.valueOf()/1e3)},X.valueOf=function(){return this.$d.getTime()},X.startOf=function(F,$){var O=this,z=!!L.u($)||$,re=L.p(F),q=function(je,nt){var ue=L.w(O.$u?Date.UTC(O.$y,nt,je):new Date(O.$y,nt,je),O);return z?ue:ue.endOf(c)},le=function(je,nt){return L.w(O.toDate()[je].apply(O.toDate("s"),(z?[0,0,0,0]:[23,59,59,999]).slice(nt)),O)},fe=this.$W,se=this.$M,ye=this.$D,we="set"+(this.$u?"UTC":"");switch(re){case f:return z?q(1,0):q(31,11);case d:return z?q(1,se):q(0,se+1);case u:var ve=this.$locale().weekStart||0,xe=(fe<ve?fe+7:fe)-ve;return q(z?ye-xe:ye+(6-xe),se);case c:case m:return le(we+"Hours",0);case l:return le(we+"Minutes",1);case a:return le(we+"Seconds",2);case o:return le(we+"Milliseconds",3);default:return this.clone()}},X.endOf=function(F){return this.startOf(F,!1)},X.$set=function(F,$){var O,z=L.p(F),re="set"+(this.$u?"UTC":""),q=(O={},O[c]=re+"Date",O[m]=re+"Date",O[d]=re+"Month",O[f]=re+"FullYear",O[l]=re+"Hours",O[a]=re+"Minutes",O[o]=re+"Seconds",O[i]=re+"Milliseconds",O)[z],le=z===c?this.$D+($-this.$W):$;if(z===d||z===f){var fe=this.clone().set(m,1);fe.$d[q](le),fe.init(),this.$d=fe.set(m,Math.min(this.$D,fe.daysInMonth())).$d}else q&&this.$d[q](le);return this.init(),this},X.set=function(F,$){return this.clone().$set(F,$)},X.get=function(F){return this[L.p(F)]()},X.add=function(F,$){var O,z=this;F=Number(F);var re=L.p($),q=function(se){var ye=M(z);return L.w(ye.date(ye.date()+Math.round(se*F)),z)};if(re===d)return this.set(d,this.$M+F);if(re===f)return this.set(f,this.$y+F);if(re===c)return q(1);if(re===u)return q(7);var le=(O={},O[a]=r,O[l]=s,O[o]=n,O)[re]||1,fe=this.$d.getTime()+F*le;return L.w(fe,this)},X.subtract=function(F,$){return this.add(-1*F,$)},X.format=function(F){var $=this,O=this.$locale();if(!this.isValid())return O.invalidDate||v;var z=F||"YYYY-MM-DDTHH:mm:ssZ",re=L.z(this),q=this.$H,le=this.$m,fe=this.$M,se=O.weekdays,ye=O.months,we=O.meridiem,ve=function(nt,ue,j,he){return nt&&(nt[ue]||nt($,z))||j[ue].slice(0,he)},xe=function(nt){return L.s(q%12||12,nt,"0")},je=we||function(nt,ue,j){var he=nt<12?"AM":"PM";return j?he.toLowerCase():he};return z.replace(g,function(nt,ue){return ue||function(j){switch(j){case"YY":return String($.$y).slice(-2);case"YYYY":return L.s($.$y,4,"0");case"M":return fe+1;case"MM":return L.s(fe+1,2,"0");case"MMM":return ve(O.monthsShort,fe,ye,3);case"MMMM":return ve(ye,fe);case"D":return $.$D;case"DD":return L.s($.$D,2,"0");case"d":return String($.$W);case"dd":return ve(O.weekdaysMin,$.$W,se,2);case"ddd":return ve(O.weekdaysShort,$.$W,se,3);case"dddd":return se[$.$W];case"H":return String(q);case"HH":return L.s(q,2,"0");case"h":return xe(1);case"hh":return xe(2);case"a":return je(q,le,!0);case"A":return je(q,le,!1);case"m":return String(le);case"mm":return L.s(le,2,"0");case"s":return String($.$s);case"ss":return L.s($.$s,2,"0");case"SSS":return L.s($.$ms,3,"0");case"Z":return re}return null}(nt)||re.replace(":","")})},X.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},X.diff=function(F,$,O){var z,re=this,q=L.p($),le=M(F),fe=(le.utcOffset()-this.utcOffset())*r,se=this-le,ye=function(){return L.m(re,le)};switch(q){case f:z=ye()/12;break;case d:z=ye();break;case h:z=ye()/3;break;case u:z=(se-fe)/6048e5;break;case c:z=(se-fe)/864e5;break;case l:z=se/s;break;case a:z=se/r;break;case o:z=se/n;break;default:z=se}return O?z:L.a(z)},X.daysInMonth=function(){return this.endOf(d).$D},X.$locale=function(){return C[this.$L]},X.locale=function(F,$){if(!F)return this.$L;var O=this.clone(),z=k(F,$,!0);return z&&(O.$L=z),O},X.clone=function(){return L.w(this.$d,this)},X.toDate=function(){return new Date(this.valueOf())},X.toJSON=function(){return this.isValid()?this.toISOString():null},X.toISOString=function(){return this.$d.toISOString()},X.toString=function(){return this.$d.toUTCString()},V}(),G=N.prototype;return M.prototype=G,[["$ms",i],["$s",o],["$m",a],["$H",l],["$W",c],["$M",d],["$y",f],["$D",m]].forEach(function(V){G[V[1]]=function(X){return this.$g(X,V[0],V[1])}}),M.extend=function(V,X){return V.$i||(V(X,N,M),V.$i=!0),M},M.locale=k,M.isDayjs=I,M.unix=function(V){return M(1e3*V)},M.en=C[E],M.Ls=C,M.p={},M})})(ZU);var Wbe=ZU.exports;const an=Nc(Wbe),Ix=(t,e)=>[t>0?t-1:void 0,t,t<e?t+1:void 0],Pu=t=>Array.from(Array.from({length:t}).keys()),JU=t=>t.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),QU=t=>t.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),h4=function(t,e){const n=Nu(t),r=Nu(e);return n&&r?t.getTime()===e.getTime():!n&&!r?t===e:!1},f4=function(t,e){const n=rt(t),r=rt(e);return n&&r?t.length!==e.length?!1:t.every((s,i)=>h4(s,e[i])):!n&&!r?h4(t,e):!1},p4=function(t,e,n){const r=Po(e)||e==="x"?an(t).locale(n):an(t,e).locale(n);return r.isValid()?r:void 0},m4=function(t,e,n){return Po(e)?t:e==="x"?+t:an(t).locale(n).format(e)},Px=(t,e)=>{var n;const r=[],s=e==null?void 0:e();for(let i=0;i<t;i++)r.push((n=s==null?void 0:s.includes(i))!=null?n:!1);return r},_y=t=>rt(t)?t.map(e=>e.toDate()):t.toDate(),jbe=(t,e)=>{const n=t.subtract(1,"month").endOf("month").date();return Pu(e).map((r,s)=>n-(e-s-1))},Kbe=t=>{const e=t.daysInMonth();return Pu(e).map((n,r)=>r+1)},qbe=t=>Pu(t.length/7).map(e=>{const n=e*7;return t.slice(n,n+7)}),Ybe=it({selectedDay:{type:Ce(Object)},range:{type:Ce(Array)},date:{type:Ce(Object),required:!0},hideHeader:{type:Boolean}}),Xbe={pick:t=>un(t)};var ez={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Oc,function(){return function(n,r,s){var i=r.prototype,o=function(d){return d&&(d.indexOf?d:d.s)},a=function(d,h,f,m,v){var y=d.name?d:d.$locale(),g=o(y[h]),S=o(y[f]),_=g||S.map(function(E){return E.slice(0,m)});if(!v)return _;var w=y.weekStart;return _.map(function(E,C){return _[(C+(w||0))%7]})},l=function(){return s.Ls[s.locale()]},c=function(d,h){return d.formats[h]||function(f){return f.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(m,v,y){return v||y.slice(1)})}(d.formats[h.toUpperCase()])},u=function(){var d=this;return{months:function(h){return h?h.format("MMMM"):a(d,"months")},monthsShort:function(h){return h?h.format("MMM"):a(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(h){return h?h.format("dddd"):a(d,"weekdays")},weekdaysMin:function(h){return h?h.format("dd"):a(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(h){return h?h.format("ddd"):a(d,"weekdaysShort","weekdays",3)},longDateFormat:function(h){return c(d.$locale(),h)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return u.bind(this)()},s.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return s.weekdays()},weekdaysShort:function(){return s.weekdaysShort()},weekdaysMin:function(){return s.weekdaysMin()},months:function(){return s.months()},monthsShort:function(){return s.monthsShort()},longDateFormat:function(h){return c(d,h)},meridiem:d.meridiem,ordinal:d.ordinal}},s.months=function(){return a(l(),"months")},s.monthsShort=function(){return a(l(),"monthsShort","months",3)},s.weekdays=function(d){return a(l(),"weekdays",null,null,d)},s.weekdaysShort=function(d){return a(l(),"weekdaysShort","weekdays",3,d)},s.weekdaysMin=function(d){return a(l(),"weekdaysMin","weekdays",2,d)}}})})(ez);var Zbe=ez.exports;const tz=Nc(Zbe),Jbe=["year","years","month","months","date","dates","week","datetime","datetimerange","daterange","monthrange","yearrange"],Rx=["sun","mon","tue","wed","thu","fri","sat"],Qbe=(t,e)=>{an.extend(tz);const n=an.localeData().firstDayOfWeek(),{t:r,lang:s}=zn(),i=an().locale(s.value),o=R(()=>!!t.range&&!!t.range.length),a=R(()=>{let h=[];if(o.value){const[f,m]=t.range,v=Pu(m.date()-f.date()+1).map(S=>({text:f.date()+S,type:"current"}));let y=v.length%7;y=y===0?0:7-y;const g=Pu(y).map((S,_)=>({text:_+1,type:"next"}));h=v.concat(g)}else{const f=t.date.startOf("month").day(),m=jbe(t.date,(f-n+7)%7).map(S=>({text:S,type:"prev"})),v=Kbe(t.date).map(S=>({text:S,type:"current"}));h=[...m,...v];const y=7-(h.length%7||7),g=Pu(y).map((S,_)=>({text:_+1,type:"next"}));h=h.concat(g)}return qbe(h)}),l=R(()=>{const h=n;return h===0?Rx.map(f=>r(`el.datepicker.weeks.${f}`)):Rx.slice(h).concat(Rx.slice(0,h)).map(f=>r(`el.datepicker.weeks.${f}`))}),c=(h,f)=>{switch(f){case"prev":return t.date.startOf("month").subtract(1,"month").date(h);case"next":return t.date.startOf("month").add(1,"month").date(h);case"current":return t.date.date(h)}};return{now:i,isInRange:o,rows:a,weekDays:l,getFormattedDate:c,handlePickDay:({text:h,type:f})=>{const m=c(h,f);e("pick",m)},getSlotData:({text:h,type:f})=>{const m=c(h,f);return{isSelected:m.isSame(t.selectedDay),type:`${f}-month`,day:m.format("YYYY-MM-DD"),date:m.toDate()}}}},e1e=de({name:"DateTable"}),t1e=de({...e1e,props:Ybe,emits:Xbe,setup(t,{expose:e,emit:n}){const r=t,{isInRange:s,now:i,rows:o,weekDays:a,getFormattedDate:l,handlePickDay:c,getSlotData:u}=Qbe(r,n),d=Qe("calendar-table"),h=Qe("calendar-day"),f=({text:m,type:v})=>{const y=[v];if(v==="current"){const g=l(m,v);g.isSame(r.selectedDay,"day")&&y.push(h.is("selected")),g.isSame(i,"day")&&y.push(h.is("today"))}return y};return e({getFormattedDate:l}),(m,v)=>(D(),Z("table",{class:U([p(d).b(),p(d).is("range",p(s))]),cellspacing:"0",cellpadding:"0"},[m.hideHeader?Pe("v-if",!0):(D(),Z("thead",{key:0},[ne("tr",null,[(D(!0),Z(xt,null,_n(p(a),y=>(D(),Z("th",{key:y,scope:"col"},tt(y),1))),128))])])),ne("tbody",null,[(D(!0),Z(xt,null,_n(p(o),(y,g)=>(D(),Z("tr",{key:g,class:U({[p(d).e("row")]:!0,[p(d).em("row","hide-border")]:g===0&&m.hideHeader})},[(D(!0),Z(xt,null,_n(y,(S,_)=>(D(),Z("td",{key:_,class:U(f(S)),onClick:w=>p(c)(S)},[ne("div",{class:U(p(h).b())},[Ae(m.$slots,"date-cell",{data:p(u)(S)},()=>[ne("span",null,tt(S.text),1)])],2)],10,["onClick"]))),128))],2))),128))])],2))}});var g4=at(t1e,[["__file","date-table.vue"]]);const n1e=(t,e)=>{const n=t.endOf("month"),r=e.startOf("month"),i=n.isSame(r,"week")?r.add(1,"week"):r;return[[t,n],[i.startOf("week"),e]]},r1e=(t,e)=>{const n=t.endOf("month"),r=t.add(1,"month").startOf("month"),s=n.isSame(r,"week")?r.add(1,"week"):r,i=s.endOf("month"),o=e.startOf("month"),a=i.isSame(o,"week")?o.add(1,"week"):o;return[[t,n],[s.startOf("week"),i],[a.startOf("week"),e]]},s1e=(t,e,n)=>{const{lang:r}=zn(),s=H(),i=an().locale(r.value),o=R({get(){return t.modelValue?l.value:s.value},set(y){if(!y)return;s.value=y;const g=y.toDate();e(xs,g),e(Qt,g)}}),a=R(()=>{if(!t.range||!rt(t.range)||t.range.length!==2||t.range.some(_=>!Nu(_)))return[];const y=t.range.map(_=>an(_).locale(r.value)),[g,S]=y;return g.isAfter(S)?[]:g.isSame(S,"month")?f(g,S):g.add(1,"month").month()!==S.month()?[]:f(g,S)}),l=R(()=>t.modelValue?an(t.modelValue).locale(r.value):o.value||(a.value.length?a.value[0][0]:i)),c=R(()=>l.value.subtract(1,"month").date(1)),u=R(()=>l.value.add(1,"month").date(1)),d=R(()=>l.value.subtract(1,"year").date(1)),h=R(()=>l.value.add(1,"year").date(1)),f=(y,g)=>{const S=y.startOf("week"),_=g.endOf("week"),w=S.get("month"),E=_.get("month");return w===E?[[S,_]]:(w+1)%12===E?n1e(S,_):w+2===E||(w+1)%11===E?r1e(S,_):[]},m=y=>{o.value=y};return{calculateValidatedDateRange:f,date:l,realSelectedDay:o,pickDay:m,selectDate:y=>{const S={"prev-month":c.value,"next-month":u.value,"prev-year":d.value,"next-year":h.value,today:i}[y];S.isSame(l.value,"day")||m(S)},validatedRange:a}},i1e=t=>rt(t)&&t.length===2&&t.every(e=>Nu(e)),o1e=it({modelValue:{type:Date},range:{type:Ce(Array),validator:i1e}}),a1e={[Qt]:t=>Nu(t),[xs]:t=>Nu(t)},l1e="ElCalendar",c1e=de({name:l1e}),u1e=de({...c1e,props:o1e,emits:a1e,setup(t,{expose:e,emit:n}){const r=t,s=Qe("calendar"),{calculateValidatedDateRange:i,date:o,pickDay:a,realSelectedDay:l,selectDate:c,validatedRange:u}=s1e(r,n),{t:d}=zn(),h=R(()=>{const f=`el.datepicker.month${o.value.format("M")}`;return`${o.value.year()} ${d("el.datepicker.year")} ${d(f)}`});return e({selectedDay:l,pickDay:a,selectDate:c,calculateValidatedDateRange:i}),(f,m)=>(D(),Z("div",{class:U(p(s).b())},[ne("div",{class:U(p(s).e("header"))},[Ae(f.$slots,"header",{date:p(h)},()=>[ne("div",{class:U(p(s).e("title"))},tt(p(h)),3),p(u).length===0?(D(),Z("div",{key:0,class:U(p(s).e("button-group"))},[ae(p(dM),null,{default:me(()=>[ae(p(Ss),{size:"small",onClick:v=>p(c)("prev-month")},{default:me(()=>[rn(tt(p(d)("el.datepicker.prevMonth")),1)]),_:1},8,["onClick"]),ae(p(Ss),{size:"small",onClick:v=>p(c)("today")},{default:me(()=>[rn(tt(p(d)("el.datepicker.today")),1)]),_:1},8,["onClick"]),ae(p(Ss),{size:"small",onClick:v=>p(c)("next-month")},{default:me(()=>[rn(tt(p(d)("el.datepicker.nextMonth")),1)]),_:1},8,["onClick"])]),_:1})],2)):Pe("v-if",!0)])],2),p(u).length===0?(D(),Z("div",{key:0,class:U(p(s).e("body"))},[ae(g4,{date:p(o),"selected-day":p(l),onPick:p(a)},go({_:2},[f.$slots["date-cell"]?{name:"date-cell",fn:me(v=>[Ae(f.$slots,"date-cell",Ro(Sl(v)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(D(),Z("div",{key:1,class:U(p(s).e("body"))},[(D(!0),Z(xt,null,_n(p(u),(v,y)=>(D(),Le(g4,{key:y,date:v[0],"selected-day":p(l),range:v,"hide-header":y!==0,onPick:p(a)},go({_:2},[f.$slots["date-cell"]?{name:"date-cell",fn:me(g=>[Ae(f.$slots,"date-cell",Ro(Sl(g)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var d1e=at(u1e,[["__file","calendar.vue"]]);const h1e=nn(d1e),f1e=it({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:Ce([String,Object,Array]),default:""},headerClass:String,bodyClass:String,footerClass:String,shadow:{type:String,values:["always","hover","never"],default:void 0}}),p1e=de({name:"ElCard"}),m1e=de({...p1e,props:f1e,setup(t){const e=Yp("card"),n=Qe("card");return(r,s)=>{var i;return D(),Z("div",{class:U([p(n).b(),p(n).is(`${r.shadow||((i=p(e))==null?void 0:i.shadow)||"always"}-shadow`)])},[r.$slots.header||r.header?(D(),Z("div",{key:0,class:U([p(n).e("header"),r.headerClass])},[Ae(r.$slots,"header",{},()=>[rn(tt(r.header),1)])],2)):Pe("v-if",!0),ne("div",{class:U([p(n).e("body"),r.bodyClass]),style:Pt(r.bodyStyle)},[Ae(r.$slots,"default")],6),r.$slots.footer||r.footer?(D(),Z("div",{key:1,class:U([p(n).e("footer"),r.footerClass])},[Ae(r.$slots,"footer",{},()=>[rn(tt(r.footer),1)])],2)):Pe("v-if",!0)],2)}}});var g1e=at(m1e,[["__file","card.vue"]]);const v1e=nn(g1e),y1e=it({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),b1e={change:(t,e)=>[t,e].every(Ft)},nz=Symbol("carouselContextKey"),eE="ElCarouselItem";var Wo=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(Wo||{});function tE(t){return wr(t)&&t.type===xt}function _1e(t){return wr(t)&&t.type===gs}function w1e(t){return wr(t)&&!tE(t)&&!_1e(t)}const x1e=t=>{if(!wr(t))return{};const e=t.props||{},n=(wr(t.type)?t.type.props:void 0)||{},r={};return Object.keys(n).forEach(s=>{Kn(n[s],"default")&&(r[s]=n[s].default)}),Object.keys(e).forEach(s=>{r[ki(s)]=e[s]}),r},S1e=t=>{if(!rt(t)||t.length>1)throw new Error("expect to receive a single Vue element child");return t[0]},pl=t=>{const e=rt(t)?t:[t],n=[];return e.forEach(r=>{var s;rt(r)?n.push(...pl(r)):wr(r)&&((s=r.component)!=null&&s.subTree)?n.push(r,...pl(r.component.subTree)):wr(r)&&rt(r.children)?n.push(...pl(r.children)):wr(r)&&r.shapeFlag===2?n.push(...pl(r.type())):n.push(r)}),n};function rz(t){return t.some(e=>wr(e)?!(e.type===gs||e.type===xt&&!rz(e.children)):!0)?t:null}const E1e=(t,e,n)=>pl(t.subTree).filter(i=>{var o;return wr(i)&&((o=i.type)==null?void 0:o.name)===e&&!!i.component}).map(i=>i.component.uid).map(i=>n[i]).filter(i=>!!i),x_=(t,e)=>{const n=br({}),r=br([]),s=new WeakMap,i=u=>{n.value[u.uid]=u,Xy(n),Zt(()=>{const d=u.getVnode().el,h=d.parentNode;if(!s.has(h)){s.set(h,[]);const f=h.insertBefore.bind(h);h.insertBefore=(m,v)=>(s.get(h).some(g=>m===g||v===g)&&Xy(n),f(m,v))}s.get(h).push(d)})},o=u=>{delete n.value[u.uid],Xy(n);const d=u.getVnode().el,h=d.parentNode,f=s.get(h),m=f.indexOf(d);f.splice(m,1)},a=()=>{r.value=E1e(t,e,n.value)},l=u=>u.render();return{children:r,addChild:i,removeChild:o,ChildrenSorter:de({setup(u,{slots:d}){return()=>(a(),d.default?Ut(l,{render:d.default}):null)}})}},v4=300,C1e=(t,e,n)=>{const{children:r,addChild:s,removeChild:i,ChildrenSorter:o}=x_(tn(),eE),a=bs(),l=H(-1),c=H(null),u=H(!1),d=H(),h=H(0),f=H(!0),m=R(()=>t.arrow!=="never"&&!p(g)),v=R(()=>r.value.some(se=>se.props.label.toString().length>0)),y=R(()=>t.type==="card"),g=R(()=>t.direction==="vertical"),S=R(()=>t.height!=="auto"?{height:t.height}:{height:`${h.value}px`,overflow:"hidden"}),_=Vd(se=>{k(se)},v4,{trailing:!0}),w=Vd(se=>{$(se)},v4),E=se=>f.value?l.value<=1?se<=1:se>1:!0;function C(){c.value&&(clearInterval(c.value),c.value=null)}function T(){t.interval<=0||!t.autoplay||c.value||(c.value=setInterval(()=>I(),t.interval))}const I=()=>{l.value<r.value.length-1?l.value=l.value+1:t.loop&&(l.value=0)};function k(se){if(kt(se)){const ve=r.value.filter(xe=>xe.props.name===se);ve.length>0&&(se=r.value.indexOf(ve[0]))}if(se=Number(se),Number.isNaN(se)||se!==Math.floor(se))return;const ye=r.value.length,we=l.value;se<0?l.value=t.loop?ye-1:0:se>=ye?l.value=t.loop?0:ye-1:l.value=se,we===l.value&&M(we),re()}function M(se){r.value.forEach((ye,we)=>{ye.translateItem(we,l.value,se)})}function L(se,ye){var we,ve,xe,je;const nt=p(r),ue=nt.length;if(ue===0||!se.states.inStage)return!1;const j=ye+1,he=ye-1,K=ue-1,Fe=nt[K].states.active,Oe=nt[0].states.active,Re=(ve=(we=nt[j])==null?void 0:we.states)==null?void 0:ve.active,te=(je=(xe=nt[he])==null?void 0:xe.states)==null?void 0:je.active;return ye===K&&Oe||Re?"left":ye===0&&Fe||te?"right":!1}function N(){u.value=!0,t.pauseOnHover&&C()}function G(){u.value=!1,T()}function V(se){p(g)||r.value.forEach((ye,we)=>{se===L(ye,we)&&(ye.states.hover=!0)})}function X(){p(g)||r.value.forEach(se=>{se.states.hover=!1})}function F(se){l.value=se}function $(se){t.trigger==="hover"&&se!==l.value&&(l.value=se)}function O(){k(l.value-1)}function z(){k(l.value+1)}function re(){C(),t.pauseOnHover||T()}function q(se){t.height==="auto"&&(h.value=se)}function le(){var se;const ye=(se=a.default)==null?void 0:se.call(a);if(!ye)return null;const ve=pl(ye).filter(xe=>wr(xe)&&xe.type.name===eE);return(ve==null?void 0:ve.length)===2&&t.loop&&!y.value?(f.value=!0,ve):(f.value=!1,null)}Be(()=>l.value,(se,ye)=>{M(ye),f.value&&(se=se%2,ye=ye%2),ye>-1&&e(xn,se,ye)}),Be(()=>t.autoplay,se=>{se?T():C()}),Be(()=>t.loop,()=>{k(l.value)}),Be(()=>t.interval,()=>{re()});const fe=br();return Zt(()=>{Be(()=>r.value,()=>{r.value.length>0&&k(t.initialIndex)},{immediate:!0}),fe.value=Ir(d.value,()=>{M()}),T()}),Xn(()=>{C(),d.value&&fe.value&&fe.value.stop()}),Mn(nz,{root:d,isCardType:y,isVertical:g,items:r,loop:t.loop,cardScale:t.cardScale,addItem:s,removeItem:i,setActiveItem:k,setContainerHeight:q}),{root:d,activeIndex:l,arrowDisplay:m,hasLabel:v,hover:u,isCardType:y,items:r,isVertical:g,containerStyle:S,isItemsTwoLength:f,handleButtonEnter:V,handleButtonLeave:X,handleIndicatorClick:F,handleMouseEnter:N,handleMouseLeave:G,setActiveItem:k,prev:O,next:z,PlaceholderItem:le,isTwoLengthShow:E,ItemsSorter:o,throttledArrowClick:_,throttledIndicatorHover:w}},T1e="ElCarousel",M1e=de({name:T1e}),A1e=de({...M1e,props:y1e,emits:b1e,setup(t,{expose:e,emit:n}){const r=t,{root:s,activeIndex:i,arrowDisplay:o,hasLabel:a,hover:l,isCardType:c,items:u,isVertical:d,containerStyle:h,handleButtonEnter:f,handleButtonLeave:m,handleIndicatorClick:v,handleMouseEnter:y,handleMouseLeave:g,setActiveItem:S,prev:_,next:w,PlaceholderItem:E,isTwoLengthShow:C,ItemsSorter:T,throttledArrowClick:I,throttledIndicatorHover:k}=C1e(r,n),M=Qe("carousel"),{t:L}=zn(),N=R(()=>{const F=[M.b(),M.m(r.direction)];return p(c)&&F.push(M.m("card")),F}),G=R(()=>{const F=[M.e("indicators"),M.em("indicators",r.direction)];return p(a)&&F.push(M.em("indicators","labels")),r.indicatorPosition==="outside"&&F.push(M.em("indicators","outside")),p(d)&&F.push(M.em("indicators","right")),F});function V(F){if(!r.motionBlur)return;const $=p(d)?`${M.namespace.value}-transitioning-vertical`:`${M.namespace.value}-transitioning`;F.currentTarget.classList.add($)}function X(F){if(!r.motionBlur)return;const $=p(d)?`${M.namespace.value}-transitioning-vertical`:`${M.namespace.value}-transitioning`;F.currentTarget.classList.remove($)}return e({activeIndex:i,setActiveItem:S,prev:_,next:w}),(F,$)=>(D(),Z("div",{ref_key:"root",ref:s,class:U(p(N)),onMouseenter:$t(p(y),["stop"]),onMouseleave:$t(p(g),["stop"])},[p(o)?(D(),Le(Xs,{key:0,name:"carousel-arrow-left",persisted:""},{default:me(()=>[cn(ne("button",{type:"button",class:U([p(M).e("arrow"),p(M).em("arrow","left")]),"aria-label":p(L)("el.carousel.leftArrow"),onMouseenter:O=>p(f)("left"),onMouseleave:p(m),onClick:$t(O=>p(I)(p(i)-1),["stop"])},[ae(p(Et),null,{default:me(()=>[ae(p(Sc))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Wn,(F.arrow==="always"||p(l))&&(r.loop||p(i)>0)]])]),_:1})):Pe("v-if",!0),p(o)?(D(),Le(Xs,{key:1,name:"carousel-arrow-right",persisted:""},{default:me(()=>[cn(ne("button",{type:"button",class:U([p(M).e("arrow"),p(M).em("arrow","right")]),"aria-label":p(L)("el.carousel.rightArrow"),onMouseenter:O=>p(f)("right"),onMouseleave:p(m),onClick:$t(O=>p(I)(p(i)+1),["stop"])},[ae(p(Et),null,{default:me(()=>[ae(p(Ai))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Wn,(F.arrow==="always"||p(l))&&(r.loop||p(i)<p(u).length-1)]])]),_:1})):Pe("v-if",!0),ne("div",{class:U(p(M).e("container")),style:Pt(p(h)),onTransitionstart:V,onTransitionend:X},[ae(p(E)),Ae(F.$slots,"default")],38),ae(p(T),null,{default:me(()=>[F.indicatorPosition!=="none"?(D(),Z("ul",{key:0,class:U(p(G))},[(D(!0),Z(xt,null,_n(p(u),(O,z)=>cn((D(),Z("li",{key:z,class:U([p(M).e("indicator"),p(M).em("indicator",F.direction),p(M).is("active",z===p(i))]),onMouseenter:re=>p(k)(z),onClick:$t(re=>p(v)(z),["stop"])},[ne("button",{class:U(p(M).e("button")),"aria-label":p(L)("el.carousel.indicator",{index:z+1})},[p(a)?(D(),Z("span",{key:0},tt(O.props.label),1)):Pe("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[Wn,p(C)(z)]])),128))],2)):Pe("v-if",!0)]),_:1}),r.motionBlur?(D(),Z("svg",{key:2,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[ne("defs",null,[ne("filter",{id:"elCarouselHorizontal"},[ne("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),ne("filter",{id:"elCarouselVertical"},[ne("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):Pe("v-if",!0)],42,["onMouseenter","onMouseleave"]))}});var k1e=at(A1e,[["__file","carousel.vue"]]);const I1e=it({name:{type:String,default:""},label:{type:[String,Number],default:""}}),P1e=t=>{const e=_t(nz),n=tn(),r=H(),s=H(!1),i=H(0),o=H(1),a=H(!1),l=H(!1),c=H(!1),u=H(!1),{isCardType:d,isVertical:h,cardScale:f}=e;function m(w,E,C){const T=C-1,I=E-1,k=E+1,M=C/2;return E===0&&w===T?-1:E===T&&w===0?C:w<I&&E-w>=M?C+1:w>k&&w-E>=M?-2:w}function v(w,E){var C,T;const I=p(h)?((C=e.root.value)==null?void 0:C.offsetHeight)||0:((T=e.root.value)==null?void 0:T.offsetWidth)||0;return c.value?I*((2-f)*(w-E)+1)/4:w<E?-(1+f)*I/4:(3+f)*I/4}function y(w,E,C){const T=e.root.value;return T?((C?T.offsetHeight:T.offsetWidth)||0)*(w-E):0}const g=(w,E,C)=>{var T;const I=p(d),k=(T=e.items.value.length)!=null?T:Number.NaN,M=w===E;!I&&!Bn(C)&&(u.value=M||w===C),!M&&k>2&&e.loop&&(w=m(w,E,k));const L=p(h);a.value=M,I?(c.value=Math.round(Math.abs(w-E))<=1,i.value=v(w,E),o.value=p(a)?1:f):i.value=y(w,E,L),l.value=!0,M&&r.value&&e.setContainerHeight(r.value.offsetHeight)};function S(){if(e&&p(d)){const w=e.items.value.findIndex(({uid:E})=>E===n.uid);e.setActiveItem(w)}}const _={props:t,states:Ln({hover:s,translate:i,scale:o,active:a,ready:l,inStage:c,animating:u}),uid:n.uid,getVnode:()=>n.vnode,translateItem:g};return e.addItem(_),Xn(()=>{e.removeItem(_)}),{carouselItemRef:r,active:a,animating:u,hover:s,inStage:c,isVertical:h,translate:i,isCardType:d,scale:o,ready:l,handleItemClick:S}},R1e=de({name:eE}),L1e=de({...R1e,props:I1e,setup(t){const e=t,n=Qe("carousel"),{carouselItemRef:r,active:s,animating:i,hover:o,inStage:a,isVertical:l,translate:c,isCardType:u,scale:d,ready:h,handleItemClick:f}=P1e(e),m=R(()=>[n.e("item"),n.is("active",s.value),n.is("in-stage",a.value),n.is("hover",o.value),n.is("animating",i.value),{[n.em("item","card")]:u.value,[n.em("item","card-vertical")]:u.value&&l.value}]),v=R(()=>{const g=`${`translate${p(l)?"Y":"X"}`}(${p(c)}px)`,S=`scale(${p(d)})`;return{transform:[g,S].join(" ")}});return(y,g)=>cn((D(),Z("div",{ref_key:"carouselItemRef",ref:r,class:U(p(m)),style:Pt(p(v)),onClick:p(f)},[p(u)?cn((D(),Z("div",{key:0,class:U(p(n).e("mask"))},null,2)),[[Wn,!p(s)]]):Pe("v-if",!0),Ae(y.$slots,"default")],14,["onClick"])),[[Wn,p(h)]])}});var sz=at(L1e,[["__file","carousel-item.vue"]]);const O1e=nn(k1e,{CarouselItem:sz}),N1e=Br(sz),iz={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},border:Boolean,size:Es,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...hi(["ariaControls"])},oz={[Qt]:t=>kt(t)||Ft(t)||nr(t),change:t=>kt(t)||Ft(t)||nr(t)},Jp=Symbol("checkboxGroupContextKey"),D1e=({model:t,isChecked:e})=>{const n=_t(Jp,void 0),r=R(()=>{var i,o;const a=(i=n==null?void 0:n.max)==null?void 0:i.value,l=(o=n==null?void 0:n.min)==null?void 0:o.value;return!Bn(a)&&t.value.length>=a&&!e.value||!Bn(l)&&t.value.length<=l&&e.value});return{isDisabled:pi(R(()=>(n==null?void 0:n.disabled.value)||r.value)),isLimitDisabled:r}},F1e=(t,{model:e,isLimitExceeded:n,hasOwnLabel:r,isDisabled:s,isLabeledByFormItem:i})=>{const o=_t(Jp,void 0),{formItem:a}=fi(),{emit:l}=tn();function c(m){var v,y,g,S;return[!0,t.trueValue,t.trueLabel].includes(m)?(y=(v=t.trueValue)!=null?v:t.trueLabel)!=null?y:!0:(S=(g=t.falseValue)!=null?g:t.falseLabel)!=null?S:!1}function u(m,v){l(xn,c(m),v)}function d(m){if(n.value)return;const v=m.target;l(xn,c(v.checked),m)}async function h(m){n.value||!r.value&&!s.value&&i.value&&(m.composedPath().some(g=>g.tagName==="LABEL")||(e.value=c([!1,t.falseValue,t.falseLabel].includes(e.value)),await Tt(),u(e.value,m)))}const f=R(()=>(o==null?void 0:o.validateEvent)||t.validateEvent);return Be(()=>t.modelValue,()=>{f.value&&(a==null||a.validate("change").catch(m=>void 0))}),{handleChange:d,onClickRoot:h}},B1e=t=>{const e=H(!1),{emit:n}=tn(),r=_t(Jp,void 0),s=R(()=>Bn(r)===!1),i=H(!1),o=R({get(){var a,l;return s.value?(a=r==null?void 0:r.modelValue)==null?void 0:a.value:(l=t.modelValue)!=null?l:e.value},set(a){var l,c;s.value&&rt(a)?(i.value=((l=r==null?void 0:r.max)==null?void 0:l.value)!==void 0&&a.length>(r==null?void 0:r.max.value)&&a.length>o.value.length,i.value===!1&&((c=r==null?void 0:r.changeEvent)==null||c.call(r,a))):(n(Qt,a),e.value=a)}});return{model:o,isGroup:s,isLimitExceeded:i}},U1e=(t,e,{model:n})=>{const r=_t(Jp,void 0),s=H(!1),i=R(()=>ho(t.value)?t.label:t.value),o=R(()=>{const u=n.value;return nr(u)?u:rt(u)?un(i.value)?u.map(gr).some(d=>_s(d,i.value)):u.map(gr).includes(i.value):u!=null?u===t.trueValue||u===t.trueLabel:!!u}),a=ys(R(()=>{var u;return(u=r==null?void 0:r.size)==null?void 0:u.value}),{prop:!0}),l=ys(R(()=>{var u;return(u=r==null?void 0:r.size)==null?void 0:u.value})),c=R(()=>!!e.default||!ho(i.value));return{checkboxButtonSize:a,isChecked:o,isFocused:s,checkboxSize:l,hasOwnLabel:c,actualValue:i}},az=(t,e)=>{const{formItem:n}=fi(),{model:r,isGroup:s,isLimitExceeded:i}=B1e(t),{isFocused:o,isChecked:a,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,actualValue:d}=U1e(t,e,{model:r}),{isDisabled:h}=D1e({model:r,isChecked:a}),{inputId:f,isLabeledByFormItem:m}=la(t,{formItemContext:n,disableIdGeneration:u,disableIdManagement:s}),{handleChange:v,onClickRoot:y}=F1e(t,{model:r,isLimitExceeded:i,hasOwnLabel:u,isDisabled:h,isLabeledByFormItem:m});return(()=>{function S(){var _,w;rt(r.value)&&!r.value.includes(d.value)?r.value.push(d.value):r.value=(w=(_=t.trueValue)!=null?_:t.trueLabel)!=null?w:!0}t.checked&&S()})(),vc({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},R(()=>s.value&&ho(t.value))),vc({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},R(()=>!!t.trueLabel)),vc({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},R(()=>!!t.falseLabel)),{inputId:f,isLabeledByFormItem:m,isChecked:a,isDisabled:h,isFocused:o,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,model:r,actualValue:d,handleChange:v,onClickRoot:y}},z1e=de({name:"ElCheckbox"}),$1e=de({...z1e,props:iz,emits:oz,setup(t){const e=t,n=bs(),{inputId:r,isLabeledByFormItem:s,isChecked:i,isDisabled:o,isFocused:a,checkboxSize:l,hasOwnLabel:c,model:u,actualValue:d,handleChange:h,onClickRoot:f}=az(e,n),m=Qe("checkbox"),v=R(()=>[m.b(),m.m(l.value),m.is("disabled",o.value),m.is("bordered",e.border),m.is("checked",i.value)]),y=R(()=>[m.e("input"),m.is("disabled",o.value),m.is("checked",i.value),m.is("indeterminate",e.indeterminate),m.is("focus",a.value)]);return(g,S)=>(D(),Le(mn(!p(c)&&p(s)?"span":"label"),{class:U(p(v)),"aria-controls":g.indeterminate?g.ariaControls:null,onClick:p(f)},{default:me(()=>{var _,w,E,C;return[ne("span",{class:U(p(y))},[g.trueValue||g.falseValue||g.trueLabel||g.falseLabel?cn((D(),Z("input",{key:0,id:p(r),"onUpdate:modelValue":T=>yr(u)?u.value=T:null,class:U(p(m).e("original")),type:"checkbox",indeterminate:g.indeterminate,name:g.name,tabindex:g.tabindex,disabled:p(o),"true-value":(w=(_=g.trueValue)!=null?_:g.trueLabel)!=null?w:!0,"false-value":(C=(E=g.falseValue)!=null?E:g.falseLabel)!=null?C:!1,onChange:p(h),onFocus:T=>a.value=!0,onBlur:T=>a.value=!1,onClick:$t(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[qb,p(u)]]):cn((D(),Z("input",{key:1,id:p(r),"onUpdate:modelValue":T=>yr(u)?u.value=T:null,class:U(p(m).e("original")),type:"checkbox",indeterminate:g.indeterminate,disabled:p(o),value:p(d),name:g.name,tabindex:g.tabindex,onChange:p(h),onFocus:T=>a.value=!0,onBlur:T=>a.value=!1,onClick:$t(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","disabled","value","name","tabindex","onChange","onFocus","onBlur","onClick"])),[[qb,p(u)]]),ne("span",{class:U(p(m).e("inner"))},null,2)],2),p(c)?(D(),Z("span",{key:0,class:U(p(m).e("label"))},[Ae(g.$slots,"default"),g.$slots.default?Pe("v-if",!0):(D(),Z(xt,{key:0},[rn(tt(g.label),1)],64))],2)):Pe("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var V1e=at($1e,[["__file","checkbox.vue"]]);const H1e=de({name:"ElCheckboxButton"}),G1e=de({...H1e,props:iz,emits:oz,setup(t){const e=t,n=bs(),{isFocused:r,isChecked:s,isDisabled:i,checkboxButtonSize:o,model:a,actualValue:l,handleChange:c}=az(e,n),u=_t(Jp,void 0),d=Qe("checkbox"),h=R(()=>{var m,v,y,g;const S=(v=(m=u==null?void 0:u.fill)==null?void 0:m.value)!=null?v:"";return{backgroundColor:S,borderColor:S,color:(g=(y=u==null?void 0:u.textColor)==null?void 0:y.value)!=null?g:"",boxShadow:S?`-1px 0 0 0 ${S}`:void 0}}),f=R(()=>[d.b("button"),d.bm("button",o.value),d.is("disabled",i.value),d.is("checked",s.value),d.is("focus",r.value)]);return(m,v)=>{var y,g,S,_;return D(),Z("label",{class:U(p(f))},[m.trueValue||m.falseValue||m.trueLabel||m.falseLabel?cn((D(),Z("input",{key:0,"onUpdate:modelValue":w=>yr(a)?a.value=w:null,class:U(p(d).be("button","original")),type:"checkbox",name:m.name,tabindex:m.tabindex,disabled:p(i),"true-value":(g=(y=m.trueValue)!=null?y:m.trueLabel)!=null?g:!0,"false-value":(_=(S=m.falseValue)!=null?S:m.falseLabel)!=null?_:!1,onChange:p(c),onFocus:w=>r.value=!0,onBlur:w=>r.value=!1,onClick:$t(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[qb,p(a)]]):cn((D(),Z("input",{key:1,"onUpdate:modelValue":w=>yr(a)?a.value=w:null,class:U(p(d).be("button","original")),type:"checkbox",name:m.name,tabindex:m.tabindex,disabled:p(i),value:p(l),onChange:p(c),onFocus:w=>r.value=!0,onBlur:w=>r.value=!1,onClick:$t(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","value","onChange","onFocus","onBlur","onClick"])),[[qb,p(a)]]),m.$slots.default||m.label?(D(),Z("span",{key:2,class:U(p(d).be("button","inner")),style:Pt(p(s)?p(h):void 0)},[Ae(m.$slots,"default",{},()=>[rn(tt(m.label),1)])],6)):Pe("v-if",!0)],2)}}});var lz=at(G1e,[["__file","checkbox-button.vue"]]);const W1e=it({modelValue:{type:Ce(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:Es,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...hi(["ariaLabel"])}),j1e={[Qt]:t=>rt(t),change:t=>rt(t)},K1e=de({name:"ElCheckboxGroup"}),q1e=de({...K1e,props:W1e,emits:j1e,setup(t,{emit:e}){const n=t,r=Qe("checkbox"),{formItem:s}=fi(),{inputId:i,isLabeledByFormItem:o}=la(n,{formItemContext:s}),a=async c=>{e(Qt,c),await Tt(),e(xn,c)},l=R({get(){return n.modelValue},set(c){a(c)}});return Mn(Jp,{...Yo(Ds(n),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:l,changeEvent:a}),Be(()=>n.modelValue,(c,u)=>{n.validateEvent&&!_s(c,u)&&(s==null||s.validate("change").catch(d=>void 0))}),(c,u)=>{var d;return D(),Le(mn(c.tag),{id:p(i),class:U(p(r).b("group")),role:"group","aria-label":p(o)?void 0:c.ariaLabel||"checkbox-group","aria-labelledby":p(o)?(d=p(s))==null?void 0:d.labelId:void 0},{default:me(()=>[Ae(c.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var cz=at(q1e,[["__file","checkbox-group.vue"]]);const oa=nn(V1e,{CheckboxButton:lz,CheckboxGroup:cz}),Y1e=Br(lz),uz=Br(cz),dz=it({modelValue:{type:[String,Number,Boolean],default:void 0},size:Es,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),X1e=it({...dz,border:Boolean}),hz={[Qt]:t=>kt(t)||Ft(t)||nr(t),[xn]:t=>kt(t)||Ft(t)||nr(t)},fz=Symbol("radioGroupKey"),pz=(t,e)=>{const n=H(),r=_t(fz,void 0),s=R(()=>!!r),i=R(()=>ho(t.value)?t.label:t.value),o=R({get(){return s.value?r.modelValue:t.modelValue},set(d){s.value?r.changeEvent(d):e&&e(Qt,d),n.value.checked=t.modelValue===i.value}}),a=ys(R(()=>r==null?void 0:r.size)),l=pi(R(()=>r==null?void 0:r.disabled)),c=H(!1),u=R(()=>l.value||s.value&&o.value!==i.value?-1:0);return vc({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},R(()=>s.value&&ho(t.value))),{radioRef:n,isGroup:s,radioGroup:r,focus:c,size:a,disabled:l,tabIndex:u,modelValue:o,actualValue:i}},Z1e=de({name:"ElRadio"}),J1e=de({...Z1e,props:X1e,emits:hz,setup(t,{emit:e}){const n=t,r=Qe("radio"),{radioRef:s,radioGroup:i,focus:o,size:a,disabled:l,modelValue:c,actualValue:u}=pz(n,e);function d(){Tt(()=>e(xn,c.value))}return(h,f)=>{var m;return D(),Z("label",{class:U([p(r).b(),p(r).is("disabled",p(l)),p(r).is("focus",p(o)),p(r).is("bordered",h.border),p(r).is("checked",p(c)===p(u)),p(r).m(p(a))])},[ne("span",{class:U([p(r).e("input"),p(r).is("disabled",p(l)),p(r).is("checked",p(c)===p(u))])},[cn(ne("input",{ref_key:"radioRef",ref:s,"onUpdate:modelValue":v=>yr(c)?c.value=v:null,class:U(p(r).e("original")),value:p(u),name:h.name||((m=p(i))==null?void 0:m.name),disabled:p(l),checked:p(c)===p(u),type:"radio",onFocus:v=>o.value=!0,onBlur:v=>o.value=!1,onChange:d,onClick:$t(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[nB,p(c)]]),ne("span",{class:U(p(r).e("inner"))},null,2)],2),ne("span",{class:U(p(r).e("label")),onKeydown:$t(()=>{},["stop"])},[Ae(h.$slots,"default",{},()=>[rn(tt(h.label),1)])],42,["onKeydown"])],2)}}});var Q1e=at(J1e,[["__file","radio.vue"]]);const e_e=it({...dz}),t_e=de({name:"ElRadioButton"}),n_e=de({...t_e,props:e_e,setup(t){const e=t,n=Qe("radio"),{radioRef:r,focus:s,size:i,disabled:o,modelValue:a,radioGroup:l,actualValue:c}=pz(e),u=R(()=>({backgroundColor:(l==null?void 0:l.fill)||"",borderColor:(l==null?void 0:l.fill)||"",boxShadow:l!=null&&l.fill?`-1px 0 0 0 ${l.fill}`:"",color:(l==null?void 0:l.textColor)||""}));return(d,h)=>{var f;return D(),Z("label",{class:U([p(n).b("button"),p(n).is("active",p(a)===p(c)),p(n).is("disabled",p(o)),p(n).is("focus",p(s)),p(n).bm("button",p(i))])},[cn(ne("input",{ref_key:"radioRef",ref:r,"onUpdate:modelValue":m=>yr(a)?a.value=m:null,class:U(p(n).be("button","original-radio")),value:p(c),type:"radio",name:d.name||((f=p(l))==null?void 0:f.name),disabled:p(o),onFocus:m=>s.value=!0,onBlur:m=>s.value=!1,onClick:$t(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[nB,p(a)]]),ne("span",{class:U(p(n).be("button","inner")),style:Pt(p(a)===p(c)?p(u):{}),onKeydown:$t(()=>{},["stop"])},[Ae(d.$slots,"default",{},()=>[rn(tt(d.label),1)])],46,["onKeydown"])],2)}}});var mz=at(n_e,[["__file","radio-button.vue"]]);const r_e=it({id:{type:String,default:void 0},size:Es,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...hi(["ariaLabel"])}),s_e=hz,i_e=de({name:"ElRadioGroup"}),o_e=de({...i_e,props:r_e,emits:s_e,setup(t,{emit:e}){const n=t,r=Qe("radio"),s=ni(),i=H(),{formItem:o}=fi(),{inputId:a,isLabeledByFormItem:l}=la(n,{formItemContext:o}),c=d=>{e(Qt,d),Tt(()=>e(xn,d))};Zt(()=>{const d=i.value.querySelectorAll("[type=radio]"),h=d[0];!Array.from(d).some(f=>f.checked)&&h&&(h.tabIndex=0)});const u=R(()=>n.name||s.value);return Mn(fz,Ln({...Ds(n),changeEvent:c,name:u})),Be(()=>n.modelValue,()=>{n.validateEvent&&(o==null||o.validate("change").catch(d=>void 0))}),(d,h)=>(D(),Z("div",{id:p(a),ref_key:"radioGroupRef",ref:i,class:U(p(r).b("group")),role:"radiogroup","aria-label":p(l)?void 0:d.ariaLabel||"radio-group","aria-labelledby":p(l)?p(o).labelId:void 0},[Ae(d.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var gz=at(o_e,[["__file","radio-group.vue"]]);const vz=nn(Q1e,{RadioButton:mz,RadioGroup:gz}),a_e=Br(gz),l_e=Br(mz),S_=Symbol();function c_e(t){return!!(rt(t)?t.every(({type:e})=>e===gs):(t==null?void 0:t.type)===gs)}var u_e=de({name:"NodeContent",props:{node:{type:Object,required:!0},disabled:Boolean},setup(t,{emit:e}){const n=Qe("cascader-node"),{config:r,renderLabelFn:s}=_t(S_),{checkOnClickNode:i,checkOnClickLeaf:o}=r,{node:a,disabled:l}=t,{data:c,label:u}=a,d=()=>{const f=s==null?void 0:s({node:a,data:c});return c_e(f)?u:f??u};function h(){(i||a.isLeaf&&o)&&!l&&e("handleSelectCheck",!a.checked)}return()=>ae("span",{class:n.e("label"),onClick:h},[d()])}});const d_e=de({name:"ElCascaderNode"}),h_e=de({...d_e,props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(t,{emit:e}){const n=t,r=_t(S_),s=Qe("cascader-node"),i=R(()=>r.isHoverMenu),o=R(()=>r.config.multiple),a=R(()=>r.config.checkStrictly),l=R(()=>r.config.showPrefix),c=R(()=>{var I;return(I=r.checkedNodes[0])==null?void 0:I.uid}),u=R(()=>n.node.isDisabled),d=R(()=>n.node.isLeaf),h=R(()=>a.value&&!d.value||!u.value),f=R(()=>v(r.expandingNode)),m=R(()=>a.value&&r.checkedNodes.some(v)),v=I=>{var k;const{level:M,uid:L}=n.node;return((k=I==null?void 0:I.pathNodes[M-1])==null?void 0:k.uid)===L},y=()=>{f.value||r.expandNode(n.node)},g=I=>{const{node:k}=n;I!==k.checked&&r.handleCheckChange(k,I)},S=()=>{r.lazyLoad(n.node,()=>{d.value||y()})},_=I=>{i.value&&(w(),!d.value&&e("expand",I))},w=()=>{const{node:I}=n;!h.value||I.loading||(I.loaded?y():S())},E=()=>{i.value&&!d.value||(d.value&&!u.value&&!a.value&&!o.value?T(!0):w())},C=I=>{a.value?(g(I),n.node.loaded&&y()):T(I)},T=I=>{n.node.loaded?(g(I),!a.value&&y()):S()};return(I,k)=>(D(),Z("li",{id:`${t.menuId}-${t.node.uid}`,role:"menuitem","aria-haspopup":!p(d),"aria-owns":p(d)?void 0:t.menuId,"aria-expanded":p(f),tabindex:p(h)?-1:void 0,class:U([p(s).b(),p(s).is("selectable",p(a)),p(s).is("active",t.node.checked),p(s).is("disabled",!p(h)),p(f)&&"in-active-path",p(m)&&"in-checked-path"]),onMouseenter:_,onFocus:_,onClick:E},[Pe(" prefix "),p(o)&&p(l)?(D(),Le(p(oa),{key:0,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:p(u),onClick:$t(()=>{},["stop"]),"onUpdate:modelValue":C},null,8,["model-value","indeterminate","disabled","onClick"])):p(a)&&p(l)?(D(),Le(p(vz),{key:1,"model-value":p(c),label:t.node.uid,disabled:p(u),"onUpdate:modelValue":C,onClick:$t(()=>{},["stop"])},{default:me(()=>[Pe(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ne("span")]),_:1},8,["model-value","label","disabled","onClick"])):p(d)&&t.node.checked?(D(),Le(p(Et),{key:2,class:U(p(s).e("prefix"))},{default:me(()=>[ae(p(Pv))]),_:1},8,["class"])):Pe("v-if",!0),Pe(" content "),ae(p(u_e),{node:t.node,disabled:p(u),onHandleSelectCheck:C},null,8,["node","disabled"]),Pe(" postfix "),p(d)?Pe("v-if",!0):(D(),Z(xt,{key:3},[t.node.loading?(D(),Le(p(Et),{key:0,class:U([p(s).is("loading"),p(s).e("postfix")])},{default:me(()=>[ae(p(El))]),_:1},8,["class"])):(D(),Le(p(Et),{key:1,class:U(["arrow-right",p(s).e("postfix")])},{default:me(()=>[ae(p(Ai))]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex"]))}});var f_e=at(h_e,[["__file","node.vue"]]);const p_e=de({name:"ElCascaderMenu"}),m_e=de({...p_e,props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(t){const e=t,n=tn(),r=Qe("cascader-menu"),{t:s}=zn(),i=ni();let o,a;const l=_t(S_),c=H(),u=R(()=>!e.nodes.length),d=R(()=>!l.initialLoaded),h=R(()=>`${i.value}-${e.index}`),f=g=>{o=g.target},m=g=>{if(!(!l.isHoverMenu||!o||!c.value))if(o.contains(g.target)){v();const S=n.vnode.el,{left:_}=S.getBoundingClientRect(),{offsetWidth:w,offsetHeight:E}=S,C=g.clientX-_,T=o.offsetTop,I=T+o.offsetHeight;c.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${C} ${T} L${w} 0 V${T} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${C} ${I} L${w} ${E} V${I} Z" />
        `}else a||(a=window.setTimeout(y,l.config.hoverThreshold))},v=()=>{a&&(clearTimeout(a),a=void 0)},y=()=>{c.value&&(c.value.innerHTML="",v())};return(g,S)=>(D(),Le(p($a),{key:p(h),tag:"ul",role:"menu",class:U(p(r).b()),"wrap-class":p(r).e("wrap"),"view-class":[p(r).e("list"),p(r).is("empty",p(u))],onMousemove:m,onMouseleave:y},{default:me(()=>{var _;return[(D(!0),Z(xt,null,_n(t.nodes,w=>(D(),Le(f_e,{key:w.uid,node:w,"menu-id":p(h),onExpand:f},null,8,["node","menu-id"]))),128)),p(d)?(D(),Z("div",{key:0,class:U(p(r).e("empty-text"))},[ae(p(Et),{size:"14",class:U(p(r).is("loading"))},{default:me(()=>[ae(p(El))]),_:1},8,["class"]),rn(" "+tt(p(s)("el.cascader.loading")),1)],2)):p(u)?(D(),Z("div",{key:1,class:U(p(r).e("empty-text"))},[Ae(g.$slots,"empty",{},()=>[rn(tt(p(s)("el.cascader.noData")),1)])],2)):(_=p(l))!=null&&_.isHoverMenu?(D(),Z(xt,{key:2},[Pe(" eslint-disable-next-line vue/html-self-closing "),(D(),Z("svg",{ref_key:"hoverZone",ref:c,class:U(p(r).e("hover-zone"))},null,2))],2112)):Pe("v-if",!0)]}),_:3},8,["class","wrap-class","view-class"]))}});var g_e=at(m_e,[["__file","menu.vue"]]);let v_e=0;const y_e=t=>{const e=[t];let{parent:n}=t;for(;n;)e.unshift(n),n=n.parent;return e};let nE=class rE{constructor(e,n,r,s=!1){this.data=e,this.config=n,this.parent=r,this.root=s,this.uid=v_e++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:i,label:o,children:a}=n,l=e[a],c=y_e(this);this.level=s?0:r?r.level+1:1,this.value=e[i],this.label=e[o],this.pathNodes=c,this.pathValues=c.map(u=>u.value),this.pathLabels=c.map(u=>u.label),this.childrenData=l,this.children=(l||[]).map(u=>new rE(u,n,this)),this.loaded=!n.lazy||this.isLeaf||!Po(l),this.text=""}get isDisabled(){const{data:e,parent:n,config:r}=this,{disabled:s,checkStrictly:i}=r;return(Lt(s)?s(e,this):!!e[s])||!i&&!!(n!=null&&n.isDisabled)}get isLeaf(){const{data:e,config:n,childrenData:r,loaded:s}=this,{lazy:i,leaf:o}=n,a=Lt(o)?o(e,this):e[o];return Bn(a)?i&&!s?!1:!(rt(r)&&r.length):!!a}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:n,children:r}=this,s=new rE(e,this.config,this);return rt(n)?n.push(e):this.childrenData=[e],r.push(s),s}calcText(e,n){const r=e?this.pathLabels.join(n):this.label;return this.text=r,r}broadcast(e){this.children.forEach(n=>{var r;n&&(n.broadcast(e),(r=n.onParentCheck)==null||r.call(n,e))})}emit(){var e;const{parent:n}=this;n&&((e=n.onChildCheck)==null||e.call(n),n.emit())}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,n=e.filter(s=>!s.isDisabled),r=n.length?n.every(s=>s.checked):!1;this.setCheckState(r)}setCheckState(e){const n=this.children.length,r=this.children.reduce((s,i)=>{const o=i.checked?1:i.indeterminate?.5:0;return s+o},0);this.checked=this.loaded&&this.children.filter(s=>!s.isDisabled).every(s=>s.loaded&&s.checked)&&e,this.indeterminate=this.loaded&&r!==n&&r>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:n,multiple:r}=this.config;n||!r?this.checked=e:(this.broadcast(e),this.setCheckState(e),this.emit())}};const sE=(t,e)=>t.reduce((n,r)=>(r.isLeaf?n.push(r):(!e&&n.push(r),n=n.concat(sE(r.children,e))),n),[]);class y4{constructor(e,n){this.config=n;const r=(e||[]).map(s=>new nE(s,this.config));this.nodes=r,this.allNodes=sE(r,!1),this.leafNodes=sE(r,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,n){const r=n?n.appendChild(e):new nE(e,this.config);n||this.nodes.push(r),this.appendAllNodesAndLeafNodes(r)}appendNodes(e,n){e.forEach(r=>this.appendNode(r,n))}appendAllNodesAndLeafNodes(e){this.allNodes.push(e),e.isLeaf&&this.leafNodes.push(e),e.children&&e.children.forEach(n=>{this.appendAllNodesAndLeafNodes(n)})}getNodeByValue(e,n=!1){return ho(e)?null:this.getFlattedNodes(n).find(s=>_s(s.value,e)||_s(s.pathValues,e))||null}getSameNode(e){return e&&this.getFlattedNodes(!1).find(({value:r,level:s})=>_s(e.value,r)&&e.level===s)||null}}const yz=it({modelValue:{type:Ce([Number,String,Array])},options:{type:Ce(Array),default:()=>[]},props:{type:Ce(Object),default:()=>({})}}),b_e={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:er,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500,checkOnClickNode:!1,checkOnClickLeaf:!0,showPrefix:!0},__e=it({...yz,border:{type:Boolean,default:!0},renderLabel:{type:Function}}),b4=t=>!0,w_e={[Qt]:b4,[xn]:b4,close:()=>!0,"expand-change":t=>t},x_e=t=>R(()=>({...b_e,...t.props})),_4=t=>{if(!t)return 0;const e=t.id.split("-");return Number(e[e.length-2])},S_e=t=>{if(!t)return;const e=t.querySelector("input");e?e.click():mU(t)&&t.click()},E_e=(t,e)=>{const n=e.slice(0),r=n.map(i=>i.uid),s=t.reduce((i,o)=>{const a=r.indexOf(o.uid);return a>-1&&(i.push(o),n.splice(a,1),r.splice(a,1)),i},[]);return s.push(...n),s},w4=t=>[...new Set(t)],Wi=t=>!t&&t!==0?[]:rt(t)?t:[t],C_e=de({name:"ElCascaderPanel",inheritAttrs:!1}),T_e=de({...C_e,props:__e,emits:w_e,setup(t,{expose:e,emit:n}){const r=t;let s=!1;const i=Qe("cascader"),o=x_e(r),a=bs();let l;const c=H(!0),u=H([]),d=H(),h=H([]),f=H(),m=H([]),v=R(()=>o.value.expandTrigger==="hover"),y=R(()=>r.renderLabel||a.default),g=()=>{const{options:V}=r,X=o.value;s=!1,l=new y4(V,X),h.value=[l.getNodes()],X.lazy&&Po(r.options)?(c.value=!1,S(void 0,F=>{F&&(l=new y4(F,X),h.value=[l.getNodes()]),c.value=!0,M(!1,!0)})):M(!1,!0)},S=(V,X)=>{const F=o.value;V=V||new nE({},F,void 0,!0),V.loading=!0;const $=O=>{const z=V,re=z.root?null:z;O&&(l==null||l.appendNodes(O,re)),z.loading=!1,z.loaded=!0,z.childrenData=z.childrenData||[],O&&(X==null||X(O))};F.lazyLoad(V,$)},_=(V,X)=>{var F;const{level:$}=V,O=h.value.slice(0,$);let z;V.isLeaf?z=V.pathNodes[$-2]:(z=V,O.push(V.children)),((F=f.value)==null?void 0:F.uid)!==(z==null?void 0:z.uid)&&(f.value=V,h.value=O,!X&&n("expand-change",(V==null?void 0:V.pathValues)||[]))},w=(V,X,F=!0)=>{const{checkStrictly:$,multiple:O}=o.value,z=m.value[0];s=!0,!O&&(z==null||z.doCheck(!1)),V.doCheck(X),k(),F&&!O&&!$&&n("close"),!F&&!O&&!$&&E(V)},E=V=>{V&&(V=V.parent,E(V),V&&_(V))},C=V=>l==null?void 0:l.getFlattedNodes(V),T=V=>{var X;return(X=C(V))==null?void 0:X.filter(({checked:F})=>F!==!1)},I=()=>{m.value.forEach(V=>V.doCheck(!1)),k(),h.value=h.value.slice(0,1),f.value=void 0,n("expand-change",[])},k=()=>{const{checkStrictly:V,multiple:X}=o.value,F=m.value,$=T(!V),O=E_e(F,$),z=O.map(re=>re.valueByOption);m.value=O,d.value=X?z:z[0]},M=(V=!1,X=!1)=>{const{modelValue:F}=r,{lazy:$,multiple:O,checkStrictly:z}=o.value,re=!z;if(!(!c.value||s||!X&&_s(F,d.value)))if($&&!V){const le=w4(cre(Wi(F))).map(fe=>l==null?void 0:l.getNodeByValue(fe)).filter(fe=>!!fe&&!fe.loaded&&!fe.loading);le.length?le.forEach(fe=>{S(fe,()=>M(!1,X))}):M(!0,X)}else{const q=O?Wi(F):[F],le=w4(q.map(fe=>l==null?void 0:l.getNodeByValue(fe,re)));L(le,X),d.value=Ab(F??void 0)}},L=(V,X=!0)=>{const{checkStrictly:F}=o.value,$=m.value,O=V.filter(q=>!!q&&(F||q.isLeaf)),z=l==null?void 0:l.getSameNode(f.value),re=X&&z||O[0];re?re.pathNodes.forEach(q=>_(q,!0)):f.value=void 0,$.forEach(q=>q.doCheck(!1)),Ln(O).forEach(q=>q.doCheck(!0)),m.value=O,Tt(N)},N=()=>{Vn&&u.value.forEach(V=>{const X=V==null?void 0:V.$el;if(X){const F=X.querySelector(`.${i.namespace.value}-scrollbar__wrap`),$=X.querySelector(`.${i.b("node")}.${i.is("active")}:last-child`)||X.querySelector(`.${i.b("node")}.in-active-path`);jT(F,$)}})},G=V=>{const X=V.target,{code:F}=V;switch(F){case bt.up:case bt.down:{V.preventDefault();const $=F===bt.up?-1:1;rb(gU(X,$,`.${i.b("node")}[tabindex="-1"]`));break}case bt.left:{V.preventDefault();const $=u.value[_4(X)-1],O=$==null?void 0:$.$el.querySelector(`.${i.b("node")}[aria-expanded="true"]`);rb(O);break}case bt.right:{V.preventDefault();const $=u.value[_4(X)+1],O=$==null?void 0:$.$el.querySelector(`.${i.b("node")}[tabindex="-1"]`);rb(O);break}case bt.enter:case bt.numpadEnter:S_e(X);break}};return Mn(S_,Ln({config:o,expandingNode:f,checkedNodes:m,isHoverMenu:v,initialLoaded:c,renderLabelFn:y,lazyLoad:S,expandNode:_,handleCheckChange:w})),Be(o,(V,X)=>{_s(V,X)||g()},{immediate:!0}),Be(()=>r.options,g,{deep:!0}),Be(()=>r.modelValue,()=>{s=!1,M()},{deep:!0}),Be(()=>d.value,V=>{_s(V,r.modelValue)||(n(Qt,V),n(xn,V))}),s_(()=>u.value=[]),Zt(()=>!Po(r.modelValue)&&M()),e({menuList:u,menus:h,checkedNodes:m,handleKeyDown:G,handleCheckChange:w,getFlattedNodes:C,getCheckedNodes:T,clearCheckedNodes:I,calculateCheckedValue:k,scrollToExpandingNode:N}),(V,X)=>(D(),Z("div",{class:U([p(i).b("panel"),p(i).is("bordered",V.border)]),onKeydown:G},[(D(!0),Z(xt,null,_n(h.value,(F,$)=>(D(),Le(g_e,{key:$,ref_for:!0,ref:O=>u.value[$]=O,index:$,nodes:[...F]},{empty:me(()=>[Ae(V.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],34))}});var M_e=at(T_e,[["__file","index.vue"]]);const bz=nn(M_e),Cc=it({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:Rl},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),A_e={close:t=>t instanceof MouseEvent,click:t=>t instanceof MouseEvent},k_e=de({name:"ElTag"}),I_e=de({...k_e,props:Cc,emits:A_e,setup(t,{emit:e}){const n=t,r=ys(),s=Qe("tag"),i=R(()=>{const{type:c,hit:u,effect:d,closable:h,round:f}=n;return[s.b(),s.is("closable",h),s.m(c||"primary"),s.m(r.value),s.m(d),s.is("hit",u),s.is("round",f)]}),o=c=>{e("close",c)},a=c=>{e("click",c)},l=c=>{var u,d,h;(h=(d=(u=c==null?void 0:c.component)==null?void 0:u.subTree)==null?void 0:d.component)!=null&&h.bum&&(c.component.subTree.component.bum=null)};return(c,u)=>c.disableTransitions?(D(),Z("span",{key:0,class:U(p(i)),style:Pt({backgroundColor:c.color}),onClick:a},[ne("span",{class:U(p(s).e("content"))},[Ae(c.$slots,"default")],2),c.closable?(D(),Le(p(Et),{key:0,class:U(p(s).e("close")),onClick:$t(o,["stop"])},{default:me(()=>[ae(p(ra))]),_:1},8,["class","onClick"])):Pe("v-if",!0)],6)):(D(),Le(Xs,{key:1,name:`${p(s).namespace.value}-zoom-in-center`,appear:"",onVnodeMounted:l},{default:me(()=>[ne("span",{class:U(p(i)),style:Pt({backgroundColor:c.color}),onClick:a},[ne("span",{class:U(p(s).e("content"))},[Ae(c.$slots,"default")],2),c.closable?(D(),Le(p(Et),{key:0,class:U(p(s).e("close")),onClick:$t(o,["stop"])},{default:me(()=>[ae(p(ra))]),_:1},8,["class","onClick"])):Pe("v-if",!0)],6)]),_:3},8,["name"]))}});var P_e=at(I_e,[["__file","tag.vue"]]);const Sp=nn(P_e),R_e=it({...yz,size:Es,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Ce(Function),default:(t,e)=>t.text.includes(e)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:Boolean,maxCollapseTagsTooltipHeight:{type:[String,Number]},debounce:{type:Number,default:300},beforeFilter:{type:Ce(Function),default:()=>!0},placement:{type:Ce(String),values:Lc,default:"bottom-start"},fallbackPlacements:{type:Ce(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:ss.teleported,effect:{type:Ce(String),default:"light"},tagType:{...Cc.type,default:"info"},tagEffect:{...Cc.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},showCheckedStrategy:{type:String,values:["parent","child"],default:"child"},checkOnClickNode:Boolean,showPrefix:{type:Boolean,default:!0},...yh}),x4=t=>!0,L_e={[Qt]:x4,[xn]:x4,focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,visibleChange:t=>nr(t),expandChange:t=>!!t,removeTag:t=>!!t},uu=new Map;if(Vn){let t;document.addEventListener("mousedown",e=>t=e),document.addEventListener("mouseup",e=>{if(t){for(const n of uu.values())for(const{documentHandler:r}of n)r(e,t);t=void 0}})}function S4(t,e){let n=[];return rt(e.arg)?n=e.arg:Ki(e.arg)&&n.push(e.arg),function(r,s){const i=e.instance.popperRef,o=r.target,a=s==null?void 0:s.target,l=!e||!e.instance,c=!o||!a,u=t.contains(o)||t.contains(a),d=t===o,h=n.length&&n.some(m=>m==null?void 0:m.contains(o))||n.length&&n.includes(a),f=i&&(i.contains(o)||i.contains(a));l||c||u||d||h||f||e.value(r,s)}}const Tc={beforeMount(t,e){uu.has(t)||uu.set(t,[]),uu.get(t).push({documentHandler:S4(t,e),bindingFn:e.value})},updated(t,e){uu.has(t)||uu.set(t,[]);const n=uu.get(t),r=n.findIndex(i=>i.bindingFn===e.oldValue),s={documentHandler:S4(t,e),bindingFn:e.value};r>=0?n.splice(r,1,s):n.push(s)},unmounted(t){uu.delete(t)}},O_e="ElCascader",N_e=de({name:O_e}),D_e=de({...N_e,props:R_e,emits:L_e,setup(t,{expose:e,emit:n}){const r=t,s={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:Me})=>{const{modifiersData:be,placement:Ve}=Me;["right","left","bottom","top"].includes(Ve)||be.arrow&&(be.arrow.x=35)},requires:["arrow"]}]},i=Pc();let o=0,a=0;const l=Qe("cascader"),c=Qe("input"),{t:u}=zn(),{form:d,formItem:h}=fi(),{valueOnClear:f}=Iv(r),{isComposing:m,handleComposition:v}=Lv({afterComposition(Me){var be;const Ve=(be=Me.target)==null?void 0:be.value;Mt(Ve)}}),y=H(null),g=H(null),S=H(null),_=H(null),w=H(null),E=H(!1),C=H(!1),T=H(!1),I=H(!1),k=H(""),M=H(""),L=H([]),N=H([]),G=H([]),V=R(()=>i.style),X=R(()=>r.disabled||(d==null?void 0:d.disabled)),F=R(()=>{var Me;return(Me=r.placeholder)!=null?Me:u("el.cascader.placeholder")}),$=R(()=>M.value||L.value.length>0||m.value?"":F.value),O=ys(),z=R(()=>O.value==="small"?"small":"default"),re=R(()=>!!r.props.multiple),q=R(()=>!r.filterable||re.value),le=R(()=>re.value?M.value:k.value),fe=R(()=>{var Me;return((Me=_.value)==null?void 0:Me.checkedNodes)||[]}),se=R(()=>!r.clearable||X.value||T.value||!C.value?!1:!!fe.value.length),ye=R(()=>{const{showAllLevels:Me,separator:be}=r,Ve=fe.value;return Ve.length?re.value?"":Ve[0].calcText(Me,be):""}),we=R(()=>(h==null?void 0:h.validateState)||""),ve=R({get(){return Ab(r.modelValue)},set(Me){const be=Me??f.value;n(Qt,be),n(xn,be),r.validateEvent&&(h==null||h.validate("change").catch(Ve=>void 0))}}),xe=R(()=>[l.b(),l.m(O.value),l.is("disabled",X.value),i.class]),je=R(()=>[c.e("icon"),"icon-arrow-down",l.is("reverse",E.value)]),nt=R(()=>l.is("focus",E.value||I.value)),ue=R(()=>{var Me,be;return(be=(Me=y.value)==null?void 0:Me.popperRef)==null?void 0:be.contentRef}),j=Me=>{var be,Ve,mt;X.value||(Me=Me??!E.value,Me!==E.value&&(E.value=Me,(Ve=(be=g.value)==null?void 0:be.input)==null||Ve.setAttribute("aria-expanded",`${Me}`),Me?(he(),Tt((mt=_.value)==null?void 0:mt.scrollToExpandingNode)):r.filterable&&We(),n("visibleChange",Me)))},he=()=>{Tt(()=>{var Me;(Me=y.value)==null||Me.updatePopper()})},K=()=>{T.value=!1},Fe=Me=>{const{showAllLevels:be,separator:Ve}=r;return{node:Me,key:Me.uid,text:Me.calcText(be,Ve),hitState:!1,closable:!X.value&&!Me.isDisabled,isCollapseTag:!1}},Oe=Me=>{var be;const Ve=Me.node;Ve.doCheck(!1),(be=_.value)==null||be.calculateCheckedValue(),n("removeTag",Ve.valueByOption)},Re=()=>{switch(r.showCheckedStrategy){case"child":return fe.value;case"parent":{const Me=Q(!1),be=Me.map(mt=>mt.value);return Me.filter(mt=>!mt.parent||!be.includes(mt.parent.value))}default:return[]}},te=()=>{if(!re.value)return;const Me=Re(),be=[],Ve=[];if(Me.forEach(mt=>Ve.push(Fe(mt))),N.value=Ve,Me.length){Me.slice(0,r.maxCollapseTags).forEach(Ct=>be.push(Fe(Ct)));const mt=Me.slice(r.maxCollapseTags),Ue=mt.length;Ue&&(r.collapseTags?be.push({key:-1,text:`+ ${Ue}`,closable:!1,isCollapseTag:!0}):mt.forEach(Ct=>be.push(Fe(Ct))))}L.value=be},oe=()=>{var Me,be;const{filterMethod:Ve,showAllLevels:mt,separator:Ue}=r,Ct=(be=(Me=_.value)==null?void 0:Me.getFlattedNodes(!r.props.checkStrictly))==null?void 0:be.filter(st=>st.isDisabled?!1:(st.calcText(mt,Ue),Ve(st,le.value)));re.value&&(L.value.forEach(st=>{st.hitState=!1}),N.value.forEach(st=>{st.hitState=!1})),T.value=!0,G.value=Ct,he()},Ee=()=>{var Me;let be;T.value&&w.value?be=w.value.$el.querySelector(`.${l.e("suggestion-item")}`):be=(Me=_.value)==null?void 0:Me.$el.querySelector(`.${l.b("node")}[tabindex="-1"]`),be&&(be.focus(),!T.value&&be.click())},J=()=>{var Me,be;const Ve=(Me=g.value)==null?void 0:Me.input,mt=S.value,Ue=(be=w.value)==null?void 0:be.$el;if(!(!Vn||!Ve)){if(Ue){const Ct=Ue.querySelector(`.${l.e("suggestion-list")}`);Ct.style.minWidth=`${Ve.offsetWidth}px`}if(mt){const{offsetHeight:Ct}=mt,st=L.value.length>0?`${Math.max(Ct,o)-2}px`:`${o}px`;Ve.style.height=st,he()}}},Q=Me=>{var be;return(be=_.value)==null?void 0:be.getCheckedNodes(Me)},_e=Me=>{he(),n("expandChange",Me)},ie=Me=>{if(!m.value)switch(Me.code){case bt.enter:case bt.numpadEnter:j();break;case bt.down:j(!0),Tt(Ee),Me.preventDefault();break;case bt.esc:E.value===!0&&(Me.preventDefault(),Me.stopPropagation(),j(!1));break;case bt.tab:j(!1);break}},Te=()=>{var Me;(Me=_.value)==null||Me.clearCheckedNodes(),!E.value&&r.filterable&&We(),j(!1),n("clear")},We=()=>{const{value:Me}=ye;k.value=Me,M.value=Me},ut=Me=>{var be,Ve;const{checked:mt}=Me;re.value?(be=_.value)==null||be.handleCheckChange(Me,!mt,!1):(!mt&&((Ve=_.value)==null||Ve.handleCheckChange(Me,!0,!1)),j(!1))},lt=Me=>{const be=Me.target,{code:Ve}=Me;switch(Ve){case bt.up:case bt.down:{Me.preventDefault();const mt=Ve===bt.up?-1:1;rb(gU(be,mt,`.${l.e("suggestion-item")}[tabindex="-1"]`));break}case bt.enter:case bt.numpadEnter:be.click();break}},St=()=>{const Me=L.value,be=Me[Me.length-1];a=M.value?0:a+1,!(!be||!a||r.collapseTags&&Me.length>1)&&(be.hitState?Oe(be):be.hitState=!0)},Ot=Me=>{const be=Me.target,Ve=l.e("search-input");be.className===Ve&&(I.value=!0),n("focus",Me)},et=Me=>{I.value=!1,n("blur",Me)},ht=mo(()=>{const{value:Me}=le;if(!Me)return;const be=r.beforeFilter(Me);th(be)?be.then(oe).catch(()=>{}):be!==!1?oe():K()},r.debounce),Mt=(Me,be)=>{!E.value&&j(!0),!(be!=null&&be.isComposing)&&(Me?ht():K())},ze=Me=>Number.parseFloat(ome(c.cssVarName("input-height"),Me).value)-2;return Be(T,he),Be([fe,X,()=>r.collapseTags],te),Be(L,()=>{Tt(()=>J())}),Be(O,async()=>{await Tt();const Me=g.value.input;o=ze(Me)||o,J()}),Be(ye,We,{immediate:!0}),Zt(()=>{const Me=g.value.input,be=ze(Me);o=Me.offsetHeight||be,Ir(Me,J)}),e({getCheckedNodes:Q,cascaderPanelRef:_,togglePopperVisible:j,contentRef:ue,presentText:ye}),(Me,be)=>(D(),Le(p(ri),{ref_key:"tooltipRef",ref:y,visible:E.value,teleported:Me.teleported,"popper-class":[p(l).e("dropdown"),Me.popperClass],"popper-options":s,"fallback-placements":Me.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:Me.placement,transition:`${p(l).namespace.value}-zoom-in-top`,effect:Me.effect,pure:"",persistent:Me.persistent,onHide:K},{default:me(()=>[cn((D(),Z("div",{class:U(p(xe)),style:Pt(p(V)),onClick:()=>j(p(q)?void 0:!0),onKeydown:ie,onMouseenter:Ve=>C.value=!0,onMouseleave:Ve=>C.value=!1},[ae(p(Ci),{ref_key:"input",ref:g,modelValue:k.value,"onUpdate:modelValue":Ve=>k.value=Ve,placeholder:p($),readonly:p(q),disabled:p(X),"validate-event":!1,size:p(O),class:U(p(nt)),tabindex:p(re)&&Me.filterable&&!p(X)?-1:void 0,onCompositionstart:p(v),onCompositionupdate:p(v),onCompositionend:p(v),onFocus:Ot,onBlur:et,onInput:Mt},go({suffix:me(()=>[p(se)?(D(),Le(p(Et),{key:"clear",class:U([p(c).e("icon"),"icon-circle-close"]),onClick:$t(Te,["stop"])},{default:me(()=>[ae(p(Rc))]),_:1},8,["class","onClick"])):(D(),Le(p(Et),{key:"arrow-down",class:U(p(je)),onClick:$t(Ve=>j(),["stop"])},{default:me(()=>[ae(p(Ll))]),_:1},8,["class","onClick"]))]),_:2},[Me.$slots.prefix?{name:"prefix",fn:me(()=>[Ae(Me.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),p(re)?(D(),Z("div",{key:0,ref_key:"tagWrapper",ref:S,class:U([p(l).e("tags"),p(l).is("validate",!!p(we))])},[Ae(Me.$slots,"tag",{data:N.value,deleteTag:Oe},()=>[(D(!0),Z(xt,null,_n(L.value,Ve=>(D(),Le(p(Sp),{key:Ve.key,type:Me.tagType,size:p(z),effect:Me.tagEffect,hit:Ve.hitState,closable:Ve.closable,"disable-transitions":"",onClose:mt=>Oe(Ve)},{default:me(()=>[Ve.isCollapseTag===!1?(D(),Z("span",{key:0},tt(Ve.text),1)):(D(),Le(p(ri),{key:1,disabled:E.value||!Me.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:Me.effect},{default:me(()=>[ne("span",null,tt(Ve.text),1)]),content:me(()=>[ae(p($a),{"max-height":Me.maxCollapseTagsTooltipHeight},{default:me(()=>[ne("div",{class:U(p(l).e("collapse-tags"))},[(D(!0),Z(xt,null,_n(N.value.slice(Me.maxCollapseTags),(mt,Ue)=>(D(),Z("div",{key:Ue,class:U(p(l).e("collapse-tag"))},[(D(),Le(p(Sp),{key:mt.key,class:"in-tooltip",type:Me.tagType,size:p(z),effect:Me.tagEffect,hit:mt.hitState,closable:mt.closable,"disable-transitions":"",onClose:Ct=>Oe(mt)},{default:me(()=>[ne("span",null,tt(mt.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:1},8,["max-height"])]),_:2},1032,["disabled","effect"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128))]),Me.filterable&&!p(X)?cn((D(),Z("input",{key:0,"onUpdate:modelValue":Ve=>M.value=Ve,type:"text",class:U(p(l).e("search-input")),placeholder:p(ye)?"":p(F),onInput:Ve=>Mt(M.value,Ve),onClick:$t(Ve=>j(!0),["stop"]),onKeydown:cr(St,["delete"]),onCompositionstart:p(v),onCompositionupdate:p(v),onCompositionend:p(v),onFocus:Ot,onBlur:et},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[c_,M.value]]):Pe("v-if",!0)],2)):Pe("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[p(Tc),()=>j(!1),p(ue)]])]),content:me(()=>[Me.$slots.header?(D(),Z("div",{key:0,class:U(p(l).e("header")),onClick:$t(()=>{},["stop"])},[Ae(Me.$slots,"header")],10,["onClick"])):Pe("v-if",!0),cn(ae(p(bz),{ref_key:"cascaderPanelRef",ref:_,modelValue:p(ve),"onUpdate:modelValue":Ve=>yr(ve)?ve.value=Ve:null,options:Me.options,props:r.props,border:!1,"render-label":Me.$slots.default,onExpandChange:_e,onClose:Ve=>Me.$nextTick(()=>j(!1))},{empty:me(()=>[Ae(Me.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[Wn,!T.value]]),Me.filterable?cn((D(),Le(p($a),{key:1,ref_key:"suggestionPanel",ref:w,tag:"ul",class:U(p(l).e("suggestion-panel")),"view-class":p(l).e("suggestion-list"),onKeydown:lt},{default:me(()=>[G.value.length?(D(!0),Z(xt,{key:0},_n(G.value,Ve=>(D(),Z("li",{key:Ve.uid,class:U([p(l).e("suggestion-item"),p(l).is("checked",Ve.checked)]),tabindex:-1,onClick:mt=>ut(Ve)},[Ae(Me.$slots,"suggestion-item",{item:Ve},()=>[ne("span",null,tt(Ve.text),1),Ve.checked?(D(),Le(p(Et),{key:0},{default:me(()=>[ae(p(Pv))]),_:1})):Pe("v-if",!0)])],10,["onClick"]))),128)):Ae(Me.$slots,"empty",{key:1},()=>[ne("li",{class:U(p(l).e("empty-text"))},tt(p(u)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Wn,T.value]]):Pe("v-if",!0),Me.$slots.footer?(D(),Z("div",{key:2,class:U(p(l).e("footer")),onClick:$t(()=>{},["stop"])},[Ae(Me.$slots,"footer")],10,["onClick"])):Pe("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","effect","persistent"]))}});var F_e=at(D_e,[["__file","cascader.vue"]]);const B_e=nn(F_e),U_e=it({checked:Boolean,disabled:Boolean,type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"}}),z_e={"update:checked":t=>nr(t),[xn]:t=>nr(t)},$_e=de({name:"ElCheckTag"}),V_e=de({...$_e,props:U_e,emits:z_e,setup(t,{emit:e}){const n=t,r=Qe("check-tag"),s=R(()=>n.disabled),i=R(()=>[r.b(),r.is("checked",n.checked),r.is("disabled",s.value),r.m(n.type||"primary")]),o=()=>{if(s.value)return;const a=!n.checked;e(xn,a),e("update:checked",a)};return(a,l)=>(D(),Z("span",{class:U(p(i)),onClick:o},[Ae(a.$slots,"default")],2))}});var H_e=at(V_e,[["__file","check-tag.vue"]]);const G_e=nn(H_e),W_e=it({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:Ce([Number,Object]),default:()=>Fr({})},sm:{type:Ce([Number,Object]),default:()=>Fr({})},md:{type:Ce([Number,Object]),default:()=>Fr({})},lg:{type:Ce([Number,Object]),default:()=>Fr({})},xl:{type:Ce([Number,Object]),default:()=>Fr({})}}),_z=Symbol("rowContextKey"),j_e=de({name:"ElCol"}),K_e=de({...j_e,props:W_e,setup(t){const e=t,{gutter:n}=_t(_z,{gutter:R(()=>0)}),r=Qe("col"),s=R(()=>{const o={};return n.value&&(o.paddingLeft=o.paddingRight=`${n.value/2}px`),o}),i=R(()=>{const o=[];return["span","offset","pull","push"].forEach(c=>{const u=e[c];Ft(u)&&(c==="span"?o.push(r.b(`${e[c]}`)):u>0&&o.push(r.b(`${c}-${e[c]}`)))}),["xs","sm","md","lg","xl"].forEach(c=>{Ft(e[c])?o.push(r.b(`${c}-${e[c]}`)):un(e[c])&&Object.entries(e[c]).forEach(([u,d])=>{o.push(u!=="span"?r.b(`${c}-${u}-${d}`):r.b(`${c}-${d}`))})}),n.value&&o.push(r.is("guttered")),[r.b(),o]});return(o,a)=>(D(),Le(mn(o.tag),{class:U(p(i)),style:Pt(p(s))},{default:me(()=>[Ae(o.$slots,"default")]),_:3},8,["class","style"]))}});var q_e=at(K_e,[["__file","col.vue"]]);const Y_e=nn(q_e),E4=t=>Ft(t)||kt(t)||rt(t),X_e=it({accordion:Boolean,modelValue:{type:Ce([Array,String,Number]),default:()=>Fr([])},expandIconPosition:{type:Ce([String]),default:"right"},beforeCollapse:{type:Ce(Function)}}),Z_e={[Qt]:E4,[xn]:E4},wz=Symbol("collapseContextKey"),J_e="ElCollapse",Q_e=(t,e)=>{const n=H(Hs(t.modelValue)),r=o=>{n.value=o;const a=t.accordion?n.value[0]:n.value;e(Qt,a),e(xn,a)},s=o=>{if(t.accordion)r([n.value[0]===o?"":o]);else{const a=[...n.value],l=a.indexOf(o);l>-1?a.splice(l,1):a.push(o),r(a)}},i=async o=>{const{beforeCollapse:a}=t;if(!a){s(o);return}const l=a(o);[th(l),nr(l)].includes(!0)||hs(J_e,"beforeCollapse must return type `Promise<boolean>` or `boolean`"),th(l)?l.then(u=>{u!==!1&&s(o)}).catch(u=>{}):l&&s(o)};return Be(()=>t.modelValue,()=>n.value=Hs(t.modelValue),{deep:!0}),Mn(wz,{activeNames:n,handleItemClick:i}),{activeNames:n,setActiveNames:r}},ewe=t=>{const e=Qe("collapse");return{rootKls:R(()=>[e.b(),e.b(`icon-position-${t.expandIconPosition}`)])}},twe=de({name:"ElCollapse"}),nwe=de({...twe,props:X_e,emits:Z_e,setup(t,{expose:e,emit:n}){const r=t,{activeNames:s,setActiveNames:i}=Q_e(r,n),{rootKls:o}=ewe(r);return e({activeNames:s,setActiveNames:i}),(a,l)=>(D(),Z("div",{class:U(p(o))},[Ae(a.$slots,"default")],2))}});var rwe=at(nwe,[["__file","collapse.vue"]]);const swe=de({name:"ElCollapseTransition"}),iwe=de({...swe,setup(t){const e=Qe("collapse-transition"),n=s=>{s.style.maxHeight="",s.style.overflow=s.dataset.oldOverflow,s.style.paddingTop=s.dataset.oldPaddingTop,s.style.paddingBottom=s.dataset.oldPaddingBottom},r={beforeEnter(s){s.dataset||(s.dataset={}),s.dataset.oldPaddingTop=s.style.paddingTop,s.dataset.oldPaddingBottom=s.style.paddingBottom,s.style.height&&(s.dataset.elExistsHeight=s.style.height),s.style.maxHeight=0,s.style.paddingTop=0,s.style.paddingBottom=0},enter(s){requestAnimationFrame(()=>{s.dataset.oldOverflow=s.style.overflow,s.dataset.elExistsHeight?s.style.maxHeight=s.dataset.elExistsHeight:s.scrollHeight!==0?s.style.maxHeight=`${s.scrollHeight}px`:s.style.maxHeight=0,s.style.paddingTop=s.dataset.oldPaddingTop,s.style.paddingBottom=s.dataset.oldPaddingBottom,s.style.overflow="hidden"})},afterEnter(s){s.style.maxHeight="",s.style.overflow=s.dataset.oldOverflow},enterCancelled(s){n(s)},beforeLeave(s){s.dataset||(s.dataset={}),s.dataset.oldPaddingTop=s.style.paddingTop,s.dataset.oldPaddingBottom=s.style.paddingBottom,s.dataset.oldOverflow=s.style.overflow,s.style.maxHeight=`${s.scrollHeight}px`,s.style.overflow="hidden"},leave(s){s.scrollHeight!==0&&(s.style.maxHeight=0,s.style.paddingTop=0,s.style.paddingBottom=0)},afterLeave(s){n(s)},leaveCancelled(s){n(s)}};return(s,i)=>(D(),Le(Xs,yn({name:p(e).b()},Jue(r)),{default:me(()=>[Ae(s.$slots,"default")]),_:3},16,["name"]))}});var owe=at(iwe,[["__file","collapse-transition.vue"]]);const E_=nn(owe),awe=it({title:{type:String,default:""},name:{type:Ce([String,Number]),default:void 0},icon:{type:or,default:Ai},disabled:Boolean}),lwe=t=>{const e=_t(wz),{namespace:n}=Qe("collapse"),r=H(!1),s=H(!1),i=ZT(),o=R(()=>i.current++),a=R(()=>{var h;return(h=t.name)!=null?h:`${n.value}-id-${i.prefix}-${p(o)}`}),l=R(()=>e==null?void 0:e.activeNames.value.includes(p(a)));return{focusing:r,id:o,isActive:l,handleFocus:()=>{setTimeout(()=>{s.value?s.value=!1:r.value=!0},50)},handleHeaderClick:h=>{if(t.disabled)return;const f=h.target;f!=null&&f.closest("input, textarea, select")||(e==null||e.handleItemClick(p(a)),r.value=!1,s.value=!0)},handleEnterClick:h=>{const f=h.target;f!=null&&f.closest("input, textarea, select")||(h.preventDefault(),e==null||e.handleItemClick(p(a)))}}},cwe=(t,{focusing:e,isActive:n,id:r})=>{const s=Qe("collapse"),i=R(()=>[s.b("item"),s.is("active",p(n)),s.is("disabled",t.disabled)]),o=R(()=>[s.be("item","header"),s.is("active",p(n)),{focusing:p(e)&&!t.disabled}]),a=R(()=>[s.be("item","arrow"),s.is("active",p(n))]),l=R(()=>[s.be("item","title")]),c=R(()=>s.be("item","wrap")),u=R(()=>s.be("item","content")),d=R(()=>s.b(`content-${p(r)}`)),h=R(()=>s.b(`head-${p(r)}`));return{itemTitleKls:l,arrowKls:a,headKls:o,rootKls:i,itemWrapperKls:c,itemContentKls:u,scopedContentId:d,scopedHeadId:h}},uwe=de({name:"ElCollapseItem"}),dwe=de({...uwe,props:awe,setup(t,{expose:e}){const n=t,{focusing:r,id:s,isActive:i,handleFocus:o,handleHeaderClick:a,handleEnterClick:l}=lwe(n),{arrowKls:c,headKls:u,rootKls:d,itemTitleKls:h,itemWrapperKls:f,itemContentKls:m,scopedContentId:v,scopedHeadId:y}=cwe(n,{focusing:r,isActive:i,id:s});return e({isActive:i}),(g,S)=>(D(),Z("div",{class:U(p(d))},[ne("div",{id:p(y),class:U(p(u)),"aria-expanded":p(i),"aria-controls":p(v),"aria-describedby":p(v),tabindex:g.disabled?-1:0,role:"button",onClick:p(a),onKeydown:cr($t(p(l),["stop"]),["space","enter"]),onFocus:p(o),onBlur:_=>r.value=!1},[ne("span",{class:U(p(h))},[Ae(g.$slots,"title",{isActive:p(i)},()=>[rn(tt(g.title),1)])],2),Ae(g.$slots,"icon",{isActive:p(i)},()=>[ae(p(Et),{class:U(p(c))},{default:me(()=>[(D(),Le(mn(g.icon)))]),_:1},8,["class"])])],42,["id","aria-expanded","aria-controls","aria-describedby","tabindex","onClick","onKeydown","onFocus","onBlur"]),ae(p(E_),null,{default:me(()=>[cn(ne("div",{id:p(v),role:"region",class:U(p(f)),"aria-hidden":!p(i),"aria-labelledby":p(y)},[ne("div",{class:U(p(m))},[Ae(g.$slots,"default")],2)],10,["id","aria-hidden","aria-labelledby"]),[[Wn,p(i)]])]),_:3})],2))}});var xz=at(dwe,[["__file","collapse-item.vue"]]);const hwe=nn(rwe,{CollapseItem:xz}),fwe=Br(xz),pwe=it({color:{type:Ce(Object),required:!0},vertical:Boolean});let Lx=!1;function qg(t,e){if(!Vn)return;const n=function(i){var o;(o=e.drag)==null||o.call(e,i)},r=function(i){var o;document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",r),document.onselectstart=null,document.ondragstart=null,Lx=!1,(o=e.end)==null||o.call(e,i)},s=function(i){var o;Lx||(i.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n),document.addEventListener("mouseup",r),document.addEventListener("touchmove",n),document.addEventListener("touchend",r),Lx=!0,(o=e.start)==null||o.call(e,i))};t.addEventListener("mousedown",s),t.addEventListener("touchstart",s,{passive:!1})}const C4=t=>{let e=0,n=t;for(;n;)e+=n.offsetTop,n=n.offsetParent;return e},iE=(t,e)=>Math.abs(C4(t)-C4(e)),hM=t=>{let e,n;return t.type==="touchend"?(n=t.changedTouches[0].clientY,e=t.changedTouches[0].clientX):t.type.startsWith("touch")?(n=t.touches[0].clientY,e=t.touches[0].clientX):(n=t.clientY,e=t.clientX),{clientX:e,clientY:n}},mwe=t=>{const e=tn(),{t:n}=zn(),r=br(),s=br(),i=R(()=>t.color.get("alpha")),o=R(()=>n("el.colorpicker.alphaLabel"));function a(d){var h;d.target!==r.value&&l(d),(h=r.value)==null||h.focus()}function l(d){if(!s.value||!r.value)return;const f=e.vnode.el.getBoundingClientRect(),{clientX:m,clientY:v}=hM(d);if(t.vertical){let y=v-f.top;y=Math.max(r.value.offsetHeight/2,y),y=Math.min(y,f.height-r.value.offsetHeight/2),t.color.set("alpha",Math.round((y-r.value.offsetHeight/2)/(f.height-r.value.offsetHeight)*100))}else{let y=m-f.left;y=Math.max(r.value.offsetWidth/2,y),y=Math.min(y,f.width-r.value.offsetWidth/2),t.color.set("alpha",Math.round((y-r.value.offsetWidth/2)/(f.width-r.value.offsetWidth)*100))}}function c(d){const{code:h,shiftKey:f}=d,m=f?10:1;switch(h){case bt.left:case bt.down:d.preventDefault(),d.stopPropagation(),u(-m);break;case bt.right:case bt.up:d.preventDefault(),d.stopPropagation(),u(m);break}}function u(d){let h=i.value+d;h=h<0?0:h>100?100:h,t.color.set("alpha",h)}return{thumb:r,bar:s,alpha:i,alphaLabel:o,handleDrag:l,handleClick:a,handleKeydown:c}},gwe=(t,{bar:e,thumb:n,handleDrag:r})=>{const s=tn(),i=Qe("color-alpha-slider"),o=H(0),a=H(0),l=H();function c(){if(!n.value||t.vertical)return 0;const S=s.vnode.el,_=t.color.get("alpha");return S?Math.round(_*(S.offsetWidth-n.value.offsetWidth/2)/100):0}function u(){if(!n.value)return 0;const S=s.vnode.el;if(!t.vertical)return 0;const _=t.color.get("alpha");return S?Math.round(_*(S.offsetHeight-n.value.offsetHeight/2)/100):0}function d(){if(t.color&&t.color.value){const{r:S,g:_,b:w}=t.color.toRgb();return`linear-gradient(to right, rgba(${S}, ${_}, ${w}, 0) 0%, rgba(${S}, ${_}, ${w}, 1) 100%)`}return""}function h(){o.value=c(),a.value=u(),l.value=d()}Zt(()=>{if(!e.value||!n.value)return;const S={drag:_=>{r(_)},end:_=>{r(_)}};qg(e.value,S),qg(n.value,S),h()}),Be(()=>t.color.get("alpha"),()=>h()),Be(()=>t.color.value,()=>h());const f=R(()=>[i.b(),i.is("vertical",t.vertical)]),m=R(()=>i.e("bar")),v=R(()=>i.e("thumb")),y=R(()=>({background:l.value})),g=R(()=>({left:qr(o.value),top:qr(a.value)}));return{rootKls:f,barKls:m,barStyle:y,thumbKls:v,thumbStyle:g,update:h}},vwe="ElColorAlphaSlider",ywe=de({name:vwe}),bwe=de({...ywe,props:pwe,setup(t,{expose:e}){const n=t,{alpha:r,alphaLabel:s,bar:i,thumb:o,handleDrag:a,handleClick:l,handleKeydown:c}=mwe(n),{rootKls:u,barKls:d,barStyle:h,thumbKls:f,thumbStyle:m,update:v}=gwe(n,{bar:i,thumb:o,handleDrag:a});return e({update:v,bar:i,thumb:o}),(y,g)=>(D(),Z("div",{class:U(p(u))},[ne("div",{ref_key:"bar",ref:i,class:U(p(d)),style:Pt(p(h)),onClick:p(l)},null,14,["onClick"]),ne("div",{ref_key:"thumb",ref:o,class:U(p(f)),style:Pt(p(m)),"aria-label":p(s),"aria-valuenow":p(r),"aria-orientation":y.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:p(c)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}});var _we=at(bwe,[["__file","alpha-slider.vue"]]);const wwe=de({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(t){const e=Qe("color-hue-slider"),n=tn(),r=H(),s=H(),i=H(0),o=H(0),a=R(()=>t.color.get("hue"));Be(()=>a.value,()=>{h()});function l(f){f.target!==r.value&&c(f)}function c(f){if(!s.value||!r.value)return;const v=n.vnode.el.getBoundingClientRect(),{clientX:y,clientY:g}=hM(f);let S;if(t.vertical){let _=g-v.top;_=Math.min(_,v.height-r.value.offsetHeight/2),_=Math.max(r.value.offsetHeight/2,_),S=Math.round((_-r.value.offsetHeight/2)/(v.height-r.value.offsetHeight)*360)}else{let _=y-v.left;_=Math.min(_,v.width-r.value.offsetWidth/2),_=Math.max(r.value.offsetWidth/2,_),S=Math.round((_-r.value.offsetWidth/2)/(v.width-r.value.offsetWidth)*360)}t.color.set("hue",S)}function u(){if(!r.value)return 0;const f=n.vnode.el;if(t.vertical)return 0;const m=t.color.get("hue");return f?Math.round(m*(f.offsetWidth-r.value.offsetWidth/2)/360):0}function d(){if(!r.value)return 0;const f=n.vnode.el;if(!t.vertical)return 0;const m=t.color.get("hue");return f?Math.round(m*(f.offsetHeight-r.value.offsetHeight/2)/360):0}function h(){i.value=u(),o.value=d()}return Zt(()=>{if(!s.value||!r.value)return;const f={drag:m=>{c(m)},end:m=>{c(m)}};qg(s.value,f),qg(r.value,f),h()}),{bar:s,thumb:r,thumbLeft:i,thumbTop:o,hueValue:a,handleClick:l,update:h,ns:e}}});function xwe(t,e,n,r,s,i){return D(),Z("div",{class:U([t.ns.b(),t.ns.is("vertical",t.vertical)])},[ne("div",{ref:"bar",class:U(t.ns.e("bar")),onClick:t.handleClick},null,10,["onClick"]),ne("div",{ref:"thumb",class:U(t.ns.e("thumb")),style:Pt({left:t.thumbLeft+"px",top:t.thumbTop+"px"})},null,6)],2)}var Swe=at(wwe,[["render",xwe],["__file","hue-slider.vue"]]);const Ewe=it({persistent:{type:Boolean,default:!0},modelValue:{type:Ce(String),default:void 0},id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Es,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:ss.teleported,appendTo:ss.appendTo,predefine:{type:Ce(Array)},validateEvent:{type:Boolean,default:!0},...yh,...hi(["ariaLabel"])}),Cwe={[Qt]:t=>kt(t)||vs(t),[xn]:t=>kt(t)||vs(t),activeChange:t=>kt(t)||vs(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent},Sz=Symbol("colorPickerContextKey");class n1{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this._tiny=new If,this._isValid=!1,this.enableAlpha=!1,this.format="",this.value="";for(const n in e)Kn(e,n)&&(this[n]=e[n]);e.value?this.fromString(e.value):this.doOnChange()}set(e,n){if(arguments.length===1&&typeof e=="object"){for(const r in e)Kn(e,r)&&this.set(r,e[r]);return}this[`_${e}`]=n,this._isValid=!0,this.doOnChange()}get(e){return["hue","saturation","value","alpha"].includes(e)?Math.round(this[`_${e}`]):this[`_${e}`]}toRgb(){return this._isValid?this._tiny.toRgb():{r:255,g:255,b:255,a:0}}fromString(e){const n=new If(e);if(this._isValid=n.isValid,n.isValid){const{h:r,s,v:i,a:o}=n.toHsv();this._hue=r,this._saturation=s*100,this._value=i*100,this._alpha=o*100}else this._hue=0,this._saturation=100,this._value=100,this._alpha=100;this.doOnChange()}compare(e){const n=new If({h:e._hue,s:e._saturation/100,v:e._value/100,a:e._alpha/100});return this._tiny.equals(n)}doOnChange(){const{_hue:e,_saturation:n,_value:r,_alpha:s,format:i,enableAlpha:o}=this;let a=i||(o?"rgb":"hex");i==="hex"&&o&&(a="hex8"),this._tiny=new If({h:e,s:n/100,v:r/100,a:s/100}),this.value=this._isValid?this._tiny.toString(a):""}}const Twe=de({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(t){const e=Qe("color-predefine"),{currentColor:n}=_t(Sz),r=H(i(t.colors,t.color));Be(()=>n.value,o=>{const a=new n1({value:o});r.value.forEach(l=>{l.selected=a.compare(l)})}),ui(()=>{r.value=i(t.colors,t.color)});function s(o){t.color.fromString(t.colors[o])}function i(o,a){return o.map(l=>{const c=new n1({value:l});return c.selected=c.compare(a),c})}return{rgbaColors:r,handleSelect:s,ns:e}}});function Mwe(t,e,n,r,s,i){return D(),Z("div",{class:U(t.ns.b())},[ne("div",{class:U(t.ns.e("colors"))},[(D(!0),Z(xt,null,_n(t.rgbaColors,(o,a)=>(D(),Z("div",{key:t.colors[a],class:U([t.ns.e("color-selector"),t.ns.is("alpha",o.get("alpha")<100),{selected:o.selected}]),onClick:l=>t.handleSelect(a)},[ne("div",{style:Pt({backgroundColor:o.value})},null,4)],10,["onClick"]))),128))],2)],2)}var Awe=at(Twe,[["render",Mwe],["__file","predefine.vue"]]);const kwe=de({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(t){const e=Qe("color-svpanel"),n=tn(),r=H(0),s=H(0),i=H("hsl(0, 100%, 50%)"),o=R(()=>{const c=t.color.get("hue"),u=t.color.get("value");return{hue:c,value:u}});function a(){const c=t.color.get("saturation"),u=t.color.get("value"),d=n.vnode.el,{clientWidth:h,clientHeight:f}=d;s.value=c*h/100,r.value=(100-u)*f/100,i.value=`hsl(${t.color.get("hue")}, 100%, 50%)`}function l(c){const d=n.vnode.el.getBoundingClientRect(),{clientX:h,clientY:f}=hM(c);let m=h-d.left,v=f-d.top;m=Math.max(0,m),m=Math.min(m,d.width),v=Math.max(0,v),v=Math.min(v,d.height),s.value=m,r.value=v,t.color.set({saturation:m/d.width*100,value:100-v/d.height*100})}return Be(()=>o.value,()=>{a()}),Zt(()=>{qg(n.vnode.el,{drag:c=>{l(c)},end:c=>{l(c)}}),a()}),{cursorTop:r,cursorLeft:s,background:i,colorValue:o,handleDrag:l,update:a,ns:e}}});function Iwe(t,e,n,r,s,i){return D(),Z("div",{class:U(t.ns.b()),style:Pt({backgroundColor:t.background})},[ne("div",{class:U(t.ns.e("white"))},null,2),ne("div",{class:U(t.ns.e("black"))},null,2),ne("div",{class:U(t.ns.e("cursor")),style:Pt({top:t.cursorTop+"px",left:t.cursorLeft+"px"})},[ne("div")],6)],6)}var Pwe=at(kwe,[["render",Iwe],["__file","sv-panel.vue"]]);const Rwe=de({name:"ElColorPicker"}),Lwe=de({...Rwe,props:Ewe,emits:Cwe,setup(t,{expose:e,emit:n}){const r=t,{t:s}=zn(),i=Qe("color"),{formItem:o}=fi(),a=ys(),l=pi(),{valueOnClear:c,isEmptyValue:u}=Iv(r,null),{inputId:d,isLabeledByFormItem:h}=la(r,{formItemContext:o}),f=H(),m=H(),v=H(),y=H(),g=H(),S=H(),{isFocused:_,handleFocus:w,handleBlur:E}=Zu(g,{disabled:l,beforeBlur(ue){var j;return(j=y.value)==null?void 0:j.isFocusInsideContent(ue)},afterBlur(){$(!1),q()}});let C=!0;const T=Ln(new n1({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue})),I=H(!1),k=H(!1),M=H(""),L=R(()=>!r.modelValue&&!k.value?"transparent":F(T,r.showAlpha)),N=R(()=>!r.modelValue&&!k.value?"":T.value),G=R(()=>h.value?void 0:r.ariaLabel||s("el.colorpicker.defaultLabel")),V=R(()=>h.value?o==null?void 0:o.labelId:void 0),X=R(()=>[i.b("picker"),i.is("disabled",l.value),i.bm("picker",a.value),i.is("focused",_.value)]);function F(ue,j){const{r:he,g:K,b:Fe,a:Oe}=ue.toRgb();return j?`rgba(${he}, ${K}, ${Fe}, ${Oe})`:`rgb(${he}, ${K}, ${Fe})`}function $(ue){I.value=ue}const O=mo($,100,{leading:!0});function z(){l.value||$(!0)}function re(){O(!1),q()}function q(){Tt(()=>{r.modelValue?T.fromString(r.modelValue):(T.value="",!N.value&&M.value&&(M.value=""),Tt(()=>{k.value=!1}))})}function le(){l.value||(I.value&&q(),O(!I.value))}function fe(){T.fromString(M.value),T.value!==M.value&&(M.value=T.value)}function se(){const ue=u(T.value)?c.value:T.value;n(Qt,ue),n(xn,ue),r.validateEvent&&(o==null||o.validate("change").catch(j=>void 0)),O(!1),Tt(()=>{const j=new n1({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue});T.compare(j)||q()})}function ye(){O(!1),n(Qt,c.value),n(xn,c.value),r.modelValue!==c.value&&r.validateEvent&&(o==null||o.validate("change").catch(ue=>void 0)),q()}function we(){I.value&&(re(),_.value&&je())}function ve(ue){ue.preventDefault(),ue.stopPropagation(),$(!1),q()}function xe(ue){switch(ue.code){case bt.enter:case bt.numpadEnter:case bt.space:ue.preventDefault(),ue.stopPropagation(),z(),S.value.focus();break;case bt.esc:ve(ue);break}}function je(){g.value.focus()}function nt(){g.value.blur()}return Zt(()=>{r.modelValue&&(M.value=N.value)}),Be(()=>r.modelValue,ue=>{ue?ue&&ue!==T.value&&(C=!1,T.fromString(ue)):k.value=!1}),Be(()=>[r.colorFormat,r.showAlpha],()=>{T.enableAlpha=r.showAlpha,T.format=r.colorFormat||T.format,T.doOnChange(),n(Qt,T.value)}),Be(()=>N.value,ue=>{M.value=ue,C&&n("activeChange",ue),C=!0}),Be(()=>T.value,()=>{!r.modelValue&&!k.value&&(k.value=!0)}),Be(()=>I.value,()=>{Tt(()=>{var ue,j,he;(ue=f.value)==null||ue.update(),(j=m.value)==null||j.update(),(he=v.value)==null||he.update()})}),Mn(Sz,{currentColor:N}),e({color:T,show:z,hide:re,focus:je,blur:nt}),(ue,j)=>(D(),Le(p(ri),{ref_key:"popper",ref:y,visible:I.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[p(i).be("picker","panel"),p(i).b("dropdown"),ue.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:ue.teleported,transition:`${p(i).namespace.value}-zoom-in-top`,persistent:ue.persistent,"append-to":ue.appendTo,onHide:he=>$(!1)},{content:me(()=>[cn((D(),Z("div",{onKeydown:cr(ve,["esc"])},[ne("div",{class:U(p(i).be("dropdown","main-wrapper"))},[ae(Swe,{ref_key:"hue",ref:f,class:"hue-slider",color:p(T),vertical:""},null,8,["color"]),ae(Pwe,{ref_key:"sv",ref:m,color:p(T)},null,8,["color"])],2),ue.showAlpha?(D(),Le(_we,{key:0,ref_key:"alpha",ref:v,color:p(T)},null,8,["color"])):Pe("v-if",!0),ue.predefine?(D(),Le(Awe,{key:1,ref:"predefine","enable-alpha":ue.showAlpha,color:p(T),colors:ue.predefine},null,8,["enable-alpha","color","colors"])):Pe("v-if",!0),ne("div",{class:U(p(i).be("dropdown","btns"))},[ne("span",{class:U(p(i).be("dropdown","value"))},[ae(p(Ci),{ref_key:"inputRef",ref:S,modelValue:M.value,"onUpdate:modelValue":he=>M.value=he,"validate-event":!1,size:"small",onChange:fe},null,8,["modelValue","onUpdate:modelValue"])],2),ae(p(Ss),{class:U(p(i).be("dropdown","link-btn")),text:"",size:"small",onClick:ye},{default:me(()=>[rn(tt(p(s)("el.colorpicker.clear")),1)]),_:1},8,["class"]),ae(p(Ss),{plain:"",size:"small",class:U(p(i).be("dropdown","btn")),onClick:se},{default:me(()=>[rn(tt(p(s)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[p(Tc),we,g.value]])]),default:me(()=>[ne("div",yn({id:p(d),ref_key:"triggerRef",ref:g},ue.$attrs,{class:p(X),role:"button","aria-label":p(G),"aria-labelledby":p(V),"aria-description":p(s)("el.colorpicker.description",{color:ue.modelValue||""}),"aria-disabled":p(l),tabindex:p(l)?void 0:ue.tabindex,onKeydown:xe,onFocus:p(w),onBlur:p(E)}),[ne("div",{class:U(p(i).be("picker","trigger")),onClick:le},[ne("span",{class:U([p(i).be("picker","color"),p(i).is("alpha",ue.showAlpha)])},[ne("span",{class:U(p(i).be("picker","color-inner")),style:Pt({backgroundColor:p(L)})},[cn(ae(p(Et),{class:U([p(i).be("picker","icon"),p(i).is("icon-arrow-down")])},{default:me(()=>[ae(p(Ll))]),_:1},8,["class"]),[[Wn,ue.modelValue||k.value]]),cn(ae(p(Et),{class:U([p(i).be("picker","empty"),p(i).is("icon-close")])},{default:me(()=>[ae(p(ra))]),_:1},8,["class"]),[[Wn,!ue.modelValue&&!k.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","persistent","append-to","onHide"]))}});var Owe=at(Lwe,[["__file","color-picker.vue"]]);const Nwe=nn(Owe),Dwe=it({a11y:{type:Boolean,default:!0},locale:{type:Ce(Object)},size:Es,button:{type:Ce(Object)},card:{type:Ce(Object)},dialog:{type:Ce(Object)},link:{type:Ce(Object)},experimentalFeatures:{type:Ce(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:Ce(Object)},zIndex:Number,namespace:{type:String,default:"el"},...yh}),Ao={},Fwe=de({name:"ElConfigProvider",props:Dwe,setup(t,{slots:e}){const n=GT(t);return Be(()=>t.message,r=>{var s,i;Object.assign(Ao,(i=(s=n==null?void 0:n.value)==null?void 0:s.message)!=null?i:{},r??{})},{immediate:!0,deep:!0}),()=>Ae(e,"default",{config:n==null?void 0:n.value})}}),Bwe=nn(Fwe),Uwe=de({name:"ElContainer"}),zwe=de({...Uwe,props:{direction:{type:String}},setup(t){const e=t,n=bs(),r=Qe("container"),s=R(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:n&&n.default?n.default().some(o=>{const a=o.type.name;return a==="ElHeader"||a==="ElFooter"}):!1);return(i,o)=>(D(),Z("section",{class:U([p(r).b(),p(r).is("vertical",p(s))])},[Ae(i.$slots,"default")],2))}});var $we=at(zwe,[["__file","container.vue"]]);const Vwe=de({name:"ElAside"}),Hwe=de({...Vwe,props:{width:{type:String,default:null}},setup(t){const e=t,n=Qe("aside"),r=R(()=>e.width?n.cssVarBlock({width:e.width}):{});return(s,i)=>(D(),Z("aside",{class:U(p(n).b()),style:Pt(p(r))},[Ae(s.$slots,"default")],6))}});var Ez=at(Hwe,[["__file","aside.vue"]]);const Gwe=de({name:"ElFooter"}),Wwe=de({...Gwe,props:{height:{type:String,default:null}},setup(t){const e=t,n=Qe("footer"),r=R(()=>e.height?n.cssVarBlock({height:e.height}):{});return(s,i)=>(D(),Z("footer",{class:U(p(n).b()),style:Pt(p(r))},[Ae(s.$slots,"default")],6))}});var Cz=at(Wwe,[["__file","footer.vue"]]);const jwe=de({name:"ElHeader"}),Kwe=de({...jwe,props:{height:{type:String,default:null}},setup(t){const e=t,n=Qe("header"),r=R(()=>e.height?n.cssVarBlock({height:e.height}):{});return(s,i)=>(D(),Z("header",{class:U(p(n).b()),style:Pt(p(r))},[Ae(s.$slots,"default")],6))}});var Tz=at(Kwe,[["__file","header.vue"]]);const qwe=de({name:"ElMain"}),Ywe=de({...qwe,setup(t){const e=Qe("main");return(n,r)=>(D(),Z("main",{class:U(p(e).b())},[Ae(n.$slots,"default")],2))}});var Mz=at(Ywe,[["__file","main.vue"]]);const Xwe=nn($we,{Aside:Ez,Footer:Cz,Header:Tz,Main:Mz}),Zwe=Br(Ez),Jwe=Br(Cz),Qwe=Br(Tz),exe=Br(Mz);var Az={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Oc,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,s=/\d/,i=/\d\d/,o=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,l={},c=function(y){return(y=+y)+(y>68?1900:2e3)},u=function(y){return function(g){this[y]=+g}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(y){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var S=g.match(/([+-]|\d\d)/g),_=60*S[1]+(+S[2]||0);return _===0?0:S[0]==="+"?-_:_}(y)}],h=function(y){var g=l[y];return g&&(g.indexOf?g:g.s.concat(g.f))},f=function(y,g){var S,_=l.meridiem;if(_){for(var w=1;w<=24;w+=1)if(y.indexOf(_(w,0,g))>-1){S=w>12;break}}else S=y===(g?"pm":"PM");return S},m={A:[a,function(y){this.afternoon=f(y,!1)}],a:[a,function(y){this.afternoon=f(y,!0)}],Q:[s,function(y){this.month=3*(y-1)+1}],S:[s,function(y){this.milliseconds=100*+y}],SS:[i,function(y){this.milliseconds=10*+y}],SSS:[/\d{3}/,function(y){this.milliseconds=+y}],s:[o,u("seconds")],ss:[o,u("seconds")],m:[o,u("minutes")],mm:[o,u("minutes")],H:[o,u("hours")],h:[o,u("hours")],HH:[o,u("hours")],hh:[o,u("hours")],D:[o,u("day")],DD:[i,u("day")],Do:[a,function(y){var g=l.ordinal,S=y.match(/\d+/);if(this.day=S[0],g)for(var _=1;_<=31;_+=1)g(_).replace(/\[|\]/g,"")===y&&(this.day=_)}],w:[o,u("week")],ww:[i,u("week")],M:[o,u("month")],MM:[i,u("month")],MMM:[a,function(y){var g=h("months"),S=(h("monthsShort")||g.map(function(_){return _.slice(0,3)})).indexOf(y)+1;if(S<1)throw new Error;this.month=S%12||S}],MMMM:[a,function(y){var g=h("months").indexOf(y)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,u("year")],YY:[i,function(y){this.year=c(y)}],YYYY:[/\d{4}/,u("year")],Z:d,ZZ:d};function v(y){var g,S;g=y,S=l&&l.formats;for(var _=(y=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(M,L,N){var G=N&&N.toUpperCase();return L||S[N]||n[N]||S[G].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(V,X,F){return X||F.slice(1)})})).match(r),w=_.length,E=0;E<w;E+=1){var C=_[E],T=m[C],I=T&&T[0],k=T&&T[1];_[E]=k?{regex:I,parser:k}:C.replace(/^\[|\]$/g,"")}return function(M){for(var L={},N=0,G=0;N<w;N+=1){var V=_[N];if(typeof V=="string")G+=V.length;else{var X=V.regex,F=V.parser,$=M.slice(G),O=X.exec($)[0];F.call(L,O),M=M.replace(O,"")}}return function(z){var re=z.afternoon;if(re!==void 0){var q=z.hours;re?q<12&&(z.hours+=12):q===12&&(z.hours=0),delete z.afternoon}}(L),L}}return function(y,g,S){S.p.customParseFormat=!0,y&&y.parseTwoDigitYear&&(c=y.parseTwoDigitYear);var _=g.prototype,w=_.parse;_.parse=function(E){var C=E.date,T=E.utc,I=E.args;this.$u=T;var k=I[1];if(typeof k=="string"){var M=I[2]===!0,L=I[3]===!0,N=M||L,G=I[2];L&&(G=I[2]),l=this.$locale(),!M&&G&&(l=S.Ls[G]),this.$d=function($,O,z,re){try{if(["x","X"].indexOf(O)>-1)return new Date((O==="X"?1e3:1)*$);var q=v(O)($),le=q.year,fe=q.month,se=q.day,ye=q.hours,we=q.minutes,ve=q.seconds,xe=q.milliseconds,je=q.zone,nt=q.week,ue=new Date,j=se||(le||fe?1:ue.getDate()),he=le||ue.getFullYear(),K=0;le&&!fe||(K=fe>0?fe-1:ue.getMonth());var Fe,Oe=ye||0,Re=we||0,te=ve||0,oe=xe||0;return je?new Date(Date.UTC(he,K,j,Oe,Re,te,oe+60*je.offset*1e3)):z?new Date(Date.UTC(he,K,j,Oe,Re,te,oe)):(Fe=new Date(he,K,j,Oe,Re,te,oe),nt&&(Fe=re(Fe).week(nt).toDate()),Fe)}catch{return new Date("")}}(C,k,T,S),this.init(),G&&G!==!0&&(this.$L=this.locale(G).$L),N&&C!=this.format(k)&&(this.$d=new Date("")),l={}}else if(k instanceof Array)for(var V=k.length,X=1;X<=V;X+=1){I[1]=k[X-1];var F=S.apply(this,I);if(F.isValid()){this.$d=F.$d,this.$L=F.$L,this.init();break}X===V&&(this.$d=new Date(""))}else w.call(this,E)}}})})(Az);var txe=Az.exports;const fM=Nc(txe);var kz={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Oc,function(){return function(n,r){var s=r.prototype,i=s.format;s.format=function(o){var a=this,l=this.$locale();if(!this.isValid())return i.bind(this)(o);var c=this.$utils(),u=(o||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(d){switch(d){case"Q":return Math.ceil((a.$M+1)/3);case"Do":return l.ordinal(a.$D);case"gggg":return a.weekYear();case"GGGG":return a.isoWeekYear();case"wo":return l.ordinal(a.week(),"W");case"w":case"ww":return c.s(a.week(),d==="w"?1:2,"0");case"W":case"WW":return c.s(a.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return c.s(String(a.$H===0?24:a.$H),d==="k"?1:2,"0");case"X":return Math.floor(a.$d.getTime()/1e3);case"x":return a.$d.getTime();case"z":return"["+a.offsetName()+"]";case"zzz":return"["+a.offsetName("long")+"]";default:return d}});return i.bind(this)(u)}}})})(kz);var nxe=kz.exports;const rxe=Nc(nxe);var Iz={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Oc,function(){var n="week",r="year";return function(s,i,o){var a=i.prototype;a.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var c=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var u=o(this).startOf(r).add(1,r).date(c),d=o(this).endOf(n);if(u.isBefore(d))return 1}var h=o(this).startOf(r).date(c).startOf(n).subtract(1,"millisecond"),f=this.diff(h,n,!0);return f<0?o(this).startOf("week").week():Math.ceil(f)},a.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(Iz);var sxe=Iz.exports;const ixe=Nc(sxe);var Pz={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Oc,function(){return function(n,r){r.prototype.weekYear=function(){var s=this.month(),i=this.week(),o=this.year();return i===1&&s===11?o+1:s===0&&i>=52?o-1:o}}})})(Pz);var oxe=Pz.exports;const axe=Nc(oxe);var Rz={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Oc,function(){return function(n,r,s){r.prototype.dayOfYear=function(i){var o=Math.round((s(this).startOf("day")-s(this).startOf("year"))/864e5)+1;return i==null?o:this.add(i-o,"day")}}})})(Rz);var lxe=Rz.exports;const cxe=Nc(lxe);var Lz={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Oc,function(){return function(n,r){r.prototype.isSameOrAfter=function(s,i){return this.isSame(s,i)||this.isAfter(s,i)}}})})(Lz);var uxe=Lz.exports;const dxe=Nc(uxe);var Oz={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Oc,function(){return function(n,r){r.prototype.isSameOrBefore=function(s,i){return this.isSame(s,i)||this.isBefore(s,i)}}})})(Oz);var hxe=Oz.exports;const fxe=Nc(hxe),T4=["hours","minutes","seconds"],Dc="EP_PICKER_BASE",pM="ElPopperOptions",r1="HH:mm:ss",Ef="YYYY-MM-DD",pxe={date:Ef,dates:Ef,week:"gggg[w]ww",year:"YYYY",years:"YYYY",month:"YYYY-MM",months:"YYYY-MM",datetime:`${Ef} ${r1}`,monthrange:"YYYY-MM",yearrange:"YYYY",daterange:Ef,datetimerange:`${Ef} ${r1}`},Nz=it({disabledHours:{type:Ce(Function)},disabledMinutes:{type:Ce(Function)},disabledSeconds:{type:Ce(Function)}}),Dz=it({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),mM=it({id:{type:Ce([Array,String])},name:{type:Ce([Array,String])},popperClass:{type:String,default:""},format:String,valueFormat:String,dateFormat:String,timeFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:Ce([String,Object]),default:Rc},editable:{type:Boolean,default:!0},prefixIcon:{type:Ce([String,Object]),default:""},size:Es,readonly:Boolean,disabled:Boolean,placeholder:{type:String,default:""},popperOptions:{type:Ce(Object),default:()=>({})},modelValue:{type:Ce([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:Ce([Date,Array])},defaultTime:{type:Ce([Date,Array])},isRange:Boolean,...Nz,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:Boolean,tabindex:{type:Ce([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean,placement:{type:Ce(String),values:Lc,default:"bottom"},fallbackPlacements:{type:Ce(Array),default:["bottom","top","right","left"]},...yh,...hi(["ariaLabel"]),showNow:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!0},showWeekNumber:Boolean}),mxe=it({id:{type:Ce(Array)},name:{type:Ce(Array)},modelValue:{type:Ce([Array,String])},startPlaceholder:String,endPlaceholder:String,disabled:Boolean}),gxe=de({name:"PickerRangeTrigger",inheritAttrs:!1}),vxe=de({...gxe,props:mxe,emits:["mouseenter","mouseleave","click","touchstart","focus","blur","startInput","endInput","startChange","endChange"],setup(t,{expose:e,emit:n}){const r=t,s=v_(),i=Qe("date"),o=Qe("range"),a=H(),l=H(),{wrapperRef:c,isFocused:u}=Zu(a,{disabled:R(()=>r.disabled)}),d=E=>{n("click",E)},h=E=>{n("mouseenter",E)},f=E=>{n("mouseleave",E)},m=E=>{n("touchstart",E)},v=E=>{n("startInput",E)},y=E=>{n("endInput",E)},g=E=>{n("startChange",E)},S=E=>{n("endChange",E)};return e({focus:()=>{var E;(E=a.value)==null||E.focus()},blur:()=>{var E,C;(E=a.value)==null||E.blur(),(C=l.value)==null||C.blur()}}),(E,C)=>(D(),Z("div",{ref_key:"wrapperRef",ref:c,class:U([p(i).is("active",p(u)),E.$attrs.class]),style:Pt(E.$attrs.style),onClick:d,onMouseenter:h,onMouseleave:f,onTouchstartPassive:m},[Ae(E.$slots,"prefix"),ne("input",yn(p(s),{id:E.id&&E.id[0],ref_key:"inputRef",ref:a,name:E.name&&E.name[0],placeholder:E.startPlaceholder,value:E.modelValue&&E.modelValue[0],class:p(o).b("input"),disabled:E.disabled,onInput:v,onChange:g}),null,16,["id","name","placeholder","value","disabled"]),Ae(E.$slots,"range-separator"),ne("input",yn(p(s),{id:E.id&&E.id[1],ref_key:"endInputRef",ref:l,name:E.name&&E.name[1],placeholder:E.endPlaceholder,value:E.modelValue&&E.modelValue[1],class:p(o).b("input"),disabled:E.disabled,onInput:y,onChange:S}),null,16,["id","name","placeholder","value","disabled"]),Ae(E.$slots,"suffix")],38))}});var yxe=at(vxe,[["__file","picker-range-trigger.vue"]]);const bxe=de({name:"Picker"}),_xe=de({...bxe,props:mM,emits:[Qt,xn,"focus","blur","clear","calendar-change","panel-change","visible-change","keydown"],setup(t,{expose:e,emit:n}){const r=t,s=Pc(),{lang:i}=zn(),o=Qe("date"),a=Qe("input"),l=Qe("range"),{form:c,formItem:u}=fi(),d=_t(pM,{}),{valueOnClear:h}=Iv(r,null),f=H(),m=H(),v=H(!1),y=H(!1),g=H(null);let S=!1;const _=R(()=>r.disabled||!!(c!=null&&c.disabled)),{isFocused:w,handleFocus:E,handleBlur:C}=Zu(m,{disabled:_,beforeFocus(){return r.readonly},afterFocus(){v.value=!0},beforeBlur(be){var Ve;return!S&&((Ve=f.value)==null?void 0:Ve.isFocusInsideContent(be))},afterBlur(){Ee(),v.value=!1,S=!1,r.validateEvent&&(u==null||u.validate("blur").catch(be=>void 0))}}),T=R(()=>[o.b("editor"),o.bm("editor",r.type),a.e("wrapper"),o.is("disabled",_.value),o.is("active",v.value),l.b("editor"),Oe?l.bm("editor",Oe.value):"",s.class]),I=R(()=>[a.e("icon"),l.e("close-icon"),xe.value?"":l.e("close-icon--hidden")]);Be(v,be=>{be?Tt(()=>{be&&(g.value=r.modelValue)}):(oe.value=null,Tt(()=>{k(r.modelValue)}))});const k=(be,Ve)=>{(Ve||!f4(be,g.value))&&(n(xn,be),Ve&&(g.value=be),r.validateEvent&&(u==null||u.validate("change").catch(mt=>void 0)))},M=be=>{if(!f4(r.modelValue,be)){let Ve;rt(be)?Ve=be.map(mt=>m4(mt,r.valueFormat,i.value)):be&&(Ve=m4(be,r.valueFormat,i.value)),n(Qt,be&&Ve,i.value)}},L=be=>{n("keydown",be)},N=R(()=>m.value?Array.from(m.value.$el.querySelectorAll("input")):[]),G=(be,Ve,mt)=>{const Ue=N.value;Ue.length&&(!mt||mt==="min"?(Ue[0].setSelectionRange(be,Ve),Ue[0].focus()):mt==="max"&&(Ue[1].setSelectionRange(be,Ve),Ue[1].focus()))},V=(be="",Ve=!1)=>{v.value=Ve;let mt;rt(be)?mt=be.map(Ue=>Ue.toDate()):mt=be&&be.toDate(),oe.value=null,M(mt)},X=()=>{y.value=!0},F=()=>{n("visible-change",!0)},$=()=>{y.value=!1,v.value=!1,n("visible-change",!1)},O=()=>{v.value=!0},z=()=>{v.value=!1},re=R(()=>{var be;let Ve;if(nt.value?Ot.value.getDefaultValue&&(Ve=Ot.value.getDefaultValue()):rt(r.modelValue)?Ve=r.modelValue.map(mt=>p4(mt,r.valueFormat,i.value)):Ve=p4((be=r.modelValue)!=null?be:"",r.valueFormat,i.value),Ot.value.getRangeAvailableTime){const mt=Ot.value.getRangeAvailableTime(Ve);_s(mt,Ve)||(Ve=mt,nt.value||M(_y(Ve)))}return rt(Ve)&&Ve.some(mt=>!mt)&&(Ve=[]),Ve}),q=R(()=>{if(!Ot.value.panelReady)return"";const be=Q(re.value);return rt(oe.value)?[oe.value[0]||be&&be[0]||"",oe.value[1]||be&&be[1]||""]:oe.value!==null?oe.value:!fe.value&&nt.value||!v.value&&nt.value?"":be?se.value||ye.value||we.value?be.join(", "):be:""}),le=R(()=>r.type.includes("time")),fe=R(()=>r.type.startsWith("time")),se=R(()=>r.type==="dates"),ye=R(()=>r.type==="months"),we=R(()=>r.type==="years"),ve=R(()=>r.prefixIcon||(le.value?cU:Qme)),xe=H(!1),je=be=>{r.readonly||_.value||(xe.value&&(be.stopPropagation(),Ot.value.handleClear?Ot.value.handleClear():M(h.value),k(h.value,!0),xe.value=!1,$()),n("clear"))},nt=R(()=>{const{modelValue:be}=r;return!be||rt(be)&&!be.filter(Boolean).length}),ue=async be=>{var Ve;r.readonly||_.value||(((Ve=be.target)==null?void 0:Ve.tagName)!=="INPUT"||w.value)&&(v.value=!0)},j=()=>{r.readonly||_.value||!nt.value&&r.clearable&&(xe.value=!0)},he=()=>{xe.value=!1},K=be=>{var Ve;r.readonly||_.value||(((Ve=be.touches[0].target)==null?void 0:Ve.tagName)!=="INPUT"||w.value)&&(v.value=!0)},Fe=R(()=>r.type.includes("range")),Oe=ys(),Re=R(()=>{var be,Ve;return(Ve=(be=p(f))==null?void 0:be.popperRef)==null?void 0:Ve.contentRef}),te=VT(m,be=>{const Ve=p(Re),mt=Ps(m);Ve&&(be.target===Ve||be.composedPath().includes(Ve))||be.target===mt||mt&&be.composedPath().includes(mt)||(v.value=!1)});Xn(()=>{te==null||te()});const oe=H(null),Ee=()=>{if(oe.value){const be=J(q.value);be&&_e(be)&&(M(_y(be)),oe.value=null)}oe.value===""&&(M(h.value),k(h.value,!0),oe.value=null)},J=be=>be?Ot.value.parseUserInput(be):null,Q=be=>be?Ot.value.formatToString(be):null,_e=be=>Ot.value.isValidValue(be),ie=async be=>{if(r.readonly||_.value)return;const{code:Ve}=be;if(L(be),Ve===bt.esc){v.value===!0&&(v.value=!1,be.preventDefault(),be.stopPropagation());return}if(Ve===bt.down&&(Ot.value.handleFocusPicker&&(be.preventDefault(),be.stopPropagation()),v.value===!1&&(v.value=!0,await Tt()),Ot.value.handleFocusPicker)){Ot.value.handleFocusPicker();return}if(Ve===bt.tab){S=!0;return}if(Ve===bt.enter||Ve===bt.numpadEnter){(oe.value===null||oe.value===""||_e(J(q.value)))&&(Ee(),v.value=!1),be.stopPropagation();return}if(oe.value){be.stopPropagation();return}Ot.value.handleKeydownInput&&Ot.value.handleKeydownInput(be)},Te=be=>{oe.value=be,v.value||(v.value=!0)},We=be=>{const Ve=be.target;oe.value?oe.value=[Ve.value,oe.value[1]]:oe.value=[Ve.value,null]},ut=be=>{const Ve=be.target;oe.value?oe.value=[oe.value[0],Ve.value]:oe.value=[null,Ve.value]},lt=()=>{var be;const Ve=oe.value,mt=J(Ve&&Ve[0]),Ue=p(re);if(mt&&mt.isValid()){oe.value=[Q(mt),((be=q.value)==null?void 0:be[1])||null];const Ct=[mt,Ue&&(Ue[1]||null)];_e(Ct)&&(M(_y(Ct)),oe.value=null)}},St=()=>{var be;const Ve=p(oe),mt=J(Ve&&Ve[1]),Ue=p(re);if(mt&&mt.isValid()){oe.value=[((be=p(q))==null?void 0:be[0])||null,Q(mt)];const Ct=[Ue&&Ue[0],mt];_e(Ct)&&(M(_y(Ct)),oe.value=null)}},Ot=H({}),et=be=>{Ot.value[be[0]]=be[1],Ot.value.panelReady=!0},ht=be=>{n("calendar-change",be)},Mt=(be,Ve,mt)=>{n("panel-change",be,Ve,mt)},ze=()=>{var be;(be=m.value)==null||be.focus()},Me=()=>{var be;(be=m.value)==null||be.blur()};return Mn(Dc,{props:r}),e({focus:ze,blur:Me,handleOpen:O,handleClose:z,onPick:V}),(be,Ve)=>(D(),Le(p(ri),yn({ref_key:"refPopper",ref:f,visible:v.value,effect:"light",pure:"",trigger:"click"},be.$attrs,{role:"dialog",teleported:"",transition:`${p(o).namespace.value}-zoom-in-top`,"popper-class":[`${p(o).namespace.value}-picker__popper`,be.popperClass],"popper-options":p(d),"fallback-placements":be.fallbackPlacements,"gpu-acceleration":!1,placement:be.placement,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:X,onShow:F,onHide:$}),{default:me(()=>[p(Fe)?(D(),Le(yxe,{key:1,id:be.id,ref_key:"inputRef",ref:m,"model-value":p(q),name:be.name,disabled:p(_),readonly:!be.editable||be.readonly,"start-placeholder":be.startPlaceholder,"end-placeholder":be.endPlaceholder,class:U(p(T)),style:Pt(be.$attrs.style),"aria-label":be.ariaLabel,tabindex:be.tabindex,autocomplete:"off",role:"combobox",onClick:ue,onFocus:p(E),onBlur:p(C),onStartInput:We,onStartChange:lt,onEndInput:ut,onEndChange:St,onMousedown:ue,onMouseenter:j,onMouseleave:he,onTouchstartPassive:K,onKeydown:ie},{prefix:me(()=>[p(ve)?(D(),Le(p(Et),{key:0,class:U([p(a).e("icon"),p(l).e("icon")])},{default:me(()=>[(D(),Le(mn(p(ve))))]),_:1},8,["class"])):Pe("v-if",!0)]),"range-separator":me(()=>[Ae(be.$slots,"range-separator",{},()=>[ne("span",{class:U(p(l).b("separator"))},tt(be.rangeSeparator),3)])]),suffix:me(()=>[be.clearIcon?(D(),Le(p(Et),{key:0,class:U(p(I)),onMousedown:$t(p(er),["prevent"]),onClick:je},{default:me(()=>[(D(),Le(mn(be.clearIcon)))]),_:1},8,["class","onMousedown"])):Pe("v-if",!0)]),_:3},8,["id","model-value","name","disabled","readonly","start-placeholder","end-placeholder","class","style","aria-label","tabindex","onFocus","onBlur"])):(D(),Le(p(Ci),{key:0,id:be.id,ref_key:"inputRef",ref:m,"container-role":"combobox","model-value":p(q),name:be.name,size:p(Oe),disabled:p(_),placeholder:be.placeholder,class:U([p(o).b("editor"),p(o).bm("editor",be.type),be.$attrs.class]),style:Pt(be.$attrs.style),readonly:!be.editable||be.readonly||p(se)||p(ye)||p(we)||be.type==="week","aria-label":be.ariaLabel,tabindex:be.tabindex,"validate-event":!1,onInput:Te,onFocus:p(E),onBlur:p(C),onKeydown:ie,onChange:Ee,onMousedown:ue,onMouseenter:j,onMouseleave:he,onTouchstartPassive:K,onClick:$t(()=>{},["stop"])},{prefix:me(()=>[p(ve)?(D(),Le(p(Et),{key:0,class:U(p(a).e("icon")),onMousedown:$t(ue,["prevent"]),onTouchstartPassive:K},{default:me(()=>[(D(),Le(mn(p(ve))))]),_:1},8,["class","onMousedown"])):Pe("v-if",!0)]),suffix:me(()=>[xe.value&&be.clearIcon?(D(),Le(p(Et),{key:0,class:U(`${p(a).e("icon")} clear-icon`),onMousedown:$t(p(er),["prevent"]),onClick:je},{default:me(()=>[(D(),Le(mn(be.clearIcon)))]),_:1},8,["class","onMousedown"])):Pe("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","aria-label","tabindex","onFocus","onBlur","onClick"]))]),content:me(()=>[Ae(be.$slots,"default",{visible:v.value,actualVisible:y.value,parsedValue:p(re),format:be.format,dateFormat:be.dateFormat,timeFormat:be.timeFormat,unlinkPanels:be.unlinkPanels,type:be.type,defaultValue:be.defaultValue,showNow:be.showNow,showFooter:be.showFooter,showWeekNumber:be.showWeekNumber,onPick:V,onSelectRange:G,onSetPickerOption:et,onCalendarChange:ht,onPanelChange:Mt,onMousedown:$t(()=>{},["stop"])})]),_:3},16,["visible","transition","popper-class","popper-options","fallback-placements","placement"]))}});var Fz=at(_xe,[["__file","picker.vue"]]);const wxe=it({...Dz,datetimeRole:String,parsedValue:{type:Ce(Object)}}),Bz=({getAvailableHours:t,getAvailableMinutes:e,getAvailableSeconds:n})=>{const r=(o,a,l,c)=>{const u={hour:t,minute:e,second:n};let d=o;return["hour","minute","second"].forEach(h=>{if(u[h]){let f;const m=u[h];switch(h){case"minute":{f=m(d.hour(),a,c);break}case"second":{f=m(d.hour(),d.minute(),a,c);break}default:{f=m(a,c);break}}if(f!=null&&f.length&&!f.includes(d[h]())){const v=l?0:f.length-1;d=d[h](f[v])}}}),d},s={};return{timePickerOptions:s,getAvailableTime:r,onSetOption:([o,a])=>{s[o]=a}}},Ox=t=>{const e=(r,s)=>r||s,n=r=>r!==!0;return t.map(e).filter(n)},Uz=(t,e,n)=>({getHoursList:(o,a)=>Px(24,t&&(()=>t==null?void 0:t(o,a))),getMinutesList:(o,a,l)=>Px(60,e&&(()=>e==null?void 0:e(o,a,l))),getSecondsList:(o,a,l,c)=>Px(60,n&&(()=>n==null?void 0:n(o,a,l,c)))}),zz=(t,e,n)=>{const{getHoursList:r,getMinutesList:s,getSecondsList:i}=Uz(t,e,n);return{getAvailableHours:(c,u)=>Ox(r(c,u)),getAvailableMinutes:(c,u,d)=>Ox(s(c,u,d)),getAvailableSeconds:(c,u,d,h)=>Ox(i(c,u,d,h))}},$z=t=>{const e=H(t.parsedValue);return Be(()=>t.visible,n=>{n||(e.value=t.parsedValue)}),e},xxe=it({role:{type:String,required:!0},spinnerDate:{type:Ce(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:Ce(String),default:""},...Nz}),Sxe=100,Exe=600,s1={beforeMount(t,e){const n=e.value,{interval:r=Sxe,delay:s=Exe}=Lt(n)?{}:n;let i,o;const a=()=>Lt(n)?n():n.handler(),l=()=>{o&&(clearTimeout(o),o=void 0),i&&(clearInterval(i),i=void 0)};t.addEventListener("mousedown",c=>{c.button===0&&(l(),a(),document.addEventListener("mouseup",()=>l(),{once:!0}),o=setTimeout(()=>{i=setInterval(()=>{a()},r)},s))})}},Cxe=de({__name:"basic-time-spinner",props:xxe,emits:[xn,"select-range","set-option"],setup(t,{emit:e}){const n=t,r=_t(Dc),{isRange:s,format:i}=r.props,o=Qe("time"),{getHoursList:a,getMinutesList:l,getSecondsList:c}=Uz(n.disabledHours,n.disabledMinutes,n.disabledSeconds);let u=!1;const d=H(),h=H(),f=H(),m=H(),v={hours:h,minutes:f,seconds:m},y=R(()=>n.showSeconds?T4:T4.slice(0,2)),g=R(()=>{const{spinnerDate:le}=n,fe=le.hour(),se=le.minute(),ye=le.second();return{hours:fe,minutes:se,seconds:ye}}),S=R(()=>{const{hours:le,minutes:fe}=p(g),{role:se,spinnerDate:ye}=n,we=s?void 0:ye;return{hours:a(se,we),minutes:l(le,se,we),seconds:c(le,fe,se,we)}}),_=R(()=>{const{hours:le,minutes:fe,seconds:se}=p(g);return{hours:Ix(le,23),minutes:Ix(fe,59),seconds:Ix(se,59)}}),w=mo(le=>{u=!1,T(le)},200),E=le=>{if(!!!n.amPmMode)return"";const se=n.amPmMode==="A";let ye=le<12?" am":" pm";return se&&(ye=ye.toUpperCase()),ye},C=le=>{let fe=[0,0];const se=i||r1,ye=se.indexOf("HH"),we=se.indexOf("mm"),ve=se.indexOf("ss");switch(le){case"hours":ye!==-1&&(fe=[ye,ye+2]);break;case"minutes":we!==-1&&(fe=[we,we+2]);break;case"seconds":ve!==-1&&(fe=[ve,ve+2]);break}const[xe,je]=fe;e("select-range",xe,je),d.value=le},T=le=>{M(le,p(g)[le])},I=()=>{T("hours"),T("minutes"),T("seconds")},k=le=>le.querySelector(`.${o.namespace.value}-scrollbar__wrap`),M=(le,fe)=>{if(n.arrowControl)return;const se=p(v[le]);se&&se.$el&&(k(se.$el).scrollTop=Math.max(0,fe*L(le)))},L=le=>{const fe=p(v[le]),se=fe==null?void 0:fe.$el.querySelector("li");return se&&Number.parseFloat(rc(se,"height"))||0},N=()=>{V(1)},G=()=>{V(-1)},V=le=>{d.value||C("hours");const fe=d.value,se=p(g)[fe],ye=d.value==="hours"?24:60,we=X(fe,se,le,ye);F(fe,we),M(fe,we),Tt(()=>C(fe))},X=(le,fe,se,ye)=>{let we=(fe+se+ye)%ye;const ve=p(S)[le];for(;ve[we]&&we!==fe;)we=(we+se+ye)%ye;return we},F=(le,fe)=>{if(p(S)[le][fe])return;const{hours:we,minutes:ve,seconds:xe}=p(g);let je;switch(le){case"hours":je=n.spinnerDate.hour(fe).minute(ve).second(xe);break;case"minutes":je=n.spinnerDate.hour(we).minute(fe).second(xe);break;case"seconds":je=n.spinnerDate.hour(we).minute(ve).second(fe);break}e(xn,je)},$=(le,{value:fe,disabled:se})=>{se||(F(le,fe),C(le),M(le,fe))},O=le=>{const fe=p(v[le]);if(!fe)return;u=!0,w(le);const se=Math.min(Math.round((k(fe.$el).scrollTop-(z(le)*.5-10)/L(le)+3)/L(le)),le==="hours"?23:59);F(le,se)},z=le=>p(v[le]).$el.offsetHeight,re=()=>{const le=fe=>{const se=p(v[fe]);se&&se.$el&&(k(se.$el).onscroll=()=>{O(fe)})};le("hours"),le("minutes"),le("seconds")};Zt(()=>{Tt(()=>{!n.arrowControl&&re(),I(),n.role==="start"&&C("hours")})});const q=(le,fe)=>{v[fe].value=le??void 0};return e("set-option",[`${n.role}_scrollDown`,V]),e("set-option",[`${n.role}_emitSelectRange`,C]),Be(()=>n.spinnerDate,()=>{u||I()}),(le,fe)=>(D(),Z("div",{class:U([p(o).b("spinner"),{"has-seconds":le.showSeconds}])},[le.arrowControl?Pe("v-if",!0):(D(!0),Z(xt,{key:0},_n(p(y),se=>(D(),Le(p($a),{key:se,ref_for:!0,ref:ye=>q(ye,se),class:U(p(o).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":p(o).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:ye=>C(se),onMousemove:ye=>T(se)},{default:me(()=>[(D(!0),Z(xt,null,_n(p(S)[se],(ye,we)=>(D(),Z("li",{key:we,class:U([p(o).be("spinner","item"),p(o).is("active",we===p(g)[se]),p(o).is("disabled",ye)]),onClick:ve=>$(se,{value:we,disabled:ye})},[se==="hours"?(D(),Z(xt,{key:0},[rn(tt(("0"+(le.amPmMode?we%12||12:we)).slice(-2))+tt(E(we)),1)],64)):(D(),Z(xt,{key:1},[rn(tt(("0"+we).slice(-2)),1)],64))],10,["onClick"]))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),le.arrowControl?(D(!0),Z(xt,{key:1},_n(p(y),se=>(D(),Z("div",{key:se,class:U([p(o).be("spinner","wrapper"),p(o).is("arrow")]),onMouseenter:ye=>C(se)},[cn((D(),Le(p(Et),{class:U(["arrow-up",p(o).be("spinner","arrow")])},{default:me(()=>[ae(p(p_))]),_:1},8,["class"])),[[p(s1),G]]),cn((D(),Le(p(Et),{class:U(["arrow-down",p(o).be("spinner","arrow")])},{default:me(()=>[ae(p(Ll))]),_:1},8,["class"])),[[p(s1),N]]),ne("ul",{class:U(p(o).be("spinner","list"))},[(D(!0),Z(xt,null,_n(p(_)[se],(ye,we)=>(D(),Z("li",{key:we,class:U([p(o).be("spinner","item"),p(o).is("active",ye===p(g)[se]),p(o).is("disabled",p(S)[se][ye])])},[p(Ft)(ye)?(D(),Z(xt,{key:0},[se==="hours"?(D(),Z(xt,{key:0},[rn(tt(("0"+(le.amPmMode?ye%12||12:ye)).slice(-2))+tt(E(ye)),1)],64)):(D(),Z(xt,{key:1},[rn(tt(("0"+ye).slice(-2)),1)],64))],64)):Pe("v-if",!0)],2))),128))],2)],42,["onMouseenter"]))),128)):Pe("v-if",!0)],2))}});var oE=at(Cxe,[["__file","basic-time-spinner.vue"]]);const Txe=de({__name:"panel-time-pick",props:wxe,emits:["pick","select-range","set-picker-option"],setup(t,{emit:e}){const n=t,r=_t(Dc),{arrowControl:s,disabledHours:i,disabledMinutes:o,disabledSeconds:a,defaultValue:l}=r.props,{getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}=zz(i,o,a),h=Qe("time"),{t:f,lang:m}=zn(),v=H([0,2]),y=$z(n),g=R(()=>Bn(n.actualVisible)?`${h.namespace.value}-zoom-in-top`:""),S=R(()=>n.format.includes("ss")),_=R(()=>n.format.includes("A")?"A":n.format.includes("a")?"a":""),w=O=>{const z=an(O).locale(m.value),re=V(z);return z.isSame(re)},E=()=>{e("pick",y.value,!1)},C=(O=!1,z=!1)=>{z||e("pick",n.parsedValue,O)},T=O=>{if(!n.visible)return;const z=V(O).millisecond(0);e("pick",z,!0)},I=(O,z)=>{e("select-range",O,z),v.value=[O,z]},k=O=>{const z=n.format,re=z.indexOf("HH"),q=z.indexOf("mm"),le=z.indexOf("ss"),fe=[],se=[];re!==-1&&(fe.push(re),se.push("hours")),q!==-1&&(fe.push(q),se.push("minutes")),le!==-1&&S.value&&(fe.push(le),se.push("seconds"));const we=(fe.indexOf(v.value[0])+O+fe.length)%fe.length;L.start_emitSelectRange(se[we])},M=O=>{const z=O.code,{left:re,right:q,up:le,down:fe}=bt;if([re,q].includes(z)){k(z===re?-1:1),O.preventDefault();return}if([le,fe].includes(z)){const se=z===le?-1:1;L.start_scrollDown(se),O.preventDefault();return}},{timePickerOptions:L,onSetOption:N,getAvailableTime:G}=Bz({getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}),V=O=>G(O,n.datetimeRole||"",!0),X=O=>O?an(O,n.format).locale(m.value):null,F=O=>O?O.format(n.format):null,$=()=>an(l).locale(m.value);return e("set-picker-option",["isValidValue",w]),e("set-picker-option",["formatToString",F]),e("set-picker-option",["parseUserInput",X]),e("set-picker-option",["handleKeydownInput",M]),e("set-picker-option",["getRangeAvailableTime",V]),e("set-picker-option",["getDefaultValue",$]),(O,z)=>(D(),Le(Xs,{name:p(g)},{default:me(()=>[O.actualVisible||O.visible?(D(),Z("div",{key:0,class:U(p(h).b("panel"))},[ne("div",{class:U([p(h).be("panel","content"),{"has-seconds":p(S)}])},[ae(oE,{ref:"spinner",role:O.datetimeRole||"start","arrow-control":p(s),"show-seconds":p(S),"am-pm-mode":p(_),"spinner-date":O.parsedValue,"disabled-hours":p(i),"disabled-minutes":p(o),"disabled-seconds":p(a),onChange:T,onSetOption:p(N),onSelectRange:I},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),ne("div",{class:U(p(h).be("panel","footer"))},[ne("button",{type:"button",class:U([p(h).be("panel","btn"),"cancel"]),onClick:E},tt(p(f)("el.datepicker.cancel")),3),ne("button",{type:"button",class:U([p(h).be("panel","btn"),"confirm"]),onClick:re=>C()},tt(p(f)("el.datepicker.confirm")),11,["onClick"])],2)],2)):Pe("v-if",!0)]),_:1},8,["name"]))}});var i1=at(Txe,[["__file","panel-time-pick.vue"]]);const Mxe=it({...Dz,parsedValue:{type:Ce(Array)}}),Axe=de({__name:"panel-time-range",props:Mxe,emits:["pick","select-range","set-picker-option"],setup(t,{emit:e}){const n=t,r=(ue,j)=>{const he=[];for(let K=ue;K<=j;K++)he.push(K);return he},{t:s,lang:i}=zn(),o=Qe("time"),a=Qe("picker"),l=_t(Dc),{arrowControl:c,disabledHours:u,disabledMinutes:d,disabledSeconds:h,defaultValue:f}=l.props,m=R(()=>[o.be("range-picker","body"),o.be("panel","content"),o.is("arrow",c),w.value?"has-seconds":""]),v=R(()=>[o.be("range-picker","body"),o.be("panel","content"),o.is("arrow",c),w.value?"has-seconds":""]),y=R(()=>n.parsedValue[0]),g=R(()=>n.parsedValue[1]),S=$z(n),_=()=>{e("pick",S.value,!1)},w=R(()=>n.format.includes("ss")),E=R(()=>n.format.includes("A")?"A":n.format.includes("a")?"a":""),C=(ue=!1)=>{e("pick",[y.value,g.value],ue)},T=ue=>{M(ue.millisecond(0),g.value)},I=ue=>{M(y.value,ue.millisecond(0))},k=ue=>{const j=ue.map(K=>an(K).locale(i.value)),he=q(j);return j[0].isSame(he[0])&&j[1].isSame(he[1])},M=(ue,j)=>{n.visible&&e("pick",[ue,j],!0)},L=R(()=>y.value>g.value),N=H([0,2]),G=(ue,j)=>{e("select-range",ue,j,"min"),N.value=[ue,j]},V=R(()=>w.value?11:8),X=(ue,j)=>{e("select-range",ue,j,"max");const he=p(V);N.value=[ue+he,j+he]},F=ue=>{const j=w.value?[0,3,6,11,14,17]:[0,3,8,11],he=["hours","minutes"].concat(w.value?["seconds"]:[]),Fe=(j.indexOf(N.value[0])+ue+j.length)%j.length,Oe=j.length/2;Fe<Oe?ye.start_emitSelectRange(he[Fe]):ye.end_emitSelectRange(he[Fe-Oe])},$=ue=>{const j=ue.code,{left:he,right:K,up:Fe,down:Oe}=bt;if([he,K].includes(j)){F(j===he?-1:1),ue.preventDefault();return}if([Fe,Oe].includes(j)){const Re=j===Fe?-1:1,te=N.value[0]<V.value?"start":"end";ye[`${te}_scrollDown`](Re),ue.preventDefault();return}},O=(ue,j)=>{const he=u?u(ue):[],K=ue==="start",Oe=(j||(K?g.value:y.value)).hour(),Re=K?r(Oe+1,23):r(0,Oe-1);return Vw(he,Re)},z=(ue,j,he)=>{const K=d?d(ue,j):[],Fe=j==="start",Oe=he||(Fe?g.value:y.value),Re=Oe.hour();if(ue!==Re)return K;const te=Oe.minute(),oe=Fe?r(te+1,59):r(0,te-1);return Vw(K,oe)},re=(ue,j,he,K)=>{const Fe=h?h(ue,j,he):[],Oe=he==="start",Re=K||(Oe?g.value:y.value),te=Re.hour(),oe=Re.minute();if(ue!==te||j!==oe)return Fe;const Ee=Re.second(),J=Oe?r(Ee+1,59):r(0,Ee-1);return Vw(Fe,J)},q=([ue,j])=>[we(ue,"start",!0,j),we(j,"end",!1,ue)],{getAvailableHours:le,getAvailableMinutes:fe,getAvailableSeconds:se}=zz(O,z,re),{timePickerOptions:ye,getAvailableTime:we,onSetOption:ve}=Bz({getAvailableHours:le,getAvailableMinutes:fe,getAvailableSeconds:se}),xe=ue=>ue?rt(ue)?ue.map(j=>an(j,n.format).locale(i.value)):an(ue,n.format).locale(i.value):null,je=ue=>ue?rt(ue)?ue.map(j=>j.format(n.format)):ue.format(n.format):null,nt=()=>{if(rt(f))return f.map(j=>an(j).locale(i.value));const ue=an(f).locale(i.value);return[ue,ue.add(60,"m")]};return e("set-picker-option",["formatToString",je]),e("set-picker-option",["parseUserInput",xe]),e("set-picker-option",["isValidValue",k]),e("set-picker-option",["handleKeydownInput",$]),e("set-picker-option",["getDefaultValue",nt]),e("set-picker-option",["getRangeAvailableTime",q]),(ue,j)=>ue.actualVisible?(D(),Z("div",{key:0,class:U([p(o).b("range-picker"),p(a).b("panel")])},[ne("div",{class:U(p(o).be("range-picker","content"))},[ne("div",{class:U(p(o).be("range-picker","cell"))},[ne("div",{class:U(p(o).be("range-picker","header"))},tt(p(s)("el.datepicker.startTime")),3),ne("div",{class:U(p(m))},[ae(oE,{ref:"minSpinner",role:"start","show-seconds":p(w),"am-pm-mode":p(E),"arrow-control":p(c),"spinner-date":p(y),"disabled-hours":O,"disabled-minutes":z,"disabled-seconds":re,onChange:T,onSetOption:p(ve),onSelectRange:G},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),ne("div",{class:U(p(o).be("range-picker","cell"))},[ne("div",{class:U(p(o).be("range-picker","header"))},tt(p(s)("el.datepicker.endTime")),3),ne("div",{class:U(p(v))},[ae(oE,{ref:"maxSpinner",role:"end","show-seconds":p(w),"am-pm-mode":p(E),"arrow-control":p(c),"spinner-date":p(g),"disabled-hours":O,"disabled-minutes":z,"disabled-seconds":re,onChange:I,onSetOption:p(ve),onSelectRange:X},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),ne("div",{class:U(p(o).be("panel","footer"))},[ne("button",{type:"button",class:U([p(o).be("panel","btn"),"cancel"]),onClick:he=>_()},tt(p(s)("el.datepicker.cancel")),11,["onClick"]),ne("button",{type:"button",class:U([p(o).be("panel","btn"),"confirm"]),disabled:p(L),onClick:he=>C()},tt(p(s)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):Pe("v-if",!0)}});var kxe=at(Axe,[["__file","panel-time-range.vue"]]);an.extend(fM);var Ixe=de({name:"ElTimePicker",install:null,props:{...mM,isRange:Boolean},emits:[Qt],setup(t,e){const n=H(),[r,s]=t.isRange?["timerange",kxe]:["time",i1],i=o=>e.emit(Qt,o);return Mn(pM,t.popperOptions),e.expose({focus:()=>{var o;(o=n.value)==null||o.focus()},blur:()=>{var o;(o=n.value)==null||o.blur()},handleOpen:()=>{var o;(o=n.value)==null||o.handleOpen()},handleClose:()=>{var o;(o=n.value)==null||o.handleClose()}}),()=>{var o;const a=(o=t.format)!=null?o:r1;return ae(Fz,yn(t,{ref:n,type:r,format:a,"onUpdate:modelValue":i}),{default:l=>ae(s,l,null)})}}});const Pxe=nn(Ixe),gM=Symbol(),Dv="ElIsDefaultFormat",Rxe=it({...mM,type:{type:Ce(String),default:"date"}}),Lxe=["date","dates","year","years","month","months","week","range"],vM=it({disabledDate:{type:Ce(Function)},date:{type:Ce(Object),required:!0},minDate:{type:Ce(Object)},maxDate:{type:Ce(Object)},parsedValue:{type:Ce([Object,Array])},rangeState:{type:Ce(Object),default:()=>({endDate:null,selecting:!1})}}),Vz=it({type:{type:Ce(String),required:!0,values:Jbe},dateFormat:String,timeFormat:String,showNow:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!0},showWeekNumber:Boolean}),yM=it({unlinkPanels:Boolean,visible:Boolean,showFooter:{type:Boolean,default:!0},parsedValue:{type:Ce(Array)}}),bM=t=>({type:String,values:Lxe,default:t}),Oxe=it({...Vz,parsedValue:{type:Ce([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),Yg=t=>{if(!rt(t))return!1;const[e,n]=t;return an.isDayjs(e)&&an.isDayjs(n)&&an(e).isValid()&&an(n).isValid()&&e.isSameOrBefore(n)},C_=(t,{lang:e,step:n=1,unit:r,unlinkPanels:s})=>{let i;if(rt(t)){let[o,a]=t.map(l=>an(l).locale(e));return s||(a=o.add(n,r)),[o,a]}else t?i=an(t):i=an();return i=i.locale(e),[i,i.add(n,r)]},Nxe=(t,e,{columnIndexOffset:n,startDate:r,nextEndDate:s,now:i,unit:o,relativeDateGetter:a,setCellMetadata:l,setRowMetadata:c})=>{for(let u=0;u<t.row;u++){const d=e[u];for(let h=0;h<t.column;h++){let f=d[h+n];f||(f={row:u,column:h,type:"normal",inRange:!1,start:!1,end:!1});const m=u*t.column+h,v=a(m);f.dayjs=v,f.date=v.toDate(),f.timestamp=v.valueOf(),f.type="normal",f.inRange=!!(r&&v.isSameOrAfter(r,o)&&s&&v.isSameOrBefore(s,o))||!!(r&&v.isSameOrBefore(r,o)&&s&&v.isSameOrAfter(s,o)),r!=null&&r.isSameOrAfter(s)?(f.start=!!s&&v.isSame(s,o),f.end=r&&v.isSame(r,o)):(f.start=!!r&&v.isSame(r,o),f.end=!!s&&v.isSame(s,o)),v.isSame(i,o)&&(f.type="today"),l==null||l(f,{rowIndex:u,columnIndex:h}),d[h+n]=f}c==null||c(d)}},o1=(t,e,n,r)=>{const s=an().locale(r).startOf("month").month(n).year(e).hour(t.hour()).minute(t.minute()).second(t.second()),i=s.daysInMonth();return Pu(i).map(o=>s.add(o,"day").toDate())},Ep=(t,e,n,r,s)=>{const i=an().year(e).month(n).startOf("month").hour(t.hour()).minute(t.minute()).second(t.second()),o=o1(t,e,n,r).find(a=>!(s!=null&&s(a)));return o?an(o).locale(r):i.locale(r)},a1=(t,e,n)=>{const r=t.year();if(!(n!=null&&n(t.toDate())))return t.locale(e);const s=t.month();if(!o1(t,r,s,e).every(n))return Ep(t,r,s,e,n);for(let i=0;i<12;i++)if(!o1(t,r,i,e).every(n))return Ep(t,r,i,e,n);return t},Cp=(t,e,n,r)=>{if(rt(t))return t.map(s=>Cp(s,e,n,r));if(kt(t)){const s=r.value?an(t):an(t,e);if(!s.isValid())return s}return an(t,e).locale(n)},Dxe=it({...vM,cellClassName:{type:Ce(Function)},showWeekNumber:Boolean,selectionMode:bM("date")}),Fxe=["changerange","pick","select"],aE=(t="")=>["normal","today"].includes(t),Bxe=(t,e)=>{const{lang:n}=zn(),r=H(),s=H(),i=H(),o=H(),a=H([[],[],[],[],[],[]]);let l=!1;const c=t.date.$locale().weekStart||7,u=t.date.locale("en").localeData().weekdaysShort().map(z=>z.toLowerCase()),d=R(()=>c>3?7-c:-c),h=R(()=>{const z=t.date.startOf("month");return z.subtract(z.day()||7,"day")}),f=R(()=>u.concat(u).slice(c,c+7)),m=R(()=>U6(p(w)).some(z=>z.isCurrent)),v=R(()=>{const z=t.date.startOf("month"),re=z.day()||7,q=z.daysInMonth(),le=z.subtract(1,"month").daysInMonth();return{startOfMonthDay:re,dateCountOfMonth:q,dateCountOfLastMonth:le}}),y=R(()=>t.selectionMode==="dates"?Wi(t.parsedValue):[]),g=(z,{count:re,rowIndex:q,columnIndex:le})=>{const{startOfMonthDay:fe,dateCountOfMonth:se,dateCountOfLastMonth:ye}=p(v),we=p(d);if(q>=0&&q<=1){const ve=fe+we<0?7+fe+we:fe+we;if(le+q*7>=ve)return z.text=re,!0;z.text=ye-(ve-le%7)+1+q*7,z.type="prev-month"}else return re<=se?z.text=re:(z.text=re-se,z.type="next-month"),!0;return!1},S=(z,{columnIndex:re,rowIndex:q},le)=>{const{disabledDate:fe,cellClassName:se}=t,ye=p(y),we=g(z,{count:le,rowIndex:q,columnIndex:re}),ve=z.dayjs.toDate();return z.selected=ye.find(xe=>xe.isSame(z.dayjs,"day")),z.isSelected=!!z.selected,z.isCurrent=C(z),z.disabled=fe==null?void 0:fe(ve),z.customClass=se==null?void 0:se(ve),we},_=z=>{if(t.selectionMode==="week"){const[re,q]=t.showWeekNumber?[1,7]:[0,6],le=O(z[re+1]);z[re].inRange=le,z[re].start=le,z[q].inRange=le,z[q].end=le}},w=R(()=>{const{minDate:z,maxDate:re,rangeState:q,showWeekNumber:le}=t,fe=p(d),se=p(a),ye="day";let we=1;if(Nxe({row:6,column:7},se,{startDate:z,columnIndexOffset:le?1:0,nextEndDate:q.endDate||re||q.selecting&&z||null,now:an().locale(p(n)).startOf(ye),unit:ye,relativeDateGetter:ve=>p(h).add(ve-fe,ye),setCellMetadata:(...ve)=>{S(...ve,we)&&(we+=1)},setRowMetadata:_}),le)for(let ve=0;ve<6;ve++)se[ve][1].dayjs&&(se[ve][0]={type:"week",text:se[ve][1].dayjs.week()});return se});Be(()=>t.date,async()=>{var z;(z=p(r))!=null&&z.contains(document.activeElement)&&(await Tt(),await E())});const E=async()=>{var z;return(z=p(s))==null?void 0:z.focus()},C=z=>t.selectionMode==="date"&&aE(z.type)&&T(z,t.parsedValue),T=(z,re)=>re?an(re).locale(p(n)).isSame(t.date.date(Number(z.text)),"day"):!1,I=(z,re)=>{const q=z*7+(re-(t.showWeekNumber?1:0))-p(d);return p(h).add(q,"day")},k=z=>{var re;if(!t.rangeState.selecting)return;let q=z.target;if(q.tagName==="SPAN"&&(q=(re=q.parentNode)==null?void 0:re.parentNode),q.tagName==="DIV"&&(q=q.parentNode),q.tagName!=="TD")return;const le=q.parentNode.rowIndex-1,fe=q.cellIndex;p(w)[le][fe].disabled||(le!==p(i)||fe!==p(o))&&(i.value=le,o.value=fe,e("changerange",{selecting:!0,endDate:I(le,fe)}))},M=z=>!p(m)&&(z==null?void 0:z.text)===1&&z.type==="normal"||z.isCurrent,L=z=>{l||p(m)||t.selectionMode!=="date"||$(z,!0)},N=z=>{z.target.closest("td")&&(l=!0)},G=z=>{z.target.closest("td")&&(l=!1)},V=z=>{!t.rangeState.selecting||!t.minDate?(e("pick",{minDate:z,maxDate:null}),e("select",!0)):(z>=t.minDate?e("pick",{minDate:t.minDate,maxDate:z}):e("pick",{minDate:z,maxDate:t.minDate}),e("select",!1))},X=z=>{const re=z.week(),q=`${z.year()}w${re}`;e("pick",{year:z.year(),week:re,value:q,date:z.startOf("week")})},F=(z,re)=>{const q=re?Wi(t.parsedValue).filter(le=>(le==null?void 0:le.valueOf())!==z.valueOf()):Wi(t.parsedValue).concat([z]);e("pick",q)},$=(z,re=!1)=>{const q=z.target.closest("td");if(!q)return;const le=q.parentNode.rowIndex-1,fe=q.cellIndex,se=p(w)[le][fe];if(se.disabled||se.type==="week")return;const ye=I(le,fe);switch(t.selectionMode){case"range":{V(ye);break}case"date":{e("pick",ye,re);break}case"week":{X(ye);break}case"dates":{F(ye,!!se.selected);break}}},O=z=>{if(t.selectionMode!=="week")return!1;let re=t.date.startOf("day");if(z.type==="prev-month"&&(re=re.subtract(1,"month")),z.type==="next-month"&&(re=re.add(1,"month")),re=re.date(Number.parseInt(z.text,10)),t.parsedValue&&!rt(t.parsedValue)){const q=(t.parsedValue.day()-c+7)%7-1;return t.parsedValue.subtract(q,"day").isSame(re,"day")}return!1};return{WEEKS:f,rows:w,tbodyRef:r,currentCellRef:s,focus:E,isCurrent:C,isWeekActive:O,isSelectedCell:M,handlePickDate:$,handleMouseUp:G,handleMouseDown:N,handleMouseMove:k,handleFocus:L}},Uxe=(t,{isCurrent:e,isWeekActive:n})=>{const r=Qe("date-table"),{t:s}=zn(),i=R(()=>[r.b(),{"is-week-mode":t.selectionMode==="week"}]),o=R(()=>s("el.datepicker.dateTablePrompt")),a=c=>{const u=[];return aE(c.type)&&!c.disabled?(u.push("available"),c.type==="today"&&u.push("today")):u.push(c.type),e(c)&&u.push("current"),c.inRange&&(aE(c.type)||t.selectionMode==="week")&&(u.push("in-range"),c.start&&u.push("start-date"),c.end&&u.push("end-date")),c.disabled&&u.push("disabled"),c.selected&&u.push("selected"),c.customClass&&u.push(c.customClass),u.join(" ")},l=c=>[r.e("row"),{current:n(c)}];return{tableKls:i,tableLabel:o,weekHeaderClass:r.e("week-header"),getCellClasses:a,getRowKls:l,t:s}},zxe=it({cell:{type:Ce(Object)}});var _M=de({name:"ElDatePickerCell",props:zxe,setup(t){const e=Qe("date-table-cell"),{slots:n}=_t(gM);return()=>{const{cell:r}=t;return Ae(n,"default",{...r},()=>{var s;return[ae("div",{class:e.b()},[ae("span",{class:e.e("text")},[(s=r==null?void 0:r.renderText)!=null?s:r==null?void 0:r.text])])]})}}});const $xe=de({__name:"basic-date-table",props:Dxe,emits:Fxe,setup(t,{expose:e,emit:n}){const r=t,{WEEKS:s,rows:i,tbodyRef:o,currentCellRef:a,focus:l,isCurrent:c,isWeekActive:u,isSelectedCell:d,handlePickDate:h,handleMouseUp:f,handleMouseDown:m,handleMouseMove:v,handleFocus:y}=Bxe(r,n),{tableLabel:g,tableKls:S,getCellClasses:_,getRowKls:w,weekHeaderClass:E,t:C}=Uxe(r,{isCurrent:c,isWeekActive:u});let T=!1;return Xn(()=>{T=!0}),e({focus:l}),(I,k)=>(D(),Z("table",{"aria-label":p(g),class:U(p(S)),cellspacing:"0",cellpadding:"0",role:"grid",onClick:p(h),onMousemove:p(v),onMousedown:p(m),onMouseup:p(f)},[ne("tbody",{ref_key:"tbodyRef",ref:o},[ne("tr",null,[I.showWeekNumber?(D(),Z("th",{key:0,scope:"col",class:U(p(E))},null,2)):Pe("v-if",!0),(D(!0),Z(xt,null,_n(p(s),(M,L)=>(D(),Z("th",{key:L,"aria-label":p(C)("el.datepicker.weeksFull."+M),scope:"col"},tt(p(C)("el.datepicker.weeks."+M)),9,["aria-label"]))),128))]),(D(!0),Z(xt,null,_n(p(i),(M,L)=>(D(),Z("tr",{key:L,class:U(p(w)(M[1]))},[(D(!0),Z(xt,null,_n(M,(N,G)=>(D(),Z("td",{key:`${L}.${G}`,ref_for:!0,ref:V=>!p(T)&&p(d)(N)&&(a.value=V),class:U(p(_)(N)),"aria-current":N.isCurrent?"date":void 0,"aria-selected":N.isCurrent,tabindex:p(d)(N)?0:-1,onFocus:p(y)},[ae(p(_M),{cell:N},null,8,["cell"])],42,["aria-current","aria-selected","tabindex","onFocus"]))),128))],2))),128))],512)],42,["aria-label","onClick","onMousemove","onMousedown","onMouseup"]))}});var lE=at($xe,[["__file","basic-date-table.vue"]]);const Vxe=it({...vM,selectionMode:bM("month")}),Hxe=de({__name:"basic-month-table",props:Vxe,emits:["changerange","pick","select"],setup(t,{expose:e,emit:n}){const r=t,s=Qe("month-table"),{t:i,lang:o}=zn(),a=H(),l=H(),c=H(r.date.locale("en").localeData().monthsShort().map(_=>_.toLowerCase())),u=H([[],[],[]]),d=H(),h=H(),f=R(()=>{var _,w;const E=u.value,C=an().locale(o.value).startOf("month");for(let T=0;T<3;T++){const I=E[T];for(let k=0;k<4;k++){const M=I[k]||(I[k]={row:T,column:k,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});M.type="normal";const L=T*4+k,N=r.date.startOf("year").month(L),G=r.rangeState.endDate||r.maxDate||r.rangeState.selecting&&r.minDate||null;M.inRange=!!(r.minDate&&N.isSameOrAfter(r.minDate,"month")&&G&&N.isSameOrBefore(G,"month"))||!!(r.minDate&&N.isSameOrBefore(r.minDate,"month")&&G&&N.isSameOrAfter(G,"month")),(_=r.minDate)!=null&&_.isSameOrAfter(G)?(M.start=!!(G&&N.isSame(G,"month")),M.end=r.minDate&&N.isSame(r.minDate,"month")):(M.start=!!(r.minDate&&N.isSame(r.minDate,"month")),M.end=!!(G&&N.isSame(G,"month"))),C.isSame(N)&&(M.type="today"),M.text=L,M.disabled=((w=r.disabledDate)==null?void 0:w.call(r,N.toDate()))||!1}}return E}),m=()=>{var _;(_=l.value)==null||_.focus()},v=_=>{const w={},E=r.date.year(),C=new Date,T=_.text;return w.disabled=r.disabledDate?o1(r.date,E,T,o.value).every(r.disabledDate):!1,w.current=Wi(r.parsedValue).findIndex(I=>an.isDayjs(I)&&I.year()===E&&I.month()===T)>=0,w.today=C.getFullYear()===E&&C.getMonth()===T,_.inRange&&(w["in-range"]=!0,_.start&&(w["start-date"]=!0),_.end&&(w["end-date"]=!0)),w},y=_=>{const w=r.date.year(),E=_.text;return Wi(r.date).findIndex(C=>C.year()===w&&C.month()===E)>=0},g=_=>{var w;if(!r.rangeState.selecting)return;let E=_.target;if(E.tagName==="SPAN"&&(E=(w=E.parentNode)==null?void 0:w.parentNode),E.tagName==="DIV"&&(E=E.parentNode),E.tagName!=="TD")return;const C=E.parentNode.rowIndex,T=E.cellIndex;f.value[C][T].disabled||(C!==d.value||T!==h.value)&&(d.value=C,h.value=T,n("changerange",{selecting:!0,endDate:r.date.startOf("year").month(C*4+T)}))},S=_=>{var w;const E=(w=_.target)==null?void 0:w.closest("td");if((E==null?void 0:E.tagName)!=="TD"||ao(E,"disabled"))return;const C=E.cellIndex,I=E.parentNode.rowIndex*4+C,k=r.date.startOf("year").month(I);if(r.selectionMode==="months"){if(_.type==="keydown"){n("pick",Wi(r.parsedValue),!1);return}const M=Ep(r.date,r.date.year(),I,o.value,r.disabledDate),L=ao(E,"current")?Wi(r.parsedValue).filter(N=>(N==null?void 0:N.year())!==M.year()||(N==null?void 0:N.month())!==M.month()):Wi(r.parsedValue).concat([an(M)]);n("pick",L)}else r.selectionMode==="range"?r.rangeState.selecting?(r.minDate&&k>=r.minDate?n("pick",{minDate:r.minDate,maxDate:k}):n("pick",{minDate:k,maxDate:r.minDate}),n("select",!1)):(n("pick",{minDate:k,maxDate:null}),n("select",!0)):n("pick",I)};return Be(()=>r.date,async()=>{var _,w;(_=a.value)!=null&&_.contains(document.activeElement)&&(await Tt(),(w=l.value)==null||w.focus())}),e({focus:m}),(_,w)=>(D(),Z("table",{role:"grid","aria-label":p(i)("el.datepicker.monthTablePrompt"),class:U(p(s).b()),onClick:S,onMousemove:g},[ne("tbody",{ref_key:"tbodyRef",ref:a},[(D(!0),Z(xt,null,_n(p(f),(E,C)=>(D(),Z("tr",{key:C},[(D(!0),Z(xt,null,_n(E,(T,I)=>(D(),Z("td",{key:I,ref_for:!0,ref:k=>y(T)&&(l.value=k),class:U(v(T)),"aria-selected":`${y(T)}`,"aria-label":p(i)(`el.datepicker.month${+T.text+1}`),tabindex:y(T)?0:-1,onKeydown:[cr($t(S,["prevent","stop"]),["space"]),cr($t(S,["prevent","stop"]),["enter"])]},[ae(p(_M),{cell:{...T,renderText:p(i)("el.datepicker.months."+c.value[T.text])}},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var Xg=at(Hxe,[["__file","basic-month-table.vue"]]);const Gxe=it({...vM,selectionMode:bM("year")}),Wxe=de({__name:"basic-year-table",props:Gxe,emits:["changerange","pick","select"],setup(t,{expose:e,emit:n}){const r=t,s=(w,E)=>{const C=an(String(w)).locale(E).startOf("year"),I=C.endOf("year").dayOfYear();return Pu(I).map(k=>C.add(k,"day").toDate())},i=Qe("year-table"),{t:o,lang:a}=zn(),l=H(),c=H(),u=R(()=>Math.floor(r.date.year()/10)*10),d=H([[],[],[]]),h=H(),f=H(),m=R(()=>{var w;const E=d.value,C=an().locale(a.value).startOf("year");for(let T=0;T<3;T++){const I=E[T];for(let k=0;k<4&&!(T*4+k>=10);k++){let M=I[k];M||(M={row:T,column:k,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1}),M.type="normal";const L=T*4+k+u.value,N=an().year(L),G=r.rangeState.endDate||r.maxDate||r.rangeState.selecting&&r.minDate||null;M.inRange=!!(r.minDate&&N.isSameOrAfter(r.minDate,"year")&&G&&N.isSameOrBefore(G,"year"))||!!(r.minDate&&N.isSameOrBefore(r.minDate,"year")&&G&&N.isSameOrAfter(G,"year")),(w=r.minDate)!=null&&w.isSameOrAfter(G)?(M.start=!!(G&&N.isSame(G,"year")),M.end=!!(r.minDate&&N.isSame(r.minDate,"year"))):(M.start=!!(r.minDate&&N.isSame(r.minDate,"year")),M.end=!!(G&&N.isSame(G,"year"))),C.isSame(N)&&(M.type="today"),M.text=L;const X=N.toDate();M.disabled=r.disabledDate&&r.disabledDate(X)||!1,I[k]=M}}return E}),v=()=>{var w;(w=c.value)==null||w.focus()},y=w=>{const E={},C=an().locale(a.value),T=w.text;return E.disabled=r.disabledDate?s(T,a.value).every(r.disabledDate):!1,E.today=C.year()===T,E.current=Wi(r.parsedValue).findIndex(I=>I.year()===T)>=0,w.inRange&&(E["in-range"]=!0,w.start&&(E["start-date"]=!0),w.end&&(E["end-date"]=!0)),E},g=w=>{const E=w.text;return Wi(r.date).findIndex(C=>C.year()===E)>=0},S=w=>{var E;const C=(E=w.target)==null?void 0:E.closest("td");if(!C||!C.textContent||ao(C,"disabled"))return;const T=C.cellIndex,k=C.parentNode.rowIndex*4+T+u.value,M=an().year(k);if(r.selectionMode==="range")r.rangeState.selecting?(r.minDate&&M>=r.minDate?n("pick",{minDate:r.minDate,maxDate:M}):n("pick",{minDate:M,maxDate:r.minDate}),n("select",!1)):(n("pick",{minDate:M,maxDate:null}),n("select",!0));else if(r.selectionMode==="years"){if(w.type==="keydown"){n("pick",Wi(r.parsedValue),!1);return}const L=a1(M.startOf("year"),a.value,r.disabledDate),N=ao(C,"current")?Wi(r.parsedValue).filter(G=>(G==null?void 0:G.year())!==k):Wi(r.parsedValue).concat([L]);n("pick",N)}else n("pick",k)},_=w=>{var E;if(!r.rangeState.selecting)return;const C=(E=w.target)==null?void 0:E.closest("td");if(!C)return;const T=C.parentNode.rowIndex,I=C.cellIndex;m.value[T][I].disabled||(T!==h.value||I!==f.value)&&(h.value=T,f.value=I,n("changerange",{selecting:!0,endDate:an().year(u.value).add(T*4+I,"year")}))};return Be(()=>r.date,async()=>{var w,E;(w=l.value)!=null&&w.contains(document.activeElement)&&(await Tt(),(E=c.value)==null||E.focus())}),e({focus:v}),(w,E)=>(D(),Z("table",{role:"grid","aria-label":p(o)("el.datepicker.yearTablePrompt"),class:U(p(i).b()),onClick:S,onMousemove:_},[ne("tbody",{ref_key:"tbodyRef",ref:l},[(D(!0),Z(xt,null,_n(p(m),(C,T)=>(D(),Z("tr",{key:T},[(D(!0),Z(xt,null,_n(C,(I,k)=>(D(),Z("td",{key:`${T}_${k}`,ref_for:!0,ref:M=>g(I)&&(c.value=M),class:U(["available",y(I)]),"aria-selected":g(I),"aria-label":String(I.text),tabindex:g(I)?0:-1,onKeydown:[cr($t(S,["prevent","stop"]),["space"]),cr($t(S,["prevent","stop"]),["enter"])]},[ae(p(_M),{cell:I},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var Zg=at(Wxe,[["__file","basic-year-table.vue"]]);const jxe=de({__name:"panel-date-pick",props:Oxe,emits:["pick","set-picker-option","panel-change"],setup(t,{emit:e}){const n=t,r=(ze,Me,be)=>!0,s=Qe("picker-panel"),i=Qe("date-picker"),o=Pc(),a=bs(),{t:l,lang:c}=zn(),u=_t(Dc),d=_t(Dv),h=_t(__),{shortcuts:f,disabledDate:m,cellClassName:v,defaultTime:y}=u.props,g=Yn(u.props,"defaultValue"),S=H(),_=H(an().locale(c.value)),w=H(!1);let E=!1;const C=R(()=>an(y).locale(c.value)),T=R(()=>_.value.month()),I=R(()=>_.value.year()),k=H([]),M=H(null),L=H(null),N=ze=>k.value.length>0?r(ze,k.value,n.format||"HH:mm:ss"):!0,G=ze=>y&&!Oe.value&&!w.value&&!E?C.value.year(ze.year()).month(ze.month()).date(ze.date()):xe.value?ze.millisecond(0):ze.startOf("day"),V=(ze,...Me)=>{if(!ze)e("pick",ze,...Me);else if(rt(ze)){const be=ze.map(G);e("pick",be,...Me)}else e("pick",G(ze),...Me);M.value=null,L.value=null,w.value=!1,E=!1},X=async(ze,Me)=>{if(q.value==="date"){ze=ze;let be=n.parsedValue?n.parsedValue.year(ze.year()).month(ze.month()).date(ze.date()):ze;N(be),_.value=be,V(be,xe.value||Me)}else q.value==="week"?V(ze.date):q.value==="dates"&&V(ze,!0)},F=ze=>{const Me=ze?"add":"subtract";_.value=_.value[Me](1,"month"),Mt("month")},$=ze=>{const Me=_.value,be=ze?"add":"subtract";_.value=O.value==="year"?Me[be](10,"year"):Me[be](1,"year"),Mt("year")},O=H("date"),z=R(()=>{const ze=l("el.datepicker.year");if(O.value==="year"){const Me=Math.floor(I.value/10)*10;return ze?`${Me} ${ze} - ${Me+9} ${ze}`:`${Me} - ${Me+9}`}return`${I.value} ${ze}`}),re=ze=>{const Me=Lt(ze.value)?ze.value():ze.value;if(Me){E=!0,V(an(Me).locale(c.value));return}ze.onClick&&ze.onClick({attrs:o,slots:a,emit:e})},q=R(()=>{const{type:ze}=n;return["week","month","months","year","years","dates"].includes(ze)?ze:"date"}),le=R(()=>q.value==="dates"||q.value==="months"||q.value==="years"),fe=R(()=>q.value==="date"?O.value:q.value),se=R(()=>!!f.length),ye=async(ze,Me)=>{q.value==="month"?(_.value=Ep(_.value,_.value.year(),ze,c.value,m),V(_.value,!1)):q.value==="months"?V(ze,Me??!0):(_.value=Ep(_.value,_.value.year(),ze,c.value,m),O.value="date",["month","year","date","week"].includes(q.value)&&(V(_.value,!0),await Tt(),St())),Mt("month")},we=async(ze,Me)=>{if(q.value==="year"){const be=_.value.startOf("year").year(ze);_.value=a1(be,c.value,m),V(_.value,!1)}else if(q.value==="years")V(ze,Me??!0);else{const be=_.value.year(ze);_.value=a1(be,c.value,m),O.value="month",["month","year","date","week"].includes(q.value)&&(V(_.value,!0),await Tt(),St())}Mt("year")},ve=async ze=>{O.value=ze,await Tt(),St()},xe=R(()=>n.type==="datetime"||n.type==="datetimerange"),je=R(()=>{const ze=xe.value||q.value==="dates",Me=q.value==="years",be=q.value==="months",Ve=O.value==="date",mt=O.value==="year",Ue=O.value==="month";return ze&&Ve||Me&&mt||be&&Ue}),nt=R(()=>m?n.parsedValue?rt(n.parsedValue)?m(n.parsedValue[0].toDate()):m(n.parsedValue.toDate()):!0:!1),ue=()=>{if(le.value)V(n.parsedValue);else{let ze=n.parsedValue;if(!ze){const Me=an(y).locale(c.value),be=lt();ze=Me.year(be.year()).month(be.month()).date(be.date())}_.value=ze,V(ze)}},j=R(()=>m?m(an().locale(c.value).toDate()):!1),he=()=>{const Me=an().locale(c.value).toDate();w.value=!0,(!m||!m(Me))&&N(Me)&&(_.value=an().locale(c.value),V(_.value))},K=R(()=>n.timeFormat||QU(n.format)),Fe=R(()=>n.dateFormat||JU(n.format)),Oe=R(()=>{if(L.value)return L.value;if(!(!n.parsedValue&&!g.value))return(n.parsedValue||_.value).format(K.value)}),Re=R(()=>{if(M.value)return M.value;if(!(!n.parsedValue&&!g.value))return(n.parsedValue||_.value).format(Fe.value)}),te=H(!1),oe=()=>{te.value=!0},Ee=()=>{te.value=!1},J=ze=>({hour:ze.hour(),minute:ze.minute(),second:ze.second(),year:ze.year(),month:ze.month(),date:ze.date()}),Q=(ze,Me,be)=>{const{hour:Ve,minute:mt,second:Ue}=J(ze),Ct=n.parsedValue?n.parsedValue.hour(Ve).minute(mt).second(Ue):ze;_.value=Ct,V(_.value,!0),be||(te.value=Me)},_e=ze=>{const Me=an(ze,K.value).locale(c.value);if(Me.isValid()&&N(Me)){const{year:be,month:Ve,date:mt}=J(_.value);_.value=Me.year(be).month(Ve).date(mt),L.value=null,te.value=!1,V(_.value,!0)}},ie=ze=>{const Me=Cp(ze,Fe.value,c.value,d);if(Me.isValid()){if(m&&m(Me.toDate()))return;const{hour:be,minute:Ve,second:mt}=J(_.value);_.value=Me.hour(be).minute(Ve).second(mt),M.value=null,V(_.value,!0)}},Te=ze=>an.isDayjs(ze)&&ze.isValid()&&(m?!m(ze.toDate()):!0),We=ze=>rt(ze)?ze.map(Me=>Me.format(n.format)):ze.format(n.format),ut=ze=>Cp(ze,n.format,c.value,d),lt=()=>{const ze=an(g.value).locale(c.value);if(!g.value){const Me=C.value;return an().hour(Me.hour()).minute(Me.minute()).second(Me.second()).locale(c.value)}return ze},St=()=>{var ze;["week","month","year","date"].includes(q.value)&&((ze=S.value)==null||ze.focus())},Ot=()=>{St(),q.value==="week"&&ht(bt.down)},et=ze=>{const{code:Me}=ze;[bt.up,bt.down,bt.left,bt.right,bt.home,bt.end,bt.pageUp,bt.pageDown].includes(Me)&&(ht(Me),ze.stopPropagation(),ze.preventDefault()),[bt.enter,bt.space,bt.numpadEnter].includes(Me)&&M.value===null&&L.value===null&&(ze.preventDefault(),V(_.value,!1))},ht=ze=>{var Me;const{up:be,down:Ve,left:mt,right:Ue,home:Ct,end:st,pageUp:vt,pageDown:Rt}=bt,jt={year:{[be]:-4,[Ve]:4,[mt]:-1,[Ue]:1,offset:(sn,At)=>sn.setFullYear(sn.getFullYear()+At)},month:{[be]:-4,[Ve]:4,[mt]:-1,[Ue]:1,offset:(sn,At)=>sn.setMonth(sn.getMonth()+At)},week:{[be]:-1,[Ve]:1,[mt]:-1,[Ue]:1,offset:(sn,At)=>sn.setDate(sn.getDate()+At*7)},date:{[be]:-7,[Ve]:7,[mt]:-1,[Ue]:1,[Ct]:sn=>-sn.getDay(),[st]:sn=>-sn.getDay()+6,[vt]:sn=>-new Date(sn.getFullYear(),sn.getMonth(),0).getDate(),[Rt]:sn=>new Date(sn.getFullYear(),sn.getMonth()+1,0).getDate(),offset:(sn,At)=>sn.setDate(sn.getDate()+At)}},dn=_.value.toDate();for(;Math.abs(_.value.diff(dn,"year",!0))<1;){const sn=jt[fe.value];if(!sn)return;if(sn.offset(dn,Lt(sn[ze])?sn[ze](dn):(Me=sn[ze])!=null?Me:0),m&&m(dn))break;const At=an(dn).locale(c.value);_.value=At,e("pick",At,!0);break}},Mt=ze=>{e("panel-change",_.value.toDate(),ze,O.value)};return Be(()=>q.value,ze=>{if(["month","year"].includes(ze)){O.value=ze;return}else if(ze==="years"){O.value="year";return}else if(ze==="months"){O.value="month";return}O.value="date"},{immediate:!0}),Be(()=>O.value,()=>{h==null||h.updatePopper()}),Be(()=>g.value,ze=>{ze&&(_.value=lt())},{immediate:!0}),Be(()=>n.parsedValue,ze=>{if(ze){if(le.value||rt(ze))return;_.value=ze}else _.value=lt()},{immediate:!0}),e("set-picker-option",["isValidValue",Te]),e("set-picker-option",["formatToString",We]),e("set-picker-option",["parseUserInput",ut]),e("set-picker-option",["handleFocusPicker",Ot]),(ze,Me)=>(D(),Z("div",{class:U([p(s).b(),p(i).b(),{"has-sidebar":ze.$slots.sidebar||p(se),"has-time":p(xe)}])},[ne("div",{class:U(p(s).e("body-wrapper"))},[Ae(ze.$slots,"sidebar",{class:U(p(s).e("sidebar"))}),p(se)?(D(),Z("div",{key:0,class:U(p(s).e("sidebar"))},[(D(!0),Z(xt,null,_n(p(f),(be,Ve)=>(D(),Z("button",{key:Ve,type:"button",class:U(p(s).e("shortcut")),onClick:mt=>re(be)},tt(be.text),11,["onClick"]))),128))],2)):Pe("v-if",!0),ne("div",{class:U(p(s).e("body"))},[p(xe)?(D(),Z("div",{key:0,class:U(p(i).e("time-header"))},[ne("span",{class:U(p(i).e("editor-wrap"))},[ae(p(Ci),{placeholder:p(l)("el.datepicker.selectDate"),"model-value":p(Re),size:"small","validate-event":!1,onInput:be=>M.value=be,onChange:ie},null,8,["placeholder","model-value","onInput"])],2),cn((D(),Z("span",{class:U(p(i).e("editor-wrap"))},[ae(p(Ci),{placeholder:p(l)("el.datepicker.selectTime"),"model-value":p(Oe),size:"small","validate-event":!1,onFocus:oe,onInput:be=>L.value=be,onChange:_e},null,8,["placeholder","model-value","onInput"]),ae(p(i1),{visible:te.value,format:p(K),"parsed-value":_.value,onPick:Q},null,8,["visible","format","parsed-value"])],2)),[[p(Tc),Ee]])],2)):Pe("v-if",!0),cn(ne("div",{class:U([p(i).e("header"),(O.value==="year"||O.value==="month")&&p(i).e("header--bordered")])},[ne("span",{class:U(p(i).e("prev-btn"))},[ne("button",{type:"button","aria-label":p(l)("el.datepicker.prevYear"),class:U(["d-arrow-left",p(s).e("icon-btn")]),onClick:be=>$(!1)},[Ae(ze.$slots,"prev-year",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p(zu))]),_:1})])],10,["aria-label","onClick"]),cn(ne("button",{type:"button","aria-label":p(l)("el.datepicker.prevMonth"),class:U([p(s).e("icon-btn"),"arrow-left"]),onClick:be=>F(!1)},[Ae(ze.$slots,"prev-month",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p(Sc))]),_:1})])],10,["aria-label","onClick"]),[[Wn,O.value==="date"]])],2),ne("span",{role:"button",class:U(p(i).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:cr(be=>ve("year"),["enter"]),onClick:be=>ve("year")},tt(p(z)),43,["onKeydown","onClick"]),cn(ne("span",{role:"button","aria-live":"polite",tabindex:"0",class:U([p(i).e("header-label"),{active:O.value==="month"}]),onKeydown:cr(be=>ve("month"),["enter"]),onClick:be=>ve("month")},tt(p(l)(`el.datepicker.month${p(T)+1}`)),43,["onKeydown","onClick"]),[[Wn,O.value==="date"]]),ne("span",{class:U(p(i).e("next-btn"))},[cn(ne("button",{type:"button","aria-label":p(l)("el.datepicker.nextMonth"),class:U([p(s).e("icon-btn"),"arrow-right"]),onClick:be=>F(!0)},[Ae(ze.$slots,"next-month",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p(Ai))]),_:1})])],10,["aria-label","onClick"]),[[Wn,O.value==="date"]]),ne("button",{type:"button","aria-label":p(l)("el.datepicker.nextYear"),class:U([p(s).e("icon-btn"),"d-arrow-right"]),onClick:be=>$(!0)},[Ae(ze.$slots,"next-year",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p($u))]),_:1})])],10,["aria-label","onClick"])],2)],2),[[Wn,O.value!=="time"]]),ne("div",{class:U(p(s).e("content")),onKeydown:et},[O.value==="date"?(D(),Le(lE,{key:0,ref_key:"currentViewRef",ref:S,"selection-mode":p(q),date:_.value,"parsed-value":ze.parsedValue,"disabled-date":p(m),"cell-class-name":p(v),"show-week-number":ze.showWeekNumber,onPick:X},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name","show-week-number"])):Pe("v-if",!0),O.value==="year"?(D(),Le(Zg,{key:1,ref_key:"currentViewRef",ref:S,"selection-mode":p(q),date:_.value,"disabled-date":p(m),"parsed-value":ze.parsedValue,onPick:we},null,8,["selection-mode","date","disabled-date","parsed-value"])):Pe("v-if",!0),O.value==="month"?(D(),Le(Xg,{key:2,ref_key:"currentViewRef",ref:S,"selection-mode":p(q),date:_.value,"parsed-value":ze.parsedValue,"disabled-date":p(m),onPick:ye},null,8,["selection-mode","date","parsed-value","disabled-date"])):Pe("v-if",!0)],34)],2)],2),ze.showFooter&&p(je)?(D(),Z("div",{key:0,class:U(p(s).e("footer"))},[cn(ae(p(Ss),{text:"",size:"small",class:U(p(s).e("link-btn")),disabled:p(j),onClick:he},{default:me(()=>[rn(tt(p(l)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[Wn,!p(le)&&ze.showNow]]),ae(p(Ss),{plain:"",size:"small",class:U(p(s).e("link-btn")),disabled:p(nt),onClick:ue},{default:me(()=>[rn(tt(p(l)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2)):Pe("v-if",!0)],2))}});var Kxe=at(jxe,[["__file","panel-date-pick.vue"]]);const qxe=it({...Vz,...yM}),Yxe=t=>{const{emit:e}=tn(),n=Pc(),r=bs();return i=>{const o=Lt(i.value)?i.value():i.value;if(o){e("pick",[an(o[0]).locale(t.value),an(o[1]).locale(t.value)]);return}i.onClick&&i.onClick({attrs:n,slots:r,emit:e})}},wM=(t,{defaultValue:e,defaultTime:n,leftDate:r,rightDate:s,step:i,unit:o,onParsedValueChanged:a})=>{const{emit:l}=tn(),{pickerNs:c}=_t(gM),u=Qe("date-range-picker"),{t:d,lang:h}=zn(),f=Yxe(h),m=H(),v=H(),y=H({endDate:null,selecting:!1}),g=C=>{y.value=C},S=(C=!1)=>{const T=p(m),I=p(v);Yg([T,I])&&l("pick",[T,I],C)},_=C=>{y.value.selecting=C,C||(y.value.endDate=null)},w=C=>{if(rt(C)&&C.length===2){const[T,I]=C;m.value=T,r.value=T,v.value=I,a(p(m),p(v))}else E()},E=()=>{let[C,T]=C_(p(e),{lang:p(h),step:i,unit:o,unlinkPanels:t.unlinkPanels});const I=M=>M.diff(M.startOf("d"),"ms"),k=p(n);if(k){let M=0,L=0;if(rt(k)){const[N,G]=k.map(an);M=I(N),L=I(G)}else{const N=I(an(k));M=N,L=N}C=C.startOf("d").add(M,"ms"),T=T.startOf("d").add(L,"ms")}m.value=void 0,v.value=void 0,r.value=C,s.value=T};return Be(e,C=>{C&&E()},{immediate:!0}),Be(()=>t.parsedValue,C=>{C!=null&&C.length||w(C)},{immediate:!0}),Be(()=>t.visible,()=>{t.visible&&w(t.parsedValue)},{immediate:!0}),{minDate:m,maxDate:v,rangeState:y,lang:h,ppNs:c,drpNs:u,handleChangeRange:g,handleRangeConfirm:S,handleShortcutClick:f,onSelect:_,onReset:w,t:d}},Xxe=(t,e,n,r)=>{const s=H("date"),i=H(),o=H("date"),a=H(),l=_t(Dc),{disabledDate:c}=l.props,{t:u,lang:d}=zn(),h=R(()=>n.value.year()),f=R(()=>n.value.month()),m=R(()=>r.value.year()),v=R(()=>r.value.month());function y(C,T){const I=u("el.datepicker.year");if(C.value==="year"){const k=Math.floor(T.value/10)*10;return I?`${k} ${I} - ${k+9} ${I}`:`${k} - ${k+9}`}return`${T.value} ${I}`}function g(C){C==null||C.focus()}async function S(C,T){const I=C==="left"?s:o,k=C==="left"?i:a;I.value=T,await Tt(),g(k.value)}async function _(C,T,I){const k=T==="left",M=k?n:r,L=k?r:n,N=k?s:o,G=k?i:a;if(C==="year"){const V=M.value.year(I);M.value=a1(V,d.value,c)}C==="month"&&(M.value=Ep(M.value,M.value.year(),I,d.value,c)),t.unlinkPanels||(L.value=T==="left"?M.value.add(1,"month"):M.value.subtract(1,"month")),N.value=C==="year"?"month":"date",await Tt(),g(G.value),w(C)}function w(C){e("panel-change",[n.value.toDate(),r.value.toDate()],C)}function E(C,T,I){const k=I?"add":"subtract";return C==="year"?T[k](10,"year"):T[k](1,"year")}return{leftCurrentView:s,rightCurrentView:o,leftCurrentViewRef:i,rightCurrentViewRef:a,leftYear:h,rightYear:m,leftMonth:f,rightMonth:v,leftYearLabel:R(()=>y(s,h)),rightYearLabel:R(()=>y(o,m)),showLeftPicker:C=>S("left",C),showRightPicker:C=>S("right",C),handleLeftYearPick:C=>_("year","left",C),handleRightYearPick:C=>_("year","right",C),handleLeftMonthPick:C=>_("month","left",C),handleRightMonthPick:C=>_("month","right",C),handlePanelChange:w,adjustDateByView:E}},wy="month",Zxe=de({__name:"panel-date-range",props:qxe,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(t,{emit:e}){const n=t,r=_t(Dc),s=_t(Dv),{disabledDate:i,cellClassName:o,defaultTime:a,clearable:l}=r.props,c=Yn(r.props,"format"),u=Yn(r.props,"shortcuts"),d=Yn(r.props,"defaultValue"),{lang:h}=zn(),f=H(an().locale(h.value)),m=H(an().locale(h.value).add(1,wy));let v=!0;const{minDate:y,maxDate:g,rangeState:S,ppNs:_,drpNs:w,handleChangeRange:E,handleRangeConfirm:C,handleShortcutClick:T,onSelect:I,onReset:k,t:M}=wM(n,{defaultValue:d,defaultTime:a,leftDate:f,rightDate:m,unit:wy,onParsedValueChanged:sn});Be(()=>n.visible,At=>{!At&&S.value.selecting&&(k(n.parsedValue),I(!1))});const L=H({min:null,max:null}),N=H({min:null,max:null}),{leftCurrentView:G,rightCurrentView:V,leftCurrentViewRef:X,rightCurrentViewRef:F,leftYear:$,rightYear:O,leftMonth:z,rightMonth:re,leftYearLabel:q,rightYearLabel:le,showLeftPicker:fe,showRightPicker:se,handleLeftYearPick:ye,handleRightYearPick:we,handleLeftMonthPick:ve,handleRightMonthPick:xe,handlePanelChange:je,adjustDateByView:nt}=Xxe(n,e,f,m),ue=R(()=>!!u.value.length),j=R(()=>L.value.min!==null?L.value.min:y.value?y.value.format(Re.value):""),he=R(()=>L.value.max!==null?L.value.max:g.value||y.value?(g.value||y.value).format(Re.value):""),K=R(()=>N.value.min!==null?N.value.min:y.value?y.value.format(Oe.value):""),Fe=R(()=>N.value.max!==null?N.value.max:g.value||y.value?(g.value||y.value).format(Oe.value):""),Oe=R(()=>n.timeFormat||QU(c.value)),Re=R(()=>n.dateFormat||JU(c.value)),te=At=>Yg(At)&&(i?!i(At[0].toDate())&&!i(At[1].toDate()):!0),oe=()=>{f.value=nt(G.value,f.value,!1),n.unlinkPanels||(m.value=f.value.add(1,"month")),je("year")},Ee=()=>{f.value=f.value.subtract(1,"month"),n.unlinkPanels||(m.value=f.value.add(1,"month")),je("month")},J=()=>{n.unlinkPanels?m.value=nt(V.value,m.value,!0):(f.value=nt(V.value,f.value,!0),m.value=f.value.add(1,"month")),je("year")},Q=()=>{n.unlinkPanels?m.value=m.value.add(1,"month"):(f.value=f.value.add(1,"month"),m.value=f.value.add(1,"month")),je("month")},_e=()=>{f.value=nt(G.value,f.value,!0),je("year")},ie=()=>{f.value=f.value.add(1,"month"),je("month")},Te=()=>{m.value=nt(V.value,m.value,!1),je("year")},We=()=>{m.value=m.value.subtract(1,"month"),je("month")},ut=R(()=>{const At=(z.value+1)%12,on=z.value+1>=12?1:0;return n.unlinkPanels&&new Date($.value+on,At)<new Date(O.value,re.value)}),lt=R(()=>n.unlinkPanels&&O.value*12+re.value-($.value*12+z.value+1)>=12),St=R(()=>!(y.value&&g.value&&!S.value.selecting&&Yg([y.value,g.value]))),Ot=R(()=>n.type==="datetime"||n.type==="datetimerange"),et=(At,on)=>{if(At)return a?an(a[on]||a).locale(h.value).year(At.year()).month(At.month()).date(At.date()):At},ht=(At,on=!0)=>{const Jt=At.minDate,jr=At.maxDate,Ur=et(Jt,0),Y=et(jr,1);g.value===Y&&y.value===Ur||(e("calendar-change",[Jt.toDate(),jr&&jr.toDate()]),g.value=Y,y.value=Ur,!Ot.value&&on&&(on=!Ur||!Y),v=on)};Be([g,y],([At,on])=>{At&&on&&(C(v),v=!0)});const Mt=H(!1),ze=H(!1),Me=()=>{Mt.value=!1},be=()=>{ze.value=!1},Ve=(At,on)=>{L.value[on]=At;const Jt=an(At,Re.value).locale(h.value);if(Jt.isValid()){if(i&&i(Jt.toDate()))return;on==="min"?(f.value=Jt,y.value=(y.value||f.value).year(Jt.year()).month(Jt.month()).date(Jt.date()),!n.unlinkPanels&&(!g.value||g.value.isBefore(y.value))&&(m.value=Jt.add(1,"month"),g.value=y.value.add(1,"month"))):(m.value=Jt,g.value=(g.value||m.value).year(Jt.year()).month(Jt.month()).date(Jt.date()),!n.unlinkPanels&&(!y.value||y.value.isAfter(g.value))&&(f.value=Jt.subtract(1,"month"),y.value=g.value.subtract(1,"month")))}},mt=(At,on)=>{L.value[on]=null},Ue=(At,on)=>{N.value[on]=At;const Jt=an(At,Oe.value).locale(h.value);Jt.isValid()&&(on==="min"?(Mt.value=!0,y.value=(y.value||f.value).hour(Jt.hour()).minute(Jt.minute()).second(Jt.second())):(ze.value=!0,g.value=(g.value||m.value).hour(Jt.hour()).minute(Jt.minute()).second(Jt.second()),m.value=g.value))},Ct=(At,on)=>{N.value[on]=null,on==="min"?(f.value=y.value,Mt.value=!1,(!g.value||g.value.isBefore(y.value))&&(g.value=y.value)):(m.value=g.value,ze.value=!1,g.value&&g.value.isBefore(y.value)&&(y.value=g.value))},st=(At,on,Jt)=>{N.value.min||(At&&(f.value=At,y.value=(y.value||f.value).hour(At.hour()).minute(At.minute()).second(At.second())),Jt||(Mt.value=on),(!g.value||g.value.isBefore(y.value))&&(g.value=y.value,m.value=At,Tt(()=>{k(n.parsedValue)})))},vt=(At,on,Jt)=>{N.value.max||(At&&(m.value=At,g.value=(g.value||m.value).hour(At.hour()).minute(At.minute()).second(At.second())),Jt||(ze.value=on),g.value&&g.value.isBefore(y.value)&&(y.value=g.value))},Rt=()=>{f.value=C_(p(d),{lang:p(h),unit:"month",unlinkPanels:n.unlinkPanels})[0],m.value=f.value.add(1,"month"),g.value=void 0,y.value=void 0,e("pick",null)},jt=At=>rt(At)?At.map(on=>on.format(c.value)):At.format(c.value),dn=At=>Cp(At,c.value,h.value,s);function sn(At,on){if(n.unlinkPanels&&on){const Jt=(At==null?void 0:At.year())||0,jr=(At==null?void 0:At.month())||0,Ur=on.year(),Y=on.month();m.value=Jt===Ur&&jr===Y?on.add(1,wy):on}else m.value=f.value.add(1,wy),on&&(m.value=m.value.hour(on.hour()).minute(on.minute()).second(on.second()))}return e("set-picker-option",["isValidValue",te]),e("set-picker-option",["parseUserInput",dn]),e("set-picker-option",["formatToString",jt]),e("set-picker-option",["handleClear",Rt]),(At,on)=>(D(),Z("div",{class:U([p(_).b(),p(w).b(),{"has-sidebar":At.$slots.sidebar||p(ue),"has-time":p(Ot)}])},[ne("div",{class:U(p(_).e("body-wrapper"))},[Ae(At.$slots,"sidebar",{class:U(p(_).e("sidebar"))}),p(ue)?(D(),Z("div",{key:0,class:U(p(_).e("sidebar"))},[(D(!0),Z(xt,null,_n(p(u),(Jt,jr)=>(D(),Z("button",{key:jr,type:"button",class:U(p(_).e("shortcut")),onClick:Ur=>p(T)(Jt)},tt(Jt.text),11,["onClick"]))),128))],2)):Pe("v-if",!0),ne("div",{class:U(p(_).e("body"))},[p(Ot)?(D(),Z("div",{key:0,class:U(p(w).e("time-header"))},[ne("span",{class:U(p(w).e("editors-wrap"))},[ne("span",{class:U(p(w).e("time-picker-wrap"))},[ae(p(Ci),{size:"small",disabled:p(S).selecting,placeholder:p(M)("el.datepicker.startDate"),class:U(p(w).e("editor")),"model-value":p(j),"validate-event":!1,onInput:Jt=>Ve(Jt,"min"),onChange:Jt=>mt(Jt,"min")},null,8,["disabled","placeholder","class","model-value","onInput","onChange"])],2),cn((D(),Z("span",{class:U(p(w).e("time-picker-wrap"))},[ae(p(Ci),{size:"small",class:U(p(w).e("editor")),disabled:p(S).selecting,placeholder:p(M)("el.datepicker.startTime"),"model-value":p(K),"validate-event":!1,onFocus:Jt=>Mt.value=!0,onInput:Jt=>Ue(Jt,"min"),onChange:Jt=>Ct(Jt,"min")},null,8,["class","disabled","placeholder","model-value","onFocus","onInput","onChange"]),ae(p(i1),{visible:Mt.value,format:p(Oe),"datetime-role":"start","parsed-value":f.value,onPick:st},null,8,["visible","format","parsed-value"])],2)),[[p(Tc),Me]])],2),ne("span",null,[ae(p(Et),null,{default:me(()=>[ae(p(Ai))]),_:1})]),ne("span",{class:U([p(w).e("editors-wrap"),"is-right"])},[ne("span",{class:U(p(w).e("time-picker-wrap"))},[ae(p(Ci),{size:"small",class:U(p(w).e("editor")),disabled:p(S).selecting,placeholder:p(M)("el.datepicker.endDate"),"model-value":p(he),readonly:!p(y),"validate-event":!1,onInput:Jt=>Ve(Jt,"max"),onChange:Jt=>mt(Jt,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onInput","onChange"])],2),cn((D(),Z("span",{class:U(p(w).e("time-picker-wrap"))},[ae(p(Ci),{size:"small",class:U(p(w).e("editor")),disabled:p(S).selecting,placeholder:p(M)("el.datepicker.endTime"),"model-value":p(Fe),readonly:!p(y),"validate-event":!1,onFocus:Jt=>p(y)&&(ze.value=!0),onInput:Jt=>Ue(Jt,"max"),onChange:Jt=>Ct(Jt,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onFocus","onInput","onChange"]),ae(p(i1),{"datetime-role":"end",visible:ze.value,format:p(Oe),"parsed-value":m.value,onPick:vt},null,8,["visible","format","parsed-value"])],2)),[[p(Tc),be]])],2)],2)):Pe("v-if",!0),ne("div",{class:U([[p(_).e("content"),p(w).e("content")],"is-left"])},[ne("div",{class:U(p(w).e("header"))},[ne("button",{type:"button",class:U([p(_).e("icon-btn"),"d-arrow-left"]),"aria-label":p(M)("el.datepicker.prevYear"),onClick:oe},[Ae(At.$slots,"prev-year",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p(zu))]),_:1})])],10,["aria-label"]),cn(ne("button",{type:"button",class:U([p(_).e("icon-btn"),"arrow-left"]),"aria-label":p(M)("el.datepicker.prevMonth"),onClick:Ee},[Ae(At.$slots,"prev-month",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p(Sc))]),_:1})])],10,["aria-label"]),[[Wn,p(G)==="date"]]),At.unlinkPanels?(D(),Z("button",{key:0,type:"button",disabled:!p(lt),class:U([[p(_).e("icon-btn"),{"is-disabled":!p(lt)}],"d-arrow-right"]),"aria-label":p(M)("el.datepicker.nextYear"),onClick:_e},[Ae(At.$slots,"next-year",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p($u))]),_:1})])],10,["disabled","aria-label"])):Pe("v-if",!0),At.unlinkPanels&&p(G)==="date"?(D(),Z("button",{key:1,type:"button",disabled:!p(ut),class:U([[p(_).e("icon-btn"),{"is-disabled":!p(ut)}],"arrow-right"]),"aria-label":p(M)("el.datepicker.nextMonth"),onClick:ie},[Ae(At.$slots,"next-month",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p(Ai))]),_:1})])],10,["disabled","aria-label"])):Pe("v-if",!0),ne("div",null,[ne("span",{role:"button",class:U(p(w).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:cr(Jt=>p(fe)("year"),["enter"]),onClick:Jt=>p(fe)("year")},tt(p(q)),43,["onKeydown","onClick"]),cn(ne("span",{role:"button","aria-live":"polite",tabindex:"0",class:U([p(w).e("header-label"),{active:p(G)==="month"}]),onKeydown:cr(Jt=>p(fe)("month"),["enter"]),onClick:Jt=>p(fe)("month")},tt(p(M)(`el.datepicker.month${f.value.month()+1}`)),43,["onKeydown","onClick"]),[[Wn,p(G)==="date"]])])],2),p(G)==="date"?(D(),Le(lE,{key:0,ref_key:"leftCurrentViewRef",ref:X,"selection-mode":"range",date:f.value,"min-date":p(y),"max-date":p(g),"range-state":p(S),"disabled-date":p(i),"cell-class-name":p(o),"show-week-number":At.showWeekNumber,onChangerange:p(E),onPick:ht,onSelect:p(I)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","show-week-number","onChangerange","onSelect"])):Pe("v-if",!0),p(G)==="year"?(D(),Le(Zg,{key:1,ref_key:"leftCurrentViewRef",ref:X,"selection-mode":"year",date:f.value,"disabled-date":p(i),"parsed-value":At.parsedValue,onPick:p(ye)},null,8,["date","disabled-date","parsed-value","onPick"])):Pe("v-if",!0),p(G)==="month"?(D(),Le(Xg,{key:2,ref_key:"leftCurrentViewRef",ref:X,"selection-mode":"month",date:f.value,"parsed-value":At.parsedValue,"disabled-date":p(i),onPick:p(ve)},null,8,["date","parsed-value","disabled-date","onPick"])):Pe("v-if",!0)],2),ne("div",{class:U([[p(_).e("content"),p(w).e("content")],"is-right"])},[ne("div",{class:U(p(w).e("header"))},[At.unlinkPanels?(D(),Z("button",{key:0,type:"button",disabled:!p(lt),class:U([[p(_).e("icon-btn"),{"is-disabled":!p(lt)}],"d-arrow-left"]),"aria-label":p(M)("el.datepicker.prevYear"),onClick:Te},[Ae(At.$slots,"prev-year",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p(zu))]),_:1})])],10,["disabled","aria-label"])):Pe("v-if",!0),At.unlinkPanels&&p(V)==="date"?(D(),Z("button",{key:1,type:"button",disabled:!p(ut),class:U([[p(_).e("icon-btn"),{"is-disabled":!p(ut)}],"arrow-left"]),"aria-label":p(M)("el.datepicker.prevMonth"),onClick:We},[Ae(At.$slots,"prev-month",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p(Sc))]),_:1})])],10,["disabled","aria-label"])):Pe("v-if",!0),ne("button",{type:"button","aria-label":p(M)("el.datepicker.nextYear"),class:U([p(_).e("icon-btn"),"d-arrow-right"]),onClick:J},[Ae(At.$slots,"next-year",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p($u))]),_:1})])],10,["aria-label"]),cn(ne("button",{type:"button",class:U([p(_).e("icon-btn"),"arrow-right"]),"aria-label":p(M)("el.datepicker.nextMonth"),onClick:Q},[Ae(At.$slots,"next-month",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p(Ai))]),_:1})])],10,["aria-label"]),[[Wn,p(V)==="date"]]),ne("div",null,[ne("span",{role:"button",class:U(p(w).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:cr(Jt=>p(se)("year"),["enter"]),onClick:Jt=>p(se)("year")},tt(p(le)),43,["onKeydown","onClick"]),cn(ne("span",{role:"button","aria-live":"polite",tabindex:"0",class:U([p(w).e("header-label"),{active:p(V)==="month"}]),onKeydown:cr(Jt=>p(se)("month"),["enter"]),onClick:Jt=>p(se)("month")},tt(p(M)(`el.datepicker.month${m.value.month()+1}`)),43,["onKeydown","onClick"]),[[Wn,p(V)==="date"]])])],2),p(V)==="date"?(D(),Le(lE,{key:0,ref_key:"rightCurrentViewRef",ref:F,"selection-mode":"range",date:m.value,"min-date":p(y),"max-date":p(g),"range-state":p(S),"disabled-date":p(i),"cell-class-name":p(o),"show-week-number":At.showWeekNumber,onChangerange:p(E),onPick:ht,onSelect:p(I)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","show-week-number","onChangerange","onSelect"])):Pe("v-if",!0),p(V)==="year"?(D(),Le(Zg,{key:1,ref_key:"rightCurrentViewRef",ref:F,"selection-mode":"year",date:m.value,"disabled-date":p(i),"parsed-value":At.parsedValue,onPick:p(we)},null,8,["date","disabled-date","parsed-value","onPick"])):Pe("v-if",!0),p(V)==="month"?(D(),Le(Xg,{key:2,ref_key:"rightCurrentViewRef",ref:F,"selection-mode":"month",date:m.value,"parsed-value":At.parsedValue,"disabled-date":p(i),onPick:p(xe)},null,8,["date","parsed-value","disabled-date","onPick"])):Pe("v-if",!0)],2)],2)],2),At.showFooter&&p(Ot)?(D(),Z("div",{key:0,class:U(p(_).e("footer"))},[p(l)?(D(),Le(p(Ss),{key:0,text:"",size:"small",class:U(p(_).e("link-btn")),onClick:Rt},{default:me(()=>[rn(tt(p(M)("el.datepicker.clear")),1)]),_:1},8,["class"])):Pe("v-if",!0),ae(p(Ss),{plain:"",size:"small",class:U(p(_).e("link-btn")),disabled:p(St),onClick:Jt=>p(C)(!1)},{default:me(()=>[rn(tt(p(M)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled","onClick"])],2)):Pe("v-if",!0)],2))}});var Jxe=at(Zxe,[["__file","panel-date-range.vue"]]);const Qxe=it({...yM}),eSe=["pick","set-picker-option","calendar-change"],tSe=({unlinkPanels:t,leftDate:e,rightDate:n})=>{const{t:r}=zn(),s=()=>{e.value=e.value.subtract(1,"year"),t.value||(n.value=n.value.subtract(1,"year"))},i=()=>{t.value||(e.value=e.value.add(1,"year")),n.value=n.value.add(1,"year")},o=()=>{e.value=e.value.add(1,"year")},a=()=>{n.value=n.value.subtract(1,"year")},l=R(()=>`${e.value.year()} ${r("el.datepicker.year")}`),c=R(()=>`${n.value.year()} ${r("el.datepicker.year")}`),u=R(()=>e.value.year()),d=R(()=>n.value.year()===e.value.year()?e.value.year()+1:n.value.year());return{leftPrevYear:s,rightNextYear:i,leftNextYear:o,rightPrevYear:a,leftLabel:l,rightLabel:c,leftYear:u,rightYear:d}},xy="year",nSe=de({name:"DatePickerMonthRange"}),rSe=de({...nSe,props:Qxe,emits:eSe,setup(t,{emit:e}){const n=t,{lang:r}=zn(),s=_t(Dc),i=_t(Dv),{shortcuts:o,disabledDate:a}=s.props,l=Yn(s.props,"format"),c=Yn(s.props,"defaultValue"),u=H(an().locale(r.value)),d=H(an().locale(r.value).add(1,xy)),{minDate:h,maxDate:f,rangeState:m,ppNs:v,drpNs:y,handleChangeRange:g,handleRangeConfirm:S,handleShortcutClick:_,onSelect:w,onReset:E}=wM(n,{defaultValue:c,leftDate:u,rightDate:d,unit:xy,onParsedValueChanged:re}),C=R(()=>!!o.length),{leftPrevYear:T,rightNextYear:I,leftNextYear:k,rightPrevYear:M,leftLabel:L,rightLabel:N,leftYear:G,rightYear:V}=tSe({unlinkPanels:Yn(n,"unlinkPanels"),leftDate:u,rightDate:d}),X=R(()=>n.unlinkPanels&&V.value>G.value+1),F=(q,le=!0)=>{const fe=q.minDate,se=q.maxDate;f.value===se&&h.value===fe||(e("calendar-change",[fe.toDate(),se&&se.toDate()]),f.value=se,h.value=fe,le&&S())},$=()=>{u.value=C_(p(c),{lang:p(r),unit:"year",unlinkPanels:n.unlinkPanels})[0],d.value=u.value.add(1,"year"),e("pick",null)},O=q=>rt(q)?q.map(le=>le.format(l.value)):q.format(l.value),z=q=>Cp(q,l.value,r.value,i);function re(q,le){if(n.unlinkPanels&&le){const fe=(q==null?void 0:q.year())||0,se=le.year();d.value=fe===se?le.add(1,xy):le}else d.value=u.value.add(1,xy)}return Be(()=>n.visible,q=>{!q&&m.value.selecting&&(E(n.parsedValue),w(!1))}),e("set-picker-option",["isValidValue",Yg]),e("set-picker-option",["formatToString",O]),e("set-picker-option",["parseUserInput",z]),e("set-picker-option",["handleClear",$]),(q,le)=>(D(),Z("div",{class:U([p(v).b(),p(y).b(),{"has-sidebar":!!q.$slots.sidebar||p(C)}])},[ne("div",{class:U(p(v).e("body-wrapper"))},[Ae(q.$slots,"sidebar",{class:U(p(v).e("sidebar"))}),p(C)?(D(),Z("div",{key:0,class:U(p(v).e("sidebar"))},[(D(!0),Z(xt,null,_n(p(o),(fe,se)=>(D(),Z("button",{key:se,type:"button",class:U(p(v).e("shortcut")),onClick:ye=>p(_)(fe)},tt(fe.text),11,["onClick"]))),128))],2)):Pe("v-if",!0),ne("div",{class:U(p(v).e("body"))},[ne("div",{class:U([[p(v).e("content"),p(y).e("content")],"is-left"])},[ne("div",{class:U(p(y).e("header"))},[ne("button",{type:"button",class:U([p(v).e("icon-btn"),"d-arrow-left"]),onClick:p(T)},[Ae(q.$slots,"prev-year",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p(zu))]),_:1})])],10,["onClick"]),q.unlinkPanels?(D(),Z("button",{key:0,type:"button",disabled:!p(X),class:U([[p(v).e("icon-btn"),{[p(v).is("disabled")]:!p(X)}],"d-arrow-right"]),onClick:p(k)},[Ae(q.$slots,"next-year",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p($u))]),_:1})])],10,["disabled","onClick"])):Pe("v-if",!0),ne("div",null,tt(p(L)),1)],2),ae(Xg,{"selection-mode":"range",date:u.value,"min-date":p(h),"max-date":p(f),"range-state":p(m),"disabled-date":p(a),onChangerange:p(g),onPick:F,onSelect:p(w)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),ne("div",{class:U([[p(v).e("content"),p(y).e("content")],"is-right"])},[ne("div",{class:U(p(y).e("header"))},[q.unlinkPanels?(D(),Z("button",{key:0,type:"button",disabled:!p(X),class:U([[p(v).e("icon-btn"),{"is-disabled":!p(X)}],"d-arrow-left"]),onClick:p(M)},[Ae(q.$slots,"prev-year",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p(zu))]),_:1})])],10,["disabled","onClick"])):Pe("v-if",!0),ne("button",{type:"button",class:U([p(v).e("icon-btn"),"d-arrow-right"]),onClick:p(I)},[Ae(q.$slots,"next-year",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p($u))]),_:1})])],10,["onClick"]),ne("div",null,tt(p(N)),1)],2),ae(Xg,{"selection-mode":"range",date:d.value,"min-date":p(h),"max-date":p(f),"range-state":p(m),"disabled-date":p(a),onChangerange:p(g),onPick:F,onSelect:p(w)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var sSe=at(rSe,[["__file","panel-month-range.vue"]]);const iSe=it({...yM}),oSe=["pick","set-picker-option","calendar-change"],aSe=({unlinkPanels:t,leftDate:e,rightDate:n})=>{const r=()=>{e.value=e.value.subtract(10,"year"),t.value||(n.value=n.value.subtract(10,"year"))},s=()=>{t.value||(e.value=e.value.add(10,"year")),n.value=n.value.add(10,"year")},i=()=>{e.value=e.value.add(10,"year")},o=()=>{n.value=n.value.subtract(10,"year")},a=R(()=>{const d=Math.floor(e.value.year()/10)*10;return`${d}-${d+9}`}),l=R(()=>{const d=Math.floor(n.value.year()/10)*10;return`${d}-${d+9}`}),c=R(()=>Math.floor(e.value.year()/10)*10+9),u=R(()=>Math.floor(n.value.year()/10)*10);return{leftPrevYear:r,rightNextYear:s,leftNextYear:i,rightPrevYear:o,leftLabel:a,rightLabel:l,leftYear:c,rightYear:u}},uf=10,Sm="year",lSe=de({name:"DatePickerYearRange"}),cSe=de({...lSe,props:iSe,emits:oSe,setup(t,{emit:e}){const n=t,{lang:r}=zn(),s=H(an().locale(r.value)),i=H(an().locale(r.value).add(uf,Sm)),o=_t(Dv),a=_t(Dc),{shortcuts:l,disabledDate:c}=a.props,u=Yn(a.props,"format"),d=Yn(a.props,"defaultValue"),{minDate:h,maxDate:f,rangeState:m,ppNs:v,drpNs:y,handleChangeRange:g,handleRangeConfirm:S,handleShortcutClick:_,onSelect:w,onReset:E}=wM(n,{defaultValue:d,leftDate:s,rightDate:i,step:uf,unit:Sm,onParsedValueChanged:se}),{leftPrevYear:C,rightNextYear:T,leftNextYear:I,rightPrevYear:k,leftLabel:M,rightLabel:L,leftYear:N,rightYear:G}=aSe({unlinkPanels:Yn(n,"unlinkPanels"),leftDate:s,rightDate:i}),V=R(()=>!!l.length),X=R(()=>[v.b(),y.b(),{"has-sidebar":!!bs().sidebar||V.value}]),F=R(()=>({content:[v.e("content"),y.e("content"),"is-left"],arrowLeftBtn:[v.e("icon-btn"),"d-arrow-left"],arrowRightBtn:[v.e("icon-btn"),{[v.is("disabled")]:!O.value},"d-arrow-right"]})),$=R(()=>({content:[v.e("content"),y.e("content"),"is-right"],arrowLeftBtn:[v.e("icon-btn"),{"is-disabled":!O.value},"d-arrow-left"],arrowRightBtn:[v.e("icon-btn"),"d-arrow-right"]})),O=R(()=>n.unlinkPanels&&G.value>N.value+1),z=(ye,we=!0)=>{const ve=ye.minDate,xe=ye.maxDate;f.value===xe&&h.value===ve||(e("calendar-change",[ve.toDate(),xe&&xe.toDate()]),f.value=xe,h.value=ve,we&&S())},re=ye=>Cp(ye,u.value,r.value,o),q=ye=>rt(ye)?ye.map(we=>we.format(u.value)):ye.format(u.value),le=ye=>Yg(ye)&&(c?!c(ye[0].toDate())&&!c(ye[1].toDate()):!0),fe=()=>{const ye=C_(p(d),{lang:p(r),step:uf,unit:Sm,unlinkPanels:n.unlinkPanels});s.value=ye[0],i.value=ye[1],e("pick",null)};function se(ye,we){if(n.unlinkPanels&&we){const ve=(ye==null?void 0:ye.year())||0,xe=we.year();i.value=ve+uf>xe?we.add(uf,Sm):we}else i.value=s.value.add(uf,Sm)}return Be(()=>n.visible,ye=>{!ye&&m.value.selecting&&(E(n.parsedValue),w(!1))}),e("set-picker-option",["isValidValue",le]),e("set-picker-option",["parseUserInput",re]),e("set-picker-option",["formatToString",q]),e("set-picker-option",["handleClear",fe]),(ye,we)=>(D(),Z("div",{class:U(p(X))},[ne("div",{class:U(p(v).e("body-wrapper"))},[Ae(ye.$slots,"sidebar",{class:U(p(v).e("sidebar"))}),p(V)?(D(),Z("div",{key:0,class:U(p(v).e("sidebar"))},[(D(!0),Z(xt,null,_n(p(l),(ve,xe)=>(D(),Z("button",{key:xe,type:"button",class:U(p(v).e("shortcut")),onClick:je=>p(_)(ve)},tt(ve.text),11,["onClick"]))),128))],2)):Pe("v-if",!0),ne("div",{class:U(p(v).e("body"))},[ne("div",{class:U(p(F).content)},[ne("div",{class:U(p(y).e("header"))},[ne("button",{type:"button",class:U(p(F).arrowLeftBtn),onClick:p(C)},[Ae(ye.$slots,"prev-year",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p(zu))]),_:1})])],10,["onClick"]),ye.unlinkPanels?(D(),Z("button",{key:0,type:"button",disabled:!p(O),class:U(p(F).arrowRightBtn),onClick:p(I)},[Ae(ye.$slots,"next-year",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p($u))]),_:1})])],10,["disabled","onClick"])):Pe("v-if",!0),ne("div",null,tt(p(M)),1)],2),ae(Zg,{"selection-mode":"range",date:s.value,"min-date":p(h),"max-date":p(f),"range-state":p(m),"disabled-date":p(c),onChangerange:p(g),onPick:z,onSelect:p(w)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),ne("div",{class:U(p($).content)},[ne("div",{class:U(p(y).e("header"))},[ye.unlinkPanels?(D(),Z("button",{key:0,type:"button",disabled:!p(O),class:U(p($).arrowLeftBtn),onClick:p(k)},[Ae(ye.$slots,"prev-year",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p(zu))]),_:1})])],10,["disabled","onClick"])):Pe("v-if",!0),ne("button",{type:"button",class:U(p($).arrowRightBtn),onClick:p(T)},[Ae(ye.$slots,"next-year",{},()=>[ae(p(Et),null,{default:me(()=>[ae(p($u))]),_:1})])],10,["onClick"]),ne("div",null,tt(p(L)),1)],2),ae(Zg,{"selection-mode":"range",date:i.value,"min-date":p(h),"max-date":p(f),"range-state":p(m),"disabled-date":p(c),onChangerange:p(g),onPick:z,onSelect:p(w)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var uSe=at(cSe,[["__file","panel-year-range.vue"]]);const dSe=function(t){switch(t){case"daterange":case"datetimerange":return Jxe;case"monthrange":return sSe;case"yearrange":return uSe;default:return Kxe}};an.extend(tz);an.extend(rxe);an.extend(fM);an.extend(ixe);an.extend(axe);an.extend(cxe);an.extend(dxe);an.extend(fxe);var hSe=de({name:"ElDatePicker",install:null,props:Rxe,emits:[Qt],setup(t,{expose:e,emit:n,slots:r}){const s=Qe("picker-panel"),i=R(()=>!t.format);Mn(Dv,i),Mn(pM,Ln(Yn(t,"popperOptions"))),Mn(gM,{slots:r,pickerNs:s});const o=H();e({focus:()=>{var c;(c=o.value)==null||c.focus()},blur:()=>{var c;(c=o.value)==null||c.blur()},handleOpen:()=>{var c;(c=o.value)==null||c.handleOpen()},handleClose:()=>{var c;(c=o.value)==null||c.handleClose()}});const l=c=>{n(Qt,c)};return()=>{var c;const u=(c=t.format)!=null?c:pxe[t.type]||Ef,d=dSe(t.type);return ae(Fz,yn(t,{format:u,type:t.type,ref:o,"onUpdate:modelValue":l}),{default:h=>ae(d,h,{"prev-month":r["prev-month"],"next-month":r["next-month"],"prev-year":r["prev-year"],"next-year":r["next-year"]}),"range-separator":r["range-separator"]})}}});const fSe=nn(hSe),xM=Symbol("elDescriptions");var Em=de({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:_t(xM,{})}},render(){var t;const e=x1e(this.cell),n=(((t=this.cell)==null?void 0:t.dirs)||[]).map(g=>{const{dir:S,arg:_,modifiers:w,value:E}=g;return[S,E,_,w]}),{border:r,direction:s}=this.descriptions,i=s==="vertical",o=()=>{var g,S,_;return((_=(S=(g=this.cell)==null?void 0:g.children)==null?void 0:S.label)==null?void 0:_.call(S))||e.label},a=()=>{var g,S,_;return(_=(S=(g=this.cell)==null?void 0:g.children)==null?void 0:S.default)==null?void 0:_.call(S)},l=e.span,c=e.rowspan,u=e.align?`is-${e.align}`:"",d=e.labelAlign?`is-${e.labelAlign}`:u,h=e.className,f=e.labelClassName,m=this.type==="label"&&(e.labelWidth||this.descriptions.labelWidth)||e.width,v={width:qr(m),minWidth:qr(e.minWidth)},y=Qe("descriptions");switch(this.type){case"label":return cn(Ut(this.tag,{style:v,class:[y.e("cell"),y.e("label"),y.is("bordered-label",r),y.is("vertical-label",i),d,f],colSpan:i?l:1,rowspan:i?1:c},o()),n);case"content":return cn(Ut(this.tag,{style:v,class:[y.e("cell"),y.e("content"),y.is("bordered-content",r),y.is("vertical-content",i),u,h],colSpan:i?l:l*2-1,rowspan:i?c*2-1:c},a()),n);default:{const g=o(),S={},_=qr(e.labelWidth||this.descriptions.labelWidth);return _&&(S.width=_,S.display="inline-block"),cn(Ut("td",{style:v,class:[y.e("cell"),u],colSpan:l,rowspan:c},[vs(g)?void 0:Ut("span",{style:S,class:[y.e("label"),f]},g),Ut("span",{class:[y.e("content"),h]},a())]),n)}}}});const pSe=it({row:{type:Ce(Array),default:()=>[]}}),mSe=de({name:"ElDescriptionsRow"}),gSe=de({...mSe,props:pSe,setup(t){const e=_t(xM,{});return(n,r)=>p(e).direction==="vertical"?(D(),Z(xt,{key:0},[ne("tr",null,[(D(!0),Z(xt,null,_n(n.row,(s,i)=>(D(),Le(p(Em),{key:`tr1-${i}`,cell:s,tag:"th",type:"label"},null,8,["cell"]))),128))]),ne("tr",null,[(D(!0),Z(xt,null,_n(n.row,(s,i)=>(D(),Le(p(Em),{key:`tr2-${i}`,cell:s,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(D(),Z("tr",{key:1},[(D(!0),Z(xt,null,_n(n.row,(s,i)=>(D(),Z(xt,{key:`tr3-${i}`},[p(e).border?(D(),Z(xt,{key:0},[ae(p(Em),{cell:s,tag:"td",type:"label"},null,8,["cell"]),ae(p(Em),{cell:s,tag:"td",type:"content"},null,8,["cell"])],64)):(D(),Le(p(Em),{key:1,cell:s,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var vSe=at(gSe,[["__file","descriptions-row.vue"]]);const ySe=it({border:Boolean,column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:Es,title:{type:String,default:""},extra:{type:String,default:""},labelWidth:{type:[String,Number],default:""}}),Hz="ElDescriptionsItem",bSe=de({name:"ElDescriptions"}),_Se=de({...bSe,props:ySe,setup(t){const e=t,n=Qe("descriptions"),r=ys(),s=bs();Mn(xM,e);const i=R(()=>[n.b(),n.m(r.value)]),o=(l,c,u,d=!1)=>(l.props||(l.props={}),c>u&&(l.props.span=u),d&&(l.props.span=c),l),a=()=>{if(!s.default)return[];const l=pl(s.default()).filter(m=>{var v;return((v=m==null?void 0:m.type)==null?void 0:v.name)===Hz}),c=[];let u=[],d=e.column,h=0;const f=[];return l.forEach((m,v)=>{var y,g,S;const _=((y=m.props)==null?void 0:y.span)||1,w=((g=m.props)==null?void 0:g.rowspan)||1,E=c.length;if(f[E]||(f[E]=0),w>1)for(let C=1;C<w;C++)f[S=E+C]||(f[S]=0),f[E+C]++,h++;if(f[E]>0&&(d-=f[E],f[E]=0),v<l.length-1&&(h+=_>d?d:_),v===l.length-1){const C=e.column-h%e.column;u.push(o(m,C,d,!0)),c.push(u);return}_<d?(d-=_,u.push(m)):(u.push(o(m,_,d)),c.push(u),d=e.column,u=[])}),c};return(l,c)=>(D(),Z("div",{class:U(p(i))},[l.title||l.extra||l.$slots.title||l.$slots.extra?(D(),Z("div",{key:0,class:U(p(n).e("header"))},[ne("div",{class:U(p(n).e("title"))},[Ae(l.$slots,"title",{},()=>[rn(tt(l.title),1)])],2),ne("div",{class:U(p(n).e("extra"))},[Ae(l.$slots,"extra",{},()=>[rn(tt(l.extra),1)])],2)],2)):Pe("v-if",!0),ne("div",{class:U(p(n).e("body"))},[ne("table",{class:U([p(n).e("table"),p(n).is("bordered",l.border)])},[ne("tbody",null,[(D(!0),Z(xt,null,_n(a(),(u,d)=>(D(),Le(vSe,{key:d,row:u},null,8,["row"]))),128))])],2)],2)],2))}});var wSe=at(_Se,[["__file","description.vue"]]);const M4=["left","center","right"],xSe=it({label:{type:String,default:""},span:{type:Number,default:1},rowspan:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},labelWidth:{type:[String,Number],default:""},align:{type:String,values:M4,default:"left"},labelAlign:{type:String,values:M4},className:{type:String,default:""},labelClassName:{type:String,default:""}}),Gz=de({name:Hz,props:xSe}),SSe=nn(wSe,{DescriptionsItem:Gz}),ESe=Br(Gz),SM=t=>{if(!t)return{onClick:er,onMousedown:er,onMouseup:er};let e=!1,n=!1;return{onClick:o=>{e&&n&&t(o),e=n=!1},onMousedown:o=>{e=o.target===o.currentTarget},onMouseup:o=>{n=o.target===o.currentTarget}}},CSe=it({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:Ce([String,Array,Object])},zIndex:{type:Ce([String,Number])}}),TSe={click:t=>t instanceof MouseEvent},MSe="overlay";var ASe=de({name:"ElOverlay",props:CSe,emits:TSe,setup(t,{slots:e,emit:n}){const r=Qe(MSe),s=l=>{n("click",l)},{onClick:i,onMousedown:o,onMouseup:a}=SM(t.customMaskEvent?void 0:s);return()=>t.mask?ae("div",{class:[r.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:i,onMousedown:o,onMouseup:a},[Ae(e,"default")],Wo.STYLE|Wo.CLASS|Wo.PROPS,["onClick","onMouseup","onMousedown"]):Ut("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Ae(e,"default")])}});const EM=ASe,Wz=Symbol("dialogInjectionKey"),A4="dialog-fade",jz=it({center:Boolean,alignCenter:{type:Boolean,default:void 0},closeIcon:{type:or},draggable:{type:Boolean,default:void 0},overflow:{type:Boolean,default:void 0},fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),kSe={close:()=>!0},Kz=(t,e,n,r)=>{const s={offsetX:0,offsetY:0},i=(d,h)=>{if(t.value){const{offsetX:f,offsetY:m}=s,v=t.value.getBoundingClientRect(),y=v.left,g=v.top,S=v.width,_=v.height,w=document.documentElement.clientWidth,E=document.documentElement.clientHeight,C=-y+f,T=-g+m,I=w-y-S+f,k=E-g-(_<E?_:0)+m;r!=null&&r.value||(d=Math.min(Math.max(d,C),I),h=Math.min(Math.max(h,T),k)),s.offsetX=d,s.offsetY=h,t.value.style.transform=`translate(${qr(d)}, ${qr(h)})`}},o=d=>{const h=d.clientX,f=d.clientY,{offsetX:m,offsetY:v}=s,y=S=>{const _=m+S.clientX-h,w=v+S.clientY-f;i(_,w)},g=()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",g)},a=()=>{e.value&&t.value&&(e.value.addEventListener("mousedown",o),window.addEventListener("resize",u))},l=()=>{e.value&&t.value&&(e.value.removeEventListener("mousedown",o),window.removeEventListener("resize",u))},c=()=>{s.offsetX=0,s.offsetY=0,t.value&&(t.value.style.transform="")},u=()=>{const{offsetX:d,offsetY:h}=s;i(d,h)};return Zt(()=>{ui(()=>{n.value?a():l()})}),Xn(()=>{l()}),{resetPosition:c,updatePosition:u}},T_=(...t)=>e=>{t.forEach(n=>{Lt(n)?n(e):n.value=e})},ISe=de({name:"ElDialogContent"}),PSe=de({...ISe,props:jz,emits:kSe,setup(t,{expose:e}){const n=t,{t:r}=zn(),{Close:s}=fU,{dialogRef:i,headerRef:o,bodyId:a,ns:l,style:c}=_t(Wz),{focusTrapRef:u}=_t(eM),d=R(()=>[l.b(),l.is("fullscreen",n.fullscreen),l.is("draggable",!!n.draggable),l.is("align-center",!!n.alignCenter),{[l.m("center")]:n.center}]),h=T_(u,i),f=R(()=>!!n.draggable),m=R(()=>!!n.overflow),{resetPosition:v,updatePosition:y}=Kz(i,o,f,m);return e({resetPosition:v,updatePosition:y}),(g,S)=>(D(),Z("div",{ref:p(h),class:U(p(d)),style:Pt(p(c)),tabindex:"-1"},[ne("header",{ref_key:"headerRef",ref:o,class:U([p(l).e("header"),g.headerClass,{"show-close":g.showClose}])},[Ae(g.$slots,"header",{},()=>[ne("span",{role:"heading","aria-level":g.ariaLevel,class:U(p(l).e("title"))},tt(g.title),11,["aria-level"])]),g.showClose?(D(),Z("button",{key:0,"aria-label":p(r)("el.dialog.close"),class:U(p(l).e("headerbtn")),type:"button",onClick:_=>g.$emit("close")},[ae(p(Et),{class:U(p(l).e("close"))},{default:me(()=>[(D(),Le(mn(g.closeIcon||p(s))))]),_:1},8,["class"])],10,["aria-label","onClick"])):Pe("v-if",!0)],2),ne("div",{id:p(a),class:U([p(l).e("body"),g.bodyClass])},[Ae(g.$slots,"default")],10,["id"]),g.$slots.footer?(D(),Z("footer",{key:0,class:U([p(l).e("footer"),g.footerClass])},[Ae(g.$slots,"footer")],2)):Pe("v-if",!0)],6))}});var RSe=at(PSe,[["__file","dialog-content.vue"]]);const qz=it({...jz,appendToBody:Boolean,appendTo:{type:w_.to.type,default:"body"},beforeClose:{type:Ce(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},modalPenetrable:Boolean,openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"},transition:{type:Ce([String,Object]),default:void 0}}),Yz={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Qt]:t=>nr(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},CM=(t,e={})=>{yr(t)||hs("[useLockscreen]","You need to pass a ref param to this function");const n=e.ns||Qe("popup"),r=R(()=>n.bm("parent","hidden"));if(!Vn||ao(document.body,r.value))return;let s=0,i=!1,o="0";const a=()=>{setTimeout(()=>{typeof document>"u"||i&&document&&(document.body.style.width=o,Mi(document.body,r.value))},200)};Be(t,l=>{if(!l){a();return}i=!ao(document.body,r.value),i&&(o=document.body.style.width,Zo(document.body,r.value)),s=rU(n.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,u=rc(document.body,"overflowY");s>0&&(c||u==="scroll")&&i&&(document.body.style.width=`calc(100% - ${s}px)`)}),fT(()=>a())},Xz=(t,e)=>{var n;const s=tn().emit,{nextZIndex:i}=qp();let o="";const a=ni(),l=ni(),c=H(!1),u=H(!1),d=H(!1),h=H((n=t.zIndex)!=null?n:i());let f,m;const v=Yp(),y=R(()=>{var q,le;return(le=(q=v.value)==null?void 0:q.namespace)!=null?le:rg}),g=R(()=>{var q;return(q=v.value)==null?void 0:q.dialog}),S=R(()=>{const q={},le=`--${y.value}-dialog`;return t.fullscreen||(t.top&&(q[`${le}-margin-top`]=t.top),t.width&&(q[`${le}-width`]=qr(t.width))),q}),_=R(()=>{var q,le,fe;return((fe=(le=t.draggable)!=null?le:(q=g.value)==null?void 0:q.draggable)!=null?fe:!1)&&!t.fullscreen}),w=R(()=>{var q,le,fe;return(fe=(le=t.alignCenter)!=null?le:(q=g.value)==null?void 0:q.alignCenter)!=null?fe:!1}),E=R(()=>{var q,le,fe;return(fe=(le=t.overflow)!=null?le:(q=g.value)==null?void 0:q.overflow)!=null?fe:!1}),C=R(()=>w.value?{display:"flex"}:{}),T=R(()=>{var q,le,fe;const se=(fe=(le=t.transition)!=null?le:(q=g.value)==null?void 0:q.transition)!=null?fe:A4,ye={name:se,onAfterEnter:I,onBeforeLeave:M,onAfterLeave:k};if(un(se)){const we={...se},ve=(xe,je)=>nt=>{rt(xe)?xe.forEach(ue=>{Lt(ue)&&ue(nt)}):Lt(xe)&&xe(nt),je()};return we.onAfterEnter=ve(we.onAfterEnter,I),we.onBeforeLeave=ve(we.onBeforeLeave,M),we.onAfterLeave=ve(we.onAfterLeave,k),we.name||(we.name=A4),we}return ye});function I(){s("opened")}function k(){s("closed"),s(Qt,!1),t.destroyOnClose&&(d.value=!1)}function M(){s("close")}function L(){m==null||m(),f==null||f(),t.openDelay&&t.openDelay>0?{stop:f}=rh(()=>X(),t.openDelay):X()}function N(){f==null||f(),m==null||m(),t.closeDelay&&t.closeDelay>0?{stop:m}=rh(()=>F(),t.closeDelay):F()}function G(){function q(le){le||(u.value=!0,c.value=!1)}t.beforeClose?t.beforeClose(q):N()}function V(){t.closeOnClickModal&&G()}function X(){Vn&&(c.value=!0)}function F(){c.value=!1}function $(){s("openAutoFocus")}function O(){s("closeAutoFocus")}function z(q){var le;((le=q.detail)==null?void 0:le.focusReason)==="pointer"&&q.preventDefault()}t.lockScroll&&CM(c);function re(){t.closeOnPressEscape&&G()}return Be(()=>t.zIndex,()=>{var q;h.value=(q=t.zIndex)!=null?q:i()}),Be(()=>t.modelValue,q=>{var le;q?(u.value=!1,L(),d.value=!0,h.value=(le=t.zIndex)!=null?le:i(),Tt(()=>{s("open"),e.value&&(e.value.parentElement.scrollTop=0,e.value.parentElement.scrollLeft=0,e.value.scrollTop=0)})):c.value&&N()}),Be(()=>t.fullscreen,q=>{e.value&&(q?(o=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=o)}),Zt(()=>{t.modelValue&&(c.value=!0,d.value=!0,L())}),{afterEnter:I,afterLeave:k,beforeLeave:M,handleClose:G,onModalClick:V,close:N,doClose:F,onOpenAutoFocus:$,onCloseAutoFocus:O,onCloseRequested:re,onFocusoutPrevented:z,titleId:a,bodyId:l,closed:u,style:S,overlayDialogStyle:C,rendered:d,visible:c,zIndex:h,transitionConfig:T,_draggable:_,_alignCenter:w,_overflow:E}},LSe=de({name:"ElDialog",inheritAttrs:!1}),OSe=de({...LSe,props:qz,emits:Yz,setup(t,{expose:e}){const n=t,r=bs();vc({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},R(()=>!!r.title));const s=Qe("dialog"),i=H(),o=H(),a=H(),{visible:l,titleId:c,bodyId:u,style:d,overlayDialogStyle:h,rendered:f,transitionConfig:m,zIndex:v,_draggable:y,_alignCenter:g,_overflow:S,handleClose:_,onModalClick:w,onOpenAutoFocus:E,onCloseAutoFocus:C,onCloseRequested:T,onFocusoutPrevented:I}=Xz(n,i);Mn(Wz,{dialogRef:i,headerRef:o,bodyId:u,ns:s,rendered:f,style:d});const k=SM(w),M=R(()=>n.modalPenetrable&&!n.modal&&!n.fullscreen);return e({visible:l,dialogContentRef:a,resetPosition:()=>{var N;(N=a.value)==null||N.resetPosition()},handleClose:_}),(N,G)=>(D(),Le(p(Zp),{to:N.appendTo,disabled:N.appendTo!=="body"?!1:!N.appendToBody},{default:me(()=>[ae(Xs,yn(p(m),{persisted:""}),{default:me(()=>{var V;return[cn(ae(p(EM),{"custom-mask-event":"",mask:N.modal,"overlay-class":[(V=N.modalClass)!=null?V:"",`${p(s).namespace.value}-modal-dialog`,p(s).is("penetrable",p(M))],"z-index":p(v)},{default:me(()=>[ne("div",{role:"dialog","aria-modal":"true","aria-label":N.title||void 0,"aria-labelledby":N.title?void 0:p(c),"aria-describedby":p(u),class:U(`${p(s).namespace.value}-overlay-dialog`),style:Pt(p(h)),onClick:p(k).onClick,onMousedown:p(k).onMousedown,onMouseup:p(k).onMouseup},[ae(p(Xp),{loop:"",trapped:p(l),"focus-start-el":"container",onFocusAfterTrapped:p(E),onFocusAfterReleased:p(C),onFocusoutPrevented:p(I),onReleaseRequested:p(T)},{default:me(()=>[p(f)?(D(),Le(RSe,yn({key:0,ref_key:"dialogContentRef",ref:a},N.$attrs,{center:N.center,"align-center":p(g),"close-icon":N.closeIcon,draggable:p(y),overflow:p(S),fullscreen:N.fullscreen,"header-class":N.headerClass,"body-class":N.bodyClass,"footer-class":N.footerClass,"show-close":N.showClose,title:N.title,"aria-level":N.headerAriaLevel,onClose:p(_)}),go({header:me(()=>[N.$slots.title?Ae(N.$slots,"title",{key:1}):Ae(N.$slots,"header",{key:0,close:p(_),titleId:p(c),titleClass:p(s).e("title")})]),default:me(()=>[Ae(N.$slots,"default")]),_:2},[N.$slots.footer?{name:"footer",fn:me(()=>[Ae(N.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):Pe("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[Wn,p(l)]])]}),_:3},16)]),_:3},8,["to","disabled"]))}});var NSe=at(OSe,[["__file","dialog.vue"]]);const Zz=nn(NSe),DSe=it({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Ce(String),default:"solid"}}),FSe=de({name:"ElDivider"}),BSe=de({...FSe,props:DSe,setup(t){const e=t,n=Qe("divider"),r=R(()=>n.cssVar({"border-style":e.borderStyle}));return(s,i)=>(D(),Z("div",{class:U([p(n).b(),p(n).m(s.direction)]),style:Pt(p(r)),role:"separator"},[s.$slots.default&&s.direction!=="vertical"?(D(),Z("div",{key:0,class:U([p(n).e("text"),p(n).is(s.contentPosition)])},[Ae(s.$slots,"default")],2)):Pe("v-if",!0)],6))}});var USe=at(BSe,[["__file","divider.vue"]]);const Jz=nn(USe),zSe=it({...qz,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),$Se=Yz,VSe=de({name:"ElDrawer",inheritAttrs:!1}),HSe=de({...VSe,props:zSe,emits:$Se,setup(t,{expose:e}){const n=t,r=bs();vc({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},R(()=>!!r.title));const s=H(),i=H(),o=Qe("drawer"),{t:a}=zn(),{afterEnter:l,afterLeave:c,beforeLeave:u,visible:d,rendered:h,titleId:f,bodyId:m,zIndex:v,onModalClick:y,onOpenAutoFocus:g,onCloseAutoFocus:S,onFocusoutPrevented:_,onCloseRequested:w,handleClose:E}=Xz(n,s),C=R(()=>n.direction==="rtl"||n.direction==="ltr"),T=R(()=>qr(n.size));return e({handleClose:E,afterEnter:l,afterLeave:c}),(I,k)=>(D(),Le(p(Zp),{to:I.appendTo,disabled:I.appendTo!=="body"?!1:!I.appendToBody},{default:me(()=>[ae(Xs,{name:p(o).b("fade"),onAfterEnter:p(l),onAfterLeave:p(c),onBeforeLeave:p(u),persisted:""},{default:me(()=>[cn(ae(p(EM),{mask:I.modal,"overlay-class":I.modalClass,"z-index":p(v),onClick:p(y)},{default:me(()=>[ae(p(Xp),{loop:"",trapped:p(d),"focus-trap-el":s.value,"focus-start-el":i.value,onFocusAfterTrapped:p(g),onFocusAfterReleased:p(S),onFocusoutPrevented:p(_),onReleaseRequested:p(w)},{default:me(()=>[ne("div",yn({ref_key:"drawerRef",ref:s,"aria-modal":"true","aria-label":I.title||void 0,"aria-labelledby":I.title?void 0:p(f),"aria-describedby":p(m)},I.$attrs,{class:[p(o).b(),I.direction,p(d)&&"open"],style:p(C)?"width: "+p(T):"height: "+p(T),role:"dialog",onClick:$t(()=>{},["stop"])}),[ne("span",{ref_key:"focusStartRef",ref:i,class:U(p(o).e("sr-focus")),tabindex:"-1"},null,2),I.withHeader?(D(),Z("header",{key:0,class:U([p(o).e("header"),I.headerClass])},[I.$slots.title?Ae(I.$slots,"title",{key:1},()=>[Pe(" DEPRECATED SLOT ")]):Ae(I.$slots,"header",{key:0,close:p(E),titleId:p(f),titleClass:p(o).e("title")},()=>[I.$slots.title?Pe("v-if",!0):(D(),Z("span",{key:0,id:p(f),role:"heading","aria-level":I.headerAriaLevel,class:U(p(o).e("title"))},tt(I.title),11,["id","aria-level"]))]),I.showClose?(D(),Z("button",{key:2,"aria-label":p(a)("el.drawer.close"),class:U(p(o).e("close-btn")),type:"button",onClick:p(E)},[ae(p(Et),{class:U(p(o).e("close"))},{default:me(()=>[ae(p(ra))]),_:1},8,["class"])],10,["aria-label","onClick"])):Pe("v-if",!0)],2)):Pe("v-if",!0),p(h)?(D(),Z("div",{key:1,id:p(m),class:U([p(o).e("body"),I.bodyClass])},[Ae(I.$slots,"default")],10,["id"])):Pe("v-if",!0),I.$slots.footer?(D(),Z("div",{key:2,class:U([p(o).e("footer"),I.footerClass])},[Ae(I.$slots,"footer")],2)):Pe("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Wn,p(d)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var GSe=at(HSe,[["__file","drawer.vue"]]);const WSe=nn(GSe),jSe=de({inheritAttrs:!1});function KSe(t,e,n,r,s,i){return Ae(t.$slots,"default")}var qSe=at(jSe,[["render",KSe],["__file","collection.vue"]]);const YSe=de({name:"ElCollectionItem",inheritAttrs:!1});function XSe(t,e,n,r,s,i){return Ae(t.$slots,"default")}var ZSe=at(YSe,[["render",XSe],["__file","collection-item.vue"]]);const Qz="data-el-collection-item",e7=t=>{const e=`El${t}Collection`,n=`${e}Item`,r=Symbol(e),s=Symbol(n),i={...qSe,name:e,setup(){const a=H(),l=new Map;Mn(r,{itemMap:l,getItems:()=>{const u=p(a);if(!u)return[];const d=Array.from(u.querySelectorAll(`[${Qz}]`));return[...l.values()].sort((f,m)=>d.indexOf(f.ref)-d.indexOf(m.ref))},collectionRef:a})}},o={...ZSe,name:n,setup(a,{attrs:l}){const c=H(),u=_t(r,void 0);Mn(s,{collectionItemRef:c}),Zt(()=>{const d=p(c);d&&u.itemMap.set(d,{ref:d,...l})}),Xn(()=>{const d=p(c);u.itemMap.delete(d)})}};return{COLLECTION_INJECTION_KEY:r,COLLECTION_ITEM_INJECTION_KEY:s,ElCollection:i,ElCollectionItem:o}},JSe=it({style:{type:Ce([String,Array,Object])},currentTabId:{type:Ce(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Ce(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:QSe,ElCollectionItem:e2e,COLLECTION_INJECTION_KEY:TM,COLLECTION_ITEM_INJECTION_KEY:t2e}=e7("RovingFocusGroup"),MM=Symbol("elRovingFocusGroup"),t7=Symbol("elRovingFocusGroupItem"),n2e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},r2e=(t,e)=>t,s2e=(t,e,n)=>{const r=r2e(t.code);return n2e[r]},i2e=(t,e)=>t.map((n,r)=>t[(r+e)%t.length]),AM=t=>{const{activeElement:e}=document;for(const n of t)if(n===e||(n.focus(),e!==document.activeElement))return},k4="currentTabIdChange",I4="rovingFocusGroup.entryFocus",o2e={bubbles:!1,cancelable:!0},a2e=de({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:JSe,emits:[k4,"entryFocus"],setup(t,{emit:e}){var n;const r=H((n=t.currentTabId||t.defaultCurrentTabId)!=null?n:null),s=H(!1),i=H(!1),o=H(),{getItems:a}=_t(TM,void 0),l=R(()=>[{outline:"none"},t.style]),c=v=>{e(k4,v)},u=()=>{s.value=!0},d=es(v=>{var y;(y=t.onMousedown)==null||y.call(t,v)},()=>{i.value=!0}),h=es(v=>{var y;(y=t.onFocus)==null||y.call(t,v)},v=>{const y=!p(i),{target:g,currentTarget:S}=v;if(g===S&&y&&!p(s)){const _=new Event(I4,o2e);if(S==null||S.dispatchEvent(_),!_.defaultPrevented){const w=a().filter(k=>k.focusable),E=w.find(k=>k.active),C=w.find(k=>k.id===p(r)),I=[E,C,...w].filter(Boolean).map(k=>k.ref);AM(I)}}i.value=!1}),f=es(v=>{var y;(y=t.onBlur)==null||y.call(t,v)},()=>{s.value=!1}),m=(...v)=>{e("entryFocus",...v)};Mn(MM,{currentTabbedId:Ku(r),loop:Yn(t,"loop"),tabIndex:R(()=>p(s)?-1:0),rovingFocusGroupRef:o,rovingFocusGroupRootStyle:l,orientation:Yn(t,"orientation"),dir:Yn(t,"dir"),onItemFocus:c,onItemShiftTab:u,onBlur:f,onFocus:h,onMousedown:d}),Be(()=>t.currentTabId,v=>{r.value=v??null}),pr(o,I4,m)}});function l2e(t,e,n,r,s,i){return Ae(t.$slots,"default")}var c2e=at(a2e,[["render",l2e],["__file","roving-focus-group-impl.vue"]]);const u2e=de({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:QSe,ElRovingFocusGroupImpl:c2e}});function d2e(t,e,n,r,s,i){const o=Xt("el-roving-focus-group-impl"),a=Xt("el-focus-group-collection");return D(),Le(a,null,{default:me(()=>[ae(o,Ro(Sl(t.$attrs)),{default:me(()=>[Ae(t.$slots,"default")]),_:3},16)]),_:3})}var h2e=at(u2e,[["render",d2e],["__file","roving-focus-group.vue"]]);const ib=it({trigger:jf.trigger,triggerKeys:{type:Ce(Array),default:()=>[bt.enter,bt.numpadEnter,bt.space,bt.down]},effect:{...ss.effect,default:"light"},type:{type:Ce(String)},placement:{type:Ce(String),default:"bottom"},popperOptions:{type:Ce(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Ce([Number,String]),default:0},maxHeight:{type:Ce([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,values:_U,default:"menu"},buttonProps:{type:Ce(Object)},teleported:ss.teleported,persistent:{type:Boolean,default:!0}}),n7=it({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:or}}),f2e=it({onKeydown:{type:Ce(Function)}}),p2e=[bt.down,bt.pageDown,bt.home],r7=[bt.up,bt.pageUp,bt.end],m2e=[...p2e,...r7],{ElCollection:g2e,ElCollectionItem:v2e,COLLECTION_INJECTION_KEY:y2e,COLLECTION_ITEM_INJECTION_KEY:b2e}=e7("Dropdown"),M_=Symbol("elDropdown"),s7="elDropdown",{ButtonGroup:_2e}=Ss,w2e=de({name:"ElDropdown",components:{ElButton:Ss,ElButtonGroup:_2e,ElScrollbar:$a,ElDropdownCollection:g2e,ElTooltip:ri,ElRovingFocusGroup:h2e,ElOnlyChild:EU,ElIcon:Et,ArrowDown:Ll},props:ib,emits:["visible-change","click","command"],setup(t,{emit:e}){const n=tn(),r=Qe("dropdown"),{t:s}=zn(),i=H(),o=H(),a=H(),l=H(),c=H(null),u=H(null),d=H(!1),h=R(()=>({maxHeight:qr(t.maxHeight)})),f=R(()=>[r.m(w.value)]),m=R(()=>Hs(t.trigger)),v=ni().value,y=R(()=>t.id||v);Be([i,m],([F,$],[O])=>{var z,re,q;(z=O==null?void 0:O.$el)!=null&&z.removeEventListener&&O.$el.removeEventListener("pointerenter",C),(re=F==null?void 0:F.$el)!=null&&re.removeEventListener&&F.$el.removeEventListener("pointerenter",C),(q=F==null?void 0:F.$el)!=null&&q.addEventListener&&$.includes("hover")&&F.$el.addEventListener("pointerenter",C)},{immediate:!0}),Xn(()=>{var F,$;($=(F=i.value)==null?void 0:F.$el)!=null&&$.removeEventListener&&i.value.$el.removeEventListener("pointerenter",C)});function g(){S()}function S(){var F;(F=a.value)==null||F.onClose()}function _(){var F;(F=a.value)==null||F.onOpen()}const w=ys();function E(...F){e("command",...F)}function C(){var F,$;($=(F=i.value)==null?void 0:F.$el)==null||$.focus({preventScroll:!0})}function T(){}function I(){const F=p(l);m.value.includes("hover")&&(F==null||F.focus({preventScroll:!0})),u.value=null}function k(F){u.value=F}function M(F){d.value||(F.preventDefault(),F.stopImmediatePropagation())}function L(){e("visible-change",!0)}function N(F){var $;(F==null?void 0:F.type)==="keydown"&&(($=l.value)==null||$.focus())}function G(){e("visible-change",!1)}return Mn(M_,{contentRef:l,role:R(()=>t.role),triggerId:y,isUsingKeyboard:d,onItemEnter:T,onItemLeave:I}),Mn(s7,{instance:n,dropdownSize:w,handleClick:g,commandHandler:E,trigger:Yn(t,"trigger"),hideOnClick:Yn(t,"hideOnClick")}),{t:s,ns:r,scrollbar:c,wrapStyle:h,dropdownTriggerKls:f,dropdownSize:w,triggerId:y,currentTabId:u,handleCurrentTabIdChange:k,handlerMainButtonClick:F=>{e("click",F)},handleEntryFocus:M,handleClose:S,handleOpen:_,handleBeforeShowTooltip:L,handleShowTooltip:N,handleBeforeHideTooltip:G,onFocusAfterTrapped:F=>{var $,O;F.preventDefault(),(O=($=l.value)==null?void 0:$.focus)==null||O.call($,{preventScroll:!0})},popperRef:a,contentRef:l,triggeringElementRef:i,referenceElementRef:o}}});function x2e(t,e,n,r,s,i){var o;const a=Xt("el-dropdown-collection"),l=Xt("el-roving-focus-group"),c=Xt("el-scrollbar"),u=Xt("el-only-child"),d=Xt("el-tooltip"),h=Xt("el-button"),f=Xt("arrow-down"),m=Xt("el-icon"),v=Xt("el-button-group");return D(),Z("div",{class:U([t.ns.b(),t.ns.is("disabled",t.disabled)])},[ae(d,{ref:"popperRef",role:t.role,effect:t.effect,"fallback-placements":["bottom","top"],"popper-options":t.popperOptions,"gpu-acceleration":!1,"hide-after":t.trigger==="hover"?t.hideTimeout:0,"manual-mode":!0,placement:t.placement,"popper-class":[t.ns.e("popper"),t.popperClass],"reference-element":(o=t.referenceElementRef)==null?void 0:o.$el,trigger:t.trigger,"trigger-keys":t.triggerKeys,"trigger-target-el":t.contentRef,"show-after":t.trigger==="hover"?t.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":t.triggeringElementRef,"virtual-triggering":t.splitButton,disabled:t.disabled,transition:`${t.ns.namespace.value}-zoom-in-top`,teleported:t.teleported,pure:"",persistent:t.persistent,onBeforeShow:t.handleBeforeShowTooltip,onShow:t.handleShowTooltip,onBeforeHide:t.handleBeforeHideTooltip},go({content:me(()=>[ae(c,{ref:"scrollbar","wrap-style":t.wrapStyle,tag:"div","view-class":t.ns.e("list")},{default:me(()=>[ae(l,{loop:t.loop,"current-tab-id":t.currentTabId,orientation:"horizontal",onCurrentTabIdChange:t.handleCurrentTabIdChange,onEntryFocus:t.handleEntryFocus},{default:me(()=>[ae(a,null,{default:me(()=>[Ae(t.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[t.splitButton?void 0:{name:"default",fn:me(()=>[ae(u,{id:t.triggerId,ref:"triggeringElementRef",role:"button",tabindex:t.tabindex},{default:me(()=>[Ae(t.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","persistent","onBeforeShow","onShow","onBeforeHide"]),t.splitButton?(D(),Le(v,{key:0},{default:me(()=>[ae(h,yn({ref:"referenceElementRef"},t.buttonProps,{size:t.dropdownSize,type:t.type,disabled:t.disabled,tabindex:t.tabindex,onClick:t.handlerMainButtonClick}),{default:me(()=>[Ae(t.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),ae(h,yn({id:t.triggerId,ref:"triggeringElementRef"},t.buttonProps,{role:"button",size:t.dropdownSize,type:t.type,class:t.ns.e("caret-button"),disabled:t.disabled,tabindex:t.tabindex,"aria-label":t.t("el.dropdown.toggleDropdown")}),{default:me(()=>[ae(m,{class:U(t.ns.e("icon"))},{default:me(()=>[ae(f)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):Pe("v-if",!0)],2)}var S2e=at(w2e,[["render",x2e],["__file","dropdown.vue"]]);const E2e=de({components:{ElRovingFocusCollectionItem:e2e},props:{focusable:{type:Boolean,default:!0},active:Boolean},emits:["mousedown","focus","keydown"],setup(t,{emit:e}){const{currentTabbedId:n,loop:r,onItemFocus:s,onItemShiftTab:i}=_t(MM,void 0),{getItems:o}=_t(TM,void 0),a=ni(),l=H(),c=es(f=>{e("mousedown",f)},f=>{t.focusable?s(p(a)):f.preventDefault()}),u=es(f=>{e("focus",f)},()=>{s(p(a))}),d=es(f=>{e("keydown",f)},f=>{const{code:m,shiftKey:v,target:y,currentTarget:g}=f;if(m===bt.tab&&v){i();return}if(y!==g)return;const S=s2e(f);if(S){f.preventDefault();let w=o().filter(E=>E.focusable).map(E=>E.ref);switch(S){case"last":{w.reverse();break}case"prev":case"next":{S==="prev"&&w.reverse();const E=w.indexOf(g);w=r.value?i2e(w,E+1):w.slice(E+1);break}}Tt(()=>{AM(w)})}}),h=R(()=>n.value===p(a));return Mn(t7,{rovingFocusGroupItemRef:l,tabIndex:R(()=>p(h)?0:-1),handleMousedown:c,handleFocus:u,handleKeydown:d}),{id:a,handleKeydown:d,handleFocus:u,handleMousedown:c}}});function C2e(t,e,n,r,s,i){const o=Xt("el-roving-focus-collection-item");return D(),Le(o,{id:t.id,focusable:t.focusable,active:t.active},{default:me(()=>[Ae(t.$slots,"default")]),_:3},8,["id","focusable","active"])}var T2e=at(E2e,[["render",C2e],["__file","roving-focus-item.vue"]]);const M2e=de({name:"DropdownItemImpl",components:{ElIcon:Et},props:n7,emits:["pointermove","pointerleave","click","clickimpl"],setup(t,{emit:e}){const n=Qe("dropdown"),{role:r}=_t(M_,void 0),{collectionItemRef:s}=_t(b2e,void 0),{collectionItemRef:i}=_t(t2e,void 0),{rovingFocusGroupItemRef:o,tabIndex:a,handleFocus:l,handleKeydown:c,handleMousedown:u}=_t(t7,void 0),d=T_(s,i,o),h=R(()=>r.value==="menu"?"menuitem":r.value==="navigation"?"link":"button"),f=es(m=>{if([bt.enter,bt.numpadEnter,bt.space].includes(m.code))return m.preventDefault(),m.stopImmediatePropagation(),e("clickimpl",m),!0},c);return{ns:n,itemRef:d,dataset:{[Qz]:""},role:h,tabIndex:a,handleFocus:l,handleKeydown:f,handleMousedown:u}}});function A2e(t,e,n,r,s,i){const o=Xt("el-icon");return D(),Z(xt,null,[t.divided?(D(),Z("li",{key:0,role:"separator",class:U(t.ns.bem("menu","item","divided"))},null,2)):Pe("v-if",!0),ne("li",yn({ref:t.itemRef},{...t.dataset,...t.$attrs},{"aria-disabled":t.disabled,class:[t.ns.be("menu","item"),t.ns.is("disabled",t.disabled)],tabindex:t.tabIndex,role:t.role,onClick:a=>t.$emit("clickimpl",a),onFocus:t.handleFocus,onKeydown:$t(t.handleKeydown,["self"]),onMousedown:t.handleMousedown,onPointermove:a=>t.$emit("pointermove",a),onPointerleave:a=>t.$emit("pointerleave",a)}),[t.icon?(D(),Le(o,{key:0},{default:me(()=>[(D(),Le(mn(t.icon)))]),_:1})):Pe("v-if",!0),Ae(t.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var k2e=at(M2e,[["render",A2e],["__file","dropdown-item-impl.vue"]]);const i7=()=>{const t=_t(s7,{}),e=R(()=>t==null?void 0:t.dropdownSize);return{elDropdown:t,_elDropdownSize:e}},I2e=de({name:"ElDropdownItem",components:{ElDropdownCollectionItem:v2e,ElRovingFocusItem:T2e,ElDropdownItemImpl:k2e},inheritAttrs:!1,props:n7,emits:["pointermove","pointerleave","click"],setup(t,{emit:e,attrs:n}){const{elDropdown:r}=i7(),s=tn(),i=H(null),o=R(()=>{var f,m;return(m=(f=p(i))==null?void 0:f.textContent)!=null?m:""}),{onItemEnter:a,onItemLeave:l}=_t(M_,void 0),c=es(f=>(e("pointermove",f),f.defaultPrevented),a4(f=>{if(t.disabled){l(f);return}const m=f.currentTarget;m===document.activeElement||m.contains(document.activeElement)||(a(f),f.defaultPrevented||m==null||m.focus({preventScroll:!0}))})),u=es(f=>(e("pointerleave",f),f.defaultPrevented),a4(l)),d=es(f=>{if(!t.disabled)return e("click",f),f.type!=="keydown"&&f.defaultPrevented},f=>{var m,v,y;if(t.disabled){f.stopImmediatePropagation();return}(m=r==null?void 0:r.hideOnClick)!=null&&m.value&&((v=r.handleClick)==null||v.call(r)),(y=r.commandHandler)==null||y.call(r,t.command,s,f)}),h=R(()=>({...t,...n}));return{handleClick:d,handlePointerMove:c,handlePointerLeave:u,textContent:o,propsAndAttrs:h}}});function P2e(t,e,n,r,s,i){var o;const a=Xt("el-dropdown-item-impl"),l=Xt("el-roving-focus-item"),c=Xt("el-dropdown-collection-item");return D(),Le(c,{disabled:t.disabled,"text-value":(o=t.textValue)!=null?o:t.textContent},{default:me(()=>[ae(l,{focusable:!t.disabled},{default:me(()=>[ae(a,yn(t.propsAndAttrs,{onPointerleave:t.handlePointerLeave,onPointermove:t.handlePointerMove,onClickimpl:t.handleClick}),{default:me(()=>[Ae(t.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var o7=at(I2e,[["render",P2e],["__file","dropdown-item.vue"]]);const R2e=de({name:"ElDropdownMenu",props:f2e,setup(t){const e=Qe("dropdown"),{_elDropdownSize:n}=i7(),r=n.value,{focusTrapRef:s,onKeydown:i}=_t(eM,void 0),{contentRef:o,role:a,triggerId:l}=_t(M_,void 0),{collectionRef:c,getItems:u}=_t(y2e,void 0),{rovingFocusGroupRef:d,rovingFocusGroupRootStyle:h,tabIndex:f,onBlur:m,onFocus:v,onMousedown:y}=_t(MM,void 0),{collectionRef:g}=_t(TM,void 0),S=R(()=>[e.b("menu"),e.bm("menu",r==null?void 0:r.value)]),_=T_(o,c,s,d,g),w=es(C=>{var T;(T=t.onKeydown)==null||T.call(t,C)},C=>{const{currentTarget:T,code:I,target:k}=C;if(T.contains(k),bt.tab===I&&C.stopImmediatePropagation(),C.preventDefault(),k!==p(o)||!m2e.includes(I))return;const L=u().filter(N=>!N.disabled).map(N=>N.ref);r7.includes(I)&&L.reverse(),AM(L)});return{size:r,rovingFocusGroupRootStyle:h,tabIndex:f,dropdownKls:S,role:a,triggerId:l,dropdownListWrapperRef:_,handleKeydown:C=>{w(C),i(C)},onBlur:m,onFocus:v,onMousedown:y}}});function L2e(t,e,n,r,s,i){return D(),Z("ul",{ref:t.dropdownListWrapperRef,class:U(t.dropdownKls),style:Pt(t.rovingFocusGroupRootStyle),tabindex:-1,role:t.role,"aria-labelledby":t.triggerId,onBlur:t.onBlur,onFocus:t.onFocus,onKeydown:$t(t.handleKeydown,["self"]),onMousedown:$t(t.onMousedown,["self"])},[Ae(t.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}var a7=at(R2e,[["render",L2e],["__file","dropdown-menu.vue"]]);const l7=nn(S2e,{DropdownItem:o7,DropdownMenu:a7}),c7=Br(o7),u7=Br(a7),O2e=de({name:"ImgEmpty"}),N2e=de({...O2e,setup(t){const e=Qe("empty"),n=ni();return(r,s)=>(D(),Z("svg",{viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[ne("defs",null,[ne("linearGradient",{id:`linearGradient-1-${p(n)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[ne("stop",{"stop-color":`var(${p(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),ne("stop",{"stop-color":`var(${p(e).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),ne("linearGradient",{id:`linearGradient-2-${p(n)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[ne("stop",{"stop-color":`var(${p(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),ne("stop",{"stop-color":`var(${p(e).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),ne("rect",{id:`path-3-${p(n)}`,x:"0",y:"0",width:"17",height:"36"},null,8,["id"])]),ne("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[ne("g",{transform:"translate(-1268.000000, -535.000000)"},[ne("g",{transform:"translate(1268.000000, 535.000000)"},[ne("path",{d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${p(e).cssVarBlockName("fill-color-3")})`},null,8,["fill"]),ne("polygon",{fill:`var(${p(e).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,["fill"]),ne("g",{transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},[ne("polygon",{fill:`var(${p(e).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,["fill"]),ne("polygon",{fill:`var(${p(e).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,["fill"]),ne("rect",{fill:`url(#linearGradient-1-${p(n)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,["fill"]),ne("polygon",{fill:`var(${p(e).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,["fill"])]),ne("rect",{fill:`url(#linearGradient-2-${p(n)})`,x:"13",y:"45",width:"40",height:"36"},null,8,["fill"]),ne("g",{transform:"translate(53.000000, 45.000000)"},[ne("use",{fill:`var(${p(e).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${p(n)}`},null,8,["fill","xlink:href"]),ne("polygon",{fill:`var(${p(e).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${p(n)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,["fill","mask"])]),ne("polygon",{fill:`var(${p(e).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,["fill"])])])])]))}});var D2e=at(N2e,[["__file","img-empty.vue"]]);const F2e=it({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),B2e=de({name:"ElEmpty"}),U2e=de({...B2e,props:F2e,setup(t){const e=t,{t:n}=zn(),r=Qe("empty"),s=R(()=>e.description||n("el.table.emptyText")),i=R(()=>({width:qr(e.imageSize)}));return(o,a)=>(D(),Z("div",{class:U(p(r).b())},[ne("div",{class:U(p(r).e("image")),style:Pt(p(i))},[o.image?(D(),Z("img",{key:0,src:o.image,ondragstart:"return false"},null,8,["src"])):Ae(o.$slots,"image",{key:1},()=>[ae(D2e)])],6),ne("div",{class:U(p(r).e("description"))},[o.$slots.description?Ae(o.$slots,"description",{key:0}):(D(),Z("p",{key:1},tt(p(s)),1))],2),o.$slots.default?(D(),Z("div",{key:0,class:U(p(r).e("bottom"))},[Ae(o.$slots,"default")],2)):Pe("v-if",!0)],2))}});var z2e=at(U2e,[["__file","empty.vue"]]);const d7=nn(z2e),$2e=it({size:{type:String,values:Rl},disabled:Boolean}),V2e=it({...$2e,model:Object,rules:{type:Ce(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:Ce([Object,Boolean]),default:!0}}),H2e={validate:(t,e,n)=>(rt(t)||kt(t))&&nr(e)&&kt(n)};function G2e(){const t=H([]),e=R(()=>{if(!t.value.length)return"0";const i=Math.max(...t.value);return i?`${i}px`:""});function n(i){const o=t.value.indexOf(i);return o===-1&&e.value,o}function r(i,o){if(i&&o){const a=n(o);t.value.splice(a,1,i)}else i&&t.value.push(i)}function s(i){const o=n(i);o>-1&&t.value.splice(o,1)}return{autoLabelWidth:e,registerLabelWidth:r,deregisterLabelWidth:s}}const Sy=(t,e)=>{const n=Hs(e).map(r=>rt(r)?r.join("."):r);return n.length>0?t.filter(r=>r.propString&&n.includes(r.propString)):t},W2e="ElForm",j2e=de({name:W2e}),K2e=de({...j2e,props:V2e,emits:H2e,setup(t,{expose:e,emit:n}){const r=t,s=H(),i=Ln([]),o=ys(),a=Qe("form"),l=R(()=>{const{labelPosition:w,inline:E}=r;return[a.b(),a.m(o.value||"default"),{[a.m(`label-${w}`)]:w,[a.m("inline")]:E}]}),c=w=>Sy(i,[w])[0],u=w=>{i.push(w)},d=w=>{w.prop&&i.splice(i.indexOf(w),1)},h=(w=[])=>{r.model&&Sy(i,w).forEach(E=>E.resetField())},f=(w=[])=>{Sy(i,w).forEach(E=>E.clearValidate())},m=R(()=>!!r.model),v=w=>{if(i.length===0)return[];const E=Sy(i,w);return E.length?E:[]},y=async w=>S(void 0,w),g=async(w=[])=>{if(!m.value)return!1;const E=v(w);if(E.length===0)return!0;let C={};for(const T of E)try{await T.validate(""),T.validateState==="error"&&!T.error&&T.resetField()}catch(I){C={...C,...I}}return Object.keys(C).length===0?!0:Promise.reject(C)},S=async(w=[],E)=>{let C=!1;const T=!Lt(E);try{return C=await g(w),C===!0&&await(E==null?void 0:E(C)),C}catch(I){if(I instanceof Error)throw I;const k=I;if(r.scrollToError&&s.value){const M=s.value.querySelector(`.${a.b()}-item.is-error`);M==null||M.scrollIntoView(r.scrollIntoViewOptions)}return!C&&await(E==null?void 0:E(!1,k)),T&&Promise.reject(k)}},_=w=>{var E;const C=c(w);C&&((E=C.$el)==null||E.scrollIntoView(r.scrollIntoViewOptions))};return Be(()=>r.rules,()=>{r.validateOnRuleChange&&y().catch(w=>void 0)},{deep:!0,flush:"post"}),Mn(bh,Ln({...Ds(r),emit:n,resetFields:h,clearValidate:f,validateField:S,getField:c,addField:u,removeField:d,...G2e()})),e({validate:y,validateField:S,resetFields:h,clearValidate:f,scrollToField:_,getField:c,fields:i}),(w,E)=>(D(),Z("form",{ref_key:"formRef",ref:s,class:U(p(l))},[Ae(w.$slots,"default")],2))}});var q2e=at(K2e,[["__file","form.vue"]]);function Dd(){return Dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dd.apply(this,arguments)}function Y2e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Jg(t,e)}function cE(t){return cE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cE(t)}function Jg(t,e){return Jg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Jg(t,e)}function X2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ob(t,e,n){return X2e()?ob=Reflect.construct.bind():ob=function(s,i,o){var a=[null];a.push.apply(a,i);var l=Function.bind.apply(s,a),c=new l;return o&&Jg(c,o.prototype),c},ob.apply(null,arguments)}function Z2e(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function uE(t){var e=typeof Map=="function"?new Map:void 0;return uE=function(r){if(r===null||!Z2e(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,s)}function s(){return ob(r,arguments,cE(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Jg(s,r)},uE(t)}var J2e=/%[sdj%]/g,Q2e=function(){};function dE(t){if(!t||!t.length)return null;var e={};return t.forEach(function(n){var r=n.field;e[r]=e[r]||[],e[r].push(n)}),e}function Oo(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var s=0,i=n.length;if(typeof t=="function")return t.apply(null,n);if(typeof t=="string"){var o=t.replace(J2e,function(a){if(a==="%%")return"%";if(s>=i)return a;switch(a){case"%s":return String(n[s++]);case"%d":return Number(n[s++]);case"%j":try{return JSON.stringify(n[s++])}catch{return"[Circular]"}break;default:return a}});return o}return t}function eEe(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function Zs(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||eEe(e)&&typeof t=="string"&&!t)}function tEe(t,e,n){var r=[],s=0,i=t.length;function o(a){r.push.apply(r,a||[]),s++,s===i&&n(r)}t.forEach(function(a){e(a,o)})}function P4(t,e,n){var r=0,s=t.length;function i(o){if(o&&o.length){n(o);return}var a=r;r=r+1,a<s?e(t[a],i):n([])}i([])}function nEe(t){var e=[];return Object.keys(t).forEach(function(n){e.push.apply(e,t[n]||[])}),e}var R4=function(t){Y2e(e,t);function e(n,r){var s;return s=t.call(this,"Async Validation Error")||this,s.errors=n,s.fields=r,s}return e}(uE(Error));function rEe(t,e,n,r,s){if(e.first){var i=new Promise(function(h,f){var m=function(g){return r(g),g.length?f(new R4(g,dE(g))):h(s)},v=nEe(t);P4(v,n,m)});return i.catch(function(h){return h}),i}var o=e.firstFields===!0?Object.keys(t):e.firstFields||[],a=Object.keys(t),l=a.length,c=0,u=[],d=new Promise(function(h,f){var m=function(y){if(u.push.apply(u,y),c++,c===l)return r(u),u.length?f(new R4(u,dE(u))):h(s)};a.length||(r(u),h(s)),a.forEach(function(v){var y=t[v];o.indexOf(v)!==-1?P4(y,n,m):tEe(y,n,m)})});return d.catch(function(h){return h}),d}function sEe(t){return!!(t&&t.message!==void 0)}function iEe(t,e){for(var n=t,r=0;r<e.length;r++){if(n==null)return n;n=n[e[r]]}return n}function L4(t,e){return function(n){var r;return t.fullFields?r=iEe(e,t.fullFields):r=e[n.field||t.fullField],sEe(n)?(n.field=n.field||t.fullField,n.fieldValue=r,n):{message:typeof n=="function"?n():n,fieldValue:r,field:n.field||t.fullField}}}function O4(t,e){if(e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];typeof r=="object"&&typeof t[n]=="object"?t[n]=Dd({},t[n],r):t[n]=r}}return t}var h7=function(e,n,r,s,i,o){e.required&&(!r.hasOwnProperty(e.field)||Zs(n,o||e.type))&&s.push(Oo(i.messages.required,e.fullField))},oEe=function(e,n,r,s,i){(/^\s+$/.test(n)||n==="")&&s.push(Oo(i.messages.whitespace,e.fullField))},Ey,aEe=function(){if(Ey)return Ey;var t="[a-fA-F\\d:]",e=function(w){return w&&w.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",s=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+n+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+n+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+n+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),i=new RegExp("(?:^"+n+"$)|(?:^"+s+"$)"),o=new RegExp("^"+n+"$"),a=new RegExp("^"+s+"$"),l=function(w){return w&&w.exact?i:new RegExp("(?:"+e(w)+n+e(w)+")|(?:"+e(w)+s+e(w)+")","g")};l.v4=function(_){return _&&_.exact?o:new RegExp(""+e(_)+n+e(_),"g")},l.v6=function(_){return _&&_.exact?a:new RegExp(""+e(_)+s+e(_),"g")};var c="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,h=l.v6().source,f="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",m="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",v="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",y="(?::\\d{2,5})?",g='(?:[/?#][^\\s"]*)?',S="(?:"+c+"|www\\.)"+u+"(?:localhost|"+d+"|"+h+"|"+f+m+v+")"+y+g;return Ey=new RegExp("(?:^"+S+"$)","i"),Ey},N4={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Dm={integer:function(e){return Dm.number(e)&&parseInt(e,10)===e},float:function(e){return Dm.number(e)&&!Dm.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!Dm.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(N4.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(aEe())},hex:function(e){return typeof e=="string"&&!!e.match(N4.hex)}},lEe=function(e,n,r,s,i){if(e.required&&n===void 0){h7(e,n,r,s,i);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=e.type;o.indexOf(a)>-1?Dm[a](n)||s.push(Oo(i.messages.types[a],e.fullField,e.type)):a&&typeof n!==e.type&&s.push(Oo(i.messages.types[a],e.fullField,e.type))},cEe=function(e,n,r,s,i){var o=typeof e.len=="number",a=typeof e.min=="number",l=typeof e.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=n,d=null,h=typeof n=="number",f=typeof n=="string",m=Array.isArray(n);if(h?d="number":f?d="string":m&&(d="array"),!d)return!1;m&&(u=n.length),f&&(u=n.replace(c,"_").length),o?u!==e.len&&s.push(Oo(i.messages[d].len,e.fullField,e.len)):a&&!l&&u<e.min?s.push(Oo(i.messages[d].min,e.fullField,e.min)):l&&!a&&u>e.max?s.push(Oo(i.messages[d].max,e.fullField,e.max)):a&&l&&(u<e.min||u>e.max)&&s.push(Oo(i.messages[d].range,e.fullField,e.min,e.max))},df="enum",uEe=function(e,n,r,s,i){e[df]=Array.isArray(e[df])?e[df]:[],e[df].indexOf(n)===-1&&s.push(Oo(i.messages[df],e.fullField,e[df].join(", ")))},dEe=function(e,n,r,s,i){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(n)||s.push(Oo(i.messages.pattern.mismatch,e.fullField,n,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(n)||s.push(Oo(i.messages.pattern.mismatch,e.fullField,n,e.pattern))}}},_r={required:h7,whitespace:oEe,type:lEe,range:cEe,enum:uEe,pattern:dEe},hEe=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Zs(n,"string")&&!e.required)return r();_r.required(e,n,s,o,i,"string"),Zs(n,"string")||(_r.type(e,n,s,o,i),_r.range(e,n,s,o,i),_r.pattern(e,n,s,o,i),e.whitespace===!0&&_r.whitespace(e,n,s,o,i))}r(o)},fEe=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Zs(n)&&!e.required)return r();_r.required(e,n,s,o,i),n!==void 0&&_r.type(e,n,s,o,i)}r(o)},pEe=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(n===""&&(n=void 0),Zs(n)&&!e.required)return r();_r.required(e,n,s,o,i),n!==void 0&&(_r.type(e,n,s,o,i),_r.range(e,n,s,o,i))}r(o)},mEe=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Zs(n)&&!e.required)return r();_r.required(e,n,s,o,i),n!==void 0&&_r.type(e,n,s,o,i)}r(o)},gEe=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Zs(n)&&!e.required)return r();_r.required(e,n,s,o,i),Zs(n)||_r.type(e,n,s,o,i)}r(o)},vEe=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Zs(n)&&!e.required)return r();_r.required(e,n,s,o,i),n!==void 0&&(_r.type(e,n,s,o,i),_r.range(e,n,s,o,i))}r(o)},yEe=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Zs(n)&&!e.required)return r();_r.required(e,n,s,o,i),n!==void 0&&(_r.type(e,n,s,o,i),_r.range(e,n,s,o,i))}r(o)},bEe=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(n==null&&!e.required)return r();_r.required(e,n,s,o,i,"array"),n!=null&&(_r.type(e,n,s,o,i),_r.range(e,n,s,o,i))}r(o)},_Ee=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Zs(n)&&!e.required)return r();_r.required(e,n,s,o,i),n!==void 0&&_r.type(e,n,s,o,i)}r(o)},wEe="enum",xEe=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Zs(n)&&!e.required)return r();_r.required(e,n,s,o,i),n!==void 0&&_r[wEe](e,n,s,o,i)}r(o)},SEe=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Zs(n,"string")&&!e.required)return r();_r.required(e,n,s,o,i),Zs(n,"string")||_r.pattern(e,n,s,o,i)}r(o)},EEe=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Zs(n,"date")&&!e.required)return r();if(_r.required(e,n,s,o,i),!Zs(n,"date")){var l;n instanceof Date?l=n:l=new Date(n),_r.type(e,l,s,o,i),l&&_r.range(e,l.getTime(),s,o,i)}}r(o)},CEe=function(e,n,r,s,i){var o=[],a=Array.isArray(n)?"array":typeof n;_r.required(e,n,s,o,i,a),r(o)},Nx=function(e,n,r,s,i){var o=e.type,a=[],l=e.required||!e.required&&s.hasOwnProperty(e.field);if(l){if(Zs(n,o)&&!e.required)return r();_r.required(e,n,s,a,i,o),Zs(n,o)||_r.type(e,n,s,a,i)}r(a)},TEe=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Zs(n)&&!e.required)return r();_r.required(e,n,s,o,i)}r(o)},ag={string:hEe,method:fEe,number:pEe,boolean:mEe,regexp:gEe,integer:vEe,float:yEe,array:bEe,object:_Ee,enum:xEe,pattern:SEe,date:EEe,url:Nx,hex:Nx,email:Nx,required:CEe,any:TEe};function hE(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var fE=hE(),Fv=function(){function t(n){this.rules=null,this._messages=fE,this.define(n)}var e=t.prototype;return e.define=function(r){var s=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(i){var o=r[i];s.rules[i]=Array.isArray(o)?o:[o]})},e.messages=function(r){return r&&(this._messages=O4(hE(),r)),this._messages},e.validate=function(r,s,i){var o=this;s===void 0&&(s={}),i===void 0&&(i=function(){});var a=r,l=s,c=i;if(typeof l=="function"&&(c=l,l={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,a),Promise.resolve(a);function u(v){var y=[],g={};function S(w){if(Array.isArray(w)){var E;y=(E=y).concat.apply(E,w)}else y.push(w)}for(var _=0;_<v.length;_++)S(v[_]);y.length?(g=dE(y),c(y,g)):c(null,a)}if(l.messages){var d=this.messages();d===fE&&(d=hE()),O4(d,l.messages),l.messages=d}else l.messages=this.messages();var h={},f=l.keys||Object.keys(this.rules);f.forEach(function(v){var y=o.rules[v],g=a[v];y.forEach(function(S){var _=S;typeof _.transform=="function"&&(a===r&&(a=Dd({},a)),g=a[v]=_.transform(g)),typeof _=="function"?_={validator:_}:_=Dd({},_),_.validator=o.getValidationMethod(_),_.validator&&(_.field=v,_.fullField=_.fullField||v,_.type=o.getType(_),h[v]=h[v]||[],h[v].push({rule:_,value:g,source:a,field:v}))})});var m={};return rEe(h,l,function(v,y){var g=v.rule,S=(g.type==="object"||g.type==="array")&&(typeof g.fields=="object"||typeof g.defaultField=="object");S=S&&(g.required||!g.required&&v.value),g.field=v.field;function _(C,T){return Dd({},T,{fullField:g.fullField+"."+C,fullFields:g.fullFields?[].concat(g.fullFields,[C]):[C]})}function w(C){C===void 0&&(C=[]);var T=Array.isArray(C)?C:[C];!l.suppressWarning&&T.length&&t.warning("async-validator:",T),T.length&&g.message!==void 0&&(T=[].concat(g.message));var I=T.map(L4(g,a));if(l.first&&I.length)return m[g.field]=1,y(I);if(!S)y(I);else{if(g.required&&!v.value)return g.message!==void 0?I=[].concat(g.message).map(L4(g,a)):l.error&&(I=[l.error(g,Oo(l.messages.required,g.field))]),y(I);var k={};g.defaultField&&Object.keys(v.value).map(function(N){k[N]=g.defaultField}),k=Dd({},k,v.rule.fields);var M={};Object.keys(k).forEach(function(N){var G=k[N],V=Array.isArray(G)?G:[G];M[N]=V.map(_.bind(null,N))});var L=new t(M);L.messages(l.messages),v.rule.options&&(v.rule.options.messages=l.messages,v.rule.options.error=l.error),L.validate(v.value,v.rule.options||l,function(N){var G=[];I&&I.length&&G.push.apply(G,I),N&&N.length&&G.push.apply(G,N),y(G.length?G:null)})}}var E;if(g.asyncValidator)E=g.asyncValidator(g,v.value,w,v.source,l);else if(g.validator){try{E=g.validator(g,v.value,w,v.source,l)}catch(C){console.error==null||console.error(C),l.suppressValidatorError||setTimeout(function(){throw C},0),w(C.message)}E===!0?w():E===!1?w(typeof g.message=="function"?g.message(g.fullField||g.field):g.message||(g.fullField||g.field)+" fails"):E instanceof Array?w(E):E instanceof Error&&w(E.message)}E&&E.then&&E.then(function(){return w()},function(C){return w(C)})},function(v){u(v)},a)},e.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!ag.hasOwnProperty(r.type))throw new Error(Oo("Unknown rule type %s",r.type));return r.type||"string"},e.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var s=Object.keys(r),i=s.indexOf("message");return i!==-1&&s.splice(i,1),s.length===1&&s[0]==="required"?ag.required:ag[this.getType(r)]||void 0},t}();Fv.register=function(e,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");ag[e]=n};Fv.warning=Q2e;Fv.messages=fE;Fv.validators=ag;const MEe=["","error","validating","success"],AEe=it({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:Ce([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Ce([Object,Array])},error:String,validateStatus:{type:String,values:MEe},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:Rl}}),D4="ElLabelWrap";var kEe=de({name:D4,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(t,{slots:e}){const n=_t(bh,void 0),r=_t(Cl);r||hs(D4,"usage: <el-form-item><label-wrap /></el-form-item>");const s=Qe("form"),i=H(),o=H(0),a=()=>{var u;if((u=i.value)!=null&&u.firstElementChild){const d=window.getComputedStyle(i.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},l=(u="update")=>{Tt(()=>{e.default&&t.isAutoWidth&&(u==="update"?o.value=a():u==="remove"&&(n==null||n.deregisterLabelWidth(o.value)))})},c=()=>l("update");return Zt(()=>{c()}),Xn(()=>{l("remove")}),qa(()=>c()),Be(o,(u,d)=>{t.updateAll&&(n==null||n.registerLabelWidth(u,d))}),Ir(R(()=>{var u,d;return(d=(u=i.value)==null?void 0:u.firstElementChild)!=null?d:null}),c),()=>{var u,d;if(!e)return null;const{isAutoWidth:h}=t;if(h){const f=n==null?void 0:n.autoLabelWidth,m=r==null?void 0:r.hasLabel,v={};if(m&&f&&f!=="auto"){const y=Math.max(0,Number.parseInt(f,10)-o.value),S=(r.labelPosition||n.labelPosition)==="left"?"marginRight":"marginLeft";y&&(v[S]=`${y}px`)}return ae("div",{ref:i,class:[s.be("item","label-wrap")],style:v},[(u=e.default)==null?void 0:u.call(e)])}else return ae(xt,{ref:i},[(d=e.default)==null?void 0:d.call(e)])}}});const IEe=de({name:"ElFormItem"}),PEe=de({...IEe,props:AEe,setup(t,{expose:e}){const n=t,r=bs(),s=_t(bh,void 0),i=_t(Cl,void 0),o=ys(void 0,{formItem:!1}),a=Qe("form-item"),l=ni().value,c=H([]),u=H(""),d=nme(u,100),h=H(""),f=H();let m,v=!1;const y=R(()=>n.labelPosition||(s==null?void 0:s.labelPosition)),g=R(()=>{if(y.value==="top")return{};const xe=qr(n.labelWidth||(s==null?void 0:s.labelWidth)||"");return xe?{width:xe}:{}}),S=R(()=>{if(y.value==="top"||s!=null&&s.inline)return{};if(!n.label&&!n.labelWidth&&M)return{};const xe=qr(n.labelWidth||(s==null?void 0:s.labelWidth)||"");return!n.label&&!r.label?{marginLeft:xe}:{}}),_=R(()=>[a.b(),a.m(o.value),a.is("error",u.value==="error"),a.is("validating",u.value==="validating"),a.is("success",u.value==="success"),a.is("required",X.value||n.required),a.is("no-asterisk",s==null?void 0:s.hideRequiredAsterisk),(s==null?void 0:s.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[a.m("feedback")]:s==null?void 0:s.statusIcon,[a.m(`label-${y.value}`)]:y.value}]),w=R(()=>nr(n.inlineMessage)?n.inlineMessage:(s==null?void 0:s.inlineMessage)||!1),E=R(()=>[a.e("error"),{[a.em("error","inline")]:w.value}]),C=R(()=>n.prop?rt(n.prop)?n.prop.join("."):n.prop:""),T=R(()=>!!(n.label||r.label)),I=R(()=>{var xe;return(xe=n.for)!=null?xe:c.value.length===1?c.value[0]:void 0}),k=R(()=>!I.value&&T.value),M=!!i,L=R(()=>{const xe=s==null?void 0:s.model;if(!(!xe||!n.prop))return sg(xe,n.prop).value}),N=R(()=>{const{required:xe}=n,je=[];n.rules&&je.push(...Hs(n.rules));const nt=s==null?void 0:s.rules;if(nt&&n.prop){const ue=sg(nt,n.prop).value;ue&&je.push(...Hs(ue))}if(xe!==void 0){const ue=je.map((j,he)=>[j,he]).filter(([j])=>Object.keys(j).includes("required"));if(ue.length>0)for(const[j,he]of ue)j.required!==xe&&(je[he]={...j,required:xe});else je.push({required:xe})}return je}),G=R(()=>N.value.length>0),V=xe=>N.value.filter(nt=>!nt.trigger||!xe?!0:rt(nt.trigger)?nt.trigger.includes(xe):nt.trigger===xe).map(({trigger:nt,...ue})=>ue),X=R(()=>N.value.some(xe=>xe.required)),F=R(()=>{var xe;return d.value==="error"&&n.showMessage&&((xe=s==null?void 0:s.showMessage)!=null?xe:!0)}),$=R(()=>`${n.label||""}${(s==null?void 0:s.labelSuffix)||""}`),O=xe=>{u.value=xe},z=xe=>{var je,nt;const{errors:ue,fields:j}=xe;(!ue||!j)&&console.error(xe),O("error"),h.value=ue?(nt=(je=ue==null?void 0:ue[0])==null?void 0:je.message)!=null?nt:`${n.prop} is required`:"",s==null||s.emit("validate",n.prop,!1,h.value)},re=()=>{O("success"),s==null||s.emit("validate",n.prop,!0,"")},q=async xe=>{const je=C.value;return new Fv({[je]:xe}).validate({[je]:L.value},{firstFields:!0}).then(()=>(re(),!0)).catch(ue=>(z(ue),Promise.reject(ue)))},le=async(xe,je)=>{if(v||!n.prop)return!1;const nt=Lt(je);if(!G.value)return je==null||je(!1),!1;const ue=V(xe);return ue.length===0?(je==null||je(!0),!0):(O("validating"),q(ue).then(()=>(je==null||je(!0),!0)).catch(j=>{const{fields:he}=j;return je==null||je(!1,he),nt?!1:Promise.reject(he)}))},fe=()=>{O(""),h.value="",v=!1},se=async()=>{const xe=s==null?void 0:s.model;if(!xe||!n.prop)return;const je=sg(xe,n.prop);v=!0,je.value=Nk(m),await Tt(),fe(),v=!1},ye=xe=>{c.value.includes(xe)||c.value.push(xe)},we=xe=>{c.value=c.value.filter(je=>je!==xe)};Be(()=>n.error,xe=>{h.value=xe||"",O(xe?"error":"")},{immediate:!0}),Be(()=>n.validateStatus,xe=>O(xe||""));const ve=Ln({...Ds(n),$el:f,size:o,validateMessage:h,validateState:u,labelId:l,inputIds:c,isGroup:k,hasLabel:T,fieldValue:L,addInputId:ye,removeInputId:we,resetField:se,clearValidate:fe,validate:le,propString:C});return Mn(Cl,ve),Zt(()=>{n.prop&&(s==null||s.addField(ve),m=Nk(L.value))}),Xn(()=>{s==null||s.removeField(ve)}),e({size:o,validateMessage:h,validateState:u,validate:le,clearValidate:fe,resetField:se}),(xe,je)=>{var nt;return D(),Z("div",{ref_key:"formItemRef",ref:f,class:U(p(_)),role:p(k)?"group":void 0,"aria-labelledby":p(k)?p(l):void 0},[ae(p(kEe),{"is-auto-width":p(g).width==="auto","update-all":((nt=p(s))==null?void 0:nt.labelWidth)==="auto"},{default:me(()=>[p(T)?(D(),Le(mn(p(I)?"label":"div"),{key:0,id:p(l),for:p(I),class:U(p(a).e("label")),style:Pt(p(g))},{default:me(()=>[Ae(xe.$slots,"label",{label:p($)},()=>[rn(tt(p($)),1)])]),_:3},8,["id","for","class","style"])):Pe("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),ne("div",{class:U(p(a).e("content")),style:Pt(p(S))},[Ae(xe.$slots,"default"),ae(tB,{name:`${p(a).namespace.value}-zoom-in-top`},{default:me(()=>[p(F)?Ae(xe.$slots,"error",{key:0,error:h.value},()=>[ne("div",{class:U(p(E))},tt(h.value),3)]):Pe("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var f7=at(PEe,[["__file","form-item.vue"]]);const REe=nn(q2e,{FormItem:f7}),LEe=Br(f7),OEe=it({urlList:{type:Ce(Array),default:()=>Fr([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:Ce(String)}}),NEe={close:()=>!0,switch:t=>Ft(t),rotate:t=>Ft(t)},DEe=de({name:"ElImageViewer"}),FEe=de({...DEe,props:OEe,emits:NEe,setup(t,{expose:e,emit:n}){var r;const s=t,i={CONTAIN:{name:"contain",icon:Oa(yge)},ORIGINAL:{name:"original",icon:Oa(Bge)}};let o,a="";const{t:l}=zn(),c=Qe("image-viewer"),{nextZIndex:u}=qp(),d=H(),h=H([]),f=F8(),m=H(!0),v=H(s.initialIndex),y=br(i.CONTAIN),g=H({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),S=H((r=s.zIndex)!=null?r:u()),_=R(()=>{const{urlList:we}=s;return we.length<=1}),w=R(()=>v.value===0),E=R(()=>v.value===s.urlList.length-1),C=R(()=>s.urlList[v.value]),T=R(()=>[c.e("btn"),c.e("prev"),c.is("disabled",!s.infinite&&w.value)]),I=R(()=>[c.e("btn"),c.e("next"),c.is("disabled",!s.infinite&&E.value)]),k=R(()=>{const{scale:we,deg:ve,offsetX:xe,offsetY:je,enableTransition:nt}=g.value;let ue=xe/we,j=je/we;const he=ve*Math.PI/180,K=Math.cos(he),Fe=Math.sin(he);ue=ue*K+j*Fe,j=j*K-xe/we*Fe;const Oe={transform:`scale(${we}) rotate(${ve}deg) translate(${ue}px, ${j}px)`,transition:nt?"transform .3s":""};return y.value.name===i.CONTAIN.name&&(Oe.maxWidth=Oe.maxHeight="100%"),Oe}),M=R(()=>`${v.value+1} / ${s.urlList.length}`);function L(){G(),o==null||o(),document.body.style.overflow=a,n("close")}function N(){const we=Vd(xe=>{switch(xe.code){case bt.esc:s.closeOnPressEscape&&L();break;case bt.space:O();break;case bt.left:re();break;case bt.up:le("zoomIn");break;case bt.right:q();break;case bt.down:le("zoomOut");break}}),ve=Vd(xe=>{const je=xe.deltaY||xe.deltaX;le(je<0?"zoomIn":"zoomOut",{zoomRate:s.zoomRate,enableTransition:!1})});f.run(()=>{pr(document,"keydown",we),pr(document,"wheel",ve)})}function G(){f.stop()}function V(){m.value=!1}function X(we){m.value=!1,we.target.alt=l("el.image.error")}function F(we){if(m.value||we.button!==0||!d.value)return;g.value.enableTransition=!1;const{offsetX:ve,offsetY:xe}=g.value,je=we.pageX,nt=we.pageY,ue=Vd(he=>{g.value={...g.value,offsetX:ve+he.pageX-je,offsetY:xe+he.pageY-nt}}),j=pr(document,"mousemove",ue);pr(document,"mouseup",()=>{j()}),we.preventDefault()}function $(){g.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function O(){if(m.value)return;const we=vp(i),ve=Object.values(i),xe=y.value.name,nt=(ve.findIndex(ue=>ue.name===xe)+1)%we.length;y.value=i[we[nt]],$()}function z(we){const ve=s.urlList.length;v.value=(we+ve)%ve}function re(){w.value&&!s.infinite||z(v.value-1)}function q(){E.value&&!s.infinite||z(v.value+1)}function le(we,ve={}){if(m.value)return;const{minScale:xe,maxScale:je}=s,{zoomRate:nt,rotateDeg:ue,enableTransition:j}={zoomRate:s.zoomRate,rotateDeg:90,enableTransition:!0,...ve};switch(we){case"zoomOut":g.value.scale>xe&&(g.value.scale=Number.parseFloat((g.value.scale/nt).toFixed(3)));break;case"zoomIn":g.value.scale<je&&(g.value.scale=Number.parseFloat((g.value.scale*nt).toFixed(3)));break;case"clockwise":g.value.deg+=ue,n("rotate",g.value.deg);break;case"anticlockwise":g.value.deg-=ue,n("rotate",g.value.deg);break}g.value.enableTransition=j}function fe(we){var ve;((ve=we.detail)==null?void 0:ve.focusReason)==="pointer"&&we.preventDefault()}function se(){s.closeOnPressEscape&&L()}function ye(we){if(we.ctrlKey){if(we.deltaY<0)return we.preventDefault(),!1;if(we.deltaY>0)return we.preventDefault(),!1}}return Be(C,()=>{Tt(()=>{const we=h.value[0];we!=null&&we.complete||(m.value=!0)})}),Be(v,we=>{$(),n("switch",we)}),Zt(()=>{N(),o=pr("wheel",ye,{passive:!1}),a=document.body.style.overflow,document.body.style.overflow="hidden"}),e({setActiveItem:z}),(we,ve)=>(D(),Le(p(Zp),{to:"body",disabled:!we.teleported},{default:me(()=>[ae(Xs,{name:"viewer-fade",appear:""},{default:me(()=>[ne("div",{ref_key:"wrapper",ref:d,tabindex:-1,class:U(p(c).e("wrapper")),style:Pt({zIndex:S.value})},[ae(p(Xp),{loop:"",trapped:"","focus-trap-el":d.value,"focus-start-el":"container",onFocusoutPrevented:fe,onReleaseRequested:se},{default:me(()=>[ne("div",{class:U(p(c).e("mask")),onClick:$t(xe=>we.hideOnClickModal&&L(),["self"])},null,10,["onClick"]),Pe(" CLOSE "),ne("span",{class:U([p(c).e("btn"),p(c).e("close")]),onClick:L},[ae(p(Et),null,{default:me(()=>[ae(p(ra))]),_:1})],2),Pe(" ARROW "),p(_)?Pe("v-if",!0):(D(),Z(xt,{key:0},[ne("span",{class:U(p(T)),onClick:re},[ae(p(Et),null,{default:me(()=>[ae(p(Sc))]),_:1})],2),ne("span",{class:U(p(I)),onClick:q},[ae(p(Et),null,{default:me(()=>[ae(p(Ai))]),_:1})],2)],64)),we.$slots.progress||we.showProgress?(D(),Z("div",{key:1,class:U([p(c).e("btn"),p(c).e("progress")])},[Ae(we.$slots,"progress",{activeIndex:v.value,total:we.urlList.length},()=>[rn(tt(p(M)),1)])],2)):Pe("v-if",!0),Pe(" ACTIONS "),ne("div",{class:U([p(c).e("btn"),p(c).e("actions")])},[ne("div",{class:U(p(c).e("actions__inner"))},[Ae(we.$slots,"toolbar",{actions:le,prev:re,next:q,reset:O,activeIndex:v.value,setActiveItem:z},()=>[ae(p(Et),{onClick:xe=>le("zoomOut")},{default:me(()=>[ae(p(eve))]),_:1},8,["onClick"]),ae(p(Et),{onClick:xe=>le("zoomIn")},{default:me(()=>[ae(p(hU))]),_:1},8,["onClick"]),ne("i",{class:U(p(c).e("actions__divider"))},null,2),ae(p(Et),{onClick:O},{default:me(()=>[(D(),Le(mn(p(y).icon)))]),_:1}),ne("i",{class:U(p(c).e("actions__divider"))},null,2),ae(p(Et),{onClick:xe=>le("anticlockwise")},{default:me(()=>[ae(p(Oge))]),_:1},8,["onClick"]),ae(p(Et),{onClick:xe=>le("clockwise")},{default:me(()=>[ae(p(Dge))]),_:1},8,["onClick"])])],2)],2),Pe(" CANVAS "),ne("div",{class:U(p(c).e("canvas"))},[(D(!0),Z(xt,null,_n(we.urlList,(xe,je)=>(D(),Z(xt,{key:je},[je===v.value?(D(),Z("img",{key:0,ref_for:!0,ref:nt=>h.value[je]=nt,src:xe,style:Pt(p(k)),class:U(p(c).e("img")),crossorigin:we.crossorigin,onLoad:V,onError:X,onMousedown:F},null,46,["src","crossorigin"])):Pe("v-if",!0)],64))),128))],2),Ae(we.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var BEe=at(FEe,[["__file","image-viewer.vue"]]);const p7=nn(BEe),UEe=it({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:Ce([String,Object])},previewSrcList:{type:Ce(Array),default:()=>Fr([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:Ce(String)}}),zEe={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>Ft(t),close:()=>!0,show:()=>!0},$Ee=de({name:"ElImage",inheritAttrs:!1}),VEe=de({...$Ee,props:UEe,emits:zEe,setup(t,{expose:e,emit:n}){const r=t,{t:s}=zn(),i=Qe("image"),o=Pc(),a=R(()=>Mg(Object.entries(o).filter(([F])=>/^(data-|on[A-Z])/i.test(F)||["id","style"].includes(F)))),l=v_({excludeListeners:!0,excludeKeys:R(()=>Object.keys(a.value))}),c=H(),u=H(!1),d=H(!0),h=H(!1),f=H(),m=H(),v=Vn&&"loading"in HTMLImageElement.prototype;let y;const g=R(()=>[i.e("inner"),_.value&&i.e("preview"),d.value&&i.is("loading")]),S=R(()=>{const{fit:F}=r;return Vn&&F?{objectFit:F}:{}}),_=R(()=>{const{previewSrcList:F}=r;return rt(F)&&F.length>0}),w=R(()=>{const{previewSrcList:F,initialIndex:$}=r;let O=$;return $>F.length-1&&(O=0),O}),E=R(()=>r.loading==="eager"?!1:!v&&r.loading==="lazy"||r.lazy),C=()=>{Vn&&(d.value=!0,u.value=!1,c.value=r.src)};function T(F){d.value=!1,u.value=!1,n("load",F)}function I(F){d.value=!1,u.value=!0,n("error",F)}function k(F){F&&(C(),N())}const M=GB(k,200,!0);async function L(){var F;if(!Vn)return;await Tt();const{scrollContainer:$}=r;if(Ki($))m.value=$;else if(kt($)&&$!=="")m.value=(F=document.querySelector($))!=null?F:void 0;else if(f.value){const z=WT(f.value);m.value=kv(z)?void 0:z}const{stop:O}=hme(f,([z])=>{M(z.isIntersecting)},{root:m});y=O}function N(){!Vn||!M||(y==null||y(),m.value=void 0,y=void 0)}function G(){_.value&&(h.value=!0,n("show"))}function V(){h.value=!1,n("close")}function X(F){n("switch",F)}return Be(()=>r.src,()=>{E.value?(d.value=!0,u.value=!1,N(),L()):C()}),Zt(()=>{E.value?L():C()}),e({showPreview:G}),(F,$)=>(D(),Z("div",yn({ref_key:"container",ref:f},p(a),{class:[p(i).b(),F.$attrs.class]}),[u.value?Ae(F.$slots,"error",{key:0},()=>[ne("div",{class:U(p(i).e("error"))},tt(p(s)("el.image.error")),3)]):(D(),Z(xt,{key:1},[c.value!==void 0?(D(),Z("img",yn({key:0},p(l),{src:c.value,loading:F.loading,style:p(S),class:p(g),crossorigin:F.crossorigin,onClick:G,onLoad:T,onError:I}),null,16,["src","loading","crossorigin"])):Pe("v-if",!0),d.value?(D(),Z("div",{key:1,class:U(p(i).e("wrapper"))},[Ae(F.$slots,"placeholder",{},()=>[ne("div",{class:U(p(i).e("placeholder"))},null,2)])],2)):Pe("v-if",!0)],64)),p(_)?(D(),Z(xt,{key:2},[h.value?(D(),Le(p(p7),{key:0,"z-index":F.zIndex,"initial-index":p(w),infinite:F.infinite,"zoom-rate":F.zoomRate,"min-scale":F.minScale,"max-scale":F.maxScale,"show-progress":F.showProgress,"url-list":F.previewSrcList,crossorigin:F.crossorigin,"hide-on-click-modal":F.hideOnClickModal,teleported:F.previewTeleported,"close-on-press-escape":F.closeOnPressEscape,onClose:V,onSwitch:X},go({toolbar:me(O=>[Ae(F.$slots,"toolbar",Ro(Sl(O)))]),default:me(()=>[F.$slots.viewer?(D(),Z("div",{key:0},[Ae(F.$slots,"viewer")])):Pe("v-if",!0)]),_:2},[F.$slots.progress?{name:"progress",fn:me(O=>[Ae(F.$slots,"progress",Ro(Sl(O)))])}:void 0]),1032,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):Pe("v-if",!0)],64)):Pe("v-if",!0)],16))}});var HEe=at(VEe,[["__file","image.vue"]]);const GEe=nn(HEe),WEe=it({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.MAX_SAFE_INTEGER},min:{type:Number,default:Number.MIN_SAFE_INTEGER},modelValue:{type:[Number,null]},readonly:Boolean,disabled:Boolean,size:Es,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||Ft(t)||["min","max"].includes(t),default:null},name:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0},...hi(["ariaLabel"]),inputmode:{type:Ce(String),default:void 0},align:{type:Ce(String),default:"center"},disabledScientific:Boolean}),jEe={[xn]:(t,e)=>e!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[xs]:t=>Ft(t)||vs(t),[Qt]:t=>Ft(t)||vs(t)},KEe=de({name:"ElInputNumber"}),qEe=de({...KEe,props:WEe,emits:jEe,setup(t,{expose:e,emit:n}){const r=t,{t:s}=zn(),i=Qe("input-number"),o=H(),a=Ln({currentValue:r.modelValue,userInput:null}),{formItem:l}=fi(),c=R(()=>Ft(r.modelValue)&&r.modelValue<=r.min),u=R(()=>Ft(r.modelValue)&&r.modelValue>=r.max),d=R(()=>{const F=g(r.step);return Bn(r.precision)?Math.max(g(r.modelValue),F):(F>r.precision,r.precision)}),h=R(()=>r.controls&&r.controlsPosition==="right"),f=ys(),m=pi(),v=R(()=>{if(a.userInput!==null)return a.userInput;let F=a.currentValue;if(vs(F))return"";if(Ft(F)){if(Number.isNaN(F))return"";Bn(r.precision)||(F=F.toFixed(r.precision))}return F}),y=(F,$)=>{if(Bn($)&&($=d.value),$===0)return Math.round(F);let O=String(F);const z=O.indexOf(".");if(z===-1||!O.replace(".","").split("")[z+$])return F;const le=O.length;return O.charAt(le-1)==="5"&&(O=`${O.slice(0,Math.max(0,le-1))}6`),Number.parseFloat(Number(O).toFixed($))},g=F=>{if(vs(F))return 0;const $=F.toString(),O=$.indexOf(".");let z=0;return O!==-1&&(z=$.length-O-1),z},S=(F,$=1)=>Ft(F)?F>=Number.MAX_SAFE_INTEGER&&$===1||F<=Number.MIN_SAFE_INTEGER&&$===-1?F:y(F+r.step*$):a.currentValue,_=F=>{var $;const O=F;if(r.disabledScientific&&["e","E"].includes(O.key)){O.preventDefault();return}const z={[bt.up]:()=>{O.preventDefault(),w()},[bt.down]:()=>{O.preventDefault(),E()}};($=z[O.key])==null||$.call(z)},w=()=>{if(r.readonly||m.value||u.value)return;const F=Number(v.value)||0,$=S(F);T($),n(xs,a.currentValue),V()},E=()=>{if(r.readonly||m.value||c.value)return;const F=Number(v.value)||0,$=S(F,-1);T($),n(xs,a.currentValue),V()},C=(F,$)=>{const{max:O,min:z,step:re,precision:q,stepStrictly:le,valueOnClear:fe}=r;O<z&&hs("InputNumber","min should not be greater than max.");let se=Number(F);if(vs(F)||Number.isNaN(se))return null;if(F===""){if(fe===null)return null;se=kt(fe)?{min:z,max:O}[fe]:fe}return le&&(se=y(Math.round(se/re)*re,q),se!==F&&$&&n(Qt,se)),Bn(q)||(se=y(se,q)),(se>O||se<z)&&(se=se>O?O:z,$&&n(Qt,se)),se},T=(F,$=!0)=>{var O;const z=a.currentValue,re=C(F);if(!$){n(Qt,re);return}z===re&&F||(a.userInput=null,n(Qt,re),z!==re&&n(xn,re,z),r.validateEvent&&((O=l==null?void 0:l.validate)==null||O.call(l,"change").catch(q=>void 0)),a.currentValue=re)},I=F=>{a.userInput=F;const $=F===""?null:Number(F);n(xs,$),T($,!1)},k=F=>{const $=F!==""?Number(F):"";(Ft($)&&!Number.isNaN($)||F==="")&&T($),V(),a.userInput=null},M=()=>{var F,$;($=(F=o.value)==null?void 0:F.focus)==null||$.call(F)},L=()=>{var F,$;($=(F=o.value)==null?void 0:F.blur)==null||$.call(F)},N=F=>{n("focus",F)},G=F=>{var $,O;a.userInput=null,a.currentValue===null&&(($=o.value)!=null&&$.input)&&(o.value.input.value=""),n("blur",F),r.validateEvent&&((O=l==null?void 0:l.validate)==null||O.call(l,"blur").catch(z=>void 0))},V=()=>{a.currentValue!==r.modelValue&&(a.currentValue=r.modelValue)},X=F=>{document.activeElement===F.target&&F.preventDefault()};return Be(()=>r.modelValue,(F,$)=>{const O=C(F,!0);a.userInput===null&&O!==$&&(a.currentValue=O)},{immediate:!0}),Be(()=>r.precision,()=>{a.currentValue=C(r.modelValue)}),Zt(()=>{var F;const{min:$,max:O,modelValue:z}=r,re=(F=o.value)==null?void 0:F.input;if(re.setAttribute("role","spinbutton"),Number.isFinite(O)?re.setAttribute("aria-valuemax",String(O)):re.removeAttribute("aria-valuemax"),Number.isFinite($)?re.setAttribute("aria-valuemin",String($)):re.removeAttribute("aria-valuemin"),re.setAttribute("aria-valuenow",a.currentValue||a.currentValue===0?String(a.currentValue):""),re.setAttribute("aria-disabled",String(m.value)),!Ft(z)&&z!=null){let q=Number(z);Number.isNaN(q)&&(q=null),n(Qt,q)}re.addEventListener("wheel",X,{passive:!1})}),qa(()=>{var F,$;const O=(F=o.value)==null?void 0:F.input;O==null||O.setAttribute("aria-valuenow",`${($=a.currentValue)!=null?$:""}`)}),e({focus:M,blur:L}),(F,$)=>(D(),Z("div",{class:U([p(i).b(),p(i).m(p(f)),p(i).is("disabled",p(m)),p(i).is("without-controls",!F.controls),p(i).is("controls-right",p(h)),p(i).is(F.align,!!F.align)]),onDragstart:$t(()=>{},["prevent"])},[F.controls?cn((D(),Z("span",{key:0,role:"button","aria-label":p(s)("el.inputNumber.decrease"),class:U([p(i).e("decrease"),p(i).is("disabled",p(c))]),onKeydown:cr(E,["enter"])},[Ae(F.$slots,"decrease-icon",{},()=>[ae(p(Et),null,{default:me(()=>[p(h)?(D(),Le(p(Ll),{key:0})):(D(),Le(p(Ege),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[p(s1),E]]):Pe("v-if",!0),F.controls?cn((D(),Z("span",{key:1,role:"button","aria-label":p(s)("el.inputNumber.increase"),class:U([p(i).e("increase"),p(i).is("disabled",p(u))]),onKeydown:cr(w,["enter"])},[Ae(F.$slots,"increase-icon",{},()=>[ae(p(Et),null,{default:me(()=>[p(h)?(D(),Le(p(p_),{key:0})):(D(),Le(p(uU),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[p(s1),w]]):Pe("v-if",!0),ae(p(Ci),{id:F.id,ref_key:"input",ref:o,type:"number",step:F.step,"model-value":p(v),placeholder:F.placeholder,readonly:F.readonly,disabled:p(m),size:p(f),max:F.max,min:F.min,name:F.name,"aria-label":F.ariaLabel,"validate-event":!1,inputmode:F.inputmode,onKeydown:_,onBlur:G,onFocus:N,onInput:I,onChange:k},go({_:2},[F.$slots.prefix?{name:"prefix",fn:me(()=>[Ae(F.$slots,"prefix")])}:void 0,F.$slots.suffix?{name:"suffix",fn:me(()=>[Ae(F.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","inputmode"])],42,["onDragstart"]))}});var YEe=at(qEe,[["__file","input-number.vue"]]);const m7=nn(YEe),XEe=it({modelValue:{type:Ce(Array)},max:Number,tagType:{...Cc.type,default:"info"},tagEffect:Cc.effect,trigger:{type:Ce(String),default:bt.enter},draggable:Boolean,delimiter:{type:[String,RegExp],default:""},size:Es,clearable:Boolean,disabled:{type:Boolean,default:void 0},validateEvent:{type:Boolean,default:!0},readonly:Boolean,autofocus:Boolean,id:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},placeholder:String,autocomplete:{type:String,default:"off"},saveOnBlur:{type:Boolean,default:!0},ariaLabel:String}),ZEe={[Qt]:t=>rt(t)||Bn(t),[xn]:t=>rt(t)||Bn(t),[xs]:t=>kt(t),"add-tag":t=>kt(t)||rt(t),"remove-tag":t=>kt(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0};function JEe({props:t,emit:e,formItem:n}){const r=pi(),s=ys(),i=br(),o=H(),a=R(()=>["small"].includes(s.value)?"small":"default"),l=R(()=>{var L;return(L=t.modelValue)!=null&&L.length?void 0:t.placeholder}),c=R(()=>!(t.readonly||r.value)),u=R(()=>{var L,N;return Bn(t.max)?!1:((N=(L=t.modelValue)==null?void 0:L.length)!=null?N:0)>=t.max}),d=L=>{var N;const G=[...(N=t.modelValue)!=null?N:[],...Hs(L)];e(Qt,G),e(xn,G),e("add-tag",L),o.value=void 0},h=L=>{var N,G;const V=L.split(t.delimiter).filter(X=>X&&X!==L);if(t.max){const X=t.max-((G=(N=t.modelValue)==null?void 0:N.length)!=null?G:0);V.splice(X)}return V.length===1?V[0]:V},f=L=>{if(u.value){o.value=void 0;return}if(!T.value){if(t.delimiter&&o.value){const N=h(o.value);N.length&&d(N)}e(xs,L.target.value)}},m=L=>{var N;if(!T.value)switch(L.code){case t.trigger:L.preventDefault(),L.stopPropagation(),v();break;case bt.numpadEnter:t.trigger===bt.enter&&(L.preventDefault(),L.stopPropagation(),v());break;case bt.backspace:!o.value&&((N=t.modelValue)!=null&&N.length)&&(L.preventDefault(),L.stopPropagation(),y(t.modelValue.length-1));break}},v=()=>{var L;const N=(L=o.value)==null?void 0:L.trim();!N||u.value||d(N)},y=L=>{var N;const G=((N=t.modelValue)!=null?N:[]).slice(),[V]=G.splice(L,1);e(Qt,G),e(xn,G),e("remove-tag",V)},g=()=>{o.value=void 0,e(Qt,void 0),e(xn,void 0),e("clear")},S=(L,N,G)=>{var V;const X=((V=t.modelValue)!=null?V:[]).slice(),[F]=X.splice(L,1),$=N>L&&G==="before"?-1:N<L&&G==="after"?1:0;X.splice(N+$,0,F),e(Qt,X),e(xn,X)},_=()=>{var L;(L=i.value)==null||L.focus()},w=()=>{var L;(L=i.value)==null||L.blur()},{wrapperRef:E,isFocused:C}=Zu(i,{disabled:r,afterBlur(){var L;t.saveOnBlur?v():o.value=void 0,t.validateEvent&&((L=n==null?void 0:n.validate)==null||L.call(n,"blur").catch(N=>void 0))}}),{isComposing:T,handleCompositionStart:I,handleCompositionUpdate:k,handleCompositionEnd:M}=Lv({afterComposition:f});return Be(()=>t.modelValue,()=>{var L;t.validateEvent&&((L=n==null?void 0:n.validate)==null||L.call(n,xn).catch(N=>void 0))}),{inputRef:i,wrapperRef:E,isFocused:C,isComposing:T,inputValue:o,size:s,tagSize:a,placeholder:l,closable:c,disabled:r,inputLimit:u,handleDragged:S,handleInput:f,handleKeydown:m,handleAddTag:v,handleRemoveTag:y,handleClear:g,handleCompositionStart:I,handleCompositionUpdate:k,handleCompositionEnd:M,focus:_,blur:w}}function QEe(){const t=H(!1);return{hovering:t,handleMouseEnter:()=>{t.value=!0},handleMouseLeave:()=>{t.value=!1}}}function kM(){const t=br(),e=H(0),n=11,r=R(()=>({minWidth:`${Math.max(e.value,n)}px`}));return Ir(t,()=>{var i,o;e.value=(o=(i=t.value)==null?void 0:i.getBoundingClientRect().width)!=null?o:0}),{calculatorRef:t,calculatorWidth:e,inputStyle:r}}function eCe({wrapperRef:t,handleDragged:e,afterDragged:n}){const r=Qe("input-tag"),s=br(),i=H(!1);let o,a,l,c;function u(m){return`.${r.e("inner")} .${r.namespace.value}-tag:nth-child(${m+1})`}function d(m,v){o=v,a=t.value.querySelector(u(v)),a&&(a.style.opacity="0.5"),m.dataTransfer.effectAllowed="move"}function h(m,v){if(l=v,m.preventDefault(),m.dataTransfer.dropEffect="move",Bn(o)||o===v){i.value=!1;return}const y=t.value.querySelector(u(v)).getBoundingClientRect(),g=o+1!==v,S=o-1!==v,_=m.clientX-y.left,w=g?S?.5:1:-1,E=S?g?.5:0:1;_<=y.width*w?c="before":_>y.width*E?c="after":c=void 0;const C=t.value.querySelector(`.${r.e("inner")}`),T=C.getBoundingClientRect(),I=Number.parseFloat(rc(C,"gap"))/2,k=y.top-T.top;let M=-9999;if(c==="before")M=Math.max(y.left-T.left-I,Math.floor(-I/2));else if(c==="after"){const L=y.right-T.left;M=L+(T.width===L?Math.floor(I/2):I)}nU(s.value,{top:`${k}px`,left:`${M}px`}),i.value=!!c}function f(m){m.preventDefault(),a&&(a.style.opacity=""),c&&!Bn(o)&&!Bn(l)&&o!==l&&e(o,l,c),i.value=!1,o=void 0,a=null,l=void 0,c=void 0,n==null||n()}return{dropIndicatorRef:s,showDropIndicator:i,handleDragStart:d,handleDragOver:h,handleDragEnd:f}}function tCe({props:t,isFocused:e,hovering:n,disabled:r,inputValue:s,size:i,validateState:o,validateIcon:a,needStatusIcon:l}){const c=Pc(),u=bs(),d=Qe("input-tag"),h=Qe("input"),f=R(()=>[d.b(),d.is("focused",e.value),d.is("hovering",n.value),d.is("disabled",r.value),d.m(i.value),d.e("wrapper"),c.class]),m=R(()=>[c.style]),v=R(()=>{var S,_;return[d.e("inner"),d.is("draggable",t.draggable),d.is("left-space",!((S=t.modelValue)!=null&&S.length)&&!u.prefix),d.is("right-space",!((_=t.modelValue)!=null&&_.length)&&!g.value)]}),y=R(()=>{var S;return t.clearable&&!r.value&&!t.readonly&&(((S=t.modelValue)==null?void 0:S.length)||s.value)&&(e.value||n.value)}),g=R(()=>u.suffix||y.value||o.value&&a.value&&l.value);return{ns:d,nsInput:h,containerKls:f,containerStyle:m,innerKls:v,showClear:y,showSuffix:g}}const nCe=de({name:"ElInputTag",inheritAttrs:!1}),rCe=de({...nCe,props:XEe,emits:ZEe,setup(t,{expose:e,emit:n}){const r=t,s=v_(),i=bs(),{form:o,formItem:a}=fi(),{inputId:l}=la(r,{formItemContext:a}),c=R(()=>{var j;return(j=o==null?void 0:o.statusIcon)!=null?j:!1}),u=R(()=>(a==null?void 0:a.validateState)||""),d=R(()=>u.value&&g_[u.value]),{inputRef:h,wrapperRef:f,isFocused:m,inputValue:v,size:y,tagSize:g,placeholder:S,closable:_,disabled:w,handleDragged:E,handleInput:C,handleKeydown:T,handleRemoveTag:I,handleClear:k,handleCompositionStart:M,handleCompositionUpdate:L,handleCompositionEnd:N,focus:G,blur:V}=JEe({props:r,emit:n,formItem:a}),{hovering:X,handleMouseEnter:F,handleMouseLeave:$}=QEe(),{calculatorRef:O,inputStyle:z}=kM(),{dropIndicatorRef:re,showDropIndicator:q,handleDragStart:le,handleDragOver:fe,handleDragEnd:se}=eCe({wrapperRef:f,handleDragged:E,afterDragged:G}),{ns:ye,nsInput:we,containerKls:ve,containerStyle:xe,innerKls:je,showClear:nt,showSuffix:ue}=tCe({props:r,hovering:X,isFocused:m,inputValue:v,disabled:w,size:y,validateState:u,validateIcon:d,needStatusIcon:c});return e({focus:G,blur:V}),(j,he)=>(D(),Z("div",{ref_key:"wrapperRef",ref:f,class:U(p(ve)),style:Pt(p(xe)),onMouseenter:p(F),onMouseleave:p($)},[p(i).prefix?(D(),Z("div",{key:0,class:U(p(ye).e("prefix"))},[Ae(j.$slots,"prefix")],2)):Pe("v-if",!0),ne("div",{class:U(p(je))},[(D(!0),Z(xt,null,_n(j.modelValue,(K,Fe)=>(D(),Le(p(Sp),{key:Fe,size:p(g),closable:p(_),type:j.tagType,effect:j.tagEffect,draggable:p(_)&&j.draggable,"disable-transitions":"",onClose:Oe=>p(I)(Fe),onDragstart:Oe=>p(le)(Oe,Fe),onDragover:Oe=>p(fe)(Oe,Fe),onDragend:p(se),onDrop:$t(()=>{},["stop"])},{default:me(()=>[Ae(j.$slots,"tag",{value:K,index:Fe},()=>[rn(tt(K),1)])]),_:2},1032,["size","closable","type","effect","draggable","onClose","onDragstart","onDragover","onDragend","onDrop"]))),128)),ne("div",{class:U(p(ye).e("input-wrapper"))},[cn(ne("input",yn({id:p(l),ref_key:"inputRef",ref:h,"onUpdate:modelValue":K=>yr(v)?v.value=K:null},p(s),{type:"text",minlength:j.minlength,maxlength:j.maxlength,disabled:p(w),readonly:j.readonly,autocomplete:j.autocomplete,tabindex:j.tabindex,placeholder:p(S),autofocus:j.autofocus,ariaLabel:j.ariaLabel,class:p(ye).e("input"),style:p(z),onCompositionstart:p(M),onCompositionupdate:p(L),onCompositionend:p(N),onInput:p(C),onKeydown:p(T)}),null,16,["id","onUpdate:modelValue","minlength","maxlength","disabled","readonly","autocomplete","tabindex","placeholder","autofocus","ariaLabel","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onKeydown"]),[[c_,p(v)]]),ne("span",{ref_key:"calculatorRef",ref:O,"aria-hidden":"true",class:U(p(ye).e("input-calculator")),textContent:tt(p(v))},null,10,["textContent"])],2),cn(ne("div",{ref_key:"dropIndicatorRef",ref:re,class:U(p(ye).e("drop-indicator"))},null,2),[[Wn,p(q)]])],2),p(ue)?(D(),Z("div",{key:1,class:U(p(ye).e("suffix"))},[Ae(j.$slots,"suffix"),p(nt)?(D(),Le(p(Et),{key:0,class:U([p(ye).e("icon"),p(ye).e("clear")]),onMousedown:$t(p(er),["prevent"]),onClick:p(k)},{default:me(()=>[ae(p(Rc))]),_:1},8,["class","onMousedown","onClick"])):Pe("v-if",!0),p(u)&&p(d)&&p(c)?(D(),Le(p(Et),{key:1,class:U([p(we).e("icon"),p(we).e("validateIcon"),p(we).is("loading",p(u)==="validating")])},{default:me(()=>[(D(),Le(mn(p(d))))]),_:1},8,["class"])):Pe("v-if",!0)],2)):Pe("v-if",!0)],46,["onMouseenter","onMouseleave"]))}});var sCe=at(rCe,[["__file","input-tag.vue"]]);const iCe=nn(sCe),oCe=it({type:{type:String,values:["primary","success","warning","info","danger","default"],default:void 0},underline:{type:[Boolean,String],values:[!0,!1,"always","never","hover"],default:void 0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:or}}),aCe={click:t=>t instanceof MouseEvent},lCe=de({name:"ElLink"}),cCe=de({...lCe,props:oCe,emits:aCe,setup(t,{emit:e}){const n=t,r=Yp("link");vc({scope:"el-link",from:"The underline option (boolean)",replacement:"'always' | 'hover' | 'never'",version:"3.0.0",ref:"https://element-plus.org/en-US/component/link.html#underline"},R(()=>nr(n.underline)));const s=Qe("link"),i=R(()=>{var l,c,u;return[s.b(),s.m((u=(c=n.type)!=null?c:(l=r.value)==null?void 0:l.type)!=null?u:"default"),s.is("disabled",n.disabled),s.is("underline",o.value==="always"),s.is("hover-underline",o.value==="hover"&&!n.disabled)]}),o=R(()=>{var l,c,u;return nr(n.underline)?n.underline?"hover":"never":(u=(c=n.underline)!=null?c:(l=r.value)==null?void 0:l.underline)!=null?u:"hover"});function a(l){n.disabled||e("click",l)}return(l,c)=>(D(),Z("a",{class:U(p(i)),href:l.disabled||!l.href?void 0:l.href,target:l.disabled||!l.href?void 0:l.target,onClick:a},[l.icon?(D(),Le(p(Et),{key:0},{default:me(()=>[(D(),Le(mn(l.icon)))]),_:1})):Pe("v-if",!0),l.$slots.default?(D(),Z("span",{key:1,class:U(p(s).e("inner"))},[Ae(l.$slots,"default")],2)):Pe("v-if",!0),l.$slots.icon?Ae(l.$slots,"icon",{key:2}):Pe("v-if",!0)],10,["href","target"]))}});var uCe=at(cCe,[["__file","link.vue"]]);const dCe=nn(uCe);let hCe=class{constructor(e,n){this.parent=e,this.domNode=n,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,n=>{n.addEventListener("keydown",r=>{let s=!1;switch(r.code){case bt.down:{this.gotoSubIndex(this.subIndex+1),s=!0;break}case bt.up:{this.gotoSubIndex(this.subIndex-1),s=!0;break}case bt.tab:{nb(e,"mouseleave");break}case bt.enter:case bt.numpadEnter:case bt.space:{s=!0,r.currentTarget.click();break}}return s&&(r.preventDefault(),r.stopPropagation()),!1})})}},fCe=class{constructor(e,n){this.domNode=e,this.submenu=null,this.submenu=null,this.init(n)}init(e){this.domNode.setAttribute("tabindex","0");const n=this.domNode.querySelector(`.${e}-menu`);n&&(this.submenu=new hCe(this,n)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",e=>{let n=!1;switch(e.code){case bt.down:{nb(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),n=!0;break}case bt.up:{nb(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),n=!0;break}case bt.tab:{nb(e.currentTarget,"mouseleave");break}case bt.enter:case bt.numpadEnter:case bt.space:{n=!0,e.currentTarget.click();break}}n&&e.preventDefault()})}},pCe=class{constructor(e,n){this.domNode=e,this.init(n)}init(e){const n=this.domNode.childNodes;Array.from(n).forEach(r=>{r.nodeType===1&&new fCe(r,e)})}};const mCe=de({name:"ElMenuCollapseTransition"}),gCe=de({...mCe,setup(t){const e=Qe("menu"),n={onBeforeEnter:r=>r.style.opacity="0.2",onEnter(r,s){Zo(r,`${e.namespace.value}-opacity-transition`),r.style.opacity="1",s()},onAfterEnter(r){Mi(r,`${e.namespace.value}-opacity-transition`),r.style.opacity=""},onBeforeLeave(r){r.dataset||(r.dataset={}),ao(r,e.m("collapse"))?(Mi(r,e.m("collapse")),r.dataset.oldOverflow=r.style.overflow,r.dataset.scrollWidth=r.clientWidth.toString(),Zo(r,e.m("collapse"))):(Zo(r,e.m("collapse")),r.dataset.oldOverflow=r.style.overflow,r.dataset.scrollWidth=r.clientWidth.toString(),Mi(r,e.m("collapse"))),r.style.width=`${r.scrollWidth}px`,r.style.overflow="hidden"},onLeave(r){Zo(r,"horizontal-collapse-transition"),r.style.width=`${r.dataset.scrollWidth}px`}};return(r,s)=>(D(),Le(Xs,yn({mode:"out-in"},p(n)),{default:me(()=>[Ae(r.$slots,"default")]),_:3},16))}});var vCe=at(gCe,[["__file","menu-collapse-transition.vue"]]);function g7(t,e){const n=R(()=>{let s=t.parent;const i=[e.value];for(;s.type.name!=="ElMenu";)s.props.index&&i.unshift(s.props.index),s=s.parent;return i});return{parentMenu:R(()=>{let s=t.parent;for(;s&&!["ElMenu","ElSubMenu"].includes(s.type.name);)s=s.parent;return s}),indexPath:n}}function yCe(t){return R(()=>{const n=t.backgroundColor;return n?new If(n).shade(20).toString():""})}const v7=(t,e)=>{const n=Qe("menu");return R(()=>n.cssVarBlock({"text-color":t.textColor||"","hover-text-color":t.textColor||"","bg-color":t.backgroundColor||"","hover-bg-color":yCe(t).value||"","active-color":t.activeTextColor||"",level:`${e}`}))},IM="rootMenu",l1="subMenu:",bCe=it({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:or},expandOpenIcon:{type:or},collapseCloseIcon:{type:or},collapseOpenIcon:{type:or}}),Dx="ElSubMenu";var PM=de({name:Dx,props:bCe,setup(t,{slots:e,expose:n}){const r=tn(),{indexPath:s,parentMenu:i}=g7(r,R(()=>t.index)),o=Qe("menu"),a=Qe("sub-menu"),l=_t(IM);l||hs(Dx,"can not inject root menu");const c=_t(`${l1}${i.value.uid}`);c||hs(Dx,"can not inject sub menu");const u=H({}),d=H({});let h;const f=H(!1),m=H(),v=H(),y=R(()=>I.value==="horizontal"&&S.value?"bottom-start":"right-start"),g=R(()=>I.value==="horizontal"&&S.value||I.value==="vertical"&&!l.props.collapse?t.expandCloseIcon&&t.expandOpenIcon?C.value?t.expandOpenIcon:t.expandCloseIcon:Ll:t.collapseCloseIcon&&t.collapseOpenIcon?C.value?t.collapseOpenIcon:t.collapseCloseIcon:Ai),S=R(()=>c.level===0),_=R(()=>{const q=t.teleported;return Bn(q)?S.value:q}),w=R(()=>l.props.collapse?`${o.namespace.value}-zoom-in-left`:`${o.namespace.value}-zoom-in-top`),E=R(()=>I.value==="horizontal"&&S.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),C=R(()=>l.openedMenus.includes(t.index)),T=R(()=>[...Object.values(u.value),...Object.values(d.value)].some(({active:q})=>q)),I=R(()=>l.props.mode),k=R(()=>l.props.persistent),M=Ln({index:t.index,indexPath:s,active:T}),L=v7(l.props,c.level+1),N=R(()=>{var q;return(q=t.popperOffset)!=null?q:l.props.popperOffset}),G=R(()=>{var q;return(q=t.popperClass)!=null?q:l.props.popperClass}),V=R(()=>{var q;return(q=t.showTimeout)!=null?q:l.props.showTimeout}),X=R(()=>{var q;return(q=t.hideTimeout)!=null?q:l.props.hideTimeout}),F=()=>{var q,le,fe;return(fe=(le=(q=v.value)==null?void 0:q.popperRef)==null?void 0:le.popperInstanceRef)==null?void 0:fe.destroy()},$=q=>{q||F()},O=()=>{l.props.menuTrigger==="hover"&&l.props.mode==="horizontal"||l.props.collapse&&l.props.mode==="vertical"||t.disabled||l.handleSubMenuClick({index:t.index,indexPath:s.value,active:T.value})},z=(q,le=V.value)=>{var fe;if(q.type!=="focus"){if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||t.disabled){c.mouseInChild.value=!0;return}c.mouseInChild.value=!0,h==null||h(),{stop:h}=rh(()=>{l.openMenu(t.index,s.value)},le),_.value&&((fe=i.value.vnode.el)==null||fe.dispatchEvent(new MouseEvent("mouseenter")))}},re=(q=!1)=>{var le;if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"){c.mouseInChild.value=!1;return}h==null||h(),c.mouseInChild.value=!1,{stop:h}=rh(()=>!f.value&&l.closeMenu(t.index,s.value),X.value),_.value&&q&&((le=c.handleMouseleave)==null||le.call(c,!0))};Be(()=>l.props.collapse,q=>$(!!q));{const q=fe=>{d.value[fe.index]=fe},le=fe=>{delete d.value[fe.index]};Mn(`${l1}${r.uid}`,{addSubMenu:q,removeSubMenu:le,handleMouseleave:re,mouseInChild:f,level:c.level+1})}return n({opened:C}),Zt(()=>{l.addSubMenu(M),c.addSubMenu(M)}),Xn(()=>{c.removeSubMenu(M),l.removeSubMenu(M)}),()=>{var q;const le=[(q=e.title)==null?void 0:q.call(e),Ut(Et,{class:a.e("icon-arrow"),style:{transform:C.value?t.expandCloseIcon&&t.expandOpenIcon||t.collapseCloseIcon&&t.collapseOpenIcon&&l.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>kt(g.value)?Ut(r.appContext.components[g.value]):Ut(g.value)})],fe=l.isMenuPopup?Ut(ri,{ref:v,visible:C.value,effect:"light",pure:!0,offset:N.value,showArrow:!1,persistent:k.value,popperClass:G.value,placement:y.value,teleported:_.value,fallbackPlacements:E.value,transition:w.value,gpuAcceleration:!1},{content:()=>{var se;return Ut("div",{class:[o.m(I.value),o.m("popup-container"),G.value],onMouseenter:ye=>z(ye,100),onMouseleave:()=>re(!0),onFocus:ye=>z(ye,100)},[Ut("ul",{class:[o.b(),o.m("popup"),o.m(`popup-${y.value}`)],style:L.value},[(se=e.default)==null?void 0:se.call(e)])])},default:()=>Ut("div",{class:a.e("title"),onClick:O},le)}):Ut(xt,{},[Ut("div",{class:a.e("title"),ref:m,onClick:O},le),Ut(E_,{},{default:()=>{var se;return cn(Ut("ul",{role:"menu",class:[o.b(),o.m("inline")],style:L.value},[(se=e.default)==null?void 0:se.call(e)]),[[Wn,C.value]])}})]);return Ut("li",{class:[a.b(),a.is("active",T.value),a.is("opened",C.value),a.is("disabled",t.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:C.value,onMouseenter:z,onMouseleave:()=>re(),onFocus:z},[fe])}}});const _Ce=it({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:Ce(Array),default:()=>Fr([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:or,default:()=>Mge},popperEffect:{type:Ce(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},persistent:{type:Boolean,default:!0}}),Fx=t=>rt(t)&&t.every(e=>kt(e)),wCe={close:(t,e)=>kt(t)&&Fx(e),open:(t,e)=>kt(t)&&Fx(e),select:(t,e,n,r)=>kt(t)&&Fx(e)&&un(n)&&(Bn(r)||r instanceof Promise)};var xCe=de({name:"ElMenu",props:_Ce,emits:wCe,setup(t,{emit:e,slots:n,expose:r}){const s=tn(),i=s.appContext.config.globalProperties.$router,o=H(),a=H(),l=Qe("menu"),c=Qe("sub-menu");let u=64;const d=H(-1),h=H(t.defaultOpeneds&&!t.collapse?t.defaultOpeneds.slice(0):[]),f=H(t.defaultActive),m=H({}),v=H({}),y=R(()=>t.mode==="horizontal"||t.mode==="vertical"&&t.collapse),g=()=>{const $=f.value&&m.value[f.value];if(!$||t.mode==="horizontal"||t.collapse)return;$.indexPath.forEach(z=>{const re=v.value[z];re&&S(z,re.indexPath)})},S=($,O)=>{h.value.includes($)||(t.uniqueOpened&&(h.value=h.value.filter(z=>O.includes(z))),h.value.push($),e("open",$,O))},_=$=>{const O=h.value.indexOf($);O!==-1&&h.value.splice(O,1)},w=($,O)=>{_($),e("close",$,O)},E=({index:$,indexPath:O})=>{h.value.includes($)?w($,O):S($,O)},C=$=>{(t.mode==="horizontal"||t.collapse)&&(h.value=[]);const{index:O,indexPath:z}=$;if(!(vs(O)||vs(z)))if(t.router&&i){const re=$.route||O,q=i.push(re).then(le=>(le||(f.value=O),le));e("select",O,z,{index:O,indexPath:z,route:re},q)}else f.value=O,e("select",O,z,{index:O,indexPath:z})},T=$=>{var O;const z=m.value,re=z[$]||f.value&&z[f.value]||z[t.defaultActive];f.value=(O=re==null?void 0:re.index)!=null?O:$},I=$=>{const O=getComputedStyle($),z=Number.parseInt(O.marginLeft,10),re=Number.parseInt(O.marginRight,10);return $.offsetWidth+z+re||0},k=()=>{var $,O;if(!o.value)return-1;const z=Array.from((O=($=o.value)==null?void 0:$.childNodes)!=null?O:[]).filter(we=>we.nodeName!=="#text"||we.nodeValue),re=getComputedStyle(o.value),q=Number.parseInt(re.paddingLeft,10),le=Number.parseInt(re.paddingRight,10),fe=o.value.clientWidth-q-le;let se=0,ye=0;return z.forEach((we,ve)=>{we.nodeName!=="#comment"&&(se+=I(we),se<=fe-u&&(ye=ve+1))}),ye===z.length?-1:ye},M=$=>v.value[$].indexPath,L=($,O=33.34)=>{let z;return()=>{z&&clearTimeout(z),z=setTimeout(()=>{$()},O)}};let N=!0;const G=()=>{const $=Ps(a);if($&&(u=I($)||64),d.value===k())return;const O=()=>{d.value=-1,Tt(()=>{d.value=k()})};N?O():L(O)(),N=!1};Be(()=>t.defaultActive,$=>{m.value[$]||(f.value=""),T($)}),Be(()=>t.collapse,$=>{$&&(h.value=[])}),Be(m.value,g);let V;ui(()=>{t.mode==="horizontal"&&t.ellipsis?V=Ir(o,G).stop:V==null||V()});const X=H(!1);{const $=q=>{v.value[q.index]=q},O=q=>{delete v.value[q.index]};Mn(IM,Ln({props:t,openedMenus:h,items:m,subMenus:v,activeIndex:f,isMenuPopup:y,addMenuItem:q=>{m.value[q.index]=q},removeMenuItem:q=>{delete m.value[q.index]},addSubMenu:$,removeSubMenu:O,openMenu:S,closeMenu:w,handleMenuItemClick:C,handleSubMenuClick:E})),Mn(`${l1}${s.uid}`,{addSubMenu:$,removeSubMenu:O,mouseInChild:X,level:0})}Zt(()=>{t.mode==="horizontal"&&new pCe(s.vnode.el,l.namespace.value)}),r({open:O=>{const{indexPath:z}=v.value[O];z.forEach(re=>S(re,z))},close:_,updateActiveIndex:T,handleResize:G});const F=v7(t,0);return()=>{var $,O;let z=(O=($=n.default)==null?void 0:$.call(n))!=null?O:[];const re=[];if(t.mode==="horizontal"&&o.value){const fe=pl(z),se=d.value===-1?fe:fe.slice(0,d.value),ye=d.value===-1?[]:fe.slice(d.value);ye!=null&&ye.length&&t.ellipsis&&(z=se,re.push(Ut(PM,{ref:a,index:"sub-menu-more",class:c.e("hide-arrow"),popperOffset:t.popperOffset},{title:()=>Ut(Et,{class:c.e("icon-more")},{default:()=>Ut(t.ellipsisIcon)}),default:()=>ye})))}const q=t.closeOnClickOutside?[[Tc,()=>{h.value.length&&(X.value||(h.value.forEach(fe=>e("close",fe,M(fe))),h.value=[]))}]]:[],le=cn(Ut("ul",{key:String(t.collapse),role:"menubar",ref:o,style:F.value,class:{[l.b()]:!0,[l.m(t.mode)]:!0,[l.m("collapse")]:t.collapse}},[...z,...re]),q);return t.collapseTransition&&t.mode==="vertical"?Ut(vCe,()=>le):le}}});const SCe=it({index:{type:Ce([String,null]),default:null},route:{type:Ce([String,Object])},disabled:Boolean}),ECe={click:t=>kt(t.index)&&rt(t.indexPath)},pE="ElMenuItem",CCe=de({name:pE}),TCe=de({...CCe,props:SCe,emits:ECe,setup(t,{expose:e,emit:n}){const r=t;ho(r.index)&&void 0;const s=tn(),i=_t(IM),o=Qe("menu"),a=Qe("menu-item");i||hs(pE,"can not inject root menu");const{parentMenu:l,indexPath:c}=g7(s,Yn(r,"index")),u=_t(`${l1}${l.value.uid}`);u||hs(pE,"can not inject sub menu");const d=R(()=>r.index===i.activeIndex),h=Ln({index:r.index,indexPath:c,active:d}),f=()=>{r.disabled||(i.handleMenuItemClick({index:r.index,indexPath:c.value,route:r.route}),n("click",h))};return Zt(()=>{u.addSubMenu(h),i.addMenuItem(h)}),Xn(()=>{u.removeSubMenu(h),i.removeMenuItem(h)}),e({parentMenu:l,rootMenu:i,active:d,nsMenu:o,nsMenuItem:a,handleClick:f}),(m,v)=>(D(),Z("li",{class:U([p(a).b(),p(a).is("active",p(d)),p(a).is("disabled",m.disabled)]),role:"menuitem",tabindex:"-1",onClick:f},[p(l).type.name==="ElMenu"&&p(i).props.collapse&&m.$slots.title?(D(),Le(p(ri),{key:0,effect:p(i).props.popperEffect,placement:"right","fallback-placements":["left"],persistent:p(i).props.persistent},{content:me(()=>[Ae(m.$slots,"title")]),default:me(()=>[ne("div",{class:U(p(o).be("tooltip","trigger"))},[Ae(m.$slots,"default")],2)]),_:3},8,["effect","persistent"])):(D(),Z(xt,{key:1},[Ae(m.$slots,"default"),Ae(m.$slots,"title")],64))],2))}});var y7=at(TCe,[["__file","menu-item.vue"]]);const MCe={title:String},ACe=de({name:"ElMenuItemGroup"}),kCe=de({...ACe,props:MCe,setup(t){const e=Qe("menu-item-group");return(n,r)=>(D(),Z("li",{class:U(p(e).b())},[ne("div",{class:U(p(e).e("title"))},[n.$slots.title?Ae(n.$slots,"title",{key:1}):(D(),Z(xt,{key:0},[rn(tt(n.title),1)],64))],2),ne("ul",null,[Ae(n.$slots,"default")])],2))}});var b7=at(kCe,[["__file","menu-item-group.vue"]]);const ICe=nn(xCe,{MenuItem:y7,MenuItemGroup:b7,SubMenu:PM}),PCe=Br(y7),RCe=Br(b7),LCe=Br(PM),OCe=it({icon:{type:or,default:()=>Zme},title:String,content:{type:String,default:""}}),NCe={back:()=>!0},DCe=de({name:"ElPageHeader"}),FCe=de({...DCe,props:OCe,emits:NCe,setup(t,{emit:e}){const{t:n}=zn(),r=Qe("page-header");function s(){e("back")}return(i,o)=>(D(),Z("div",{class:U([p(r).b(),{[p(r).m("has-breadcrumb")]:!!i.$slots.breadcrumb,[p(r).m("has-extra")]:!!i.$slots.extra,[p(r).is("contentful")]:!!i.$slots.default}])},[i.$slots.breadcrumb?(D(),Z("div",{key:0,class:U(p(r).e("breadcrumb"))},[Ae(i.$slots,"breadcrumb")],2)):Pe("v-if",!0),ne("div",{class:U(p(r).e("header"))},[ne("div",{class:U(p(r).e("left"))},[ne("div",{class:U(p(r).e("back")),role:"button",tabindex:"0",onClick:s},[i.icon||i.$slots.icon?(D(),Z("div",{key:0,"aria-label":i.title||p(n)("el.pageHeader.title"),class:U(p(r).e("icon"))},[Ae(i.$slots,"icon",{},()=>[i.icon?(D(),Le(p(Et),{key:0},{default:me(()=>[(D(),Le(mn(i.icon)))]),_:1})):Pe("v-if",!0)])],10,["aria-label"])):Pe("v-if",!0),ne("div",{class:U(p(r).e("title"))},[Ae(i.$slots,"title",{},()=>[rn(tt(i.title||p(n)("el.pageHeader.title")),1)])],2)],2),ae(p(Jz),{direction:"vertical"}),ne("div",{class:U(p(r).e("content"))},[Ae(i.$slots,"content",{},()=>[rn(tt(i.content),1)])],2)],2),i.$slots.extra?(D(),Z("div",{key:0,class:U(p(r).e("extra"))},[Ae(i.$slots,"extra")],2)):Pe("v-if",!0)],2),i.$slots.default?(D(),Z("div",{key:1,class:U(p(r).e("main"))},[Ae(i.$slots,"default")],2)):Pe("v-if",!0)],2))}});var BCe=at(FCe,[["__file","page-header.vue"]]);const UCe=nn(BCe),_7=Symbol("elPaginationKey"),zCe=it({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:or}}),$Ce={click:t=>t instanceof MouseEvent},VCe=de({name:"ElPaginationPrev"}),HCe=de({...VCe,props:zCe,emits:$Ce,setup(t){const e=t,{t:n}=zn(),r=R(()=>e.disabled||e.currentPage<=1);return(s,i)=>(D(),Z("button",{type:"button",class:"btn-prev",disabled:p(r),"aria-label":s.prevText||p(n)("el.pagination.prev"),"aria-disabled":p(r),onClick:o=>s.$emit("click",o)},[s.prevText?(D(),Z("span",{key:0},tt(s.prevText),1)):(D(),Le(p(Et),{key:1},{default:me(()=>[(D(),Le(mn(s.prevIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var GCe=at(HCe,[["__file","prev.vue"]]);const WCe=it({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:or}}),jCe=de({name:"ElPaginationNext"}),KCe=de({...jCe,props:WCe,emits:["click"],setup(t){const e=t,{t:n}=zn(),r=R(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0);return(s,i)=>(D(),Z("button",{type:"button",class:"btn-next",disabled:p(r),"aria-label":s.nextText||p(n)("el.pagination.next"),"aria-disabled":p(r),onClick:o=>s.$emit("click",o)},[s.nextText?(D(),Z("span",{key:0},tt(s.nextText),1)):(D(),Le(p(Et),{key:1},{default:me(()=>[(D(),Le(mn(s.nextIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var qCe=at(KCe,[["__file","next.vue"]]);const w7=Symbol("ElSelectGroup"),Qp=Symbol("ElSelect"),mE="ElOption",YCe=it({value:{type:[String,Number,Boolean,Object],required:!0},label:{type:[String,Number]},created:Boolean,disabled:Boolean}),RM=(t="")=>t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),_u=t=>Tv(t);function XCe(t,e){const n=_t(Qp);n||hs(mE,"usage: <el-select><el-option /></el-select/>");const r=_t(w7,{disabled:!1}),s=R(()=>u(Hs(n.props.modelValue),t.value)),i=R(()=>{var f;if(n.props.multiple){const m=Hs((f=n.props.modelValue)!=null?f:[]);return!s.value&&m.length>=n.props.multipleLimit&&n.props.multipleLimit>0}else return!1}),o=R(()=>{var f;return(f=t.label)!=null?f:un(t.value)?"":t.value}),a=R(()=>t.value||t.label||""),l=R(()=>t.disabled||e.groupDisabled||i.value),c=tn(),u=(f=[],m)=>{if(un(t.value)){const v=n.props.valueKey;return f&&f.some(y=>gr(cs(y,v))===cs(m,v))}else return f&&f.includes(m)},d=()=>{!t.disabled&&!r.disabled&&(n.states.hoveringIndex=n.optionsArray.indexOf(c.proxy))},h=f=>{const m=new RegExp(RM(f),"i");e.visible=m.test(String(o.value))||t.created};return Be(()=>o.value,()=>{!t.created&&!n.props.remote&&n.setSelected()}),Be(()=>t.value,(f,m)=>{const{remote:v,valueKey:y}=n.props;if((v?f!==m:!_s(f,m))&&(n.onOptionDestroy(m,c.proxy),n.onOptionCreate(c.proxy)),!t.created&&!v){if(y&&un(f)&&un(m)&&f[y]===m[y])return;n.setSelected()}}),Be(()=>r.disabled,()=>{e.groupDisabled=r.disabled},{immediate:!0}),{select:n,currentLabel:o,currentValue:a,itemSelected:s,isDisabled:l,hoverItem:d,updateOption:h}}const ZCe=de({name:mE,componentName:mE,props:YCe,setup(t){const e=Qe("select"),n=ni(),r=R(()=>[e.be("dropdown","item"),e.is("disabled",p(a)),e.is("selected",p(o)),e.is("hovering",p(h))]),s=Ln({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:i,itemSelected:o,isDisabled:a,select:l,hoverItem:c,updateOption:u}=XCe(t,s),{visible:d,hover:h}=Ds(s),f=tn().proxy;l.onOptionCreate(f),Xn(()=>{const v=f.value;Tt(()=>{const{selected:y}=l.states,g=y.some(S=>S.value===f.value);l.states.cachedOptions.get(v)===f&&!g&&l.states.cachedOptions.delete(v)}),l.onOptionDestroy(v,f)});function m(){a.value||l.handleOptionSelect(f)}return{ns:e,id:n,containerKls:r,currentLabel:i,itemSelected:o,isDisabled:a,select:l,visible:d,hover:h,states:s,hoverItem:c,updateOption:u,selectOptionClick:m}}});function JCe(t,e){return cn((D(),Z("li",{id:t.id,class:U(t.containerKls),role:"option","aria-disabled":t.isDisabled||void 0,"aria-selected":t.itemSelected,onMousemove:t.hoverItem,onClick:$t(t.selectOptionClick,["stop"])},[Ae(t.$slots,"default",{},()=>[ne("span",null,tt(t.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])),[[Wn,t.visible]])}var LM=at(ZCe,[["render",JCe],["__file","option.vue"]]);const QCe=de({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const t=_t(Qp),e=Qe("select"),n=R(()=>t.props.popperClass),r=R(()=>t.props.multiple),s=R(()=>t.props.fitInputWidth),i=H("");function o(){var a;i.value=`${(a=t.selectRef)==null?void 0:a.offsetWidth}px`}return Zt(()=>{o(),Ir(t.selectRef,o)}),{ns:e,minWidth:i,popperClass:n,isMultiple:r,isFitInputWidth:s}}});function eTe(t,e,n,r,s,i){return D(),Z("div",{class:U([t.ns.b("dropdown"),t.ns.is("multiple",t.isMultiple),t.popperClass]),style:Pt({[t.isFitInputWidth?"width":"minWidth"]:t.minWidth})},[t.$slots.header?(D(),Z("div",{key:0,class:U(t.ns.be("dropdown","header"))},[Ae(t.$slots,"header")],2)):Pe("v-if",!0),Ae(t.$slots,"default"),t.$slots.footer?(D(),Z("div",{key:1,class:U(t.ns.be("dropdown","footer"))},[Ae(t.$slots,"footer")],2)):Pe("v-if",!0)],6)}var tTe=at(QCe,[["render",eTe],["__file","select-dropdown.vue"]]);const nTe=(t,e)=>{const{t:n}=zn(),r=ni(),s=Qe("select"),i=Qe("input"),o=Ln({inputValue:"",options:new Map,cachedOptions:new Map,optionValues:[],selected:[],selectionWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),a=H(),l=H(),c=H(),u=H(),d=H(),h=H(),f=H(),m=H(),v=H(),y=H(),g=H(),S=H(!1),_=H(),{form:w,formItem:E}=fi(),{inputId:C}=la(t,{formItemContext:E}),{valueOnClear:T,isEmptyValue:I}=Iv(t),{isComposing:k,handleCompositionStart:M,handleCompositionUpdate:L,handleCompositionEnd:N}=Lv({afterComposition:Ye=>lt(Ye)}),G=R(()=>t.disabled||!!(w!=null&&w.disabled)),{wrapperRef:V,isFocused:X,handleBlur:F}=Zu(d,{disabled:G,afterFocus(){t.automaticDropdown&&!S.value&&(S.value=!0,o.menuVisibleOnFocus=!0)},beforeBlur(Ye){var gt,Gt;return((gt=c.value)==null?void 0:gt.isFocusInsideContent(Ye))||((Gt=u.value)==null?void 0:Gt.isFocusInsideContent(Ye))},afterBlur(){var Ye;S.value=!1,o.menuVisibleOnFocus=!1,t.validateEvent&&((Ye=E==null?void 0:E.validate)==null||Ye.call(E,"blur").catch(gt=>void 0))}}),$=R(()=>rt(t.modelValue)?t.modelValue.length>0:!I(t.modelValue)),O=R(()=>{var Ye;return(Ye=w==null?void 0:w.statusIcon)!=null?Ye:!1}),z=R(()=>t.clearable&&!G.value&&o.inputHovering&&$.value),re=R(()=>t.remote&&t.filterable&&!t.remoteShowSuffix?"":t.suffixIcon),q=R(()=>s.is("reverse",!!(re.value&&S.value))),le=R(()=>(E==null?void 0:E.validateState)||""),fe=R(()=>le.value&&g_[le.value]),se=R(()=>t.remote?300:0),ye=R(()=>t.remote&&!o.inputValue&&o.options.size===0),we=R(()=>t.loading?t.loadingText||n("el.select.loading"):t.filterable&&o.inputValue&&o.options.size>0&&ve.value===0?t.noMatchText||n("el.select.noMatch"):o.options.size===0?t.noDataText||n("el.select.noData"):null),ve=R(()=>xe.value.filter(Ye=>Ye.visible).length),xe=R(()=>{const Ye=Array.from(o.options.values()),gt=[];return o.optionValues.forEach(Gt=>{const On=Ye.findIndex(Xr=>Xr.value===Gt);On>-1&&gt.push(Ye[On])}),gt.length>=Ye.length?gt:Ye}),je=R(()=>Array.from(o.cachedOptions.values())),nt=R(()=>{const Ye=xe.value.filter(gt=>!gt.created).some(gt=>gt.currentLabel===o.inputValue);return t.filterable&&t.allowCreate&&o.inputValue!==""&&!Ye}),ue=()=>{t.filterable&&Lt(t.filterMethod)||t.filterable&&t.remote&&Lt(t.remoteMethod)||xe.value.forEach(Ye=>{var gt;(gt=Ye.updateOption)==null||gt.call(Ye,o.inputValue)})},j=ys(),he=R(()=>["small"].includes(j.value)?"small":"default"),K=R({get(){return S.value&&!ye.value},set(Ye){S.value=Ye}}),Fe=R(()=>{if(t.multiple&&!Bn(t.modelValue))return Hs(t.modelValue).length===0&&!o.inputValue;const Ye=rt(t.modelValue)?t.modelValue[0]:t.modelValue;return t.filterable||Bn(Ye)?!o.inputValue:!0}),Oe=R(()=>{var Ye;const gt=(Ye=t.placeholder)!=null?Ye:n("el.select.placeholder");return t.multiple||!$.value?gt:o.selectedLabel}),Re=R(()=>Qb?null:"mouseenter");Be(()=>t.modelValue,(Ye,gt)=>{t.multiple&&t.filterable&&!t.reserveKeyword&&(o.inputValue="",te("")),Ee(),!_s(Ye,gt)&&t.validateEvent&&(E==null||E.validate("change").catch(Gt=>void 0))},{flush:"post",deep:!0}),Be(()=>S.value,Ye=>{Ye?te(o.inputValue):(o.inputValue="",o.previousQuery=null,o.isBeforeHide=!0),e("visible-change",Ye)}),Be(()=>o.options.entries(),()=>{Vn&&(Ee(),t.defaultFirstOption&&(t.filterable||t.remote)&&ve.value&&oe())},{flush:"post"}),Be([()=>o.hoveringIndex,xe],([Ye])=>{Ft(Ye)&&Ye>-1?_.value=xe.value[Ye]||{}:_.value={},xe.value.forEach(gt=>{gt.hover=_.value===gt})}),ui(()=>{o.isBeforeHide||ue()});const te=Ye=>{o.previousQuery===Ye||k.value||(o.previousQuery=Ye,t.filterable&&Lt(t.filterMethod)?t.filterMethod(Ye):t.filterable&&t.remote&&Lt(t.remoteMethod)&&t.remoteMethod(Ye),t.defaultFirstOption&&(t.filterable||t.remote)&&ve.value?Tt(oe):Tt(Q))},oe=()=>{const Ye=xe.value.filter(Xr=>Xr.visible&&!Xr.disabled&&!Xr.states.groupDisabled),gt=Ye.find(Xr=>Xr.created),Gt=Ye[0],On=xe.value.map(Xr=>Xr.value);o.hoveringIndex=be(On,gt||Gt)},Ee=()=>{if(t.multiple)o.selectedLabel="";else{const gt=rt(t.modelValue)?t.modelValue[0]:t.modelValue,Gt=J(gt);o.selectedLabel=Gt.currentLabel,o.selected=[Gt];return}const Ye=[];Bn(t.modelValue)||Hs(t.modelValue).forEach(gt=>{Ye.push(J(gt))}),o.selected=Ye},J=Ye=>{let gt;const Gt=Lg(Ye);for(let Ts=o.cachedOptions.size-1;Ts>=0;Ts--){const Un=je.value[Ts];if(Gt?cs(Un.value,t.valueKey)===cs(Ye,t.valueKey):Un.value===Ye){gt={value:Ye,currentLabel:Un.currentLabel,get isDisabled(){return Un.isDisabled}};break}}if(gt)return gt;const On=Gt?Ye.label:Ye??"";return{value:Ye,currentLabel:On}},Q=()=>{o.hoveringIndex=xe.value.findIndex(Ye=>o.selected.some(gt=>Jt(gt)===Jt(Ye)))},_e=()=>{o.selectionWidth=Number.parseFloat(window.getComputedStyle(l.value).width)},ie=()=>{o.collapseItemWidth=y.value.getBoundingClientRect().width},Te=()=>{var Ye,gt;(gt=(Ye=c.value)==null?void 0:Ye.updatePopper)==null||gt.call(Ye)},We=()=>{var Ye,gt;(gt=(Ye=u.value)==null?void 0:Ye.updatePopper)==null||gt.call(Ye)},ut=()=>{o.inputValue.length>0&&!S.value&&(S.value=!0),te(o.inputValue)},lt=Ye=>{if(o.inputValue=Ye.target.value,t.remote)St();else return ut()},St=mo(()=>{ut()},se.value),Ot=Ye=>{_s(t.modelValue,Ye)||e(xn,Ye)},et=Ye=>u5(Ye,gt=>{const Gt=o.cachedOptions.get(gt);return Gt&&!Gt.disabled&&!Gt.states.groupDisabled}),ht=Ye=>{if(t.multiple&&Ye.code!==bt.delete&&Ye.target.value.length<=0){const gt=Hs(t.modelValue).slice(),Gt=et(gt);if(Gt<0)return;const On=gt[Gt];gt.splice(Gt,1),e(Qt,gt),Ot(gt),e("remove-tag",On)}},Mt=(Ye,gt)=>{const Gt=o.selected.indexOf(gt);if(Gt>-1&&!G.value){const On=Hs(t.modelValue).slice();On.splice(Gt,1),e(Qt,On),Ot(On),e("remove-tag",gt.value)}Ye.stopPropagation(),vt()},ze=Ye=>{Ye.stopPropagation();const gt=t.multiple?[]:T.value;if(t.multiple)for(const Gt of o.selected)Gt.isDisabled&&gt.push(Gt.value);e(Qt,gt),Ot(gt),o.hoveringIndex=-1,S.value=!1,e("clear"),vt()},Me=Ye=>{var gt;if(t.multiple){const Gt=Hs((gt=t.modelValue)!=null?gt:[]).slice(),On=be(Gt,Ye);On>-1?Gt.splice(On,1):(t.multipleLimit<=0||Gt.length<t.multipleLimit)&&Gt.push(Ye.value),e(Qt,Gt),Ot(Gt),Ye.created&&te(""),t.filterable&&!t.reserveKeyword&&(o.inputValue="")}else e(Qt,Ye.value),Ot(Ye.value),S.value=!1;vt(),!S.value&&Tt(()=>{Ve(Ye)})},be=(Ye,gt)=>Bn(gt)?-1:un(gt.value)?Ye.findIndex(Gt=>_s(cs(Gt,t.valueKey),Jt(gt))):Ye.indexOf(gt.value),Ve=Ye=>{var gt,Gt,On,Xr,Ts;const Un=rt(Ye)?Ye[0]:Ye;let oi=null;if(Un!=null&&Un.value){const Bs=xe.value.filter(Se=>Se.value===Un.value);Bs.length>0&&(oi=Bs[0].$el)}if(c.value&&oi){const Bs=(Xr=(On=(Gt=(gt=c.value)==null?void 0:gt.popperRef)==null?void 0:Gt.contentRef)==null?void 0:On.querySelector)==null?void 0:Xr.call(On,`.${s.be("dropdown","wrap")}`);Bs&&jT(Bs,oi)}(Ts=g.value)==null||Ts.handleScroll()},mt=Ye=>{o.options.set(Ye.value,Ye),o.cachedOptions.set(Ye.value,Ye)},Ue=(Ye,gt)=>{o.options.get(Ye)===gt&&o.options.delete(Ye)},Ct=R(()=>{var Ye,gt;return(gt=(Ye=c.value)==null?void 0:Ye.popperRef)==null?void 0:gt.contentRef}),st=()=>{o.isBeforeHide=!1,Tt(()=>{var Ye;(Ye=g.value)==null||Ye.update(),Ve(o.selected)})},vt=()=>{var Ye;(Ye=d.value)==null||Ye.focus()},Rt=()=>{var Ye;if(S.value){S.value=!1,Tt(()=>{var gt;return(gt=d.value)==null?void 0:gt.blur()});return}(Ye=d.value)==null||Ye.blur()},jt=Ye=>{ze(Ye)},dn=Ye=>{if(S.value=!1,X.value){const gt=new FocusEvent("blur",Ye);Tt(()=>F(gt))}},sn=()=>{o.inputValue.length>0?o.inputValue="":S.value=!1},At=()=>{G.value||(Qb&&(o.inputHovering=!0),o.menuVisibleOnFocus?o.menuVisibleOnFocus=!1:S.value=!S.value)},on=()=>{if(!S.value)At();else{const Ye=xe.value[o.hoveringIndex];Ye&&!Ye.isDisabled&&Me(Ye)}},Jt=Ye=>un(Ye.value)?cs(Ye.value,t.valueKey):Ye.value,jr=R(()=>xe.value.filter(Ye=>Ye.visible).every(Ye=>Ye.isDisabled)),Ur=R(()=>t.multiple?t.collapseTags?o.selected.slice(0,t.maxCollapseTags):o.selected:[]),Y=R(()=>t.multiple?t.collapseTags?o.selected.slice(t.maxCollapseTags):[]:[]),Pn=Ye=>{if(!S.value){S.value=!0;return}if(!(o.options.size===0||ve.value===0||k.value)&&!jr.value){Ye==="next"?(o.hoveringIndex++,o.hoveringIndex===o.options.size&&(o.hoveringIndex=0)):Ye==="prev"&&(o.hoveringIndex--,o.hoveringIndex<0&&(o.hoveringIndex=o.options.size-1));const gt=xe.value[o.hoveringIndex];(gt.isDisabled||!gt.visible)&&Pn(Ye),Tt(()=>Ve(_.value))}},ii=()=>{if(!l.value)return 0;const Ye=window.getComputedStyle(l.value);return Number.parseFloat(Ye.gap||"6px")},Fs=R(()=>{const Ye=ii();return{maxWidth:`${y.value&&t.maxCollapseTags===1?o.selectionWidth-o.collapseItemWidth-Ye:o.selectionWidth}px`}}),as=R(()=>({maxWidth:`${o.selectionWidth}px`})),Ii=Ye=>{e("popup-scroll",Ye)};Ir(l,_e),Ir(V,Te),Ir(v,We),Ir(y,ie);let Xe;return Be(()=>K.value,Ye=>{Ye?Xe=Ir(m,Te).stop:(Xe==null||Xe(),Xe=void 0)}),Zt(()=>{Ee()}),{inputId:C,contentId:r,nsSelect:s,nsInput:i,states:o,isFocused:X,expanded:S,optionsArray:xe,hoverOption:_,selectSize:j,filteredOptionsCount:ve,updateTooltip:Te,updateTagTooltip:We,debouncedOnInputChange:St,onInput:lt,deletePrevTag:ht,deleteTag:Mt,deleteSelected:ze,handleOptionSelect:Me,scrollToOption:Ve,hasModelValue:$,shouldShowPlaceholder:Fe,currentPlaceholder:Oe,mouseEnterEventName:Re,needStatusIcon:O,showClose:z,iconComponent:re,iconReverse:q,validateState:le,validateIcon:fe,showNewOption:nt,updateOptions:ue,collapseTagSize:he,setSelected:Ee,selectDisabled:G,emptyText:we,handleCompositionStart:M,handleCompositionUpdate:L,handleCompositionEnd:N,onOptionCreate:mt,onOptionDestroy:Ue,handleMenuEnter:st,focus:vt,blur:Rt,handleClearClick:jt,handleClickOutside:dn,handleEsc:sn,toggleMenu:At,selectOption:on,getValueKey:Jt,navigateOptions:Pn,dropdownMenuVisible:K,showTagList:Ur,collapseTagList:Y,popupScroll:Ii,tagStyle:Fs,collapseTagStyle:as,popperRef:Ct,inputRef:d,tooltipRef:c,tagTooltipRef:u,prefixRef:h,suffixRef:f,selectRef:a,wrapperRef:V,selectionRef:l,scrollbarRef:g,menuRef:m,tagMenuRef:v,collapseItemRef:y}};var rTe=de({name:"ElOptions",setup(t,{slots:e}){const n=_t(Qp);let r=[];return()=>{var s,i;const o=(s=e.default)==null?void 0:s.call(e),a=[];function l(c){rt(c)&&c.forEach(u=>{var d,h,f,m;const v=(d=(u==null?void 0:u.type)||{})==null?void 0:d.name;v==="ElOptionGroup"?l(!kt(u.children)&&!rt(u.children)&&Lt((h=u.children)==null?void 0:h.default)?(f=u.children)==null?void 0:f.default():u.children):v==="ElOption"?a.push((m=u.props)==null?void 0:m.value):rt(u.children)&&l(u.children)})}return o.length&&l((i=o[0])==null?void 0:i.children),_s(a,r)||(r=a,n&&(n.states.optionValues=a)),o}}});const sTe=it({name:String,id:String,modelValue:{type:Ce([Array,String,Number,Boolean,Object]),default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:Es,effect:{type:Ce(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Ce(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:{type:Ce(Function)},filterMethod:{type:Ce(Function)},multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:ss.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:or,default:Rc},fitInputWidth:Boolean,suffixIcon:{type:or,default:Ll},tagType:{...Cc.type,default:"info"},tagEffect:{...Cc.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,showArrow:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:Ce(String),values:Lc,default:"bottom-start"},fallbackPlacements:{type:Ce(Array),default:["bottom-start","top-start","right","left"]},tabindex:{type:[String,Number],default:0},appendTo:ss.appendTo,options:{type:Ce(Array)},props:{type:Ce(Object)},...yh,...hi(["ariaLabel"])});yU.scroll;const F4="ElSelect",iTe=de({name:F4,componentName:F4,components:{ElSelectMenu:tTe,ElOption:LM,ElOptions:rTe,ElTag:Sp,ElScrollbar:$a,ElTooltip:ri,ElIcon:Et},directives:{ClickOutside:Tc},props:sTe,emits:[Qt,xn,"remove-tag","clear","visible-change","focus","blur","popup-scroll"],setup(t,{emit:e,slots:n}){const r=tn();r.appContext.config.warnHandler=(...h)=>{!h[0]||h[0].includes('Slot "default" invoked outside of the render function')||console.warn(...h)};const s=R(()=>{const{modelValue:h,multiple:f}=t,m=f?[]:void 0;return rt(h)?f?h:m:f?m:h}),i=Ln({...Ds(t),modelValue:s}),o=nTe(i,e),{calculatorRef:a,inputStyle:l}=kM(),c=h=>h.reduce((f,m)=>(f.push(m),m.children&&m.children.length>0&&f.push(...c(m.children)),f),[]),u=h=>{pl(h||[]).forEach(m=>{var v;if(un(m)&&(m.type.name==="ElOption"||m.type.name==="ElTree")){const y=m.type.name;if(y==="ElTree"){const g=((v=m.props)==null?void 0:v.data)||[];c(g).forEach(_=>{_.currentLabel=_.label||(un(_.value)?"":_.value),o.onOptionCreate(_)})}else if(y==="ElOption"){const g={...m.props};g.currentLabel=g.label||(un(g.value)?"":g.value),o.onOptionCreate(g)}}})};Be(()=>{var h;return(h=n.default)==null?void 0:h.call(n)},h=>{t.persistent||u(h)},{immediate:!0}),Mn(Qp,Ln({props:i,states:o.states,selectRef:o.selectRef,optionsArray:o.optionsArray,setSelected:o.setSelected,handleOptionSelect:o.handleOptionSelect,onOptionCreate:o.onOptionCreate,onOptionDestroy:o.onOptionDestroy}));const d=R(()=>t.multiple?o.states.selected.map(h=>h.currentLabel):o.states.selectedLabel);return Xn(()=>{r.appContext.config.warnHandler=void 0}),{...o,modelValue:s,selectedLabel:d,calculatorRef:a,inputStyle:l}}});function oTe(t,e){const n=Xt("el-tag"),r=Xt("el-tooltip"),s=Xt("el-icon"),i=Xt("el-option"),o=Xt("el-options"),a=Xt("el-scrollbar"),l=Xt("el-select-menu"),c=i_("click-outside");return cn((D(),Z("div",{ref:"selectRef",class:U([t.nsSelect.b(),t.nsSelect.m(t.selectSize)]),[Xm(t.mouseEnterEventName)]:u=>t.states.inputHovering=!0,onMouseleave:u=>t.states.inputHovering=!1},[ae(r,{ref:"tooltipRef",visible:t.dropdownMenuVisible,placement:t.placement,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"popper-options":t.popperOptions,"fallback-placements":t.fallbackPlacements,effect:t.effect,pure:"",trigger:"click",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:t.persistent,"append-to":t.appendTo,"show-arrow":t.showArrow,offset:t.offset,onBeforeShow:t.handleMenuEnter,onHide:u=>t.states.isBeforeHide=!1},{default:me(()=>{var u;return[ne("div",{ref:"wrapperRef",class:U([t.nsSelect.e("wrapper"),t.nsSelect.is("focused",t.isFocused),t.nsSelect.is("hovering",t.states.inputHovering),t.nsSelect.is("filterable",t.filterable),t.nsSelect.is("disabled",t.selectDisabled)]),onClick:$t(t.toggleMenu,["prevent"])},[t.$slots.prefix?(D(),Z("div",{key:0,ref:"prefixRef",class:U(t.nsSelect.e("prefix"))},[Ae(t.$slots,"prefix")],2)):Pe("v-if",!0),ne("div",{ref:"selectionRef",class:U([t.nsSelect.e("selection"),t.nsSelect.is("near",t.multiple&&!t.$slots.prefix&&!!t.states.selected.length)])},[t.multiple?Ae(t.$slots,"tag",{key:0,data:t.states.selected,deleteTag:t.deleteTag,selectDisabled:t.selectDisabled},()=>[(D(!0),Z(xt,null,_n(t.showTagList,d=>(D(),Z("div",{key:t.getValueKey(d),class:U(t.nsSelect.e("selected-item"))},[ae(n,{closable:!t.selectDisabled&&!d.isDisabled,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",style:Pt(t.tagStyle),onClose:h=>t.deleteTag(h,d)},{default:me(()=>[ne("span",{class:U(t.nsSelect.e("tags-text"))},[Ae(t.$slots,"label",{label:d.currentLabel,value:d.value},()=>[rn(tt(d.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),t.collapseTags&&t.states.selected.length>t.maxCollapseTags?(D(),Le(r,{key:0,ref:"tagTooltipRef",disabled:t.dropdownMenuVisible||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom","popper-class":t.popperClass,teleported:t.teleported},{default:me(()=>[ne("div",{ref:"collapseItemRef",class:U(t.nsSelect.e("selected-item"))},[ae(n,{closable:!1,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",style:Pt(t.collapseTagStyle)},{default:me(()=>[ne("span",{class:U(t.nsSelect.e("tags-text"))}," + "+tt(t.states.selected.length-t.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:me(()=>[ne("div",{ref:"tagMenuRef",class:U(t.nsSelect.e("selection"))},[(D(!0),Z(xt,null,_n(t.collapseTagList,d=>(D(),Z("div",{key:t.getValueKey(d),class:U(t.nsSelect.e("selected-item"))},[ae(n,{class:"in-tooltip",closable:!t.selectDisabled&&!d.isDisabled,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",onClose:h=>t.deleteTag(h,d)},{default:me(()=>[ne("span",{class:U(t.nsSelect.e("tags-text"))},[Ae(t.$slots,"label",{label:d.currentLabel,value:d.value},()=>[rn(tt(d.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","popper-class","teleported"])):Pe("v-if",!0)]):Pe("v-if",!0),ne("div",{class:U([t.nsSelect.e("selected-item"),t.nsSelect.e("input-wrapper"),t.nsSelect.is("hidden",!t.filterable)])},[cn(ne("input",{id:t.inputId,ref:"inputRef","onUpdate:modelValue":d=>t.states.inputValue=d,type:"text",name:t.name,class:U([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize)]),disabled:t.selectDisabled,autocomplete:t.autocomplete,style:Pt(t.inputStyle),tabindex:t.tabindex,role:"combobox",readonly:!t.filterable,spellcheck:"false","aria-activedescendant":((u=t.hoverOption)==null?void 0:u.id)||"","aria-controls":t.contentId,"aria-expanded":t.dropdownMenuVisible,"aria-label":t.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[cr($t(d=>t.navigateOptions("next"),["stop","prevent"]),["down"]),cr($t(d=>t.navigateOptions("prev"),["stop","prevent"]),["up"]),cr($t(t.handleEsc,["stop","prevent"]),["esc"]),cr($t(t.selectOption,["stop","prevent"]),["enter"]),cr($t(t.deletePrevTag,["stop"]),["delete"])],onCompositionstart:t.handleCompositionStart,onCompositionupdate:t.handleCompositionUpdate,onCompositionend:t.handleCompositionEnd,onInput:t.onInput,onClick:$t(t.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","tabindex","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[c_,t.states.inputValue]]),t.filterable?(D(),Z("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:U(t.nsSelect.e("input-calculator")),textContent:tt(t.states.inputValue)},null,10,["textContent"])):Pe("v-if",!0)],2),t.shouldShowPlaceholder?(D(),Z("div",{key:1,class:U([t.nsSelect.e("selected-item"),t.nsSelect.e("placeholder"),t.nsSelect.is("transparent",!t.hasModelValue||t.expanded&&!t.states.inputValue)])},[t.hasModelValue?Ae(t.$slots,"label",{key:0,label:t.currentPlaceholder,value:t.modelValue},()=>[ne("span",null,tt(t.currentPlaceholder),1)]):(D(),Z("span",{key:1},tt(t.currentPlaceholder),1))],2)):Pe("v-if",!0)],2),ne("div",{ref:"suffixRef",class:U(t.nsSelect.e("suffix"))},[t.iconComponent&&!t.showClose?(D(),Le(s,{key:0,class:U([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.iconReverse])},{default:me(()=>[(D(),Le(mn(t.iconComponent)))]),_:1},8,["class"])):Pe("v-if",!0),t.showClose&&t.clearIcon?(D(),Le(s,{key:1,class:U([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.nsSelect.e("clear")]),onClick:t.handleClearClick},{default:me(()=>[(D(),Le(mn(t.clearIcon)))]),_:1},8,["class","onClick"])):Pe("v-if",!0),t.validateState&&t.validateIcon&&t.needStatusIcon?(D(),Le(s,{key:2,class:U([t.nsInput.e("icon"),t.nsInput.e("validateIcon"),t.nsInput.is("loading",t.validateState==="validating")])},{default:me(()=>[(D(),Le(mn(t.validateIcon)))]),_:1},8,["class"])):Pe("v-if",!0)],2)],10,["onClick"])]}),content:me(()=>[ae(l,{ref:"menuRef"},{default:me(()=>[t.$slots.header?(D(),Z("div",{key:0,class:U(t.nsSelect.be("dropdown","header")),onClick:$t(()=>{},["stop"])},[Ae(t.$slots,"header")],10,["onClick"])):Pe("v-if",!0),cn(ae(a,{id:t.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":t.nsSelect.be("dropdown","wrap"),"view-class":t.nsSelect.be("dropdown","list"),class:U([t.nsSelect.is("empty",t.filteredOptionsCount===0)]),role:"listbox","aria-label":t.ariaLabel,"aria-orientation":"vertical",onScroll:t.popupScroll},{default:me(()=>[t.showNewOption?(D(),Le(i,{key:0,value:t.states.inputValue,created:!0},null,8,["value"])):Pe("v-if",!0),ae(o,null,{default:me(()=>[Ae(t.$slots,"default",{},()=>[(D(!0),Z(xt,null,_n(t.options,(u,d)=>{var h,f,m,v,y,g;return D(),Le(i,{key:d,label:u[(f=(h=t.props)==null?void 0:h.label)!=null?f:"label"],value:u[(v=(m=t.props)==null?void 0:m.value)!=null?v:"value"],disabled:u[(g=(y=t.props)==null?void 0:y.disabled)!=null?g:"disabled"]},null,8,["label","value","disabled"])}),128))])]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label","onScroll"]),[[Wn,t.states.options.size>0&&!t.loading]]),t.$slots.loading&&t.loading?(D(),Z("div",{key:1,class:U(t.nsSelect.be("dropdown","loading"))},[Ae(t.$slots,"loading")],2)):t.loading||t.filteredOptionsCount===0?(D(),Z("div",{key:2,class:U(t.nsSelect.be("dropdown","empty"))},[Ae(t.$slots,"empty",{},()=>[ne("span",null,tt(t.emptyText),1)])],2)):Pe("v-if",!0),t.$slots.footer?(D(),Z("div",{key:3,class:U(t.nsSelect.be("dropdown","footer")),onClick:$t(()=>{},["stop"])},[Ae(t.$slots,"footer")],10,["onClick"])):Pe("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],16,["onMouseleave"])),[[c,t.handleClickOutside,t.popperRef]])}var aTe=at(iTe,[["render",oTe],["__file","select.vue"]]);const lTe=de({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(t){const e=Qe("select"),n=H(),r=tn(),s=H([]);Mn(w7,Ln({...Ds(t)}));const i=R(()=>s.value.some(c=>c.visible===!0)),o=c=>{var u;return c.type.name==="ElOption"&&!!((u=c.component)!=null&&u.proxy)},a=c=>{const u=Hs(c),d=[];return u.forEach(h=>{var f;wr(h)&&(o(h)?d.push(h.component.proxy):rt(h.children)&&h.children.length?d.push(...a(h.children)):(f=h.component)!=null&&f.subTree&&d.push(...a(h.component.subTree)))}),d},l=()=>{s.value=a(r.subTree)};return Zt(()=>{l()}),WB(n,l,{attributes:!0,subtree:!0,childList:!0}),{groupRef:n,visible:i,ns:e}}});function cTe(t,e,n,r,s,i){return cn((D(),Z("ul",{ref:"groupRef",class:U(t.ns.be("group","wrap"))},[ne("li",{class:U(t.ns.be("group","title"))},tt(t.label),3),ne("li",null,[ne("ul",{class:U(t.ns.b("group"))},[Ae(t.$slots,"default")],2)])],2)),[[Wn,t.visible]])}var x7=at(lTe,[["render",cTe],["__file","option-group.vue"]]);const ih=nn(aTe,{Option:LM,OptionGroup:x7}),c1=Br(LM),uTe=Br(x7),OM=()=>_t(_7,{}),dTe=it({pageSize:{type:Number,required:!0},pageSizes:{type:Ce(Array),default:()=>Fr([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:Rl},appendSizeTo:String}),hTe=de({name:"ElPaginationSizes"}),fTe=de({...hTe,props:dTe,emits:["page-size-change"],setup(t,{emit:e}){const n=t,{t:r}=zn(),s=Qe("pagination"),i=OM(),o=H(n.pageSize);Be(()=>n.pageSizes,(c,u)=>{if(!_s(c,u)&&rt(c)){const d=c.includes(n.pageSize)?n.pageSize:n.pageSizes[0];e("page-size-change",d)}}),Be(()=>n.pageSize,c=>{o.value=c});const a=R(()=>n.pageSizes);function l(c){var u;c!==o.value&&(o.value=c,(u=i.handleSizeChange)==null||u.call(i,Number(c)))}return(c,u)=>(D(),Z("span",{class:U(p(s).e("sizes"))},[ae(p(ih),{"model-value":o.value,disabled:c.disabled,"popper-class":c.popperClass,size:c.size,teleported:c.teleported,"validate-event":!1,"append-to":c.appendSizeTo,onChange:l},{default:me(()=>[(D(!0),Z(xt,null,_n(p(a),d=>(D(),Le(p(c1),{key:d,value:d,label:d+p(r)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported","append-to"])],2))}});var pTe=at(fTe,[["__file","sizes.vue"]]);const mTe=it({size:{type:String,values:Rl}}),gTe=de({name:"ElPaginationJumper"}),vTe=de({...gTe,props:mTe,setup(t){const{t:e}=zn(),n=Qe("pagination"),{pageCount:r,disabled:s,currentPage:i,changeEvent:o}=OM(),a=H(),l=R(()=>{var d;return(d=a.value)!=null?d:i==null?void 0:i.value});function c(d){a.value=d?+d:""}function u(d){d=Math.trunc(+d),o==null||o(d),a.value=void 0}return(d,h)=>(D(),Z("span",{class:U(p(n).e("jump")),disabled:p(s)},[ne("span",{class:U([p(n).e("goto")])},tt(p(e)("el.pagination.goto")),3),ae(p(Ci),{size:d.size,class:U([p(n).e("editor"),p(n).is("in-pagination")]),min:1,max:p(r),disabled:p(s),"model-value":p(l),"validate-event":!1,"aria-label":p(e)("el.pagination.page"),type:"number","onUpdate:modelValue":c,onChange:u},null,8,["size","class","max","disabled","model-value","aria-label"]),ne("span",{class:U([p(n).e("classifier")])},tt(p(e)("el.pagination.pageClassifier")),3)],10,["disabled"]))}});var yTe=at(vTe,[["__file","jumper.vue"]]);const bTe=it({total:{type:Number,default:1e3}}),_Te=de({name:"ElPaginationTotal"}),wTe=de({..._Te,props:bTe,setup(t){const{t:e}=zn(),n=Qe("pagination"),{disabled:r}=OM();return(s,i)=>(D(),Z("span",{class:U(p(n).e("total")),disabled:p(r)},tt(p(e)("el.pagination.total",{total:s.total})),11,["disabled"]))}});var xTe=at(wTe,[["__file","total.vue"]]);const STe=it({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),ETe=de({name:"ElPaginationPager"}),CTe=de({...ETe,props:STe,emits:[xn],setup(t,{emit:e}){const n=t,r=Qe("pager"),s=Qe("icon"),{t:i}=zn(),o=H(!1),a=H(!1),l=H(!1),c=H(!1),u=H(!1),d=H(!1),h=R(()=>{const w=n.pagerCount,E=(w-1)/2,C=Number(n.currentPage),T=Number(n.pageCount);let I=!1,k=!1;T>w&&(C>w-E&&(I=!0),C<T-E&&(k=!0));const M=[];if(I&&!k){const L=T-(w-2);for(let N=L;N<T;N++)M.push(N)}else if(!I&&k)for(let L=2;L<w;L++)M.push(L);else if(I&&k){const L=Math.floor(w/2)-1;for(let N=C-L;N<=C+L;N++)M.push(N)}else for(let L=2;L<T;L++)M.push(L);return M}),f=R(()=>["more","btn-quickprev",s.b(),r.is("disabled",n.disabled)]),m=R(()=>["more","btn-quicknext",s.b(),r.is("disabled",n.disabled)]),v=R(()=>n.disabled?-1:0);Be(()=>[n.pageCount,n.pagerCount,n.currentPage],([w,E,C])=>{const T=(E-1)/2;let I=!1,k=!1;w>E&&(I=C>E-T,k=C<w-T),l.value&&(l.value=I),c.value&&(c.value=k),o.value=I,a.value=k},{immediate:!0});function y(w=!1){n.disabled||(w?l.value=!0:c.value=!0)}function g(w=!1){w?u.value=!0:d.value=!0}function S(w){const E=w.target;if(E.tagName.toLowerCase()==="li"&&Array.from(E.classList).includes("number")){const C=Number(E.textContent);C!==n.currentPage&&e(xn,C)}else E.tagName.toLowerCase()==="li"&&Array.from(E.classList).includes("more")&&_(w)}function _(w){const E=w.target;if(E.tagName.toLowerCase()==="ul"||n.disabled)return;let C=Number(E.textContent);const T=n.pageCount,I=n.currentPage,k=n.pagerCount-2;E.className.includes("more")&&(E.className.includes("quickprev")?C=I-k:E.className.includes("quicknext")&&(C=I+k)),Number.isNaN(+C)||(C<1&&(C=1),C>T&&(C=T)),C!==I&&e(xn,C)}return(w,E)=>(D(),Z("ul",{class:U(p(r).b()),onClick:_,onKeyup:cr(S,["enter"])},[w.pageCount>0?(D(),Z("li",{key:0,class:U([[p(r).is("active",w.currentPage===1),p(r).is("disabled",w.disabled)],"number"]),"aria-current":w.currentPage===1,"aria-label":p(i)("el.pagination.currentPage",{pager:1}),tabindex:p(v)}," 1 ",10,["aria-current","aria-label","tabindex"])):Pe("v-if",!0),o.value?(D(),Z("li",{key:1,class:U(p(f)),tabindex:p(v),"aria-label":p(i)("el.pagination.prevPages",{pager:w.pagerCount-2}),onMouseenter:C=>y(!0),onMouseleave:C=>l.value=!1,onFocus:C=>g(!0),onBlur:C=>u.value=!1},[(l.value||u.value)&&!w.disabled?(D(),Le(p(zu),{key:0})):(D(),Le(p(BR),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):Pe("v-if",!0),(D(!0),Z(xt,null,_n(p(h),C=>(D(),Z("li",{key:C,class:U([[p(r).is("active",w.currentPage===C),p(r).is("disabled",w.disabled)],"number"]),"aria-current":w.currentPage===C,"aria-label":p(i)("el.pagination.currentPage",{pager:C}),tabindex:p(v)},tt(C),11,["aria-current","aria-label","tabindex"]))),128)),a.value?(D(),Z("li",{key:2,class:U(p(m)),tabindex:p(v),"aria-label":p(i)("el.pagination.nextPages",{pager:w.pagerCount-2}),onMouseenter:C=>y(),onMouseleave:C=>c.value=!1,onFocus:C=>g(),onBlur:C=>d.value=!1},[(c.value||d.value)&&!w.disabled?(D(),Le(p($u),{key:0})):(D(),Le(p(BR),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):Pe("v-if",!0),w.pageCount>1?(D(),Z("li",{key:3,class:U([[p(r).is("active",w.currentPage===w.pageCount),p(r).is("disabled",w.disabled)],"number"]),"aria-current":w.currentPage===w.pageCount,"aria-label":p(i)("el.pagination.currentPage",{pager:w.pageCount}),tabindex:p(v)},tt(w.pageCount),11,["aria-current","aria-label","tabindex"])):Pe("v-if",!0)],42,["onKeyup"]))}});var TTe=at(CTe,[["__file","pager.vue"]]);const Fi=t=>typeof t!="number",MTe=it({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:t=>Ft(t)&&Math.trunc(t)===t&&t>4&&t<22&&t%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:Ce(Array),default:()=>Fr([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:or,default:()=>Sc},nextText:{type:String,default:""},nextIcon:{type:or,default:()=>Ai},teleported:{type:Boolean,default:!0},small:Boolean,size:Es,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean,appendSizeTo:String}),ATe={"update:current-page":t=>Ft(t),"update:page-size":t=>Ft(t),"size-change":t=>Ft(t),change:(t,e)=>Ft(t)&&Ft(e),"current-change":t=>Ft(t),"prev-click":t=>Ft(t),"next-click":t=>Ft(t)},B4="ElPagination";var kTe=de({name:B4,props:MTe,emits:ATe,setup(t,{emit:e,slots:n}){const{t:r}=zn(),s=Qe("pagination"),i=tn().vnode.props||{},o=JB(),a=R(()=>{var E;return t.small?"small":(E=t.size)!=null?E:o.value});vc({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},R(()=>!!t.small));const l="onUpdate:currentPage"in i||"onUpdate:current-page"in i||"onCurrentChange"in i,c="onUpdate:pageSize"in i||"onUpdate:page-size"in i||"onSizeChange"in i,u=R(()=>{if(Fi(t.total)&&Fi(t.pageCount)||!Fi(t.currentPage)&&!l)return!1;if(t.layout.includes("sizes")){if(Fi(t.pageCount)){if(!Fi(t.total)&&!Fi(t.pageSize)&&!c)return!1}else if(!c)return!1}return!0}),d=H(Fi(t.defaultPageSize)?10:t.defaultPageSize),h=H(Fi(t.defaultCurrentPage)?1:t.defaultCurrentPage),f=R({get(){return Fi(t.pageSize)?d.value:t.pageSize},set(E){Fi(t.pageSize)&&(d.value=E),c&&(e("update:page-size",E),e("size-change",E))}}),m=R(()=>{let E=0;return Fi(t.pageCount)?Fi(t.total)||(E=Math.max(1,Math.ceil(t.total/f.value))):E=t.pageCount,E}),v=R({get(){return Fi(t.currentPage)?h.value:t.currentPage},set(E){let C=E;E<1?C=1:E>m.value&&(C=m.value),Fi(t.currentPage)&&(h.value=C),l&&(e("update:current-page",C),e("current-change",C))}});Be(m,E=>{v.value>E&&(v.value=E)}),Be([v,f],E=>{e(xn,...E)},{flush:"post"});function y(E){v.value=E}function g(E){f.value=E;const C=m.value;v.value>C&&(v.value=C)}function S(){t.disabled||(v.value-=1,e("prev-click",v.value))}function _(){t.disabled||(v.value+=1,e("next-click",v.value))}function w(E,C){E&&(E.props||(E.props={}),E.props.class=[E.props.class,C].join(" "))}return Mn(_7,{pageCount:m,disabled:R(()=>t.disabled),currentPage:v,changeEvent:y,handleSizeChange:g}),()=>{var E,C;if(!u.value)return r("el.pagination.deprecationWarning"),null;if(!t.layout||t.hideOnSinglePage&&m.value<=1)return null;const T=[],I=[],k=Ut("div",{class:s.e("rightwrapper")},I),M={prev:Ut(GCe,{disabled:t.disabled,currentPage:v.value,prevText:t.prevText,prevIcon:t.prevIcon,onClick:S}),jumper:Ut(yTe,{size:a.value}),pager:Ut(TTe,{currentPage:v.value,pageCount:m.value,pagerCount:t.pagerCount,onChange:y,disabled:t.disabled}),next:Ut(qCe,{disabled:t.disabled,currentPage:v.value,pageCount:m.value,nextText:t.nextText,nextIcon:t.nextIcon,onClick:_}),sizes:Ut(pTe,{pageSize:f.value,pageSizes:t.pageSizes,popperClass:t.popperClass,disabled:t.disabled,teleported:t.teleported,size:a.value,appendSizeTo:t.appendSizeTo}),slot:(C=(E=n==null?void 0:n.default)==null?void 0:E.call(n))!=null?C:null,total:Ut(xTe,{total:Fi(t.total)?0:t.total})},L=t.layout.split(",").map(G=>G.trim());let N=!1;return L.forEach(G=>{if(G==="->"){N=!0;return}N?I.push(M[G]):T.push(M[G])}),w(T[0],s.is("first")),w(T[T.length-1],s.is("last")),N&&I.length>0&&(w(I[0],s.is("first")),w(I[I.length-1],s.is("last")),T.push(k)),Ut("div",{class:[s.b(),s.is("background",t.background),s.m(a.value)]},T)}}});const ITe=nn(kTe),PTe=it({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:Z2,default:"primary"},cancelButtonType:{type:String,values:Z2,default:"text"},icon:{type:or,default:()=>Rge},iconColor:{type:String,default:"#f90"},hideIcon:Boolean,hideAfter:{type:Number,default:200},teleported:ss.teleported,persistent:ss.persistent,width:{type:[String,Number],default:150}}),RTe={confirm:t=>t instanceof MouseEvent,cancel:t=>t instanceof MouseEvent},LTe=de({name:"ElPopconfirm"}),OTe=de({...LTe,props:PTe,emits:RTe,setup(t,{expose:e,emit:n}){const r=t,{t:s}=zn(),i=Qe("popconfirm"),o=H(),a=R(()=>{var m;return(m=p(o))==null?void 0:m.popperRef}),l=()=>{var m,v;(v=(m=o.value)==null?void 0:m.onClose)==null||v.call(m)},c=R(()=>({width:qr(r.width)})),u=m=>{n("confirm",m),l()},d=m=>{n("cancel",m),l()},h=R(()=>r.confirmButtonText||s("el.popconfirm.confirmButtonText")),f=R(()=>r.cancelButtonText||s("el.popconfirm.cancelButtonText"));return e({popperRef:a,hide:l}),(m,v)=>(D(),Le(p(ri),yn({ref_key:"tooltipRef",ref:o,trigger:"click",effect:"light"},m.$attrs,{"popper-class":`${p(i).namespace.value}-popover`,"popper-style":p(c),teleported:m.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":m.hideAfter,persistent:m.persistent}),{content:me(()=>[ne("div",{class:U(p(i).b())},[ne("div",{class:U(p(i).e("main"))},[!m.hideIcon&&m.icon?(D(),Le(p(Et),{key:0,class:U(p(i).e("icon")),style:Pt({color:m.iconColor})},{default:me(()=>[(D(),Le(mn(m.icon)))]),_:1},8,["class","style"])):Pe("v-if",!0),rn(" "+tt(m.title),1)],2),ne("div",{class:U(p(i).e("action"))},[Ae(m.$slots,"actions",{confirm:u,cancel:d},()=>[ae(p(Ss),{size:"small",type:m.cancelButtonType==="text"?"":m.cancelButtonType,text:m.cancelButtonType==="text",onClick:d},{default:me(()=>[rn(tt(p(f)),1)]),_:1},8,["type","text"]),ae(p(Ss),{size:"small",type:m.confirmButtonType==="text"?"":m.confirmButtonType,text:m.confirmButtonType==="text",onClick:u},{default:me(()=>[rn(tt(p(h)),1)]),_:1},8,["type","text"])])],2)],2)]),default:me(()=>[m.$slots.reference?Ae(m.$slots,"reference",{key:0}):Pe("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var NTe=at(OTe,[["__file","popconfirm.vue"]]);const DTe=nn(NTe),FTe=it({trigger:jf.trigger,triggerKeys:jf.triggerKeys,placement:ib.placement,disabled:jf.disabled,visible:ss.visible,transition:ss.transition,popperOptions:ib.popperOptions,tabindex:ib.tabindex,content:ss.content,popperStyle:ss.popperStyle,popperClass:ss.popperClass,enterable:{...ss.enterable,default:!0},effect:{...ss.effect,default:"light"},teleported:ss.teleported,appendTo:ss.appendTo,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),BTe={"update:visible":t=>nr(t),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},UTe="onUpdate:visible",zTe=de({name:"ElPopover"}),$Te=de({...zTe,props:FTe,emits:BTe,setup(t,{expose:e,emit:n}){const r=t,s=R(()=>r[UTe]),i=Qe("popover"),o=H(),a=R(()=>{var y;return(y=p(o))==null?void 0:y.popperRef}),l=R(()=>[{width:qr(r.width)},r.popperStyle]),c=R(()=>[i.b(),r.popperClass,{[i.m("plain")]:!!r.content}]),u=R(()=>r.transition===`${i.namespace.value}-fade-in-linear`),d=()=>{var y;(y=o.value)==null||y.hide()},h=()=>{n("before-enter")},f=()=>{n("before-leave")},m=()=>{n("after-enter")},v=()=>{n("update:visible",!1),n("after-leave")};return e({popperRef:a,hide:d}),(y,g)=>(D(),Le(p(ri),yn({ref_key:"tooltipRef",ref:o},y.$attrs,{trigger:y.trigger,"trigger-keys":y.triggerKeys,placement:y.placement,disabled:y.disabled,visible:y.visible,transition:y.transition,"popper-options":y.popperOptions,tabindex:y.tabindex,content:y.content,offset:y.offset,"show-after":y.showAfter,"hide-after":y.hideAfter,"auto-close":y.autoClose,"show-arrow":y.showArrow,"aria-label":y.title,effect:y.effect,enterable:y.enterable,"popper-class":p(c),"popper-style":p(l),teleported:y.teleported,"append-to":y.appendTo,persistent:y.persistent,"gpu-acceleration":p(u),"onUpdate:visible":p(s),onBeforeShow:h,onBeforeHide:f,onShow:m,onHide:v}),{content:me(()=>[y.title?(D(),Z("div",{key:0,class:U(p(i).e("title")),role:"title"},tt(y.title),3)):Pe("v-if",!0),Ae(y.$slots,"default",{},()=>[rn(tt(y.content),1)])]),default:me(()=>[y.$slots.reference?Ae(y.$slots,"reference",{key:0}):Pe("v-if",!0)]),_:3},16,["trigger","trigger-keys","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","append-to","persistent","gpu-acceleration","onUpdate:visible"]))}});var VTe=at($Te,[["__file","popover.vue"]]);const U4=(t,e)=>{const n=e.arg||e.value,r=n==null?void 0:n.popperRef;r&&(r.triggerRef=t)};var HTe={mounted(t,e){U4(t,e)},updated(t,e){U4(t,e)}};const GTe="popover",S7=zme(HTe,GTe),WTe=nn(VTe,{directive:S7}),jTe=it({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:Ce(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:Ce([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:Ce(Function),default:t=>`${t}%`}}),KTe=de({name:"ElProgress"}),qTe=de({...KTe,props:jTe,setup(t){const e=t,n={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},r=Qe("progress"),s=R(()=>{const _={width:`${e.percentage}%`,animationDuration:`${e.duration}s`},w=S(e.percentage);return w.includes("gradient")?_.background=w:_.backgroundColor=w,_}),i=R(()=>(e.strokeWidth/e.width*100).toFixed(1)),o=R(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(i.value)/2}`,10):0),a=R(()=>{const _=o.value,w=e.type==="dashboard";return`
          M 50 50
          m 0 ${w?"":"-"}${_}
          a ${_} ${_} 0 1 1 0 ${w?"-":""}${_*2}
          a ${_} ${_} 0 1 1 0 ${w?"":"-"}${_*2}
          `}),l=R(()=>2*Math.PI*o.value),c=R(()=>e.type==="dashboard"?.75:1),u=R(()=>`${-1*l.value*(1-c.value)/2}px`),d=R(()=>({strokeDasharray:`${l.value*c.value}px, ${l.value}px`,strokeDashoffset:u.value})),h=R(()=>({strokeDasharray:`${l.value*c.value*(e.percentage/100)}px, ${l.value}px`,strokeDashoffset:u.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),f=R(()=>{let _;return e.color?_=S(e.percentage):_=n[e.status]||n.default,_}),m=R(()=>e.status==="warning"?m_:e.type==="line"?e.status==="success"?KT:Rc:e.status==="success"?Pv:ra),v=R(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),y=R(()=>e.format(e.percentage));function g(_){const w=100/_.length;return _.map((C,T)=>kt(C)?{color:C,percentage:(T+1)*w}:C).sort((C,T)=>C.percentage-T.percentage)}const S=_=>{var w;const{color:E}=e;if(Lt(E))return E(_);if(kt(E))return E;{const C=g(E);for(const T of C)if(T.percentage>_)return T.color;return(w=C[C.length-1])==null?void 0:w.color}};return(_,w)=>(D(),Z("div",{class:U([p(r).b(),p(r).m(_.type),p(r).is(_.status),{[p(r).m("without-text")]:!_.showText,[p(r).m("text-inside")]:_.textInside}]),role:"progressbar","aria-valuenow":_.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[_.type==="line"?(D(),Z("div",{key:0,class:U(p(r).b("bar"))},[ne("div",{class:U(p(r).be("bar","outer")),style:Pt({height:`${_.strokeWidth}px`})},[ne("div",{class:U([p(r).be("bar","inner"),{[p(r).bem("bar","inner","indeterminate")]:_.indeterminate},{[p(r).bem("bar","inner","striped")]:_.striped},{[p(r).bem("bar","inner","striped-flow")]:_.stripedFlow}]),style:Pt(p(s))},[(_.showText||_.$slots.default)&&_.textInside?(D(),Z("div",{key:0,class:U(p(r).be("bar","innerText"))},[Ae(_.$slots,"default",{percentage:_.percentage},()=>[ne("span",null,tt(p(y)),1)])],2)):Pe("v-if",!0)],6)],6)],2)):(D(),Z("div",{key:1,class:U(p(r).b("circle")),style:Pt({height:`${_.width}px`,width:`${_.width}px`})},[(D(),Z("svg",{viewBox:"0 0 100 100"},[ne("path",{class:U(p(r).be("circle","track")),d:p(a),stroke:`var(${p(r).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":_.strokeLinecap,"stroke-width":p(i),fill:"none",style:Pt(p(d))},null,14,["d","stroke","stroke-linecap","stroke-width"]),ne("path",{class:U(p(r).be("circle","path")),d:p(a),stroke:p(f),fill:"none",opacity:_.percentage?1:0,"stroke-linecap":_.strokeLinecap,"stroke-width":p(i),style:Pt(p(h))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(_.showText||_.$slots.default)&&!_.textInside?(D(),Z("div",{key:2,class:U(p(r).e("text")),style:Pt({fontSize:`${p(v)}px`})},[Ae(_.$slots,"default",{percentage:_.percentage},()=>[_.status?(D(),Le(p(Et),{key:1},{default:me(()=>[(D(),Le(mn(p(m))))]),_:1})):(D(),Z("span",{key:0},tt(p(y)),1))])],6)):Pe("v-if",!0)],10,["aria-valuenow"]))}});var YTe=at(qTe,[["__file","progress.vue"]]);const NM=nn(YTe),XTe=it({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:Ce([Array,Object]),default:()=>Fr(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:Ce([Array,Object]),default:()=>[fy,fy,fy]},voidIcon:{type:or,default:()=>Kge},disabledVoidIcon:{type:or,default:()=>fy},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:Ce(Array),default:()=>Fr(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:Es,clearable:Boolean,...hi(["ariaLabel"])}),ZTe={[xn]:t=>Ft(t),[Qt]:t=>Ft(t)},JTe=de({name:"ElRate"}),QTe=de({...JTe,props:XTe,emits:ZTe,setup(t,{expose:e,emit:n}){const r=t;function s(F,$){const O=q=>un(q),z=Object.keys($).map(q=>+q).filter(q=>{const le=$[q];return(O(le)?le.excluded:!1)?F<q:F<=q}).sort((q,le)=>q-le),re=$[z[0]];return O(re)&&re.value||re}const i=_t(bh,void 0),o=_t(Cl,void 0),a=ys(),l=Qe("rate"),{inputId:c,isLabeledByFormItem:u}=la(r,{formItemContext:o}),d=H(r.modelValue),h=H(-1),f=H(!0),m=R(()=>[l.b(),l.m(a.value)]),v=R(()=>r.disabled||(i==null?void 0:i.disabled)),y=R(()=>l.cssVarBlock({"void-color":r.voidColor,"disabled-void-color":r.disabledVoidColor,"fill-color":w.value})),g=R(()=>{let F="";return r.showScore?F=r.scoreTemplate.replace(/\{\s*value\s*\}/,v.value?`${r.modelValue}`:`${d.value}`):r.showText&&(F=r.texts[Math.ceil(d.value)-1]),F}),S=R(()=>r.modelValue*100-Math.floor(r.modelValue)*100),_=R(()=>rt(r.colors)?{[r.lowThreshold]:r.colors[0],[r.highThreshold]:{value:r.colors[1],excluded:!0},[r.max]:r.colors[2]}:r.colors),w=R(()=>{const F=s(d.value,_.value);return un(F)?"":F}),E=R(()=>{let F="";return v.value?F=`${S.value}%`:r.allowHalf&&(F="50%"),{color:w.value,width:F}}),C=R(()=>{let F=rt(r.icons)?[...r.icons]:{...r.icons};return F=Oa(F),rt(F)?{[r.lowThreshold]:F[0],[r.highThreshold]:{value:F[1],excluded:!0},[r.max]:F[2]}:F}),T=R(()=>s(r.modelValue,C.value)),I=R(()=>v.value?kt(r.disabledVoidIcon)?r.disabledVoidIcon:Oa(r.disabledVoidIcon):kt(r.voidIcon)?r.voidIcon:Oa(r.voidIcon)),k=R(()=>s(d.value,C.value));function M(F){const $=v.value&&S.value>0&&F-1<r.modelValue&&F>r.modelValue,O=r.allowHalf&&f.value&&F-.5<=d.value&&F>d.value;return $||O}function L(F){r.clearable&&F===r.modelValue&&(F=0),n(Qt,F),r.modelValue!==F&&n(xn,F)}function N(F){v.value||(r.allowHalf&&f.value?L(d.value):L(F))}function G(F){if(v.value)return;let $=d.value;const O=F.code;return O===bt.up||O===bt.right?(r.allowHalf?$+=.5:$+=1,F.stopPropagation(),F.preventDefault()):(O===bt.left||O===bt.down)&&(r.allowHalf?$-=.5:$-=1,F.stopPropagation(),F.preventDefault()),$=$<0?0:$,$=$>r.max?r.max:$,n(Qt,$),n(xn,$),$}function V(F,$){if(!v.value){if(r.allowHalf&&$){let O=$.target;ao(O,l.e("item"))&&(O=O.querySelector(`.${l.e("icon")}`)),(O.clientWidth===0||ao(O,l.e("decimal")))&&(O=O.parentNode),f.value=$.offsetX*2<=O.clientWidth,d.value=f.value?F-.5:F}else d.value=F;h.value=F}}function X(){v.value||(r.allowHalf&&(f.value=r.modelValue!==Math.floor(r.modelValue)),d.value=r.modelValue,h.value=-1)}return Be(()=>r.modelValue,F=>{d.value=F,f.value=r.modelValue!==Math.floor(r.modelValue)}),r.modelValue||n(Qt,0),e({setCurrentValue:V,resetCurrentValue:X}),(F,$)=>{var O;return D(),Z("div",{id:p(c),class:U([p(m),p(l).is("disabled",p(v))]),role:"slider","aria-label":p(u)?void 0:F.ariaLabel||"rating","aria-labelledby":p(u)?(O=p(o))==null?void 0:O.labelId:void 0,"aria-valuenow":d.value,"aria-valuetext":p(g)||void 0,"aria-valuemin":"0","aria-valuemax":F.max,tabindex:"0",style:Pt(p(y)),onKeydown:G},[(D(!0),Z(xt,null,_n(F.max,(z,re)=>(D(),Z("span",{key:re,class:U(p(l).e("item")),onMousemove:q=>V(z,q),onMouseleave:X,onClick:q=>N(z)},[ae(p(Et),{class:U([p(l).e("icon"),{hover:h.value===z},p(l).is("active",z<=d.value)])},{default:me(()=>[M(z)?Pe("v-if",!0):(D(),Z(xt,{key:0},[cn((D(),Le(mn(p(k)),null,null,512)),[[Wn,z<=d.value]]),cn((D(),Le(mn(p(I)),null,null,512)),[[Wn,!(z<=d.value)]])],64)),M(z)?(D(),Z(xt,{key:1},[(D(),Le(mn(p(I)),{class:U([p(l).em("decimal","box")])},null,8,["class"])),ae(p(Et),{style:Pt(p(E)),class:U([p(l).e("icon"),p(l).e("decimal")])},{default:me(()=>[(D(),Le(mn(p(T))))]),_:1},8,["style","class"])],64)):Pe("v-if",!0)]),_:2},1032,["class"])],42,["onMousemove","onClick"]))),128)),F.showText||F.showScore?(D(),Z("span",{key:0,class:U(p(l).e("text")),style:Pt({color:F.textColor})},tt(p(g)),7)):Pe("v-if",!0)],46,["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"])}}});var eMe=at(QTe,[["__file","rate.vue"]]);const tMe=nn(eMe),Ad={primary:"icon-primary",success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},z4={[Ad.primary]:Gg,[Ad.success]:ige,[Ad.warning]:m_,[Ad.error]:qT,[Ad.info]:Gg},nMe=it({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["primary","success","warning","info","error"],default:"info"}}),rMe=de({name:"ElResult"}),sMe=de({...rMe,props:nMe,setup(t){const e=t,n=Qe("result"),r=R(()=>{const s=e.icon,i=s&&Ad[s]?Ad[s]:"icon-info",o=z4[i]||z4["icon-info"];return{class:i,component:o}});return(s,i)=>(D(),Z("div",{class:U(p(n).b())},[ne("div",{class:U(p(n).e("icon"))},[Ae(s.$slots,"icon",{},()=>[p(r).component?(D(),Le(mn(p(r).component),{key:0,class:U(p(r).class)},null,8,["class"])):Pe("v-if",!0)])],2),s.title||s.$slots.title?(D(),Z("div",{key:0,class:U(p(n).e("title"))},[Ae(s.$slots,"title",{},()=>[ne("p",null,tt(s.title),1)])],2)):Pe("v-if",!0),s.subTitle||s.$slots["sub-title"]?(D(),Z("div",{key:1,class:U(p(n).e("subtitle"))},[Ae(s.$slots,"sub-title",{},()=>[ne("p",null,tt(s.subTitle),1)])],2)):Pe("v-if",!0),s.$slots.extra?(D(),Z("div",{key:2,class:U(p(n).e("extra"))},[Ae(s.$slots,"extra")],2)):Pe("v-if",!0)],2))}});var iMe=at(sMe,[["__file","result.vue"]]);const oMe=nn(iMe),aMe=["start","center","end","space-around","space-between","space-evenly"],lMe=["top","middle","bottom"],cMe=it({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:aMe,default:"start"},align:{type:String,values:lMe}}),uMe=de({name:"ElRow"}),dMe=de({...uMe,props:cMe,setup(t){const e=t,n=Qe("row"),r=R(()=>e.gutter);Mn(_z,{gutter:r});const s=R(()=>{const o={};return e.gutter&&(o.marginRight=o.marginLeft=`-${e.gutter/2}px`),o}),i=R(()=>[n.b(),n.is(`justify-${e.justify}`,e.justify!=="start"),n.is(`align-${e.align}`,!!e.align)]);return(o,a)=>(D(),Le(mn(o.tag),{class:U(p(i)),style:Pt(p(s))},{default:me(()=>[Ae(o.$slots,"default")]),_:3},8,["class","style"]))}});var hMe=at(dMe,[["__file","row.vue"]]);const fMe=nn(hMe),pMe=de({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup(){return{ns:Qe("select")}}});function mMe(t,e,n,r,s,i){return D(),Z("div",{class:U(t.ns.be("group","title")),style:Pt({...t.style,lineHeight:`${t.height}px`})},tt(t.item.label),7)}var gMe=at(pMe,[["render",mMe],["__file","group-item.vue"]]);function vMe(t,{emit:e}){return{hoverItem:()=>{t.disabled||e("hover",t.index)},selectOptionClick:()=>{t.disabled||e("select",t.item,t.index)}}}const E7={label:"label",value:"value",disabled:"disabled",options:"options"};function A_(t){const e=R(()=>({...E7,...t.props}));return{aliasProps:e,getLabel:o=>cs(o,e.value.label),getValue:o=>cs(o,e.value.value),getDisabled:o=>cs(o,e.value.disabled),getOptions:o=>cs(o,e.value.options)}}const yMe=it({allowCreate:Boolean,autocomplete:{type:Ce(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:or,default:Rc},effect:{type:Ce(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:{type:Ce(Function)},height:{type:Number,default:274},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,modelValue:{type:Ce([Array,String,Number,Boolean,Object]),default:void 0},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:{type:Ce(Function)},reserveKeyword:{type:Boolean,default:!0},options:{type:Ce(Array),required:!0},placeholder:{type:String},teleported:ss.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Ce(Object),default:()=>({})},remote:Boolean,size:Es,props:{type:Ce(Object),default:()=>E7},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},offset:{type:Number,default:12},showArrow:{type:Boolean,default:!0},placement:{type:Ce(String),values:Lc,default:"bottom-start"},fallbackPlacements:{type:Ce(Array),default:["bottom-start","top-start","right","left"]},tagType:{...Cc.type,default:"info"},tagEffect:{...Cc.effect,default:"light"},tabindex:{type:[String,Number],default:0},appendTo:ss.appendTo,fitInputWidth:{type:[Boolean,Number],default:!0,validator(t){return nr(t)||Ft(t)}},suffixIcon:{type:or,default:Ll},...yh,...hi(["ariaLabel"])}),bMe=it({data:Array,disabled:Boolean,hovering:Boolean,item:{type:Ce(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),_Me={[Qt]:t=>!0,[xn]:t=>!0,"remove-tag":t=>!0,"visible-change":t=>!0,focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0},wMe={hover:t=>Ft(t),select:(t,e)=>!0},DM=Symbol("ElSelectV2Injection"),xMe=de({props:bMe,emits:wMe,setup(t,{emit:e}){const n=_t(DM),r=Qe("select"),{hoverItem:s,selectOptionClick:i}=vMe(t,{emit:e}),{getLabel:o}=A_(n.props);return{ns:r,hoverItem:s,selectOptionClick:i,getLabel:o}}});function SMe(t,e,n,r,s,i){return D(),Z("li",{"aria-selected":t.selected,style:Pt(t.style),class:U([t.ns.be("dropdown","item"),t.ns.is("selected",t.selected),t.ns.is("disabled",t.disabled),t.ns.is("created",t.created),t.ns.is("hovering",t.hovering)]),onMousemove:t.hoverItem,onClick:$t(t.selectOptionClick,["stop"])},[Ae(t.$slots,"default",{item:t.item,index:t.index,disabled:t.disabled},()=>[ne("span",null,tt(t.getLabel(t.item)),1)])],46,["aria-selected","onMousemove","onClick"])}var EMe=at(xMe,[["render",SMe],["__file","option-item.vue"]]),$4=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function CMe(t,e){return!!(t===e||$4(t)&&$4(e))}function TMe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!CMe(t[n],e[n]))return!1;return!0}function MMe(t,e){e===void 0&&(e=TMe);var n=null;function r(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];if(n&&n.lastThis===this&&e(s,n.lastArgs))return n.lastResult;var o=t.apply(this,s);return n={lastResult:o,lastArgs:s,lastThis:this},o}return r.clear=function(){n=null},r}const C7=()=>{const e=tn().proxy.$props;return R(()=>{const n=(r,s,i)=>({});return e.perfMode?F1(n):MMe(n)})},gE=50,u1="itemRendered",d1="scroll",Pf="forward",h1="backward",Jo="auto",k_="smart",Qg="start",ml="center",ev="end",Tp="horizontal",FM="vertical",AMe="ltr",Kf="rtl",tv="negative",BM="positive-ascending",UM="positive-descending",kMe={[Tp]:"left",[FM]:"top"},IMe=20,PMe={[Tp]:"deltaX",[FM]:"deltaY"},RMe=({atEndEdge:t,atStartEdge:e,layout:n},r)=>{let s,i=0;const o=l=>l<0&&e.value||l>0&&t.value;return{hasReachedEdge:o,onWheel:l=>{sh(s);const c=l[PMe[n.value]];o(i)&&o(i+c)||(i+=c,XT()||l.preventDefault(),s=Uu(()=>{r(i),i=0}))}}},vE=Ya({type:Ce([Number,Function]),required:!0}),yE=Ya({type:Number}),bE=Ya({type:Number,default:2}),LMe=Ya({type:String,values:["ltr","rtl"],default:"ltr"}),_E=Ya({type:Number,default:0}),f1=Ya({type:Number,required:!0}),T7=Ya({type:String,values:["horizontal","vertical"],default:FM}),M7=it({className:{type:String,default:""},containerElement:{type:Ce([String,Object]),default:"div"},data:{type:Ce(Array),default:()=>Fr([])},direction:LMe,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:Ce([Object,String,Array])},useIsScrolling:Boolean,width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:Boolean}),A7=it({cache:bE,estimatedItemSize:yE,layout:T7,initScrollOffset:_E,total:f1,itemSize:vE,...M7}),wE={type:Number,default:6},k7={type:Number,default:0},I7={type:Number,default:2},jd=it({columnCache:bE,columnWidth:vE,estimatedColumnWidth:yE,estimatedRowHeight:yE,initScrollLeft:_E,initScrollTop:_E,itemKey:{type:Ce(Function),default:({columnIndex:t,rowIndex:e})=>`${e}:${t}`},rowCache:bE,rowHeight:vE,totalColumn:f1,totalRow:f1,hScrollbarSize:wE,vScrollbarSize:wE,scrollbarStartGap:k7,scrollbarEndGap:I7,role:String,...M7}),P7=it({alwaysOn:Boolean,class:String,layout:T7,total:f1,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:wE,startGap:k7,endGap:I7,visible:Boolean}),Fd=(t,e)=>t<e?Pf:h1,nv=t=>t===AMe||t===Kf||t===Tp,V4=t=>t===Kf;let hf=null;function p1(t=!1){if(hf===null||t){const e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";const r=document.createElement("div"),s=r.style;return s.width="100px",s.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?hf=UM:(e.scrollLeft=1,e.scrollLeft===0?hf=tv:hf=BM),document.body.removeChild(e),hf}return hf}function OMe({move:t,size:e,bar:n},r){const s={},i=`translate${n.axis}(${t}px)`;return s[n.size]=e,s.transform=i,r==="horizontal"?s.height="100%":s.width="100%",s}const xE=de({name:"ElVirtualScrollBar",props:P7,emits:["scroll","start-move","stop-move"],setup(t,{emit:e}){const n=R(()=>t.startGap+t.endGap),r=Qe("virtual-scrollbar"),s=Qe("scrollbar"),i=H(),o=H();let a=null,l=null;const c=Ln({isDragging:!1,traveled:0}),u=R(()=>vU[t.layout]),d=R(()=>t.clientSize-p(n)),h=R(()=>({position:"absolute",width:`${Tp===t.layout?d.value:t.scrollbarSize}px`,height:`${Tp===t.layout?t.scrollbarSize:d.value}px`,[kMe[t.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),f=R(()=>{const C=t.ratio;if(C>=100)return Number.POSITIVE_INFINITY;if(C>=50)return C*d.value/100;const T=d.value/3;return Math.floor(Math.min(Math.max(C*d.value,IMe),T))}),m=R(()=>{if(!Number.isFinite(f.value))return{display:"none"};const C=`${f.value}px`;return OMe({bar:u.value,size:C,move:c.traveled},t.layout)}),v=R(()=>Math.ceil(t.clientSize-f.value-p(n))),y=()=>{window.addEventListener("mousemove",w),window.addEventListener("mouseup",_);const C=p(o);C&&(l=document.onselectstart,document.onselectstart=()=>!1,C.addEventListener("touchmove",w,{passive:!0}),C.addEventListener("touchend",_))},g=()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",_),document.onselectstart=l,l=null;const C=p(o);C&&(C.removeEventListener("touchmove",w),C.removeEventListener("touchend",_))},S=C=>{C.stopImmediatePropagation(),!(C.ctrlKey||[1,2].includes(C.button))&&(c.isDragging=!0,c[u.value.axis]=C.currentTarget[u.value.offset]-(C[u.value.client]-C.currentTarget.getBoundingClientRect()[u.value.direction]),e("start-move"),y())},_=()=>{c.isDragging=!1,c[u.value.axis]=0,e("stop-move"),g()},w=C=>{const{isDragging:T}=c;if(!T||!o.value||!i.value)return;const I=c[u.value.axis];if(!I)return;sh(a);const k=(i.value.getBoundingClientRect()[u.value.direction]-C[u.value.client])*-1,M=o.value[u.value.offset]-I,L=k-M;a=Uu(()=>{c.traveled=Math.max(0,Math.min(L,v.value)),e("scroll",L,v.value)})},E=C=>{const T=Math.abs(C.target.getBoundingClientRect()[u.value.direction]-C[u.value.client]),I=o.value[u.value.offset]/2,k=T-I;c.traveled=Math.max(0,Math.min(k,v.value)),e("scroll",k,v.value)};return Be(()=>t.scrollFrom,C=>{c.isDragging||(c.traveled=Math.ceil(C*v.value))}),Xn(()=>{g()}),()=>Ut("div",{role:"presentation",ref:i,class:[r.b(),t.class,(t.alwaysOn||c.isDragging)&&"always-on"],style:h.value,onMousedown:$t(E,["stop","prevent"]),onTouchstartPrevent:S},Ut("div",{ref:o,class:s.e("thumb"),style:m.value,onMousedown:S},[]))}}),R7=({name:t,getOffset:e,getItemSize:n,getItemOffset:r,getEstimatedTotalSize:s,getStartIndexForOffset:i,getStopIndexForStartIndex:o,initCache:a,clearCache:l,validateProps:c})=>de({name:t??"ElVirtualList",props:A7,emits:[u1,d1],setup(u,{emit:d,expose:h}){c(u);const f=tn(),m=Qe("vl"),v=H(a(u,f)),y=C7(),g=H(),S=H(),_=H(),w=H({isScrolling:!1,scrollDir:"forward",scrollOffset:Ft(u.initScrollOffset)?u.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:u.scrollbarAlwaysOn}),E=R(()=>{const{total:fe,cache:se}=u,{isScrolling:ye,scrollDir:we,scrollOffset:ve}=p(w);if(fe===0)return[0,0,0,0];const xe=i(u,ve,p(v)),je=o(u,xe,ve,p(v)),nt=!ye||we===h1?Math.max(1,se):1,ue=!ye||we===Pf?Math.max(1,se):1;return[Math.max(0,xe-nt),Math.max(0,Math.min(fe-1,je+ue)),xe,je]}),C=R(()=>s(u,p(v))),T=R(()=>nv(u.layout)),I=R(()=>[{position:"relative",[`overflow-${T.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:u.direction,height:Ft(u.height)?`${u.height}px`:u.height,width:Ft(u.width)?`${u.width}px`:u.width},u.style]),k=R(()=>{const fe=p(C),se=p(T);return{height:se?"100%":`${fe}px`,pointerEvents:p(w).isScrolling?"none":void 0,width:se?`${fe}px`:"100%"}}),M=R(()=>T.value?u.width:u.height),{onWheel:L}=RMe({atStartEdge:R(()=>w.value.scrollOffset<=0),atEndEdge:R(()=>w.value.scrollOffset>=C.value),layout:R(()=>u.layout)},fe=>{var se,ye;(ye=(se=_.value).onMouseUp)==null||ye.call(se),$(Math.min(w.value.scrollOffset+fe,C.value-M.value))});pr(g,"wheel",L,{passive:!1});const N=()=>{const{total:fe}=u;if(fe>0){const[ve,xe,je,nt]=p(E);d(u1,ve,xe,je,nt)}const{scrollDir:se,scrollOffset:ye,updateRequested:we}=p(w);d(d1,se,ye,we)},G=fe=>{const{clientHeight:se,scrollHeight:ye,scrollTop:we}=fe.currentTarget,ve=p(w);if(ve.scrollOffset===we)return;const xe=Math.max(0,Math.min(we,ye-se));w.value={...ve,isScrolling:!0,scrollDir:Fd(ve.scrollOffset,xe),scrollOffset:xe,updateRequested:!1},Tt(re)},V=fe=>{const{clientWidth:se,scrollLeft:ye,scrollWidth:we}=fe.currentTarget,ve=p(w);if(ve.scrollOffset===ye)return;const{direction:xe}=u;let je=ye;if(xe===Kf)switch(p1()){case tv:{je=-ye;break}case UM:{je=we-se-ye;break}}je=Math.max(0,Math.min(je,we-se)),w.value={...ve,isScrolling:!0,scrollDir:Fd(ve.scrollOffset,je),scrollOffset:je,updateRequested:!1},Tt(re)},X=fe=>{p(T)?V(fe):G(fe),N()},F=(fe,se)=>{const ye=(C.value-M.value)/se*fe;$(Math.min(C.value-M.value,ye))},$=fe=>{fe=Math.max(fe,0),fe!==p(w).scrollOffset&&(w.value={...p(w),scrollOffset:fe,scrollDir:Fd(p(w).scrollOffset,fe),updateRequested:!0},Tt(re))},O=(fe,se=Jo)=>{const{scrollOffset:ye}=p(w);fe=Math.max(0,Math.min(fe,u.total-1)),$(e(u,fe,se,ye,p(v)))},z=fe=>{const{direction:se,itemSize:ye,layout:we}=u,ve=y.value(l&&ye,l&&we,l&&se);let xe;if(Kn(ve,String(fe)))xe=ve[fe];else{const je=r(u,fe,p(v)),nt=n(u,fe,p(v)),ue=p(T),j=se===Kf,he=ue?je:0;ve[fe]=xe={position:"absolute",left:j?void 0:`${he}px`,right:j?`${he}px`:void 0,top:ue?0:`${je}px`,height:ue?"100%":`${nt}px`,width:ue?`${nt}px`:"100%"}}return xe},re=()=>{w.value.isScrolling=!1,Tt(()=>{y.value(-1,null,null)})},q=()=>{const fe=g.value;fe&&(fe.scrollTop=0)};Zt(()=>{if(!Vn)return;const{initScrollOffset:fe}=u,se=p(g);Ft(fe)&&se&&(p(T)?se.scrollLeft=fe:se.scrollTop=fe),N()}),qa(()=>{const{direction:fe,layout:se}=u,{scrollOffset:ye,updateRequested:we}=p(w),ve=p(g);if(we&&ve)if(se===Tp)if(fe===Kf)switch(p1()){case tv:{ve.scrollLeft=-ye;break}case BM:{ve.scrollLeft=ye;break}default:{const{clientWidth:xe,scrollWidth:je}=ve;ve.scrollLeft=je-xe-ye;break}}else ve.scrollLeft=ye;else ve.scrollTop=ye}),t_(()=>{p(g).scrollTop=p(w).scrollOffset});const le={ns:m,clientSize:M,estimatedTotalSize:C,windowStyle:I,windowRef:g,innerRef:S,innerStyle:k,itemsToRender:E,scrollbarRef:_,states:w,getItemStyle:z,onScroll:X,onScrollbarScroll:F,onWheel:L,scrollTo:$,scrollToItem:O,resetScrollTop:q};return h({windowRef:g,innerRef:S,getItemStyleCache:y,scrollTo:$,scrollToItem:O,resetScrollTop:q,states:w}),le},render(u){var d;const{$slots:h,className:f,clientSize:m,containerElement:v,data:y,getItemStyle:g,innerElement:S,itemsToRender:_,innerStyle:w,layout:E,total:C,onScroll:T,onScrollbarScroll:I,states:k,useIsScrolling:M,windowStyle:L,ns:N}=u,[G,V]=_,X=mn(v),F=mn(S),$=[];if(C>0)for(let q=G;q<=V;q++)$.push(Ut(xt,{key:q},(d=h.default)==null?void 0:d.call(h,{data:y,index:q,isScrolling:M?k.isScrolling:void 0,style:g(q)})));const O=[Ut(F,{style:w,ref:"innerRef"},kt(F)?$:{default:()=>$})],z=Ut(xE,{ref:"scrollbarRef",clientSize:m,layout:E,onScroll:I,ratio:m*100/this.estimatedTotalSize,scrollFrom:k.scrollOffset/(this.estimatedTotalSize-m),total:C,alwaysOn:k.scrollbarAlwaysOn}),re=Ut(X,{class:[N.e("window"),f],style:L,onScroll:T,ref:"windowRef",key:0},kt(X)?[O]:{default:()=>[O]});return Ut("div",{key:0,class:[N.e("wrapper"),k.scrollbarAlwaysOn?"always-on":""]},[re,z])}}),L7=R7({name:"ElFixedSizeList",getItemOffset:({itemSize:t},e)=>e*t,getItemSize:({itemSize:t})=>t,getEstimatedTotalSize:({total:t,itemSize:e})=>e*t,getOffset:({height:t,total:e,itemSize:n,layout:r,width:s},i,o,a)=>{const l=nv(r)?s:t,c=Math.max(0,e*n-l),u=Math.min(c,i*n),d=Math.max(0,(i+1)*n-l);switch(o===k_&&(a>=d-l&&a<=u+l?o=Jo:o=ml),o){case Qg:return u;case ev:return d;case ml:{const h=Math.round(d+(u-d)/2);return h<Math.ceil(l/2)?0:h>c+Math.floor(l/2)?c:h}case Jo:default:return a>=d&&a<=u?a:a<d?d:u}},getStartIndexForOffset:({total:t,itemSize:e},n)=>Math.max(0,Math.min(t-1,Math.floor(n/e))),getStopIndexForStartIndex:({height:t,total:e,itemSize:n,layout:r,width:s},i,o)=>{const a=i*n,l=nv(r)?s:t,c=Math.ceil((l+o-a)/n);return Math.max(0,Math.min(e-1,i+c-1))},initCache(){},clearCache:!0,validateProps(){}}),Rf=(t,e,n)=>{const{itemSize:r}=t,{items:s,lastVisitedIndex:i}=n;if(e>i){let o=0;if(i>=0){const a=s[i];o=a.offset+a.size}for(let a=i+1;a<=e;a++){const l=r(a);s[a]={offset:o,size:l},o+=l}n.lastVisitedIndex=e}return s[e]},NMe=(t,e,n)=>{const{items:r,lastVisitedIndex:s}=e;return(s>0?r[s].offset:0)>=n?O7(t,e,0,s,n):DMe(t,e,Math.max(0,s),n)},O7=(t,e,n,r,s)=>{for(;n<=r;){const i=n+Math.floor((r-n)/2),o=Rf(t,i,e).offset;if(o===s)return i;o<s?n=i+1:o>s&&(r=i-1)}return Math.max(0,n-1)},DMe=(t,e,n,r)=>{const{total:s}=t;let i=1;for(;n<s&&Rf(t,n,e).offset<r;)n+=i,i*=2;return O7(t,e,Math.floor(n/2),Math.min(n,s-1),r)},H4=({total:t},{items:e,estimatedItemSize:n,lastVisitedIndex:r})=>{let s=0;if(r>=t&&(r=t-1),r>=0){const a=e[r];s=a.offset+a.size}const o=(t-r-1)*n;return s+o},FMe=R7({name:"ElDynamicSizeList",getItemOffset:(t,e,n)=>Rf(t,e,n).offset,getItemSize:(t,e,{items:n})=>n[e].size,getEstimatedTotalSize:H4,getOffset:(t,e,n,r,s)=>{const{height:i,layout:o,width:a}=t,l=nv(o)?a:i,c=Rf(t,e,s),u=H4(t,s),d=Math.max(0,Math.min(u-l,c.offset)),h=Math.max(0,c.offset-l+c.size);switch(n===k_&&(r>=h-l&&r<=d+l?n=Jo:n=ml),n){case Qg:return d;case ev:return h;case ml:return Math.round(h+(d-h)/2);case Jo:default:return r>=h&&r<=d?r:r<h?h:d}},getStartIndexForOffset:(t,e,n)=>NMe(t,n,e),getStopIndexForStartIndex:(t,e,n,r)=>{const{height:s,total:i,layout:o,width:a}=t,l=nv(o)?a:s,c=Rf(t,e,r),u=n+l;let d=c.offset+c.size,h=e;for(;h<i-1&&d<u;)h++,d+=Rf(t,h,r).size;return h},initCache({estimatedItemSize:t=gE},e){const n={items:{},estimatedItemSize:t,lastVisitedIndex:-1};return n.clearCacheAfterIndex=(r,s=!0)=>{var i,o;n.lastVisitedIndex=Math.min(n.lastVisitedIndex,r-1),(i=e.exposed)==null||i.getItemStyleCache(-1),s&&((o=e.proxy)==null||o.$forceUpdate())},n},clearCache:!1,validateProps:({itemSize:t})=>{}}),BMe={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number};var UMe=de({name:"ElSelectDropdown",props:BMe,setup(t,{slots:e,expose:n}){const r=_t(DM),s=Qe("select"),{getLabel:i,getValue:o,getDisabled:a}=A_(r.props),l=H([]),c=H(),u=R(()=>t.data.length);Be(()=>u.value,()=>{var L,N;(N=(L=r.tooltipRef.value)==null?void 0:L.updatePopper)==null||N.call(L)});const d=R(()=>Bn(r.props.estimatedOptionHeight)),h=R(()=>d.value?{itemSize:r.props.itemHeight}:{estimatedSize:r.props.estimatedOptionHeight,itemSize:L=>l.value[L]}),f=(L=[],N)=>{const{props:{valueKey:G}}=r;return un(N)?L&&L.some(V=>gr(cs(V,G))===cs(N,G)):L.includes(N)},m=(L,N)=>{if(un(N)){const{valueKey:G}=r.props;return cs(L,G)===cs(N,G)}else return L===N},v=(L,N)=>r.props.multiple?f(L,o(N)):m(L,o(N)),y=(L,N)=>{const{disabled:G,multiple:V,multipleLimit:X}=r.props;return G||!N&&(V?X>0&&L.length>=X:!1)},g=L=>t.hoveringIndex===L;n({listRef:c,isSized:d,isItemDisabled:y,isItemHovering:g,isItemSelected:v,scrollToItem:L=>{const N=c.value;N&&N.scrollToItem(L)},resetScrollTop:()=>{const L=c.value;L&&L.resetScrollTop()}});const E=L=>{const{index:N,data:G,style:V}=L,X=p(d),{itemSize:F,estimatedSize:$}=p(h),{modelValue:O}=r.props,{onSelect:z,onHover:re}=r,q=G[N];if(q.type==="Group")return ae(gMe,{item:q,style:V,height:X?F:$},null);const le=v(O,q),fe=y(O,le),se=g(N);return ae(EMe,yn(L,{selected:le,disabled:a(q)||fe,created:!!q.created,hovering:se,item:q,onSelect:z,onHover:re}),{default:ye=>{var we;return((we=e.default)==null?void 0:we.call(e,ye))||ae("span",null,[i(q)])}})},{onKeyboardNavigate:C,onKeyboardSelect:T}=r,I=()=>{C("forward")},k=()=>{C("backward")},M=L=>{const{code:N}=L,{tab:G,esc:V,down:X,up:F,enter:$,numpadEnter:O}=bt;switch([V,X,F,$,O].includes(N)&&(L.preventDefault(),L.stopPropagation()),N){case G:case V:break;case X:I();break;case F:k();break;case $:case O:T();break}};return()=>{var L,N,G,V;const{data:X,width:F}=t,{height:$,multiple:O,scrollbarAlwaysOn:z}=r.props,re=R(()=>Qb?!0:z),q=p(d)?L7:FMe;return ae("div",{class:[s.b("dropdown"),s.is("multiple",O)],style:{width:`${F}px`}},[(L=e.header)==null?void 0:L.call(e),((N=e.loading)==null?void 0:N.call(e))||((G=e.empty)==null?void 0:G.call(e))||ae(q,yn({ref:c},p(h),{className:s.be("dropdown","list"),scrollbarAlwaysOn:re.value,data:X,height:$,width:F,total:X.length,onKeydown:M}),{default:le=>ae(E,le,null)}),(V=e.footer)==null?void 0:V.call(e)])}}});function zMe(t,e){const{aliasProps:n,getLabel:r,getValue:s}=A_(t),i=H(0),o=H(),a=R(()=>t.allowCreate&&t.filterable);Be(()=>t.options,f=>{const m=new Set(f.map(v=>r(v)));e.createdOptions=e.createdOptions.filter(v=>!m.has(r(v)))});function l(f){const m=v=>r(v)===f;return t.options&&t.options.some(m)||e.createdOptions.some(m)}function c(f){a.value&&(t.multiple&&f.created?i.value++:o.value=f)}function u(f){if(a.value)if(f&&f.length>0){if(l(f)){e.createdOptions=e.createdOptions.filter(v=>r(v)!==e.previousQuery);return}const m={[n.value.value]:f,[n.value.label]:f,created:!0,[n.value.disabled]:!1};e.createdOptions.length>=i.value?e.createdOptions[i.value]=m:e.createdOptions.push(m)}else if(t.multiple)e.createdOptions.length=i.value;else{const m=o.value;e.createdOptions.length=0,m&&m.created&&e.createdOptions.push(m)}}function d(f){if(!a.value||!f||!f.created||f.created&&t.reserveKeyword&&e.inputValue===r(f))return;const m=e.createdOptions.findIndex(v=>s(v)===s(f));~m&&(e.createdOptions.splice(m,1),i.value--)}function h(){a.value&&(e.createdOptions.length=0,i.value=0)}return{createNewOption:u,removeNewOption:d,selectNewOption:c,clearAllNewOption:h}}const $Me=(t,e)=>{const{t:n}=zn(),r=Qe("select"),s=Qe("input"),{form:i,formItem:o}=fi(),{inputId:a}=la(t,{formItemContext:o}),{aliasProps:l,getLabel:c,getValue:u,getDisabled:d,getOptions:h}=A_(t),{valueOnClear:f,isEmptyValue:m}=Iv(t),v=Ln({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),y=H(-1),g=H(),S=H(),_=H(),w=H(),E=H(),C=H(),T=H(),I=H(),k=H(),M=H(),{isComposing:L,handleCompositionStart:N,handleCompositionEnd:G,handleCompositionUpdate:V}=Lv({afterComposition:ke=>Ts(ke)}),X=R(()=>t.disabled||!!(i!=null&&i.disabled)),{wrapperRef:F,isFocused:$,handleBlur:O}=Zu(E,{disabled:X,afterFocus(){t.automaticDropdown&&!le.value&&(le.value=!0,v.menuVisibleOnFocus=!0)},beforeBlur(ke){var He,$e;return((He=_.value)==null?void 0:He.isFocusInsideContent(ke))||(($e=w.value)==null?void 0:$e.isFocusInsideContent(ke))},afterBlur(){var ke;le.value=!1,v.menuVisibleOnFocus=!1,t.validateEvent&&((ke=o==null?void 0:o.validate)==null||ke.call(o,"blur").catch(He=>void 0))}}),z=R(()=>Fe("")),re=R(()=>t.loading?!1:t.options.length>0||v.createdOptions.length>0),q=H([]),le=H(!1),fe=R(()=>{var ke;return(ke=i==null?void 0:i.statusIcon)!=null?ke:!1}),se=R(()=>{const ke=q.value.length*t.itemHeight;return ke>t.height?t.height:ke}),ye=R(()=>t.multiple?rt(t.modelValue)&&t.modelValue.length>0:!m(t.modelValue)),we=R(()=>t.clearable&&!X.value&&v.inputHovering&&ye.value),ve=R(()=>t.remote&&t.filterable?"":t.suffixIcon),xe=R(()=>ve.value&&r.is("reverse",le.value)),je=R(()=>(o==null?void 0:o.validateState)||""),nt=R(()=>{if(je.value)return g_[je.value]}),ue=R(()=>t.remote?300:0),j=R(()=>t.loading?t.loadingText||n("el.select.loading"):t.remote&&!v.inputValue&&!re.value?!1:t.filterable&&v.inputValue&&re.value&&q.value.length===0?t.noMatchText||n("el.select.noMatch"):re.value?null:t.noDataText||n("el.select.noData")),he=R(()=>t.filterable&&Lt(t.filterMethod)),K=R(()=>t.filterable&&t.remote&&Lt(t.remoteMethod)),Fe=ke=>{const He=new RegExp(RM(ke),"i"),$e=dt=>he.value||K.value?!0:ke?He.test(c(dt)||""):!0;return t.loading?[]:[...v.createdOptions,...t.options].reduce((dt,wt)=>{const en=h(wt);if(rt(en)){const pn=en.filter($e);pn.length>0&&dt.push({label:c(wt),type:"Group"},...pn)}else(t.remote||$e(wt))&&dt.push(wt);return dt},[])},Oe=()=>{q.value=Fe(v.inputValue)},Re=R(()=>{const ke=new Map;return z.value.forEach((He,$e)=>{ke.set(sn(u(He)),{option:He,index:$e})}),ke}),te=R(()=>{const ke=new Map;return q.value.forEach((He,$e)=>{ke.set(sn(u(He)),{option:He,index:$e})}),ke}),oe=R(()=>q.value.every(ke=>d(ke))),Ee=ys(),J=R(()=>Ee.value==="small"?"small":"default"),Q=()=>{var ke;if(Ft(t.fitInputWidth)){y.value=t.fitInputWidth;return}const He=((ke=g.value)==null?void 0:ke.offsetWidth)||200;!t.fitInputWidth&&re.value?Tt(()=>{y.value=Math.max(He,_e())}):y.value=He},_e=()=>{var ke,He;const dt=document.createElement("canvas").getContext("2d"),wt=r.be("dropdown","item"),pn=(((He=(ke=I.value)==null?void 0:ke.listRef)==null?void 0:He.innerRef)||document).querySelector(`.${wt}`);if(pn===null||dt===null)return 0;const An=getComputedStyle(pn),$n=Number.parseFloat(An.paddingLeft)+Number.parseFloat(An.paddingRight);return dt.font=`bold ${An.font.replace(new RegExp(`\\b${An.fontWeight}\\b`),"")}`,q.value.reduce((Zn,ur)=>{const zr=dt.measureText(c(ur));return Math.max(zr.width,Zn)},0)+$n},ie=()=>{if(!S.value)return 0;const ke=window.getComputedStyle(S.value);return Number.parseFloat(ke.gap||"6px")},Te=R(()=>{const ke=ie();return{maxWidth:`${M.value&&t.maxCollapseTags===1?v.selectionWidth-v.collapseItemWidth-ke:v.selectionWidth}px`}}),We=R(()=>({maxWidth:`${v.selectionWidth}px`})),ut=R(()=>rt(t.modelValue)?t.modelValue.length===0&&!v.inputValue:t.filterable?!v.inputValue:!0),lt=R(()=>{var ke;const He=(ke=t.placeholder)!=null?ke:n("el.select.placeholder");return t.multiple||!ye.value?He:v.selectedLabel}),St=R(()=>{var ke,He;return(He=(ke=_.value)==null?void 0:ke.popperRef)==null?void 0:He.contentRef}),Ot=R(()=>{if(t.multiple){const ke=t.modelValue.length;if(t.modelValue.length>0&&te.value.has(t.modelValue[ke-1])){const{index:He}=te.value.get(t.modelValue[ke-1]);return He}}else if(!m(t.modelValue)&&te.value.has(t.modelValue)){const{index:ke}=te.value.get(t.modelValue);return ke}return-1}),et=R({get(){return le.value&&j.value!==!1},set(ke){le.value=ke}}),ht=R(()=>t.multiple?t.collapseTags?v.cachedOptions.slice(0,t.maxCollapseTags):v.cachedOptions:[]),Mt=R(()=>t.multiple?t.collapseTags?v.cachedOptions.slice(t.maxCollapseTags):[]:[]),{createNewOption:ze,removeNewOption:Me,selectNewOption:be,clearAllNewOption:Ve}=zMe(t,v),mt=()=>{X.value||(v.menuVisibleOnFocus?v.menuVisibleOnFocus=!1:le.value=!le.value)},Ue=()=>{v.inputValue.length>0&&!le.value&&(le.value=!0),ze(v.inputValue),Tt(()=>{st(v.inputValue)})},Ct=mo(Ue,ue.value),st=ke=>{v.previousQuery===ke||L.value||(v.previousQuery=ke,t.filterable&&Lt(t.filterMethod)?t.filterMethod(ke):t.filterable&&t.remote&&Lt(t.remoteMethod)&&t.remoteMethod(ke),t.defaultFirstOption&&(t.filterable||t.remote)&&q.value.length?Tt(vt):Tt(Xr))},vt=()=>{const ke=q.value.filter(dt=>!dt.disabled&&dt.type!=="Group"),He=ke.find(dt=>dt.created),$e=ke[0];v.hoveringIndex=dn(q.value,He||$e)},Rt=ke=>{_s(t.modelValue,ke)||e(xn,ke)},jt=ke=>{e(Qt,ke),Rt(ke),v.previousValue=t.multiple?String(ke):ke,Tt(()=>{if(t.multiple&&rt(t.modelValue)){const He=v.cachedOptions.slice(),$e=t.modelValue.map(dt=>Se(dt,He));_s(v.cachedOptions,$e)||(v.cachedOptions=$e)}else Ke(!0)})},dn=(ke=[],He)=>{if(!un(He))return ke.indexOf(He);const $e=t.valueKey;let dt=-1;return ke.some((wt,en)=>cs(wt,$e)===cs(He,$e)?(dt=en,!0):!1),dt},sn=ke=>un(ke)?cs(ke,t.valueKey):ke,At=()=>{Q()},on=()=>{v.selectionWidth=Number.parseFloat(window.getComputedStyle(S.value).width)},Jt=()=>{v.collapseItemWidth=M.value.getBoundingClientRect().width},jr=()=>{var ke,He;(He=(ke=_.value)==null?void 0:ke.updatePopper)==null||He.call(ke)},Ur=()=>{var ke,He;(He=(ke=w.value)==null?void 0:ke.updatePopper)==null||He.call(ke)},Y=ke=>{if(t.multiple){let He=t.modelValue.slice();const $e=dn(He,u(ke));$e>-1?(He=[...He.slice(0,$e),...He.slice($e+1)],v.cachedOptions.splice($e,1),Me(ke)):(t.multipleLimit<=0||He.length<t.multipleLimit)&&(He=[...He,u(ke)],v.cachedOptions.push(ke),be(ke)),jt(He),ke.created&&st(""),t.filterable&&!t.reserveKeyword&&(v.inputValue="")}else v.selectedLabel=c(ke),jt(u(ke)),le.value=!1,be(ke),ke.created||Ve();ii()},Pn=(ke,He)=>{let $e=t.modelValue.slice();const dt=dn($e,u(He));dt>-1&&!X.value&&($e=[...t.modelValue.slice(0,dt),...t.modelValue.slice(dt+1)],v.cachedOptions.splice(dt,1),jt($e),e("remove-tag",u(He)),Me(He)),ke.stopPropagation(),ii()},ii=()=>{var ke;(ke=E.value)==null||ke.focus()},Fs=()=>{var ke;if(le.value){le.value=!1,Tt(()=>{var He;return(He=E.value)==null?void 0:He.blur()});return}(ke=E.value)==null||ke.blur()},as=()=>{v.inputValue.length>0?v.inputValue="":le.value=!1},Ii=ke=>u5(ke,He=>!v.cachedOptions.some($e=>u($e)===He&&d($e))),Xe=ke=>{if(t.multiple&&ke.code!==bt.delete&&v.inputValue.length===0){ke.preventDefault();const He=t.modelValue.slice(),$e=Ii(He);if($e<0)return;const dt=He[$e];He.splice($e,1);const wt=v.cachedOptions[$e];v.cachedOptions.splice($e,1),Me(wt),jt(He),e("remove-tag",dt)}},Ye=()=>{let ke;rt(t.modelValue)?ke=[]:ke=f.value,v.selectedLabel="",le.value=!1,jt(ke),e("clear"),Ve(),ii()},gt=(ke,He=void 0)=>{const $e=q.value;if(!["forward","backward"].includes(ke)||X.value||$e.length<=0||oe.value||L.value)return;if(!le.value)return mt();Bn(He)&&(He=v.hoveringIndex);let dt=-1;ke==="forward"?(dt=He+1,dt>=$e.length&&(dt=0)):ke==="backward"&&(dt=He-1,(dt<0||dt>=$e.length)&&(dt=$e.length-1));const wt=$e[dt];if(d(wt)||wt.type==="Group")return gt(ke,dt);v.hoveringIndex=dt,Bs(dt)},Gt=()=>{if(le.value)~v.hoveringIndex&&q.value[v.hoveringIndex]&&Y(q.value[v.hoveringIndex]);else return mt()},On=ke=>{v.hoveringIndex=ke??-1},Xr=()=>{t.multiple?v.hoveringIndex=q.value.findIndex(ke=>t.modelValue.some(He=>sn(He)===sn(u(ke)))):v.hoveringIndex=q.value.findIndex(ke=>sn(u(ke))===sn(t.modelValue))},Ts=ke=>{if(v.inputValue=ke.target.value,t.remote)Ct();else return Ue()},Un=ke=>{if(le.value=!1,$.value){const He=new FocusEvent("blur",ke);O(He)}},oi=()=>(v.isBeforeHide=!1,Tt(()=>{~Ot.value&&Bs(v.hoveringIndex)})),Bs=ke=>{I.value.scrollToItem(ke)},Se=(ke,He)=>{const $e=sn(ke);if(Re.value.has($e)){const{option:dt}=Re.value.get($e);return dt}if(He&&He.length){const dt=He.find(wt=>sn(u(wt))===$e);if(dt)return dt}return{[l.value.value]:ke,[l.value.label]:ke}},Ke=(ke=!1)=>{if(t.multiple)if(t.modelValue.length>0){const He=v.cachedOptions.slice();v.cachedOptions.length=0,v.previousValue=t.modelValue.toString();for(const $e of t.modelValue){const dt=Se($e,He);v.cachedOptions.push(dt)}}else v.cachedOptions=[],v.previousValue=void 0;else if(ye.value){v.previousValue=t.modelValue;const He=q.value,$e=He.findIndex(dt=>sn(u(dt))===sn(t.modelValue));~$e?v.selectedLabel=c(He[$e]):(!v.selectedLabel||ke)&&(v.selectedLabel=sn(t.modelValue))}else v.selectedLabel="",v.previousValue=void 0;Ve(),Q()};return Be(()=>t.fitInputWidth,()=>{Q()}),Be(le,ke=>{ke?(t.persistent||Q(),st("")):(v.inputValue="",v.previousQuery=null,v.isBeforeHide=!0,ze("")),e("visible-change",ke)}),Be(()=>t.modelValue,(ke,He)=>{var $e;(!ke||rt(ke)&&ke.length===0||t.multiple&&!_s(ke.toString(),v.previousValue)||!t.multiple&&sn(ke)!==sn(v.previousValue))&&Ke(!0),!_s(ke,He)&&t.validateEvent&&(($e=o==null?void 0:o.validate)==null||$e.call(o,"change").catch(wt=>void 0))},{deep:!0}),Be(()=>t.options,()=>{const ke=E.value;(!ke||ke&&document.activeElement!==ke)&&Ke()},{deep:!0,flush:"post"}),Be(()=>q.value,()=>(Q(),I.value&&Tt(I.value.resetScrollTop))),ui(()=>{v.isBeforeHide||Oe()}),ui(()=>{const{valueKey:ke,options:He}=t,$e=new Map;for(const dt of He){const wt=u(dt);let en=wt;if(un(en)&&(en=cs(wt,ke)),$e.get(en))break;$e.set(en,!0)}}),Zt(()=>{Ke()}),Ir(g,At),Ir(S,on),Ir(I,jr),Ir(F,jr),Ir(k,Ur),Ir(M,Jt),{inputId:a,collapseTagSize:J,currentPlaceholder:lt,expanded:le,emptyText:j,popupHeight:se,debounce:ue,allOptions:z,filteredOptions:q,iconComponent:ve,iconReverse:xe,tagStyle:Te,collapseTagStyle:We,popperSize:y,dropdownMenuVisible:et,hasModelValue:ye,shouldShowPlaceholder:ut,selectDisabled:X,selectSize:Ee,needStatusIcon:fe,showClearBtn:we,states:v,isFocused:$,nsSelect:r,nsInput:s,inputRef:E,menuRef:I,tagMenuRef:k,tooltipRef:_,tagTooltipRef:w,selectRef:g,wrapperRef:F,selectionRef:S,prefixRef:C,suffixRef:T,collapseItemRef:M,popperRef:St,validateState:je,validateIcon:nt,showTagList:ht,collapseTagList:Mt,debouncedOnInputChange:Ct,deleteTag:Pn,getLabel:c,getValue:u,getDisabled:d,getValueKey:sn,handleClear:Ye,handleClickOutside:Un,handleDel:Xe,handleEsc:as,focus:ii,blur:Fs,handleMenuEnter:oi,handleResize:At,resetSelectionWidth:on,updateTooltip:jr,updateTagTooltip:Ur,updateOptions:Oe,toggleMenu:mt,scrollTo:Bs,onInput:Ts,onKeyboardNavigate:gt,onKeyboardSelect:Gt,onSelect:Y,onHover:On,handleCompositionStart:N,handleCompositionEnd:G,handleCompositionUpdate:V}},VMe=de({name:"ElSelectV2",components:{ElSelectMenu:UMe,ElTag:Sp,ElTooltip:ri,ElIcon:Et},directives:{ClickOutside:Tc},props:yMe,emits:_Me,setup(t,{emit:e}){const n=R(()=>{const{modelValue:a,multiple:l}=t,c=l?[]:void 0;return rt(a)?l?a:c:l?c:a}),r=$Me(Ln({...Ds(t),modelValue:n}),e),{calculatorRef:s,inputStyle:i}=kM();Mn(DM,{props:Ln({...Ds(t),height:r.popupHeight,modelValue:n}),expanded:r.expanded,tooltipRef:r.tooltipRef,onSelect:r.onSelect,onHover:r.onHover,onKeyboardNavigate:r.onKeyboardNavigate,onKeyboardSelect:r.onKeyboardSelect});const o=R(()=>t.multiple?r.states.cachedOptions.map(a=>a.label):r.states.selectedLabel);return{...r,modelValue:n,selectedLabel:o,calculatorRef:s,inputStyle:i}}});function HMe(t,e,n,r,s,i){const o=Xt("el-tag"),a=Xt("el-tooltip"),l=Xt("el-icon"),c=Xt("el-select-menu"),u=i_("click-outside");return cn((D(),Z("div",{ref:"selectRef",class:U([t.nsSelect.b(),t.nsSelect.m(t.selectSize)]),onMouseenter:d=>t.states.inputHovering=!0,onMouseleave:d=>t.states.inputHovering=!1},[ae(a,{ref:"tooltipRef",visible:t.dropdownMenuVisible,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":t.popperOptions,"fallback-placements":t.fallbackPlacements,effect:t.effect,placement:t.placement,pure:"",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:t.persistent,"append-to":t.appendTo,"show-arrow":t.showArrow,offset:t.offset,onBeforeShow:t.handleMenuEnter,onHide:d=>t.states.isBeforeHide=!1},{default:me(()=>[ne("div",{ref:"wrapperRef",class:U([t.nsSelect.e("wrapper"),t.nsSelect.is("focused",t.isFocused),t.nsSelect.is("hovering",t.states.inputHovering),t.nsSelect.is("filterable",t.filterable),t.nsSelect.is("disabled",t.selectDisabled)]),onClick:$t(t.toggleMenu,["prevent"])},[t.$slots.prefix?(D(),Z("div",{key:0,ref:"prefixRef",class:U(t.nsSelect.e("prefix"))},[Ae(t.$slots,"prefix")],2)):Pe("v-if",!0),ne("div",{ref:"selectionRef",class:U([t.nsSelect.e("selection"),t.nsSelect.is("near",t.multiple&&!t.$slots.prefix&&!!t.modelValue.length)])},[t.multiple?Ae(t.$slots,"tag",{key:0,data:t.states.cachedOptions,deleteTag:t.deleteTag,selectDisabled:t.selectDisabled},()=>[(D(!0),Z(xt,null,_n(t.showTagList,d=>(D(),Z("div",{key:t.getValueKey(t.getValue(d)),class:U(t.nsSelect.e("selected-item"))},[ae(o,{closable:!t.selectDisabled&&!t.getDisabled(d),size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",style:Pt(t.tagStyle),onClose:h=>t.deleteTag(h,d)},{default:me(()=>[ne("span",{class:U(t.nsSelect.e("tags-text"))},[Ae(t.$slots,"label",{label:t.getLabel(d),value:t.getValue(d)},()=>[rn(tt(t.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),t.collapseTags&&t.modelValue.length>t.maxCollapseTags?(D(),Le(a,{key:0,ref:"tagTooltipRef",disabled:t.dropdownMenuVisible||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom","popper-class":t.popperClass,teleported:t.teleported},{default:me(()=>[ne("div",{ref:"collapseItemRef",class:U(t.nsSelect.e("selected-item"))},[ae(o,{closable:!1,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,style:Pt(t.collapseTagStyle),"disable-transitions":""},{default:me(()=>[ne("span",{class:U(t.nsSelect.e("tags-text"))}," + "+tt(t.modelValue.length-t.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:me(()=>[ne("div",{ref:"tagMenuRef",class:U(t.nsSelect.e("selection"))},[(D(!0),Z(xt,null,_n(t.collapseTagList,d=>(D(),Z("div",{key:t.getValueKey(t.getValue(d)),class:U(t.nsSelect.e("selected-item"))},[ae(o,{class:"in-tooltip",closable:!t.selectDisabled&&!t.getDisabled(d),size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",onClose:h=>t.deleteTag(h,d)},{default:me(()=>[ne("span",{class:U(t.nsSelect.e("tags-text"))},[Ae(t.$slots,"label",{label:t.getLabel(d),value:t.getValue(d)},()=>[rn(tt(t.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","popper-class","teleported"])):Pe("v-if",!0)]):Pe("v-if",!0),ne("div",{class:U([t.nsSelect.e("selected-item"),t.nsSelect.e("input-wrapper"),t.nsSelect.is("hidden",!t.filterable)])},[cn(ne("input",{id:t.inputId,ref:"inputRef","onUpdate:modelValue":d=>t.states.inputValue=d,style:Pt(t.inputStyle),autocomplete:t.autocomplete,tabindex:t.tabindex,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":t.expanded,"aria-label":t.ariaLabel,class:U([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize)]),disabled:t.selectDisabled,role:"combobox",readonly:!t.filterable,spellcheck:"false",type:"text",name:t.name,onInput:t.onInput,onCompositionstart:t.handleCompositionStart,onCompositionupdate:t.handleCompositionUpdate,onCompositionend:t.handleCompositionEnd,onKeydown:[cr($t(d=>t.onKeyboardNavigate("backward"),["stop","prevent"]),["up"]),cr($t(d=>t.onKeyboardNavigate("forward"),["stop","prevent"]),["down"]),cr($t(t.onKeyboardSelect,["stop","prevent"]),["enter"]),cr($t(t.handleEsc,["stop","prevent"]),["esc"]),cr($t(t.handleDel,["stop"]),["delete"])],onClick:$t(t.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","autocomplete","tabindex","aria-expanded","aria-label","disabled","readonly","name","onInput","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown","onClick"]),[[c_,t.states.inputValue]]),t.filterable?(D(),Z("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:U(t.nsSelect.e("input-calculator")),textContent:tt(t.states.inputValue)},null,10,["textContent"])):Pe("v-if",!0)],2),t.shouldShowPlaceholder?(D(),Z("div",{key:1,class:U([t.nsSelect.e("selected-item"),t.nsSelect.e("placeholder"),t.nsSelect.is("transparent",!t.hasModelValue||t.expanded&&!t.states.inputValue)])},[t.hasModelValue?Ae(t.$slots,"label",{key:0,label:t.currentPlaceholder,value:t.modelValue},()=>[ne("span",null,tt(t.currentPlaceholder),1)]):(D(),Z("span",{key:1},tt(t.currentPlaceholder),1))],2)):Pe("v-if",!0)],2),ne("div",{ref:"suffixRef",class:U(t.nsSelect.e("suffix"))},[t.iconComponent?cn((D(),Le(l,{key:0,class:U([t.nsSelect.e("caret"),t.nsInput.e("icon"),t.iconReverse])},{default:me(()=>[(D(),Le(mn(t.iconComponent)))]),_:1},8,["class"])),[[Wn,!t.showClearBtn]]):Pe("v-if",!0),t.showClearBtn&&t.clearIcon?(D(),Le(l,{key:1,class:U([t.nsSelect.e("caret"),t.nsInput.e("icon"),t.nsSelect.e("clear")]),onClick:$t(t.handleClear,["prevent","stop"])},{default:me(()=>[(D(),Le(mn(t.clearIcon)))]),_:1},8,["class","onClick"])):Pe("v-if",!0),t.validateState&&t.validateIcon&&t.needStatusIcon?(D(),Le(l,{key:2,class:U([t.nsInput.e("icon"),t.nsInput.e("validateIcon"),t.nsInput.is("loading",t.validateState==="validating")])},{default:me(()=>[(D(),Le(mn(t.validateIcon)))]),_:1},8,["class"])):Pe("v-if",!0)],2)],10,["onClick"])]),content:me(()=>[ae(c,{ref:"menuRef",data:t.filteredOptions,width:t.popperSize,"hovering-index":t.states.hoveringIndex,"scrollbar-always-on":t.scrollbarAlwaysOn},go({default:me(d=>[Ae(t.$slots,"default",Ro(Sl(d)))]),_:2},[t.$slots.header?{name:"header",fn:me(()=>[ne("div",{class:U(t.nsSelect.be("dropdown","header")),onClick:$t(()=>{},["stop"])},[Ae(t.$slots,"header")],10,["onClick"])])}:void 0,t.$slots.loading&&t.loading?{name:"loading",fn:me(()=>[ne("div",{class:U(t.nsSelect.be("dropdown","loading"))},[Ae(t.$slots,"loading")],2)])}:t.loading||t.filteredOptions.length===0?{name:"empty",fn:me(()=>[ne("div",{class:U(t.nsSelect.be("dropdown","empty"))},[Ae(t.$slots,"empty",{},()=>[ne("span",null,tt(t.emptyText),1)])],2)])}:void 0,t.$slots.footer?{name:"footer",fn:me(()=>[ne("div",{class:U(t.nsSelect.be("dropdown","footer")),onClick:$t(()=>{},["stop"])},[Ae(t.$slots,"footer")],10,["onClick"])])}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],42,["onMouseenter","onMouseleave"])),[[u,t.handleClickOutside,t.popperRef]])}var GMe=at(VMe,[["render",HMe],["__file","select.vue"]]);const WMe=nn(GMe),jMe=it({animated:Boolean,count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Ce([Number,Object])}}),KMe=it({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),qMe=de({name:"ElSkeletonItem"}),YMe=de({...qMe,props:KMe,setup(t){const e=Qe("skeleton");return(n,r)=>(D(),Z("div",{class:U([p(e).e("item"),p(e).e(n.variant)])},[n.variant==="image"?(D(),Le(p(kge),{key:0})):Pe("v-if",!0)],2))}});var m1=at(YMe,[["__file","skeleton-item.vue"]]);const XMe=(t,e=0)=>{if(e===0)return t;const n=un(e)&&!!e.initVal,r=H(n);let s=null;const i=a=>{if(Bn(a)){r.value=t.value;return}s&&clearTimeout(s),s=setTimeout(()=>{r.value=t.value},a)},o=a=>{a==="leading"?Ft(e)?i(e):i(e.leading):un(e)?i(e.trailing):r.value=!1};return Zt(()=>o("leading")),Be(()=>t.value,a=>{o(a?"leading":"trailing")}),r},ZMe=de({name:"ElSkeleton"}),JMe=de({...ZMe,props:jMe,setup(t,{expose:e}){const n=t,r=Qe("skeleton"),s=XMe(Yn(n,"loading"),n.throttle);return e({uiLoading:s}),(i,o)=>p(s)?(D(),Z("div",yn({key:0,class:[p(r).b(),p(r).is("animated",i.animated)]},i.$attrs),[(D(!0),Z(xt,null,_n(i.count,a=>(D(),Z(xt,{key:a},[p(s)?Ae(i.$slots,"template",{key:a},()=>[ae(m1,{class:U(p(r).is("first")),variant:"p"},null,8,["class"]),(D(!0),Z(xt,null,_n(i.rows,l=>(D(),Le(m1,{key:l,class:U([p(r).e("paragraph"),p(r).is("last",l===i.rows&&i.rows>1)]),variant:"p"},null,8,["class"]))),128))]):Pe("v-if",!0)],64))),128))],16)):Ae(i.$slots,"default",Ro(yn({key:1},i.$attrs)))}});var QMe=at(JMe,[["__file","skeleton.vue"]]);const eAe=nn(QMe,{SkeletonItem:m1}),tAe=Br(m1),N7=Symbol("sliderContextKey"),nAe=it({modelValue:{type:Ce([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Es,inputSize:Es,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Ce(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:Ce(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Lc,default:"top"},marks:{type:Ce(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...hi(["ariaLabel"])}),Bx=t=>Ft(t)||rt(t)&&t.every(Ft),rAe={[Qt]:Bx,[xs]:Bx,[xn]:Bx},sAe=it({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Lc,default:"top"}}),iAe={[Qt]:t=>Ft(t)},oAe=(t,e,n)=>{const r=H(),s=H(!1),i=R(()=>e.value instanceof Function),o=R(()=>i.value&&e.value(t.modelValue)||t.modelValue),a=mo(()=>{n.value&&(s.value=!0)},50),l=mo(()=>{n.value&&(s.value=!1)},50);return{tooltip:r,tooltipVisible:s,formatValue:o,displayTooltip:a,hideTooltip:l}},aAe=(t,e,n)=>{const{disabled:r,min:s,max:i,step:o,showTooltip:a,persistent:l,precision:c,sliderSize:u,formatTooltip:d,emitChange:h,resetSize:f,updateDragging:m}=_t(N7),{tooltip:v,tooltipVisible:y,formatValue:g,displayTooltip:S,hideTooltip:_}=oAe(t,d,a),w=H(),E=R(()=>`${(t.modelValue-s.value)/(i.value-s.value)*100}%`),C=R(()=>t.vertical?{bottom:E.value}:{left:E.value}),T=()=>{e.hovering=!0,S()},I=()=>{e.hovering=!1,e.dragging||_()},k=fe=>{r.value||(fe.preventDefault(),z(fe),window.addEventListener("mousemove",re),window.addEventListener("touchmove",re),window.addEventListener("mouseup",q),window.addEventListener("touchend",q),window.addEventListener("contextmenu",q),w.value.focus())},M=fe=>{r.value||(e.newPosition=Number.parseFloat(E.value)+fe/(i.value-s.value)*100,le(e.newPosition),h())},L=()=>{M(-o.value)},N=()=>{M(o.value)},G=()=>{M(-o.value*4)},V=()=>{M(o.value*4)},X=()=>{r.value||(le(0),h())},F=()=>{r.value||(le(100),h())},$=fe=>{let se=!0;switch(fe.code){case bt.left:case bt.down:L();break;case bt.right:case bt.up:N();break;case bt.home:X();break;case bt.end:F();break;case bt.pageDown:G();break;case bt.pageUp:V();break;default:se=!1;break}se&&fe.preventDefault()},O=fe=>{let se,ye;return fe.type.startsWith("touch")?(ye=fe.touches[0].clientY,se=fe.touches[0].clientX):(ye=fe.clientY,se=fe.clientX),{clientX:se,clientY:ye}},z=fe=>{e.dragging=!0,e.isClick=!0;const{clientX:se,clientY:ye}=O(fe);t.vertical?e.startY=ye:e.startX=se,e.startPosition=Number.parseFloat(E.value),e.newPosition=e.startPosition},re=fe=>{if(e.dragging){e.isClick=!1,S(),f();let se;const{clientX:ye,clientY:we}=O(fe);t.vertical?(e.currentY=we,se=(e.startY-e.currentY)/u.value*100):(e.currentX=ye,se=(e.currentX-e.startX)/u.value*100),e.newPosition=e.startPosition+se,le(e.newPosition)}},q=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||_(),e.isClick||le(e.newPosition),h()},0),window.removeEventListener("mousemove",re),window.removeEventListener("touchmove",re),window.removeEventListener("mouseup",q),window.removeEventListener("touchend",q),window.removeEventListener("contextmenu",q))},le=async fe=>{if(fe===null||Number.isNaN(+fe))return;fe<0?fe=0:fe>100&&(fe=100);const se=100/((i.value-s.value)/o.value);let we=Math.round(fe/se)*se*(i.value-s.value)*.01+s.value;we=Number.parseFloat(we.toFixed(c.value)),we!==t.modelValue&&n(Qt,we),!e.dragging&&t.modelValue!==e.oldValue&&(e.oldValue=t.modelValue),await Tt(),e.dragging&&S(),v.value.updatePopper()};return Be(()=>e.dragging,fe=>{m(fe)}),pr(w,"touchstart",k,{passive:!1}),{disabled:r,button:w,tooltip:v,tooltipVisible:y,showTooltip:a,persistent:l,wrapperStyle:C,formatValue:g,handleMouseEnter:T,handleMouseLeave:I,onButtonDown:k,onKeyDown:$,setPosition:le}},lAe=de({name:"ElSliderButton"}),cAe=de({...lAe,props:sAe,emits:iAe,setup(t,{expose:e,emit:n}){const r=t,s=Qe("slider"),i=Ln({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:r.modelValue}),o=R(()=>u.value?d.value:!1),{disabled:a,button:l,tooltip:c,showTooltip:u,persistent:d,tooltipVisible:h,wrapperStyle:f,formatValue:m,handleMouseEnter:v,handleMouseLeave:y,onButtonDown:g,onKeyDown:S,setPosition:_}=aAe(r,i,n),{hovering:w,dragging:E}=Ds(i);return e({onButtonDown:g,onKeyDown:S,setPosition:_,hovering:w,dragging:E}),(C,T)=>(D(),Z("div",{ref_key:"button",ref:l,class:U([p(s).e("button-wrapper"),{hover:p(w),dragging:p(E)}]),style:Pt(p(f)),tabindex:p(a)?-1:0,onMouseenter:p(v),onMouseleave:p(y),onMousedown:p(g),onFocus:p(v),onBlur:p(y),onKeydown:p(S)},[ae(p(ri),{ref_key:"tooltip",ref:c,visible:p(h),placement:C.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":C.tooltipClass,disabled:!p(u),persistent:p(o)},{content:me(()=>[ne("span",null,tt(p(m)),1)]),default:me(()=>[ne("div",{class:U([p(s).e("button"),{hover:p(w),dragging:p(E)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var G4=at(cAe,[["__file","button.vue"]]);const uAe=it({mark:{type:Ce([String,Object]),default:void 0}});var dAe=de({name:"ElSliderMarker",props:uAe,setup(t){const e=Qe("slider"),n=R(()=>kt(t.mark)?t.mark:t.mark.label),r=R(()=>kt(t.mark)?void 0:t.mark.style);return()=>Ut("div",{class:e.e("marks-text"),style:r.value},n.value)}});const hAe=(t,e,n)=>{const{form:r,formItem:s}=fi(),i=br(),o=H(),a=H(),l={firstButton:o,secondButton:a},c=R(()=>t.disabled||(r==null?void 0:r.disabled)||!1),u=R(()=>Math.min(e.firstValue,e.secondValue)),d=R(()=>Math.max(e.firstValue,e.secondValue)),h=R(()=>t.range?`${100*(d.value-u.value)/(t.max-t.min)}%`:`${100*(e.firstValue-t.min)/(t.max-t.min)}%`),f=R(()=>t.range?`${100*(u.value-t.min)/(t.max-t.min)}%`:"0%"),m=R(()=>t.vertical?{height:t.height}:{}),v=R(()=>t.vertical?{height:h.value,bottom:f.value}:{width:h.value,left:f.value}),y=()=>{i.value&&(e.sliderSize=i.value[`client${t.vertical?"Height":"Width"}`])},g=N=>{const G=t.min+N*(t.max-t.min)/100;if(!t.range)return o;let V;return Math.abs(u.value-G)<Math.abs(d.value-G)?V=e.firstValue<e.secondValue?"firstButton":"secondButton":V=e.firstValue>e.secondValue?"firstButton":"secondButton",l[V]},S=N=>{const G=g(N);return G.value.setPosition(N),G},_=N=>{e.firstValue=N??t.min,E(t.range?[u.value,d.value]:N??t.min)},w=N=>{e.secondValue=N,t.range&&E([u.value,d.value])},E=N=>{n(Qt,N),n(xs,N)},C=async()=>{await Tt(),n(xn,t.range?[u.value,d.value]:t.modelValue)},T=N=>{var G,V,X,F,$,O;if(c.value||e.dragging)return;y();let z=0;if(t.vertical){const re=(X=(V=(G=N.touches)==null?void 0:G.item(0))==null?void 0:V.clientY)!=null?X:N.clientY;z=(i.value.getBoundingClientRect().bottom-re)/e.sliderSize*100}else{const re=(O=($=(F=N.touches)==null?void 0:F.item(0))==null?void 0:$.clientX)!=null?O:N.clientX,q=i.value.getBoundingClientRect().left;z=(re-q)/e.sliderSize*100}if(!(z<0||z>100))return S(z)};return{elFormItem:s,slider:i,firstButton:o,secondButton:a,sliderDisabled:c,minValue:u,maxValue:d,runwayStyle:m,barStyle:v,resetSize:y,setPosition:S,emitChange:C,onSliderWrapperPrevent:N=>{var G,V;((G=l.firstButton.value)!=null&&G.dragging||(V=l.secondButton.value)!=null&&V.dragging)&&N.preventDefault()},onSliderClick:N=>{T(N)&&C()},onSliderDown:async N=>{const G=T(N);G&&(await Tt(),G.value.onButtonDown(N))},onSliderMarkerDown:N=>{if(c.value||e.dragging)return;S(N)&&C()},setFirstValue:_,setSecondValue:w}},fAe=(t,e,n,r)=>({stops:R(()=>{if(!t.showStops||t.min>t.max)return[];if(t.step===0)return[];const o=(t.max-t.min)/t.step,a=100*t.step/(t.max-t.min),l=Array.from({length:o-1}).map((c,u)=>(u+1)*a);return t.range?l.filter(c=>c<100*(n.value-t.min)/(t.max-t.min)||c>100*(r.value-t.min)/(t.max-t.min)):l.filter(c=>c>100*(e.firstValue-t.min)/(t.max-t.min))}),getStopStyle:o=>t.vertical?{bottom:`${o}%`}:{left:`${o}%`}}),pAe=t=>R(()=>t.marks?Object.keys(t.marks).map(Number.parseFloat).sort((n,r)=>n-r).filter(n=>n<=t.max&&n>=t.min).map(n=>({point:n,position:(n-t.min)*100/(t.max-t.min),mark:t.marks[n]})):[]),mAe=(t,e,n,r,s,i)=>{const o=c=>{s(Qt,c),s(xs,c)},a=()=>t.range?![n.value,r.value].every((c,u)=>c===e.oldValue[u]):t.modelValue!==e.oldValue,l=()=>{var c,u;t.min>t.max&&hs("Slider","min should not be greater than max.");const d=t.modelValue;t.range&&rt(d)?d[1]<t.min?o([t.min,t.min]):d[0]>t.max?o([t.max,t.max]):d[0]<t.min?o([t.min,d[1]]):d[1]>t.max?o([d[0],t.max]):(e.firstValue=d[0],e.secondValue=d[1],a()&&(t.validateEvent&&((c=i==null?void 0:i.validate)==null||c.call(i,"change").catch(h=>void 0)),e.oldValue=d.slice())):!t.range&&Ft(d)&&!Number.isNaN(d)&&(d<t.min?o(t.min):d>t.max?o(t.max):(e.firstValue=d,a()&&(t.validateEvent&&((u=i==null?void 0:i.validate)==null||u.call(i,"change").catch(h=>void 0)),e.oldValue=d)))};l(),Be(()=>e.dragging,c=>{c||l()}),Be(()=>t.modelValue,(c,u)=>{e.dragging||rt(c)&&rt(u)&&c.every((d,h)=>d===u[h])&&e.firstValue===c[0]&&e.secondValue===c[1]||l()},{deep:!0}),Be(()=>[t.min,t.max],()=>{l()})},gAe=(t,e,n)=>{const r=H();return Zt(async()=>{t.range?(rt(t.modelValue)?(e.firstValue=Math.max(t.min,t.modelValue[0]),e.secondValue=Math.min(t.max,t.modelValue[1])):(e.firstValue=t.min,e.secondValue=t.max),e.oldValue=[e.firstValue,e.secondValue]):(!Ft(t.modelValue)||Number.isNaN(t.modelValue)?e.firstValue=t.min:e.firstValue=Math.min(t.max,Math.max(t.min,t.modelValue)),e.oldValue=e.firstValue),pr(window,"resize",n),await Tt(),n()}),{sliderWrapper:r}},vAe=de({name:"ElSlider"}),yAe=de({...vAe,props:nAe,emits:rAe,setup(t,{expose:e,emit:n}){const r=t,s=Qe("slider"),{t:i}=zn(),o=Ln({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:a,slider:l,firstButton:c,secondButton:u,sliderDisabled:d,minValue:h,maxValue:f,runwayStyle:m,barStyle:v,resetSize:y,emitChange:g,onSliderWrapperPrevent:S,onSliderClick:_,onSliderDown:w,onSliderMarkerDown:E,setFirstValue:C,setSecondValue:T}=hAe(r,o,n),{stops:I,getStopStyle:k}=fAe(r,o,h,f),{inputId:M,isLabeledByFormItem:L}=la(r,{formItemContext:a}),N=ys(),G=R(()=>r.inputSize||N.value),V=R(()=>r.ariaLabel||i("el.slider.defaultLabel",{min:r.min,max:r.max})),X=R(()=>r.range?r.rangeStartLabel||i("el.slider.defaultRangeStartLabel"):V.value),F=R(()=>r.formatValueText?r.formatValueText(fe.value):`${fe.value}`),$=R(()=>r.rangeEndLabel||i("el.slider.defaultRangeEndLabel")),O=R(()=>r.formatValueText?r.formatValueText(se.value):`${se.value}`),z=R(()=>[s.b(),s.m(N.value),s.is("vertical",r.vertical),{[s.m("with-input")]:r.showInput}]),re=pAe(r);mAe(r,o,h,f,n,a);const q=R(()=>{const ve=[r.min,r.max,r.step].map(xe=>{const je=`${xe}`.split(".")[1];return je?je.length:0});return Math.max.apply(null,ve)}),{sliderWrapper:le}=gAe(r,o,y),{firstValue:fe,secondValue:se,sliderSize:ye}=Ds(o),we=ve=>{o.dragging=ve};return pr(le,"touchstart",S,{passive:!1}),pr(le,"touchmove",S,{passive:!1}),Mn(N7,{...Ds(r),sliderSize:ye,disabled:d,precision:q,emitChange:g,resetSize:y,updateDragging:we}),e({onSliderClick:_}),(ve,xe)=>{var je,nt;return D(),Z("div",{id:ve.range?p(M):void 0,ref_key:"sliderWrapper",ref:le,class:U(p(z)),role:ve.range?"group":void 0,"aria-label":ve.range&&!p(L)?p(V):void 0,"aria-labelledby":ve.range&&p(L)?(je=p(a))==null?void 0:je.labelId:void 0},[ne("div",{ref_key:"slider",ref:l,class:U([p(s).e("runway"),{"show-input":ve.showInput&&!ve.range},p(s).is("disabled",p(d))]),style:Pt(p(m)),onMousedown:p(w),onTouchstartPassive:p(w)},[ne("div",{class:U(p(s).e("bar")),style:Pt(p(v))},null,6),ae(G4,{id:ve.range?void 0:p(M),ref_key:"firstButton",ref:c,"model-value":p(fe),vertical:ve.vertical,"tooltip-class":ve.tooltipClass,placement:ve.placement,role:"slider","aria-label":ve.range||!p(L)?p(X):void 0,"aria-labelledby":!ve.range&&p(L)?(nt=p(a))==null?void 0:nt.labelId:void 0,"aria-valuemin":ve.min,"aria-valuemax":ve.range?p(se):ve.max,"aria-valuenow":p(fe),"aria-valuetext":p(F),"aria-orientation":ve.vertical?"vertical":"horizontal","aria-disabled":p(d),"onUpdate:modelValue":p(C)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),ve.range?(D(),Le(G4,{key:0,ref_key:"secondButton",ref:u,"model-value":p(se),vertical:ve.vertical,"tooltip-class":ve.tooltipClass,placement:ve.placement,role:"slider","aria-label":p($),"aria-valuemin":p(fe),"aria-valuemax":ve.max,"aria-valuenow":p(se),"aria-valuetext":p(O),"aria-orientation":ve.vertical?"vertical":"horizontal","aria-disabled":p(d),"onUpdate:modelValue":p(T)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):Pe("v-if",!0),ve.showStops?(D(),Z("div",{key:1},[(D(!0),Z(xt,null,_n(p(I),(ue,j)=>(D(),Z("div",{key:j,class:U(p(s).e("stop")),style:Pt(p(k)(ue))},null,6))),128))])):Pe("v-if",!0),p(re).length>0?(D(),Z(xt,{key:2},[ne("div",null,[(D(!0),Z(xt,null,_n(p(re),(ue,j)=>(D(),Z("div",{key:j,style:Pt(p(k)(ue.position)),class:U([p(s).e("stop"),p(s).e("marks-stop")])},null,6))),128))]),ne("div",{class:U(p(s).e("marks"))},[(D(!0),Z(xt,null,_n(p(re),(ue,j)=>(D(),Le(p(dAe),{key:j,mark:ue.mark,style:Pt(p(k)(ue.position)),onMousedown:$t(he=>p(E)(ue.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):Pe("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),ve.showInput&&!ve.range?(D(),Le(p(m7),{key:0,ref:"input","model-value":p(fe),class:U(p(s).e("input")),step:ve.step,disabled:p(d),controls:ve.showInputControls,min:ve.min,max:ve.max,precision:p(q),debounce:ve.debounce,size:p(G),"onUpdate:modelValue":p(C),onChange:p(g)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):Pe("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var bAe=at(yAe,[["__file","slider.vue"]]);const _Ae=nn(bAe),wAe=it({prefixCls:{type:String}}),W4=de({name:"ElSpaceItem",props:wAe,setup(t,{slots:e}){const n=Qe("space"),r=R(()=>`${t.prefixCls||n.b()}__item`);return()=>Ut("div",{class:r.value},Ae(e,"default"))}}),j4={small:8,default:12,large:16};function xAe(t){const e=Qe("space"),n=R(()=>[e.b(),e.m(t.direction),t.class]),r=H(0),s=H(0),i=R(()=>{const a=t.wrap||t.fill?{flexWrap:"wrap"}:{},l={alignItems:t.alignment},c={rowGap:`${s.value}px`,columnGap:`${r.value}px`};return[a,l,c,t.style]}),o=R(()=>t.fill?{flexGrow:1,minWidth:`${t.fillRatio}%`}:{});return ui(()=>{const{size:a="small",wrap:l,direction:c,fill:u}=t;if(rt(a)){const[d=0,h=0]=a;r.value=d,s.value=h}else{let d;Ft(a)?d=a:d=j4[a||"small"]||j4.small,(l||u)&&c==="horizontal"?r.value=s.value=d:c==="horizontal"?(r.value=d,s.value=0):(s.value=d,r.value=0)}}),{classes:n,containerStyle:i,itemStyle:o}}const SAe=it({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:Ce([String,Object,Array]),default:""},style:{type:Ce([String,Array,Object]),default:""},alignment:{type:Ce(String),default:"center"},prefixCls:{type:String},spacer:{type:Ce([Object,String,Number,Array]),default:null,validator:t=>wr(t)||Ft(t)||kt(t)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:Rl,validator:t=>Ft(t)||rt(t)&&t.length===2&&t.every(Ft)}}),EAe=de({name:"ElSpace",props:SAe,setup(t,{slots:e}){const{classes:n,containerStyle:r,itemStyle:s}=xAe(t);function i(o,a="",l=[]){const{prefixCls:c}=t;return o.forEach((u,d)=>{tE(u)?rt(u.children)&&u.children.forEach((h,f)=>{tE(h)&&rt(h.children)?i(h.children,`${a+f}-`,l):wr(h)&&(h==null?void 0:h.type)===gs?l.push(h):l.push(ae(W4,{style:s.value,prefixCls:c,key:`nested-${a+f}`},{default:()=>[h]},Wo.PROPS|Wo.STYLE,["style","prefixCls"]))}):w1e(u)&&l.push(ae(W4,{style:s.value,prefixCls:c,key:`LoopKey${a+d}`},{default:()=>[u]},Wo.PROPS|Wo.STYLE,["style","prefixCls"]))}),l}return()=>{var o;const{spacer:a,direction:l}=t,c=Ae(e,"default",{key:0},()=>[]);if(((o=c.children)!=null?o:[]).length===0)return null;if(rt(c.children)){let u=i(c.children);if(a){const d=u.length-1;u=u.reduce((h,f,m)=>{const v=[...h,f];return m!==d&&v.push(ae("span",{style:[s.value,l==="vertical"?"width: 100%":null],key:m},[wr(a)?a:rn(a,Wo.TEXT)],Wo.STYLE)),v},[])}return ae("div",{class:n.value,style:r.value},u,Wo.STYLE|Wo.CLASS)}return c.children}}}),CAe=nn(EAe),TAe=it({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:Ce([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:Ce([String,Object,Array])}}),MAe=de({name:"ElStatistic"}),AAe=de({...MAe,props:TAe,setup(t,{expose:e}){const n=t,r=Qe("statistic"),s=R(()=>{const{value:i,formatter:o,precision:a,decimalSeparator:l,groupSeparator:c}=n;if(Lt(o))return o(i);if(!Ft(i)||Number.isNaN(i))return i;let[u,d=""]=String(i).split(".");return d=d.padEnd(a,"0").slice(0,a>0?a:0),u=u.replace(/\B(?=(\d{3})+(?!\d))/g,c),[u,d].join(d?l:"")});return e({displayValue:s}),(i,o)=>(D(),Z("div",{class:U(p(r).b())},[i.$slots.title||i.title?(D(),Z("div",{key:0,class:U(p(r).e("head"))},[Ae(i.$slots,"title",{},()=>[rn(tt(i.title),1)])],2)):Pe("v-if",!0),ne("div",{class:U(p(r).e("content"))},[i.$slots.prefix||i.prefix?(D(),Z("div",{key:0,class:U(p(r).e("prefix"))},[Ae(i.$slots,"prefix",{},()=>[ne("span",null,tt(i.prefix),1)])],2)):Pe("v-if",!0),ne("span",{class:U(p(r).e("number")),style:Pt(i.valueStyle)},tt(p(s)),7),i.$slots.suffix||i.suffix?(D(),Z("div",{key:1,class:U(p(r).e("suffix"))},[Ae(i.$slots,"suffix",{},()=>[ne("span",null,tt(i.suffix),1)])],2)):Pe("v-if",!0)],2)],2))}});var kAe=at(AAe,[["__file","statistic.vue"]]);const D7=nn(kAe),IAe=it({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:Ce([Number,Object]),default:0},valueStyle:{type:Ce([String,Object,Array])}}),PAe={finish:()=>!0,[xn]:t=>Ft(t)},RAe=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],K4=t=>Ft(t)?new Date(t).getTime():t.valueOf(),q4=(t,e)=>{let n=t;const r=/\[([^\]]*)]/g;return RAe.reduce((i,[o,a])=>{const l=new RegExp(`${o}+(?![^\\[\\]]*\\])`,"g");if(l.test(i)){const c=Math.floor(n/a);return n-=c*a,i.replace(l,u=>String(c).padStart(u.length,"0"))}return i},e).replace(r,"$1")},LAe=de({name:"ElCountdown"}),OAe=de({...LAe,props:IAe,emits:PAe,setup(t,{expose:e,emit:n}){const r=t;let s;const i=H(0),o=R(()=>q4(i.value,r.format)),a=u=>q4(u,r.format),l=()=>{s&&(sh(s),s=void 0)},c=()=>{const u=K4(r.value),d=()=>{let h=u-Date.now();n(xn,h),h<=0?(h=0,l(),n("finish")):s=Uu(d),i.value=h};s=Uu(d)};return Zt(()=>{i.value=K4(r.value)-Date.now(),Be(()=>[r.value,r.format],()=>{l(),c()},{immediate:!0})}),Xn(()=>{l()}),e({displayValue:o}),(u,d)=>(D(),Le(p(D7),{value:i.value,title:u.title,prefix:u.prefix,suffix:u.suffix,"value-style":u.valueStyle,formatter:a},go({_:2},[_n(u.$slots,(h,f)=>({name:f,fn:me(()=>[Ae(u.$slots,f)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var NAe=at(OAe,[["__file","countdown.vue"]]);const DAe=nn(NAe),FAe=it({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),BAe={[xn]:(t,e)=>[t,e].every(Ft)},F7="ElSteps",UAe=de({name:"ElSteps"}),zAe=de({...UAe,props:FAe,emits:BAe,setup(t,{emit:e}){const n=t,r=Qe("steps"),{children:s,addChild:i,removeChild:o,ChildrenSorter:a}=x_(tn(),"ElStep");return Be(s,()=>{s.value.forEach((l,c)=>{l.setIndex(c)})}),Mn(F7,{props:n,steps:s,addStep:i,removeStep:o}),Be(()=>n.active,(l,c)=>{e(xn,l,c)}),(l,c)=>(D(),Z("div",{class:U([p(r).b(),p(r).m(l.simple?"simple":l.direction)])},[Ae(l.$slots,"default"),ae(p(a))],2))}});var $Ae=at(zAe,[["__file","steps.vue"]]);const VAe=it({title:{type:String,default:""},icon:{type:or},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),HAe=de({name:"ElStep"}),GAe=de({...HAe,props:VAe,setup(t){const e=t,n=Qe("step"),r=H(-1),s=H({}),i=H(""),o=_t(F7),a=tn();Zt(()=>{Be([()=>o.props.active,()=>o.props.processStatus,()=>o.props.finishStatus],([C])=>{w(C)},{immediate:!0})});const l=R(()=>e.status||i.value),c=R(()=>{const C=o.steps.value[r.value-1];return C?C.currentStatus:"wait"}),u=R(()=>o.props.alignCenter),d=R(()=>o.props.direction==="vertical"),h=R(()=>o.props.simple),f=R(()=>o.steps.value.length),m=R(()=>{var C;return((C=o.steps.value[f.value-1])==null?void 0:C.uid)===a.uid}),v=R(()=>h.value?"":o.props.space),y=R(()=>[n.b(),n.is(h.value?"simple":o.props.direction),n.is("flex",m.value&&!v.value&&!u.value),n.is("center",u.value&&!d.value&&!h.value)]),g=R(()=>{const C={flexBasis:Ft(v.value)?`${v.value}px`:v.value?v.value:`${100/(f.value-(u.value?0:1))}%`};return d.value||m.value&&(C.maxWidth=`${100/f.value}%`),C}),S=C=>{r.value=C},_=C=>{const T=C==="wait",I={transitionDelay:`${T?"-":""}${150*r.value}ms`},k=C===o.props.processStatus||T?0:100;I.borderWidth=k&&!h.value?"1px":0,I[o.props.direction==="vertical"?"height":"width"]=`${k}%`,s.value=I},w=C=>{C>r.value?i.value=o.props.finishStatus:C===r.value&&c.value!=="error"?i.value=o.props.processStatus:i.value="wait";const T=o.steps.value[r.value-1];T&&T.calcProgress(i.value)},E=Ln({uid:a.uid,getVnode:()=>a.vnode,currentStatus:l,setIndex:S,calcProgress:_});return o.addStep(E),Xn(()=>{o.removeStep(E)}),(C,T)=>(D(),Z("div",{style:Pt(p(g)),class:U(p(y))},[Pe(" icon & line "),ne("div",{class:U([p(n).e("head"),p(n).is(p(l))])},[p(h)?Pe("v-if",!0):(D(),Z("div",{key:0,class:U(p(n).e("line"))},[ne("i",{class:U(p(n).e("line-inner")),style:Pt(s.value)},null,6)],2)),ne("div",{class:U([p(n).e("icon"),p(n).is(C.icon||C.$slots.icon?"icon":"text")])},[Ae(C.$slots,"icon",{},()=>[C.icon?(D(),Le(p(Et),{key:0,class:U(p(n).e("icon-inner"))},{default:me(()=>[(D(),Le(mn(C.icon)))]),_:1},8,["class"])):p(l)==="success"?(D(),Le(p(Et),{key:1,class:U([p(n).e("icon-inner"),p(n).is("status")])},{default:me(()=>[ae(p(Pv))]),_:1},8,["class"])):p(l)==="error"?(D(),Le(p(Et),{key:2,class:U([p(n).e("icon-inner"),p(n).is("status")])},{default:me(()=>[ae(p(ra))]),_:1},8,["class"])):p(h)?Pe("v-if",!0):(D(),Z("div",{key:3,class:U(p(n).e("icon-inner"))},tt(r.value+1),3))])],2)],2),Pe(" title & description "),ne("div",{class:U(p(n).e("main"))},[ne("div",{class:U([p(n).e("title"),p(n).is(p(l))])},[Ae(C.$slots,"title",{},()=>[rn(tt(C.title),1)])],2),p(h)?(D(),Z("div",{key:0,class:U(p(n).e("arrow"))},null,2)):(D(),Z("div",{key:1,class:U([p(n).e("description"),p(n).is(p(l))])},[Ae(C.$slots,"description",{},()=>[rn(tt(C.description),1)])],2))],2)],6))}});var B7=at(GAe,[["__file","item.vue"]]);const WAe=nn($Ae,{Step:B7}),jAe=Br(B7),U7=t=>["",...Rl].includes(t),KAe=it({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:U7},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:or},activeActionIcon:{type:or},activeIcon:{type:or},inactiveIcon:{type:or},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:Ce(Function)},id:String,tabindex:{type:[String,Number]},...hi(["ariaLabel"])}),qAe={[Qt]:t=>nr(t)||kt(t)||Ft(t),[xn]:t=>nr(t)||kt(t)||Ft(t),[xs]:t=>nr(t)||kt(t)||Ft(t)},z7="ElSwitch",YAe=de({name:z7}),XAe=de({...YAe,props:KAe,emits:qAe,setup(t,{expose:e,emit:n}){const r=t,{formItem:s}=fi(),i=ys(),o=Qe("switch"),{inputId:a}=la(r,{formItemContext:s}),l=pi(R(()=>r.loading)),c=H(r.modelValue!==!1),u=H(),d=H(),h=R(()=>[o.b(),o.m(i.value),o.is("disabled",l.value),o.is("checked",g.value)]),f=R(()=>[o.e("label"),o.em("label","left"),o.is("active",!g.value)]),m=R(()=>[o.e("label"),o.em("label","right"),o.is("active",g.value)]),v=R(()=>({width:qr(r.width)}));Be(()=>r.modelValue,()=>{c.value=!0});const y=R(()=>c.value?r.modelValue:!1),g=R(()=>y.value===r.activeValue);[r.activeValue,r.inactiveValue].includes(y.value)||(n(Qt,r.inactiveValue),n(xn,r.inactiveValue),n(xs,r.inactiveValue)),Be(g,E=>{var C;u.value.checked=E,r.validateEvent&&((C=s==null?void 0:s.validate)==null||C.call(s,"change").catch(T=>void 0))});const S=()=>{const E=g.value?r.inactiveValue:r.activeValue;n(Qt,E),n(xn,E),n(xs,E),Tt(()=>{u.value.checked=g.value})},_=()=>{if(l.value)return;const{beforeChange:E}=r;if(!E){S();return}const C=E();[th(C),nr(C)].includes(!0)||hs(z7,"beforeChange must return type `Promise<boolean>` or `boolean`"),th(C)?C.then(I=>{I&&S()}).catch(I=>{}):C&&S()},w=()=>{var E,C;(C=(E=u.value)==null?void 0:E.focus)==null||C.call(E)};return Zt(()=>{u.value.checked=g.value}),e({focus:w,checked:g}),(E,C)=>(D(),Z("div",{class:U(p(h)),onClick:$t(_,["prevent"])},[ne("input",{id:p(a),ref_key:"input",ref:u,class:U(p(o).e("input")),type:"checkbox",role:"switch","aria-checked":p(g),"aria-disabled":p(l),"aria-label":E.ariaLabel,name:E.name,"true-value":E.activeValue,"false-value":E.inactiveValue,disabled:p(l),tabindex:E.tabindex,onChange:S,onKeydown:cr(_,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!E.inlinePrompt&&(E.inactiveIcon||E.inactiveText)?(D(),Z("span",{key:0,class:U(p(f))},[E.inactiveIcon?(D(),Le(p(Et),{key:0},{default:me(()=>[(D(),Le(mn(E.inactiveIcon)))]),_:1})):Pe("v-if",!0),!E.inactiveIcon&&E.inactiveText?(D(),Z("span",{key:1,"aria-hidden":p(g)},tt(E.inactiveText),9,["aria-hidden"])):Pe("v-if",!0)],2)):Pe("v-if",!0),ne("span",{ref_key:"core",ref:d,class:U(p(o).e("core")),style:Pt(p(v))},[E.inlinePrompt?(D(),Z("div",{key:0,class:U(p(o).e("inner"))},[E.activeIcon||E.inactiveIcon?(D(),Le(p(Et),{key:0,class:U(p(o).is("icon"))},{default:me(()=>[(D(),Le(mn(p(g)?E.activeIcon:E.inactiveIcon)))]),_:1},8,["class"])):E.activeText||E.inactiveText?(D(),Z("span",{key:1,class:U(p(o).is("text")),"aria-hidden":!p(g)},tt(p(g)?E.activeText:E.inactiveText),11,["aria-hidden"])):Pe("v-if",!0)],2)):Pe("v-if",!0),ne("div",{class:U(p(o).e("action"))},[E.loading?(D(),Le(p(Et),{key:0,class:U(p(o).is("loading"))},{default:me(()=>[ae(p(El))]),_:1},8,["class"])):p(g)?Ae(E.$slots,"active-action",{key:1},()=>[E.activeActionIcon?(D(),Le(p(Et),{key:0},{default:me(()=>[(D(),Le(mn(E.activeActionIcon)))]),_:1})):Pe("v-if",!0)]):p(g)?Pe("v-if",!0):Ae(E.$slots,"inactive-action",{key:2},()=>[E.inactiveActionIcon?(D(),Le(p(Et),{key:0},{default:me(()=>[(D(),Le(mn(E.inactiveActionIcon)))]),_:1})):Pe("v-if",!0)])],2)],6),!E.inlinePrompt&&(E.activeIcon||E.activeText)?(D(),Z("span",{key:1,class:U(p(m))},[E.activeIcon?(D(),Le(p(Et),{key:0},{default:me(()=>[(D(),Le(mn(E.activeIcon)))]),_:1})):Pe("v-if",!0),!E.activeIcon&&E.activeText?(D(),Z("span",{key:1,"aria-hidden":!p(g)},tt(E.activeText),9,["aria-hidden"])):Pe("v-if",!0)],2)):Pe("v-if",!0)],10,["onClick"]))}});var ZAe=at(XAe,[["__file","switch.vue"]]);const JAe=nn(ZAe),Ux=function(t){var e;return(e=t.target)==null?void 0:e.closest("td")},QAe=function(t,e,n,r,s){if(!e&&!r&&(!s||rt(s)&&!s.length))return t;kt(n)?n=n==="descending"?-1:1:n=n&&n<0?-1:1;const i=r?null:function(a,l){return s?d5(Hs(s),c=>kt(c)?cs(a,c):c(a,l,t)):(e!=="$key"&&un(a)&&"$value"in a&&(a=a.$value),[un(a)?e?cs(a,e):null:a])},o=function(a,l){var c,u,d,h,f,m;if(r)return r(a.value,l.value);for(let v=0,y=(u=(c=a.key)==null?void 0:c.length)!=null?u:0;v<y;v++){if(((d=a.key)==null?void 0:d[v])<((h=l.key)==null?void 0:h[v]))return-1;if(((f=a.key)==null?void 0:f[v])>((m=l.key)==null?void 0:m[v]))return 1}return 0};return t.map((a,l)=>({value:a,index:l,key:i?i(a,l):null})).sort((a,l)=>{let c=o(a,l);return c||(c=a.index-l.index),c*+n}).map(a=>a.value)},$7=function(t,e){let n=null;return t.columns.forEach(r=>{r.id===e&&(n=r)}),n},e3e=function(t,e){let n=null;for(let r=0;r<t.columns.length;r++){const s=t.columns[r];if(s.columnKey===e){n=s;break}}return n||hs("ElTable",`No column matching with column-key: ${e}`),n},Y4=function(t,e,n){const r=(e.className||"").match(new RegExp(`${n}-table_[^\\s]+`,"gm"));return r?$7(t,r[0]):null},li=(t,e)=>{if(!t)throw new Error("Row is required when get row identity");if(kt(e)){if(!e.includes("."))return`${t[e]}`;const n=e.split(".");let r=t;for(const s of n)r=r[s];return`${r}`}else if(Lt(e))return e.call(null,t);return""},qf=function(t,e,n=!1,r="children"){const s=t||[],i={};return s.forEach((o,a)=>{if(i[li(o,e)]={row:o,index:a},n){const l=o[r];rt(l)&&Object.assign(i,qf(l,e,!0,r))}}),i};function t3e(t,e){const n={};let r;for(r in t)n[r]=t[r];for(r in e)if(Kn(e,r)){const s=e[r];Bn(s)||(n[r]=s)}return n}function zM(t){return t===""||Bn(t)||(t=Number.parseInt(t,10),Number.isNaN(t)&&(t="")),t}function V7(t){return t===""||Bn(t)||(t=zM(t),Number.isNaN(t)&&(t=80)),t}function n3e(t){return Ft(t)?t:kt(t)?/^\d+(?:px)?$/.test(t)?Number.parseInt(t,10):t:null}function r3e(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function g1(t,e,n,r,s,i,o){let a=i??0,l=!1;const u=(()=>{if(!o)return t.indexOf(e);const v=li(e,o);return t.findIndex(y=>li(y,o)===v)})(),d=u!==-1,h=s==null?void 0:s.call(null,e,a),f=v=>{v==="add"?t.push(e):t.splice(u,1),l=!0},m=v=>{let y=0;const g=(r==null?void 0:r.children)&&v[r.children];return g&&rt(g)&&(y+=g.length,g.forEach(S=>{y+=m(S)})),y};return(!s||h)&&(nr(n)?n&&!d?f("add"):!n&&d&&f("remove"):f(d?"remove":"add")),!(r!=null&&r.checkStrictly)&&(r!=null&&r.children)&&rt(e[r.children])&&e[r.children].forEach(v=>{const y=g1(t,v,n??!d,r,s,a+1,o);a+=m(v)+1,y&&(l=y)}),l}function s3e(t,e,n="children",r="hasChildren",s=!1){const i=a=>!(rt(a)&&a.length);function o(a,l,c){e(a,l,c),l.forEach(u=>{if(u[r]&&s){e(u,null,c+1);return}const d=u[n];i(d)||o(u,d,c+1)})}t.forEach(a=>{if(a[r]&&s){e(a,null,0);return}const l=a[n];i(l)||o(a,l,0)})}const i3e=(t,e,n,r)=>{const s={strategy:"fixed",...t.popperOptions},i=Lt(r==null?void 0:r.tooltipFormatter)?r.tooltipFormatter({row:n,column:r,cellValue:sg(n,r.property).value}):void 0;return wr(i)?{slotContent:i,content:null,...t,popperOptions:s}:{slotContent:null,content:i??e,...t,popperOptions:s}};let io=null;function o3e(t,e,n,r,s,i){var o;const a=i3e(t,e,n,r),l={...a,slotContent:void 0};if((io==null?void 0:io.trigger)===s){const m=(o=io.vm)==null?void 0:o.component;h5(m==null?void 0:m.props,l),m&&a.slotContent&&(m.slots.content=()=>[a.slotContent]);return}io==null||io();const c=i==null?void 0:i.refs.tableWrapper,u=c==null?void 0:c.dataset.prefix,d=ae(ri,{virtualTriggering:!0,virtualRef:s,appendTo:c,placement:"top",transition:"none",offset:0,hideAfter:0,...l},a.slotContent?{content:()=>a.slotContent}:void 0);d.appContext={...i.appContext,...i};const h=document.createElement("div");Fu(d,h),d.component.exposed.onOpen();const f=c==null?void 0:c.querySelector(`.${u}-scrollbar__wrap`);io=()=>{Fu(null,h),f==null||f.removeEventListener("scroll",io),io=null},io.trigger=s??void 0,io.vm=d,f==null||f.addEventListener("scroll",io)}function H7(t){return t.children?d5(t.children,H7):[t]}function X4(t,e){return t+e.colSpan}const G7=(t,e,n,r)=>{let s=0,i=t;const o=n.states.columns.value;if(r){const l=H7(r[t]);s=o.slice(0,o.indexOf(l[0])).reduce(X4,0),i=s+l.reduce(X4,0)-1}else s=t;let a;switch(e){case"left":i<n.states.fixedLeafColumnsLength.value&&(a="left");break;case"right":s>=o.length-n.states.rightFixedLeafColumnsLength.value&&(a="right");break;default:i<n.states.fixedLeafColumnsLength.value?a="left":s>=o.length-n.states.rightFixedLeafColumnsLength.value&&(a="right")}return a?{direction:a,start:s,after:i}:{}},$M=(t,e,n,r,s,i=0)=>{const o=[],{direction:a,start:l,after:c}=G7(e,n,r,s);if(a){const u=a==="left";o.push(`${t}-fixed-column--${a}`),u&&c+i===r.states.fixedLeafColumnsLength.value-1?o.push("is-last-column"):!u&&l-i===r.states.columns.value.length-r.states.rightFixedLeafColumnsLength.value&&o.push("is-first-column")}return o};function Z4(t,e){return t+(yv(e.realWidth)||Number.isNaN(e.realWidth)?Number(e.width):e.realWidth)}const VM=(t,e,n,r)=>{const{direction:s,start:i=0,after:o=0}=G7(t,e,n,r);if(!s)return;const a={},l=s==="left",c=n.states.columns.value;return l?a.left=c.slice(0,i).reduce(Z4,0):a.right=c.slice(o+1).reverse().reduce(Z4,0),a},Mp=(t,e)=>{t&&(Number.isNaN(t[e])||(t[e]=`${t[e]}px`))};function a3e(t){const e=tn(),n=H(!1),r=H([]);return{updateExpandRows:()=>{const l=t.data.value||[],c=t.rowKey.value;if(n.value)r.value=l.slice();else if(c){const u=qf(r.value,c);r.value=l.reduce((d,h)=>{const f=li(h,c);return u[f]&&d.push(h),d},[])}else r.value=[]},toggleRowExpansion:(l,c)=>{g1(r.value,l,c,void 0,void 0,void 0,t.rowKey.value)&&e.emit("expand-change",l,r.value.slice())},setExpandRowKeys:l=>{e.store.assertRowKey();const c=t.data.value||[],u=t.rowKey.value,d=qf(c,u);r.value=l.reduce((h,f)=>{const m=d[f];return m&&h.push(m.row),h},[])},isRowExpanded:l=>{const c=t.rowKey.value;return c?!!qf(r.value,c)[li(l,c)]:r.value.includes(l)},states:{expandRows:r,defaultExpandAll:n}}}function l3e(t){const e=tn(),n=H(null),r=H(null),s=c=>{e.store.assertRowKey(),n.value=c,o(c)},i=()=>{n.value=null},o=c=>{var u;const{data:d,rowKey:h}=t;let f=null;h.value&&(f=(u=(p(d)||[]).find(m=>li(m,h.value)===c))!=null?u:null),r.value=f??null,e.emit("current-change",r.value,null)};return{setCurrentRowKey:s,restoreCurrentRowKey:i,setCurrentRowByKey:o,updateCurrentRow:c=>{const u=r.value;if(c&&c!==u){r.value=c,e.emit("current-change",r.value,u);return}!c&&u&&(r.value=null,e.emit("current-change",null,u))},updateCurrentRowData:()=>{const c=t.rowKey.value,u=t.data.value||[],d=r.value;if(d&&!u.includes(d)){if(c){const h=li(d,c);o(h)}else r.value=null;yv(r.value)&&e.emit("current-change",null,d)}else n.value&&(o(n.value),i())},states:{_currentRowKey:n,currentRow:r}}}function c3e(t){const e=H([]),n=H({}),r=H(16),s=H(!1),i=H({}),o=H("hasChildren"),a=H("children"),l=H(!1),c=tn(),u=R(()=>{if(!t.rowKey.value)return{};const w=t.data.value||[];return h(w)}),d=R(()=>{const w=t.rowKey.value,E=Object.keys(i.value),C={};return E.length&&E.forEach(T=>{if(i.value[T].length){const I={children:[]};i.value[T].forEach(k=>{const M=li(k,w);I.children.push(M),k[o.value]&&!C[M]&&(C[M]={children:[]})}),C[T]=I}}),C}),h=w=>{const E=t.rowKey.value,C={};return s3e(w,(T,I,k)=>{const M=li(T,E);rt(I)?C[M]={children:I.map(L=>li(L,E)),level:k}:s.value&&(C[M]={children:[],lazy:!0,level:k})},a.value,o.value,s.value),C},f=(w=!1,E)=>{var C,T;E||(E=(C=c.store)==null?void 0:C.states.defaultExpandAll.value);const I=u.value,k=d.value,M=Object.keys(I),L={};if(M.length){const N=p(n),G=[],V=(F,$)=>{if(w)return e.value?E||e.value.includes($):!!(E||F!=null&&F.expanded);{const O=E||e.value&&e.value.includes($);return!!(F!=null&&F.expanded||O)}};M.forEach(F=>{const $=N[F],O={...I[F]};if(O.expanded=V($,F),O.lazy){const{loaded:z=!1,loading:re=!1}=$||{};O.loaded=!!z,O.loading=!!re,G.push(F)}L[F]=O});const X=Object.keys(k);s.value&&X.length&&G.length&&X.forEach(F=>{var $;const O=N[F],z=k[F].children;if(G.includes(F)){if((($=L[F].children)==null?void 0:$.length)!==0)throw new Error("[ElTable]children must be an empty array.");L[F].children=z}else{const{loaded:re=!1,loading:q=!1}=O||{};L[F]={lazy:!0,loaded:!!re,loading:!!q,expanded:V(O,F),children:z,level:void 0}}})}n.value=L,(T=c.store)==null||T.updateTableScrollY()};Be(()=>e.value,()=>{f(!0)}),Be(()=>u.value,()=>{f()}),Be(()=>d.value,()=>{f()});const m=w=>{e.value=w,f()},v=w=>s.value&&w&&"loaded"in w&&!w.loaded,y=(w,E)=>{c.store.assertRowKey();const C=t.rowKey.value,T=li(w,C),I=T&&n.value[T];if(T&&I&&"expanded"in I){const k=I.expanded;E=Bn(E)?!I.expanded:E,n.value[T].expanded=E,k!==E&&c.emit("expand-change",w,E),v(I)&&S(w,T,I),c.store.updateTableScrollY()}},g=w=>{c.store.assertRowKey();const E=t.rowKey.value,C=li(w,E),T=n.value[C];v(T)?S(w,C,T):y(w,void 0)},S=(w,E,C)=>{const{load:T}=c.props;T&&!n.value[E].loaded&&(n.value[E].loading=!0,T(w,C,I=>{if(!rt(I))throw new TypeError("[ElTable] data must be an array");n.value[E].loading=!1,n.value[E].loaded=!0,n.value[E].expanded=!0,I.length&&(i.value[E]=I),c.emit("expand-change",w,!0)}))};return{loadData:S,loadOrToggle:g,toggleTreeExpansion:y,updateTreeExpandKeys:m,updateTreeData:f,updateKeyChildren:(w,E)=>{const{lazy:C,rowKey:T}=c.props;if(C){if(!T)throw new Error("[Table] rowKey is required in updateKeyChild");i.value[w]&&(i.value[w]=E)}},normalize:h,states:{expandRowKeys:e,treeData:n,indent:r,lazy:s,lazyTreeNodeMap:i,lazyColumnIdentifier:o,childrenColumnName:a,checkStrictly:l}}}const u3e=(t,e)=>{const n=e.sortingColumn;return!n||kt(n.sortable)?t:QAe(t,e.sortProp,e.sortOrder,n.sortMethod,n.sortBy)},ab=t=>{const e=[];return t.forEach(n=>{n.children&&n.children.length>0?e.push.apply(e,ab(n.children)):e.push(n)}),e};function d3e(){var t;const e=tn(),{size:n}=Ds((t=e.proxy)==null?void 0:t.$props),r=H(null),s=H([]),i=H([]),o=H(!1),a=H([]),l=H([]),c=H([]),u=H([]),d=H([]),h=H([]),f=H([]),m=H([]),v=[],y=H(0),g=H(0),S=H(0),_=H(!1),w=H([]),E=H(!1),C=H(!1),T=H(null),I=H({}),k=H(null),M=H(null),L=H(null),N=H(null),G=H(null),V=R(()=>r.value?qf(w.value,r.value):void 0);Be(s,()=>{var et;e.state&&(O(!1),e.props.tableLayout==="auto"&&((et=e.refs.tableHeaderRef)==null||et.updateFixedColumnStyle()))},{deep:!0});const X=()=>{if(!r.value)throw new Error("[ElTable] prop row-key is required")},F=et=>{var ht;(ht=et.children)==null||ht.forEach(Mt=>{Mt.fixed=et.fixed,F(Mt)})},$=()=>{a.value.forEach(Ve=>{F(Ve)}),u.value=a.value.filter(Ve=>[!0,"left"].includes(Ve.fixed));const et=a.value.find(Ve=>Ve.type==="selection");let ht;et&&et.fixed!=="right"&&!u.value.includes(et)&&a.value.indexOf(et)===0&&u.value.length&&(u.value.unshift(et),ht=!0),d.value=a.value.filter(Ve=>Ve.fixed==="right");const Mt=a.value.filter(Ve=>(ht?Ve.type!=="selection":!0)&&!Ve.fixed);l.value=Array.from(u.value).concat(Mt).concat(d.value);const ze=ab(Mt),Me=ab(u.value),be=ab(d.value);y.value=ze.length,g.value=Me.length,S.value=be.length,c.value=Array.from(Me).concat(ze).concat(be),o.value=u.value.length>0||d.value.length>0},O=(et,ht=!1)=>{et&&$(),ht?e.state.doLayout():e.state.debouncedUpdateLayout()},z=et=>V.value?!!V.value[li(et,r.value)]:w.value.includes(et),re=()=>{_.value=!1;const et=w.value;w.value=[],et.length&&e.emit("selection-change",[])},q=()=>{var et,ht;let Mt;if(r.value){Mt=[];const ze=(ht=(et=e==null?void 0:e.store)==null?void 0:et.states)==null?void 0:ht.childrenColumnName.value,Me=qf(s.value,r.value,!0,ze);for(const be in V.value)Kn(V.value,be)&&!Me[be]&&Mt.push(V.value[be].row)}else Mt=w.value.filter(ze=>!s.value.includes(ze));if(Mt.length){const ze=w.value.filter(Me=>!Mt.includes(Me));w.value=ze,e.emit("selection-change",ze.slice())}},le=()=>(w.value||[]).slice(),fe=(et,ht,Mt=!0,ze=!1)=>{var Me,be,Ve,mt;const Ue={children:(be=(Me=e==null?void 0:e.store)==null?void 0:Me.states)==null?void 0:be.childrenColumnName.value,checkStrictly:(mt=(Ve=e==null?void 0:e.store)==null?void 0:Ve.states)==null?void 0:mt.checkStrictly.value};if(g1(w.value,et,ht,Ue,ze?void 0:T.value,s.value.indexOf(et),r.value)){const st=(w.value||[]).slice();Mt&&e.emit("select",st,et),e.emit("selection-change",st)}},se=()=>{var et,ht;const Mt=C.value?!_.value:!(_.value||w.value.length);_.value=Mt;let ze=!1,Me=0;const be=(ht=(et=e==null?void 0:e.store)==null?void 0:et.states)==null?void 0:ht.rowKey.value,{childrenColumnName:Ve}=e.store.states,mt={children:Ve.value,checkStrictly:!1};s.value.forEach((Ue,Ct)=>{const st=Ct+Me;g1(w.value,Ue,Mt,mt,T.value,st,be)&&(ze=!0),Me+=we(li(Ue,be))}),ze&&e.emit("selection-change",w.value?w.value.slice():[]),e.emit("select-all",(w.value||[]).slice())},ye=()=>{var et;if(((et=s.value)==null?void 0:et.length)===0){_.value=!1;return}const{childrenColumnName:ht}=e.store.states;let Mt=0,ze=0;const Me=Ve=>{var mt;for(const Ue of Ve){const Ct=T.value&&T.value.call(null,Ue,Mt);if(z(Ue))ze++;else if(!T.value||Ct)return!1;if(Mt++,(mt=Ue[ht.value])!=null&&mt.length&&!Me(Ue[ht.value]))return!1}return!0},be=Me(s.value||[]);_.value=ze===0?!1:be},we=et=>{var ht;if(!e||!e.store)return 0;const{treeData:Mt}=e.store.states;let ze=0;const Me=(ht=Mt.value[et])==null?void 0:ht.children;return Me&&(ze+=Me.length,Me.forEach(be=>{ze+=we(be)})),ze},ve=(et,ht)=>{const Mt={};return Hs(et).forEach(ze=>{I.value[ze.id]=ht,Mt[ze.columnKey||ze.id]=ht}),Mt},xe=(et,ht,Mt)=>{M.value&&M.value!==et&&(M.value.order=null),M.value=et,L.value=ht,N.value=Mt},je=()=>{let et=p(i);Object.keys(I.value).forEach(ht=>{const Mt=I.value[ht];if(!Mt||Mt.length===0)return;const ze=$7({columns:c.value},ht);ze&&ze.filterMethod&&(et=et.filter(Me=>Mt.some(be=>ze.filterMethod.call(null,be,Me,ze))))}),k.value=et},nt=()=>{var et;s.value=u3e((et=k.value)!=null?et:[],{sortingColumn:M.value,sortProp:L.value,sortOrder:N.value})},ue=(et=void 0)=>{et!=null&&et.filter||je(),nt()},j=et=>{const{tableHeaderRef:ht}=e.refs;if(!ht)return;const Mt=Object.assign({},ht.filterPanels),ze=Object.keys(Mt);if(ze.length)if(kt(et)&&(et=[et]),rt(et)){const Me=et.map(be=>e3e({columns:c.value},be));ze.forEach(be=>{const Ve=Me.find(mt=>mt.id===be);Ve&&(Ve.filteredValue=[])}),e.store.commit("filterChange",{column:Me,values:[],silent:!0,multi:!0})}else ze.forEach(Me=>{const be=c.value.find(Ve=>Ve.id===Me);be&&(be.filteredValue=[])}),I.value={},e.store.commit("filterChange",{column:{},values:[],silent:!0})},he=()=>{M.value&&(xe(null,null,null),e.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:K,toggleRowExpansion:Fe,updateExpandRows:Oe,states:Re,isRowExpanded:te}=a3e({data:s,rowKey:r}),{updateTreeExpandKeys:oe,toggleTreeExpansion:Ee,updateTreeData:J,updateKeyChildren:Q,loadOrToggle:_e,states:ie}=c3e({data:s,rowKey:r}),{updateCurrentRowData:Te,updateCurrentRow:We,setCurrentRowKey:ut,states:lt}=l3e({data:s,rowKey:r});return{assertRowKey:X,updateColumns:$,scheduleLayout:O,isSelected:z,clearSelection:re,cleanSelection:q,getSelectionRows:le,toggleRowSelection:fe,_toggleAllSelection:se,toggleAllSelection:null,updateAllSelected:ye,updateFilters:ve,updateCurrentRow:We,updateSort:xe,execFilter:je,execSort:nt,execQuery:ue,clearFilter:j,clearSort:he,toggleRowExpansion:Fe,setExpandRowKeysAdapter:et=>{K(et),oe(et)},setCurrentRowKey:ut,toggleRowExpansionAdapter:(et,ht)=>{c.value.some(({type:ze})=>ze==="expand")?Fe(et,ht):Ee(et,ht)},isRowExpanded:te,updateExpandRows:Oe,updateCurrentRowData:Te,loadOrToggle:_e,updateTreeData:J,updateKeyChildren:Q,states:{tableSize:n,rowKey:r,data:s,_data:i,isComplex:o,_columns:a,originColumns:l,columns:c,fixedColumns:u,rightFixedColumns:d,leafColumns:h,fixedLeafColumns:f,rightFixedLeafColumns:m,updateOrderFns:v,leafColumnsLength:y,fixedLeafColumnsLength:g,rightFixedLeafColumnsLength:S,isAllSelected:_,selection:w,reserveSelection:E,selectOnIndeterminate:C,selectable:T,filters:I,filteredData:k,sortingColumn:M,sortProp:L,sortOrder:N,hoverRow:G,...Re,...ie,...lt}}}function SE(t,e){return t.map(n=>{var r;return n.id===e.id?e:((r=n.children)!=null&&r.length&&(n.children=SE(n.children,e)),n)})}function EE(t){t.forEach(e=>{var n,r;e.no=(n=e.getColumnIndex)==null?void 0:n.call(e),(r=e.children)!=null&&r.length&&EE(e.children)}),t.sort((e,n)=>e.no-n.no)}function h3e(){const t=tn(),e=d3e();return{ns:Qe("table"),...e,mutations:{setData(o,a){const l=p(o._data)!==a;o.data.value=a,o._data.value=a,t.store.execQuery(),t.store.updateCurrentRowData(),t.store.updateExpandRows(),t.store.updateTreeData(t.store.states.defaultExpandAll.value),p(o.reserveSelection)?t.store.assertRowKey():l?t.store.clearSelection():t.store.cleanSelection(),t.store.updateAllSelected(),t.$ready&&t.store.scheduleLayout()},insertColumn(o,a,l,c){var u;const d=p(o._columns);let h=[];l?(l&&!l.children&&(l.children=[]),(u=l.children)==null||u.push(a),h=SE(d,l)):(d.push(a),h=d),EE(h),o._columns.value=h,o.updateOrderFns.push(c),a.type==="selection"&&(o.selectable.value=a.selectable,o.reserveSelection.value=a.reserveSelection),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},updateColumnOrder(o,a){var l;((l=a.getColumnIndex)==null?void 0:l.call(a))!==a.no&&(EE(o._columns.value),t.$ready&&t.store.updateColumns())},removeColumn(o,a,l,c){var u;const d=p(o._columns)||[];if(l)(u=l.children)==null||u.splice(l.children.findIndex(f=>f.id===a.id),1),Tt(()=>{var f;((f=l.children)==null?void 0:f.length)===0&&delete l.children}),o._columns.value=SE(d,l);else{const f=d.indexOf(a);f>-1&&(d.splice(f,1),o._columns.value=d)}const h=o.updateOrderFns.indexOf(c);h>-1&&o.updateOrderFns.splice(h,1),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},sort(o,a){const{prop:l,order:c,init:u}=a;if(l){const d=p(o.columns).find(h=>h.property===l);d&&(d.order=c,t.store.updateSort(d,l,c),t.store.commit("changeSortCondition",{init:u}))}},changeSortCondition(o,a){const{sortingColumn:l,sortProp:c,sortOrder:u}=o,d=p(l),h=p(c),f=p(u);yv(f)&&(o.sortingColumn.value=null,o.sortProp.value=null);const m={filter:!0};t.store.execQuery(m),(!a||!(a.silent||a.init))&&t.emit("sort-change",{column:d,prop:h,order:f}),t.store.updateTableScrollY()},filterChange(o,a){const{column:l,values:c,silent:u}=a,d=t.store.updateFilters(l,c);t.store.execQuery(),u||t.emit("filter-change",d),t.store.updateTableScrollY()},toggleAllSelection(){var o,a;(a=(o=t.store).toggleAllSelection)==null||a.call(o)},rowSelectedChanged(o,a){t.store.toggleRowSelection(a),t.store.updateAllSelected()},setHoverRow(o,a){o.hoverRow.value=a},setCurrentRow(o,a){t.store.updateCurrentRow(a)}},commit:function(o,...a){const l=t.store.mutations;if(l[o])l[o].apply(t,[t.store.states,...a]);else throw new Error(`Action not found: ${o}`)},updateTableScrollY:function(){Tt(()=>t.layout.updateScrollY.apply(t.layout))}}}const HM={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"},"treeProps.checkStrictly":{key:"checkStrictly",default:!1}};function f3e(t,e){if(!t)throw new Error("Table is required.");const n=h3e();return n.toggleAllSelection=mo(n._toggleAllSelection,10),Object.keys(HM).forEach(r=>{W7(j7(e,r),r,n)}),p3e(n,e),n}function p3e(t,e){Object.keys(HM).forEach(n=>{Be(()=>j7(e,n),r=>{W7(r,n,t)})})}function W7(t,e,n){let r=t,s=HM[e];un(s)&&(r=r||s.default,s=s.key),n.states[s].value=r}function j7(t,e){if(e.includes(".")){const n=e.split(".");let r=t;return n.forEach(s=>{r=r[s]}),r}else return t[e]}class m3e{constructor(e){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=H(null),this.scrollX=H(!1),this.scrollY=H(!1),this.bodyWidth=H(null),this.fixedWidth=H(null),this.rightFixedWidth=H(null),this.gutterWidth=0;for(const n in e)Kn(e,n)&&(yr(this[n])?this[n].value=e[n]:this[n]=e[n]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){const e=this.height.value;if(yv(e))return!1;const n=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(n!=null&&n.wrapRef)){let r=!0;const s=this.scrollY.value;return r=n.wrapRef.scrollHeight>n.wrapRef.clientHeight,this.scrollY.value=r,s!==r}return!1}setHeight(e,n="height"){if(!Vn)return;const r=this.table.vnode.el;if(e=n3e(e),this.height.value=Number(e),!r&&(e||e===0)){Tt(()=>this.setHeight(e,n));return}r&&Ft(e)?(r.style[n]=`${e}px`,this.updateElsHeight()):r&&kt(e)&&(r.style[n]=e,this.updateElsHeight())}setMaxHeight(e){this.setHeight(e,"max-height")}getFlattenColumns(){const e=[];return this.table.store.states.columns.value.forEach(r=>{r.isColumnGroup?e.push.apply(e,r.columns):e.push(r)}),e}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(e){if(!e)return!0;let n=e;for(;n.tagName!=="DIV";){if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}updateColumnsWidth(){var e;if(!Vn)return;const n=this.fit,r=(e=this.table.vnode.el)==null?void 0:e.clientWidth;let s=0;const i=this.getFlattenColumns(),o=i.filter(c=>!Ft(c.width));if(i.forEach(c=>{Ft(c.width)&&c.realWidth&&(c.realWidth=null)}),o.length>0&&n){if(i.forEach(c=>{s+=Number(c.width||c.minWidth||80)}),s<=r){this.scrollX.value=!1;const c=r-s;if(o.length===1)o[0].realWidth=Number(o[0].minWidth||80)+c;else{const u=o.reduce((f,m)=>f+Number(m.minWidth||80),0),d=c/u;let h=0;o.forEach((f,m)=>{if(m===0)return;const v=Math.floor(Number(f.minWidth||80)*d);h+=v,f.realWidth=Number(f.minWidth||80)+v}),o[0].realWidth=Number(o[0].minWidth||80)+c-h}}else this.scrollX.value=!0,o.forEach(c=>{c.realWidth=Number(c.minWidth)});this.bodyWidth.value=Math.max(s,r),this.table.state.resizeState.value.width=this.bodyWidth.value}else i.forEach(c=>{!c.width&&!c.minWidth?c.realWidth=80:c.realWidth=Number(c.width||c.minWidth),s+=c.realWidth}),this.scrollX.value=s>r,this.bodyWidth.value=s;const a=this.store.states.fixedColumns.value;if(a.length>0){let c=0;a.forEach(u=>{c+=Number(u.realWidth||u.width)}),this.fixedWidth.value=c}const l=this.store.states.rightFixedColumns.value;if(l.length>0){let c=0;l.forEach(u=>{c+=Number(u.realWidth||u.width)}),this.rightFixedWidth.value=c}this.notifyObservers("columns")}addObserver(e){this.observers.push(e)}removeObserver(e){const n=this.observers.indexOf(e);n!==-1&&this.observers.splice(n,1)}notifyObservers(e){this.observers.forEach(r=>{var s,i;switch(e){case"columns":(s=r.state)==null||s.onColumnsChange(this);break;case"scrollable":(i=r.state)==null||i.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${e}.`)}})}}const{CheckboxGroup:g3e}=oa,v3e=de({name:"ElTableFilterPanel",components:{ElCheckbox:oa,ElCheckboxGroup:g3e,ElScrollbar:$a,ElTooltip:ri,ElIcon:Et,ArrowDown:Ll,ArrowUp:p_},directives:{ClickOutside:Tc},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function},appendTo:ss.appendTo},setup(t){const e=tn(),{t:n}=zn(),r=Qe("table-filter"),s=e==null?void 0:e.parent;t.column&&!s.filterPanels.value[t.column.id]&&(s.filterPanels.value[t.column.id]=e);const i=H(!1),o=H(null),a=R(()=>t.column&&t.column.filters),l=R(()=>t.column&&t.column.filterClassName?`${r.b()} ${t.column.filterClassName}`:r.b()),c=R({get:()=>{var E;return(((E=t.column)==null?void 0:E.filteredValue)||[])[0]},set:E=>{u.value&&(ho(E)?u.value.splice(0,1):u.value.splice(0,1,E))}}),u=R({get(){return t.column?t.column.filteredValue||[]:[]},set(E){var C;t.column&&((C=t.upDataColumn)==null||C.call(t,"filteredValue",E))}}),d=R(()=>t.column?t.column.filterMultiple:!0),h=E=>E.value===c.value,f=()=>{i.value=!1},m=E=>{E.stopPropagation(),i.value=!i.value},v=()=>{i.value=!1},y=()=>{_(u.value),f()},g=()=>{u.value=[],_(u.value),f()},S=E=>{c.value=E,ho(E)?_([]):_(u.value),f()},_=E=>{var C,T;(C=t.store)==null||C.commit("filterChange",{column:t.column,values:E}),(T=t.store)==null||T.updateAllSelected()};Be(i,E=>{var C;t.column&&((C=t.upDataColumn)==null||C.call(t,"filterOpened",E))},{immediate:!0});const w=R(()=>{var E,C;return(C=(E=o.value)==null?void 0:E.popperRef)==null?void 0:C.contentRef});return{tooltipVisible:i,multiple:d,filterClassName:l,filteredValue:u,filterValue:c,filters:a,handleConfirm:y,handleReset:g,handleSelect:S,isPropAbsent:ho,isActive:h,t:n,ns:r,showFilterPanel:m,hideFilterPanel:v,popperPaneRef:w,tooltip:o}}});function y3e(t,e,n,r,s,i){const o=Xt("el-checkbox"),a=Xt("el-checkbox-group"),l=Xt("el-scrollbar"),c=Xt("arrow-up"),u=Xt("arrow-down"),d=Xt("el-icon"),h=Xt("el-tooltip"),f=i_("click-outside");return D(),Le(h,{ref:"tooltip",visible:t.tooltipVisible,offset:0,placement:t.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":t.filterClassName,persistent:"","append-to":t.appendTo},{content:me(()=>[t.multiple?(D(),Z("div",{key:0},[ne("div",{class:U(t.ns.e("content"))},[ae(l,{"wrap-class":t.ns.e("wrap")},{default:me(()=>[ae(a,{modelValue:t.filteredValue,"onUpdate:modelValue":m=>t.filteredValue=m,class:U(t.ns.e("checkbox-group"))},{default:me(()=>[(D(!0),Z(xt,null,_n(t.filters,m=>(D(),Le(o,{key:m.value,value:m.value},{default:me(()=>[rn(tt(m.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"])]),_:1},8,["wrap-class"])],2),ne("div",{class:U(t.ns.e("bottom"))},[ne("button",{class:U({[t.ns.is("disabled")]:t.filteredValue.length===0}),disabled:t.filteredValue.length===0,type:"button",onClick:t.handleConfirm},tt(t.t("el.table.confirmFilter")),11,["disabled","onClick"]),ne("button",{type:"button",onClick:t.handleReset},tt(t.t("el.table.resetFilter")),9,["onClick"])],2)])):(D(),Z("ul",{key:1,class:U(t.ns.e("list"))},[ne("li",{class:U([t.ns.e("list-item"),{[t.ns.is("active")]:t.isPropAbsent(t.filterValue)}]),onClick:m=>t.handleSelect(null)},tt(t.t("el.table.clearFilter")),11,["onClick"]),(D(!0),Z(xt,null,_n(t.filters,m=>(D(),Z("li",{key:m.value,class:U([t.ns.e("list-item"),t.ns.is("active",t.isActive(m))]),label:m.value,onClick:v=>t.handleSelect(m.value)},tt(m.text),11,["label","onClick"]))),128))],2))]),default:me(()=>[cn((D(),Z("span",{class:U([`${t.ns.namespace.value}-table__column-filter-trigger`,`${t.ns.namespace.value}-none-outline`]),onClick:t.showFilterPanel},[ae(d,null,{default:me(()=>[Ae(t.$slots,"filter-icon",{},()=>{var m;return[(m=t.column)!=null&&m.filterOpened?(D(),Le(c,{key:0})):(D(),Le(u,{key:1}))]})]),_:3})],10,["onClick"])),[[f,t.hideFilterPanel,t.popperPaneRef]])]),_:3},8,["visible","placement","popper-class","append-to"])}var b3e=at(v3e,[["render",y3e],["__file","filter-panel.vue"]]);function GM(t){const e=tn();r_(()=>{n.value.addObserver(e)}),Zt(()=>{r(n.value),s(n.value)}),qa(()=>{r(n.value),s(n.value)}),yo(()=>{n.value.removeObserver(e)});const n=R(()=>{const i=t.layout;if(!i)throw new Error("Can not find table layout.");return i}),r=i=>{var o;const a=((o=t.vnode.el)==null?void 0:o.querySelectorAll("colgroup > col"))||[];if(!a.length)return;const l=i.getFlattenColumns(),c={};l.forEach(u=>{c[u.id]=u});for(let u=0,d=a.length;u<d;u++){const h=a[u],f=h.getAttribute("name"),m=c[f];m&&h.setAttribute("width",m.realWidth||m.width)}},s=i=>{var o,a;const l=((o=t.vnode.el)==null?void 0:o.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let u=0,d=l.length;u<d;u++)l[u].setAttribute("width",i.scrollY.value?i.gutterWidth:"0");const c=((a=t.vnode.el)==null?void 0:a.querySelectorAll("th.gutter"))||[];for(let u=0,d=c.length;u<d;u++){const h=c[u];h.style.width=i.scrollY.value?`${i.gutterWidth}px`:"0",h.style.display=i.scrollY.value?"":"none"}};return{tableLayout:n.value,onColumnsChange:r,onScrollableChange:s}}const Za=Symbol("ElTable");function _3e(t,e){const n=tn(),r=_t(Za),s=v=>{v.stopPropagation()},i=(v,y)=>{!y.filters&&y.sortable?m(v,y,!1):y.filterable&&!y.sortable&&s(v),r==null||r.emit("header-click",y,v)},o=(v,y)=>{r==null||r.emit("header-contextmenu",y,v)},a=H(null),l=H(!1),c=H(),u=(v,y)=>{var g,S;if(Vn&&!(y.children&&y.children.length>0)&&a.value&&t.border){l.value=!0;const _=r;e("set-drag-visible",!0);const w=_==null?void 0:_.vnode.el,E=w==null?void 0:w.getBoundingClientRect().left,C=(S=(g=n==null?void 0:n.vnode)==null?void 0:g.el)==null?void 0:S.querySelector(`th.${y.id}`),T=C.getBoundingClientRect(),I=T.left-E+30;Zo(C,"noclick"),c.value={startMouseLeft:v.clientX,startLeft:T.right-E,startColumnLeft:T.left-E,tableLeft:E};const k=_==null?void 0:_.refs.resizeProxy;k.style.left=`${c.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const M=N=>{const G=N.clientX-c.value.startMouseLeft,V=c.value.startLeft+G;k.style.left=`${Math.max(I,V)}px`},L=()=>{if(l.value){const{startColumnLeft:N,startLeft:G}=c.value,X=Number.parseInt(k.style.left,10)-N;y.width=y.realWidth=X,_==null||_.emit("header-dragend",y.width,G-N,y,v),requestAnimationFrame(()=>{t.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,a.value=null,c.value=void 0,e("set-drag-visible",!1)}document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",L),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{Mi(C,"noclick")},0)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",L)}},d=(v,y)=>{var g;if(y.children&&y.children.length>0)return;const S=v.target;if(!Ki(S))return;const _=S==null?void 0:S.closest("th");if(!(!y||!y.resizable||!_)&&!l.value&&t.border){const w=_.getBoundingClientRect(),E=document.body.style,C=((g=_.parentNode)==null?void 0:g.lastElementChild)===_,T=t.allowDragLastColumn||!C;w.width>12&&w.right-v.clientX<8&&T?(E.cursor="col-resize",ao(_,"is-sortable")&&(_.style.cursor="col-resize"),a.value=y):l.value||(E.cursor="",ao(_,"is-sortable")&&(_.style.cursor="pointer"),a.value=null)}},h=()=>{Vn&&(document.body.style.cursor="")},f=({order:v,sortOrders:y})=>{if(v==="")return y[0];const g=y.indexOf(v||null);return y[g>y.length-2?0:g+1]},m=(v,y,g)=>{var S;v.stopPropagation();const _=y.order===g?null:g||f(y),w=(S=v.target)==null?void 0:S.closest("th");if(w&&ao(w,"noclick")){Mi(w,"noclick");return}if(!y.sortable)return;const E=v.currentTarget;if(["ascending","descending"].some(M=>ao(E,M)&&!y.sortOrders.includes(M)))return;const C=t.store.states;let T=C.sortProp.value,I;const k=C.sortingColumn.value;(k!==y||k===y&&yv(k.order))&&(k&&(k.order=null),C.sortingColumn.value=y,T=y.property),_?I=y.order=_:I=y.order=null,C.sortProp.value=T,C.sortOrder.value=I,r==null||r.store.commit("changeSortCondition")};return{handleHeaderClick:i,handleHeaderContextMenu:o,handleMouseDown:u,handleMouseMove:d,handleMouseOut:h,handleSortClick:m,handleFilterClick:s}}function w3e(t){const e=_t(Za),n=Qe("table");return{getHeaderRowStyle:a=>{const l=e==null?void 0:e.props.headerRowStyle;return Lt(l)?l.call(null,{rowIndex:a}):l},getHeaderRowClass:a=>{const l=[],c=e==null?void 0:e.props.headerRowClassName;return kt(c)?l.push(c):Lt(c)&&l.push(c.call(null,{rowIndex:a})),l.join(" ")},getHeaderCellStyle:(a,l,c,u)=>{var d;let h=(d=e==null?void 0:e.props.headerCellStyle)!=null?d:{};Lt(h)&&(h=h.call(null,{rowIndex:a,columnIndex:l,row:c,column:u}));const f=VM(l,u.fixed,t.store,c);return Mp(f,"left"),Mp(f,"right"),Object.assign({},h,f)},getHeaderCellClass:(a,l,c,u)=>{const d=$M(n.b(),l,u.fixed,t.store,c),h=[u.id,u.order,u.headerAlign,u.className,u.labelClassName,...d];u.children||h.push("is-leaf"),u.sortable&&h.push("is-sortable");const f=e==null?void 0:e.props.headerCellClassName;return kt(f)?h.push(f):Lt(f)&&h.push(f.call(null,{rowIndex:a,columnIndex:l,row:c,column:u})),h.push(n.e("cell")),h.filter(m=>!!m).join(" ")}}}const K7=t=>{const e=[];return t.forEach(n=>{n.children?(e.push(n),e.push.apply(e,K7(n.children))):e.push(n)}),e},q7=t=>{let e=1;const n=(i,o)=>{if(o&&(i.level=o.level+1,e<i.level&&(e=i.level)),i.children){let a=0;i.children.forEach(l=>{n(l,i),a+=l.colSpan}),i.colSpan=a}else i.colSpan=1};t.forEach(i=>{i.level=1,n(i,void 0)});const r=[];for(let i=0;i<e;i++)r.push([]);return K7(t).forEach(i=>{i.children?(i.rowSpan=1,i.children.forEach(o=>o.isSubColumn=!0)):i.rowSpan=e-i.level+1,r[i.level-1].push(i)}),r};function x3e(t){const e=_t(Za),n=R(()=>q7(t.store.states.originColumns.value));return{isGroup:R(()=>{const i=n.value.length>1;return i&&e&&(e.state.isGroup.value=!0),i}),toggleAllSelection:i=>{i.stopPropagation(),e==null||e.store.commit("toggleAllSelection")},columnRows:n}}var S3e=de({name:"ElTableHeader",components:{ElCheckbox:oa},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})},appendFilterPanelTo:{type:String},allowDragLastColumn:{type:Boolean}},setup(t,{emit:e}){const n=tn(),r=_t(Za),s=Qe("table"),i=H({}),{onColumnsChange:o,onScrollableChange:a}=GM(r),l=(r==null?void 0:r.props.tableLayout)==="auto",c=Ln(new Map),u=H();let d;const h=()=>{d=setTimeout(()=>{c.size>0&&(c.forEach((L,N)=>{const G=u.value.querySelector(`.${N.replace(/\s/g,".")}`);if(G){const V=G.getBoundingClientRect().width;L.width=V||L.width}}),c.clear())})};Be(c,h),Xn(()=>{d&&(clearTimeout(d),d=void 0)}),Zt(async()=>{await Tt(),await Tt();const{prop:L,order:N}=t.defaultSort;r==null||r.store.commit("sort",{prop:L,order:N,init:!0}),h()});const{handleHeaderClick:f,handleHeaderContextMenu:m,handleMouseDown:v,handleMouseMove:y,handleMouseOut:g,handleSortClick:S,handleFilterClick:_}=_3e(t,e),{getHeaderRowStyle:w,getHeaderRowClass:E,getHeaderCellStyle:C,getHeaderCellClass:T}=w3e(t),{isGroup:I,toggleAllSelection:k,columnRows:M}=x3e(t);return n.state={onColumnsChange:o,onScrollableChange:a},n.filterPanels=i,{ns:s,filterPanels:i,onColumnsChange:o,onScrollableChange:a,columnRows:M,getHeaderRowClass:E,getHeaderRowStyle:w,getHeaderCellClass:T,getHeaderCellStyle:C,handleHeaderClick:f,handleHeaderContextMenu:m,handleMouseDown:v,handleMouseMove:y,handleMouseOut:g,handleSortClick:S,handleFilterClick:_,isGroup:I,toggleAllSelection:k,saveIndexSelection:c,isTableLayoutAuto:l,theadRef:u,updateFixedColumnStyle:h}},render(){const{ns:t,isGroup:e,columnRows:n,getHeaderCellStyle:r,getHeaderCellClass:s,getHeaderRowClass:i,getHeaderRowStyle:o,handleHeaderClick:a,handleHeaderContextMenu:l,handleMouseDown:c,handleMouseMove:u,handleSortClick:d,handleMouseOut:h,store:f,$parent:m,saveIndexSelection:v,isTableLayoutAuto:y}=this;let g=1;return Ut("thead",{ref:"theadRef",class:{[t.is("group")]:e}},n.map((S,_)=>Ut("tr",{class:i(_),key:_,style:o(_)},S.map((w,E)=>{w.rowSpan>g&&(g=w.rowSpan);const C=s(_,E,S,w);return y&&w.fixed&&v.set(C,w),Ut("th",{class:C,colspan:w.colSpan,key:`${w.id}-thead`,rowspan:w.rowSpan,style:r(_,E,S,w),onClick:T=>{var I;(I=T.currentTarget)!=null&&I.classList.contains("noclick")||a(T,w)},onContextmenu:T=>l(T,w),onMousedown:T=>c(T,w),onMousemove:T=>u(T,w),onMouseout:h},[Ut("div",{class:["cell",w.filteredValue&&w.filteredValue.length>0?"highlight":""]},[w.renderHeader?w.renderHeader({column:w,$index:E,store:f,_self:m}):w.label,w.sortable&&Ut("span",{onClick:T=>d(T,w),class:"caret-wrapper"},[Ut("i",{onClick:T=>d(T,w,"ascending"),class:"sort-caret ascending"}),Ut("i",{onClick:T=>d(T,w,"descending"),class:"sort-caret descending"})]),w.filterable&&Ut(b3e,{store:f,placement:w.filterPlacement||"bottom-start",appendTo:m==null?void 0:m.appendFilterPanelTo,column:w,upDataColumn:(T,I)=>{w[T]=I}},{"filter-icon":()=>w.renderFilterIcon?w.renderFilterIcon({filterOpened:w.filterOpened}):null})])])}))))}});function zx(t,e,n=.03){return t-e>n}function E3e(t){const e=_t(Za),n=H(""),r=H(Ut("div")),s=(m,v,y)=>{var g,S,_;const w=e,E=Ux(m);let C=null;const T=(g=w==null?void 0:w.vnode.el)==null?void 0:g.dataset.prefix;E&&(C=Y4({columns:(_=(S=t.store)==null?void 0:S.states.columns.value)!=null?_:[]},E,T),C&&(w==null||w.emit(`cell-${y}`,v,C,E,m))),w==null||w.emit(`row-${y}`,v,C,m)},i=(m,v)=>{s(m,v,"dblclick")},o=(m,v)=>{var y;(y=t.store)==null||y.commit("setCurrentRow",v),s(m,v,"click")},a=(m,v)=>{s(m,v,"contextmenu")},l=mo(m=>{var v;(v=t.store)==null||v.commit("setHoverRow",m)},30),c=mo(()=>{var m;(m=t.store)==null||m.commit("setHoverRow",null)},30),u=m=>{const v=window.getComputedStyle(m,null),y=Number.parseInt(v.paddingLeft,10)||0,g=Number.parseInt(v.paddingRight,10)||0,S=Number.parseInt(v.paddingTop,10)||0,_=Number.parseInt(v.paddingBottom,10)||0;return{left:y,right:g,top:S,bottom:_}},d=(m,v,y)=>{var g;let S=(g=v==null?void 0:v.target)==null?void 0:g.parentNode;for(;m>1&&(S=S==null?void 0:S.nextSibling,!(!S||S.nodeName!=="TR"));)y(S,"hover-row hover-fixed-row"),m--};return{handleDoubleClick:i,handleClick:o,handleContextMenu:a,handleMouseEnter:l,handleMouseLeave:c,handleCellMouseEnter:(m,v,y)=>{var g,S,_,w,E,C;if(!e)return;const T=e,I=Ux(m),k=(g=T==null?void 0:T.vnode.el)==null?void 0:g.dataset.prefix;let M=null;if(I){if(M=Y4({columns:(_=(S=t.store)==null?void 0:S.states.columns.value)!=null?_:[]},I,k),!M)return;I.rowSpan>1&&d(I.rowSpan,m,Zo);const fe=T.hoverState={cell:I,column:M,row:v};T==null||T.emit("cell-mouse-enter",fe.row,fe.column,fe.cell,m)}if(!y)return;const L=m.target.querySelector(".cell");if(!(ao(L,`${k}-tooltip`)&&L.childNodes.length))return;const N=document.createRange();N.setStart(L,0),N.setEnd(L,L.childNodes.length);const{width:G,height:V}=N.getBoundingClientRect(),{width:X,height:F}=L.getBoundingClientRect(),{top:$,left:O,right:z,bottom:re}=u(L),q=O+z,le=$+re;zx(G+q,X)||zx(V+le,F)||zx(L.scrollWidth,X)?o3e(y,(w=(I==null?void 0:I.innerText)||(I==null?void 0:I.textContent))!=null?w:"",v,M,I,T):((E=io)==null?void 0:E.trigger)===I&&((C=io)==null||C())},handleCellMouseLeave:m=>{const v=Ux(m);if(!v)return;v.rowSpan>1&&d(v.rowSpan,m,Mi);const y=e==null?void 0:e.hoverState;e==null||e.emit("cell-mouse-leave",y==null?void 0:y.row,y==null?void 0:y.column,y==null?void 0:y.cell,m)},tooltipContent:n,tooltipTrigger:r}}function C3e(t){const e=_t(Za),n=Qe("table");return{getRowStyle:(c,u)=>{const d=e==null?void 0:e.props.rowStyle;return Lt(d)?d.call(null,{row:c,rowIndex:u}):d||null},getRowClass:(c,u)=>{var d;const h=[n.e("row")];e!=null&&e.props.highlightCurrentRow&&c===((d=t.store)==null?void 0:d.states.currentRow.value)&&h.push("current-row"),t.stripe&&u%2===1&&h.push(n.em("row","striped"));const f=e==null?void 0:e.props.rowClassName;return kt(f)?h.push(f):Lt(f)&&h.push(f.call(null,{row:c,rowIndex:u})),h},getCellStyle:(c,u,d,h)=>{const f=e==null?void 0:e.props.cellStyle;let m=f??{};Lt(f)&&(m=f.call(null,{rowIndex:c,columnIndex:u,row:d,column:h}));const v=VM(u,t==null?void 0:t.fixed,t.store);return Mp(v,"left"),Mp(v,"right"),Object.assign({},m,v)},getCellClass:(c,u,d,h,f)=>{const m=$M(n.b(),u,t==null?void 0:t.fixed,t.store,void 0,f),v=[h.id,h.align,h.className,...m],y=e==null?void 0:e.props.cellClassName;return kt(y)?v.push(y):Lt(y)&&v.push(y.call(null,{rowIndex:c,columnIndex:u,row:d,column:h})),v.push(n.e("cell")),v.filter(g=>!!g).join(" ")},getSpan:(c,u,d,h)=>{let f=1,m=1;const v=e==null?void 0:e.props.spanMethod;if(Lt(v)){const y=v({row:c,column:u,rowIndex:d,columnIndex:h});rt(y)?(f=y[0],m=y[1]):un(y)&&(f=y.rowspan,m=y.colspan)}return{rowspan:f,colspan:m}},getColspanRealWidth:(c,u,d)=>{if(u<1)return c[d].realWidth;const h=c.map(({realWidth:f,width:m})=>f||m).slice(d,d+u);return Number(h.reduce((f,m)=>Number(f)+Number(m),-1))}}}const T3e=de({name:"TableTdWrapper"}),M3e=de({...T3e,props:{colspan:{type:Number,default:1},rowspan:{type:Number,default:1}},setup(t){return(e,n)=>(D(),Z("td",{colspan:t.colspan,rowspan:t.rowspan},[Ae(e.$slots,"default")],8,["colspan","rowspan"]))}});var A3e=at(M3e,[["__file","td-wrapper.vue"]]);function k3e(t){const e=_t(Za),n=Qe("table"),{handleDoubleClick:r,handleClick:s,handleContextMenu:i,handleMouseEnter:o,handleMouseLeave:a,handleCellMouseEnter:l,handleCellMouseLeave:c,tooltipContent:u,tooltipTrigger:d}=E3e(t),{getRowStyle:h,getRowClass:f,getCellStyle:m,getCellClass:v,getSpan:y,getColspanRealWidth:g}=C3e(t),S=R(()=>{var T;return(T=t.store)==null?void 0:T.states.columns.value.findIndex(({type:I})=>I==="default")}),_=(T,I)=>{var k;const M=(k=e==null?void 0:e.props)==null?void 0:k.rowKey;return M?li(T,M):I},w=(T,I,k,M=!1)=>{const{tooltipEffect:L,tooltipOptions:N,store:G}=t,{indent:V,columns:X}=G.states,F=f(T,I);let $=!0;return k&&(F.push(n.em("row",`level-${k.level}`)),$=!!k.display),Ut("tr",{style:[$?null:{display:"none"},h(T,I)],class:F,key:_(T,I),onDblclick:z=>r(z,T),onClick:z=>s(z,T),onContextmenu:z=>i(z,T),onMouseenter:()=>o(I),onMouseleave:a},X.value.map((z,re)=>{const{rowspan:q,colspan:le}=y(T,z,I,re);if(!q||!le)return null;const fe=Object.assign({},z);fe.realWidth=g(X.value,le,re);const se={store:G,_self:t.context||e,column:fe,row:T,$index:I,cellIndex:re,expanded:M};re===S.value&&k&&(se.treeNode={indent:k.level&&k.level*V.value,level:k.level},nr(k.expanded)&&(se.treeNode.expanded=k.expanded,"loading"in k&&(se.treeNode.loading=k.loading),"noLazyChildren"in k&&(se.treeNode.noLazyChildren=k.noLazyChildren)));const ye=`${_(T,I)},${re}`,we=fe.columnKey||fe.rawColumnKey||"",ve=z.showOverflowTooltip&&h5({effect:L},N,z.showOverflowTooltip);return Ut(A3e,{style:m(I,re,T,z),class:v(I,re,T,z,le-1),key:`${we}${ye}`,rowspan:q,colspan:le,onMouseenter:xe=>l(xe,T,ve),onMouseleave:c},{default:()=>E(re,z,se)})}))},E=(T,I,k)=>I.renderCell(k);return{wrappedRowRender:(T,I)=>{const k=t.store,{isRowExpanded:M,assertRowKey:L}=k,{treeData:N,lazyTreeNodeMap:G,childrenColumnName:V,rowKey:X}=k.states,F=k.states.columns.value;if(F.some(({type:O})=>O==="expand")){const O=M(T),z=w(T,I,void 0,O),re=e==null?void 0:e.renderExpanded;if(!re)return console.error("[Element Error]renderExpanded is required."),z;const q=[[z]];return(e.props.preserveExpandedContent||O)&&q[0].push(Ut("tr",{key:`expanded-row__${z.key}`,style:{display:O?"":"none"}},[Ut("td",{colspan:F.length,class:`${n.e("cell")} ${n.e("expanded-cell")}`},[re({row:T,$index:I,store:k,expanded:O})])])),q}else if(Object.keys(N.value).length){L();const O=li(T,X.value);let z=N.value[O],re=null;z&&(re={expanded:z.expanded,level:z.level,display:!0,noLazyChildren:void 0,loading:void 0},nr(z.lazy)&&(re&&nr(z.loaded)&&z.loaded&&(re.noLazyChildren=!(z.children&&z.children.length)),re.loading=z.loading));const q=[w(T,I,re??void 0)];if(z){let le=0;const fe=(ye,we)=>{ye&&ye.length&&we&&ye.forEach(ve=>{const xe={display:we.display&&we.expanded,level:we.level+1,expanded:!1,noLazyChildren:!1,loading:!1},je=li(ve,X.value);if(ho(je))throw new Error("For nested data item, row-key is required.");if(z={...N.value[je]},z&&(xe.expanded=z.expanded,z.level=z.level||xe.level,z.display=!!(z.expanded&&xe.display),nr(z.lazy)&&(nr(z.loaded)&&z.loaded&&(xe.noLazyChildren=!(z.children&&z.children.length)),xe.loading=z.loading)),le++,q.push(w(ve,I+le,xe)),z){const nt=G.value[je]||ve[V.value];fe(nt,z)}})};z.display=!0;const se=G.value[O]||T[V.value];fe(se,z)}return q}else return w(T,I,void 0)},tooltipContent:u,tooltipTrigger:d}}const I3e={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var P3e=de({name:"ElTableBody",props:I3e,setup(t){var e;const n=tn(),r=_t(Za),s=Qe("table"),{wrappedRowRender:i,tooltipContent:o,tooltipTrigger:a}=k3e(t),{onColumnsChange:l,onScrollableChange:c}=GM(r),u=[];return Be((e=t.store)==null?void 0:e.states.hoverRow,(d,h)=>{var f,m;const v=n==null?void 0:n.vnode.el,y=Array.from((v==null?void 0:v.children)||[]).filter(_=>_==null?void 0:_.classList.contains(`${s.e("row")}`));let g=d;const S=(f=y[g])==null?void 0:f.childNodes;if(S!=null&&S.length){let _=0;Array.from(S).reduce((E,C,T)=>{var I,k;return((I=S[T])==null?void 0:I.colSpan)>1&&(_=(k=S[T])==null?void 0:k.colSpan),C.nodeName!=="TD"&&_===0&&E.push(T),_>0&&_--,E},[]).forEach(E=>{var C;for(g=d;g>0;){const T=(C=y[g-1])==null?void 0:C.childNodes;if(T[E]&&T[E].nodeName==="TD"&&T[E].rowSpan>1){Zo(T[E],"hover-cell"),u.push(T[E]);break}g--}})}else u.forEach(_=>Mi(_,"hover-cell")),u.length=0;!((m=t.store)!=null&&m.states.isComplex.value)||!Vn||Uu(()=>{const _=y[h],w=y[d];_&&!_.classList.contains("hover-fixed-row")&&Mi(_,"hover-row"),w&&Zo(w,"hover-row")})}),yo(()=>{var d;(d=io)==null||d()}),{ns:s,onColumnsChange:l,onScrollableChange:c,wrappedRowRender:i,tooltipContent:o,tooltipTrigger:a}},render(){const{wrappedRowRender:t,store:e}=this,n=(e==null?void 0:e.states.data.value)||[];return Ut("tbody",{tabIndex:-1},[n.reduce((r,s)=>r.concat(t(s,r.length)),[])])}});function R3e(){const t=_t(Za),e=t==null?void 0:t.store,n=R(()=>{var a;return(a=e==null?void 0:e.states.fixedLeafColumnsLength.value)!=null?a:0}),r=R(()=>{var a;return(a=e==null?void 0:e.states.rightFixedColumns.value.length)!=null?a:0}),s=R(()=>{var a;return(a=e==null?void 0:e.states.columns.value.length)!=null?a:0}),i=R(()=>{var a;return(a=e==null?void 0:e.states.fixedColumns.value.length)!=null?a:0}),o=R(()=>{var a;return(a=e==null?void 0:e.states.rightFixedColumns.value.length)!=null?a:0});return{leftFixedLeafCount:n,rightFixedLeafCount:r,columnsCount:s,leftFixedCount:i,rightFixedCount:o,columns:R(()=>{var a;return(a=e==null?void 0:e.states.columns.value)!=null?a:[]})}}function L3e(t){const{columns:e}=R3e(),n=Qe("table");return{getCellClasses:(i,o)=>{const a=i[o],l=[n.e("cell"),a.id,a.align,a.labelClassName,...$M(n.b(),o,a.fixed,t.store)];return a.className&&l.push(a.className),a.children||l.push(n.is("leaf")),l},getCellStyles:(i,o)=>{const a=VM(o,i.fixed,t.store);return Mp(a,"left"),Mp(a,"right"),a},columns:e}}var O3e=de({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t){const e=_t(Za),n=Qe("table"),{getCellClasses:r,getCellStyles:s,columns:i}=L3e(t),{onScrollableChange:o,onColumnsChange:a}=GM(e);return{ns:n,onScrollableChange:o,onColumnsChange:a,getCellClasses:r,getCellStyles:s,columns:i}},render(){const{columns:t,getCellStyles:e,getCellClasses:n,summaryMethod:r,sumText:s}=this,i=this.store.states.data.value;let o=[];return r?o=r({columns:t,data:i}):t.forEach((a,l)=>{if(l===0){o[l]=s;return}const c=i.map(f=>Number(f[a.property])),u=[];let d=!0;c.forEach(f=>{if(!Number.isNaN(+f)){d=!1;const m=`${f}`.split(".")[1];u.push(m?m.length:0)}});const h=Math.max.apply(null,u);d?o[l]="":o[l]=c.reduce((f,m)=>{const v=Number(m);return Number.isNaN(+v)?f:Number.parseFloat((f+m).toFixed(Math.min(h,20)))},0)}),Ut(Ut("tfoot",[Ut("tr",{},[...t.map((a,l)=>Ut("td",{key:l,colspan:a.colSpan,rowspan:a.rowSpan,class:n(t,l),style:e(a,l)},[Ut("div",{class:["cell",a.labelClassName]},[o[l]])]))])]))}});function N3e(t){return{setCurrentRow:d=>{t.commit("setCurrentRow",d)},getSelectionRows:()=>t.getSelectionRows(),toggleRowSelection:(d,h,f=!0)=>{t.toggleRowSelection(d,h,!1,f),t.updateAllSelected()},clearSelection:()=>{t.clearSelection()},clearFilter:d=>{t.clearFilter(d)},toggleAllSelection:()=>{t.commit("toggleAllSelection")},toggleRowExpansion:(d,h)=>{t.toggleRowExpansionAdapter(d,h)},clearSort:()=>{t.clearSort()},sort:(d,h)=>{t.commit("sort",{prop:d,order:h})},updateKeyChildren:(d,h)=>{t.updateKeyChildren(d,h)}}}function D3e(t,e,n,r){const s=H(!1),i=H(null),o=H(!1),a=$=>{o.value=$},l=H({width:null,height:null,headerHeight:null}),c=H(!1),u={display:"inline-block",verticalAlign:"middle"},d=H(),h=H(0),f=H(0),m=H(0),v=H(0),y=H(0);ui(()=>{var $;e.setHeight(($=t.height)!=null?$:null)}),ui(()=>{var $;e.setMaxHeight(($=t.maxHeight)!=null?$:null)}),Be(()=>[t.currentRowKey,n.states.rowKey],([$,O])=>{!p(O)||!p($)||n.setCurrentRowKey(`${$}`)},{immediate:!0}),Be(()=>t.data,$=>{r.store.commit("setData",$)},{immediate:!0,deep:!0}),ui(()=>{t.expandRowKeys&&n.setExpandRowKeysAdapter(t.expandRowKeys)});const g=()=>{r.store.commit("setHoverRow",null),r.hoverState&&(r.hoverState=null)},S=($,O)=>{const{pixelX:z,pixelY:re}=O;Math.abs(z)>=Math.abs(re)&&(r.refs.bodyWrapper.scrollLeft+=O.pixelX/5)},_=R(()=>t.height||t.maxHeight||n.states.fixedColumns.value.length>0||n.states.rightFixedColumns.value.length>0),w=R(()=>({width:e.bodyWidth.value?`${e.bodyWidth.value}px`:""})),E=()=>{_.value&&e.updateElsHeight(),e.updateColumnsWidth(),!(typeof window>"u")&&requestAnimationFrame(k)};Zt(async()=>{await Tt(),n.updateColumns(),M(),requestAnimationFrame(E);const $=r.vnode.el,O=r.refs.headerWrapper;t.flexible&&$&&$.parentElement&&($.parentElement.style.minWidth="0"),l.value={width:d.value=$.offsetWidth,height:$.offsetHeight,headerHeight:t.showHeader&&O?O.offsetHeight:null},n.states.columns.value.forEach(z=>{z.filteredValue&&z.filteredValue.length&&r.store.commit("filterChange",{column:z,values:z.filteredValue,silent:!0})}),r.$ready=!0});const C=($,O)=>{if(!$)return;const z=Array.from($.classList).filter(re=>!re.startsWith("is-scrolling-"));z.push(e.scrollX.value?O:"is-scrolling-none"),$.className=z.join(" ")},T=$=>{const{tableWrapper:O}=r.refs;C(O,$)},I=$=>{const{tableWrapper:O}=r.refs;return!!(O&&O.classList.contains($))},k=function(){if(!r.refs.scrollBarRef)return;if(!e.scrollX.value){const se="is-scrolling-none";I(se)||T(se);return}const $=r.refs.scrollBarRef.wrapRef;if(!$)return;const{scrollLeft:O,offsetWidth:z,scrollWidth:re}=$,{headerWrapper:q,footerWrapper:le}=r.refs;q&&(q.scrollLeft=O),le&&(le.scrollLeft=O);const fe=re-z-1;O>=fe?T("is-scrolling-right"):T(O===0?"is-scrolling-left":"is-scrolling-middle")},M=()=>{r.refs.scrollBarRef&&(r.refs.scrollBarRef.wrapRef&&pr(r.refs.scrollBarRef.wrapRef,"scroll",k,{passive:!0}),t.fit?Ir(r.vnode.el,L):pr(window,"resize",L),Ir(r.refs.bodyWrapper,()=>{var $,O;L(),(O=($=r.refs)==null?void 0:$.scrollBarRef)==null||O.update()}))},L=()=>{var $,O,z,re;const q=r.vnode.el;if(!r.$ready||!q)return;let le=!1;const{width:fe,height:se,headerHeight:ye}=l.value,we=d.value=q.offsetWidth;fe!==we&&(le=!0);const ve=q.offsetHeight;(t.height||_.value)&&se!==ve&&(le=!0);const xe=t.tableLayout==="fixed"?r.refs.headerWrapper:($=r.refs.tableHeaderRef)==null?void 0:$.$el;t.showHeader&&(xe==null?void 0:xe.offsetHeight)!==ye&&(le=!0),h.value=((O=r.refs.tableWrapper)==null?void 0:O.scrollHeight)||0,m.value=(xe==null?void 0:xe.scrollHeight)||0,v.value=((z=r.refs.footerWrapper)==null?void 0:z.offsetHeight)||0,y.value=((re=r.refs.appendWrapper)==null?void 0:re.offsetHeight)||0,f.value=h.value-m.value-v.value-y.value,le&&(l.value={width:we,height:ve,headerHeight:t.showHeader&&(xe==null?void 0:xe.offsetHeight)||0},E())},N=ys(),G=R(()=>{const{bodyWidth:$,scrollY:O,gutterWidth:z}=e;return $.value?`${$.value-(O.value?z:0)}px`:""}),V=R(()=>t.maxHeight?"fixed":t.tableLayout),X=R(()=>{if(t.data&&t.data.length)return;let $="100%";t.height&&f.value&&($=`${f.value}px`);const O=d.value;return{width:O?`${O}px`:"",height:$}}),F=R(()=>t.height?{height:"100%"}:t.maxHeight?Number.isNaN(Number(t.maxHeight))?{maxHeight:`calc(${t.maxHeight} - ${m.value+v.value}px)`}:{maxHeight:`${+t.maxHeight-m.value-v.value}px`}:{});return{isHidden:s,renderExpanded:i,setDragVisible:a,isGroup:c,handleMouseLeave:g,handleHeaderFooterMousewheel:S,tableSize:N,emptyBlockStyle:X,resizeProxyVisible:o,bodyWidth:G,resizeState:l,doLayout:E,tableBodyStyles:w,tableLayout:V,scrollbarViewStyle:u,scrollbarStyle:F}}function F3e(t){const e=H(),n=()=>{const s=t.vnode.el.querySelector(".hidden-columns"),i={childList:!0,subtree:!0},o=t.store.states.updateOrderFns;e.value=new MutationObserver(()=>{o.forEach(a=>a())}),e.value.observe(s,i)};Zt(()=>{n()}),yo(()=>{var r;(r=e.value)==null||r.disconnect()})}var B3e={data:{type:Array,default:()=>[]},size:Es,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children",checkStrictly:!1})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object],tooltipFormatter:Function,appendFilterPanelTo:String,scrollbarTabindex:{type:[Number,String],default:void 0},allowDragLastColumn:{type:Boolean,default:!0},preserveExpandedContent:Boolean,nativeScrollbar:Boolean};function Y7(t){const e=t.tableLayout==="auto";let n=t.columns||[];e&&n.every(({width:s})=>Bn(s))&&(n=[]);const r=s=>{const i={key:`${t.tableLayout}_${s.id}`,style:{},name:void 0};return e?i.style={width:`${s.width}px`}:i.name=s.id,i};return Ut("colgroup",{},n.map(s=>Ut("col",r(s))))}Y7.props=["columns","tableLayout"];const U3e=()=>{const t=H(),e=(i,o)=>{const a=t.value;a&&a.scrollTo(i,o)},n=(i,o)=>{const a=t.value;a&&Ft(o)&&["Top","Left"].includes(i)&&a[`setScroll${i}`](o)};return{scrollBarRef:t,scrollTo:e,setScrollTop:i=>n("Top",i),setScrollLeft:i=>n("Left",i)}};var J4=!1,kd,CE,TE,lb,cb,X7,ub,ME,AE,kE,Z7,IE,PE,J7,Q7;function so(){if(!J4){J4=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),n=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(IE=/\b(iPhone|iP[ao]d)/.exec(t),PE=/\b(iP[ao]d)/.exec(t),kE=/Android/i.exec(t),J7=/FBAN\/\w+;/i.exec(t),Q7=/Mobile/i.exec(t),Z7=!!/Win64/.exec(t),e){kd=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,kd&&document&&document.documentMode&&(kd=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(t);X7=r?parseFloat(r[1])+4:kd,CE=e[2]?parseFloat(e[2]):NaN,TE=e[3]?parseFloat(e[3]):NaN,lb=e[4]?parseFloat(e[4]):NaN,lb?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),cb=e&&e[1]?parseFloat(e[1]):NaN):cb=NaN}else kd=CE=TE=cb=lb=NaN;if(n){if(n[1]){var s=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);ub=s?parseFloat(s[1].replace("_",".")):!0}else ub=!1;ME=!!n[2],AE=!!n[3]}else ub=ME=AE=!1}}var RE={ie:function(){return so()||kd},ieCompatibilityMode:function(){return so()||X7>kd},ie64:function(){return RE.ie()&&Z7},firefox:function(){return so()||CE},opera:function(){return so()||TE},webkit:function(){return so()||lb},safari:function(){return RE.webkit()},chrome:function(){return so()||cb},windows:function(){return so()||ME},osx:function(){return so()||ub},linux:function(){return so()||AE},iphone:function(){return so()||IE},mobile:function(){return so()||IE||PE||kE||Q7},nativeApp:function(){return so()||J7},android:function(){return so()||kE},ipad:function(){return so()||PE}},z3e=RE,$3e=!!(typeof window<"u"&&window.document&&window.document.createElement),V3e={canUseDOM:$3e},e9=V3e,t9;e9.canUseDOM&&(t9=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function H3e(t,e){if(!e9.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var s=document.createElement("div");s.setAttribute(n,"return;"),r=typeof s[n]=="function"}return!r&&t9&&t==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var G3e=H3e,Q4=10,eL=40,tL=800;function n9(t){var e=0,n=0,r=0,s=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*Q4,s=n*Q4,"deltaY"in t&&(s=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||s)&&t.deltaMode&&(t.deltaMode==1?(r*=eL,s*=eL):(r*=tL,s*=tL)),r&&!e&&(e=r<1?-1:1),s&&!n&&(n=s<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:s}}n9.getEventType=function(){return z3e.firefox()?"DOMMouseScroll":G3e("wheel")?"wheel":"mousewheel"};var W3e=n9;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const j3e=function(t,e){if(t&&t.addEventListener){const n=function(r){const s=W3e(r);e&&Reflect.apply(e,this,[r,s])};t.addEventListener("wheel",n,{passive:!0})}},K3e={beforeMount(t,e){j3e(t,e.value)}};let q3e=1;const Y3e=de({name:"ElTable",directives:{Mousewheel:K3e},components:{TableHeader:S3e,TableBody:P3e,TableFooter:O3e,ElScrollbar:$a,hColgroup:Y7},props:B3e,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change","scroll"],setup(t){const{t:e}=zn(),n=Qe("table"),r=tn();Mn(Za,r);const s=f3e(r,t);r.store=s;const i=new m3e({store:r.store,table:r,fit:t.fit,showHeader:t.showHeader});r.layout=i;const o=R(()=>(s.states.data.value||[]).length===0),{setCurrentRow:a,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:h,toggleRowExpansion:f,clearSort:m,sort:v,updateKeyChildren:y}=N3e(s),{isHidden:g,renderExpanded:S,setDragVisible:_,isGroup:w,handleMouseLeave:E,handleHeaderFooterMousewheel:C,tableSize:T,emptyBlockStyle:I,resizeProxyVisible:k,bodyWidth:M,resizeState:L,doLayout:N,tableBodyStyles:G,tableLayout:V,scrollbarViewStyle:X,scrollbarStyle:F}=D3e(t,i,s,r),{scrollBarRef:$,scrollTo:O,setScrollLeft:z,setScrollTop:re}=U3e(),q=mo(N,50),le=`${n.namespace.value}-table_${q3e++}`;r.tableId=le,r.state={isGroup:w,resizeState:L,doLayout:N,debouncedUpdateLayout:q};const fe=R(()=>{var we;return(we=t.sumText)!=null?we:e("el.table.sumText")}),se=R(()=>{var we;return(we=t.emptyText)!=null?we:e("el.table.emptyText")}),ye=R(()=>q7(s.states.originColumns.value)[0]);return F3e(r),Xn(()=>{q.cancel()}),{ns:n,layout:i,store:s,columns:ye,handleHeaderFooterMousewheel:C,handleMouseLeave:E,tableId:le,tableSize:T,isHidden:g,isEmpty:o,renderExpanded:S,resizeProxyVisible:k,resizeState:L,isGroup:w,bodyWidth:M,tableBodyStyles:G,emptyBlockStyle:I,debouncedUpdateLayout:q,setCurrentRow:a,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:h,toggleRowExpansion:f,clearSort:m,doLayout:N,sort:v,updateKeyChildren:y,t:e,setDragVisible:_,context:r,computedSumText:fe,computedEmptyText:se,tableLayout:V,scrollbarViewStyle:X,scrollbarStyle:F,scrollBarRef:$,scrollTo:O,setScrollLeft:z,setScrollTop:re,allowDragLastColumn:t.allowDragLastColumn}}});function X3e(t,e,n,r,s,i){const o=Xt("hColgroup"),a=Xt("table-header"),l=Xt("table-body"),c=Xt("table-footer"),u=Xt("el-scrollbar"),d=i_("mousewheel");return D(),Z("div",{ref:"tableWrapper",class:U([{[t.ns.m("fit")]:t.fit,[t.ns.m("striped")]:t.stripe,[t.ns.m("border")]:t.border||t.isGroup,[t.ns.m("hidden")]:t.isHidden,[t.ns.m("group")]:t.isGroup,[t.ns.m("fluid-height")]:t.maxHeight,[t.ns.m("scrollable-x")]:t.layout.scrollX.value,[t.ns.m("scrollable-y")]:t.layout.scrollY.value,[t.ns.m("enable-row-hover")]:!t.store.states.isComplex.value,[t.ns.m("enable-row-transition")]:(t.store.states.data.value||[]).length!==0&&(t.store.states.data.value||[]).length<100,"has-footer":t.showSummary},t.ns.m(t.tableSize),t.className,t.ns.b(),t.ns.m(`layout-${t.tableLayout}`)]),style:Pt(t.style),"data-prefix":t.ns.namespace.value,onMouseleave:t.handleMouseLeave},[ne("div",{class:U(t.ns.e("inner-wrapper"))},[ne("div",{ref:"hiddenColumns",class:"hidden-columns"},[Ae(t.$slots,"default")],512),t.showHeader&&t.tableLayout==="fixed"?cn((D(),Z("div",{key:0,ref:"headerWrapper",class:U(t.ns.e("header-wrapper"))},[ne("table",{ref:"tableHeader",class:U(t.ns.e("header")),style:Pt(t.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[ae(o,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),ae(a,{ref:"tableHeaderRef",border:t.border,"default-sort":t.defaultSort,store:t.store,"append-filter-panel-to":t.appendFilterPanelTo,"allow-drag-last-column":t.allowDragLastColumn,onSetDragVisible:t.setDragVisible},null,8,["border","default-sort","store","append-filter-panel-to","allow-drag-last-column","onSetDragVisible"])],6)],2)),[[d,t.handleHeaderFooterMousewheel]]):Pe("v-if",!0),ne("div",{ref:"bodyWrapper",class:U(t.ns.e("body-wrapper"))},[ae(u,{ref:"scrollBarRef","view-style":t.scrollbarViewStyle,"wrap-style":t.scrollbarStyle,always:t.scrollbarAlwaysOn,tabindex:t.scrollbarTabindex,native:t.nativeScrollbar,onScroll:h=>t.$emit("scroll",h)},{default:me(()=>[ne("table",{ref:"tableBody",class:U(t.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:Pt({width:t.bodyWidth,tableLayout:t.tableLayout})},[ae(o,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),t.showHeader&&t.tableLayout==="auto"?(D(),Le(a,{key:0,ref:"tableHeaderRef",class:U(t.ns.e("body-header")),border:t.border,"default-sort":t.defaultSort,store:t.store,"append-filter-panel-to":t.appendFilterPanelTo,onSetDragVisible:t.setDragVisible},null,8,["class","border","default-sort","store","append-filter-panel-to","onSetDragVisible"])):Pe("v-if",!0),ae(l,{context:t.context,highlight:t.highlightCurrentRow,"row-class-name":t.rowClassName,"tooltip-effect":t.tooltipEffect,"tooltip-options":t.tooltipOptions,"row-style":t.rowStyle,store:t.store,stripe:t.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),t.showSummary&&t.tableLayout==="auto"?(D(),Le(c,{key:1,class:U(t.ns.e("body-footer")),border:t.border,"default-sort":t.defaultSort,store:t.store,"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):Pe("v-if",!0)],6),t.isEmpty?(D(),Z("div",{key:0,ref:"emptyBlock",style:Pt(t.emptyBlockStyle),class:U(t.ns.e("empty-block"))},[ne("span",{class:U(t.ns.e("empty-text"))},[Ae(t.$slots,"empty",{},()=>[rn(tt(t.computedEmptyText),1)])],2)],6)):Pe("v-if",!0),t.$slots.append?(D(),Z("div",{key:1,ref:"appendWrapper",class:U(t.ns.e("append-wrapper"))},[Ae(t.$slots,"append")],2)):Pe("v-if",!0)]),_:3},8,["view-style","wrap-style","always","tabindex","native","onScroll"])],2),t.showSummary&&t.tableLayout==="fixed"?cn((D(),Z("div",{key:1,ref:"footerWrapper",class:U(t.ns.e("footer-wrapper"))},[ne("table",{class:U(t.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:Pt(t.tableBodyStyles)},[ae(o,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),ae(c,{border:t.border,"default-sort":t.defaultSort,store:t.store,"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[Wn,!t.isEmpty],[d,t.handleHeaderFooterMousewheel]]):Pe("v-if",!0),t.border||t.isGroup?(D(),Z("div",{key:2,class:U(t.ns.e("border-left-patch"))},null,2)):Pe("v-if",!0)],2),cn(ne("div",{ref:"resizeProxy",class:U(t.ns.e("column-resize-proxy"))},null,2),[[Wn,t.resizeProxyVisible]])],46,["data-prefix","onMouseleave"])}var Z3e=at(Y3e,[["render",X3e],["__file","table.vue"]]);const J3e={selection:"table-column--selection",expand:"table__expand-column"},Q3e={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},eke=t=>J3e[t]||"",tke={selection:{renderHeader({store:t,column:e}){var n;function r(){return t.states.data.value&&t.states.data.value.length===0}return Ut(oa,{disabled:r(),size:t.states.tableSize.value,indeterminate:t.states.selection.value.length>0&&!t.states.isAllSelected.value,"onUpdate:modelValue":(n=t.toggleAllSelection)!=null?n:void 0,modelValue:t.states.isAllSelected.value,ariaLabel:e.label})},renderCell({row:t,column:e,store:n,$index:r}){return Ut(oa,{disabled:e.selectable?!e.selectable.call(null,t,r):!1,size:n.states.tableSize.value,onChange:()=>{n.commit("rowSelectedChanged",t)},onClick:s=>s.stopPropagation(),modelValue:n.isSelected(t),ariaLabel:e.label})},sortable:!1,resizable:!1},index:{renderHeader({column:t}){return t.label||"#"},renderCell({column:t,$index:e}){let n=e+1;const r=t.index;return Ft(r)?n=e+r:Lt(r)&&(n=r(e)),Ut("div",{},[n])},sortable:!1},expand:{renderHeader({column:t}){return t.label||""},renderCell({column:t,row:e,store:n,expanded:r}){const{ns:s}=n,i=[s.e("expand-icon")];return!t.renderExpand&&r&&i.push(s.em("expand-icon","expanded")),Ut("div",{class:i,onClick:function(a){a.stopPropagation(),n.toggleRowExpansion(e)}},{default:()=>t.renderExpand?[t.renderExpand({expanded:r})]:[Ut(Et,null,{default:()=>[Ut(Ai)]})]})},sortable:!1,resizable:!1}};function nke({row:t,column:e,$index:n}){var r;const s=e.property,i=s&&sg(t,s).value;return e&&e.formatter?e.formatter(t,e,i,n):((r=i==null?void 0:i.toString)==null?void 0:r.call(i))||""}function rke({row:t,treeNode:e,store:n},r=!1){const{ns:s}=n;if(!e)return r?[Ut("span",{class:s.e("placeholder")})]:null;const i=[],o=function(a){a.stopPropagation(),!e.loading&&n.loadOrToggle(t)};if(e.indent&&i.push(Ut("span",{class:s.e("indent"),style:{"padding-left":`${e.indent}px`}})),nr(e.expanded)&&!e.noLazyChildren){const a=[s.e("expand-icon"),e.expanded?s.em("expand-icon","expanded"):""];let l=Ai;e.loading&&(l=El),i.push(Ut("div",{class:a,onClick:o},{default:()=>[Ut(Et,{class:{[s.is("loading")]:e.loading}},{default:()=>[Ut(l)]})]}))}else i.push(Ut("span",{class:s.e("placeholder")}));return i}function nL(t,e){return t.reduce((n,r)=>(n[r]=r,n),e)}function ske(t,e){const n=tn();return{registerComplexWatchers:()=>{const i=["fixed"],o={realWidth:"width",realMinWidth:"minWidth"},a=nL(i,o);Object.keys(a).forEach(l=>{const c=o[l];Kn(e,c)&&Be(()=>e[c],u=>{let d=u;c==="width"&&l==="realWidth"&&(d=zM(u)),c==="minWidth"&&l==="realMinWidth"&&(d=V7(u)),n.columnConfig.value[c]=d,n.columnConfig.value[l]=d;const h=c==="fixed";t.value.store.scheduleLayout(h)})})},registerNormalWatchers:()=>{const i=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip","tooltipFormatter"],o={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},a=nL(i,o);Object.keys(a).forEach(l=>{const c=o[l];Kn(e,c)&&Be(()=>e[c],u=>{n.columnConfig.value[l]=u})})}}}function ike(t,e,n){const r=tn(),s=H(""),i=H(!1),o=H(),a=H(),l=Qe("table");ui(()=>{o.value=t.align?`is-${t.align}`:null,o.value}),ui(()=>{a.value=t.headerAlign?`is-${t.headerAlign}`:o.value,a.value});const c=R(()=>{let w=r.vnode.vParent||r.parent;for(;w&&!w.tableId&&!w.columnId;)w=w.vnode.vParent||w.parent;return w}),u=R(()=>{const{store:w}=r.parent;if(!w)return!1;const{treeData:E}=w.states,C=E.value;return C&&Object.keys(C).length>0}),d=H(zM(t.width)),h=H(V7(t.minWidth)),f=w=>(d.value&&(w.width=d.value),h.value&&(w.minWidth=h.value),!d.value&&h.value&&(w.width=void 0),w.minWidth||(w.minWidth=80),w.realWidth=Number(Bn(w.width)?w.minWidth:w.width),w),m=w=>{const E=w.type,C=tke[E]||{};Object.keys(C).forEach(I=>{const k=C[I];I!=="className"&&!Bn(k)&&(w[I]=k)});const T=eke(E);if(T){const I=`${p(l.namespace)}-${T}`;w.className=w.className?`${w.className} ${I}`:I}return w},v=w=>{rt(w)?w.forEach(C=>E(C)):E(w);function E(C){var T;((T=C==null?void 0:C.type)==null?void 0:T.name)==="ElTableColumn"&&(C.vParent=r)}};return{columnId:s,realAlign:o,isSubColumn:i,realHeaderAlign:a,columnOrTableParent:c,setColumnWidth:f,setColumnForcedProps:m,setColumnRenders:w=>{t.renderHeader||w.type!=="selection"&&(w.renderHeader=C=>(r.columnConfig.value.label,Ae(e,"header",C,()=>[w.label]))),e["filter-icon"]&&(w.renderFilterIcon=C=>Ae(e,"filter-icon",C)),e.expand&&(w.renderExpand=C=>Ae(e,"expand",C));let E=w.renderCell;return w.type==="expand"?(w.renderCell=C=>Ut("div",{class:"cell"},[E(C)]),n.value.renderExpanded=C=>e.default?e.default(C):e.default):(E=E||nke,w.renderCell=C=>{let T=null;if(e.default){const G=e.default(C);T=rz(G)?G:E(C)}else T=E(C);const{columns:I}=n.value.store.states,k=I.value.findIndex(G=>G.type==="default"),M=u.value&&C.cellIndex===k,L=rke(C,M),N={class:"cell",style:{}};return w.showOverflowTooltip&&(N.class=`${N.class} ${p(l.namespace)}-tooltip`,N.style={width:`${(C.column.realWidth||Number(C.column.width))-1}px`}),v(T),Ut("div",N,[L,T])}),w},getPropsData:(...w)=>w.reduce((E,C)=>(rt(C)&&C.forEach(T=>{E[T]=t[T]}),E),{}),getColumnElIndex:(w,E)=>Array.prototype.indexOf.call(w,E),updateColumnOrder:()=>{n.value.store.commit("updateColumnOrder",r.columnConfig.value)}}}var oke={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},tooltipFormatter:Function,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:t=>t.every(e=>["ascending","descending",null].includes(e))}};let ake=1;var r9=de({name:"ElTableColumn",components:{ElCheckbox:oa},props:oke,setup(t,{slots:e}){const n=tn(),r=H({}),s=R(()=>{let _=n.parent;for(;_&&!_.tableId;)_=_.parent;return _}),{registerNormalWatchers:i,registerComplexWatchers:o}=ske(s,t),{columnId:a,isSubColumn:l,realHeaderAlign:c,columnOrTableParent:u,setColumnWidth:d,setColumnForcedProps:h,setColumnRenders:f,getPropsData:m,getColumnElIndex:v,realAlign:y,updateColumnOrder:g}=ike(t,e,s),S=u.value;a.value=`${"tableId"in S&&S.tableId||"columnId"in S&&S.columnId}_column_${ake++}`,r_(()=>{l.value=s.value!==S;const _=t.type||"default",w=t.sortable===""?!0:t.sortable,E=_==="selection"?!1:Bn(t.showOverflowTooltip)?S.props.showOverflowTooltip:t.showOverflowTooltip,C=Bn(t.tooltipFormatter)?S.props.tooltipFormatter:t.tooltipFormatter,T={...Q3e[_],id:a.value,type:_,property:t.prop||t.property,align:y,headerAlign:c,showOverflowTooltip:E,tooltipFormatter:C,filterable:t.filters||t.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:w,index:t.index,rawColumnKey:n.vnode.key};let N=m(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);N=t3e(T,N),N=r3e(f,d,h)(N),r.value=N,i(),o()}),Zt(()=>{var _,w;const E=u.value,C=l.value?(_=E.vnode.el)==null?void 0:_.children:(w=E.refs.hiddenColumns)==null?void 0:w.children,T=()=>v(C||[],n.vnode.el);r.value.getColumnIndex=T,T()>-1&&s.value.store.commit("insertColumn",r.value,l.value?"columnConfig"in E&&E.columnConfig.value:null,g)}),Xn(()=>{const _=r.value.getColumnIndex;(_?_():-1)>-1&&s.value.store.commit("removeColumn",r.value,l.value?"columnConfig"in S&&S.columnConfig.value:null,g)}),n.columnId=a.value,n.columnConfig=r},render(){var t,e,n;try{const r=(e=(t=this.$slots).default)==null?void 0:e.call(t,{row:{},column:{},$index:-1}),s=[];if(rt(r))for(const o of r)((n=o.type)==null?void 0:n.name)==="ElTableColumn"||o.shapeFlag&2?s.push(o):o.type===xt&&rt(o.children)&&o.children.forEach(a=>{(a==null?void 0:a.patchFlag)!==1024&&!kt(a==null?void 0:a.children)&&s.push(a)});return Ut("div",s)}catch{return Ut("div",[])}}});const s9=nn(Z3e,{TableColumn:r9}),lke=Br(r9);var rv=(t=>(t.ASC="asc",t.DESC="desc",t))(rv||{}),sv=(t=>(t.CENTER="center",t.RIGHT="right",t))(sv||{}),i9=(t=>(t.LEFT="left",t.RIGHT="right",t))(i9||{});const LE={asc:"desc",desc:"asc"},iv=Symbol("placeholder"),cke=(t,e,n)=>{var r;const s={flexGrow:0,flexShrink:0,...n?{}:{flexGrow:t.flexGrow||0,flexShrink:t.flexShrink||1}};n||(s.flexShrink=1);const i={...(r=t.style)!=null?r:{},...s,flexBasis:"auto",width:t.width};return e||(t.maxWidth&&(i.maxWidth=t.maxWidth),t.minWidth&&(i.minWidth=t.minWidth)),i};function uke(t,e,n){const r=R(()=>p(e).map((y,g)=>{var S,_;return{...y,key:(_=(S=y.key)!=null?S:y.dataKey)!=null?_:g}})),s=R(()=>p(r).filter(y=>!y.hidden)),i=R(()=>p(s).filter(y=>y.fixed==="left"||y.fixed===!0)),o=R(()=>p(s).filter(y=>y.fixed==="right")),a=R(()=>p(s).filter(y=>!y.fixed)),l=R(()=>{const y=[];return p(i).forEach(g=>{y.push({...g,placeholderSign:iv})}),p(a).forEach(g=>{y.push(g)}),p(o).forEach(g=>{y.push({...g,placeholderSign:iv})}),y}),c=R(()=>p(i).length||p(o).length),u=R(()=>p(r).reduce((y,g)=>(y[g.key]=cke(g,p(n),t.fixed),y),{})),d=R(()=>p(s).reduce((y,g)=>y+g.width,0)),h=y=>p(r).find(g=>g.key===y),f=y=>p(u)[y],m=(y,g)=>{y.width=g};function v(y){var g;const{key:S}=y.currentTarget.dataset;if(!S)return;const{sortState:_,sortBy:w}=t;let E=rv.ASC;un(_)?E=LE[_[S]]:E=LE[w.order],(g=t.onColumnSort)==null||g.call(t,{column:h(S),key:S,order:E})}return{columns:r,columnsStyles:u,columnsTotalWidth:d,fixedColumnsOnLeft:i,fixedColumnsOnRight:o,hasFixedColumns:c,mainColumns:l,normalColumns:a,visibleColumns:s,getColumn:h,getColumnStyle:f,updateColumnWidth:m,onColumnSorted:v}}const dke=(t,{mainTableRef:e,leftTableRef:n,rightTableRef:r,onMaybeEndReached:s})=>{const i=H({scrollLeft:0,scrollTop:0});function o(f){var m,v,y;const{scrollTop:g}=f;(m=e.value)==null||m.scrollTo(f),(v=n.value)==null||v.scrollToTop(g),(y=r.value)==null||y.scrollToTop(g)}function a(f){i.value=f,o(f)}function l(f){i.value.scrollTop=f,o(p(i))}function c(f){var m,v;i.value.scrollLeft=f,(v=(m=e.value)==null?void 0:m.scrollTo)==null||v.call(m,p(i))}function u(f){var m;a(f),(m=t.onScroll)==null||m.call(t,f)}function d({scrollTop:f}){const{scrollTop:m}=p(i);f!==m&&l(f)}function h(f,m="auto"){var v;(v=e.value)==null||v.scrollToRow(f,m)}return Be(()=>p(i).scrollTop,(f,m)=>{f>m&&s()}),{scrollPos:i,scrollTo:a,scrollToLeft:c,scrollToTop:l,scrollToRow:h,onScroll:u,onVerticalScroll:d}},hke=(t,{mainTableRef:e,leftTableRef:n,rightTableRef:r,tableInstance:s,ns:i,isScrolling:o})=>{const a=tn(),{emit:l}=a,c=br(!1),u=H(t.defaultExpandedRowKeys||[]),d=H(-1),h=br(null),f=H({}),m=H({}),v=br({}),y=br({}),g=br({}),S=R(()=>Ft(t.estimatedRowHeight));function _(M){var L;(L=t.onRowsRendered)==null||L.call(t,M),M.rowCacheEnd>p(d)&&(d.value=M.rowCacheEnd)}function w({hovered:M,rowKey:L}){if(o.value)return;s.vnode.el.querySelectorAll(`[rowkey="${String(L)}"]`).forEach(V=>{M?V.classList.add(i.is("hovered")):V.classList.remove(i.is("hovered"))})}function E({expanded:M,rowData:L,rowIndex:N,rowKey:G}){var V,X;const F=[...p(u)],$=F.indexOf(G);M?$===-1&&F.push(G):$>-1&&F.splice($,1),u.value=F,l("update:expandedRowKeys",F),(V=t.onRowExpand)==null||V.call(t,{expanded:M,rowData:L,rowIndex:N,rowKey:G}),(X=t.onExpandedRowsChange)==null||X.call(t,F),s.vnode.el.querySelector(`.${i.is("hovered")}[rowkey="${String(G)}"]`)&&Tt(()=>w({hovered:!0,rowKey:G}))}const C=mo(()=>{var M,L,N,G;c.value=!0,f.value={...p(f),...p(m)},T(p(h),!1),m.value={},h.value=null,(M=e.value)==null||M.forceUpdate(),(L=n.value)==null||L.forceUpdate(),(N=r.value)==null||N.forceUpdate(),(G=a.proxy)==null||G.$forceUpdate(),c.value=!1},0);function T(M,L=!1){p(S)&&[e,n,r].forEach(N=>{const G=p(N);G&&G.resetAfterRowIndex(M,L)})}function I(M,L,N){const G=p(h);(G===null||G>N)&&(h.value=N),m.value[M]=L}function k({rowKey:M,height:L,rowIndex:N},G){G?G===i9.RIGHT?g.value[M]=L:v.value[M]=L:y.value[M]=L;const V=Math.max(...[v,g,y].map(X=>X.value[M]||0));p(f)[M]!==V&&(I(M,V,N),C())}return{expandedRowKeys:u,lastRenderedRowIndex:d,isDynamic:S,isResetting:c,rowHeights:f,resetAfterIndex:T,onRowExpanded:E,onRowHovered:w,onRowsRendered:_,onRowHeightChange:k}},fke=(t,{expandedRowKeys:e,lastRenderedRowIndex:n,resetAfterIndex:r})=>{const s=H({}),i=R(()=>{const a={},{data:l,rowKey:c}=t,u=p(e);if(!u||!u.length)return l;const d=[],h=new Set;u.forEach(m=>h.add(m));let f=l.slice();for(f.forEach(m=>a[m[c]]=0);f.length>0;){const m=f.shift();d.push(m),h.has(m[c])&&rt(m.children)&&m.children.length>0&&(f=[...m.children,...f],m.children.forEach(v=>a[v[c]]=a[m[c]]+1))}return s.value=a,d}),o=R(()=>{const{data:a,expandColumnKey:l}=t;return l?p(i):a});return Be(o,(a,l)=>{a!==l&&(n.value=-1,r(0,!0))}),{data:o,depthMap:s}},pke=(t,e)=>t+e,db=t=>rt(t)?t.reduce(pke,0):t,oh=(t,e,n={})=>Lt(t)?t(e):t??n,Eu=t=>(["width","maxWidth","minWidth","height"].forEach(e=>{t[e]=qr(t[e])}),t),o9=t=>wr(t)?e=>Ut(t,e):t,mke=(t,{columnsTotalWidth:e,rowsHeight:n,fixedColumnsOnLeft:r,fixedColumnsOnRight:s})=>{const i=R(()=>{const{fixed:g,width:S,vScrollbarSize:_}=t,w=S-_;return g?Math.max(Math.round(p(e)),w):w}),o=R(()=>{const{height:g=0,maxHeight:S=0,footerHeight:_,hScrollbarSize:w}=t;if(S>0){const E=p(h),C=p(n),I=p(d)+E+C+w;return Math.min(I,S-_)}return g-_}),a=R(()=>{const{maxHeight:g}=t,S=p(o);if(Ft(g)&&g>0)return S;const _=p(n)+p(d)+p(h);return Math.min(S,_)}),l=g=>g.width,c=R(()=>db(p(r).map(l))),u=R(()=>db(p(s).map(l))),d=R(()=>db(t.headerHeight)),h=R(()=>{var g;return(((g=t.fixedData)==null?void 0:g.length)||0)*t.rowHeight}),f=R(()=>p(o)-p(d)-p(h)),m=R(()=>{const{style:g={},height:S,width:_}=t;return Eu({...g,height:S,width:_})}),v=R(()=>Eu({height:t.footerHeight})),y=R(()=>({top:qr(p(d)),bottom:qr(t.footerHeight),width:qr(t.width)}));return{bodyWidth:i,fixedTableHeight:a,mainTableHeight:o,leftTableWidth:c,rightTableWidth:u,windowHeight:f,footerHeight:v,emptyStyle:y,rootStyle:m,headerHeight:d}};function gke(t){const e=H(),n=H(),r=H(),{columns:s,columnsStyles:i,columnsTotalWidth:o,fixedColumnsOnLeft:a,fixedColumnsOnRight:l,hasFixedColumns:c,mainColumns:u,onColumnSorted:d}=uke(t,Yn(t,"columns"),Yn(t,"fixed")),{scrollTo:h,scrollToLeft:f,scrollToTop:m,scrollToRow:v,onScroll:y,onVerticalScroll:g,scrollPos:S}=dke(t,{mainTableRef:e,leftTableRef:n,rightTableRef:r,onMaybeEndReached:he}),_=Qe("table-v2"),w=tn(),E=br(!1),{expandedRowKeys:C,lastRenderedRowIndex:T,isDynamic:I,isResetting:k,rowHeights:M,resetAfterIndex:L,onRowExpanded:N,onRowHeightChange:G,onRowHovered:V,onRowsRendered:X}=hke(t,{mainTableRef:e,leftTableRef:n,rightTableRef:r,tableInstance:w,ns:_,isScrolling:E}),{data:F,depthMap:$}=fke(t,{expandedRowKeys:C,lastRenderedRowIndex:T,resetAfterIndex:L}),O=R(()=>{const{estimatedRowHeight:K,rowHeight:Fe}=t,Oe=p(F);return Ft(K)?Object.values(p(M)).reduce((Re,te)=>Re+te,0):Oe.length*Fe}),{bodyWidth:z,fixedTableHeight:re,mainTableHeight:q,leftTableWidth:le,rightTableWidth:fe,windowHeight:se,footerHeight:ye,emptyStyle:we,rootStyle:ve,headerHeight:xe}=mke(t,{columnsTotalWidth:o,fixedColumnsOnLeft:a,fixedColumnsOnRight:l,rowsHeight:O}),je=H(),nt=R(()=>{const K=p(F).length===0;return rt(t.fixedData)?t.fixedData.length===0&&K:K});function ue(K){const{estimatedRowHeight:Fe,rowHeight:Oe,rowKey:Re}=t;return Fe?p(M)[p(F)[K][Re]]||Fe:Oe}const j=H(!1);function he(){const{onEndReached:K}=t;if(!K)return;const{scrollTop:Fe}=p(S),Oe=p(O),Re=p(se),te=Oe-(Fe+Re)+t.hScrollbarSize;!j.value&&p(T)>=0&&Oe<=Fe+p(q)-p(xe)?(j.value=!0,K(te)):j.value=!1}return Be(()=>p(O),()=>j.value=!1),Be(()=>t.expandedRowKeys,K=>C.value=K,{deep:!0}),{columns:s,containerRef:je,mainTableRef:e,leftTableRef:n,rightTableRef:r,isDynamic:I,isResetting:k,isScrolling:E,hasFixedColumns:c,columnsStyles:i,columnsTotalWidth:o,data:F,expandedRowKeys:C,depthMap:$,fixedColumnsOnLeft:a,fixedColumnsOnRight:l,mainColumns:u,bodyWidth:z,emptyStyle:we,rootStyle:ve,footerHeight:ye,mainTableHeight:q,fixedTableHeight:re,leftTableWidth:le,rightTableWidth:fe,showEmpty:nt,getRowHeight:ue,onColumnSorted:d,onRowHovered:V,onRowExpanded:N,onRowsRendered:X,onRowHeightChange:G,scrollTo:h,scrollToLeft:f,scrollToTop:m,scrollToRow:v,onScroll:y,onVerticalScroll:g}}const WM=Symbol("tableV2"),a9="tableV2GridScrollLeft",l9=String,Bv={type:Ce(Array),required:!0},jM={type:Ce(Array)},c9={...jM,required:!0},vke=String,rL={type:Ce(Array),default:()=>Fr([])},Id={type:Number,required:!0},u9={type:Ce([String,Number,Symbol]),default:"id"},sL={type:Ce(Object)},Bd=it({class:String,columns:Bv,columnsStyles:{type:Ce(Object),required:!0},depth:Number,expandColumnKey:vke,estimatedRowHeight:{...jd.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:Ce(Function)},onRowHover:{type:Ce(Function)},onRowHeightChange:{type:Ce(Function)},rowData:{type:Ce(Object),required:!0},rowEventHandlers:{type:Ce(Object)},rowIndex:{type:Number,required:!0},rowKey:u9,style:{type:Ce(Object)}}),$x={type:Number,required:!0},KM=it({class:String,columns:Bv,fixedHeaderData:{type:Ce(Array)},headerData:{type:Ce(Array),required:!0},headerHeight:{type:Ce([Number,Array]),default:50},rowWidth:$x,rowHeight:{type:Number,default:50},height:$x,width:$x}),hb=it({columns:Bv,data:c9,fixedData:jM,estimatedRowHeight:Bd.estimatedRowHeight,width:Id,height:Id,headerWidth:Id,headerHeight:KM.headerHeight,bodyWidth:Id,rowHeight:Id,cache:A7.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:jd.scrollbarAlwaysOn,scrollbarStartGap:jd.scrollbarStartGap,scrollbarEndGap:jd.scrollbarEndGap,class:l9,style:sL,containerStyle:sL,getRowHeight:{type:Ce(Function),required:!0},rowKey:Bd.rowKey,onRowsRendered:{type:Ce(Function)},onScroll:{type:Ce(Function)}}),yke=it({cache:hb.cache,estimatedRowHeight:Bd.estimatedRowHeight,rowKey:u9,headerClass:{type:Ce([String,Function])},headerProps:{type:Ce([Object,Function])},headerCellProps:{type:Ce([Object,Function])},headerHeight:KM.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:Ce([String,Function])},rowProps:{type:Ce([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:Ce([Object,Function])},columns:Bv,data:c9,dataGetter:{type:Ce(Function)},fixedData:jM,expandColumnKey:Bd.expandColumnKey,expandedRowKeys:rL,defaultExpandedRowKeys:rL,class:l9,fixed:Boolean,style:{type:Ce(Object)},width:Id,height:Id,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:jd.hScrollbarSize,vScrollbarSize:jd.vScrollbarSize,scrollbarAlwaysOn:P7.alwaysOn,sortBy:{type:Ce(Object),default:()=>({})},sortState:{type:Ce(Object),default:void 0},onColumnSort:{type:Ce(Function)},onExpandedRowsChange:{type:Ce(Function)},onEndReached:{type:Ce(Function)},onRowExpand:Bd.onRowExpand,onScroll:hb.onScroll,onRowsRendered:hb.onRowsRendered,rowEventHandlers:Bd.rowEventHandlers}),bke="ElTableV2Header",_ke=de({name:bke,props:KM,setup(t,{slots:e,expose:n}){const r=Qe("table-v2"),s=_t(a9),i=H(),o=R(()=>Eu({width:t.width,height:t.height})),a=R(()=>Eu({width:t.rowWidth,height:t.height})),l=R(()=>Hs(p(t.headerHeight))),c=h=>{const f=p(i);Tt(()=>{f!=null&&f.scroll&&f.scroll({left:h})})},u=()=>{const h=r.e("fixed-header-row"),{columns:f,fixedHeaderData:m,rowHeight:v}=t;return m==null?void 0:m.map((y,g)=>{var S;const _=Eu({height:v,width:"100%"});return(S=e.fixed)==null?void 0:S.call(e,{class:h,columns:f,rowData:y,rowIndex:-(g+1),style:_})})},d=()=>{const h=r.e("dynamic-header-row"),{columns:f}=t;return p(l).map((m,v)=>{var y;const g=Eu({width:"100%",height:m});return(y=e.dynamic)==null?void 0:y.call(e,{class:h,columns:f,headerIndex:v,style:g})})};return qa(()=>{s!=null&&s.value&&c(s.value)}),n({scrollToLeft:c}),()=>{if(!(t.height<=0))return ae("div",{ref:i,class:t.class,style:p(o),role:"rowgroup"},[ae("div",{style:p(a),class:r.e("header")},[d(),u()])])}}});var wke=_ke;const xke=({atXEndEdge:t,atXStartEdge:e,atYEndEdge:n,atYStartEdge:r},s)=>{let i=null,o=0,a=0;const l=(u,d)=>{const h=u<=0&&e.value||u>=0&&t.value,f=d<=0&&r.value||d>=0&&n.value;return h&&f};return{hasReachedEdge:l,onWheel:u=>{sh(i);let d=u.deltaX,h=u.deltaY;Math.abs(d)>Math.abs(h)?h=0:d=0,u.shiftKey&&h!==0&&(d=h,h=0),!(l(o,a)&&l(o+d,a+h))&&(o+=d,a+=h,u.preventDefault(),i=Uu(()=>{s(o,a),o=0,a=0}))}}},d9=({name:t,clearCache:e,getColumnPosition:n,getColumnStartIndexForOffset:r,getColumnStopIndexForStartIndex:s,getEstimatedTotalHeight:i,getEstimatedTotalWidth:o,getColumnOffset:a,getRowOffset:l,getRowPosition:c,getRowStartIndexForOffset:u,getRowStopIndexForStartIndex:d,initCache:h,injectToInstance:f,validateProps:m})=>de({name:t??"ElVirtualList",props:jd,emits:[u1,d1],setup(v,{emit:y,expose:g,slots:S}){const _=Qe("vl");m(v);const w=tn(),E=H(h(v,w));f==null||f(w,E);const C=H(),T=H(),I=H(),k=H(null),M=H({isScrolling:!1,scrollLeft:Ft(v.initScrollLeft)?v.initScrollLeft:0,scrollTop:Ft(v.initScrollTop)?v.initScrollTop:0,updateRequested:!1,xAxisScrollDir:Pf,yAxisScrollDir:Pf}),L=C7(),N=R(()=>Number.parseInt(`${v.height}`,10)),G=R(()=>Number.parseInt(`${v.width}`,10)),V=R(()=>{const{totalColumn:Re,totalRow:te,columnCache:oe}=v,{isScrolling:Ee,xAxisScrollDir:J,scrollLeft:Q}=p(M);if(Re===0||te===0)return[0,0,0,0];const _e=r(v,Q,p(E)),ie=s(v,_e,Q,p(E)),Te=!Ee||J===h1?Math.max(1,oe):1,We=!Ee||J===Pf?Math.max(1,oe):1;return[Math.max(0,_e-Te),Math.max(0,Math.min(Re-1,ie+We)),_e,ie]}),X=R(()=>{const{totalColumn:Re,totalRow:te,rowCache:oe}=v,{isScrolling:Ee,yAxisScrollDir:J,scrollTop:Q}=p(M);if(Re===0||te===0)return[0,0,0,0];const _e=u(v,Q,p(E)),ie=d(v,_e,Q,p(E)),Te=!Ee||J===h1?Math.max(1,oe):1,We=!Ee||J===Pf?Math.max(1,oe):1;return[Math.max(0,_e-Te),Math.max(0,Math.min(te-1,ie+We)),_e,ie]}),F=R(()=>i(v,p(E))),$=R(()=>o(v,p(E))),O=R(()=>{var Re;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:v.direction,height:Ft(v.height)?`${v.height}px`:v.height,width:Ft(v.width)?`${v.width}px`:v.width},(Re=v.style)!=null?Re:{}]}),z=R(()=>{const Re=`${p($)}px`;return{height:`${p(F)}px`,pointerEvents:p(M).isScrolling?"none":void 0,width:Re}}),re=()=>{const{totalColumn:Re,totalRow:te}=v;if(Re>0&&te>0){const[ie,Te,We,ut]=p(V),[lt,St,Ot,et]=p(X);y(u1,{columnCacheStart:ie,columnCacheEnd:Te,rowCacheStart:lt,rowCacheEnd:St,columnVisibleStart:We,columnVisibleEnd:ut,rowVisibleStart:Ot,rowVisibleEnd:et})}const{scrollLeft:oe,scrollTop:Ee,updateRequested:J,xAxisScrollDir:Q,yAxisScrollDir:_e}=p(M);y(d1,{xAxisScrollDir:Q,scrollLeft:oe,yAxisScrollDir:_e,scrollTop:Ee,updateRequested:J})},q=Re=>{const{clientHeight:te,clientWidth:oe,scrollHeight:Ee,scrollLeft:J,scrollTop:Q,scrollWidth:_e}=Re.currentTarget,ie=p(M);if(ie.scrollTop===Q&&ie.scrollLeft===J)return;let Te=J;if(V4(v.direction))switch(p1()){case tv:Te=-J;break;case UM:Te=_e-oe-J;break}M.value={...ie,isScrolling:!0,scrollLeft:Te,scrollTop:Math.max(0,Math.min(Q,Ee-te)),updateRequested:!0,xAxisScrollDir:Fd(ie.scrollLeft,Te),yAxisScrollDir:Fd(ie.scrollTop,Q)},Tt(()=>xe()),je(),re()},le=(Re,te)=>{const oe=p(N),Ee=(F.value-oe)/te*Re;ye({scrollTop:Math.min(F.value-oe,Ee)})},fe=(Re,te)=>{const oe=p(G),Ee=($.value-oe)/te*Re;ye({scrollLeft:Math.min($.value-oe,Ee)})},{onWheel:se}=xke({atXStartEdge:R(()=>M.value.scrollLeft<=0),atXEndEdge:R(()=>M.value.scrollLeft>=$.value-p(G)),atYStartEdge:R(()=>M.value.scrollTop<=0),atYEndEdge:R(()=>M.value.scrollTop>=F.value-p(N))},(Re,te)=>{var oe,Ee,J,Q;(Ee=(oe=T.value)==null?void 0:oe.onMouseUp)==null||Ee.call(oe),(Q=(J=I.value)==null?void 0:J.onMouseUp)==null||Q.call(J);const _e=p(G),ie=p(N);ye({scrollLeft:Math.min(M.value.scrollLeft+Re,$.value-_e),scrollTop:Math.min(M.value.scrollTop+te,F.value-ie)})});pr(C,"wheel",se,{passive:!1});const ye=({scrollLeft:Re=M.value.scrollLeft,scrollTop:te=M.value.scrollTop})=>{Re=Math.max(Re,0),te=Math.max(te,0);const oe=p(M);te===oe.scrollTop&&Re===oe.scrollLeft||(M.value={...oe,xAxisScrollDir:Fd(oe.scrollLeft,Re),yAxisScrollDir:Fd(oe.scrollTop,te),scrollLeft:Re,scrollTop:te,updateRequested:!0},Tt(()=>xe()),je(),re())},we=(Re=0,te=0,oe=Jo)=>{const Ee=p(M);te=Math.max(0,Math.min(te,v.totalColumn-1)),Re=Math.max(0,Math.min(Re,v.totalRow-1));const J=rU(_.namespace.value),Q=p(E),_e=i(v,Q),ie=o(v,Q);ye({scrollLeft:a(v,te,oe,Ee.scrollLeft,Q,ie>v.width?J:0),scrollTop:l(v,Re,oe,Ee.scrollTop,Q,_e>v.height?J:0)})},ve=(Re,te)=>{const{columnWidth:oe,direction:Ee,rowHeight:J}=v,Q=L.value(e&&oe,e&&J,e&&Ee),_e=`${Re},${te}`;if(Kn(Q,_e))return Q[_e];{const[,ie]=n(v,te,p(E)),Te=p(E),We=V4(Ee),[ut,lt]=c(v,Re,Te),[St]=n(v,te,Te);return Q[_e]={position:"absolute",left:We?void 0:`${ie}px`,right:We?`${ie}px`:void 0,top:`${lt}px`,height:`${ut}px`,width:`${St}px`},Q[_e]}},xe=()=>{M.value.isScrolling=!1,Tt(()=>{L.value(-1,null,null)})};Zt(()=>{if(!Vn)return;const{initScrollLeft:Re,initScrollTop:te}=v,oe=p(C);oe&&(Ft(Re)&&(oe.scrollLeft=Re),Ft(te)&&(oe.scrollTop=te)),re()});const je=()=>{const{direction:Re}=v,{scrollLeft:te,scrollTop:oe,updateRequested:Ee}=p(M),J=p(C);if(Ee&&J){if(Re===Kf)switch(p1()){case tv:{J.scrollLeft=-te;break}case BM:{J.scrollLeft=te;break}default:{const{clientWidth:Q,scrollWidth:_e}=J;J.scrollLeft=_e-Q-te;break}}else J.scrollLeft=Math.max(0,te);J.scrollTop=Math.max(0,oe)}},{resetAfterColumnIndex:nt,resetAfterRowIndex:ue,resetAfter:j}=w.proxy;g({windowRef:C,innerRef:k,getItemStyleCache:L,scrollTo:ye,scrollToItem:we,states:M,resetAfterColumnIndex:nt,resetAfterRowIndex:ue,resetAfter:j});const he=()=>{const{scrollbarAlwaysOn:Re,scrollbarStartGap:te,scrollbarEndGap:oe,totalColumn:Ee,totalRow:J}=v,Q=p(G),_e=p(N),ie=p($),Te=p(F),{scrollLeft:We,scrollTop:ut}=p(M),lt=Ut(xE,{ref:T,alwaysOn:Re,startGap:te,endGap:oe,class:_.e("horizontal"),clientSize:Q,layout:"horizontal",onScroll:fe,ratio:Q*100/ie,scrollFrom:We/(ie-Q),total:J,visible:!0}),St=Ut(xE,{ref:I,alwaysOn:Re,startGap:te,endGap:oe,class:_.e("vertical"),clientSize:_e,layout:"vertical",onScroll:le,ratio:_e*100/Te,scrollFrom:ut/(Te-_e),total:Ee,visible:!0});return{horizontalScrollbar:lt,verticalScrollbar:St}},K=()=>{var Re;const[te,oe]=p(V),[Ee,J]=p(X),{data:Q,totalColumn:_e,totalRow:ie,useIsScrolling:Te,itemKey:We}=v,ut=[];if(ie>0&&_e>0)for(let lt=Ee;lt<=J;lt++)for(let St=te;St<=oe;St++){const Ot=We({columnIndex:St,data:Q,rowIndex:lt});ut.push(Ut(xt,{key:Ot},(Re=S.default)==null?void 0:Re.call(S,{columnIndex:St,data:Q,isScrolling:Te?p(M).isScrolling:void 0,style:ve(lt,St),rowIndex:lt})))}return ut},Fe=()=>{const Re=mn(v.innerElement),te=K();return[Ut(Re,{style:p(z),ref:k},kt(Re)?te:{default:()=>te})]};return()=>{const Re=mn(v.containerElement),{horizontalScrollbar:te,verticalScrollbar:oe}=he(),Ee=Fe();return Ut("div",{key:0,class:_.e("wrapper"),role:v.role},[Ut(Re,{class:v.className,style:p(O),onScroll:q,ref:C},kt(Re)?Ee:{default:()=>Ee}),te,oe])}}}),{max:v1,min:h9,floor:f9}=Math,Ske={column:"columnWidth",row:"rowHeight"},OE={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},ec=(t,e,n,r)=>{const[s,i,o]=[n[r],t[Ske[r]],n[OE[r]]];if(e>o){let a=0;if(o>=0){const l=s[o];a=l.offset+l.size}for(let l=o+1;l<=e;l++){const c=i(l);s[l]={offset:a,size:c},a+=c}n[OE[r]]=e}return s[e]},p9=(t,e,n,r,s,i)=>{for(;n<=r;){const o=n+f9((r-n)/2),a=ec(t,o,e,i).offset;if(a===s)return o;a<s?n=o+1:r=o-1}return v1(0,n-1)},Eke=(t,e,n,r,s)=>{const i=s==="column"?t.totalColumn:t.totalRow;let o=1;for(;n<i&&ec(t,n,e,s).offset<r;)n+=o,o*=2;return p9(t,e,f9(n/2),h9(n,i-1),r,s)},iL=(t,e,n,r)=>{const[s,i]=[e[r],e[OE[r]]];return(i>0?s[i].offset:0)>=n?p9(t,e,0,i,n,r):Eke(t,e,v1(0,i),n,r)},m9=({totalRow:t},{estimatedRowHeight:e,lastVisitedRowIndex:n,row:r})=>{let s=0;if(n>=t&&(n=t-1),n>=0){const a=r[n];s=a.offset+a.size}const o=(t-n-1)*e;return s+o},g9=({totalColumn:t},{column:e,estimatedColumnWidth:n,lastVisitedColumnIndex:r})=>{let s=0;if(r>t&&(r=t-1),r>=0){const a=e[r];s=a.offset+a.size}const o=(t-r-1)*n;return s+o},Cke={column:g9,row:m9},oL=(t,e,n,r,s,i,o)=>{const[a,l]=[i==="row"?t.height:t.width,Cke[i]],c=ec(t,e,s,i),u=l(t,s),d=v1(0,h9(u-a,c.offset)),h=v1(0,c.offset-a+o+c.size);switch(n===k_&&(r>=h-a&&r<=d+a?n=Jo:n=ml),n){case Qg:return d;case ev:return h;case ml:return Math.round(h+(d-h)/2);case Jo:default:return r>=h&&r<=d?r:h>d||r<h?h:d}},Tke=d9({name:"ElDynamicSizeGrid",getColumnPosition:(t,e,n)=>{const r=ec(t,e,n,"column");return[r.size,r.offset]},getRowPosition:(t,e,n)=>{const r=ec(t,e,n,"row");return[r.size,r.offset]},getColumnOffset:(t,e,n,r,s,i)=>oL(t,e,n,r,s,"column",i),getRowOffset:(t,e,n,r,s,i)=>oL(t,e,n,r,s,"row",i),getColumnStartIndexForOffset:(t,e,n)=>iL(t,n,e,"column"),getColumnStopIndexForStartIndex:(t,e,n,r)=>{const s=ec(t,e,r,"column"),i=n+t.width;let o=s.offset+s.size,a=e;for(;a<t.totalColumn-1&&o<i;)a++,o+=ec(t,e,r,"column").size;return a},getEstimatedTotalHeight:m9,getEstimatedTotalWidth:g9,getRowStartIndexForOffset:(t,e,n)=>iL(t,n,e,"row"),getRowStopIndexForStartIndex:(t,e,n,r)=>{const{totalRow:s,height:i}=t,o=ec(t,e,r,"row"),a=n+i;let l=o.size+o.offset,c=e;for(;c<s-1&&l<a;)c++,l+=ec(t,c,r,"row").size;return c},injectToInstance:(t,e)=>{const n=({columnIndex:i,rowIndex:o},a)=>{var l,c;a=Bn(a)?!0:a,Ft(i)&&(e.value.lastVisitedColumnIndex=Math.min(e.value.lastVisitedColumnIndex,i-1)),Ft(o)&&(e.value.lastVisitedRowIndex=Math.min(e.value.lastVisitedRowIndex,o-1)),(l=t.exposed)==null||l.getItemStyleCache.value(-1,null,null),a&&((c=t.proxy)==null||c.$forceUpdate())},r=(i,o)=>{n({columnIndex:i},o)},s=(i,o)=>{n({rowIndex:i},o)};Object.assign(t.proxy,{resetAfterColumnIndex:r,resetAfterRowIndex:s,resetAfter:n})},initCache:({estimatedColumnWidth:t=gE,estimatedRowHeight:e=gE})=>({column:{},estimatedColumnWidth:t,estimatedRowHeight:e,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:t,rowHeight:e})=>{}}),Mke=d9({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:t},e)=>[t,e*t],getRowPosition:({rowHeight:t},e)=>[t,e*t],getEstimatedTotalHeight:({totalRow:t,rowHeight:e})=>e*t,getEstimatedTotalWidth:({totalColumn:t,columnWidth:e})=>e*t,getColumnOffset:({totalColumn:t,columnWidth:e,width:n},r,s,i,o,a)=>{n=Number(n);const l=Math.max(0,t*e-n),c=Math.min(l,r*e),u=Math.max(0,r*e-n+a+e);switch(s==="smart"&&(i>=u-n&&i<=c+n?s=Jo:s=ml),s){case Qg:return c;case ev:return u;case ml:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(n/2)?0:d>l+Math.floor(n/2)?l:d}case Jo:default:return i>=u&&i<=c?i:u>c||i<u?u:c}},getRowOffset:({rowHeight:t,height:e,totalRow:n},r,s,i,o,a)=>{e=Number(e);const l=Math.max(0,n*t-e),c=Math.min(l,r*t),u=Math.max(0,r*t-e+a+t);switch(s===k_&&(i>=u-e&&i<=c+e?s=Jo:s=ml),s){case Qg:return c;case ev:return u;case ml:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(e/2)?0:d>l+Math.floor(e/2)?l:d}case Jo:default:return i>=u&&i<=c?i:u>c||i<u?u:c}},getColumnStartIndexForOffset:({columnWidth:t,totalColumn:e},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getColumnStopIndexForStartIndex:({columnWidth:t,totalColumn:e,width:n},r,s)=>{const i=r*t,o=Math.ceil((n+s-i)/t);return Math.max(0,Math.min(e-1,r+o-1))},getRowStartIndexForOffset:({rowHeight:t,totalRow:e},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getRowStopIndexForStartIndex:({rowHeight:t,totalRow:e,height:n},r,s)=>{const i=r*t,o=Math.ceil((n+s-i)/t);return Math.max(0,Math.min(e-1,r+o-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:t,rowHeight:e})=>{}}),Ake="ElTableV2Grid",kke=t=>{const e=H(),n=H(),r=H(0),s=R(()=>{const{data:y,rowHeight:g,estimatedRowHeight:S}=t;if(!S)return y.length*g}),i=R(()=>{const{fixedData:y,rowHeight:g}=t;return((y==null?void 0:y.length)||0)*g}),o=R(()=>db(t.headerHeight)),a=R(()=>{const{height:y}=t;return Math.max(0,y-p(o)-p(i))}),l=R(()=>p(o)+p(i)>0),c=({data:y,rowIndex:g})=>y[g][t.rowKey];function u({rowCacheStart:y,rowCacheEnd:g,rowVisibleStart:S,rowVisibleEnd:_}){var w;(w=t.onRowsRendered)==null||w.call(t,{rowCacheStart:y,rowCacheEnd:g,rowVisibleStart:S,rowVisibleEnd:_})}function d(y,g){var S;(S=n.value)==null||S.resetAfterRowIndex(y,g)}function h(y,g){const S=p(e),_=p(n);un(y)?(S==null||S.scrollToLeft(y.scrollLeft),r.value=y.scrollLeft,_==null||_.scrollTo(y)):(S==null||S.scrollToLeft(y),r.value=y,_==null||_.scrollTo({scrollLeft:y,scrollTop:g}))}function f(y){var g;(g=p(n))==null||g.scrollTo({scrollTop:y})}function m(y,g){var S;(S=p(n))==null||S.scrollToItem(y,1,g)}function v(){var y,g;(y=p(n))==null||y.$forceUpdate(),(g=p(e))==null||g.$forceUpdate()}return Be(()=>t.bodyWidth,()=>{var y;Ft(t.estimatedRowHeight)&&((y=n.value)==null||y.resetAfter({columnIndex:0},!1))}),{bodyRef:n,forceUpdate:v,fixedRowHeight:i,gridHeight:a,hasHeader:l,headerHeight:o,headerRef:e,totalHeight:s,itemKey:c,onItemRendered:u,resetAfterRowIndex:d,scrollTo:h,scrollToTop:f,scrollToRow:m,scrollLeft:r}},Ike=de({name:Ake,props:hb,setup(t,{slots:e,expose:n}){const{ns:r}=_t(WM),{bodyRef:s,fixedRowHeight:i,gridHeight:o,hasHeader:a,headerRef:l,headerHeight:c,totalHeight:u,forceUpdate:d,itemKey:h,onItemRendered:f,resetAfterRowIndex:m,scrollTo:v,scrollToTop:y,scrollToRow:g,scrollLeft:S}=kke(t);Mn(a9,S),t_(async()=>{var w;await Tt();const E=(w=s.value)==null?void 0:w.states.scrollTop;E&&y(Math.round(E)+1)}),n({forceUpdate:d,totalHeight:u,scrollTo:v,scrollToTop:y,scrollToRow:g,resetAfterRowIndex:m});const _=()=>t.bodyWidth;return()=>{const{cache:w,columns:E,data:C,fixedData:T,useIsScrolling:I,scrollbarAlwaysOn:k,scrollbarEndGap:M,scrollbarStartGap:L,style:N,rowHeight:G,bodyWidth:V,estimatedRowHeight:X,headerWidth:F,height:$,width:O,getRowHeight:z,onScroll:re}=t,q=Ft(X),le=q?Tke:Mke,fe=p(c);return ae("div",{role:"table",class:[r.e("table"),t.class],style:N},[ae(le,{ref:s,data:C,useIsScrolling:I,itemKey:h,columnCache:0,columnWidth:q?_:V,totalColumn:1,totalRow:C.length,rowCache:w,rowHeight:q?z:G,width:O,height:p(o),class:r.e("body"),role:"rowgroup",scrollbarStartGap:L,scrollbarEndGap:M,scrollbarAlwaysOn:k,onScroll:re,onItemRendered:f,perfMode:!1},{default:se=>{var ye;const we=C[se.rowIndex];return(ye=e.row)==null?void 0:ye.call(e,{...se,columns:E,rowData:we})}}),p(a)&&ae(wke,{ref:l,class:r.e("header-wrapper"),columns:E,headerData:C,headerHeight:t.headerHeight,fixedHeaderData:T,rowWidth:F,rowHeight:G,width:O,height:Math.min(fe+p(i),$)},{dynamic:e.header,fixed:e.row})])}}});var qM=Ike;function Pke(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!wr(t)}const Rke=(t,{slots:e})=>{const{mainTableRef:n,...r}=t;return ae(qM,yn({ref:n},r),Pke(e)?e:{default:()=>[e]})};var Lke=Rke;function Oke(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!wr(t)}const Nke=(t,{slots:e})=>{if(!t.columns.length)return;const{leftTableRef:n,...r}=t;return ae(qM,yn({ref:n},r),Oke(e)?e:{default:()=>[e]})};var Dke=Nke;function Fke(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!wr(t)}const Bke=(t,{slots:e})=>{if(!t.columns.length)return;const{rightTableRef:n,...r}=t;return ae(qM,yn({ref:n},r),Fke(e)?e:{default:()=>[e]})};var Uke=Bke;const zke=t=>{const{isScrolling:e}=_t(WM),n=H(!1),r=H(),s=R(()=>Ft(t.estimatedRowHeight)&&t.rowIndex>=0),i=(l=!1)=>{const c=p(r);if(!c)return;const{columns:u,onRowHeightChange:d,rowKey:h,rowIndex:f,style:m}=t,{height:v}=c.getBoundingClientRect();n.value=!0,Tt(()=>{if(l||v!==Number.parseInt(m.height)){const y=u[0],g=(y==null?void 0:y.placeholderSign)===iv;d==null||d({rowKey:h,height:v,rowIndex:f},y&&!g&&y.fixed)}})},o=R(()=>{const{rowData:l,rowIndex:c,rowKey:u,onRowHover:d}=t,h=t.rowEventHandlers||{},f={};return Object.entries(h).forEach(([m,v])=>{Lt(v)&&(f[m]=y=>{v({event:y,rowData:l,rowIndex:c,rowKey:u})})}),d&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:m,hovered:v})=>{const y=f[m];f[m]=g=>{d({event:g,hovered:v,rowData:l,rowIndex:c,rowKey:u}),y==null||y(g)}}),f}),a=l=>{const{onRowExpand:c,rowData:u,rowIndex:d,rowKey:h}=t;c==null||c({expanded:l,rowData:u,rowIndex:d,rowKey:h})};return Zt(()=>{p(s)&&i(!0)}),{isScrolling:e,measurable:s,measured:n,rowRef:r,eventHandlers:o,onExpand:a}},$ke="ElTableV2TableRow",Vke=de({name:$ke,props:Bd,setup(t,{expose:e,slots:n,attrs:r}){const{eventHandlers:s,isScrolling:i,measurable:o,measured:a,rowRef:l,onExpand:c}=zke(t);return e({onExpand:c}),()=>{const{columns:u,columnsStyles:d,expandColumnKey:h,depth:f,rowData:m,rowIndex:v,style:y}=t;let g=u.map((S,_)=>{const w=rt(m.children)&&m.children.length>0&&S.key===h;return n.cell({column:S,columns:u,columnIndex:_,depth:f,style:d[S.key],rowData:m,rowIndex:v,isScrolling:p(i),expandIconProps:w?{rowData:m,rowIndex:v,onExpand:c}:void 0})});if(n.row&&(g=n.row({cells:g.map(S=>rt(S)&&S.length===1?S[0]:S),style:y,columns:u,depth:f,rowData:m,rowIndex:v,isScrolling:p(i)})),p(o)){const{height:S,..._}=y||{},w=p(a);return ae("div",yn({ref:l,class:t.class,style:w?y:_,role:"row"},r,p(s)),[g])}return ae("div",yn(r,{ref:l,class:t.class,style:y,role:"row"},p(s)),[g])}}});var Hke=Vke;function Gke(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!wr(t)}const Wke=(t,{slots:e})=>{const{columns:n,columnsStyles:r,depthMap:s,expandColumnKey:i,expandedRowKeys:o,estimatedRowHeight:a,hasFixedColumns:l,rowData:c,rowIndex:u,style:d,isScrolling:h,rowProps:f,rowClass:m,rowKey:v,rowEventHandlers:y,ns:g,onRowHovered:S,onRowExpanded:_}=t,w=oh(m,{columns:n,rowData:c,rowIndex:u},""),E=oh(f,{columns:n,rowData:c,rowIndex:u}),C=c[v],T=s[C]||0,I=!!i,k=u<0,M=[g.e("row"),w,{[g.e(`row-depth-${T}`)]:I&&u>=0,[g.is("expanded")]:I&&o.includes(C),[g.is("fixed")]:!T&&k,[g.is("customized")]:!!e.row}],L=l?S:void 0,N={...E,columns:n,columnsStyles:r,class:M,depth:T,expandColumnKey:i,estimatedRowHeight:k?void 0:a,isScrolling:h,rowIndex:u,rowData:c,rowKey:C,rowEventHandlers:y,style:d};return ae(Hke,yn(N,{onRowExpand:_,onMouseenter:X=>{L==null||L({hovered:!0,rowKey:C,event:X,rowData:c,rowIndex:u})},onMouseleave:X=>{L==null||L({hovered:!1,rowKey:C,event:X,rowData:c,rowIndex:u})},rowkey:C}),Gke(e)?e:{default:()=>[e]})};var jke=Wke;const YM=(t,{slots:e})=>{var n;const{cellData:r,style:s}=t,i=((n=r==null?void 0:r.toString)==null?void 0:n.call(r))||"",o=Ae(e,"default",t,()=>[i]);return ae("div",{class:t.class,title:i,style:s},[o])};YM.displayName="ElTableV2Cell";YM.inheritAttrs=!1;var Kke=YM;const qke=t=>{const{expanded:e,expandable:n,onExpand:r,style:s,size:i}=t,o={onClick:n?()=>r(!e):void 0,class:t.class};return ae(Et,yn(o,{size:i,style:s}),{default:()=>[ae(Ai,null,null)]})};var Yke=qke;const v9=({columns:t,column:e,columnIndex:n,depth:r,expandIconProps:s,isScrolling:i,rowData:o,rowIndex:a,style:l,expandedRowKeys:c,ns:u,cellProps:d,expandColumnKey:h,indentSize:f,iconSize:m,rowKey:v},{slots:y})=>{const g=Eu(l);if(e.placeholderSign===iv)return ae("div",{class:u.em("row-cell","placeholder"),style:g},null);const{cellRenderer:S,dataKey:_,dataGetter:w}=e,E=Lt(w)?w({columns:t,column:e,columnIndex:n,rowData:o,rowIndex:a}):cs(o,_??""),C=oh(d,{cellData:E,columns:t,column:e,columnIndex:n,rowIndex:a,rowData:o}),T={class:u.e("cell-text"),columns:t,column:e,columnIndex:n,cellData:E,isScrolling:i,rowData:o,rowIndex:a},I=o9(S),k=I?I(T):Ae(y,"default",T,()=>[ae(Kke,T,null)]),M=[u.e("row-cell"),e.class,e.align===sv.CENTER&&u.is("align-center"),e.align===sv.RIGHT&&u.is("align-right")],L=a>=0&&h&&e.key===h,N=a>=0&&c.includes(o[v]);let G;const V=`margin-inline-start: ${r*f}px;`;return L&&(un(s)?G=ae(Yke,yn(s,{class:[u.e("expand-icon"),u.is("expanded",N)],size:m,expanded:N,style:V,expandable:!0}),null):G=ae("div",{style:[V,`width: ${m}px; height: ${m}px;`].join(" ")},null)),ae("div",yn({class:M,style:g},C,{role:"cell"}),[G,k])};v9.inheritAttrs=!1;var aL=v9;const Xke=it({class:String,columns:Bv,columnsStyles:{type:Ce(Object),required:!0},headerIndex:Number,style:{type:Ce(Object)}}),Zke=de({name:"ElTableV2HeaderRow",props:Xke,setup(t,{slots:e}){return()=>{const{columns:n,columnsStyles:r,headerIndex:s,style:i}=t;let o=n.map((a,l)=>e.cell({columns:n,column:a,columnIndex:l,headerIndex:s,style:r[a.key]}));return e.header&&(o=e.header({cells:o.map(a=>rt(a)&&a.length===1?a[0]:a),columns:n,headerIndex:s})),ae("div",{class:t.class,style:i,role:"row"},[o])}}});var Jke=Zke;function Qke(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!wr(t)}const eIe=({columns:t,columnsStyles:e,headerIndex:n,style:r,headerClass:s,headerProps:i,ns:o},{slots:a})=>{const l={columns:t,headerIndex:n},c=[o.e("header-row"),oh(s,l,""),{[o.is("customized")]:!!a.header}],u={...oh(i,l),columnsStyles:e,class:c,columns:t,headerIndex:n,style:r};return ae(Jke,u,Qke(a)?a:{default:()=>[a]})};var tIe=eIe;const XM=(t,{slots:e})=>Ae(e,"default",t,()=>{var n,r;return[ae("div",{class:t.class,title:(n=t.column)==null?void 0:n.title},[(r=t.column)==null?void 0:r.title])]});XM.displayName="ElTableV2HeaderCell";XM.inheritAttrs=!1;var nIe=XM;const rIe=t=>{const{sortOrder:e}=t;return ae(Et,{size:14,class:t.class},{default:()=>[e===rv.ASC?ae(Gge,null,null):ae(Vge,null,null)]})};var sIe=rIe;const iIe=(t,{slots:e})=>{const{column:n,ns:r,style:s,onColumnSorted:i}=t,o=Eu(s);if(n.placeholderSign===iv)return ae("div",{class:r.em("header-row-cell","placeholder"),style:o},null);const{headerCellRenderer:a,headerClass:l,sortable:c}=n,u={...t,class:r.e("header-cell-text")},d=o9(a),h=d?d(u):Ae(e,"default",u,()=>[ae(nIe,u,null)]),{sortBy:f,sortState:m,headerCellProps:v}=t;let y,g;if(m){const w=m[n.key];y=!!LE[w],g=y?w:rv.ASC}else y=n.key===f.key,g=y?f.order:rv.ASC;const S=[r.e("header-cell"),oh(l,t,""),n.align===sv.CENTER&&r.is("align-center"),n.align===sv.RIGHT&&r.is("align-right"),c&&r.is("sortable")],_={...oh(v,t),onClick:n.sortable?i:void 0,class:S,style:o,"data-key":n.key};return ae("div",yn(_,{role:"columnheader"}),[h,c&&ae(sIe,{class:[r.e("sort-icon"),y&&r.is("sorting")],sortOrder:g},null)])};var lL=iIe;const y9=(t,{slots:e})=>{var n;return ae("div",{class:t.class,style:t.style},[(n=e.default)==null?void 0:n.call(e)])};y9.displayName="ElTableV2Footer";var oIe=y9;const b9=(t,{slots:e})=>{const n=Ae(e,"default",{},()=>[ae(d7,null,null)]);return ae("div",{class:t.class,style:t.style},[n])};b9.displayName="ElTableV2Empty";var aIe=b9;const _9=(t,{slots:e})=>{var n;return ae("div",{class:t.class,style:t.style},[(n=e.default)==null?void 0:n.call(e)])};_9.displayName="ElTableV2Overlay";var lIe=_9;function Cm(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!wr(t)}const cIe="ElTableV2",uIe=de({name:cIe,props:yke,setup(t,{slots:e,expose:n}){const r=Qe("table-v2"),{columnsStyles:s,fixedColumnsOnLeft:i,fixedColumnsOnRight:o,mainColumns:a,mainTableHeight:l,fixedTableHeight:c,leftTableWidth:u,rightTableWidth:d,data:h,depthMap:f,expandedRowKeys:m,hasFixedColumns:v,mainTableRef:y,leftTableRef:g,rightTableRef:S,isDynamic:_,isResetting:w,isScrolling:E,bodyWidth:C,emptyStyle:T,rootStyle:I,footerHeight:k,showEmpty:M,scrollTo:L,scrollToLeft:N,scrollToTop:G,scrollToRow:V,getRowHeight:X,onColumnSorted:F,onRowHeightChange:$,onRowHovered:O,onRowExpanded:z,onRowsRendered:re,onScroll:q,onVerticalScroll:le}=gke(t);return n({scrollTo:L,scrollToLeft:N,scrollToTop:G,scrollToRow:V}),Mn(WM,{ns:r,isResetting:w,isScrolling:E}),()=>{const{cache:fe,cellProps:se,estimatedRowHeight:ye,expandColumnKey:we,fixedData:ve,headerHeight:xe,headerClass:je,headerProps:nt,headerCellProps:ue,sortBy:j,sortState:he,rowHeight:K,rowClass:Fe,rowEventHandlers:Oe,rowKey:Re,rowProps:te,scrollbarAlwaysOn:oe,indentSize:Ee,iconSize:J,useIsScrolling:Q,vScrollbarSize:_e,width:ie}=t,Te=p(h),We={cache:fe,class:r.e("main"),columns:p(a),data:Te,fixedData:ve,estimatedRowHeight:ye,bodyWidth:p(C),headerHeight:xe,headerWidth:p(C),height:p(l),mainTableRef:y,rowKey:Re,rowHeight:K,scrollbarAlwaysOn:oe,scrollbarStartGap:2,scrollbarEndGap:_e,useIsScrolling:Q,width:ie,getRowHeight:X,onRowsRendered:re,onScroll:q},ut=p(u),lt=p(c),St={cache:fe,class:r.e("left"),columns:p(i),data:Te,fixedData:ve,estimatedRowHeight:ye,leftTableRef:g,rowHeight:K,bodyWidth:ut,headerWidth:ut,headerHeight:xe,height:lt,rowKey:Re,scrollbarAlwaysOn:oe,scrollbarStartGap:2,scrollbarEndGap:_e,useIsScrolling:Q,width:ut,getRowHeight:X,onScroll:le},Ot=p(d),et={cache:fe,class:r.e("right"),columns:p(o),data:Te,fixedData:ve,estimatedRowHeight:ye,rightTableRef:S,rowHeight:K,bodyWidth:Ot,headerWidth:Ot,headerHeight:xe,height:lt,rowKey:Re,scrollbarAlwaysOn:oe,scrollbarStartGap:2,scrollbarEndGap:_e,width:Ot,style:`--${p(r.namespace)}-table-scrollbar-size: ${_e}px`,useIsScrolling:Q,getRowHeight:X,onScroll:le},ht=p(s),Mt={ns:r,depthMap:p(f),columnsStyles:ht,expandColumnKey:we,expandedRowKeys:p(m),estimatedRowHeight:ye,hasFixedColumns:p(v),rowProps:te,rowClass:Fe,rowKey:Re,rowEventHandlers:Oe,onRowHovered:O,onRowExpanded:z,onRowHeightChange:$},ze={cellProps:se,expandColumnKey:we,indentSize:Ee,iconSize:J,rowKey:Re,expandedRowKeys:p(m),ns:r},Me={ns:r,headerClass:je,headerProps:nt,columnsStyles:ht},be={ns:r,sortBy:j,sortState:he,headerCellProps:ue,onColumnSorted:F},Ve={row:Ct=>ae(jke,yn(Ct,Mt),{row:e.row,cell:st=>{let vt;return e.cell?ae(aL,yn(st,ze,{style:ht[st.column.key]}),Cm(vt=e.cell(st))?vt:{default:()=>[vt]}):ae(aL,yn(st,ze,{style:ht[st.column.key]}),null)}}),header:Ct=>ae(tIe,yn(Ct,Me),{header:e.header,cell:st=>{let vt;return e["header-cell"]?ae(lL,yn(st,be,{style:ht[st.column.key]}),Cm(vt=e["header-cell"](st))?vt:{default:()=>[vt]}):ae(lL,yn(st,be,{style:ht[st.column.key]}),null)}})},mt=[t.class,r.b(),r.e("root"),{[r.is("dynamic")]:p(_)}],Ue={class:r.e("footer"),style:p(k)};return ae("div",{class:mt,style:p(I)},[ae(Lke,We,Cm(Ve)?Ve:{default:()=>[Ve]}),ae(Dke,St,Cm(Ve)?Ve:{default:()=>[Ve]}),ae(Uke,et,Cm(Ve)?Ve:{default:()=>[Ve]}),e.footer&&ae(oIe,Ue,{default:e.footer}),p(M)&&ae(aIe,{class:r.e("empty"),style:p(T)},{default:e.empty}),e.overlay&&ae(lIe,{class:r.e("overlay")},{default:e.overlay})])}}});var dIe=uIe;const hIe=it({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:Ce(Function)}}),fIe=t=>{const e=H(),n=H(0),r=H(0);let s;return Zt(()=>{s=Ir(e,([i])=>{const{width:o,height:a}=i.contentRect,{paddingLeft:l,paddingRight:c,paddingTop:u,paddingBottom:d}=getComputedStyle(i.target),h=Number.parseInt(l)||0,f=Number.parseInt(c)||0,m=Number.parseInt(u)||0,v=Number.parseInt(d)||0;n.value=o-h-f,r.value=a-m-v}).stop}),Xn(()=>{s==null||s()}),Be([n,r],([i,o])=>{var a;(a=t.onResize)==null||a.call(t,{width:i,height:o})}),{sizer:e,width:n,height:r}},pIe=de({name:"ElAutoResizer",props:hIe,setup(t,{slots:e}){const n=Qe("auto-resizer"),{height:r,width:s,sizer:i}=fIe(t),o={width:"100%",height:"100%"};return()=>{var a;return ae("div",{ref:i,class:n.b(),style:o},[(a=e.default)==null?void 0:a.call(e,{height:r.value,width:s.value})])}}});var mIe=pIe;const gIe=nn(dIe),vIe=nn(mIe),I_=Symbol("tabsRootContextKey"),yIe=it({tabs:{type:Ce(Array),default:()=>Fr([])},tabRefs:{type:Ce(Object),default:()=>Fr({})}}),w9="ElTabBar",bIe=de({name:w9}),_Ie=de({...bIe,props:yIe,setup(t,{expose:e}){const n=t,r=_t(I_);r||hs(w9,"<el-tabs><el-tab-bar /></el-tabs>");const s=Qe("tabs"),i=H(),o=H(),a=()=>{let h=0,f=0;const m=["top","bottom"].includes(r.props.tabPosition)?"width":"height",v=m==="width"?"x":"y",y=v==="x"?"left":"top";return n.tabs.every(g=>{if(Bn(g.paneName))return!1;const S=n.tabRefs[g.paneName];if(!S)return!1;if(!g.active)return!0;h=S[`offset${_u(y)}`],f=S[`client${_u(m)}`];const _=window.getComputedStyle(S);return m==="width"&&(f-=Number.parseFloat(_.paddingLeft)+Number.parseFloat(_.paddingRight),h+=Number.parseFloat(_.paddingLeft)),!1}),{[m]:`${f}px`,transform:`translate${_u(v)}(${h}px)`}},l=()=>o.value=a(),c=[],u=()=>{c.forEach(h=>h.stop()),c.length=0,Object.values(n.tabRefs).forEach(h=>{c.push(Ir(h,l))})};Be(()=>n.tabs,async()=>{await Tt(),l(),u()},{immediate:!0});const d=Ir(i,()=>l());return Xn(()=>{c.forEach(h=>h.stop()),c.length=0,d.stop()}),e({ref:i,update:l}),(h,f)=>(D(),Z("div",{ref_key:"barRef",ref:i,class:U([p(s).e("active-bar"),p(s).is(p(r).props.tabPosition)]),style:Pt(o.value)},null,6))}});var wIe=at(_Ie,[["__file","tab-bar.vue"]]);const xIe=it({panes:{type:Ce(Array),default:()=>Fr([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),SIe={tabClick:(t,e,n)=>n instanceof Event,tabRemove:(t,e)=>e instanceof Event},cL="ElTabNav",EIe=de({name:cL,props:xIe,emits:SIe,setup(t,{expose:e,emit:n}){const r=_t(I_);r||hs(cL,"<el-tabs><tab-nav /></el-tabs>");const s=Qe("tabs"),i=ame(),o=wme(),a=H(),l=H(),c=H(),u=H({}),d=H(),h=H(!1),f=H(0),m=H(!1),v=H(!0),y=br(),g=R(()=>["top","bottom"].includes(r.props.tabPosition)?"width":"height"),S=R(()=>({transform:`translate${g.value==="width"?"X":"Y"}(-${f.value}px)`})),_=()=>{if(!a.value)return;const N=a.value[`offset${_u(g.value)}`],G=f.value;if(!G)return;const V=G>N?G-N:0;f.value=V},w=()=>{if(!a.value||!l.value)return;const N=l.value[`offset${_u(g.value)}`],G=a.value[`offset${_u(g.value)}`],V=f.value;if(N-V<=G)return;const X=N-V>G*2?V+G:N-G;f.value=X},E=async()=>{const N=l.value;if(!h.value||!c.value||!a.value||!N)return;await Tt();const G=u.value[t.currentName];if(!G)return;const V=a.value,X=["top","bottom"].includes(r.props.tabPosition),F=G.getBoundingClientRect(),$=V.getBoundingClientRect(),O=X?N.offsetWidth-$.width:N.offsetHeight-$.height,z=f.value;let re=z;X?(F.left<$.left&&(re=z-($.left-F.left)),F.right>$.right&&(re=z+F.right-$.right)):(F.top<$.top&&(re=z-($.top-F.top)),F.bottom>$.bottom&&(re=z+(F.bottom-$.bottom))),re=Math.max(re,0),f.value=Math.min(re,O)},C=()=>{var N;if(!l.value||!a.value)return;t.stretch&&((N=d.value)==null||N.update());const G=l.value[`offset${_u(g.value)}`],V=a.value[`offset${_u(g.value)}`],X=f.value;V<G?(h.value=h.value||{},h.value.prev=X,h.value.next=X+V<G,G-X<V&&(f.value=G-V)):(h.value=!1,X>0&&(f.value=0))},T=N=>{let G=0;switch(N.code){case bt.left:case bt.up:G=-1;break;case bt.right:case bt.down:G=1;break;default:return}const V=Array.from(N.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let F=V.indexOf(N.target)+G;F<0?F=V.length-1:F>=V.length&&(F=0),V[F].focus({preventScroll:!0}),V[F].click(),I()},I=()=>{v.value&&(m.value=!0)},k=()=>m.value=!1,M=(N,G)=>{u.value[G]=N},L=async()=>{await Tt();const N=u.value[t.currentName];N==null||N.focus({preventScroll:!0})};return Be(i,N=>{N==="hidden"?v.value=!1:N==="visible"&&setTimeout(()=>v.value=!0,50)}),Be(o,N=>{N?setTimeout(()=>v.value=!0,50):v.value=!1}),Ir(c,C),Zt(()=>setTimeout(()=>E(),0)),qa(()=>C()),e({scrollToActiveTab:E,removeFocus:k,focusActiveTab:L,tabListRef:l,tabBarRef:d,scheduleRender:()=>Xy(y)}),()=>{const N=h.value?[ae("span",{class:[s.e("nav-prev"),s.is("disabled",!h.value.prev)],onClick:_},[ae(Et,null,{default:()=>[ae(Sc,null,null)]})]),ae("span",{class:[s.e("nav-next"),s.is("disabled",!h.value.next)],onClick:w},[ae(Et,null,{default:()=>[ae(Ai,null,null)]})])]:null,G=t.panes.map((V,X)=>{var F,$,O,z;const re=V.uid,q=V.props.disabled,le=($=(F=V.props.name)!=null?F:V.index)!=null?$:`${X}`,fe=!q&&(V.isClosable||t.editable);V.index=`${X}`;const se=fe?ae(Et,{class:"is-icon-close",onClick:ve=>n("tabRemove",V,ve)},{default:()=>[ae(ra,null,null)]}):null,ye=((z=(O=V.slots).label)==null?void 0:z.call(O))||V.props.label,we=!q&&V.active?0:-1;return ae("div",{ref:ve=>M(ve,le),class:[s.e("item"),s.is(r.props.tabPosition),s.is("active",V.active),s.is("disabled",q),s.is("closable",fe),s.is("focus",m.value)],id:`tab-${le}`,key:`tab-${re}`,"aria-controls":`pane-${le}`,role:"tab","aria-selected":V.active,tabindex:we,onFocus:()=>I(),onBlur:()=>k(),onClick:ve=>{k(),n("tabClick",V,le,ve)},onKeydown:ve=>{fe&&(ve.code===bt.delete||ve.code===bt.backspace)&&n("tabRemove",V,ve)}},[ye,se])});return y.value,ae("div",{ref:c,class:[s.e("nav-wrap"),s.is("scrollable",!!h.value),s.is(r.props.tabPosition)]},[N,ae("div",{class:s.e("nav-scroll"),ref:a},[t.panes.length>0?ae("div",{class:[s.e("nav"),s.is(r.props.tabPosition),s.is("stretch",t.stretch&&["top","bottom"].includes(r.props.tabPosition))],ref:l,style:S.value,role:"tablist",onKeydown:T},[t.type?null:ae(wIe,{ref:d,tabs:[...t.panes],tabRefs:u.value},null),G]):null])])}}}),CIe=it({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Ce(Function),default:()=>!0},stretch:Boolean}),Vx=t=>kt(t)||Ft(t),TIe={[Qt]:t=>Vx(t),tabClick:(t,e)=>e instanceof Event,tabChange:t=>Vx(t),edit:(t,e)=>["remove","add"].includes(e),tabRemove:t=>Vx(t),tabAdd:()=>!0},MIe=de({name:"ElTabs",props:CIe,emits:TIe,setup(t,{emit:e,slots:n,expose:r}){var s;const i=Qe("tabs"),o=R(()=>["left","right"].includes(t.tabPosition)),{children:a,addChild:l,removeChild:c,ChildrenSorter:u}=x_(tn(),"ElTabPane"),d=H(),h=H((s=t.modelValue)!=null?s:"0"),f=async(S,_=!1)=>{var w,E,C,T;if(!(h.value===S||Bn(S)))try{let I;if(t.beforeLeave){const k=t.beforeLeave(S,h.value);I=k instanceof Promise?await k:k}else I=!0;if(I!==!1){const k=(w=a.value.find(M=>M.paneName===h.value))==null?void 0:w.isFocusInsidePane();h.value=S,_&&(e(Qt,S),e("tabChange",S)),(C=(E=d.value)==null?void 0:E.removeFocus)==null||C.call(E),k&&((T=d.value)==null||T.focusActiveTab())}}catch{}},m=(S,_,w)=>{S.props.disabled||(e("tabClick",S,w),f(_,!0))},v=(S,_)=>{S.props.disabled||Bn(S.props.name)||(_.stopPropagation(),e("edit",S.props.name,"remove"),e("tabRemove",S.props.name))},y=()=>{e("edit",void 0,"add"),e("tabAdd")},g=S=>{const _=S.el.firstChild,w=["bottom","right"].includes(t.tabPosition)?S.children[0].el:S.children[1].el;_!==w&&_.before(w)};return Be(()=>t.modelValue,S=>f(S)),Be(h,async()=>{var S;await Tt(),(S=d.value)==null||S.scrollToActiveTab()}),Mn(I_,{props:t,currentName:h,registerPane:l,unregisterPane:c,nav$:d}),r({currentName:h,get tabNavRef(){return f5(d.value,["scheduleRender"])}}),()=>{const S=n["add-icon"],_=t.editable||t.addable?ae("div",{class:[i.e("new-tab"),o.value&&i.e("new-tab-vertical")],tabindex:"0",onClick:y,onKeydown:T=>{[bt.enter,bt.numpadEnter].includes(T.code)&&y()}},[S?Ae(n,"add-icon"):ae(Et,{class:i.is("icon-plus")},{default:()=>[ae(uU,null,null)]})]):null,w=()=>ae(EIe,{ref:d,currentName:h.value,editable:t.editable,type:t.type,panes:a.value,stretch:t.stretch,onTabClick:m,onTabRemove:v},null),E=ae("div",{class:[i.e("header"),o.value&&i.e("header-vertical"),i.is(t.tabPosition)]},[ae(u,null,{default:w,$stable:!0}),_]),C=ae("div",{class:i.e("content")},[Ae(n,"default")]);return ae("div",{class:[i.b(),i.m(t.tabPosition),{[i.m("card")]:t.type==="card",[i.m("border-card")]:t.type==="border-card"}],onVnodeMounted:g,onVnodeUpdated:g},[C,E])}}});var AIe=MIe;const kIe=it({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),x9="ElTabPane",IIe=de({name:x9}),PIe=de({...IIe,props:kIe,setup(t){const e=t,n=tn(),r=bs(),s=_t(I_);s||hs(x9,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const i=Qe("tab-pane"),o=H(),a=H(),l=R(()=>e.closable||s.props.closable),c=Jb(()=>{var v;return s.currentName.value===((v=e.name)!=null?v:a.value)}),u=H(c.value),d=R(()=>{var v;return(v=e.name)!=null?v:a.value}),h=Jb(()=>!e.lazy||u.value||c.value),f=()=>{var v;return(v=o.value)==null?void 0:v.contains(document.activeElement)};Be(c,v=>{v&&(u.value=!0)});const m=Ln({uid:n.uid,getVnode:()=>n.vnode,slots:r,props:e,paneName:d,active:c,index:a,isClosable:l,isFocusInsidePane:f});return s.registerPane(m),Xn(()=>{s.unregisterPane(m)}),s_(()=>{var v;r.label&&((v=s.nav$.value)==null||v.scheduleRender())}),(v,y)=>p(h)?cn((D(),Z("div",{key:0,id:`pane-${p(d)}`,ref_key:"paneRef",ref:o,class:U(p(i).b()),role:"tabpanel","aria-hidden":!p(c),"aria-labelledby":`tab-${p(d)}`},[Ae(v.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Wn,p(c)]]):Pe("v-if",!0)}});var S9=at(PIe,[["__file","tab-pane.vue"]]);const RIe=nn(AIe,{TabPane:S9}),LIe=Br(S9),OIe=it({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Rl,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),NIe=de({name:"ElText"}),DIe=de({...NIe,props:OIe,setup(t){const e=t,n=H(),r=ys(),s=Qe("text"),i=R(()=>[s.b(),s.m(e.type),s.m(r.value),s.is("truncated",e.truncated),s.is("line-clamp",!Bn(e.lineClamp))]),o=()=>{var a,l,c,u,d,h,f;if(Pc().title)return;let v=!1;const y=((a=n.value)==null?void 0:a.textContent)||"";if(e.truncated){const g=(l=n.value)==null?void 0:l.offsetWidth,S=(c=n.value)==null?void 0:c.scrollWidth;g&&S&&S>g&&(v=!0)}else if(!Bn(e.lineClamp)){const g=(u=n.value)==null?void 0:u.offsetHeight,S=(d=n.value)==null?void 0:d.scrollHeight;g&&S&&S>g&&(v=!0)}v?(h=n.value)==null||h.setAttribute("title",y):(f=n.value)==null||f.removeAttribute("title")};return Zt(o),qa(o),(a,l)=>(D(),Le(mn(a.tag),{ref_key:"textRef",ref:n,class:U(p(i)),style:Pt({"-webkit-line-clamp":a.lineClamp})},{default:me(()=>[Ae(a.$slots,"default")]),_:3},8,["class","style"]))}});var FIe=at(DIe,[["__file","text.vue"]]);const ZM=nn(FIe),BIe=it({format:{type:String,default:"HH:mm"},modelValue:{type:Ce(String)},disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:Ce(String),default:"light"},clearable:{type:Boolean,default:!0},size:Es,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:{type:Ce(String)},maxTime:{type:Ce(String)},includeEndTime:Boolean,name:String,prefixIcon:{type:Ce([String,Object]),default:()=>cU},clearIcon:{type:Ce([String,Object]),default:()=>Rc},...yh}),sc=t=>{const e=(t||"").split(":");if(e.length>=2){let n=Number.parseInt(e[0],10);const r=Number.parseInt(e[1],10),s=t.toUpperCase();return s.includes("AM")&&n===12?n=0:s.includes("PM")&&n!==12&&(n+=12),{hours:n,minutes:r}}return null},Hx=(t,e)=>{const n=sc(t);if(!n)return-1;const r=sc(e);if(!r)return-1;const s=n.minutes+n.hours*60,i=r.minutes+r.hours*60;return s===i?0:s>i?1:-1},uL=t=>`${t}`.padStart(2,"0"),Cf=t=>`${uL(t.hours)}:${uL(t.minutes)}`,UIe=(t,e)=>{const n=sc(t);if(!n)return"";const r=sc(e);if(!r)return"";const s={hours:n.hours,minutes:n.minutes};return s.minutes+=r.minutes,s.hours+=r.hours,s.hours+=Math.floor(s.minutes/60),s.minutes=s.minutes%60,Cf(s)},zIe=de({name:"ElTimeSelect"}),$Ie=de({...zIe,props:BIe,emits:[xn,"blur","focus","clear",Qt],setup(t,{expose:e}){const n=t;an.extend(fM);const{Option:r}=ih,s=Qe("input"),i=H(),o=pi(),{lang:a}=zn(),l=R(()=>n.modelValue),c=R(()=>{const g=sc(n.start);return g?Cf(g):null}),u=R(()=>{const g=sc(n.end);return g?Cf(g):null}),d=R(()=>{const g=sc(n.step);return g?Cf(g):null}),h=R(()=>{const g=sc(n.minTime||"");return g?Cf(g):null}),f=R(()=>{const g=sc(n.maxTime||"");return g?Cf(g):null}),m=R(()=>{var g;const S=[],_=(w,E)=>{S.push({value:w,disabled:Hx(E,h.value||"-1:-1")<=0||Hx(E,f.value||"100:100")>=0})};if(n.start&&n.end&&n.step){let w=c.value,E;for(;w&&u.value&&Hx(w,u.value)<=0;)E=an(w,"HH:mm").locale(a.value).format(n.format),_(E,w),w=UIe(w,d.value);if(n.includeEndTime&&u.value&&((g=S[S.length-1])==null?void 0:g.value)!==u.value){const C=an(u.value,"HH:mm").locale(a.value).format(n.format);_(C,u.value)}}return S});return e({blur:()=>{var g,S;(S=(g=i.value)==null?void 0:g.blur)==null||S.call(g)},focus:()=>{var g,S;(S=(g=i.value)==null?void 0:g.focus)==null||S.call(g)}}),(g,S)=>(D(),Le(p(ih),{ref_key:"select",ref:i,"model-value":p(l),disabled:p(o),clearable:g.clearable,"clear-icon":g.clearIcon,size:g.size,effect:g.effect,placeholder:g.placeholder,"default-first-option":"",filterable:g.editable,"empty-values":g.emptyValues,"value-on-clear":g.valueOnClear,"onUpdate:modelValue":_=>g.$emit(p(Qt),_),onChange:_=>g.$emit(p(xn),_),onBlur:_=>g.$emit("blur",_),onFocus:_=>g.$emit("focus",_),onClear:()=>g.$emit("clear")},{prefix:me(()=>[g.prefixIcon?(D(),Le(p(Et),{key:0,class:U(p(s).e("prefix-icon"))},{default:me(()=>[(D(),Le(mn(g.prefixIcon)))]),_:1},8,["class"])):Pe("v-if",!0)]),default:me(()=>[(D(!0),Z(xt,null,_n(p(m),_=>(D(),Le(p(r),{key:_.value,label:_.value,value:_.value,disabled:_.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable","empty-values","value-on-clear","onUpdate:modelValue","onChange","onBlur","onFocus","onClear"]))}});var VIe=at($Ie,[["__file","time-select.vue"]]);const HIe=nn(VIe),GIe="timeline",WIe=de({name:"ElTimeline",setup(t,{slots:e}){const n=Qe("timeline");return Mn(GIe,e),()=>Ut("ul",{class:[n.b()]},[Ae(e,"default")])}}),jIe=it({timestamp:{type:String,default:""},hideTimestamp:Boolean,center:Boolean,placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:or},hollow:Boolean}),KIe=de({name:"ElTimelineItem"}),qIe=de({...KIe,props:jIe,setup(t){const e=t,n=Qe("timeline-item"),r=R(()=>[n.e("node"),n.em("node",e.size||""),n.em("node",e.type||""),n.is("hollow",e.hollow)]);return(s,i)=>(D(),Z("li",{class:U([p(n).b(),{[p(n).e("center")]:s.center}])},[ne("div",{class:U(p(n).e("tail"))},null,2),s.$slots.dot?Pe("v-if",!0):(D(),Z("div",{key:0,class:U(p(r)),style:Pt({backgroundColor:s.color})},[s.icon?(D(),Le(p(Et),{key:0,class:U(p(n).e("icon"))},{default:me(()=>[(D(),Le(mn(s.icon)))]),_:1},8,["class"])):Pe("v-if",!0)],6)),s.$slots.dot?(D(),Z("div",{key:1,class:U(p(n).e("dot"))},[Ae(s.$slots,"dot")],2)):Pe("v-if",!0),ne("div",{class:U(p(n).e("wrapper"))},[!s.hideTimestamp&&s.placement==="top"?(D(),Z("div",{key:0,class:U([p(n).e("timestamp"),p(n).is("top")])},tt(s.timestamp),3)):Pe("v-if",!0),ne("div",{class:U(p(n).e("content"))},[Ae(s.$slots,"default")],2),!s.hideTimestamp&&s.placement==="bottom"?(D(),Z("div",{key:1,class:U([p(n).e("timestamp"),p(n).is("bottom")])},tt(s.timestamp),3)):Pe("v-if",!0)],2)],2))}});var E9=at(qIe,[["__file","timeline-item.vue"]]);const YIe=nn(WIe,{TimelineItem:E9}),XIe=Br(E9),C9=it({nowrap:Boolean});var T9=(t=>(t.top="top",t.bottom="bottom",t.left="left",t.right="right",t))(T9||{});const ZIe=Object.values(T9),JM=it({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:Ce(Object),default:null}}),JIe=it({side:{type:Ce(String),values:ZIe,required:!0}}),QIe=["absolute","fixed"],ePe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],QM=it({arrowPadding:{type:Ce(Number),default:5},effect:{type:Ce(String),default:"light"},contentClass:String,placement:{type:Ce(String),values:ePe,default:"bottom"},reference:{type:Ce(Object),default:null},offset:{type:Number,default:8},strategy:{type:Ce(String),values:QIe,default:"absolute"},showArrow:Boolean,...hi(["ariaLabel"])}),eA=it({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:Ce(Function)},"onUpdate:open":{type:Ce(Function)}}),ff={type:Ce(Function)},tA=it({onBlur:ff,onClick:ff,onFocus:ff,onMouseDown:ff,onMouseEnter:ff,onMouseLeave:ff}),tPe=it({...eA,...JM,...tA,...QM,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:Ce(Object),default:null},teleported:Boolean,to:{type:Ce([String,Object]),default:"body"}}),P_=Symbol("tooltipV2"),M9=Symbol("tooltipV2Content"),Gx="tooltip_v2.open",nPe=de({name:"ElTooltipV2Root"}),rPe=de({...nPe,props:eA,setup(t,{expose:e}){const n=t,r=H(n.defaultOpen),s=H(null),i=R({get:()=>ho(n.open)?r.value:n.open,set:y=>{var g;r.value=y,(g=n["onUpdate:open"])==null||g.call(n,y)}}),o=R(()=>Ft(n.delayDuration)&&n.delayDuration>0),{start:a,stop:l}=rh(()=>{i.value=!0},R(()=>n.delayDuration),{immediate:!1}),c=Qe("tooltip-v2"),u=ni(),d=()=>{l(),i.value=!0},h=()=>{p(o)?a():d()},f=d,m=()=>{l(),i.value=!1};return Be(i,y=>{var g;y&&(document.dispatchEvent(new CustomEvent(Gx)),f()),(g=n.onOpenChange)==null||g.call(n,y)}),Zt(()=>{document.addEventListener(Gx,m)}),Xn(()=>{l(),document.removeEventListener(Gx,m)}),Mn(P_,{contentId:u,triggerRef:s,ns:c,onClose:m,onDelayOpen:h,onOpen:f}),e({onOpen:f,onClose:m}),(y,g)=>Ae(y.$slots,"default",{open:p(i)})}});var sPe=at(rPe,[["__file","root.vue"]]);const iPe=de({name:"ElTooltipV2Arrow"}),oPe=de({...iPe,props:{...JM,...JIe},setup(t){const e=t,{ns:n}=_t(P_),{arrowRef:r}=_t(M9),s=R(()=>{const{style:i,width:o,height:a}=e,l=n.namespace.value;return{[`--${l}-tooltip-v2-arrow-width`]:`${o}px`,[`--${l}-tooltip-v2-arrow-height`]:`${a}px`,[`--${l}-tooltip-v2-arrow-border-width`]:`${o/2}px`,[`--${l}-tooltip-v2-arrow-cover-width`]:o/2-1,...i||{}}});return(i,o)=>(D(),Z("span",{ref_key:"arrowRef",ref:r,style:Pt(p(s)),class:U(p(n).e("arrow"))},null,6))}});var dL=at(oPe,[["__file","arrow.vue"]]);const Ap=Math.min,Kd=Math.max,y1=Math.round,Cy=Math.floor,_l=t=>({x:t,y:t}),aPe={left:"right",right:"left",bottom:"top",top:"bottom"},lPe={start:"end",end:"start"};function NE(t,e,n){return Kd(t,Ap(e,n))}function Uv(t,e){return typeof t=="function"?t(e):t}function ah(t){return t.split("-")[0]}function zv(t){return t.split("-")[1]}function A9(t){return t==="x"?"y":"x"}function nA(t){return t==="y"?"height":"width"}const cPe=new Set(["top","bottom"]);function Cu(t){return cPe.has(ah(t))?"y":"x"}function rA(t){return A9(Cu(t))}function uPe(t,e,n){n===void 0&&(n=!1);const r=zv(t),s=rA(t),i=nA(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=b1(o)),[o,b1(o)]}function dPe(t){const e=b1(t);return[DE(t),e,DE(e)]}function DE(t){return t.replace(/start|end/g,e=>lPe[e])}const hL=["left","right"],fL=["right","left"],hPe=["top","bottom"],fPe=["bottom","top"];function pPe(t,e,n){switch(t){case"top":case"bottom":return n?e?fL:hL:e?hL:fL;case"left":case"right":return e?hPe:fPe;default:return[]}}function mPe(t,e,n,r){const s=zv(t);let i=pPe(ah(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(DE)))),i}function b1(t){return t.replace(/left|right|bottom|top/g,e=>aPe[e])}function gPe(t){return{top:0,right:0,bottom:0,left:0,...t}}function k9(t){return typeof t!="number"?gPe(t):{top:t,right:t,bottom:t,left:t}}function _1(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function pL(t,e,n){let{reference:r,floating:s}=t;const i=Cu(e),o=rA(e),a=nA(o),l=ah(e),c=i==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,h=r[a]/2-s[a]/2;let f;switch(l){case"top":f={x:u,y:r.y-s.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-s.width,y:d};break;default:f={x:r.x,y:r.y}}switch(zv(e)){case"start":f[o]-=h*(n&&c?-1:1);break;case"end":f[o]+=h*(n&&c?-1:1);break}return f}const vPe=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=pL(c,r,l),h=r,f={},m=0;for(let v=0;v<a.length;v++){const{name:y,fn:g}=a[v],{x:S,y:_,data:w,reset:E}=await g({x:u,y:d,initialPlacement:r,placement:h,strategy:s,middlewareData:f,rects:c,platform:o,elements:{reference:t,floating:e}});u=S??u,d=_??d,f={...f,[y]:{...f[y],...w}},E&&m<=50&&(m++,typeof E=="object"&&(E.placement&&(h=E.placement),E.rects&&(c=E.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):E.rects),{x:u,y:d}=pL(c,h,l)),v=-1)}return{x:u,y:d,placement:h,strategy:s,middlewareData:f}};async function sA(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Uv(e,t),m=k9(f),y=a[h?d==="floating"?"reference":"floating":d],g=_1(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),S=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),w=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},E=_1(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:S,offsetParent:_,strategy:l}):S);return{top:(g.top-E.top+m.top)/w.y,bottom:(E.bottom-g.bottom+m.bottom)/w.y,left:(g.left-E.left+m.left)/w.x,right:(E.right-g.right+m.right)/w.x}}const yPe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Uv(t,e)||{};if(c==null)return{};const d=k9(u),h={x:n,y:r},f=rA(s),m=nA(f),v=await o.getDimensions(c),y=f==="y",g=y?"top":"left",S=y?"bottom":"right",_=y?"clientHeight":"clientWidth",w=i.reference[m]+i.reference[f]-h[f]-i.floating[m],E=h[f]-i.reference[f],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let T=C?C[_]:0;(!T||!await(o.isElement==null?void 0:o.isElement(C)))&&(T=a.floating[_]||i.floating[m]);const I=w/2-E/2,k=T/2-v[m]/2-1,M=Ap(d[g],k),L=Ap(d[S],k),N=M,G=T-v[m]-L,V=T/2-v[m]/2+I,X=NE(N,V,G),F=!l.arrow&&zv(s)!=null&&V!==X&&i.reference[m]/2-(V<N?M:L)-v[m]/2<0,$=F?V<N?V-N:V-G:0;return{[f]:h[f]+$,data:{[f]:X,centerOffset:V-X-$,...F&&{alignmentOffset:$}},reset:F}}}),bPe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...y}=Uv(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const g=ah(s),S=Cu(a),_=ah(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),E=h||(_||!v?[b1(a)]:dPe(a)),C=m!=="none";!h&&C&&E.push(...mPe(a,v,m,w));const T=[a,...E],I=await sA(e,y),k=[];let M=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&k.push(I[g]),d){const V=uPe(s,o,w);k.push(I[V[0]],I[V[1]])}if(M=[...M,{placement:s,overflows:k}],!k.every(V=>V<=0)){var L,N;const V=(((L=i.flip)==null?void 0:L.index)||0)+1,X=T[V];if(X&&(!(d==="alignment"?S!==Cu(X):!1)||M.every(O=>Cu(O.placement)===S?O.overflows[0]>0:!0)))return{data:{index:V,overflows:M},reset:{placement:X}};let F=(N=M.filter($=>$.overflows[0]<=0).sort(($,O)=>$.overflows[1]-O.overflows[1])[0])==null?void 0:N.placement;if(!F)switch(f){case"bestFit":{var G;const $=(G=M.filter(O=>{if(C){const z=Cu(O.placement);return z===S||z==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(z=>z>0).reduce((z,re)=>z+re,0)]).sort((O,z)=>O[1]-z[1])[0])==null?void 0:G[0];$&&(F=$);break}case"initialPlacement":F=a;break}if(s!==F)return{reset:{placement:F}}}return{}}}},_Pe=new Set(["left","top"]);async function wPe(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=ah(n),a=zv(n),l=Cu(n)==="y",c=_Pe.has(o)?-1:1,u=i&&l?-1:1,d=Uv(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(f=a==="end"?m*-1:m),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}const xPe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await wPe(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},SPe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:g,y:S}=y;return{x:g,y:S}}},...l}=Uv(t,e),c={x:n,y:r},u=await sA(e,l),d=Cu(ah(s)),h=A9(d);let f=c[h],m=c[d];if(i){const y=h==="y"?"top":"left",g=h==="y"?"bottom":"right",S=f+u[y],_=f-u[g];f=NE(S,f,_)}if(o){const y=d==="y"?"top":"left",g=d==="y"?"bottom":"right",S=m+u[y],_=m-u[g];m=NE(S,m,_)}const v=a.fn({...e,[h]:f,[d]:m});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[h]:i,[d]:o}}}}}};function R_(){return typeof window<"u"}function em(t){return I9(t)?(t.nodeName||"").toLowerCase():"#document"}function No(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ol(t){var e;return(e=(I9(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function I9(t){return R_()?t instanceof Node||t instanceof No(t).Node:!1}function Va(t){return R_()?t instanceof Element||t instanceof No(t).Element:!1}function Ml(t){return R_()?t instanceof HTMLElement||t instanceof No(t).HTMLElement:!1}function mL(t){return!R_()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof No(t).ShadowRoot}const EPe=new Set(["inline","contents"]);function $v(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Ha(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!EPe.has(s)}const CPe=new Set(["table","td","th"]);function TPe(t){return CPe.has(em(t))}const MPe=[":popover-open",":modal"];function L_(t){return MPe.some(e=>{try{return t.matches(e)}catch{return!1}})}const APe=["transform","translate","scale","rotate","perspective"],kPe=["transform","translate","scale","rotate","perspective","filter"],IPe=["paint","layout","strict","content"];function iA(t){const e=oA(),n=Va(t)?Ha(t):t;return APe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||kPe.some(r=>(n.willChange||"").includes(r))||IPe.some(r=>(n.contain||"").includes(r))}function PPe(t){let e=Hu(t);for(;Ml(e)&&!kp(e);){if(iA(e))return e;if(L_(e))return null;e=Hu(e)}return null}function oA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const RPe=new Set(["html","body","#document"]);function kp(t){return RPe.has(em(t))}function Ha(t){return No(t).getComputedStyle(t)}function O_(t){return Va(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Hu(t){if(em(t)==="html")return t;const e=t.assignedSlot||t.parentNode||mL(t)&&t.host||Ol(t);return mL(e)?e.host:e}function P9(t){const e=Hu(t);return kp(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ml(e)&&$v(e)?e:P9(e)}function ov(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=P9(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=No(s);if(i){const a=FE(o);return e.concat(o,o.visualViewport||[],$v(s)?s:[],a&&n?ov(a):[])}return e.concat(s,ov(s,[],n))}function FE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function R9(t){const e=Ha(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ml(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=y1(n)!==i||y1(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function aA(t){return Va(t)?t:t.contextElement}function Yf(t){const e=aA(t);if(!Ml(e))return _l(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=R9(e);let o=(i?y1(n.width):n.width)/r,a=(i?y1(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const LPe=_l(0);function L9(t){const e=No(t);return!oA()||!e.visualViewport?LPe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function OPe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==No(t)?!1:e}function lh(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=aA(t);let o=_l(1);e&&(r?Va(r)&&(o=Yf(r)):o=Yf(t));const a=OPe(i,n,r)?L9(i):_l(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const h=No(i),f=r&&Va(r)?No(r):r;let m=h,v=FE(m);for(;v&&r&&f!==m;){const y=Yf(v),g=v.getBoundingClientRect(),S=Ha(v),_=g.left+(v.clientLeft+parseFloat(S.paddingLeft))*y.x,w=g.top+(v.clientTop+parseFloat(S.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,d*=y.y,l+=_,c+=w,m=No(v),v=FE(m)}}return _1({width:u,height:d,x:l,y:c})}function lA(t,e){const n=O_(t).scrollLeft;return e?e.left+n:lh(Ol(t)).left+n}function O9(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:lA(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function NPe(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Ol(r),a=e?L_(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=_l(1);const u=_l(0),d=Ml(r);if((d||!d&&!i)&&((em(r)!=="body"||$v(o))&&(l=O_(r)),Ml(r))){const f=lh(r);c=Yf(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}const h=o&&!d&&!i?O9(o,l,!0):_l(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function DPe(t){return Array.from(t.getClientRects())}function FPe(t){const e=Ol(t),n=O_(t),r=t.ownerDocument.body,s=Kd(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Kd(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+lA(t);const a=-n.scrollTop;return Ha(r).direction==="rtl"&&(o+=Kd(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function BPe(t,e){const n=No(t),r=Ol(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=oA();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}const UPe=new Set(["absolute","fixed"]);function zPe(t,e){const n=lh(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Ml(t)?Yf(t):_l(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function gL(t,e,n){let r;if(e==="viewport")r=BPe(t,n);else if(e==="document")r=FPe(Ol(t));else if(Va(e))r=zPe(e,n);else{const s=L9(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return _1(r)}function N9(t,e){const n=Hu(t);return n===e||!Va(n)||kp(n)?!1:Ha(n).position==="fixed"||N9(n,e)}function $Pe(t,e){const n=e.get(t);if(n)return n;let r=ov(t,[],!1).filter(a=>Va(a)&&em(a)!=="body"),s=null;const i=Ha(t).position==="fixed";let o=i?Hu(t):t;for(;Va(o)&&!kp(o);){const a=Ha(o),l=iA(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&UPe.has(s.position)||$v(o)&&!l&&N9(t,o))?r=r.filter(u=>u!==o):s=a,o=Hu(o)}return e.set(t,r),r}function VPe(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?L_(e)?[]:$Pe(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=gL(e,u,s);return c.top=Kd(d.top,c.top),c.right=Ap(d.right,c.right),c.bottom=Ap(d.bottom,c.bottom),c.left=Kd(d.left,c.left),c},gL(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function HPe(t){const{width:e,height:n}=R9(t);return{width:e,height:n}}function GPe(t,e,n){const r=Ml(e),s=Ol(e),i=n==="fixed",o=lh(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=_l(0);function c(){l.x=lA(s)}if(r||!r&&!i)if((em(e)!=="body"||$v(s))&&(a=O_(e)),r){const f=lh(e,!0,i,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else s&&c();i&&!r&&s&&c();const u=s&&!r&&!i?O9(s,a):_l(0),d=o.left+a.scrollLeft-l.x-u.x,h=o.top+a.scrollTop-l.y-u.y;return{x:d,y:h,width:o.width,height:o.height}}function Wx(t){return Ha(t).position==="static"}function vL(t,e){if(!Ml(t)||Ha(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ol(t)===n&&(n=n.ownerDocument.body),n}function D9(t,e){const n=No(t);if(L_(t))return n;if(!Ml(t)){let s=Hu(t);for(;s&&!kp(s);){if(Va(s)&&!Wx(s))return s;s=Hu(s)}return n}let r=vL(t,e);for(;r&&TPe(r)&&Wx(r);)r=vL(r,e);return r&&kp(r)&&Wx(r)&&!iA(r)?n:r||PPe(t)||n}const WPe=async function(t){const e=this.getOffsetParent||D9,n=this.getDimensions,r=await n(t.floating);return{reference:GPe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function jPe(t){return Ha(t).direction==="rtl"}const KPe={convertOffsetParentRelativeRectToViewportRelativeRect:NPe,getDocumentElement:Ol,getClippingRect:VPe,getOffsetParent:D9,getElementRects:WPe,getClientRects:DPe,getDimensions:HPe,getScale:Yf,isElement:Va,isRTL:jPe};function F9(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function qPe(t,e){let n=null,r;const s=Ol(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=c;if(a||e(),!h||!f)return;const m=Cy(d),v=Cy(s.clientWidth-(u+h)),y=Cy(s.clientHeight-(d+f)),g=Cy(u),_={rootMargin:-m+"px "+-v+"px "+-y+"px "+-g+"px",threshold:Kd(0,Ap(1,l))||1};let w=!0;function E(C){const T=C[0].intersectionRatio;if(T!==l){if(!w)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!F9(c,t.getBoundingClientRect())&&o(),w=!1}try{n=new IntersectionObserver(E,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,_)}n.observe(t)}return o(!0),i}function YPe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=aA(t),u=s||i?[...c?ov(c):[],...ov(e)]:[];u.forEach(g=>{s&&g.addEventListener("scroll",n,{passive:!0}),i&&g.addEventListener("resize",n)});const d=c&&a?qPe(c,n):null;let h=-1,f=null;o&&(f=new ResizeObserver(g=>{let[S]=g;S&&S.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var _;(_=f)==null||_.observe(e)})),n()}),c&&!l&&f.observe(c),f.observe(e));let m,v=l?lh(t):null;l&&y();function y(){const g=lh(t);v&&!F9(v,g)&&n(),v=g,m=requestAnimationFrame(y)}return n(),()=>{var g;u.forEach(S=>{s&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),d==null||d(),(g=f)==null||g.disconnect(),f=null,l&&cancelAnimationFrame(m)}}const XPe=sA,B9=xPe,ZPe=SPe,JPe=bPe,U9=yPe,z9=(t,e,n)=>{const r=new Map,s={platform:KPe,...n},i={...s.platform,_c:r};return vPe(t,e,{...s,platform:i})},QPe=it({style:{type:Ce([String,Object,Array]),default:()=>({})}}),eRe=de({name:"ElVisuallyHidden"}),tRe=de({...eRe,props:QPe,setup(t){const e=t,n=R(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(r,s)=>(D(),Z("span",yn(r.$attrs,{style:p(n)}),[Ae(r.$slots,"default")],16))}});var nRe=at(tRe,[["__file","visual-hidden.vue"]]);it({});const rRe=t=>{if(!Vn)return;if(!t)return t;const e=Ps(t);return e||(yr(t)?e:t)},sRe=({middleware:t,placement:e,strategy:n})=>{const r=H(),s=H(),i=H(),o=H(),a=H({}),l={x:i,y:o,placement:e,strategy:n,middlewareData:a},c=async()=>{if(!Vn)return;const u=rRe(r),d=Ps(s);if(!u||!d)return;const h=await z9(u,d,{placement:p(e),strategy:p(n),middleware:p(t)});vp(l).forEach(f=>{l[f].value=h[f]})};return Zt(()=>{ui(()=>{c()})}),{...l,update:c,referenceRef:r,contentRef:s}},iRe=({arrowRef:t,padding:e})=>({name:"arrow",options:{element:t,padding:e},fn(n){const r=p(t);return r?U9({element:r,padding:e}).fn(n):{}}}),oRe=de({name:"ElTooltipV2Content"}),aRe=de({...oRe,props:{...QM,...C9},setup(t){const e=t,{triggerRef:n,contentId:r}=_t(P_),s=H(e.placement),i=H(e.strategy),o=H(null),{referenceRef:a,contentRef:l,middlewareData:c,x:u,y:d,update:h}=sRe({placement:s,strategy:i,middleware:R(()=>{const _=[B9(e.offset)];return e.showArrow&&_.push(iRe({arrowRef:o})),_})}),f=qp().nextZIndex(),m=Qe("tooltip-v2"),v=R(()=>s.value.split("-")[0]),y=R(()=>({position:p(i),top:`${p(d)||0}px`,left:`${p(u)||0}px`,zIndex:f})),g=R(()=>{if(!e.showArrow)return{};const{arrow:_}=p(c);return{[`--${m.namespace.value}-tooltip-v2-arrow-x`]:`${_==null?void 0:_.x}px`||"",[`--${m.namespace.value}-tooltip-v2-arrow-y`]:`${_==null?void 0:_.y}px`||""}}),S=R(()=>[m.e("content"),m.is("dark",e.effect==="dark"),m.is(p(i)),e.contentClass]);return Be(o,()=>h()),Be(()=>e.placement,_=>s.value=_),Zt(()=>{Be(()=>e.reference||n.value,_=>{a.value=_||void 0},{immediate:!0})}),Mn(M9,{arrowRef:o}),(_,w)=>(D(),Z("div",{ref_key:"contentRef",ref:l,style:Pt(p(y)),"data-tooltip-v2-root":""},[_.nowrap?Pe("v-if",!0):(D(),Z("div",{key:0,"data-side":p(v),class:U(p(S))},[Ae(_.$slots,"default",{contentStyle:p(y),contentClass:p(S)}),ae(p(nRe),{id:p(r),role:"tooltip"},{default:me(()=>[_.ariaLabel?(D(),Z(xt,{key:0},[rn(tt(_.ariaLabel),1)],64)):Ae(_.$slots,"default",{key:1})]),_:3},8,["id"]),Ae(_.$slots,"arrow",{style:Pt(p(g)),side:p(v)})],10,["data-side"]))],4))}});var yL=at(aRe,[["__file","content.vue"]]);const lRe=it({setRef:{type:Ce(Function),required:!0},onlyChild:Boolean});var cRe=de({props:lRe,setup(t,{slots:e}){const n=H(),r=T_(n,s=>{s?t.setRef(s.nextElementSibling):t.setRef(null)});return()=>{var s;const[i]=((s=e.default)==null?void 0:s.call(e))||[],o=t.onlyChild?S1e(i.children):i.children;return ae(xt,{ref:r},[o])}}});const uRe=de({name:"ElTooltipV2Trigger"}),dRe=de({...uRe,props:{...C9,...tA},setup(t){const e=t,{onClose:n,onOpen:r,onDelayOpen:s,triggerRef:i,contentId:o}=_t(P_);let a=!1;const l=S=>{i.value=S},c=()=>{a=!1},u=es(e.onMouseEnter,s),d=es(e.onMouseLeave,n),h=es(e.onMouseDown,()=>{n(),a=!0,document.addEventListener("mouseup",c,{once:!0})}),f=es(e.onFocus,()=>{a||r()}),m=es(e.onBlur,n),v=es(e.onClick,S=>{S.detail===0&&n()}),y={blur:m,click:v,focus:f,mousedown:h,mouseenter:u,mouseleave:d},g=(S,_,w)=>{S&&Object.entries(_).forEach(([E,C])=>{S[w](E,C)})};return Be(i,(S,_)=>{g(S,y,"addEventListener"),g(_,y,"removeEventListener"),S&&S.setAttribute("aria-describedby",o.value)}),Xn(()=>{g(i.value,y,"removeEventListener"),document.removeEventListener("mouseup",c)}),(S,_)=>S.nowrap?(D(),Le(p(cRe),{key:0,"set-ref":l,"only-child":""},{default:me(()=>[Ae(S.$slots,"default")]),_:3})):(D(),Z("button",yn({key:1,ref_key:"triggerRef",ref:i},S.$attrs),[Ae(S.$slots,"default")],16))}});var hRe=at(dRe,[["__file","trigger.vue"]]);const fRe=de({name:"ElTooltipV2"}),pRe=de({...fRe,props:tPe,setup(t){const n=Ds(t),r=Ln(Yo(n,Object.keys(JM))),s=Ln(Yo(n,Object.keys(QM))),i=Ln(Yo(n,Object.keys(eA))),o=Ln(Yo(n,Object.keys(tA)));return(a,l)=>(D(),Le(sPe,Ro(Sl(i)),{default:me(({open:c})=>[ae(hRe,yn(o,{nowrap:""}),{default:me(()=>[Ae(a.$slots,"trigger")]),_:3},16),ae(p(Zp),{to:a.to,disabled:!a.teleported},{default:me(()=>[a.fullTransition?(D(),Le(Xs,Ro(yn({key:0},a.transitionProps)),{default:me(()=>[a.alwaysOn||c?(D(),Le(yL,Ro(yn({key:0},s)),{arrow:me(({style:u,side:d})=>[a.showArrow?(D(),Le(dL,yn({key:0},r,{style:u,side:d}),null,16,["style","side"])):Pe("v-if",!0)]),default:me(()=>[Ae(a.$slots,"default")]),_:3},16)):Pe("v-if",!0)]),_:2},1040)):(D(),Z(xt,{key:1},[a.alwaysOn||c?(D(),Le(yL,Ro(yn({key:0},s)),{arrow:me(({style:u,side:d})=>[a.showArrow?(D(),Le(dL,yn({key:0},r,{style:u,side:d}),null,16,["style","side"])):Pe("v-if",!0)]),default:me(()=>[Ae(a.$slots,"default")]),_:3},16)):Pe("v-if",!0)],64))]),_:2},1032,["to","disabled"])]),_:3},16))}});var mRe=at(pRe,[["__file","tooltip.vue"]]);const gRe=nn(mRe),$9="left-check-change",V9="right-check-change",Tf=it({data:{type:Ce(Array),default:()=>[]},titles:{type:Ce(Array),default:()=>[]},buttonTexts:{type:Ce(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:Ce(Function)},leftDefaultChecked:{type:Ce(Array),default:()=>[]},rightDefaultChecked:{type:Ce(Array),default:()=>[]},renderContent:{type:Ce(Function)},modelValue:{type:Ce(Array),default:()=>[]},format:{type:Ce(Object),default:()=>({})},filterable:Boolean,props:{type:Ce(Object),default:()=>Fr({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),BE=(t,e)=>[t,e].every(rt)||rt(t)&&vs(e),vRe={[xn]:(t,e,n)=>[t,n].every(rt)&&["left","right"].includes(e),[Qt]:t=>rt(t),[$9]:BE,[V9]:BE},UE="checked-change",yRe=it({data:Tf.data,optionRender:{type:Ce(Function)},placeholder:String,title:String,filterable:Boolean,format:Tf.format,filterMethod:Tf.filterMethod,defaultChecked:Tf.leftDefaultChecked,props:Tf.props}),bRe={[UE]:BE},Vv=t=>{const e={label:"label",key:"key",disabled:"disabled"};return R(()=>({...e,...t.props}))},_Re=(t,e,n)=>{const r=Vv(t),s=R(()=>t.data.filter(u=>Lt(t.filterMethod)?t.filterMethod(e.query,u):String(u[r.value.label]||u[r.value.key]).toLowerCase().includes(e.query.toLowerCase()))),i=R(()=>s.value.filter(u=>!u[r.value.disabled])),o=R(()=>{const u=e.checked.length,d=t.data.length,{noChecked:h,hasChecked:f}=t.format;return h&&f?u>0?f.replace(/\${checked}/g,u.toString()).replace(/\${total}/g,d.toString()):h.replace(/\${total}/g,d.toString()):`${u}/${d}`}),a=R(()=>{const u=e.checked.length;return u>0&&u<i.value.length}),l=()=>{const u=i.value.map(d=>d[r.value.key]);e.allChecked=u.length>0&&u.every(d=>e.checked.includes(d))},c=u=>{e.checked=u?i.value.map(d=>d[r.value.key]):[]};return Be(()=>e.checked,(u,d)=>{if(l(),e.checkChangeByUser){const h=u.concat(d).filter(f=>!u.includes(f)||!d.includes(f));n(UE,u,h)}else n(UE,u),e.checkChangeByUser=!0}),Be(i,()=>{l()}),Be(()=>t.data,()=>{const u=[],d=s.value.map(h=>h[r.value.key]);e.checked.forEach(h=>{d.includes(h)&&u.push(h)}),e.checkChangeByUser=!1,e.checked=u}),Be(()=>t.defaultChecked,(u,d)=>{if(d&&u.length===d.length&&u.every(m=>d.includes(m)))return;const h=[],f=i.value.map(m=>m[r.value.key]);u.forEach(m=>{f.includes(m)&&h.push(m)}),e.checkChangeByUser=!1,e.checked=h},{immediate:!0}),{filteredData:s,checkableData:i,checkedSummary:o,isIndeterminate:a,updateAllChecked:l,handleAllCheckedChange:c}},wRe=de({name:"ElTransferPanel"}),xRe=de({...wRe,props:yRe,emits:bRe,setup(t,{expose:e,emit:n}){const r=t,s=bs(),i=({option:_})=>_,{t:o}=zn(),a=Qe("transfer"),l=Ln({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),c=Vv(r),{filteredData:u,checkedSummary:d,isIndeterminate:h,handleAllCheckedChange:f}=_Re(r,l,n),m=R(()=>!Po(l.query)&&Po(u.value)),v=R(()=>!Po(s.default()[0].children)),{checked:y,allChecked:g,query:S}=Ds(l);return e({query:S}),(_,w)=>(D(),Z("div",{class:U(p(a).b("panel"))},[ne("p",{class:U(p(a).be("panel","header"))},[ae(p(oa),{modelValue:p(g),"onUpdate:modelValue":E=>yr(g)?g.value=E:null,indeterminate:p(h),"validate-event":!1,onChange:p(f)},{default:me(()=>[rn(tt(_.title)+" ",1),ne("span",null,tt(p(d)),1)]),_:1},8,["modelValue","onUpdate:modelValue","indeterminate","onChange"])],2),ne("div",{class:U([p(a).be("panel","body"),p(a).is("with-footer",p(v))])},[_.filterable?(D(),Le(p(Ci),{key:0,modelValue:p(S),"onUpdate:modelValue":E=>yr(S)?S.value=E:null,class:U(p(a).be("panel","filter")),size:"default",placeholder:_.placeholder,"prefix-icon":p(zge),clearable:"","validate-event":!1},null,8,["modelValue","onUpdate:modelValue","class","placeholder","prefix-icon"])):Pe("v-if",!0),cn(ae(p(uz),{modelValue:p(y),"onUpdate:modelValue":E=>yr(y)?y.value=E:null,"validate-event":!1,class:U([p(a).is("filterable",_.filterable),p(a).be("panel","list")])},{default:me(()=>[(D(!0),Z(xt,null,_n(p(u),E=>(D(),Le(p(oa),{key:E[p(c).key],class:U(p(a).be("panel","item")),value:E[p(c).key],disabled:E[p(c).disabled],"validate-event":!1},{default:me(()=>{var C;return[ae(i,{option:(C=_.optionRender)==null?void 0:C.call(_,E)},null,8,["option"])]}),_:2},1032,["class","value","disabled"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"]),[[Wn,!p(m)&&!p(Po)(_.data)]]),cn(ne("div",{class:U(p(a).be("panel","empty"))},[Ae(_.$slots,"empty",{},()=>[rn(tt(p(m)?p(o)("el.transfer.noMatch"):p(o)("el.transfer.noData")),1)])],2),[[Wn,p(m)||p(Po)(_.data)]])],2),p(v)?(D(),Z("p",{key:0,class:U(p(a).be("panel","footer"))},[Ae(_.$slots,"default")],2)):Pe("v-if",!0)],2))}});var bL=at(xRe,[["__file","transfer-panel.vue"]]);const SRe=t=>{const e=Vv(t),n=R(()=>t.data.reduce((i,o)=>(i[o[e.value.key]]=o)&&i,{})),r=R(()=>t.data.filter(i=>!t.modelValue.includes(i[e.value.key]))),s=R(()=>t.targetOrder==="original"?t.data.filter(i=>t.modelValue.includes(i[e.value.key])):t.modelValue.reduce((i,o)=>{const a=n.value[o];return a&&i.push(a),i},[]));return{sourceData:r,targetData:s}},ERe=(t,e,n)=>{const r=Vv(t),s=(a,l,c)=>{n(Qt,a),n(xn,a,l,c)};return{addToLeft:()=>{const a=t.modelValue.slice();e.rightChecked.forEach(l=>{const c=a.indexOf(l);c>-1&&a.splice(c,1)}),s(a,"left",e.rightChecked)},addToRight:()=>{let a=t.modelValue.slice();const l=t.data.filter(c=>{const u=c[r.value.key];return e.leftChecked.includes(u)&&!t.modelValue.includes(u)}).map(c=>c[r.value.key]);a=t.targetOrder==="unshift"?l.concat(a):a.concat(l),t.targetOrder==="original"&&(a=t.data.filter(c=>a.includes(c[r.value.key])).map(c=>c[r.value.key])),s(a,"right",e.leftChecked)}}},CRe=(t,e)=>({onSourceCheckedChange:(s,i)=>{t.leftChecked=s,i&&e($9,s,i)},onTargetCheckedChange:(s,i)=>{t.rightChecked=s,i&&e(V9,s,i)}}),TRe=de({name:"ElTransfer"}),MRe=de({...TRe,props:Tf,emits:vRe,setup(t,{expose:e,emit:n}){const r=t,s=bs(),{t:i}=zn(),o=Qe("transfer"),{formItem:a}=fi(),l=Ln({leftChecked:[],rightChecked:[]}),c=Vv(r),{sourceData:u,targetData:d}=SRe(r),{onSourceCheckedChange:h,onTargetCheckedChange:f}=CRe(l,n),{addToLeft:m,addToRight:v}=ERe(r,l,n),y=H(),g=H(),S=I=>{switch(I){case"left":y.value.query="";break;case"right":g.value.query="";break}},_=R(()=>r.buttonTexts.length===2),w=R(()=>r.titles[0]||i("el.transfer.titles.0")),E=R(()=>r.titles[1]||i("el.transfer.titles.1")),C=R(()=>r.filterPlaceholder||i("el.transfer.filterPlaceholder"));Be(()=>r.modelValue,()=>{var I;r.validateEvent&&((I=a==null?void 0:a.validate)==null||I.call(a,"change").catch(k=>void 0))});const T=R(()=>I=>{var k;if(r.renderContent)return r.renderContent(Ut,I);const M=(((k=s.default)==null?void 0:k.call(s,{option:I}))||[]).filter(L=>L.type!==gs);return M.length?M:Ut("span",I[c.value.label]||I[c.value.key])});return e({clearQuery:S,leftPanel:y,rightPanel:g}),(I,k)=>(D(),Z("div",{class:U(p(o).b())},[ae(bL,{ref_key:"leftPanel",ref:y,data:p(u),"option-render":p(T),placeholder:p(C),title:p(w),filterable:I.filterable,format:I.format,"filter-method":I.filterMethod,"default-checked":I.leftDefaultChecked,props:r.props,onCheckedChange:p(h)},{empty:me(()=>[Ae(I.$slots,"left-empty")]),default:me(()=>[Ae(I.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),ne("div",{class:U(p(o).e("buttons"))},[ae(p(Ss),{type:"primary",class:U([p(o).e("button"),p(o).is("with-texts",p(_))]),disabled:p(Po)(l.rightChecked),onClick:p(m)},{default:me(()=>[ae(p(Et),null,{default:me(()=>[ae(p(Sc))]),_:1}),p(Bn)(I.buttonTexts[0])?Pe("v-if",!0):(D(),Z("span",{key:0},tt(I.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),ae(p(Ss),{type:"primary",class:U([p(o).e("button"),p(o).is("with-texts",p(_))]),disabled:p(Po)(l.leftChecked),onClick:p(v)},{default:me(()=>[p(Bn)(I.buttonTexts[1])?Pe("v-if",!0):(D(),Z("span",{key:0},tt(I.buttonTexts[1]),1)),ae(p(Et),null,{default:me(()=>[ae(p(Ai))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),ae(bL,{ref_key:"rightPanel",ref:g,data:p(d),"option-render":p(T),placeholder:p(C),filterable:I.filterable,format:I.format,"filter-method":I.filterMethod,title:p(E),"default-checked":I.rightDefaultChecked,props:r.props,onCheckedChange:p(f)},{empty:me(()=>[Ae(I.$slots,"right-empty")]),default:me(()=>[Ae(I.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var ARe=at(MRe,[["__file","transfer.vue"]]);const kRe=nn(ARe),Xf="$treeNodeId",_L=function(t,e){!e||e[Xf]||Object.defineProperty(e,Xf,{value:t.id,enumerable:!1,configurable:!1,writable:!1})},cA=(t,e)=>e==null?void 0:e[t||Xf],zE=(t,e,n)=>{const r=t.value.currentNode;n();const s=t.value.currentNode;r!==s&&e("current-change",s?s.data:null,s)},$E=t=>{let e=!0,n=!0,r=!0;for(let s=0,i=t.length;s<i;s++){const o=t[s];(o.checked!==!0||o.indeterminate)&&(e=!1,o.disabled||(r=!1)),(o.checked!==!1||o.indeterminate)&&(n=!1)}return{all:e,none:n,allWithoutDisable:r,half:!e&&!n}},Fm=function(t){if(t.childNodes.length===0||t.loading)return;const{all:e,none:n,half:r}=$E(t.childNodes);e?(t.checked=!0,t.indeterminate=!1):r?(t.checked=!1,t.indeterminate=!0):n&&(t.checked=!1,t.indeterminate=!1);const s=t.parent;!s||s.level===0||t.store.checkStrictly||Fm(s)},Ty=function(t,e){const n=t.store.props,r=t.data||{},s=n[e];if(Lt(s))return s(r,t);if(kt(s))return r[s];if(Bn(s)){const i=r[e];return Bn(i)?"":i}},VE=function(t,e){t.forEach(n=>{n.canFocus=e,VE(n.childNodes,e)})};let IRe=0,HE=class fb{constructor(e){this.isLeafByUser=void 0,this.isLeaf=void 0,this.id=IRe++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in e)Kn(e,n)&&(this[n]=e[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){var e;const n=this.store;if(!n)throw new Error("[Node]store is required!");n.registerNode(this);const r=n.props;if(r&&typeof r.isLeaf<"u"){const o=Ty(this,"isLeaf");nr(o)&&(this.isLeafByUser=o)}if(n.lazy!==!0&&this.data?(this.setData(this.data),n.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&n.lazy&&n.defaultExpandAll&&!this.isLeafByUser&&this.expand(),rt(this.data)||_L(this,this.data),!this.data)return;const s=n.defaultExpandedKeys,i=n.key;i&&!vs(this.key)&&s&&s.includes(this.key)&&this.expand(null,n.autoExpandParent),i&&n.currentNodeKey!==void 0&&this.key===n.currentNodeKey&&(n.currentNode=this,n.currentNode.isCurrent=!0),n.lazy&&n._initDefaultCheckedNode(this),this.updateLeafState(),(this.level===1||((e=this.parent)==null?void 0:e.expanded)===!0)&&(this.canFocus=!0)}setData(e){rt(e)||_L(this,e),this.data=e,this.childNodes=[];let n;this.level===0&&rt(this.data)?n=this.data:n=Ty(this,"children")||[];for(let r=0,s=n.length;r<s;r++)this.insertChild({data:n[r]})}get label(){return Ty(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return Ty(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return e.childNodes[n+1]}return null}get previousSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return n>0?e.childNodes[n-1]:null}return null}contains(e,n=!0){return(this.childNodes||[]).some(r=>r===e||n&&r.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,n,r){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof fb)){if(!r){const s=this.getChildren(!0);s!=null&&s.includes(e.data)||(Bn(n)||n<0?s==null||s.push(e.data):s==null||s.splice(n,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=Ln(new fb(e)),e instanceof fb&&e.initialize()}e.level=this.level+1,Bn(n)||n<0?this.childNodes.push(e):this.childNodes.splice(n,0,e),this.updateLeafState()}insertBefore(e,n){let r;n&&(r=this.childNodes.indexOf(n)),this.insertChild(e,r)}insertAfter(e,n){let r;n&&(r=this.childNodes.indexOf(n),r!==-1&&(r+=1)),this.insertChild(e,r)}removeChild(e){const n=this.getChildren()||[],r=n.indexOf(e.data);r>-1&&n.splice(r,1);const s=this.childNodes.indexOf(e);s>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(s,1)),this.updateLeafState()}removeChildByData(e){let n=null;for(let r=0;r<this.childNodes.length;r++)if(this.childNodes[r].data===e){n=this.childNodes[r];break}n&&this.removeChild(n)}expand(e,n){const r=()=>{if(n){let s=this.parent;for(;s&&s.level>0;)s.expanded=!0,s=s.parent}this.expanded=!0,e&&e(),VE(this.childNodes,!0)};this.shouldLoadData()?this.loadData(s=>{rt(s)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Fm(this),r())}):r()}doCreateChildren(e,n={}){e.forEach(r=>{this.insertChild(Object.assign({data:r},n),void 0,!0)})}collapse(){this.expanded=!1,VE(this.childNodes,!1)}shouldLoadData(){return!!(this.store.lazy===!0&&this.store.load&&!this.loaded)}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,n,r,s){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:o,allWithoutDisable:a}=$E(this.childNodes);!this.isLeaf&&!o&&a&&(this.checked=!1,e=!1);const l=()=>{if(n){const c=this.childNodes;for(let h=0,f=c.length;h<f;h++){const m=c[h];s=s||e!==!1;const v=m.disabled?m.checked:s;m.setChecked(v,n,!0,s)}const{half:u,all:d}=$E(c);d||(this.checked=d,this.indeterminate=u)}};if(this.shouldLoadData()){this.loadData(()=>{l(),Fm(this)},{checked:e!==!1});return}else l()}const i=this.parent;!i||i.level===0||r||Fm(i)}getChildren(e=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const r=this.store.props;let s="children";return r&&(s=r.children||"children"),Bn(n[s])&&(n[s]=null),e&&!n[s]&&(n[s]=[]),n[s]}updateChildren(){const e=this.getChildren()||[],n=this.childNodes.map(i=>i.data),r={},s=[];e.forEach((i,o)=>{const a=i[Xf];!!a&&n.findIndex(c=>(c==null?void 0:c[Xf])===a)>=0?r[a]={index:o,data:i}:s.push({index:o,data:i})}),this.store.lazy||n.forEach(i=>{r[i==null?void 0:i[Xf]]||this.removeChildByData(i)}),s.forEach(({index:i,data:o})=>{this.insertChild({data:o},i)}),this.updateLeafState()}loadData(e,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const r=i=>{this.childNodes=[],this.doCreateChildren(i,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,i)},s=()=>{this.loading=!1};this.store.load(this,r,s)}else e&&e.call(this)}eachNode(e){const n=[this];for(;n.length;){const r=n.shift();n.unshift(...r.childNodes),e(r)}}reInitChecked(){this.store.checkStrictly||Fm(this)}};class PRe{constructor(e){this.lazy=!1,this.checkStrictly=!1,this.autoExpandParent=!1,this.defaultExpandAll=!1,this.checkDescendants=!1,this.currentNode=null,this.currentNodeKey=null;for(const n in e)Kn(e,n)&&(this[n]=e[n]);this.nodesMap={}}initialize(){if(this.root=new HE({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()},er)}else this._initDefaultCheckedNodes()}filter(e){const n=this.filterNodeMethod,r=this.lazy,s=async function(i){const o=i.root?i.root.childNodes:i.childNodes;for(const[a,l]of o.entries())l.visible=!!(n!=null&&n.call(l,e,l.data,l)),a%80===0&&a>0&&await Tt(),await s(l);if(!i.visible&&o.length){let a=!0;a=!o.some(l=>l.visible),i.root?i.root.visible=a===!1:i.visible=a===!1}e&&i.visible&&!i.isLeaf&&(!r||i.loaded)&&i.expand()};s(this)}setData(e){e!==this.root.data?(this.nodesMap={},this.root.setData(e),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(e){if(e instanceof HE)return e;const n=un(e)?cA(this.key,e):e;return this.nodesMap[n]||null}insertBefore(e,n){var r;const s=this.getNode(n);(r=s.parent)==null||r.insertBefore({data:e},s)}insertAfter(e,n){var r;const s=this.getNode(n);(r=s.parent)==null||r.insertAfter({data:e},s)}remove(e){const n=this.getNode(e);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(e,n){const r=ho(n)?this.root:this.getNode(n);r&&r.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],n=this.nodesMap;e.forEach(r=>{const s=n[r];s&&s.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){const n=this.defaultCheckedKeys||[];!vs(e.key)&&n.includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const n=this.key;if(!(!e||!e.data))if(!n)this.nodesMap[e.id]=e;else{const r=e.key;vs(r)||(this.nodesMap[r]=e)}}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(r=>{this.deregisterNode(r)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,n=!1){const r=[],s=function(i){(i.root?i.root.childNodes:i.childNodes).forEach(a=>{(a.checked||n&&a.indeterminate)&&(!e||e&&a.isLeaf)&&r.push(a.data),s(a)})};return s(this),r}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const e=[],n=function(r){(r.root?r.root.childNodes:r.childNodes).forEach(i=>{i.indeterminate&&e.push(i.data),n(i)})};return n(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],n=this.nodesMap;for(const r in n)Kn(n,r)&&e.push(n[r]);return e}updateChildren(e,n){const r=this.nodesMap[e];if(!r)return;const s=r.childNodes;for(let i=s.length-1;i>=0;i--){const o=s[i];this.remove(o.data)}for(let i=0,o=n.length;i<o;i++){const a=n[i];this.append(a,r.data)}}_setCheckedKeys(e,n=!1,r){const s=this._getAllNodes().sort((l,c)=>l.level-c.level),i=Object.create(null),o=Object.keys(r);s.forEach(l=>l.setChecked(!1,!1));const a=l=>{l.childNodes.forEach(c=>{var u;i[c.data[e]]=!0,(u=c.childNodes)!=null&&u.length&&a(c)})};for(let l=0,c=s.length;l<c;l++){const u=s[l],d=u.data[e].toString();if(!o.includes(d)){u.checked&&!i[d]&&u.setChecked(!1,!1);continue}if(u.childNodes.length&&a(u),u.isLeaf||this.checkStrictly){u.setChecked(!0,!1);continue}if(u.setChecked(!0,!0),n){u.setChecked(!1,!1);const f=function(m){m.childNodes.forEach(y=>{y.isLeaf||y.setChecked(!1,!1),f(y)})};f(u)}}}setCheckedNodes(e,n=!1){const r=this.key,s={};e.forEach(i=>{s[(i||{})[r]]=!0}),this._setCheckedKeys(r,n,s)}setCheckedKeys(e,n=!1){this.defaultCheckedKeys=e;const r=this.key,s={};e.forEach(i=>{s[i]=!0}),this._setCheckedKeys(r,n,s)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(n=>{const r=this.getNode(n);r&&r.expand(null,this.autoExpandParent)})}setChecked(e,n,r){const s=this.getNode(e);s&&s.setChecked(!!n,r)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,n=!0){var r;const s=e[this.key],i=this.nodesMap[s];this.setCurrentNode(i),n&&this.currentNode&&this.currentNode.level>1&&((r=this.currentNode.parent)==null||r.expand(null,!0))}setCurrentNodeKey(e,n=!0){var r;if(this.currentNodeKey=e,ho(e)){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const s=this.getNode(e);s&&(this.setCurrentNode(s),n&&this.currentNode&&this.currentNode.level>1&&((r=this.currentNode.parent)==null||r.expand(null,!0)))}}const uA="RootTree",H9="NodeInstance",wL="TreeNodeMap",RRe=de({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(t){const e=Qe("tree"),n=_t(H9),r=_t(uA);return()=>{const s=t.node,{data:i,store:o}=s;return t.renderContent?t.renderContent(Ut,{_self:n,node:s,data:i,store:o}):Ae(r.ctx.slots,"default",{node:s,data:i},()=>[Ut(ZM,{tag:"span",truncated:!0,class:e.be("node","label")},()=>[s.label])])}}});var LRe=at(RRe,[["__file","tree-node-content.vue"]]);function G9(t){const e=_t(wL,null),n={treeNodeExpand:r=>{var s;t.node!==r&&((s=t.node)==null||s.collapse())},children:[]};return e&&e.children.push(n),Mn(wL,n),{broadcastExpanded:r=>{if(t.accordion)for(const s of n.children)s.treeNodeExpand(r)}}}const W9=Symbol("dragEvents");function ORe({props:t,ctx:e,el$:n,dropIndicator$:r,store:s}){const i=Qe("tree"),o=H({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return Mn(W9,{treeNodeDragStart:({event:u,treeNode:d})=>{if(u.dataTransfer){if(Lt(t.allowDrag)&&!t.allowDrag(d.node))return u.preventDefault(),!1;u.dataTransfer.effectAllowed="move";try{u.dataTransfer.setData("text/plain","")}catch{}o.value.draggingNode=d,e.emit("node-drag-start",d.node,u)}},treeNodeDragOver:({event:u,treeNode:d})=>{if(!u.dataTransfer)return;const h=d,f=o.value.dropNode;f&&f.node.id!==h.node.id&&Mi(f.$el,i.is("drop-inner"));const m=o.value.draggingNode;if(!m||!h)return;let v=!0,y=!0,g=!0,S=!0;Lt(t.allowDrop)&&(v=t.allowDrop(m.node,h.node,"prev"),S=y=t.allowDrop(m.node,h.node,"inner"),g=t.allowDrop(m.node,h.node,"next")),u.dataTransfer.dropEffect=y||v||g?"move":"none",(v||y||g)&&(f==null?void 0:f.node.id)!==h.node.id&&(f&&e.emit("node-drag-leave",m.node,f.node,u),e.emit("node-drag-enter",m.node,h.node,u)),v||y||g?o.value.dropNode=h:o.value.dropNode=null,h.node.nextSibling===m.node&&(g=!1),h.node.previousSibling===m.node&&(v=!1),h.node.contains(m.node,!1)&&(y=!1),(m.node===h.node||m.node.contains(h.node))&&(v=!1,y=!1,g=!1);const _=h.$el,w=_.querySelector(`.${i.be("node","content")}`).getBoundingClientRect(),E=n.value.getBoundingClientRect();let C;const T=v?y?.25:g?.45:1:-1,I=g?y?.75:v?.55:0:1;let k=-9999;const M=u.clientY-w.top;M<w.height*T?C="before":M>w.height*I?C="after":y?C="inner":C="none";const L=_.querySelector(`.${i.be("node","expand-icon")}`).getBoundingClientRect(),N=r.value;C==="before"?k=L.top-E.top:C==="after"&&(k=L.bottom-E.top),N.style.top=`${k}px`,N.style.left=`${L.right-E.left}px`,C==="inner"?Zo(_,i.is("drop-inner")):Mi(_,i.is("drop-inner")),o.value.showDropIndicator=C==="before"||C==="after",o.value.allowDrop=o.value.showDropIndicator||S,o.value.dropType=C,e.emit("node-drag-over",m.node,h.node,u)},treeNodeDragEnd:u=>{var d,h;const{draggingNode:f,dropType:m,dropNode:v}=o.value;if(u.preventDefault(),u.dataTransfer&&(u.dataTransfer.dropEffect="move"),f!=null&&f.node.data&&v){const y={data:f.node.data};m!=="none"&&f.node.remove(),m==="before"?(d=v.node.parent)==null||d.insertBefore(y,v.node):m==="after"?(h=v.node.parent)==null||h.insertAfter(y,v.node):m==="inner"&&v.node.insertChild(y),m!=="none"&&(s.value.registerNode(y),s.value.key&&f.node.eachNode(g=>{var S;(S=s.value.nodesMap[g.data[s.value.key]])==null||S.setChecked(g.checked,!s.value.checkStrictly)})),Mi(v.$el,i.is("drop-inner")),e.emit("node-drag-end",f.node,v.node,m,u),m!=="none"&&e.emit("node-drop",f.node,v.node,m,u)}f&&!v&&e.emit("node-drag-end",f.node,null,m,u),o.value.showDropIndicator=!1,o.value.draggingNode=null,o.value.dropNode=null,o.value.allowDrop=!0}}),{dragState:o}}const NRe=de({name:"ElTreeNode",components:{ElCollapseTransition:E_,ElCheckbox:oa,NodeContent:LRe,ElIcon:Et,Loading:El},props:{node:{type:HE,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:Boolean},emits:["node-expand"],setup(t,e){const n=Qe("tree"),{broadcastExpanded:r}=G9(t),s=_t(uA),i=H(!1),o=H(!1),a=H(),l=H(),c=H(),u=_t(W9),d=tn();Mn(H9,d),t.node.expanded&&(i.value=!0,o.value=!0);const h=s.props.props.children||"children";Be(()=>{var k;const M=(k=t.node.data)==null?void 0:k[h];return M&&[...M]},()=>{t.node.updateChildren()}),Be(()=>t.node.indeterminate,k=>{v(t.node.checked,k)}),Be(()=>t.node.checked,k=>{v(k,t.node.indeterminate)}),Be(()=>t.node.childNodes.length,()=>t.node.reInitChecked()),Be(()=>t.node.expanded,k=>{Tt(()=>i.value=k),k&&(o.value=!0)});const f=k=>cA(s.props.nodeKey,k.data),m=k=>{const M=t.props.class;if(!M)return{};let L;if(Lt(M)){const{data:N}=k;L=M(N,k)}else L=M;return kt(L)?{[L]:!0}:L},v=(k,M)=>{(a.value!==k||l.value!==M)&&s.ctx.emit("check-change",t.node.data,k,M),a.value=k,l.value=M},y=k=>{zE(s.store,s.ctx.emit,()=>{var M;if((M=s==null?void 0:s.props)==null?void 0:M.nodeKey){const N=f(t.node);s.store.value.setCurrentNodeKey(N)}else s.store.value.setCurrentNode(t.node)}),s.currentNode.value=t.node,s.props.expandOnClickNode&&S(),(s.props.checkOnClickNode||t.node.isLeaf&&s.props.checkOnClickLeaf&&t.showCheckbox)&&!t.node.disabled&&_(!t.node.checked),s.ctx.emit("node-click",t.node.data,t.node,d,k)},g=k=>{var M;(M=s.instance.vnode.props)!=null&&M.onNodeContextmenu&&(k.stopPropagation(),k.preventDefault()),s.ctx.emit("node-contextmenu",k,t.node.data,t.node,d)},S=()=>{t.node.isLeaf||(i.value?(s.ctx.emit("node-collapse",t.node.data,t.node,d),t.node.collapse()):t.node.expand(()=>{e.emit("node-expand",t.node.data,t.node,d)}))},_=k=>{t.node.setChecked(k,!(s!=null&&s.props.checkStrictly)),Tt(()=>{const M=s.store.value;s.ctx.emit("check",t.node.data,{checkedNodes:M.getCheckedNodes(),checkedKeys:M.getCheckedKeys(),halfCheckedNodes:M.getHalfCheckedNodes(),halfCheckedKeys:M.getHalfCheckedKeys()})})};return{ns:n,node$:c,tree:s,expanded:i,childNodeRendered:o,oldChecked:a,oldIndeterminate:l,getNodeKey:f,getNodeClass:m,handleSelectChange:v,handleClick:y,handleContextMenu:g,handleExpandIconClick:S,handleCheckChange:_,handleChildNodeExpand:(k,M,L)=>{r(M),s.ctx.emit("node-expand",k,M,L)},handleDragStart:k=>{s.props.draggable&&u.treeNodeDragStart({event:k,treeNode:t})},handleDragOver:k=>{k.preventDefault(),s.props.draggable&&u.treeNodeDragOver({event:k,treeNode:{$el:c.value,node:t.node}})},handleDrop:k=>{k.preventDefault()},handleDragEnd:k=>{s.props.draggable&&u.treeNodeDragEnd(k)},CaretRight:lU}}});function DRe(t,e,n,r,s,i){const o=Xt("el-icon"),a=Xt("el-checkbox"),l=Xt("loading"),c=Xt("node-content"),u=Xt("el-tree-node"),d=Xt("el-collapse-transition");return cn((D(),Z("div",{ref:"node$",class:U([t.ns.b("node"),t.ns.is("expanded",t.expanded),t.ns.is("current",t.node.isCurrent),t.ns.is("hidden",!t.node.visible),t.ns.is("focusable",!t.node.disabled),t.ns.is("checked",!t.node.disabled&&t.node.checked),t.getNodeClass(t.node)]),role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.props.draggable,"data-key":t.getNodeKey(t.node),onClick:$t(t.handleClick,["stop"]),onContextmenu:t.handleContextMenu,onDragstart:$t(t.handleDragStart,["stop"]),onDragover:$t(t.handleDragOver,["stop"]),onDragend:$t(t.handleDragEnd,["stop"]),onDrop:$t(t.handleDrop,["stop"])},[ne("div",{class:U(t.ns.be("node","content")),style:Pt({paddingLeft:(t.node.level-1)*t.tree.props.indent+"px"})},[t.tree.props.icon||t.CaretRight?(D(),Le(o,{key:0,class:U([t.ns.be("node","expand-icon"),t.ns.is("leaf",t.node.isLeaf),{expanded:!t.node.isLeaf&&t.expanded}]),onClick:$t(t.handleExpandIconClick,["stop"])},{default:me(()=>[(D(),Le(mn(t.tree.props.icon||t.CaretRight)))]),_:1},8,["class","onClick"])):Pe("v-if",!0),t.showCheckbox?(D(),Le(a,{key:1,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:!!t.node.disabled,onClick:$t(()=>{},["stop"]),onChange:t.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):Pe("v-if",!0),t.node.loading?(D(),Le(o,{key:2,class:U([t.ns.be("node","loading-icon"),t.ns.is("loading")])},{default:me(()=>[ae(l)]),_:1},8,["class"])):Pe("v-if",!0),ae(c,{node:t.node,"render-content":t.renderContent},null,8,["node","render-content"])],6),ae(d,null,{default:me(()=>[!t.renderAfterExpand||t.childNodeRendered?cn((D(),Z("div",{key:0,class:U(t.ns.be("node","children")),role:"group","aria-expanded":t.expanded,onClick:$t(()=>{},["stop"])},[(D(!0),Z(xt,null,_n(t.node.childNodes,h=>(D(),Le(u,{key:t.getNodeKey(h),"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:h,accordion:t.accordion,props:t.props,onNodeExpand:t.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded","onClick"])),[[Wn,t.expanded]]):Pe("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[Wn,t.node.visible]])}var FRe=at(NRe,[["render",DRe],["__file","tree-node.vue"]]);function BRe({el$:t},e){const n=Qe("tree");Zt(()=>{i()}),qa(()=>{Array.from(t.value.querySelectorAll("input[type=checkbox]")).forEach(a=>{a.setAttribute("tabindex","-1")})});function r(o,a){var l,c;const u=e.value.getNode(o[a].dataset.key);return u.canFocus&&u.visible&&(((l=u.parent)==null?void 0:l.expanded)||((c=u.parent)==null?void 0:c.level)===0)}pr(t,"keydown",o=>{const a=o.target;if(!a.className.includes(n.b("node")))return;const l=o.code,c=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),u=c.indexOf(a);let d;if([bt.up,bt.down].includes(l)){if(o.preventDefault(),l===bt.up){d=u===-1?0:u!==0?u-1:c.length-1;const f=d;for(;!r(c,d);){if(d--,d===f){d=-1;break}d<0&&(d=c.length-1)}}else{d=u===-1?0:u<c.length-1?u+1:0;const f=d;for(;!r(c,d);){if(d++,d===f){d=-1;break}d>=c.length&&(d=0)}}d!==-1&&c[d].focus()}[bt.left,bt.right].includes(l)&&(o.preventDefault(),a.click());const h=a.querySelector('[type="checkbox"]');[bt.enter,bt.numpadEnter,bt.space].includes(l)&&h&&(o.preventDefault(),h.click())});const i=()=>{var o;if(!t.value)return;const a=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));Array.from(t.value.querySelectorAll("input[type=checkbox]")).forEach(u=>{u.setAttribute("tabindex","-1")});const c=t.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(c.length){c[0].setAttribute("tabindex","0");return}(o=a[0])==null||o.setAttribute("tabindex","0")}}const URe=de({name:"ElTree",components:{ElTreeNode:FRe},props:{data:{type:Ce(Array),default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:Boolean,autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:{type:Ce(Function)},showCheckbox:Boolean,draggable:Boolean,allowDrag:{type:Ce(Function)},allowDrop:{type:Ce(Function)},props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:Boolean,highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:or}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(t,e){const{t:n}=zn(),r=Qe("tree"),s=_t(Qp,null),i=H(new PRe({key:t.nodeKey,data:t.data,lazy:t.lazy,props:t.props,load:t.load,currentNodeKey:t.currentNodeKey,checkStrictly:t.checkStrictly,checkDescendants:t.checkDescendants,defaultCheckedKeys:t.defaultCheckedKeys,defaultExpandedKeys:t.defaultExpandedKeys,autoExpandParent:t.autoExpandParent,defaultExpandAll:t.defaultExpandAll,filterNodeMethod:t.filterNodeMethod}));i.value.initialize();const o=H(i.value.root),a=H(null),l=H(null),c=H(null),{broadcastExpanded:u}=G9(t),{dragState:d}=ORe({props:t,ctx:e,el$:l,dropIndicator$:c,store:i});BRe({el$:l},i);const h=R(()=>{const{childNodes:O}=o.value,z=s?s.hasFilteredOptions!==0:!1;return(!O||O.length===0||O.every(({visible:re})=>!re))&&!z});Be(()=>t.currentNodeKey,O=>{i.value.setCurrentNodeKey(O??null)}),Be(()=>t.defaultCheckedKeys,(O,z)=>{_s(O,z)||i.value.setDefaultCheckedKey(O??[])}),Be(()=>t.defaultExpandedKeys,O=>{i.value.setDefaultExpandedKeys(O??[])}),Be(()=>t.data,O=>{i.value.setData(O)},{deep:!0}),Be(()=>t.checkStrictly,O=>{i.value.checkStrictly=O});const f=O=>{if(!t.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");i.value.filter(O)},m=O=>cA(t.nodeKey,O.data),v=O=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const z=i.value.getNode(O);if(!z)return[];const re=[z.data];let q=z.parent;for(;q&&q!==o.value;)re.push(q.data),q=q.parent;return re.reverse()},y=(O,z)=>i.value.getCheckedNodes(O,z),g=O=>i.value.getCheckedKeys(O),S=()=>{const O=i.value.getCurrentNode();return O?O.data:null},_=()=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const O=S();return O?O[t.nodeKey]:null},w=(O,z)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");i.value.setCheckedNodes(O,z)},E=(O,z)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");i.value.setCheckedKeys(O,z)},C=(O,z,re)=>{i.value.setChecked(O,z,re)},T=()=>i.value.getHalfCheckedNodes(),I=()=>i.value.getHalfCheckedKeys(),k=(O,z=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");zE(i,e.emit,()=>{u(O),i.value.setUserCurrentNode(O,z)})},M=(O,z=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");zE(i,e.emit,()=>{u(),i.value.setCurrentNodeKey(O??null,z)})},L=O=>i.value.getNode(O),N=O=>{i.value.remove(O)},G=(O,z)=>{i.value.append(O,z)},V=(O,z)=>{i.value.insertBefore(O,z)},X=(O,z)=>{i.value.insertAfter(O,z)},F=(O,z,re)=>{u(z),e.emit("node-expand",O,z,re)},$=(O,z)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");i.value.updateChildren(O,z)};return Mn(uA,{ctx:e,props:t,store:i,root:o,currentNode:a,instance:tn()}),Mn(Cl,void 0),{ns:r,store:i,root:o,currentNode:a,dragState:d,el$:l,dropIndicator$:c,isEmpty:h,filter:f,getNodeKey:m,getNodePath:v,getCheckedNodes:y,getCheckedKeys:g,getCurrentNode:S,getCurrentKey:_,setCheckedNodes:w,setCheckedKeys:E,setChecked:C,getHalfCheckedNodes:T,getHalfCheckedKeys:I,setCurrentNode:k,setCurrentKey:M,t:n,getNode:L,remove:N,append:G,insertBefore:V,insertAfter:X,handleNodeExpand:F,updateKeyChildren:$}}});function zRe(t,e,n,r,s,i){const o=Xt("el-tree-node");return D(),Z("div",{ref:"el$",class:U([t.ns.b(),t.ns.is("dragging",!!t.dragState.draggingNode),t.ns.is("drop-not-allow",!t.dragState.allowDrop),t.ns.is("drop-inner",t.dragState.dropType==="inner"),{[t.ns.m("highlight-current")]:t.highlightCurrent}]),role:"tree"},[(D(!0),Z(xt,null,_n(t.root.childNodes,a=>(D(),Le(o,{key:t.getNodeKey(a),node:a,props:t.props,accordion:t.accordion,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,"render-content":t.renderContent,onNodeExpand:t.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),t.isEmpty?(D(),Z("div",{key:0,class:U(t.ns.e("empty-block"))},[Ae(t.$slots,"empty",{},()=>{var a;return[ne("span",{class:U(t.ns.e("empty-text"))},tt((a=t.emptyText)!=null?a:t.t("el.tree.emptyText")),3)]})],2)):Pe("v-if",!0),cn(ne("div",{ref:"dropIndicator$",class:U(t.ns.e("drop-indicator"))},null,2),[[Wn,t.dragState.showDropIndicator]])],2)}var $Re=at(URe,[["render",zRe],["__file","tree.vue"]]);const w1=nn($Re),VRe=(t,{attrs:e,emit:n},{select:r,tree:s,key:i})=>{const o=Qe("tree-select");return Be(()=>t.data,()=>{t.filterable&&Tt(()=>{var l,c;(c=s.value)==null||c.filter((l=r.value)==null?void 0:l.states.inputValue)})},{flush:"post"}),{...Yo(Ds(t),Object.keys(ih.props)),...e,class:R(()=>e.class),style:R(()=>e.style),"onUpdate:modelValue":l=>n(Qt,l),valueKey:i,popperClass:R(()=>{const l=[o.e("popper")];return t.popperClass&&l.push(t.popperClass),l.join(" ")}),filterMethod:(l="")=>{var c;t.filterMethod?t.filterMethod(l):t.remoteMethod?t.remoteMethod(l):(c=s.value)==null||c.filter(l)}}},HRe=de({extends:c1,setup(t,e){const n=c1.setup(t,e);delete n.selectOptionClick;const r=tn().proxy;return Tt(()=>{n.select.states.cachedOptions.get(r.value)||n.select.onOptionCreate(r)}),Be(()=>e.attrs.visible,s=>{Tt(()=>{n.states.visible=s})},{immediate:!0}),n},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function GE(t){return t||t===0}function dA(t){return rt(t)&&t.length}function pf(t){return rt(t)?t:GE(t)?[t]:[]}function pb(t,e,n,r,s){for(let i=0;i<t.length;i++){const o=t[i];if(e(o,i,t,s))return r?r(o,i,t,s):o;{const a=n(o);if(dA(a)){const l=pb(a,e,n,r,o);if(l)return l}}}}function mb(t,e,n,r){for(let s=0;s<t.length;s++){const i=t[s];e(i,s,t,r);const o=n(i);dA(o)&&mb(o,e,n,i)}}const GRe=(t,{attrs:e,slots:n,emit:r},{select:s,tree:i,key:o})=>{Be([()=>t.modelValue,i],()=>{t.showCheckbox&&Tt(()=>{const h=i.value;h&&!_s(h.getCheckedKeys(),pf(t.modelValue))&&h.setCheckedKeys(pf(t.modelValue))})},{immediate:!0,deep:!0});const a=R(()=>({value:o.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...t.props})),l=(h,f)=>{var m;const v=a.value[h];return Lt(v)?v(f,(m=i.value)==null?void 0:m.getNode(l("value",f))):f[v]},c=pf(t.modelValue).map(h=>pb(t.data||[],f=>l("value",f)===h,f=>l("children",f),(f,m,v,y)=>y&&l("value",y))).filter(h=>GE(h)),u=R(()=>{if(!t.renderAfterExpand&&!t.lazy)return[];const h=[];return mb(t.data.concat(t.cacheData),f=>{const m=l("value",f);h.push({value:m,currentLabel:l("label",f),isDisabled:l("disabled",f)})},f=>l("children",f)),h}),d=()=>{var h;return(h=i.value)==null?void 0:h.getCheckedKeys().filter(f=>{var m;const v=(m=i.value)==null?void 0:m.getNode(f);return!vs(v)&&Po(v.childNodes)})};return{...Yo(Ds(t),Object.keys(w1.props)),...e,nodeKey:o,expandOnClickNode:R(()=>!t.checkStrictly&&t.expandOnClickNode),defaultExpandedKeys:R(()=>t.defaultExpandedKeys?t.defaultExpandedKeys.concat(c):c),renderContent:(h,{node:f,data:m,store:v})=>h(HRe,{value:l("value",m),label:l("label",m),disabled:l("disabled",m),visible:f.visible},t.renderContent?()=>t.renderContent(h,{node:f,data:m,store:v}):n.default?()=>n.default({node:f,data:m,store:v}):void 0),filterNodeMethod:(h,f,m)=>t.filterNodeMethod?t.filterNodeMethod(h,f,m):h?new RegExp(RM(h),"i").test(l("label",f)||""):!0,onNodeClick:(h,f,m)=>{var v,y,g,S;if((v=e.onNodeClick)==null||v.call(e,h,f,m),!(t.showCheckbox&&t.checkOnClickNode)){if(!t.showCheckbox&&(t.checkStrictly||f.isLeaf)){if(!l("disabled",h)){const _=(y=s.value)==null?void 0:y.states.options.get(l("value",h));(g=s.value)==null||g.handleOptionSelect(_)}}else t.expandOnClickNode&&m.proxy.handleExpandIconClick();(S=s.value)==null||S.focus()}},onCheck:(h,f)=>{var m;if(!t.showCheckbox)return;const v=l("value",h),y={};mb([i.value.store.root],w=>y[w.key]=w,w=>w.childNodes);const g=f.checkedKeys,S=t.multiple?pf(t.modelValue).filter(w=>!(w in y)&&!g.includes(w)):[],_=S.concat(g);if(t.checkStrictly)r(Qt,t.multiple?_:_.includes(v)?v:void 0);else if(t.multiple){const w=d();r(Qt,S.concat(w))}else{const w=pb([h],T=>!dA(l("children",T))&&!l("disabled",T),T=>l("children",T)),E=w?l("value",w):void 0,C=GE(t.modelValue)&&!!pb([h],T=>l("value",T)===t.modelValue,T=>l("children",T));r(Qt,E===t.modelValue||C?void 0:E)}Tt(()=>{var w;const E=pf(t.modelValue);i.value.setCheckedKeys(E),(w=e.onCheck)==null||w.call(e,h,{checkedKeys:i.value.getCheckedKeys(),checkedNodes:i.value.getCheckedNodes(),halfCheckedKeys:i.value.getHalfCheckedKeys(),halfCheckedNodes:i.value.getHalfCheckedNodes()})}),(m=s.value)==null||m.focus()},onNodeExpand:(h,f,m)=>{var v;(v=e.onNodeExpand)==null||v.call(e,h,f,m),Tt(()=>{if(!t.checkStrictly&&t.lazy&&t.multiple&&f.checked){const y={},g=i.value.getCheckedKeys();mb([i.value.store.root],w=>y[w.key]=w,w=>w.childNodes);const S=pf(t.modelValue).filter(w=>!(w in y)&&!g.includes(w)),_=d();r(Qt,S.concat(_))}})},cacheOptions:u}};var WRe=de({props:{data:{type:Array,default:()=>[]}},setup(t){const e=_t(Qp);return Be(()=>t.data,()=>{var n;t.data.forEach(s=>{e.states.cachedOptions.has(s.value)||e.states.cachedOptions.set(s.value,s)});const r=((n=e.selectRef)==null?void 0:n.querySelectorAll("input"))||[];Vn&&!Array.from(r).includes(document.activeElement)&&e.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const jRe=de({name:"ElTreeSelect",inheritAttrs:!1,props:{...ih.props,...w1.props,cacheData:{type:Array,default:()=>[]}},setup(t,e){const{slots:n,expose:r}=e,s=H(),i=H(),o=R(()=>t.nodeKey||t.valueKey||"value"),a=VRe(t,e,{select:s,tree:i,key:o}),{cacheOptions:l,...c}=GRe(t,e,{select:s,tree:i,key:o}),u=Ln({});return r(u),Zt(()=>{Object.assign(u,{...Yo(i.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...Yo(s.value,["focus","blur","selectedLabel"])})}),()=>Ut(ih,Ln({...a,ref:d=>s.value=d}),{...n,default:()=>[Ut(WRe,{data:l.value}),Ut(w1,Ln({...c,ref:d=>i.value=d}))]})}});var KRe=at(jRe,[["__file","tree-select.vue"]]);const qRe=nn(KRe),hA=Symbol(),YRe={key:-1,level:-1,data:{}};var Bm=(t=>(t.KEY="id",t.LABEL="label",t.CHILDREN="children",t.DISABLED="disabled",t.CLASS="",t))(Bm||{}),WE=(t=>(t.ADD="add",t.DELETE="delete",t))(WE||{});const j9={type:Number,default:26},XRe=it({data:{type:Ce(Array),default:()=>Fr([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:Ce(Object),default:()=>Fr({children:"children",label:"label",disabled:"disabled",value:"id",class:""})},highlightCurrent:Boolean,showCheckbox:Boolean,defaultCheckedKeys:{type:Ce(Array),default:()=>Fr([])},checkStrictly:Boolean,defaultExpandedKeys:{type:Ce(Array),default:()=>Fr([])},indent:{type:Number,default:16},itemSize:j9,icon:{type:or},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},currentNodeKey:{type:Ce([String,Number])},accordion:Boolean,filterMethod:{type:Ce(Function)},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:Boolean}),ZRe=it({node:{type:Ce(Object),default:()=>Fr(YRe)},expanded:Boolean,checked:Boolean,indeterminate:Boolean,showCheckbox:Boolean,disabled:Boolean,current:Boolean,hiddenExpandIcon:Boolean,itemSize:j9}),JRe=it({node:{type:Ce(Object),required:!0}}),K9="node-click",q9="node-drop",Y9="node-expand",X9="node-collapse",Z9="current-change",J9="check",Q9="check-change",e$="node-contextmenu",QRe={[K9]:(t,e,n)=>t&&e&&n,[q9]:(t,e,n)=>t&&e&&n,[Y9]:(t,e)=>t&&e,[X9]:(t,e)=>t&&e,[Z9]:(t,e)=>t&&e,[J9]:(t,e)=>t&&e,[Q9]:(t,e)=>t&&nr(e),[e$]:(t,e,n)=>t&&e&&n},e4e={click:(t,e)=>!!(t&&e),drop:(t,e)=>!!(t&&e),toggle:t=>!!t,check:(t,e)=>t&&nr(e)};function t4e(t,e){const n=H(new Set),r=H(new Set),{emit:s}=tn();Be([()=>e.value,()=>t.defaultCheckedKeys],()=>Tt(()=>{S(t.defaultCheckedKeys)}),{immediate:!0});const i=()=>{if(!e.value||!t.showCheckbox||t.checkStrictly)return;const{levelTreeNodeMap:_,maxLevel:w}=e.value,E=n.value,C=new Set;for(let T=w-1;T>=1;--T){const I=_.get(T);I&&I.forEach(k=>{const M=k.children;if(M){let L=!0,N=!1;for(const G of M){const V=G.key;if(E.has(V))N=!0;else if(C.has(V)){L=!1,N=!0;break}else L=!1}L?E.add(k.key):N?(C.add(k.key),E.delete(k.key)):(E.delete(k.key),C.delete(k.key))}})}r.value=C},o=_=>n.value.has(_.key),a=_=>r.value.has(_.key),l=(_,w,E=!0,C=!0)=>{const T=n.value,I=(k,M)=>{T[M?WE.ADD:WE.DELETE](k.key);const L=k.children;!t.checkStrictly&&L&&L.forEach(N=>{N.disabled||I(N,M)})};I(_,w),C&&i(),E&&c(_,w)},c=(_,w)=>{const{checkedNodes:E,checkedKeys:C}=m(),{halfCheckedNodes:T,halfCheckedKeys:I}=v();s(J9,_.data,{checkedKeys:C,checkedNodes:E,halfCheckedKeys:I,halfCheckedNodes:T}),s(Q9,_.data,w)};function u(_=!1){return m(_).checkedKeys}function d(_=!1){return m(_).checkedNodes}function h(){return v().halfCheckedKeys}function f(){return v().halfCheckedNodes}function m(_=!1){const w=[],E=[];if(e!=null&&e.value&&t.showCheckbox){const{treeNodeMap:C}=e.value;n.value.forEach(T=>{const I=C.get(T);I&&(!_||_&&I.isLeaf)&&(E.push(T),w.push(I.data))})}return{checkedKeys:E,checkedNodes:w}}function v(){const _=[],w=[];if(e!=null&&e.value&&t.showCheckbox){const{treeNodeMap:E}=e.value;r.value.forEach(C=>{const T=E.get(C);T&&(w.push(C),_.push(T.data))})}return{halfCheckedNodes:_,halfCheckedKeys:w}}function y(_){n.value.clear(),r.value.clear(),Tt(()=>{S(_)})}function g(_,w){if(e!=null&&e.value&&t.showCheckbox){const E=e.value.treeNodeMap.get(_);E&&l(E,w,!1)}}function S(_){if(e!=null&&e.value){const{treeNodeMap:w}=e.value;if(t.showCheckbox&&w&&(_==null?void 0:_.length)>0){for(const E of _){const C=w.get(E);C&&!o(C)&&l(C,!0,!1,!1)}i()}}}return{updateCheckedKeys:i,toggleCheckbox:l,isChecked:o,isIndeterminate:a,getCheckedKeys:u,getCheckedNodes:d,getHalfCheckedKeys:h,getHalfCheckedNodes:f,setChecked:g,setCheckedKeys:y}}function n4e(t,e){const n=H(new Set([])),r=H(new Set([])),s=R(()=>Lt(t.filterMethod));function i(a){var l;if(!s.value)return;const c=new Set,u=r.value,d=n.value,h=[],f=((l=e.value)==null?void 0:l.treeNodes)||[],m=t.filterMethod;d.clear();function v(y){y.forEach(g=>{h.push(g),m!=null&&m(a,g.data,g)?h.forEach(_=>{c.add(_.key)}):g.isLeaf&&d.add(g.key);const S=g.children;if(S&&v(S),!g.isLeaf){if(!c.has(g.key))d.add(g.key);else if(S){let _=!0;for(const w of S)if(!d.has(w.key)){_=!1;break}_?u.add(g.key):u.delete(g.key)}}h.pop()})}return v(f),c}function o(a){return r.value.has(a.key)}return{hiddenExpandIconKeySet:r,hiddenNodeKeySet:n,doFilter:i,isForceHiddenExpandIcon:o}}function r4e(t,e){const n=H(new Set),r=H(),s=br(),i=H(),{isIndeterminate:o,isChecked:a,toggleCheckbox:l,getCheckedKeys:c,getCheckedNodes:u,getHalfCheckedKeys:d,getHalfCheckedNodes:h,setChecked:f,setCheckedKeys:m}=t4e(t,s),{doFilter:v,hiddenNodeKeySet:y,isForceHiddenExpandIcon:g}=n4e(t,s),S=R(()=>{var ue;return((ue=t.props)==null?void 0:ue.value)||Bm.KEY}),_=R(()=>{var ue;return((ue=t.props)==null?void 0:ue.children)||Bm.CHILDREN}),w=R(()=>{var ue;return((ue=t.props)==null?void 0:ue.disabled)||Bm.DISABLED}),E=R(()=>{var ue;return((ue=t.props)==null?void 0:ue.label)||Bm.LABEL}),C=R(()=>{var ue;const j=n.value,he=y.value,K=[],Fe=((ue=s.value)==null?void 0:ue.treeNodes)||[],Oe=[];for(let Re=Fe.length-1;Re>=0;--Re)Oe.push(Fe[Re]);for(;Oe.length;){const Re=Oe.pop();if(!he.has(Re.key)&&(K.push(Re),Re.children&&j.has(Re.key)))for(let te=Re.children.length-1;te>=0;--te)Oe.push(Re.children[te])}return K}),T=R(()=>C.value.length>0);function I(ue){const j=new Map,he=new Map;let K=1;function Fe(Re,te=1,oe=void 0){var Ee;const J=[];for(const Q of Re){const _e=L(Q),ie={level:te,key:_e,data:Q};ie.label=G(Q),ie.parent=oe;const Te=M(Q);ie.disabled=N(Q),ie.isLeaf=!Te||Te.length===0,ie.expanded=n.value.has(_e),Te&&Te.length&&(ie.children=Fe(Te,te+1,ie)),J.push(ie),j.set(_e,ie),he.has(te)||he.set(te,[]),(Ee=he.get(te))==null||Ee.push(ie)}return te>K&&(K=te),J}const Oe=Fe(ue);return{treeNodeMap:j,levelTreeNodeMap:he,maxLevel:K,treeNodes:Oe}}function k(ue){const j=v(ue);j&&(n.value=j)}function M(ue){return ue[_.value]}function L(ue){return ue?ue[S.value]:""}function N(ue){return ue[w.value]}function G(ue){return ue[E.value]}function V(ue){n.value.has(ue.key)?q(ue):re(ue)}function X(ue){const j=new Set,he=s.value.treeNodeMap;ue.forEach(K=>{let Fe=he.get(K);for(;Fe&&!j.has(Fe.key);)j.add(Fe.key),Fe.expanded=!0,Fe=Fe.parent}),n.value=j}function F(ue,j){e(K9,ue.data,ue,j),O(ue),t.expandOnClickNode&&V(ue),t.showCheckbox&&(t.checkOnClickNode||ue.isLeaf&&t.checkOnClickLeaf)&&!ue.disabled&&l(ue,!a(ue),!0)}function $(ue,j){e(q9,ue.data,ue,j)}function O(ue){fe(ue)||(r.value=ue.key,e(Z9,ue.data,ue))}function z(ue,j){l(ue,j)}function re(ue){const j=n.value;if(s.value&&t.accordion){const{treeNodeMap:he}=s.value;j.forEach(K=>{const Fe=he.get(K);ue&&ue.level===(Fe==null?void 0:Fe.level)&&(j.delete(K),Fe.expanded=!1)})}j.add(ue.key),ue.expanded=!0,e(Y9,ue.data,ue)}function q(ue){n.value.delete(ue.key),ue.expanded=!1,e(X9,ue.data,ue)}function le(ue){return!!ue.disabled}function fe(ue){const j=r.value;return j!==void 0&&j===ue.key}function se(){var ue,j;if(r.value)return(j=(ue=s.value)==null?void 0:ue.treeNodeMap.get(r.value))==null?void 0:j.data}function ye(){return r.value}function we(ue){r.value=ue}function ve(ue){s.value=I(ue)}function xe(ue){var j;const he=un(ue)?L(ue):ue;return(j=s.value)==null?void 0:j.treeNodeMap.get(he)}function je(ue,j="auto"){const he=xe(ue);he&&i.value&&i.value.scrollToItem(C.value.indexOf(he),j)}function nt(ue){var j;(j=i.value)==null||j.scrollTo(ue)}return Be(()=>t.currentNodeKey,ue=>{r.value=ue},{immediate:!0}),Be(()=>t.defaultExpandedKeys,ue=>{n.value=new Set(ue)},{immediate:!0}),Be(()=>t.data,ue=>{ve(ue)},{immediate:!0}),{tree:s,flattenTree:C,isNotEmpty:T,listRef:i,getKey:L,getChildren:M,toggleExpand:V,toggleCheckbox:l,isChecked:a,isIndeterminate:o,isDisabled:le,isCurrent:fe,isForceHiddenExpandIcon:g,handleNodeClick:F,handleNodeDrop:$,handleNodeCheck:z,getCurrentNode:se,getCurrentKey:ye,setCurrentKey:we,getCheckedKeys:c,getCheckedNodes:u,getHalfCheckedKeys:d,getHalfCheckedNodes:h,setChecked:f,setCheckedKeys:m,filter:k,setData:ve,getNode:xe,expandNode:re,collapseNode:q,setExpandedKeys:X,scrollToNode:je,scrollTo:nt}}var s4e=de({name:"ElTreeNodeContent",props:JRe,setup(t){const e=_t(hA),n=Qe("tree");return()=>{const r=t.node,{data:s}=r;return e!=null&&e.ctx.slots.default?e.ctx.slots.default({node:r,data:s}):Ut(ZM,{tag:"span",truncated:!0,class:n.be("node","label")},()=>[r==null?void 0:r.label])}}});const i4e=de({name:"ElTreeNode"}),o4e=de({...i4e,props:ZRe,emits:e4e,setup(t,{emit:e}){const n=t,r=_t(hA),s=Qe("tree"),i=R(()=>{var f;return(f=r==null?void 0:r.props.indent)!=null?f:16}),o=R(()=>{var f;return(f=r==null?void 0:r.props.icon)!=null?f:lU}),a=f=>{const m=r==null?void 0:r.props.props.class;if(!m)return{};let v;if(Lt(m)){const{data:y}=f;v=m(y,f)}else v=m;return kt(v)?{[v]:!0}:v},l=f=>{e("click",n.node,f)},c=f=>{e("drop",n.node,f)},u=()=>{e("toggle",n.node)},d=f=>{e("check",n.node,f)},h=f=>{var m,v,y,g;(y=(v=(m=r==null?void 0:r.instance)==null?void 0:m.vnode)==null?void 0:v.props)!=null&&y.onNodeContextmenu&&(f.stopPropagation(),f.preventDefault()),r==null||r.ctx.emit(e$,f,(g=n.node)==null?void 0:g.data,n.node)};return(f,m)=>{var v,y,g;return D(),Z("div",{ref:"node$",class:U([p(s).b("node"),p(s).is("expanded",f.expanded),p(s).is("current",f.current),p(s).is("focusable",!f.disabled),p(s).is("checked",!f.disabled&&f.checked),a(f.node)]),role:"treeitem",tabindex:"-1","aria-expanded":f.expanded,"aria-disabled":f.disabled,"aria-checked":f.checked,"data-key":(v=f.node)==null?void 0:v.key,onClick:$t(l,["stop"]),onContextmenu:h,onDragover:$t(()=>{},["prevent"]),onDragenter:$t(()=>{},["prevent"]),onDrop:$t(c,["stop"])},[ne("div",{class:U(p(s).be("node","content")),style:Pt({paddingLeft:`${(f.node.level-1)*p(i)}px`,height:f.itemSize+"px"})},[p(o)?(D(),Le(p(Et),{key:0,class:U([p(s).is("leaf",!!((y=f.node)!=null&&y.isLeaf)),p(s).is("hidden",f.hiddenExpandIcon),{expanded:!((g=f.node)!=null&&g.isLeaf)&&f.expanded},p(s).be("node","expand-icon")]),onClick:$t(u,["stop"])},{default:me(()=>[(D(),Le(mn(p(o))))]),_:1},8,["class","onClick"])):Pe("v-if",!0),f.showCheckbox?(D(),Le(p(oa),{key:1,"model-value":f.checked,indeterminate:f.indeterminate,disabled:f.disabled,onChange:d,onClick:$t(()=>{},["stop"])},null,8,["model-value","indeterminate","disabled","onClick"])):Pe("v-if",!0),ae(p(s4e),{node:{...f.node,expanded:f.expanded}},null,8,["node"])],6)],42,["aria-expanded","aria-disabled","aria-checked","data-key","onClick","onDragover","onDragenter","onDrop"])}}});var a4e=at(o4e,[["__file","tree-node.vue"]]);const l4e=de({name:"ElTreeV2"}),c4e=de({...l4e,props:XRe,emits:QRe,setup(t,{expose:e,emit:n}){const r=t,s=bs(),i=R(()=>r.itemSize);Mn(hA,{ctx:{emit:n,slots:s},props:r,instance:tn()}),Mn(Cl,void 0);const{t:o}=zn(),a=Qe("tree"),{flattenTree:l,isNotEmpty:c,listRef:u,toggleExpand:d,isIndeterminate:h,isChecked:f,isDisabled:m,isCurrent:v,isForceHiddenExpandIcon:y,handleNodeClick:g,handleNodeDrop:S,handleNodeCheck:_,toggleCheckbox:w,getCurrentNode:E,getCurrentKey:C,setCurrentKey:T,getCheckedKeys:I,getCheckedNodes:k,getHalfCheckedKeys:M,getHalfCheckedNodes:L,setChecked:N,setCheckedKeys:G,filter:V,setData:X,getNode:F,expandNode:$,collapseNode:O,setExpandedKeys:z,scrollToNode:re,scrollTo:q}=r4e(r,n);return e({toggleCheckbox:w,getCurrentNode:E,getCurrentKey:C,setCurrentKey:T,getCheckedKeys:I,getCheckedNodes:k,getHalfCheckedKeys:M,getHalfCheckedNodes:L,setChecked:N,setCheckedKeys:G,filter:V,setData:X,getNode:F,expandNode:$,collapseNode:O,setExpandedKeys:z,scrollToNode:re,scrollTo:q}),(le,fe)=>(D(),Z("div",{class:U([p(a).b(),{[p(a).m("highlight-current")]:le.highlightCurrent}]),role:"tree"},[p(c)?(D(),Le(p(L7),{key:0,ref_key:"listRef",ref:u,"class-name":p(a).b("virtual-list"),data:p(l),total:p(l).length,height:le.height,"item-size":p(i),"perf-mode":le.perfMode,"scrollbar-always-on":le.scrollbarAlwaysOn},{default:me(({data:se,index:ye,style:we})=>[(D(),Le(a4e,{key:se[ye].key,style:Pt(we),node:se[ye],expanded:se[ye].expanded,"show-checkbox":le.showCheckbox,checked:p(f)(se[ye]),indeterminate:p(h)(se[ye]),"item-size":p(i),disabled:p(m)(se[ye]),current:p(v)(se[ye]),"hidden-expand-icon":p(y)(se[ye]),onClick:p(g),onToggle:p(d),onCheck:p(_),onDrop:p(S)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck","onDrop"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode","scrollbar-always-on"])):(D(),Z("div",{key:1,class:U(p(a).e("empty-block"))},[Ae(le.$slots,"empty",{},()=>{var se;return[ne("span",{class:U(p(a).e("empty-text"))},tt((se=le.emptyText)!=null?se:p(o)("el.tree.emptyText")),3)]})],2))],2))}});var u4e=at(c4e,[["__file","tree.vue"]]);const d4e=nn(u4e),t$=Symbol("uploadContextKey"),h4e="ElUpload";class f4e extends Error{constructor(e,n,r,s){super(e),this.name="UploadAjaxError",this.status=n,this.method=r,this.url=s}}function xL(t,e,n){let r;return n.response?r=`${n.response.error||n.response}`:n.responseText?r=`${n.responseText}`:r=`fail to ${e.method} ${t} ${n.status}`,new f4e(r,n.status,e.method,t)}function p4e(t){const e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const m4e=t=>{typeof XMLHttpRequest>"u"&&hs(h4e,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,n=t.action;e.upload&&e.upload.addEventListener("progress",i=>{const o=i;o.percent=i.total>0?i.loaded/i.total*100:0,t.onProgress(o)});const r=new FormData;if(t.data)for(const[i,o]of Object.entries(t.data))rt(o)&&o.length?r.append(i,...o):r.append(i,o);r.append(t.filename,t.file,t.file.name),e.addEventListener("error",()=>{t.onError(xL(n,t,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return t.onError(xL(n,t,e));t.onSuccess(p4e(e))}),e.open(t.method,n,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const s=t.headers||{};if(s instanceof Headers)s.forEach((i,o)=>e.setRequestHeader(o,i));else for(const[i,o]of Object.entries(s))vs(o)||e.setRequestHeader(i,String(o));return e.send(r),e},n$=["text","picture","picture-card"];let g4e=1;const jE=()=>Date.now()+g4e++,r$=it({action:{type:String,default:"#"},headers:{type:Ce(Object)},method:{type:String,default:"post"},data:{type:Ce([Object,Function,Promise]),default:()=>Fr({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:Ce(Array),default:()=>Fr([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:n$,default:"text"},httpRequest:{type:Ce(Function),default:m4e},disabled:Boolean,limit:Number}),v4e=it({...r$,beforeUpload:{type:Ce(Function),default:er},beforeRemove:{type:Ce(Function)},onRemove:{type:Ce(Function),default:er},onChange:{type:Ce(Function),default:er},onPreview:{type:Ce(Function),default:er},onSuccess:{type:Ce(Function),default:er},onProgress:{type:Ce(Function),default:er},onError:{type:Ce(Function),default:er},onExceed:{type:Ce(Function),default:er},crossorigin:{type:Ce(String)}}),y4e=it({files:{type:Ce(Array),default:()=>Fr([])},disabled:Boolean,handlePreview:{type:Ce(Function),default:er},listType:{type:String,values:n$,default:"text"},crossorigin:{type:Ce(String)}}),b4e={remove:t=>!!t},_4e=de({name:"ElUploadList"}),w4e=de({..._4e,props:y4e,emits:b4e,setup(t,{emit:e}){const n=t,{t:r}=zn(),s=Qe("upload"),i=Qe("icon"),o=Qe("list"),a=pi(),l=H(!1),c=R(()=>[s.b("list"),s.bm("list",n.listType),s.is("disabled",n.disabled)]),u=d=>{e("remove",d)};return(d,h)=>(D(),Le(tB,{tag:"ul",class:U(p(c)),name:p(o).b()},{default:me(()=>[(D(!0),Z(xt,null,_n(d.files,(f,m)=>(D(),Z("li",{key:f.uid||f.name,class:U([p(s).be("list","item"),p(s).is(f.status),{focusing:l.value}]),tabindex:"0",onKeydown:cr(v=>!p(a)&&u(f),["delete"]),onFocus:v=>l.value=!0,onBlur:v=>l.value=!1,onClick:v=>l.value=!1},[Ae(d.$slots,"default",{file:f,index:m},()=>[d.listType==="picture"||f.status!=="uploading"&&d.listType==="picture-card"?(D(),Z("img",{key:0,class:U(p(s).be("list","item-thumbnail")),src:f.url,crossorigin:d.crossorigin,alt:""},null,10,["src","crossorigin"])):Pe("v-if",!0),f.status==="uploading"||d.listType!=="picture-card"?(D(),Z("div",{key:1,class:U(p(s).be("list","item-info"))},[ne("a",{class:U(p(s).be("list","item-name")),onClick:$t(v=>d.handlePreview(f),["prevent"])},[ae(p(Et),{class:U(p(i).m("document"))},{default:me(()=>[ae(p(gge))]),_:1},8,["class"]),ne("span",{class:U(p(s).be("list","item-file-name")),title:f.name},tt(f.name),11,["title"])],10,["onClick"]),f.status==="uploading"?(D(),Le(p(NM),{key:0,type:d.listType==="picture-card"?"circle":"line","stroke-width":d.listType==="picture-card"?6:2,percentage:Number(f.percentage),style:Pt(d.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):Pe("v-if",!0)],2)):Pe("v-if",!0),ne("label",{class:U(p(s).be("list","item-status-label"))},[d.listType==="text"?(D(),Le(p(Et),{key:0,class:U([p(i).m("upload-success"),p(i).m("circle-check")])},{default:me(()=>[ae(p(KT))]),_:1},8,["class"])):["picture-card","picture"].includes(d.listType)?(D(),Le(p(Et),{key:1,class:U([p(i).m("upload-success"),p(i).m("check")])},{default:me(()=>[ae(p(Pv))]),_:1},8,["class"])):Pe("v-if",!0)],2),p(a)?Pe("v-if",!0):(D(),Le(p(Et),{key:2,class:U(p(i).m("close")),onClick:v=>u(f)},{default:me(()=>[ae(p(ra))]),_:2},1032,["class","onClick"])),Pe(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),Pe(" This is a bug which needs to be fixed "),Pe(" TODO: Fix the incorrect navigation interaction "),p(a)?Pe("v-if",!0):(D(),Z("i",{key:3,class:U(p(i).m("close-tip"))},tt(p(r)("el.upload.deleteTip")),3)),d.listType==="picture-card"?(D(),Z("span",{key:4,class:U(p(s).be("list","item-actions"))},[ne("span",{class:U(p(s).be("list","item-preview")),onClick:v=>d.handlePreview(f)},[ae(p(Et),{class:U(p(i).m("zoom-in"))},{default:me(()=>[ae(p(hU))]),_:1},8,["class"])],10,["onClick"]),p(a)?Pe("v-if",!0):(D(),Z("span",{key:0,class:U(p(s).be("list","item-delete")),onClick:v=>u(f)},[ae(p(Et),{class:U(p(i).m("delete"))},{default:me(()=>[ae(p(pge))]),_:1},8,["class"])],10,["onClick"]))],2)):Pe("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),Ae(d.$slots,"append")]),_:3},8,["class","name"]))}});var SL=at(w4e,[["__file","upload-list.vue"]]);const x4e=it({disabled:Boolean}),S4e={file:t=>rt(t)},s$="ElUploadDrag",E4e=de({name:s$}),C4e=de({...E4e,props:x4e,emits:S4e,setup(t,{emit:e}){_t(t$)||hs(s$,"usage: <el-upload><el-upload-dragger /></el-upload>");const r=Qe("upload"),s=H(!1),i=pi(),o=c=>{if(i.value)return;s.value=!1,c.stopPropagation();const u=Array.from(c.dataTransfer.files),d=c.dataTransfer.items||[];u.forEach((h,f)=>{var m;const v=d[f],y=(m=v==null?void 0:v.webkitGetAsEntry)==null?void 0:m.call(v);y&&(h.isDirectory=y.isDirectory)}),e("file",u)},a=()=>{i.value||(s.value=!0)},l=c=>{c.currentTarget.contains(c.relatedTarget)||(s.value=!1)};return(c,u)=>(D(),Z("div",{class:U([p(r).b("dragger"),p(r).is("dragover",s.value)]),onDrop:$t(o,["prevent"]),onDragover:$t(a,["prevent"]),onDragleave:$t(l,["prevent"])},[Ae(c.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var T4e=at(C4e,[["__file","upload-dragger.vue"]]);const M4e=it({...r$,beforeUpload:{type:Ce(Function),default:er},onRemove:{type:Ce(Function),default:er},onStart:{type:Ce(Function),default:er},onSuccess:{type:Ce(Function),default:er},onProgress:{type:Ce(Function),default:er},onError:{type:Ce(Function),default:er},onExceed:{type:Ce(Function),default:er}}),A4e=de({name:"ElUploadContent",inheritAttrs:!1}),k4e=de({...A4e,props:M4e,setup(t,{expose:e}){const n=t,r=Qe("upload"),s=pi(),i=br({}),o=br(),a=v=>{if(v.length===0)return;const{autoUpload:y,limit:g,fileList:S,multiple:_,onStart:w,onExceed:E}=n;if(g&&S.length+v.length>g){E(v,S);return}_||(v=v.slice(0,1));for(const C of v){const T=C;T.uid=jE(),w(T),y&&l(T)}},l=async v=>{if(o.value.value="",!n.beforeUpload)return u(v);let y,g={};try{const _=n.data,w=n.beforeUpload(v);g=Lg(n.data)?Ab(n.data):n.data,y=await w,Lg(n.data)&&_s(_,g)&&(g=Ab(n.data))}catch{y=!1}if(y===!1){n.onRemove(v);return}let S=v;y instanceof Blob&&(y instanceof File?S=y:S=new File([y],v.name,{type:v.type})),u(Object.assign(S,{uid:v.uid}),g)},c=async(v,y)=>Lt(v)?v(y):v,u=async(v,y)=>{const{headers:g,data:S,method:_,withCredentials:w,name:E,action:C,onProgress:T,onSuccess:I,onError:k,httpRequest:M}=n;try{y=await c(y??S,v)}catch{n.onRemove(v);return}const{uid:L}=v,N={headers:g||{},withCredentials:w,file:v,data:y,method:_,filename:E,action:C,onProgress:V=>{T(V,v)},onSuccess:V=>{I(V,v),delete i.value[L]},onError:V=>{k(V,v),delete i.value[L]}},G=M(N);i.value[L]=G,G instanceof Promise&&G.then(N.onSuccess,N.onError)},d=v=>{const y=v.target.files;y&&a(Array.from(y))},h=()=>{s.value||(o.value.value="",o.value.click())},f=()=>{h()};return e({abort:v=>{eU(i.value).filter(v?([g])=>String(v.uid)===g:()=>!0).forEach(([g,S])=>{S instanceof XMLHttpRequest&&S.abort(),delete i.value[g]})},upload:l}),(v,y)=>(D(),Z("div",{class:U([p(r).b(),p(r).m(v.listType),p(r).is("drag",v.drag),p(r).is("disabled",p(s))]),tabindex:p(s)?"-1":"0",onClick:h,onKeydown:cr($t(f,["self"]),["enter","space"])},[v.drag?(D(),Le(T4e,{key:0,disabled:p(s),onFile:a},{default:me(()=>[Ae(v.$slots,"default")]),_:3},8,["disabled"])):Ae(v.$slots,"default",{key:1}),ne("input",{ref_key:"inputRef",ref:o,class:U(p(r).e("input")),name:v.name,disabled:p(s),multiple:v.multiple,accept:v.accept,type:"file",onChange:d,onClick:$t(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var EL=at(k4e,[["__file","upload-content.vue"]]);const CL="ElUpload",TL=t=>{var e;(e=t.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(t.url)},I4e=(t,e)=>{const n=jB(t,"fileList",void 0,{passive:!0}),r=f=>n.value.find(m=>m.uid===f.uid);function s(f){var m;(m=e.value)==null||m.abort(f)}function i(f=["ready","uploading","success","fail"]){n.value=n.value.filter(m=>!f.includes(m.status))}function o(f){n.value=n.value.filter(m=>m.uid!==f.uid)}const a=(f,m)=>{const v=r(m);v&&(console.error(f),v.status="fail",o(v),t.onError(f,v,n.value),t.onChange(v,n.value))},l=(f,m)=>{const v=r(m);v&&(t.onProgress(f,v,n.value),v.status="uploading",v.percentage=Math.round(f.percent))},c=(f,m)=>{const v=r(m);v&&(v.status="success",v.response=f,t.onSuccess(f,v,n.value),t.onChange(v,n.value))},u=f=>{vs(f.uid)&&(f.uid=jE());const m={name:f.name,percentage:0,status:"ready",size:f.size,raw:f,uid:f.uid};if(t.listType==="picture-card"||t.listType==="picture")try{m.url=URL.createObjectURL(f)}catch(v){v.message,t.onError(v,m,n.value)}n.value=[...n.value,m],t.onChange(m,n.value)},d=async f=>{const m=f instanceof File?r(f):f;m||hs(CL,"file to be removed not found");const v=y=>{s(y),o(y),t.onRemove(y,n.value),TL(y)};t.beforeRemove?await t.beforeRemove(m,n.value)!==!1&&v(m):v(m)};function h(){n.value.filter(({status:f})=>f==="ready").forEach(({raw:f})=>{var m;return f&&((m=e.value)==null?void 0:m.upload(f))})}return Be(()=>t.listType,f=>{f!=="picture-card"&&f!=="picture"||(n.value=n.value.map(m=>{const{raw:v,url:y}=m;if(!y&&v)try{m.url=URL.createObjectURL(v)}catch(g){t.onError(g,m,n.value)}return m}))}),Be(n,f=>{for(const m of f)m.uid||(m.uid=jE()),m.status||(m.status="success")},{immediate:!0,deep:!0}),{uploadFiles:n,abort:s,clearFiles:i,handleError:a,handleProgress:l,handleStart:u,handleSuccess:c,handleRemove:d,submit:h,revokeFileObjectURL:TL}},P4e=de({name:"ElUpload"}),R4e=de({...P4e,props:v4e,setup(t,{expose:e}){const n=t,r=pi(),s=br(),{abort:i,submit:o,clearFiles:a,uploadFiles:l,handleStart:c,handleError:u,handleRemove:d,handleSuccess:h,handleProgress:f,revokeFileObjectURL:m}=I4e(n,s),v=R(()=>n.listType==="picture-card"),y=R(()=>({...n,fileList:l.value,onStart:c,onProgress:f,onSuccess:h,onError:u,onRemove:d}));return Xn(()=>{l.value.forEach(m)}),Mn(t$,{accept:Yn(n,"accept")}),e({abort:i,submit:o,clearFiles:a,handleStart:c,handleRemove:d}),(g,S)=>(D(),Z("div",null,[p(v)&&g.showFileList?(D(),Le(SL,{key:0,disabled:p(r),"list-type":g.listType,files:p(l),crossorigin:g.crossorigin,"handle-preview":g.onPreview,onRemove:p(d)},go({append:me(()=>[ae(EL,yn({ref_key:"uploadRef",ref:s},p(y)),{default:me(()=>[g.$slots.trigger?Ae(g.$slots,"trigger",{key:0}):Pe("v-if",!0),!g.$slots.trigger&&g.$slots.default?Ae(g.$slots,"default",{key:1}):Pe("v-if",!0)]),_:3},16)]),_:2},[g.$slots.file?{name:"default",fn:me(({file:_,index:w})=>[Ae(g.$slots,"file",{file:_,index:w})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):Pe("v-if",!0),!p(v)||p(v)&&!g.showFileList?(D(),Le(EL,yn({key:1,ref_key:"uploadRef",ref:s},p(y)),{default:me(()=>[g.$slots.trigger?Ae(g.$slots,"trigger",{key:0}):Pe("v-if",!0),!g.$slots.trigger&&g.$slots.default?Ae(g.$slots,"default",{key:1}):Pe("v-if",!0)]),_:3},16)):Pe("v-if",!0),g.$slots.trigger?Ae(g.$slots,"default",{key:2}):Pe("v-if",!0),Ae(g.$slots,"tip"),!p(v)&&g.showFileList?(D(),Le(SL,{key:3,disabled:p(r),"list-type":g.listType,files:p(l),crossorigin:g.crossorigin,"handle-preview":g.onPreview,onRemove:p(d)},go({_:2},[g.$slots.file?{name:"default",fn:me(({file:_,index:w})=>[Ae(g.$slots,"file",{file:_,index:w})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):Pe("v-if",!0)]))}});var L4e=at(R4e,[["__file","upload.vue"]]);const O4e=nn(L4e),N4e=it({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:Ce([String,Array]),default:"Element Plus"},font:{type:Ce(Object)},gap:{type:Ce(Array),default:()=>[100,100]},offset:{type:Ce(Array)}});function D4e(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function F4e(t){return Object.keys(t).map(e=>`${D4e(e)}: ${t[e]};`).join(" ")}function B4e(){return window.devicePixelRatio||1}const U4e=(t,e)=>{let n=!1;return t.removedNodes.length&&e&&(n=Array.from(t.removedNodes).includes(e)),t.type==="attributes"&&t.target===e&&(n=!0),n},i$=3,z4e={left:[0,.5],start:[0,.5],center:[.5,0],right:[1,-.5],end:[1,-.5]};function jx(t,e,n=1){const r=document.createElement("canvas"),s=r.getContext("2d"),i=t*n,o=e*n;return r.setAttribute("width",`${i}px`),r.setAttribute("height",`${o}px`),s.save(),[s,r,i,o]}function $4e(){function t(e,n,r,s,i,o,a,l,c){const[u,d,h,f]=jx(s,i,r);if(e instanceof HTMLImageElement)u.drawImage(e,0,0,h,f);else{const{color:le,fontSize:fe,fontStyle:se,fontWeight:ye,fontFamily:we,textAlign:ve,textBaseline:xe}=o,je=Number(fe)*r;u.font=`${se} normal ${ye} ${je}px/${i}px ${we}`,u.fillStyle=le,u.textAlign=ve,u.textBaseline=xe;const nt=rt(e)?e:[e];nt==null||nt.forEach((ue,j)=>{const[he,K]=z4e[ve];u.fillText(ue??"",h*he+c*K,j*(je+i$*r))})}const m=Math.PI/180*Number(n),v=Math.max(s,i),[y,g,S]=jx(v,v,r);y.translate(S/2,S/2),y.rotate(m),h>0&&f>0&&y.drawImage(d,-h/2,-f/2);function _(le,fe){const se=le*Math.cos(m)-fe*Math.sin(m),ye=le*Math.sin(m)+fe*Math.cos(m);return[se,ye]}let w=0,E=0,C=0,T=0;const I=h/2,k=f/2;[[0-I,0-k],[0+I,0-k],[0+I,0+k],[0-I,0+k]].forEach(([le,fe])=>{const[se,ye]=_(le,fe);w=Math.min(w,se),E=Math.max(E,se),C=Math.min(C,ye),T=Math.max(T,ye)});const L=w+S/2,N=C+S/2,G=E-w,V=T-C,X=a*r,F=l*r,$=(G+X)*2,O=V+F,[z,re]=jx($,O);function q(le=0,fe=0){z.drawImage(g,L,N,G,V,le,fe,G,V)}return q(),q(G+X,-V/2-F/2),q(G+X,+V/2+F/2),[re.toDataURL(),$/r,O/r]}return t}const V4e=de({name:"ElWatermark"}),H4e=de({...V4e,props:N4e,setup(t){const e=t,n={position:"relative"},r=R(()=>{var M,L;return(L=(M=e.font)==null?void 0:M.color)!=null?L:"rgba(0,0,0,.15)"}),s=R(()=>{var M,L;return(L=(M=e.font)==null?void 0:M.fontSize)!=null?L:16}),i=R(()=>{var M,L;return(L=(M=e.font)==null?void 0:M.fontWeight)!=null?L:"normal"}),o=R(()=>{var M,L;return(L=(M=e.font)==null?void 0:M.fontStyle)!=null?L:"normal"}),a=R(()=>{var M,L;return(L=(M=e.font)==null?void 0:M.fontFamily)!=null?L:"sans-serif"}),l=R(()=>{var M,L;return(L=(M=e.font)==null?void 0:M.textAlign)!=null?L:"center"}),c=R(()=>{var M,L;return(L=(M=e.font)==null?void 0:M.textBaseline)!=null?L:"hanging"}),u=R(()=>e.gap[0]),d=R(()=>e.gap[1]),h=R(()=>u.value/2),f=R(()=>d.value/2),m=R(()=>{var M,L;return(L=(M=e.offset)==null?void 0:M[0])!=null?L:h.value}),v=R(()=>{var M,L;return(L=(M=e.offset)==null?void 0:M[1])!=null?L:f.value}),y=()=>{const M={zIndex:e.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let L=m.value-h.value,N=v.value-f.value;return L>0&&(M.left=`${L}px`,M.width=`calc(100% - ${L}px)`,L=0),N>0&&(M.top=`${N}px`,M.height=`calc(100% - ${N}px)`,N=0),M.backgroundPosition=`${L}px ${N}px`,M},g=br(null),S=br(),_=H(!1),w=()=>{S.value&&(S.value.remove(),S.value=void 0)},E=(M,L)=>{var N;g.value&&S.value&&(_.value=!0,S.value.setAttribute("style",F4e({...y(),backgroundImage:`url('${M}')`,backgroundSize:`${Math.floor(L)}px`})),(N=g.value)==null||N.append(S.value),setTimeout(()=>{_.value=!1}))},C=M=>{let L=120,N=64,G=0;const{image:V,content:X,width:F,height:$,rotate:O}=e;if(!V&&M.measureText){M.font=`${Number(s.value)}px ${a.value}`;const z=rt(X)?X:[X];let re=0,q=0;z.forEach(fe=>{const{width:se,fontBoundingBoxAscent:ye,fontBoundingBoxDescent:we,actualBoundingBoxAscent:ve,actualBoundingBoxDescent:xe}=M.measureText(fe),je=Bn(ye)?ve+xe:ye+we;se>re&&(re=Math.ceil(se)),je>q&&(q=Math.ceil(je))}),L=re,N=q*z.length+(z.length-1)*i$;const le=Math.PI/180*Number(O);G=Math.ceil(Math.abs(Math.sin(le)*N)/2),L+=G}return[F??L,$??N,G]},T=$4e(),I=()=>{const L=document.createElement("canvas").getContext("2d"),N=e.image,G=e.content,V=e.rotate;if(L){S.value||(S.value=document.createElement("div"));const X=B4e(),[F,$,O]=C(L),z=re=>{const[q,le]=T(re||"",V,X,F,$,{color:r.value,fontSize:s.value,fontStyle:o.value,fontWeight:i.value,fontFamily:a.value,textAlign:l.value,textBaseline:c.value},u.value,d.value,O);E(q,le)};if(N){const re=new Image;re.onload=()=>{z(re)},re.onerror=()=>{z(G)},re.crossOrigin="anonymous",re.referrerPolicy="no-referrer",re.src=N}else z(G)}};return Zt(()=>{I()}),Be(()=>e,()=>{I()},{deep:!0,flush:"post"}),Xn(()=>{w()}),WB(g,M=>{_.value||M.forEach(L=>{U4e(L,S.value)&&(w(),I())})},{attributes:!0,subtree:!0,childList:!0}),(M,L)=>(D(),Z("div",{ref_key:"containerRef",ref:g,style:Pt([n])},[Ae(M.$slots,"default")],4))}});var G4e=at(H4e,[["__file","watermark.vue"]]);const W4e=nn(G4e),j4e=it({zIndex:{type:Number,default:1001},visible:Boolean,fill:{type:String,default:"rgba(0,0,0,0.5)"},pos:{type:Ce(Object)},targetAreaClickable:{type:Boolean,default:!0}}),K4e=(t,e,n,r,s)=>{const i=H(null),o=()=>{let d;return kt(t.value)?d=document.querySelector(t.value):Lt(t.value)?d=t.value():d=t.value,d},a=()=>{const d=o();if(!d||!e.value){i.value=null;return}q4e(d)||d.scrollIntoView(s.value);const{left:h,top:f,width:m,height:v}=d.getBoundingClientRect();i.value={left:h,top:f,width:m,height:v,radius:0}};Zt(()=>{Be([e,t],()=>{a()},{immediate:!0}),window.addEventListener("resize",a)}),Xn(()=>{window.removeEventListener("resize",a)});const l=d=>{var h;return(h=rt(n.value.offset)?n.value.offset[d]:n.value.offset)!=null?h:6},c=R(()=>{var d;if(!i.value)return i.value;const h=l(0),f=l(1),m=((d=n.value)==null?void 0:d.radius)||2;return{left:i.value.left-h,top:i.value.top-f,width:i.value.width+h*2,height:i.value.height+f*2,radius:m}}),u=R(()=>{const d=o();return!r.value||!d||!window.DOMRect?d||void 0:{getBoundingClientRect(){var h,f,m,v;return window.DOMRect.fromRect({width:((h=c.value)==null?void 0:h.width)||0,height:((f=c.value)==null?void 0:f.height)||0,x:((m=c.value)==null?void 0:m.left)||0,y:((v=c.value)==null?void 0:v.top)||0})}}});return{mergedPosInfo:c,triggerTarget:u}},N_=Symbol("ElTour");function q4e(t){const e=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,{top:r,right:s,bottom:i,left:o}=t.getBoundingClientRect();return r>=0&&o>=0&&s<=e&&i<=n}const Y4e=(t,e,n,r,s,i,o,a)=>{const l=H(),c=H(),u=H({}),d={x:l,y:c,placement:r,strategy:s,middlewareData:u},h=R(()=>{const g=[B9(p(i)),JPe(),ZPe(),X4e()];return p(a)&&p(n)&&g.push(U9({element:p(n)})),g}),f=async()=>{if(!Vn)return;const g=p(t),S=p(e);if(!g||!S)return;const _=await z9(g,S,{placement:p(r),strategy:p(s),middleware:p(h)});vp(d).forEach(w=>{d[w].value=_[w]})},m=R(()=>{if(!p(t))return{position:"fixed",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",maxWidth:"100vw",zIndex:p(o)};const{overflow:g}=p(u);return{position:p(s),zIndex:p(o),top:p(c)!=null?`${p(c)}px`:"",left:p(l)!=null?`${p(l)}px`:"",maxWidth:g!=null&&g.maxWidth?`${g==null?void 0:g.maxWidth}px`:""}}),v=R(()=>{if(!p(a))return{};const{arrow:g}=p(u);return{left:(g==null?void 0:g.x)!=null?`${g==null?void 0:g.x}px`:"",top:(g==null?void 0:g.y)!=null?`${g==null?void 0:g.y}px`:""}});let y;return Zt(()=>{const g=p(t),S=p(e);g&&S&&(y=YPe(g,S,f)),ui(()=>{f()})}),Xn(()=>{y&&y()}),{update:f,contentStyle:m,arrowStyle:v}},X4e=()=>({name:"overflow",async fn(t){const e=await XPe(t);let n=0;return e.left>0&&(n=e.left),e.right>0&&(n=e.right),{data:{maxWidth:t.rects.floating.width-n}}}}),Z4e=de({name:"ElTourMask",inheritAttrs:!1}),J4e=de({...Z4e,props:j4e,setup(t){const e=t,{ns:n}=_t(N_),r=R(()=>{var l,c;return(c=(l=e.pos)==null?void 0:l.radius)!=null?c:2}),s=R(()=>{const l=r.value,c=`a${l},${l} 0 0 1`;return{topRight:`${c} ${l},${l}`,bottomRight:`${c} ${-l},${l}`,bottomLeft:`${c} ${-l},${-l}`,topLeft:`${c} ${l},${-l}`}}),i=R(()=>{const l=window.innerWidth,c=window.innerHeight,u=s.value,d=`M${l},0 L0,0 L0,${c} L${l},${c} L${l},0 Z`,h=r.value;return e.pos?`${d} M${e.pos.left+h},${e.pos.top} h${e.pos.width-h*2} ${u.topRight} v${e.pos.height-h*2} ${u.bottomRight} h${-e.pos.width+h*2} ${u.bottomLeft} v${-e.pos.height+h*2} ${u.topLeft} z`:d}),o=R(()=>({position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:e.zIndex,pointerEvents:e.pos&&e.targetAreaClickable?"none":"auto"})),a=R(()=>({fill:e.fill,pointerEvents:"auto",cursor:"auto"}));return CM(Yn(e,"visible"),{ns:n}),(l,c)=>l.visible?(D(),Z("div",yn({key:0,class:p(n).e("mask"),style:p(o)},l.$attrs),[(D(),Z("svg",{style:{width:"100%",height:"100%"}},[ne("path",{class:U(p(n).e("hollow")),style:Pt(p(a)),d:p(i)},null,14,["d"])]))],16)):Pe("v-if",!0)}});var Q4e=at(J4e,[["__file","mask.vue"]]);const eLe=["absolute","fixed"],tLe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],fA=it({placement:{type:Ce(String),values:tLe,default:"bottom"},reference:{type:Ce(Object),default:null},strategy:{type:Ce(String),values:eLe,default:"absolute"},offset:{type:Number,default:10},showArrow:Boolean,zIndex:{type:Number,default:2001}}),nLe={close:()=>!0},rLe=de({name:"ElTourContent"}),sLe=de({...rLe,props:fA,emits:nLe,setup(t,{emit:e}){const n=t,r=H(n.placement),s=H(n.strategy),i=H(null),o=H(null);Be(()=>n.placement,()=>{r.value=n.placement});const{contentStyle:a,arrowStyle:l}=Y4e(Yn(n,"reference"),i,o,r,s,Yn(n,"offset"),Yn(n,"zIndex"),Yn(n,"showArrow")),c=R(()=>r.value.split("-")[0]),{ns:u}=_t(N_),d=()=>{e("close")},h=f=>{f.detail.focusReason==="pointer"&&f.preventDefault()};return(f,m)=>(D(),Z("div",{ref_key:"contentRef",ref:i,style:Pt(p(a)),class:U(p(u).e("content")),"data-side":p(c),tabindex:"-1"},[ae(p(Xp),{loop:"",trapped:"","focus-start-el":"container","focus-trap-el":i.value||void 0,onReleaseRequested:d,onFocusoutPrevented:h},{default:me(()=>[Ae(f.$slots,"default")]),_:3},8,["focus-trap-el"]),f.showArrow?(D(),Z("span",{key:0,ref_key:"arrowRef",ref:o,style:Pt(p(l)),class:U(p(u).e("arrow"))},null,6)):Pe("v-if",!0)],14,["data-side"]))}});var iLe=at(sLe,[["__file","content.vue"]]),oLe=de({name:"ElTourSteps",props:{current:{type:Number,default:0}},emits:["update-total"],setup(t,{slots:e,emit:n}){let r=0;return()=>{var s,i;const o=(s=e.default)==null?void 0:s.call(e),a=[];let l=0;function c(u){rt(u)&&u.forEach(d=>{var h;((h=(d==null?void 0:d.type)||{})==null?void 0:h.name)==="ElTourStep"&&(a.push(d),l+=1)})}return o.length&&c(pl((i=o[0])==null?void 0:i.children)),r!==l&&(r=l,n("update-total",l)),a.length?a[t.current]:null}}});const aLe=it({modelValue:Boolean,current:{type:Number,default:0},showArrow:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeIcon:{type:or},placement:fA.placement,contentStyle:{type:Ce([Object])},mask:{type:Ce([Boolean,Object]),default:!0},gap:{type:Ce(Object),default:()=>({offset:6,radius:2})},zIndex:{type:Number},scrollIntoViewOptions:{type:Ce([Boolean,Object]),default:()=>({block:"center"})},type:{type:Ce(String)},appendTo:{type:w_.to.type,default:"body"},closeOnPressEscape:{type:Boolean,default:!0},targetAreaClickable:{type:Boolean,default:!0}}),lLe={[Qt]:t=>nr(t),"update:current":t=>Ft(t),close:t=>Ft(t),finish:()=>!0,change:t=>Ft(t)},cLe=de({name:"ElTour"}),uLe=de({...cLe,props:aLe,emits:lLe,setup(t,{emit:e}){const n=t,r=Qe("tour"),s=H(0),i=H(),o=jB(n,"current",e,{passive:!0}),a=R(()=>{var k;return(k=i.value)==null?void 0:k.target}),l=R(()=>[r.b(),y.value==="primary"?r.m("primary"):""]),c=R(()=>{var k;return((k=i.value)==null?void 0:k.placement)||n.placement}),u=R(()=>{var k,M;return(M=(k=i.value)==null?void 0:k.contentStyle)!=null?M:n.contentStyle}),d=R(()=>{var k,M;return(M=(k=i.value)==null?void 0:k.mask)!=null?M:n.mask}),h=R(()=>!!d.value&&n.modelValue),f=R(()=>nr(d.value)?void 0:d.value),m=R(()=>{var k,M;return!!a.value&&((M=(k=i.value)==null?void 0:k.showArrow)!=null?M:n.showArrow)}),v=R(()=>{var k,M;return(M=(k=i.value)==null?void 0:k.scrollIntoViewOptions)!=null?M:n.scrollIntoViewOptions}),y=R(()=>{var k,M;return(M=(k=i.value)==null?void 0:k.type)!=null?M:n.type}),{nextZIndex:g}=qp(),S=g(),_=R(()=>{var k;return(k=n.zIndex)!=null?k:S}),{mergedPosInfo:w,triggerTarget:E}=K4e(a,Yn(n,"modelValue"),Yn(n,"gap"),d,v);Be(()=>n.modelValue,k=>{k||(o.value=0)});const C=()=>{n.closeOnPressEscape&&(e(Qt,!1),e("close",o.value))},T=k=>{s.value=k},I=bs();return Mn(N_,{currentStep:i,current:o,total:s,showClose:Yn(n,"showClose"),closeIcon:Yn(n,"closeIcon"),mergedType:y,ns:r,slots:I,updateModelValue(k){e(Qt,k)},onClose(){e("close",o.value)},onFinish(){e("finish")},onChange(){e(xn,o.value)}}),(k,M)=>(D(),Z(xt,null,[ae(p(Zp),{to:k.appendTo},{default:me(()=>{var L,N;return[ne("div",yn({class:p(l)},k.$attrs),[ae(Q4e,{visible:p(h),fill:(L=p(f))==null?void 0:L.color,style:Pt((N=p(f))==null?void 0:N.style),pos:p(w),"z-index":p(_),"target-area-clickable":k.targetAreaClickable},null,8,["visible","fill","style","pos","z-index","target-area-clickable"]),k.modelValue?(D(),Le(iLe,{key:p(o),reference:p(E),placement:p(c),"show-arrow":p(m),"z-index":p(_),style:Pt(p(u)),onClose:C},{default:me(()=>[ae(p(oLe),{current:p(o),onUpdateTotal:T},{default:me(()=>[Ae(k.$slots,"default")]),_:3},8,["current"])]),_:3},8,["reference","placement","show-arrow","z-index","style"])):Pe("v-if",!0)],16)]}),_:3},8,["to"]),Pe(" just for IDE "),Pe("v-if",!0)],64))}});var dLe=at(uLe,[["__file","tour.vue"]]);const hLe=it({target:{type:Ce([String,Object,Function])},title:String,description:String,showClose:{type:Boolean,default:void 0},closeIcon:{type:or},showArrow:{type:Boolean,default:void 0},placement:fA.placement,mask:{type:Ce([Boolean,Object]),default:void 0},contentStyle:{type:Ce([Object])},prevButtonProps:{type:Ce(Object)},nextButtonProps:{type:Ce(Object)},scrollIntoViewOptions:{type:Ce([Boolean,Object]),default:void 0},type:{type:Ce(String)}}),fLe={close:()=>!0},pLe=de({name:"ElTourStep"}),mLe=de({...pLe,props:hLe,emits:fLe,setup(t,{emit:e}){const n=t,{Close:r}=fU,{t:s}=zn(),{currentStep:i,current:o,total:a,showClose:l,closeIcon:c,mergedType:u,ns:d,slots:h,updateModelValue:f,onClose:m,onFinish:v,onChange:y}=_t(N_);Be(n,I=>{i.value=I},{immediate:!0});const g=R(()=>{var I;return(I=n.showClose)!=null?I:l.value}),S=R(()=>{var I,k;return(k=(I=n.closeIcon)!=null?I:c.value)!=null?k:r}),_=I=>{if(I)return f5(I,["children","onClick"])},w=()=>{var I,k;o.value-=1,(I=n.prevButtonProps)!=null&&I.onClick&&((k=n.prevButtonProps)==null||k.onClick()),y()},E=()=>{var I;o.value>=a.value-1?C():o.value+=1,(I=n.nextButtonProps)!=null&&I.onClick&&n.nextButtonProps.onClick(),y()},C=()=>{T(),v()},T=()=>{f(!1),m(),e("close")};return(I,k)=>(D(),Z(xt,null,[p(g)?(D(),Z("button",{key:0,"aria-label":"Close",class:U(p(d).e("closebtn")),type:"button",onClick:T},[ae(p(Et),{class:U(p(d).e("close"))},{default:me(()=>[(D(),Le(mn(p(S))))]),_:1},8,["class"])],2)):Pe("v-if",!0),ne("header",{class:U([p(d).e("header"),{"show-close":p(l)}])},[Ae(I.$slots,"header",{},()=>[ne("span",{role:"heading",class:U(p(d).e("title"))},tt(I.title),3)])],2),ne("div",{class:U(p(d).e("body"))},[Ae(I.$slots,"default",{},()=>[ne("span",null,tt(I.description),1)])],2),ne("footer",{class:U(p(d).e("footer"))},[ne("div",{class:U(p(d).b("indicators"))},[p(h).indicators?(D(),Le(mn(p(h).indicators),{key:0,current:p(o),total:p(a)},null,8,["current","total"])):(D(!0),Z(xt,{key:1},_n(p(a),(M,L)=>(D(),Z("span",{key:M,class:U([p(d).b("indicator"),L===p(o)?"is-active":""])},null,2))),128))],2),ne("div",{class:U(p(d).b("buttons"))},[p(o)>0?(D(),Le(p(Ss),yn({key:0,size:"small",type:p(u)},_(I.prevButtonProps),{onClick:w}),{default:me(()=>{var M,L;return[rn(tt((L=(M=I.prevButtonProps)==null?void 0:M.children)!=null?L:p(s)("el.tour.previous")),1)]}),_:1},16,["type"])):Pe("v-if",!0),p(o)<=p(a)-1?(D(),Le(p(Ss),yn({key:1,size:"small",type:p(u)==="primary"?"default":"primary"},_(I.nextButtonProps),{onClick:E}),{default:me(()=>{var M,L;return[rn(tt((L=(M=I.nextButtonProps)==null?void 0:M.children)!=null?L:p(o)===p(a)-1?p(s)("el.tour.finish"):p(s)("el.tour.next")),1)]}),_:1},16,["type"])):Pe("v-if",!0)],2)],2)],64))}});var o$=at(mLe,[["__file","step.vue"]]);const gLe=nn(dLe,{TourStep:o$}),vLe=Br(o$),yLe=it({container:{type:Ce([String,Object])},offset:{type:Number,default:0},bound:{type:Number,default:15},duration:{type:Number,default:300},marker:{type:Boolean,default:!0},type:{type:Ce(String),default:"default"},direction:{type:Ce(String),default:"vertical"},selectScrollTop:Boolean}),bLe={change:t=>kt(t),click:(t,e)=>t instanceof MouseEvent&&(kt(e)||Bn(e))},a$=Symbol("anchor"),My=t=>{if(!Vn||t==="")return null;if(kt(t))try{return document.querySelector(t)}catch{return null}return t};function _Le(t){let e=0;const n=(...r)=>{e&&sh(e),e=Uu(()=>{t(...r),e=0})};return n.cancel=()=>{sh(e),e=0},n}const wLe=de({name:"ElAnchor"}),xLe=de({...wLe,props:yLe,emits:bLe,setup(t,{expose:e,emit:n}){const r=t,s=bs(),i=H(""),o=H({}),a=H(null),l=H(null),c=H(),u={};let d=!1,h=0;const f=Qe("anchor"),m=R(()=>[f.b(),r.type==="underline"?f.m("underline"):"",f.m(r.direction)]),v=M=>{u[M.href]=M.el},y=M=>{delete u[M]},g=M=>{i.value!==M&&(i.value=M,n(xn,M))};let S=null;const _=M=>{if(!c.value)return;const L=My(M);if(!L)return;S&&S(),d=!0;const N=NR(L,c.value),G=iE(L,N),V=N.scrollHeight-N.clientHeight,X=Math.min(G-r.offset,V);S=Nme(c.value,h,X,r.duration,()=>{setTimeout(()=>{d=!1},20)})},w=M=>{M&&(g(M),_(M))},E=(M,L)=>{n("click",M,L),w(L)},C=_Le(()=>{c.value&&(h=DR(c.value));const M=T();d||Bn(M)||g(M)}),T=()=>{if(!c.value)return;const M=DR(c.value),L=[];for(const N of Object.keys(u)){const G=My(N);if(!G)continue;const V=NR(G,c.value),X=iE(G,V);L.push({top:X-r.offset-r.bound,href:N})}L.sort((N,G)=>N.top-G.top);for(let N=0;N<L.length;N++){const G=L[N],V=L[N+1];if(N===0&&M===0)return r.selectScrollTop?G.href:"";if(G.top<=M&&(!V||V.top>M))return G.href}},I=()=>{const M=My(r.container);!M||kv(M)?c.value=window:c.value=M};pr(c,"scroll",C);const k=()=>{Tt(()=>{if(!a.value||!l.value||!i.value){o.value={};return}const M=u[i.value];if(!M){o.value={};return}const L=a.value.getBoundingClientRect(),N=l.value.getBoundingClientRect(),G=M.getBoundingClientRect();if(r.direction==="horizontal"){const V=G.left-L.left;o.value={left:`${V}px`,width:`${G.width}px`,opacity:1}}else{const V=G.top-L.top+(G.height-N.height)/2;o.value={top:`${V}px`,opacity:1}}})};return Be(i,k),Be(()=>{var M;return(M=s.default)==null?void 0:M.call(s)},k),Zt(()=>{I();const M=decodeURIComponent(window.location.hash);My(M)?w(M):C()}),Be(()=>r.container,()=>{I()}),Mn(a$,{ns:f,direction:r.direction,currentAnchor:i,addLink:v,removeLink:y,handleClick:E}),e({scrollTo:w}),(M,L)=>(D(),Z("div",{ref_key:"anchorRef",ref:a,class:U(p(m))},[M.marker?(D(),Z("div",{key:0,ref_key:"markerRef",ref:l,class:U(p(f).e("marker")),style:Pt(o.value)},null,6)):Pe("v-if",!0),ne("div",{class:U(p(f).e("list"))},[Ae(M.$slots,"default")],2)],2))}});var SLe=at(xLe,[["__file","anchor.vue"]]);const ELe=it({title:String,href:String}),CLe=de({name:"ElAnchorLink"}),TLe=de({...CLe,props:ELe,setup(t){const e=t,n=H(null),{ns:r,direction:s,currentAnchor:i,addLink:o,removeLink:a,handleClick:l}=_t(a$),c=R(()=>[r.e("link"),r.is("active",i.value===e.href)]),u=d=>{l(d,e.href)};return Be(()=>e.href,(d,h)=>{Tt(()=>{h&&a(h),d&&o({href:d,el:n.value})})}),Zt(()=>{const{href:d}=e;d&&o({href:d,el:n.value})}),Xn(()=>{const{href:d}=e;d&&a(d)}),(d,h)=>(D(),Z("div",{class:U(p(r).e("item"))},[ne("a",{ref_key:"linkRef",ref:n,class:U(p(c)),href:d.href,onClick:u},[Ae(d.$slots,"default",{},()=>[rn(tt(d.title),1)])],10,["href"]),d.$slots["sub-link"]&&p(s)==="vertical"?(D(),Z("div",{key:0,class:U(p(r).e("list"))},[Ae(d.$slots,"sub-link")],2)):Pe("v-if",!0)],2))}});var l$=at(TLe,[["__file","anchor-link.vue"]]);const MLe=nn(SLe,{AnchorLink:l$}),ALe=Br(l$),c$={label:"label",value:"value",disabled:"disabled"},kLe=it({direction:{type:Ce(String),default:"horizontal"},options:{type:Ce(Array),default:()=>[]},modelValue:{type:[String,Number,Boolean],default:void 0},props:{type:Ce(Object),default:()=>c$},block:Boolean,size:Es,disabled:Boolean,validateEvent:{type:Boolean,default:!0},id:String,name:String,...hi(["ariaLabel"])}),ILe={[Qt]:t=>kt(t)||Ft(t)||nr(t),[xn]:t=>kt(t)||Ft(t)||nr(t)},PLe=de({name:"ElSegmented"}),RLe=de({...PLe,props:kLe,emits:ILe,setup(t,{emit:e}){const n=t,r=Qe("segmented"),s=ni(),i=ys(),o=pi(),{formItem:a}=fi(),{inputId:l,isLabeledByFormItem:c}=la(n,{formItemContext:a}),u=H(null),d=sme(),h=Ln({isInit:!1,width:0,height:0,translateX:0,translateY:0,focusVisible:!1}),f=M=>{const L=v(M);e(Qt,L),e(xn,L)},m=R(()=>({...c$,...n.props})),v=M=>un(M)?M[m.value.value]:M,y=M=>un(M)?M[m.value.label]:M,g=M=>!!(o.value||un(M)&&M[m.value.disabled]),S=M=>n.modelValue===v(M),_=M=>n.options.find(L=>v(L)===M),w=M=>[r.e("item"),r.is("selected",S(M)),r.is("disabled",g(M))],E=()=>{if(!u.value)return;const M=u.value.querySelector(".is-selected"),L=u.value.querySelector(".is-selected input");if(!M||!L){h.width=0,h.height=0,h.translateX=0,h.translateY=0,h.focusVisible=!1;return}h.isInit=!0,n.direction==="vertical"?(h.height=M.offsetHeight,h.translateY=M.offsetTop):(h.width=M.offsetWidth,h.translateX=M.offsetLeft);try{h.focusVisible=L.matches(":focus-visible")}catch{}},C=R(()=>[r.b(),r.m(i.value),r.is("block",n.block)]),T=R(()=>({width:n.direction==="vertical"?"100%":`${h.width}px`,height:n.direction==="vertical"?`${h.height}px`:"100%",transform:n.direction==="vertical"?`translateY(${h.translateY}px)`:`translateX(${h.translateX}px)`,display:h.isInit?"block":"none"})),I=R(()=>[r.e("item-selected"),r.is("disabled",g(_(n.modelValue))),r.is("focus-visible",h.focusVisible)]),k=R(()=>n.name||s.value);return Ir(u,E),Be(d,E),Be(()=>n.modelValue,()=>{var M;E(),n.validateEvent&&((M=a==null?void 0:a.validate)==null||M.call(a,"change").catch(L=>void 0))},{flush:"post"}),(M,L)=>M.options.length?(D(),Z("div",{key:0,id:p(l),ref_key:"segmentedRef",ref:u,class:U(p(C)),role:"radiogroup","aria-label":p(c)?void 0:M.ariaLabel||"segmented","aria-labelledby":p(c)?p(a).labelId:void 0},[ne("div",{class:U([p(r).e("group"),p(r).m(n.direction)])},[ne("div",{style:Pt(p(T)),class:U(p(I))},null,6),(D(!0),Z(xt,null,_n(M.options,(N,G)=>(D(),Z("label",{key:G,class:U(w(N))},[ne("input",{class:U(p(r).e("item-input")),type:"radio",name:p(k),disabled:g(N),checked:S(N),onChange:V=>f(N)},null,42,["name","disabled","checked","onChange"]),ne("div",{class:U(p(r).e("item-label"))},[Ae(M.$slots,"default",{item:N},()=>[rn(tt(y(N)),1)])],2)],2))),128))],2)],10,["id","aria-label","aria-labelledby"])):Pe("v-if",!0)}});var LLe=at(RLe,[["__file","segmented.vue"]]);const OLe=nn(LLe),NLe=(t,e)=>{const n=t.toLowerCase();return(e.label||e.value).toLowerCase().includes(n)},DLe=(t,e,n)=>{const{selectionEnd:r}=t;if(r===null)return;const s=t.value,i=Hs(e);let o=-1,a;for(let l=r-1;l>=0;--l){const c=s[l];if(c===n||c===`
`||c==="\r"){o=l;continue}if(i.includes(c)){const u=o===-1?r:o;a={pattern:s.slice(l+1,u),start:l+1,end:u,prefix:c,prefixIndex:l,splitIndex:o,selectionEnd:r};break}}return a},FLe=(t,e={debug:!1,useSelectionEnd:!1})=>{const n=t.selectionStart!==null?t.selectionStart:0,r=t.selectionEnd!==null?t.selectionEnd:0,s=e.useSelectionEnd?r:n,i=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];if(e.debug){const h=document.querySelector("#input-textarea-caret-position-mirror-div");h!=null&&h.parentNode&&h.parentNode.removeChild(h)}const o=document.createElement("div");o.id="input-textarea-caret-position-mirror-div",document.body.appendChild(o);const a=o.style,l=window.getComputedStyle(t),c=t.nodeName==="INPUT";a.whiteSpace=c?"nowrap":"pre-wrap",c||(a.wordWrap="break-word"),a.position="absolute",e.debug||(a.visibility="hidden"),i.forEach(h=>{if(c&&h==="lineHeight")if(l.boxSizing==="border-box"){const f=Number.parseInt(l.height),m=Number.parseInt(l.paddingTop)+Number.parseInt(l.paddingBottom)+Number.parseInt(l.borderTopWidth)+Number.parseInt(l.borderBottomWidth),v=m+Number.parseInt(l.lineHeight);f>v?a.lineHeight=`${f-m}px`:f===v?a.lineHeight=l.lineHeight:a.lineHeight="0"}else a.lineHeight=l.height;else a[h]=l[h]}),XT()?t.scrollHeight>Number.parseInt(l.height)&&(a.overflowY="scroll"):a.overflow="hidden",o.textContent=t.value.slice(0,Math.max(0,s)),c&&o.textContent&&(o.textContent=o.textContent.replace(/\s/g,""));const u=document.createElement("span");u.textContent=t.value.slice(Math.max(0,s))||".",u.style.position="relative",u.style.left=`${-t.scrollLeft}px`,u.style.top=`${-t.scrollTop}px`,o.appendChild(u);const d={top:u.offsetTop+Number.parseInt(l.borderTopWidth),left:u.offsetLeft+Number.parseInt(l.borderLeftWidth),height:Number.parseInt(l.fontSize)*1.5};return e.debug?u.style.backgroundColor="#aaa":document.body.removeChild(o),d.left>=t.clientWidth&&(d.left=t.clientWidth),d},BLe=it({...Rv,options:{type:Ce(Array),default:()=>[]},prefix:{type:Ce([String,Array]),default:"@",validator:t=>kt(t)?t.length===1:t.every(e=>kt(e)&&e.length===1)},split:{type:String,default:" ",validator:t=>t.length===1},filterOption:{type:Ce([Boolean,Function]),default:()=>NLe,validator:t=>t===!1?!0:Lt(t)},placement:{type:Ce(String),default:"bottom"},showArrow:Boolean,offset:{type:Number,default:0},whole:Boolean,checkIsWhole:{type:Ce(Function)},modelValue:String,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Ce(Object),default:()=>({})}}),ULe={[Qt]:t=>kt(t),"whole-remove":(t,e)=>kt(t)&&kt(e),input:t=>kt(t),search:(t,e)=>kt(t)&&kt(e),select:(t,e)=>kt(t.value)&&kt(e),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent},zLe=it({options:{type:Ce(Array),default:()=>[]},loading:Boolean,disabled:Boolean,contentId:String,ariaLabel:String}),$Le={select:t=>kt(t.value)},VLe=de({name:"ElMentionDropdown"}),HLe=de({...VLe,props:zLe,emits:$Le,setup(t,{expose:e,emit:n}){const r=t,s=Qe("mention"),{t:i}=zn(),o=H(-1),a=H(),l=H(),c=H(),u=(_,w)=>[s.be("dropdown","item"),s.is("hovering",o.value===w),s.is("disabled",_.disabled||r.disabled)],d=_=>{_.disabled||r.disabled||n("select",_)},h=_=>{o.value=_},f=R(()=>r.disabled||r.options.every(_=>_.disabled)),m=R(()=>r.options[o.value]),v=()=>{m.value&&n("select",m.value)},y=_=>{const{options:w}=r;if(w.length===0||f.value)return;_==="next"?(o.value++,o.value===w.length&&(o.value=0)):_==="prev"&&(o.value--,o.value<0&&(o.value=w.length-1));const E=w[o.value];if(E.disabled){y(_);return}Tt(()=>g(E))},g=_=>{var w,E,C,T;const{options:I}=r,k=I.findIndex(L=>L.value===_.value),M=(w=l.value)==null?void 0:w[k];if(M){const L=(C=(E=c.value)==null?void 0:E.querySelector)==null?void 0:C.call(E,`.${s.be("dropdown","wrap")}`);L&&jT(L,M)}(T=a.value)==null||T.handleScroll()};return Be(()=>r.options,()=>{f.value||r.options.length===0?o.value=-1:o.value=0},{immediate:!0}),e({hoveringIndex:o,navigateOptions:y,selectHoverOption:v,hoverOption:m}),(_,w)=>(D(),Z("div",{ref_key:"dropdownRef",ref:c,class:U(p(s).b("dropdown"))},[_.$slots.header?(D(),Z("div",{key:0,class:U(p(s).be("dropdown","header"))},[Ae(_.$slots,"header")],2)):Pe("v-if",!0),cn(ae(p($a),{id:_.contentId,ref_key:"scrollbarRef",ref:a,tag:"ul","wrap-class":p(s).be("dropdown","wrap"),"view-class":p(s).be("dropdown","list"),role:"listbox","aria-label":_.ariaLabel,"aria-orientation":"vertical"},{default:me(()=>[(D(!0),Z(xt,null,_n(_.options,(E,C)=>(D(),Z("li",{id:`${_.contentId}-${C}`,ref_for:!0,ref_key:"optionRefs",ref:l,key:C,class:U(u(E,C)),role:"option","aria-disabled":E.disabled||_.disabled||void 0,"aria-selected":o.value===C,onMousemove:T=>h(C),onClick:$t(T=>d(E),["stop"])},[Ae(_.$slots,"label",{item:E,index:C},()=>{var T;return[ne("span",null,tt((T=E.label)!=null?T:E.value),1)]})],42,["id","aria-disabled","aria-selected","onMousemove","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class","aria-label"]),[[Wn,_.options.length>0&&!_.loading]]),_.loading?(D(),Z("div",{key:1,class:U(p(s).be("dropdown","loading"))},[Ae(_.$slots,"loading",{},()=>[rn(tt(p(i)("el.mention.loading")),1)])],2)):Pe("v-if",!0),_.$slots.footer?(D(),Z("div",{key:2,class:U(p(s).be("dropdown","footer"))},[Ae(_.$slots,"footer")],2)):Pe("v-if",!0)],2))}});var GLe=at(HLe,[["__file","mention-dropdown.vue"]]);const WLe=de({name:"ElMention",inheritAttrs:!1}),jLe=de({...WLe,props:BLe,emits:ULe,setup(t,{expose:e,emit:n}){const r=t,s=R(()=>Yo(r,Object.keys(Rv))),i=Qe("mention"),o=pi(),a=ni(),l=H(),c=H(),u=H(),d=H(!1),h=H(),f=H(),m=R(()=>r.showArrow?r.placement:`${r.placement}-start`),v=R(()=>r.showArrow?["bottom","top"]:["bottom-start","top-start"]),y=R(()=>{const{filterOption:N,options:G}=r;return!f.value||!N?G:G.filter(V=>N(f.value.pattern,V))}),g=R(()=>d.value&&(!!y.value.length||r.loading)),S=R(()=>{var N;return`${a.value}-${(N=u.value)==null?void 0:N.hoveringIndex}`}),_=N=>{n(Qt,N),n(xs,N),k()},w=N=>{var G,V,X,F;if(!(!("code"in N)||(G=l.value)!=null&&G.isComposing))switch(N.code){case bt.left:case bt.right:k();break;case bt.up:case bt.down:if(!d.value)return;N.preventDefault(),(V=u.value)==null||V.navigateOptions(N.code===bt.up?"prev":"next");break;case bt.enter:case bt.numpadEnter:if(!d.value)return;N.preventDefault(),(X=u.value)!=null&&X.hoverOption?(F=u.value)==null||F.selectHoverOption():d.value=!1;break;case bt.esc:if(!d.value)return;N.preventDefault(),d.value=!1;break;case bt.backspace:if(r.whole&&f.value){const{splitIndex:$,selectionEnd:O,pattern:z,prefixIndex:re,prefix:q}=f.value,le=I();if(!le)return;const fe=le.value,se=r.options.find(we=>we.value===z);if((Lt(r.checkIsWhole)?r.checkIsWhole(z,q):se)&&$!==-1&&$+1===O){N.preventDefault();const we=fe.slice(0,re)+fe.slice($+1);n(Qt,we),n(xs,we),n("whole-remove",z,q);const ve=re;Tt(()=>{le.selectionStart=ve,le.selectionEnd=ve,L()})}}}},{wrapperRef:E}=Zu(l,{disabled:o,afterFocus(){k()},beforeBlur(N){var G;return(G=c.value)==null?void 0:G.isFocusInsideContent(N)},afterBlur(){d.value=!1}}),C=()=>{k()},T=N=>{if(!f.value)return;const G=I();if(!G)return;const V=G.value,{split:X}=r,F=V.slice(f.value.end),$=F.startsWith(X),O=`${N.value}${$?"":X}`,z=V.slice(0,f.value.start)+O+F;n(Qt,z),n(xs,z),n("select",N,f.value.prefix);const re=f.value.start+O.length+($?1:0);Tt(()=>{G.selectionStart=re,G.selectionEnd=re,G.focus(),L()})},I=()=>{var N,G;return r.type==="textarea"?(N=l.value)==null?void 0:N.textarea:(G=l.value)==null?void 0:G.input},k=()=>{setTimeout(()=>{M(),L(),Tt(()=>{var N;return(N=c.value)==null?void 0:N.updatePopper()})},0)},M=()=>{const N=I();if(!N)return;const G=FLe(N),V=N.getBoundingClientRect(),X=l.value.$el.getBoundingClientRect();h.value={position:"absolute",width:0,height:`${G.height}px`,left:`${G.left+V.left-X.left}px`,top:`${G.top+V.top-X.top}px`}},L=()=>{const N=I();if(document.activeElement!==N){d.value=!1;return}const{prefix:G,split:V}=r;if(f.value=DLe(N,G,V),f.value&&f.value.splitIndex===-1){d.value=!0,n("search",f.value.pattern,f.value.prefix);return}d.value=!1};return e({input:l,tooltip:c,dropdownVisible:g}),(N,G)=>(D(),Z("div",{ref_key:"wrapperRef",ref:E,class:U(p(i).b())},[ae(p(Ci),yn(yn(p(s),N.$attrs),{ref_key:"elInputRef",ref:l,"model-value":N.modelValue,disabled:p(o),role:p(g)?"combobox":void 0,"aria-activedescendant":p(g)?p(S)||"":void 0,"aria-controls":p(g)?p(a):void 0,"aria-expanded":p(g)||void 0,"aria-label":N.ariaLabel,"aria-autocomplete":p(g)?"none":void 0,"aria-haspopup":p(g)?"listbox":void 0,onInput:_,onKeydown:w,onMousedown:C}),go({_:2},[_n(N.$slots,(V,X)=>({name:X,fn:me(F=>[Ae(N.$slots,X,Ro(Sl(F)))])}))]),1040,["model-value","disabled","role","aria-activedescendant","aria-controls","aria-expanded","aria-label","aria-autocomplete","aria-haspopup"]),ae(p(ri),{ref_key:"tooltipRef",ref:c,visible:p(g),"popper-class":[p(i).e("popper"),N.popperClass],"popper-options":N.popperOptions,placement:p(m),"fallback-placements":p(v),effect:"light",pure:"",offset:N.offset,"show-arrow":N.showArrow},{default:me(()=>[ne("div",{style:Pt(h.value)},null,4)]),content:me(()=>{var V;return[ae(GLe,{ref_key:"dropdownRef",ref:u,options:p(y),disabled:p(o),loading:N.loading,"content-id":p(a),"aria-label":N.ariaLabel,onSelect:T,onClick:$t((V=l.value)==null?void 0:V.focus,["stop"])},go({_:2},[_n(N.$slots,(X,F)=>({name:F,fn:me($=>[Ae(N.$slots,F,Ro(Sl($)))])}))]),1032,["options","disabled","loading","content-id","aria-label","onClick"])]}),_:3},8,["visible","popper-class","popper-options","placement","fallback-placements","offset","show-arrow"])],2))}});var KLe=at(jLe,[["__file","mention.vue"]]);const qLe=nn(KLe),YLe=it({layout:{type:String,default:"horizontal",values:["horizontal","vertical"]}}),u$=Symbol("splitterRootContextKey");function XLe(t){const e=H(),{width:n,height:r}=dme(e),s=R(()=>t.value==="horizontal"?n.value:r.value);return{containerEl:e,containerSize:s}}function pA(t){return Number(t.slice(0,-1))/100}function mA(t){return Number(t.slice(0,-2))}function gA(t){return kt(t)&&t.endsWith("%")}function vA(t){return kt(t)&&t.endsWith("px")}function ZLe(t,e){const n=R(()=>t.value.map(a=>a.size)),r=R(()=>t.value.length),s=H([]);Be([n,r,e],()=>{var a;let l=[],c=0;for(let d=0;d<r.value;d+=1){const h=(a=t.value[d])==null?void 0:a.size;if(gA(h))l[d]=pA(h);else if(vA(h))l[d]=mA(h)/e.value;else if(h||h===0){const f=Number(h);Number.isNaN(f)||(l[d]=f/e.value)}else c+=1,l[d]=void 0}const u=l.reduce((d,h)=>d+(h||0),0);if(u>1||!c){const d=1/u;l=l.map(h=>h===void 0?0:h*d)}else{const d=(1-u)/c;l=l.map(h=>h===void 0?d:h)}s.value=l});const i=a=>a*e.value,o=R(()=>s.value.map(i));return{percentSizes:s,pxSizes:o}}function JLe(t,e,n){const r=f=>f*e.value||0;function s(f,m){return gA(f)?r(pA(f)):vA(f)?mA(f):f??m}const i=H(null);let o=[];const a=R(()=>t.value.map(f=>[f.min,f.max])),l=f=>{i.value={index:f,confirmed:!1},o=n.value},c=(f,m)=>{var v,y;let g=null;if((!i.value||!i.value.confirmed)&&m!==0){if(m>0)g=f,i.value={index:f,confirmed:!0};else for(let M=f;M>=0;M-=1)if(o[M]>0){g=M,i.value={index:M,confirmed:!0};break}}const S=(y=g??((v=i.value)==null?void 0:v.index))!=null?y:f,_=[...o],w=S+1,E=s(a.value[S][0],0),C=s(a.value[w][0],0),T=s(a.value[S][1],e.value||0),I=s(a.value[w][1],e.value||0);let k=m;_[S]+k<E&&(k=E-_[S]),_[w]-k<C&&(k=_[w]-C),_[S]+k>T&&(k=T-_[S]),_[w]-k>I&&(k=_[w]-I),_[S]+=k,_[w]-=k,t.value.forEach((M,L)=>{M.size=_[L]})},u=()=>{i.value=null,o=[]},d=[];return{onMoveStart:l,onMoving:c,onMoveEnd:u,movingIndex:i,onCollapse:(f,m)=>{d.length||d.push(...n.value);const v=n.value,y=m==="start"?f:f+1,g=m==="start"?f+1:f,S=v[y],_=v[g];if(S!==0&&_!==0)v[y]=0,v[g]+=S,d[f]=S;else{const w=S+_,E=d[f],C=w-E;v[g]=E,v[y]=C}t.value.forEach((w,E)=>{w.size=v[E]})}}}const QLe=de({name:"ElSplitter"}),eOe=de({...QLe,props:YLe,emits:["resizeStart","resize","resizeEnd","collapse"],setup(t,{emit:e}){const n=t,r=Qe("splitter"),s=Yn(n,"layout"),{containerEl:i,containerSize:o}=XLe(s),{removeChild:a,children:l,addChild:c,ChildrenSorter:u}=x_(tn(),"ElSplitterPanel");Be(l,()=>{l.value.forEach((C,T)=>{C.setIndex(T)})});const{percentSizes:d,pxSizes:h}=ZLe(l,o),{onMoveStart:f,onMoving:m,onMoveEnd:v,onCollapse:y,movingIndex:g}=JLe(l,o,h);return Mn(u$,Ln({panels:l,percentSizes:d,pxSizes:h,layout:s,movingIndex:g,containerSize:o,onMoveStart:C=>{f(C),e("resizeStart",C,h.value)},onMoving:(C,T)=>{m(C,T),e("resize",C,h.value)},onMoveEnd:C=>{v(),e("resizeEnd",C,h.value)},onCollapse:(C,T)=>{y(C,T),e("collapse",C,T,h.value)},registerPanel:c,unregisterPanel:a})),(C,T)=>(D(),Z("div",{ref_key:"containerEl",ref:i,class:U([p(r).b(),p(r).e(p(s))])},[Ae(C.$slots,"default"),ae(p(u)),Pe(" Prevent iframe touch events from breaking "),p(g)?(D(),Z("div",{key:0,class:U([p(r).e("mask"),p(r).e(`mask-${p(s)}`)])},null,2)):Pe("v-if",!0)],2))}});var tOe=at(eOe,[["__file","splitter.vue"]]);function nOe(t){return t&&un(t)?t:{start:!!t,end:!!t}}function ML(t,e,n,r){return!!(t!=null&&t.collapsible.end&&e>0||n!=null&&n.collapsible.start&&r===0&&e>0)}const rOe=de({name:"ElSplitterBar"}),sOe=de({...rOe,props:{index:{type:Number,required:!0},layout:{type:String,values:["horizontal","vertical"],default:"horizontal"},resizable:{type:Boolean,default:!0},startCollapsible:{type:Boolean},endCollapsible:{type:Boolean}},emits:["moveStart","moving","moveEnd","collapse"],setup(t,{emit:e}){const n=t,r=Qe("splitter-bar"),s=R(()=>n.layout==="horizontal"),i=R(()=>s.value?{width:0}:{height:0}),o=R(()=>({width:s.value?"16px":"100%",height:s.value?"100%":"16px",cursor:s.value?"col-resize":"row-resize",touchAction:"none"})),a=R(()=>{const g=r.e("dragger");return{[`${g}-horizontal`]:s.value,[`${g}-vertical`]:!s.value,[`${g}-active`]:!!l.value}}),l=H(null),c=g=>{n.resizable&&(l.value=[g.pageX,g.pageY],e("moveStart",n.index),window.addEventListener("mouseup",f),window.addEventListener("mousemove",d))},u=g=>{if(n.resizable&&g.touches.length===1){g.preventDefault();const S=g.touches[0];l.value=[S.pageX,S.pageY],e("moveStart",n.index),window.addEventListener("touchend",m),window.addEventListener("touchmove",h)}},d=g=>{const{pageX:S,pageY:_}=g,w=S-l.value[0],E=_-l.value[1],C=s.value?w:E;e("moving",n.index,C)},h=g=>{if(g.touches.length===1){g.preventDefault();const S=g.touches[0],_=S.pageX-l.value[0],w=S.pageY-l.value[1],E=s.value?_:w;e("moving",n.index,E)}},f=()=>{l.value=null,window.removeEventListener("mouseup",f),window.removeEventListener("mousemove",d),e("moveEnd",n.index)},m=()=>{l.value=null,window.removeEventListener("touchend",m),window.removeEventListener("touchmove",h),e("moveEnd",n.index)},v=R(()=>s.value?Sc:p_),y=R(()=>s.value?Ai:Ll);return(g,S)=>(D(),Z("div",{class:U([p(r).b()]),style:Pt(p(i))},[t.startCollapsible?(D(),Z("div",{key:0,class:U([p(r).e("collapse-icon"),p(r).e(`${t.layout}-collapse-icon-start`)]),onClick:_=>e("collapse",t.index,"start")},[Ae(g.$slots,"start-collapsible",{},()=>[(D(),Le(mn(p(v)),{style:{width:"12px",height:"12px"}}))])],10,["onClick"])):Pe("v-if",!0),ne("div",{class:U([p(r).e("dragger"),p(a),t.resizable?"":p(r).e("disable")]),style:Pt(p(o)),onMousedown:c,onTouchstart:u},null,38),t.endCollapsible?(D(),Z("div",{key:1,class:U([p(r).e("collapse-icon"),p(r).e(`${t.layout}-collapse-icon-end`)]),onClick:_=>e("collapse",t.index,"end")},[Ae(g.$slots,"end-collapsible",{},()=>[(D(),Le(mn(p(y)),{style:{width:"12px",height:"12px"}}))])],10,["onClick"])):Pe("v-if",!0)],6))}});var iOe=at(sOe,[["__file","split-bar.vue"]]);const oOe=it({min:{type:[String,Number]},max:{type:[String,Number]},size:{type:[String,Number]},resizable:{type:Boolean,default:!0},collapsible:Boolean}),d$="ElSplitterPanel",aOe=de({name:d$}),lOe=de({...aOe,props:oOe,emits:["update:size"],setup(t,{emit:e}){const n=t,r=Qe("splitter-panel"),s=_t(u$);s||hs(d$,"usage: <el-splitter><el-splitter-panel /></el-splitter/>");const{panels:i,layout:o,containerSize:a,pxSizes:l}=Ds(s),{registerPanel:c,unregisterPanel:u,onCollapse:d,onMoveEnd:h,onMoveStart:f,onMoving:m}=s,v=H(),y=tn(),g=y.uid,S=H(0),_=R(()=>i.value[S.value]),w=X=>{S.value=X},E=R(()=>{var X;return _.value&&(X=l.value[S.value])!=null?X:0}),C=R(()=>{var X;return _.value&&(X=l.value[S.value+1])!=null?X:0}),T=R(()=>_.value?i.value[S.value+1]:null),I=R(()=>{var X;return T.value?n.resizable&&((X=T.value)==null?void 0:X.resizable)&&(E.value!==0||!n.min)&&(C.value!==0||!T.value.min):!1}),k=R(()=>_.value?S.value!==i.value.length-1:!1),M=R(()=>ML(_.value,E.value,T.value,C.value)),L=R(()=>ML(T.value,C.value,_.value,E.value));function N(X){return gA(X)?pA(X)*a.value||0:vA(X)?mA(X):X??0}let G=!1;Be(()=>n.size,()=>{if(_.value){const X=N(n.size),F=N(n.max),$=N(n.min),O=Math.min(Math.max(X,$||0),F||X);O!==X&&(G=!0,e("update:size",O)),_.value.size=O,Tt(()=>G=!1)}}),Be(()=>{var X;return(X=_.value)==null?void 0:X.size},X=>{!G&&X!==n.size&&e("update:size",X)}),Be(()=>n.resizable,X=>{_.value&&(_.value.resizable=X)});const V=Ln({el:v.value,uid:g,getVnode:()=>y.vnode,setIndex:w,...n,collapsible:nOe(n.collapsible)});return c(V),Xn(()=>u(V)),(X,F)=>(D(),Z(xt,null,[ne("div",yn({ref_key:"panelEl",ref:v,class:[p(r).b()],style:{flexBasis:`${p(E)}px`}},X.$attrs),[Ae(X.$slots,"default")],16),p(k)?(D(),Le(iOe,{key:0,index:S.value,layout:p(o),resizable:p(I),"start-collapsible":p(M),"end-collapsible":p(L),onMoveStart:p(f),onMoving:p(m),onMoveEnd:p(h),onCollapse:p(d)},{"start-collapsible":me(()=>[Ae(X.$slots,"start-collapsible")]),"end-collapsible":me(()=>[Ae(X.$slots,"end-collapsible")]),_:3},8,["index","layout","resizable","start-collapsible","end-collapsible","onMoveStart","onMoving","onMoveEnd","onCollapse"])):Pe("v-if",!0)],64))}});var h$=at(lOe,[["__file","split-panel.vue"]]);const cOe=nn(tOe,{SplitPanel:h$}),uOe=Br(h$);var dOe=[$me,ave,HU,vIe,nbe,cbe,WU,wbe,xbe,Ss,dM,h1e,v1e,O1e,N1e,B_e,bz,G_e,oa,Y1e,uz,Y_e,hwe,fwe,E_,Nwe,Bwe,Xwe,Zwe,Jwe,Qwe,exe,fSe,SSe,ESe,Zz,Jz,WSe,l7,c7,u7,d7,REe,LEe,Et,GEe,p7,Ci,m7,iCe,dCe,ICe,PCe,RCe,LCe,UCe,ITe,DTe,WTe,zU,NM,vz,l_e,a_e,tMe,oMe,fMe,$a,ih,c1,uTe,WMe,eAe,tAe,_Ae,CAe,D7,DAe,WAe,jAe,JAe,s9,lke,gIe,RIe,LIe,Sp,ZM,Pxe,HIe,YIe,XIe,ri,gRe,kRe,w1,qRe,d4e,O4e,W4e,gLe,vLe,MLe,ALe,OLe,qLe,cOe,uOe];const jo="ElInfiniteScroll",hOe=50,fOe=200,pOe=0,mOe={delay:{type:Number,default:fOe},distance:{type:Number,default:pOe},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},yA=(t,e)=>Object.entries(mOe).reduce((n,[r,s])=>{var i,o;const{type:a,default:l}=s,c=t.getAttribute(`infinite-scroll-${r}`);let u=(o=(i=e[c])!=null?i:c)!=null?o:l;return u=u==="false"?!1:u,u=a(u),n[r]=Number.isNaN(u)?l:u,n},{}),f$=t=>{const{observer:e}=t[jo];e&&(e.disconnect(),delete t[jo].observer)},gOe=(t,e)=>{const{container:n,containerEl:r,instance:s,observer:i,lastScrollTop:o}=t[jo],{disabled:a,distance:l}=yA(t,s),{clientHeight:c,scrollHeight:u,scrollTop:d}=r,h=d-o;if(t[jo].lastScrollTop=d,i||a||h<0)return;let f=!1;if(n===t)f=u-(c+d)<=l;else{const{clientTop:m,scrollHeight:v}=t,y=iE(t,r);f=d+c>=y+m+v-l}f&&e.call(s)};function Kx(t,e){const{containerEl:n,instance:r}=t[jo],{disabled:s}=yA(t,r);s||n.clientHeight===0||(n.scrollHeight<=n.clientHeight?e.call(r):f$(t))}const vOe={async mounted(t,e){const{instance:n,value:r}=e;Lt(r)||hs(jo,"'v-infinite-scroll' binding value must be a function"),await Tt();const{delay:s,immediate:i}=yA(t,n),o=WT(t,!0),a=o===window?document.documentElement:o,l=Vd(gOe.bind(null,t,r),s);if(o){if(t[jo]={instance:n,container:o,containerEl:a,delay:s,cb:r,onScroll:l,lastScrollTop:a.scrollTop},i){const c=new MutationObserver(Vd(Kx.bind(null,t,r),hOe));t[jo].observer=c,c.observe(t,{childList:!0,subtree:!0}),Kx(t,r)}o.addEventListener("scroll",l)}},unmounted(t){if(!t[jo])return;const{container:e,onScroll:n}=t[jo];e==null||e.removeEventListener("scroll",n),f$(t)},async updated(t){if(!t[jo])await Tt();else{const{containerEl:e,cb:n,observer:r}=t[jo];e.clientHeight&&r&&Kx(t,n)}}},KE=vOe;KE.install=t=>{t.directive("InfiniteScroll",KE)};const yOe=KE;function bOe(t,e){let n;const r=H(!1),s=Ln({...t,originalPosition:"",originalOverflow:"",visible:!1});function i(f){s.text=f}function o(){const f=s.parent,m=h.ns;if(!f.vLoadingAddClassList){let v=f.getAttribute("loading-number");v=Number.parseInt(v)-1,v?f.setAttribute("loading-number",v.toString()):(Mi(f,m.bm("parent","relative")),f.removeAttribute("loading-number")),Mi(f,m.bm("parent","hidden"))}a(),d.unmount()}function a(){var f,m;(m=(f=h.$el)==null?void 0:f.parentNode)==null||m.removeChild(h.$el)}function l(){var f;t.beforeClose&&!t.beforeClose()||(r.value=!0,clearTimeout(n),n=setTimeout(c,400),s.visible=!1,(f=t.closed)==null||f.call(t))}function c(){if(!r.value)return;const f=s.parent;r.value=!1,f.vLoadingAddClassList=void 0,o()}const d=oB(de({name:"ElLoading",setup(f,{expose:m}){const{ns:v,zIndex:y}=f_("loading");return m({ns:v,zIndex:y}),()=>{const g=s.spinner||s.svg,S=Ut("svg",{class:"circular",viewBox:s.svgViewBox?s.svgViewBox:"0 0 50 50",...g?{innerHTML:g}:{}},[Ut("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),_=s.text?Ut("p",{class:v.b("text")},[s.text]):void 0;return Ut(Xs,{name:v.b("fade"),onAfterLeave:c},{default:me(()=>[cn(ae("div",{style:{backgroundColor:s.background||""},class:[v.b("mask"),s.customClass,s.fullscreen?"is-fullscreen":""]},[Ut("div",{class:v.b("spinner")},[S,_])]),[[Wn,s.visible]])])})}}}));Object.assign(d._context,e??{});const h=d.mount(document.createElement("div"));return{...Ds(s),setText:i,removeElLoadingChild:a,close:l,handleAfterLeave:c,vm:h,get $el(){return h.$el}}}let Ay;const Zf=function(t={}){if(!Vn)return;const e=_Oe(t);if(e.fullscreen&&Ay)return Ay;const n=bOe({...e,closed:()=>{var s;(s=e.closed)==null||s.call(e),e.fullscreen&&(Ay=void 0)}},Zf._context);wOe(e,e.parent,n),AL(e,e.parent,n),e.parent.vLoadingAddClassList=()=>AL(e,e.parent,n);let r=e.parent.getAttribute("loading-number");return r?r=`${Number.parseInt(r)+1}`:r="1",e.parent.setAttribute("loading-number",r),e.parent.appendChild(n.$el),Tt(()=>n.visible.value=e.visible),e.fullscreen&&(Ay=n),n},_Oe=t=>{var e,n,r,s;let i;return kt(t.target)?i=(e=document.querySelector(t.target))!=null?e:document.body:i=t.target||document.body,{parent:i===document.body||t.body?document.body:i,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:i===document.body&&((n=t.fullscreen)!=null?n:!0),lock:(r=t.lock)!=null?r:!1,customClass:t.customClass||"",visible:(s=t.visible)!=null?s:!0,beforeClose:t.beforeClose,closed:t.closed,target:i}},wOe=async(t,e,n)=>{const{nextZIndex:r}=n.vm.zIndex||n.vm._.exposed.zIndex,s={};if(t.fullscreen)n.originalPosition.value=rc(document.body,"position"),n.originalOverflow.value=rc(document.body,"overflow"),s.zIndex=r();else if(t.parent===document.body){n.originalPosition.value=rc(document.body,"position"),await Tt();for(const i of["top","left"]){const o=i==="top"?"scrollTop":"scrollLeft";s[i]=`${t.target.getBoundingClientRect()[i]+document.body[o]+document.documentElement[o]-Number.parseInt(rc(document.body,`margin-${i}`),10)}px`}for(const i of["height","width"])s[i]=`${t.target.getBoundingClientRect()[i]}px`}else n.originalPosition.value=rc(e,"position");for(const[i,o]of Object.entries(s))n.$el.style[i]=o},AL=(t,e,n)=>{const r=n.vm.ns||n.vm._.exposed.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?Mi(e,r.bm("parent","relative")):Zo(e,r.bm("parent","relative")),t.fullscreen&&t.lock?Zo(e,r.bm("parent","hidden")):Mi(e,r.bm("parent","hidden"))};Zf._context=null;const Um=Symbol("ElLoading"),wd=t=>`element-loading-${Il(t)}`,kL=(t,e)=>{var n,r,s,i;const o=e.instance,a=f=>un(e.value)?e.value[f]:void 0,l=f=>{const m=kt(f)&&(o==null?void 0:o[f])||f;return H(m)},c=f=>l(a(f)||t.getAttribute(wd(f))),u=(n=a("fullscreen"))!=null?n:e.modifiers.fullscreen,d={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:u,target:(r=a("target"))!=null?r:u?void 0:t,body:(s=a("body"))!=null?s:e.modifiers.body,lock:(i=a("lock"))!=null?i:e.modifiers.lock},h=Zf(d);h._context=lg._context,t[Um]={options:d,instance:h}},xOe=(t,e)=>{for(const n of Object.keys(t))yr(t[n])&&(t[n].value=e[n])},lg={mounted(t,e){e.value&&kL(t,e)},updated(t,e){const n=t[Um];if(!e.value){n==null||n.instance.close(),t[Um]=null;return}n?xOe(n.options,un(e.value)?e.value:{text:t.getAttribute(wd("text")),svg:t.getAttribute(wd("svg")),svgViewBox:t.getAttribute(wd("svgViewBox")),spinner:t.getAttribute(wd("spinner")),background:t.getAttribute(wd("background")),customClass:t.getAttribute(wd("customClass"))}):kL(t,e)},unmounted(t){var e;(e=t[Um])==null||e.instance.close(),t[Um]=null}};lg._context=null;const qE={install(t){Zf._context=t._context,lg._context=t._context,t.directive("loading",lg),t.config.globalProperties.$loading=Zf},directive:lg,service:Zf},p$=["primary","success","info","warning","error"],Ui=Fr({customClass:"",dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:Vn?document.body:void 0}),SOe=it({customClass:{type:String,default:Ui.customClass},dangerouslyUseHTMLString:{type:Boolean,default:Ui.dangerouslyUseHTMLString},duration:{type:Number,default:Ui.duration},icon:{type:or,default:Ui.icon},id:{type:String,default:Ui.id},message:{type:Ce([String,Object,Function]),default:Ui.message},onClose:{type:Ce(Function),default:Ui.onClose},showClose:{type:Boolean,default:Ui.showClose},type:{type:String,values:p$,default:Ui.type},plain:{type:Boolean,default:Ui.plain},offset:{type:Number,default:Ui.offset},zIndex:{type:Number,default:Ui.zIndex},grouping:{type:Boolean,default:Ui.grouping},repeatNum:{type:Number,default:Ui.repeatNum}}),EOe={destroy:()=>!0},Ia=J8([]),COe=t=>{const e=Ia.findIndex(s=>s.id===t),n=Ia[e];let r;return e>0&&(r=Ia[e-1]),{current:n,prev:r}},TOe=t=>{const{prev:e}=COe(t);return e?e.vm.exposed.bottom.value:0},MOe=(t,e)=>Ia.findIndex(r=>r.id===t)>0?16:e,AOe=de({name:"ElMessage"}),kOe=de({...AOe,props:SOe,emits:EOe,setup(t,{expose:e,emit:n}){const r=t,{Close:s}=YT,i=H(!1),{ns:o,zIndex:a}=f_("message"),{currentZIndex:l,nextZIndex:c}=a,u=H(),d=H(!1),h=H(0);let f;const m=R(()=>r.type?r.type==="error"?"danger":r.type:"info"),v=R(()=>{const k=r.type;return{[o.bm("icon",k)]:k&&Vu[k]}}),y=R(()=>r.icon||Vu[r.type]||""),g=R(()=>TOe(r.id)),S=R(()=>MOe(r.id,r.offset)+g.value),_=R(()=>h.value+S.value),w=R(()=>({top:`${S.value}px`,zIndex:l.value}));function E(){r.duration!==0&&({stop:f}=rh(()=>{T()},r.duration))}function C(){f==null||f()}function T(){d.value=!1,Tt(()=>{var k;i.value||((k=r.onClose)==null||k.call(r),n("destroy"))})}function I({code:k}){k===bt.esc&&T()}return Zt(()=>{E(),c(),d.value=!0}),Be(()=>r.repeatNum,()=>{C(),E()}),pr(document,"keydown",I),Ir(u,()=>{h.value=u.value.getBoundingClientRect().height}),e({visible:d,bottom:_,close:T}),(k,M)=>(D(),Le(Xs,{name:p(o).b("fade"),onBeforeEnter:L=>i.value=!0,onBeforeLeave:k.onClose,onAfterLeave:L=>k.$emit("destroy"),persisted:""},{default:me(()=>[cn(ne("div",{id:k.id,ref_key:"messageRef",ref:u,class:U([p(o).b(),{[p(o).m(k.type)]:k.type},p(o).is("closable",k.showClose),p(o).is("plain",k.plain),k.customClass]),style:Pt(p(w)),role:"alert",onMouseenter:C,onMouseleave:E},[k.repeatNum>1?(D(),Le(p(WU),{key:0,value:k.repeatNum,type:p(m),class:U(p(o).e("badge"))},null,8,["value","type","class"])):Pe("v-if",!0),p(y)?(D(),Le(p(Et),{key:1,class:U([p(o).e("icon"),p(v)])},{default:me(()=>[(D(),Le(mn(p(y))))]),_:1},8,["class"])):Pe("v-if",!0),Ae(k.$slots,"default",{},()=>[k.dangerouslyUseHTMLString?(D(),Z(xt,{key:1},[Pe(" Caution here, message could've been compromised, never use user's input as message "),ne("p",{class:U(p(o).e("content")),innerHTML:k.message},null,10,["innerHTML"])],2112)):(D(),Z("p",{key:0,class:U(p(o).e("content"))},tt(k.message),3))]),k.showClose?(D(),Le(p(Et),{key:2,class:U(p(o).e("closeBtn")),onClick:$t(T,["stop"])},{default:me(()=>[ae(p(s))]),_:1},8,["class","onClick"])):Pe("v-if",!0)],46,["id"]),[[Wn,d.value]])]),_:3},8,["name","onBeforeEnter","onBeforeLeave","onAfterLeave"]))}});var IOe=at(kOe,[["__file","message.vue"]]);let POe=1;const m$=t=>{const e=!t||kt(t)||wr(t)||Lt(t)?{message:t}:t,n={...Ui,...e};if(!n.appendTo)n.appendTo=document.body;else if(kt(n.appendTo)){let r=document.querySelector(n.appendTo);Ki(r)||(r=document.body),n.appendTo=r}return nr(Ao.grouping)&&!n.grouping&&(n.grouping=Ao.grouping),Ft(Ao.duration)&&n.duration===3e3&&(n.duration=Ao.duration),Ft(Ao.offset)&&n.offset===16&&(n.offset=Ao.offset),nr(Ao.showClose)&&!n.showClose&&(n.showClose=Ao.showClose),nr(Ao.plain)&&!n.plain&&(n.plain=Ao.plain),n},ROe=t=>{const e=Ia.indexOf(t);if(e===-1)return;Ia.splice(e,1);const{handler:n}=t;n.close()},LOe=({appendTo:t,...e},n)=>{const r=`message_${POe++}`,s=e.onClose,i=document.createElement("div"),o={...e,id:r,onClose:()=>{s==null||s(),ROe(u)},onDestroy:()=>{Fu(null,i)}},a=ae(IOe,o,Lt(o.message)||wr(o.message)?{default:Lt(o.message)?o.message:()=>o.message}:null);a.appContext=n||Ip._context,Fu(a,i),t.appendChild(i.firstElementChild);const l=a.component,u={id:r,vnode:a,vm:l,handler:{close:()=>{l.exposed.close()}},props:a.component.props};return u},Ip=(t={},e)=>{if(!Vn)return{close:()=>{}};const n=m$(t);if(n.grouping&&Ia.length){const s=Ia.find(({vnode:i})=>{var o;return((o=i.props)==null?void 0:o.message)===n.message});if(s)return s.props.repeatNum+=1,s.props.type=n.type,s.handler}if(Ft(Ao.max)&&Ia.length>=Ao.max)return{close:()=>{}};const r=LOe(n,e);return Ia.push(r),r.handler};p$.forEach(t=>{Ip[t]=(e={},n)=>{const r=m$(e);return Ip({...r,type:t},n)}});function OOe(t){const e=[...Ia];for(const n of e)(!t||t===n.props.type)&&n.handler.close()}Ip.closeAll=OOe;Ip._context=null;const xd=iU(Ip,"$message"),YE="_trap-focus-children",Ud=[],IL=t=>{if(Ud.length===0)return;const e=Ud[Ud.length-1][YE];if(e.length>0&&t.code===bt.tab){if(e.length===1){t.preventDefault(),document.activeElement!==e[0]&&e[0].focus();return}const n=t.shiftKey,r=t.target===e[0],s=t.target===e[e.length-1];r&&n&&(t.preventDefault(),e[e.length-1].focus()),s&&!n&&(t.preventDefault(),e[0].focus())}},NOe={beforeMount(t){t[YE]=$R(t),Ud.push(t),Ud.length<=1&&document.addEventListener("keydown",IL)},updated(t){Tt(()=>{t[YE]=$R(t)})},unmounted(){Ud.shift(),Ud.length===0&&document.removeEventListener("keydown",IL)}},DOe=de({name:"ElMessageBox",directives:{TrapFocus:NOe},components:{ElButton:Ss,ElFocusTrap:Xp,ElInput:Ci,ElOverlay:EM,ElIcon:Et,...YT},inheritAttrs:!1,props:{buttonSize:{type:String,validator:U7},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:Boolean,container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(t,{emit:e}){const{locale:n,zIndex:r,ns:s,size:i}=f_("message-box",R(()=>t.buttonSize)),{t:o}=n,{nextZIndex:a}=r,l=H(!1),c=Ln({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",closeIcon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:"",inputValidator:void 0,inputErrorMessage:"",message:"",modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:Oa(El),cancelButtonLoadingIcon:Oa(El),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:a()}),u=R(()=>{const F=c.type;return{[s.bm("icon",F)]:F&&Vu[F]}}),d=ni(),h=ni(),f=R(()=>{const F=c.type;return c.icon||F&&Vu[F]||""}),m=R(()=>!!c.message),v=H(),y=H(),g=H(),S=H(),_=H(),w=R(()=>c.confirmButtonClass);Be(()=>c.inputValue,async F=>{await Tt(),t.boxType==="prompt"&&F&&N()},{immediate:!0}),Be(()=>l.value,F=>{var $,O;F&&(t.boxType!=="prompt"&&(c.autofocus?g.value=(O=($=_.value)==null?void 0:$.$el)!=null?O:v.value:g.value=v.value),c.zIndex=a()),t.boxType==="prompt"&&(F?Tt().then(()=>{var z;S.value&&S.value.$el&&(c.autofocus?g.value=(z=G())!=null?z:v.value:g.value=v.value)}):(c.editorErrorMessage="",c.validateError=!1))});const E=R(()=>t.draggable),C=R(()=>t.overflow);Kz(v,y,E,C),Zt(async()=>{await Tt(),t.closeOnHashChange&&window.addEventListener("hashchange",T)}),Xn(()=>{t.closeOnHashChange&&window.removeEventListener("hashchange",T)});function T(){l.value&&(l.value=!1,Tt(()=>{c.action&&e("action",c.action)}))}const I=()=>{t.closeOnClickModal&&L(c.distinguishCancelAndClose?"close":"cancel")},k=SM(I),M=F=>{if(c.inputType!=="textarea")return F.preventDefault(),L("confirm")},L=F=>{var $;t.boxType==="prompt"&&F==="confirm"&&!N()||(c.action=F,c.beforeClose?($=c.beforeClose)==null||$.call(c,F,c,T):T())},N=()=>{if(t.boxType==="prompt"){const F=c.inputPattern;if(F&&!F.test(c.inputValue||""))return c.editorErrorMessage=c.inputErrorMessage||o("el.messagebox.error"),c.validateError=!0,!1;const $=c.inputValidator;if(Lt($)){const O=$(c.inputValue);if(O===!1)return c.editorErrorMessage=c.inputErrorMessage||o("el.messagebox.error"),c.validateError=!0,!1;if(kt(O))return c.editorErrorMessage=O,c.validateError=!0,!1}}return c.editorErrorMessage="",c.validateError=!1,!0},G=()=>{var F,$;const O=(F=S.value)==null?void 0:F.$refs;return($=O==null?void 0:O.input)!=null?$:O==null?void 0:O.textarea},V=()=>{L("close")},X=()=>{t.closeOnPressEscape&&V()};return t.lockScroll&&CM(l),{...Ds(c),ns:s,overlayEvent:k,visible:l,hasMessage:m,typeClass:u,contentId:d,inputId:h,btnSize:i,iconComponent:f,confirmButtonClasses:w,rootRef:v,focusStartRef:g,headerRef:y,inputRef:S,confirmRef:_,doClose:T,handleClose:V,onCloseRequested:X,handleWrapperClick:I,handleInputEnter:M,handleAction:L,t:o}}});function FOe(t,e,n,r,s,i){const o=Xt("el-icon"),a=Xt("el-input"),l=Xt("el-button"),c=Xt("el-focus-trap"),u=Xt("el-overlay");return D(),Le(Xs,{name:"fade-in-linear",onAfterLeave:d=>t.$emit("vanish"),persisted:""},{default:me(()=>[cn(ae(u,{"z-index":t.zIndex,"overlay-class":[t.ns.is("message-box"),t.modalClass],mask:t.modal},{default:me(()=>[ne("div",{role:"dialog","aria-label":t.title,"aria-modal":"true","aria-describedby":t.showInput?void 0:t.contentId,class:U(`${t.ns.namespace.value}-overlay-message-box`),onClick:t.overlayEvent.onClick,onMousedown:t.overlayEvent.onMousedown,onMouseup:t.overlayEvent.onMouseup},[ae(c,{loop:"",trapped:t.visible,"focus-trap-el":t.rootRef,"focus-start-el":t.focusStartRef,onReleaseRequested:t.onCloseRequested},{default:me(()=>[ne("div",{ref:"rootRef",class:U([t.ns.b(),t.customClass,t.ns.is("draggable",t.draggable),{[t.ns.m("center")]:t.center}]),style:Pt(t.customStyle),tabindex:"-1",onClick:$t(()=>{},["stop"])},[t.title!==null&&t.title!==void 0?(D(),Z("div",{key:0,ref:"headerRef",class:U([t.ns.e("header"),{"show-close":t.showClose}])},[ne("div",{class:U(t.ns.e("title"))},[t.iconComponent&&t.center?(D(),Le(o,{key:0,class:U([t.ns.e("status"),t.typeClass])},{default:me(()=>[(D(),Le(mn(t.iconComponent)))]),_:1},8,["class"])):Pe("v-if",!0),ne("span",null,tt(t.title),1)],2),t.showClose?(D(),Z("button",{key:0,type:"button",class:U(t.ns.e("headerbtn")),"aria-label":t.t("el.messagebox.close"),onClick:d=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel"),onKeydown:cr($t(d=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[ae(o,{class:U(t.ns.e("close"))},{default:me(()=>[(D(),Le(mn(t.closeIcon||"close")))]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):Pe("v-if",!0)],2)):Pe("v-if",!0),ne("div",{id:t.contentId,class:U(t.ns.e("content"))},[ne("div",{class:U(t.ns.e("container"))},[t.iconComponent&&!t.center&&t.hasMessage?(D(),Le(o,{key:0,class:U([t.ns.e("status"),t.typeClass])},{default:me(()=>[(D(),Le(mn(t.iconComponent)))]),_:1},8,["class"])):Pe("v-if",!0),t.hasMessage?(D(),Z("div",{key:1,class:U(t.ns.e("message"))},[Ae(t.$slots,"default",{},()=>[t.dangerouslyUseHTMLString?(D(),Le(mn(t.showInput?"label":"p"),{key:1,for:t.showInput?t.inputId:void 0,innerHTML:t.message},null,8,["for","innerHTML"])):(D(),Le(mn(t.showInput?"label":"p"),{key:0,for:t.showInput?t.inputId:void 0,textContent:tt(t.message)},null,8,["for","textContent"]))])],2)):Pe("v-if",!0)],2),cn(ne("div",{class:U(t.ns.e("input"))},[ae(a,{id:t.inputId,ref:"inputRef",modelValue:t.inputValue,"onUpdate:modelValue":d=>t.inputValue=d,type:t.inputType,placeholder:t.inputPlaceholder,"aria-invalid":t.validateError,class:U({invalid:t.validateError}),onKeydown:cr(t.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),ne("div",{class:U(t.ns.e("errormsg")),style:Pt({visibility:t.editorErrorMessage?"visible":"hidden"})},tt(t.editorErrorMessage),7)],2),[[Wn,t.showInput]])],10,["id"]),ne("div",{class:U(t.ns.e("btns"))},[t.showCancelButton?(D(),Le(l,{key:0,loading:t.cancelButtonLoading,"loading-icon":t.cancelButtonLoadingIcon,class:U([t.cancelButtonClass]),round:t.roundButton,size:t.btnSize,onClick:d=>t.handleAction("cancel"),onKeydown:cr($t(d=>t.handleAction("cancel"),["prevent"]),["enter"])},{default:me(()=>[rn(tt(t.cancelButtonText||t.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):Pe("v-if",!0),cn(ae(l,{ref:"confirmRef",type:"primary",loading:t.confirmButtonLoading,"loading-icon":t.confirmButtonLoadingIcon,class:U([t.confirmButtonClasses]),round:t.roundButton,disabled:t.confirmButtonDisabled,size:t.btnSize,onClick:d=>t.handleAction("confirm"),onKeydown:cr($t(d=>t.handleAction("confirm"),["prevent"]),["enter"])},{default:me(()=>[rn(tt(t.confirmButtonText||t.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[Wn,t.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[Wn,t.visible]])]),_:3},8,["onAfterLeave"])}var BOe=at(DOe,[["render",FOe],["__file","index.vue"]]);const av=new Map,UOe=t=>{let e=document.body;return t.appendTo&&(kt(t.appendTo)&&(e=document.querySelector(t.appendTo)),Ki(t.appendTo)&&(e=t.appendTo),Ki(e)||(e=document.body)),e},zOe=(t,e,n=null)=>{const r=ae(BOe,t,Lt(t.message)||wr(t.message)?{default:Lt(t.message)?t.message:()=>t.message}:null);return r.appContext=n,Fu(r,e),UOe(t).appendChild(e.firstElementChild),r.component},$Oe=()=>document.createElement("div"),VOe=(t,e)=>{const n=$Oe();t.onVanish=()=>{Fu(null,n),av.delete(s)},t.onAction=i=>{const o=av.get(s);let a;t.showInput?a={value:s.inputValue,action:i}:a=i,t.callback?t.callback(a,r.proxy):i==="cancel"||i==="close"?t.distinguishCancelAndClose&&i!=="cancel"?o.reject("close"):o.reject("cancel"):o.resolve(a)};const r=zOe(t,n,e),s=r.proxy;for(const i in t)Kn(t,i)&&!Kn(s.$props,i)&&(i==="closeIcon"&&un(t[i])?s[i]=Oa(t[i]):s[i]=t[i]);return s.visible=!0,s};function tm(t,e=null){if(!Vn)return Promise.reject();let n;return kt(t)||wr(t)?t={message:t}:n=t.callback,new Promise((r,s)=>{const i=VOe(t,e??tm._context);av.set(i,{options:t,callback:n,resolve:r,reject:s})})}const HOe=["alert","confirm","prompt"],GOe={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};HOe.forEach(t=>{tm[t]=WOe(t)});function WOe(t){return(e,n,r,s)=>{let i="";return un(n)?(r=n,i=""):Bn(n)?i="":i=n,tm(Object.assign({title:i,message:e,type:"",...GOe[t]},r,{boxType:t}),s)}}tm.close=()=>{av.forEach((t,e)=>{e.doClose()}),av.clear()};tm._context=null;const du=tm;du.install=t=>{du._context=t._context,t.config.globalProperties.$msgbox=du,t.config.globalProperties.$messageBox=du,t.config.globalProperties.$alert=du.alert,t.config.globalProperties.$confirm=du.confirm,t.config.globalProperties.$prompt=du.prompt};const jOe=du,g$=["primary","success","info","warning","error"],KOe=it({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:or},id:{type:String,default:""},message:{type:Ce([String,Object,Function]),default:""},offset:{type:Number,default:0},onClick:{type:Ce(Function),default:()=>{}},onClose:{type:Ce(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...g$,""],default:""},zIndex:Number,closeIcon:{type:or,default:ra}}),qOe={destroy:()=>!0},YOe=de({name:"ElNotification"}),XOe=de({...YOe,props:KOe,emits:qOe,setup(t,{expose:e}){const n=t,{ns:r,zIndex:s}=f_("notification"),{nextZIndex:i,currentZIndex:o}=s,a=H(!1);let l;const c=R(()=>{const S=n.type;return S&&Vu[n.type]?r.m(S):""}),u=R(()=>n.type&&Vu[n.type]||n.icon),d=R(()=>n.position.endsWith("right")?"right":"left"),h=R(()=>n.position.startsWith("top")?"top":"bottom"),f=R(()=>{var S;return{[h.value]:`${n.offset}px`,zIndex:(S=n.zIndex)!=null?S:o.value}});function m(){n.duration>0&&({stop:l}=rh(()=>{a.value&&y()},n.duration))}function v(){l==null||l()}function y(){a.value=!1}function g({code:S}){S===bt.delete||S===bt.backspace?v():S===bt.esc?a.value&&y():m()}return Zt(()=>{m(),i(),a.value=!0}),pr(document,"keydown",g),e({visible:a,close:y}),(S,_)=>(D(),Le(Xs,{name:p(r).b("fade"),onBeforeLeave:S.onClose,onAfterLeave:w=>S.$emit("destroy"),persisted:""},{default:me(()=>[cn(ne("div",{id:S.id,class:U([p(r).b(),S.customClass,p(d)]),style:Pt(p(f)),role:"alert",onMouseenter:v,onMouseleave:m,onClick:S.onClick},[p(u)?(D(),Le(p(Et),{key:0,class:U([p(r).e("icon"),p(c)])},{default:me(()=>[(D(),Le(mn(p(u))))]),_:1},8,["class"])):Pe("v-if",!0),ne("div",{class:U(p(r).e("group"))},[ne("h2",{class:U(p(r).e("title")),textContent:tt(S.title)},null,10,["textContent"]),cn(ne("div",{class:U(p(r).e("content")),style:Pt(S.title?void 0:{margin:0})},[Ae(S.$slots,"default",{},()=>[S.dangerouslyUseHTMLString?(D(),Z(xt,{key:1},[Pe(" Caution here, message could've been compromised, never use user's input as message "),ne("p",{innerHTML:S.message},null,8,["innerHTML"])],2112)):(D(),Z("p",{key:0},tt(S.message),1))])],6),[[Wn,S.message]]),S.showClose?(D(),Le(p(Et),{key:0,class:U(p(r).e("closeBtn")),onClick:$t(y,["stop"])},{default:me(()=>[(D(),Le(mn(S.closeIcon)))]),_:1},8,["class","onClick"])):Pe("v-if",!0)],2)],46,["id","onClick"]),[[Wn,a.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var ZOe=at(XOe,[["__file","notification.vue"]]);const Pp={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},x1=16;let JOe=1;const ch=function(t={},e){if(!Vn)return{close:()=>{}};(kt(t)||wr(t))&&(t={message:t});const n=t.position||"top-right";let r=t.offset||0;Pp[n].forEach(({vm:u})=>{var d;r+=(((d=u.el)==null?void 0:d.offsetHeight)||0)+x1}),r+=x1;const s=`notification_${JOe++}`,i=t.onClose,o={...t,offset:r,id:s,onClose:()=>{QOe(s,n,i)}};let a=document.body;Ki(t.appendTo)?a=t.appendTo:kt(t.appendTo)&&(a=document.querySelector(t.appendTo)),Ki(a)||(a=document.body);const l=document.createElement("div"),c=ae(ZOe,o,Lt(o.message)?o.message:wr(o.message)?()=>o.message:null);return c.appContext=Bn(e)?ch._context:e,c.props.onDestroy=()=>{Fu(null,l)},Fu(c,l),Pp[n].push({vm:c}),a.appendChild(l.firstElementChild),{close:()=>{c.component.exposed.visible.value=!1}}};g$.forEach(t=>{ch[t]=(e={},n)=>((kt(e)||wr(e))&&(e={message:e}),ch({...e,type:t},n))});function QOe(t,e,n){const r=Pp[e],s=r.findIndex(({vm:c})=>{var u;return((u=c.component)==null?void 0:u.props.id)===t});if(s===-1)return;const{vm:i}=r[s];if(!i)return;n==null||n(i);const o=i.el.offsetHeight,a=e.split("-")[0];r.splice(s,1);const l=r.length;if(!(l<1))for(let c=s;c<l;c++){const{el:u,component:d}=r[c].vm,h=Number.parseInt(u.style[a],10)-o-x1;d.props.offset=h}}function eNe(){for(const t of Object.values(Pp))t.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})}function tNe(t="top-right"){var e,n,r;let s=((n=(e=Pp[t][0])==null?void 0:e.vm.props)==null?void 0:n.offset)||0;for(const{vm:i}of Pp[t])i.component.props.offset=s,s+=(((r=i.el)==null?void 0:r.offsetHeight)||0)+x1}ch.closeAll=eNe;ch.updateOffsets=tNe;ch._context=null;const nNe=iU(ch,"$notify");var rNe=[yOe,qE,xd,jOe,nNe,S7],sNe=Ime([...dOe,...rNe]);const lv=Ln([]);function iNe(t){lv.find(e=>e.name===t.name)||lv.push({...t,visible:!1})}function oNe(t,e){const n=lv.find(r=>r.name===t);n&&(n.visible=e)}function aNe(t){return lv.find(e=>e.name===t)}function Hv(){return{dialogs:R(()=>lv),registerDialog:iNe,toggleDialog:oNe,getDialogByName:aNe}}const lNe=de({__name:"MlBaseDialog",props:{title:{type:String,required:!0},name:{type:String,required:!0},modelValue:{type:Boolean,required:!0},width:{type:[Number,String],default:""},props:{type:Object,default:()=>({})}},emits:["update:modelValue","ok","cancel"],setup(t,{emit:e}){const{t:n}=si(),r=t,s=e,{registerDialog:i}=Hv();function o(){s("ok"),s("update:modelValue",!1)}function a(){s("cancel"),s("update:modelValue",!1)}return Zt(()=>{i({name:r.name,component:"BaseDialog",props:r.props})}),(l,c)=>{const u=Xt("el-divider");return D(),Le(p(Zz),{"model-value":t.modelValue,width:t.width,close:"handleCancel",class:"ml-dialog"},{header:me(()=>[ne("div",null,tt(t.title),1),ae(u,{class:"ml-dialog-header-bottom-line"})]),footer:me(()=>[ae(u,{class:"ml-dialog-footer-top-line"}),ae(p(Ss),{onClick:a},{default:me(()=>[rn(tt(p(n)("dialog.baseDialog.cancel")),1)]),_:1}),ae(p(Ss),{type:"primary",onClick:o},{default:me(()=>[rn(tt(p(n)("dialog.baseDialog.ok")),1)]),_:1})]),default:me(()=>[Ae(l.$slots,"default",{},void 0,!0)]),_:3},8,["model-value","width"])}}}),ca=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},v$=ca(lNe,[["__scopeId","data-v-8df470d5"]]);function cNe(){const t=Ln([]),e=ei.instance.iterator();for(const n of e)t.push({commandName:n.command.localName,groupName:n.commandGroup});return t.sort((n,r)=>n.commandName.toLowerCase().localeCompare(r.commandName.toLowerCase())),t}function PL(t,e="en-US"){const n=Math.abs(t);if(n!==0&&(n<.001||n>=1e6)){const[r,s]=t.toExponential(3).split("e");return`${new Intl.NumberFormat(e,{maximumFractionDigits:3}).format(Number(r))}e${s}`}else return new Intl.NumberFormat(e,{maximumFractionDigits:6}).format(t)}function uNe(t){const e=H(0),n=H(0);function r(i){e.value=i.x,n.value=i.y}Zt(()=>t.events.mouseMove.addEventListener(r)),yo(()=>t.events.mouseMove.removeEventListener(r));const s=R(()=>`${PL(e.value)}, ${PL(n.value)}`);return{x:e,y:n,text:s}}const gb=Dhe(),dNe=Che(gb);function hNe(){const t=H(new Set),e=_b.instance;for(const n of e.fileTypes)t.value.add(n);return e.events.registered.addEventListener(n=>{t.value.add(n.fileType)}),t}function fNe(t){const e=Ln([]),n=t.curDocument,r=s=>{const i=s.tables.layerTable.newIterator();for(const o of i)e.push({name:o.name,color:o.color.cssColor,isLocked:o.isLocked,isHidden:o.isHidden,isInUse:o.isInUse,isOn:!o.isOff,isPlottable:o.isPlottable,transparency:o.transparency,linetype:o.linetype,lineWeight:o.lineWeight})};return r(n.database),n.database.events.layerModified.addEventListener(s=>{let i=e.find(o=>o.name==s.layer.name);if(i){i=i;const o=s.changes;o.color!=null&&(i.color=o.color.cssColor),o.isLocoked!=null&&(i.isLocked=o.isLocked),o.isHidden!=null&&(i.isHidden=o.isHidden),o.isInUse!=null&&(i.isInUse=o.isInUse),o.isOff!=null&&(i.isOn=!o.isOff),o.isPlottable!=null&&(i.isPlottable=o.isPlottable),o.transparency!=null&&(i.transparency=o.transparency),o.linetype!=null&&(i.linetype=o.linetype),o.lineWeight!=null&&(i.lineWeight=o.lineWeight)}}),t.events.documentActivated.addEventListener(s=>{e.length=0,r(s.doc.database)}),e}function pNe(t){const e=Ln([]),n=t.curDocument,r=s=>{const i=s.dictionaries.layouts.newIterator();e.length=0;for(const o of i)e.push({name:o.layoutName,tabOrder:o.tabOrder,blockTableRecordId:o.blockTableRecordId,isActive:o.blockTableRecordId==s.currentSpaceId});e.sort((o,a)=>o.tabOrder-a.tabOrder)};return r(n.database),t.events.documentActivated.addEventListener(s=>{e.length=0,r(s.doc.database)}),Dp().layoutManager.events.layoutSwitched.addEventListener(s=>{const i=s.layout;e.forEach(o=>{o.name==i.layoutName?o.isActive=!0:o.isActive=!1})}),e}const mNe={ACAD:{csvg:"Converts current drawing to SVG",la:"Layer properties manager",log:"Logs debug information in console",md:"Replaces missed fonts and images",open:"Opens an existing drawing file",pan:"Shifts the view without changing the viewing direction or magnification",pttype:"Specifies the display style and size of point objects",qnew:"Starts a new drawing",select:"Selects entities",zoom:"Zooms to display the maximum extents of all entities",zoomw:"Zooms to display an area specified by a rectangular window"},USER:{}},gNe={baseDialog:{ok:"OK",cancel:"Cancel"},replacementDlg:{title:"Replace Missed Data",fontTabName:"Font",imageTabName:"Image",file:"File",replace:"Replace",missedFont:"Missed Font",replacedFont:"Replaced Font",selectFont:"Select font to replace"},pointStyleDlg:{title:"Point Style",pointSize:"Point Size:"}},vNe={entityName:{"3PointAngularDimension":"Three Point Angular Dimension",AlignedDimension:"Aligned Dimension",Arc:"Arc",ArcDimension:"Arc Dimension",BlockReference:"Block Reference",Circle:"Circle",Dimension:"Dimension",DiametricDimension:"Diametric Dimension",Ellipse:"Ellipse",Hatch:"Hatch",Leader:"Leader",Line:"Line",MText:"MText",OrdinateDimension:"Ordinate Dimension",Point:"Point",Polyline:"Polyline",RadialDimension:"Radial Dimension",RasterImage:"Raster Image",Ray:"Ray",Spline:"Spline",Table:"Table",Trace:"Trace",Text:"Text",Xline:"Xline"},color:{aliceblue:"Alice Blue",antiquewhite:"Antique White",aqua:"Aqua",aquamarine:"Aquamarine",azure:"Azure",beige:"Beige",bisque:"Bisque",black:"Black",blanchedalmond:"Blanched Almond",blue:"Blue",blueviolet:"Blue Violet",brown:"Brown",burlywood:"Burlywood",cadetblue:"Cadet Blue",chartreuse:"Chartreuse",chocolate:"Chocolate",coral:"Coral",cornflowerblue:"Cornflower Blue",cornsilk:"Corn Silk",crimson:"Crimson",cyan:"Cyan",darkblue:"Dark Blue",darkcyan:"Dark Cyan",darkgoldenrod:"Dark Goldenrod",darkgray:"Dark Gray",darkgreen:"Dark Green",darkkhaki:"Dark Khaki",darkmagenta:"Dark Magenta",darkolivegreen:"Dark Olive Green",darkorange:"Dark Orange",darkorchid:"Dark Orchid",darkred:"Dark Red",darksalmon:"Dark Salmon",darkseagreen:"Dark Sea Green",darkslateblue:"Dark Slate Blue",darkslategray:"Dark Slate Gray",darkturquoise:"Dark Turquoise",darkviolet:"Dark Violet",deeppink:"Deep Pink",deepskyblue:"Deep Sky Blue",dimgrey:"Dim Grey",dodgerblue:"Dodger Blue",firebrick:"Fire Brick",floralwhite:"Floral White",forestgreen:"Forest Green",fuchsia:"Fuchsia",gainsboro:"Gainsboro",ghostwhite:"Ghost White",gold:"gold",goldenrod:"goldenrod",gray:"gray",green:"green",greenyellow:"Green Yellow",grey:"grey",honeydew:"Honeydew",hotpink:"Hot Pink",indianred:"Indian Red",indigo:"Indigo",ivory:"Ivory",khaki:"Khaki",lavender:"Lavender",lavenderblush:"Lavender Blush",lawngreen:"Lawn Green",lemonchiffon:"Lemon Chiffon",lightblue:"Light Blue",lightcoral:"Light Coral",lightcyan:"Light Cyan",lightgoldenrodyellow:"Light Goldenrod Yellow",lightgray:"Light Gray",lightgreen:"Light Green",lightgrey:"Light Grey",lightpink:"Light Pink",lightsalmon:"Light Salmon",lightseagreen:"Light Sea Green",lightskyblue:"Light Sky Blue",lightslategray:"Light Slate Gray",lightslategrey:"Light Slate Grey",lightsteelblue:"Light Steel Blue",lightyellow:"Light Yellow",lime:"Lime",limegreen:"Lime Green",linen:"Linen",magenta:"Magenta",maroon:"Maroon",mediumaquamarine:"Medium Aquamarine",mediumblue:"Medium Blue",mediumorchid:"Medium Orchid",mediumpurple:"Medium Purple",mediumseagreen:"Medium Sea Green",mediumslateblue:"Medium Slate Blue",mediumspringgreen:"Medium Spring Green",mediumturquoise:"Medium Turquoise",mediumvioletred:"Medium Violet Red",midnightblue:"Midnight Blue",mintcream:"Mint Cream",mistyrose:"Misty Rose",moccasin:"Moccasin",navajowhite:"Navajo White",navy:"Navy",oldlace:"Oldlace",olive:"Olive",olivedrab:"Olive Drab",orange:"Orange",orangered:"Orange Red",orchid:"Orchid",palegoldenrod:"Pale Goldenrod",palegreen:"Pale Green",paleturquoise:"Paletur Quoise",palevioletred:"Pale Violet Red",papayawhip:"Papaya Whip",peachpuff:"Peachpuff",peru:"Peru",pink:"Pink",plum:"Plum",powderblue:"Powder Blue",purple:"purple",rebeccapurple:"Rebeccapurple",red:"Red",rosybrown:"Rosy Brown",royalblue:"Royal Blue",saddlebrown:"Saddle Brown",salmon:"Salmon",sandybrown:"Sandy Brown",seagreen:"Sea Green",seashell:"Seashell",sienna:"Sienna",silver:"Silver",skyblue:"Skyblue",slateblue:"Slate Blue",slategrey:"Slate Grey",snow:"Snow",springgreen:"Spring Green",steelblue:"Steel Blue",tan:"Tan",teal:"Teal",thistle:"Thistle",tomato:"Tomato",turquoise:"Turquoise",violet:"Violet",wheat:"Wheat",white:"White",whitesmoke:"White Smoke",yellow:"Yellow",yellowgreen:"Yellow Green"}},yNe={mainMenu:{new:"New Drawing",open:"Open Drawing",export:"Export to SVG"},commandLine:{prompt:"Type a command..."},progress:{start:"Start parsing file ...",parse:"Parsing file ...",font:"Downloading fonts needed by this drawing ...",ltype:"Parsing line types ...",style:"Parsing text syltes ...",dimstyle:"Parsing dimension styles ...",layer:"Parsing layers ...",vport:"Parsing viewports ...",blockrecord:"Parsing block record ...",header:"Parsing header ...",block:"Parsing blocks ...",entity:"Parsing entities ...",object:"Parsing named dictionaries ...",end:"Finished!"},verticalToolbar:{select:{text:"Select",description:"Selects entities"},pan:{text:"Pan",description:"Shifts the view without changing the viewing direction or magnification"},zoomToExtent:{text:"Zoom Extents",description:"Zooms to display the maximum extents of all entities"},zoomToBox:{text:"Zoom Window",description:"Zooms to display an area specified by a rectangular window"},layer:{text:"Layer",description:"Manages layers"}},statusBar:{setting:{tooltip:"Display settings",commandLine:"Command line",coordinate:"Coordinate",toolbar:"Toolbar",stats:"Statistics"},pointStyle:{tooltip:"Modify point style"},fullScreen:{on:"Turn on full screen mode",off:"Turn off full screen mode"},theme:{dark:"Switch to dark theme",light:"Switch to light light"},warning:{font:"The following fonts are not found!"}},toolPalette:{layerManager:{title:"Layer Manager",layerList:{name:"Name",on:"On",color:"Color"}}},entityInfo:{color:"Color",layer:"Layer",lineType:"Linetype"},message:{loadingFonts:"Loading fonts ...",loadingDwgConverter:"Loading DWG converter...",fontNotLoaded:'Font "{fontName}" can not be loaded from "{url}"!',failedToGetAvaiableFonts:'Failed to get avaiable fonts from "{url}"!',failedToOpenFile:'Failed to open file "{fileName}"!',fetchingDrawingFile:"Fetching file ..."}},bNe={ACAD:{csvg:"SVG",la:"",log:"",md:"",open:"",pan:"",pttype:"",qnew:"",select:"",zoom:"",zoomw:""},USER:{}},_Ne={baseDialog:{ok:"",cancel:""},replacementDlg:{title:"",fontTabName:"",imageTabName:"",file:"",replace:"",missedFont:"",replacedFont:"",selectFont:""},pointStyleDlg:{title:"",pointSize:":"}},wNe={entityName:{"3PointAngularDimension":"",AlignedDimension:"",Arc:"",ArcDimension:"",BlockReference:"",Circle:"",Dimension:"",DiametricDimension:"",Ellipse:"",Hatch:"",Leader:"",Line:"",MText:"",OrdinateDimension:"",Point:"",Polyline:"",RadialDimension:"",RasterImage:"",Ray:"",Spline:"",Table:"",Trace:"",Text:"",Xline:""},color:{aliceblue:"",antiquewhite:"",aqua:"",aquamarine:"",azure:"",beige:"",bisque:"",black:"",blanchedalmond:"",blue:"",blueviolet:"",brown:"",burlywood:"",cadetblue:"",chartreuse:"",chocolate:"",coral:"",cornflowerblue:"",cornsilk:"",crimson:"",cyan:"",darkblue:"",darkcyan:"",darkgoldenrod:"",darkgray:"	",darkgreen:"",darkkhaki:"",darkmagenta:"",darkolivegreen:"",darkorange:"",darkorchid:"",darkred:"",darksalmon:"",darkseagreen:"",darkslateblue:"",darkslategray:"",darkturquoise:"",darkviolet:"",deeppink:"",deepskyblue:"",dimgrey:"",dodgerblue:"",firebrick:"",floralwhite:"",forestgreen:"",fuchsia:"",gainsboro:"Gainsboro",ghostwhite:"",gold:"",goldenrod:"",gray:"",green:"",greenyellow:"",grey:"",honeydew:"",hotpink:"",indianred:"",indigo:"",ivory:"",khaki:"",lavender:"",lavenderblush:"",lawngreen:"",lemonchiffon:" ",lightblue:"",lightcoral:"",lightcyan:"",lightgoldenrodyellow:"",lightgray:"",lightgreen:"",lightgrey:"",lightpink:"",lightsalmon:"",lightseagreen:"",lightskyblue:"",lightslategray:"",lightslategrey:"",lightsteelblue:"",lightyellow:"",lime:"",limegreen:"",linen:"",magenta:"",maroon:"",mediumaquamarine:"",mediumblue:"",mediumorchid:"",mediumpurple:"",mediumseagreen:"",mediumslateblue:"",mediumspringgreen:"",mediumturquoise:"",mediumvioletred:"",midnightblue:"",mintcream:"",mistyrose:"",moccasin:"",navajowhite:"",navy:"",oldlace:"",olive:"",olivedrab:"",orange:"",orangered:"",orchid:"",palegoldenrod:"",palegreen:"",paleturquoise:"",palevioletred:"",papayawhip:"",peachpuff:"",peru:"",pink:"",plum:"",powderblue:"",purple:"",rebeccapurple:"",red:"",rosybrown:"",royalblue:"",saddlebrown:"",salmon:"",sandybrown:"",seagreen:"",seashell:"",sienna:"",silver:"",skyblue:"",slateblue:"",slategrey:"",snow:"",springgreen:"",steelblue:"",tan:"",teal:"",thistle:"",tomato:"",turquoise:"",violet:"",wheat:"",white:"",whitesmoke:"",yellow:"",yellowgreen:""}},xNe={mainMenu:{new:"",open:"",export:"SVG"},commandLine:{prompt:"..."},progress:{start:"...",parse:" ...",font:"...",ltype:"...",style:"...",dimstyle:"...",layer:"...",vport:"...",blockrecord:"BTRs...",header:"...",block:"..",entity:"...",object:"NODs...",end:""},verticalToolbar:{select:{text:"",description:""},pan:{text:"",description:""},zoomToExtent:{text:"",description:""},zoomToBox:{text:"",description:""},layer:{text:"",description:""}},statusBar:{setting:{tooltip:"",commandLine:"",coordinate:"",toolbar:"",stats:""},pointStyle:{tooltip:""},fullScreen:{on:"",off:""},theme:{dark:"",light:""},warning:{font:""}},toolPalette:{layerManager:{title:"",layerList:{name:"",on:"",color:""}}},entityInfo:{color:"",layer:"",lineType:""},message:{loadingFonts:"...",loadingDwgConverter:"DWG...",fontNotLoaded:'"{url}""{fontName}"',failedToGetAvaiableFonts:'"{url}"!',failedToOpenFile:'"{fileName}"!',fetchingDrawingFile:"..."}},SNe=()=>{const t=localStorage.getItem("preferred_lang");return t==="en"||t==="zh"?t:navigator.language.toLowerCase().substring(0,2)==="zh"?"zh":"en"},ENe={en:{main:yNe,command:mNe,dialog:gNe,entity:vNe},zh:{main:xNe,command:bNe,dialog:_Ne,entity:wNe}},uh=kpe({legacy:!1,messages:ENe,locale:SNe(),fallbackLocale:"en",globalInjection:!0}),CNe=(t,e)=>{const n=uh.global.t,r=`command.${t}.${e}`;return n(r,"")},TNe=t=>{const e=uh.global.t,n="entity.entityName."+t.type;return e(n,t.type,{missingWarn:!1})},MNe=t=>{if(t=="ByLayer"||t=="ByBlock")return t;{const e=uh.global.t,n="entity.color."+t;return e(n,t,{missingWarn:!1})}},ANe=t=>{const e=uh.global.t,n="main.progress."+t.replace(/_/g,"").toLowerCase();return e(n,t)},qx="preferred_lang";function y$(t){const{locale:e}=si(),n=H((()=>{const a=localStorage.getItem(qx);return a==="en"||a==="zh"?a:navigator.language.toLowerCase().substring(0,2)==="zh"?"zh":"en"})()),r=R(()=>n.value),s=a=>{uh.global.locale.value=a,n.value=a,(!t||t==="default")&&localStorage.setItem(qx,a)},i=()=>{localStorage.removeItem(qx)};t&&Be(()=>t,a=>{a&&a!=="default"&&(n.value=a,uh.global.locale.value=a,i())},{immediate:!0}),Be(()=>e.value,a=>{if(!t||t==="default"){const l=a==="zh"?"zh":"en";n.value=l}});const o=R(()=>r.value==="en"?pB:Bhe);return{currentLocale:n,effectiveLocale:r,elementPlusLocale:o,setLocale:s,clearStoragePreference:i,isControlled:R(()=>!!(t&&t!=="default"))}}function b$(){const t=Ln(new Map),e=Ln(new Map),n=()=>{const r=fr.instance.curView.missedData,s=Xo.instance.fontMapping;t.clear(),Object.keys(r.fonts).forEach(i=>{const o=s[i];t.set(i,o||"")}),e.clear(),r.images.forEach((i,o)=>{const a=e.get(i);a?a.ids.add(o):e.set(i,{fileName:i,ids:new Set([o])})})};return fr.instance.events.documentActivated.addEventListener(()=>{n()}),ji.on("font-not-found",r=>{n()}),{fonts:t,images:e}}function D_(){const t=Ln(Xo.instance.settings);return Xo.instance.events.modified.addEventListener(e=>{t[e.key]=e.value}),t}function kNe(t){const e=Ln({}),n=t.curDocument,r=s=>{e.pdmode=s.pdmode,e.pdmode=s.pdsize};return r(n.database),n.database.events.headerSysVarChanged.addEventListener(s=>{e[s.name]=s.database[s.name]}),t.events.documentActivated.addEventListener(s=>{r(s.doc.database)}),e}const INe=de({__name:"MlDialogManager",setup(t,{expose:e}){const{dialogs:n,toggleDialog:r,registerDialog:s}=Hv();return e({toggleDialog:r,registerDialog:s}),(i,o)=>(D(!0),Z(xt,null,_n(p(n),a=>(D(),Z("div",{key:a.name},[(D(),Le(mn(a.component),yn({modelValue:a.visible,"onUpdate:modelValue":l=>a.visible=l},{ref_for:!0},a.props),null,16,["modelValue","onUpdate:modelValue"]))]))),128))}}),PNe=["accept"],RNe=de({__name:"MlFileReader",emits:["file-read"],setup(t,{emit:e}){const n=e,r=H(null),s=hNe(),i=R(()=>{const a=Array.from(s.value);let l="";for(let c=0,u=a.length;c<u;++c)c==u-1?l+=`.${a[c]}`:l+=`.${a[c]}, `;return l});Zt(()=>{ji.on("open-file",()=>{var a;(a=r.value)==null||a.click()})});const o=a=>{var l,c;const u=(l=a.target.files)==null?void 0:l[0];if(u&&u.name){const d=(c=u.name.split(".").pop())==null?void 0:c.toLocaleLowerCase(),h=new FileReader;d=="dxf"?h.readAsText(u):d=="dwg"&&h.readAsArrayBuffer(u),h.onload=f=>{var m;const v=(m=f.target)==null?void 0:m.result;v&&n("file-read",u.name,v)},h.onerror=()=>{console.error("Failed to read the file.")}}};return(a,l)=>(D(),Z("input",{type:"file",ref_key:"fileInput",ref:r,accept:i.value,style:{display:"none"},onChange:o},null,40,PNe))}}),LNe=de({__name:"MlToggleButton",props:up({size:{default:30},data:{}},{modelValue:{default:!1},modelModifiers:{}}),emits:up(["click"],["update:modelValue"]),setup(t,{emit:e}){JF(c=>({a97b120a:o.value}));const n=t,r=AT(t,"modelValue"),s=e,i=R(()=>r.value?n.data.onIcon:n.data.offIcon),o=R(()=>n.size+"px"),a=R(()=>r.value?n.data.onTooltip:n.data.offTooltip),l=()=>{s("click",r.value)};return(c,u)=>{const d=Xt("el-button"),h=Xt("el-tooltip");return D(),Le(h,{content:a.value,"hide-after":0},{default:me(()=>[ae(d,{class:"ml-toggle-button",icon:i.value,onClick:l},null,8,["icon"])]),_:1},8,["content"])}}}),_$=ca(LNe,[["__scopeId","data-v-48d6b055"]]),ONe=de({__name:"MlReplacementDlg",setup(t){const{t:e}=si(),{fonts:n,images:r}=b$(),s=H(!0),i=R(()=>n.size>0?"font":"image"),o=H(null),a=R(()=>fr.instance.avaiableFonts.map(h=>h.name[0])),l=()=>{const h=fr.instance.curDocument.database;r.forEach(m=>{m.file&&m.ids.forEach(v=>{const y=h.tables.blockTable.modelSpace.getIdAt(v);y.image=m.file,y.triggerModifiedEvent()})});const f=Xo.instance;n.forEach((m,v)=>{v&&m&&f.setFontMapping(v,m)})},c=h=>{o.value&&(o.value.click(),o.value.onchange=()=>{u(h)})},u=h=>{var f,m;const v=(m=(f=o.value)==null?void 0:f.files)==null?void 0:m[0];v&&(h.file=v)},d=(h,f)=>{n.set(h,f)};return(h,f)=>{const m=Xt("el-col"),v=Xt("el-row"),y=Xt("el-option"),g=Xt("el-select"),S=Xt("el-tab-pane"),_=Xt("el-table-column"),w=Xt("el-button"),E=Xt("el-table"),C=Xt("el-tabs");return D(),Le(v$,{title:p(e)("dialog.replacementDlg.title"),modelValue:s.value,"onUpdate:modelValue":f[1]||(f[1]=T=>s.value=T),name:"ReplacementDlg",onOk:l},{default:me(()=>[ae(C,{type:"card",modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=T=>i.value=T)},{default:me(()=>[p(n).size>0?(D(),Le(S,{key:0,label:p(e)("dialog.replacementDlg.fontTabName"),name:"font"},{default:me(()=>[ne("div",null,[ae(v,null,{default:me(()=>[ae(m,{span:12},{default:me(()=>[ne("span",null,tt(p(e)("dialog.replacementDlg.missedFont")),1)]),_:1}),ae(m,{span:12},{default:me(()=>[ne("span",null,tt(p(e)("dialog.replacementDlg.replacedFont")),1)]),_:1})]),_:1}),(D(!0),Z(xt,null,_n(p(n),([T,I])=>(D(),Le(v,{key:T,style:{"margin-top":"10px"}},{default:me(()=>[ae(m,{span:12},{default:me(()=>[ne("span",null,tt(T),1)]),_:2},1024),ae(m,{span:12},{default:me(()=>[ae(g,{"model-value":I,placeholder:p(e)("dialog.replacementDlg.selectFont"),"onUpdate:modelValue":k=>d(T,k),style:{width:"100%"}},{default:me(()=>[(D(!0),Z(xt,null,_n(a.value,(k,M)=>(D(),Le(y,{key:M,label:k,value:k},null,8,["label","value"]))),128))]),_:2},1032,["model-value","placeholder","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))])]),_:1},8,["label"])):Pe("",!0),p(r).size>0?(D(),Le(S,{key:1,label:p(e)("dialog.replacementDlg.imageTabName"),name:"image"},{default:me(()=>[ae(E,{data:Array.from(p(r).values()),style:{width:"100%"},"v-show":!1},{default:me(()=>[ae(_,{label:p(e)("dialog.replacementDlg.file"),prop:"fileName","min-width":0,flex:1},null,8,["label"]),ae(_,{label:p(e)("dialog.replacementDlg.replace"),fixed:"right",width:"60"},{default:me(({row:T})=>[ae(w,{link:"",type:"primary",size:"small",onClick:I=>c(T)},{default:me(()=>f[2]||(f[2]=[rn(" ... ",-1)])),_:2,__:[2]},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"]),ne("input",{type:"file",ref_key:"fileInput",ref:o,accept:".png,.jpg,.jpeg",onChange:u,style:{display:"none"}},null,544)]),_:1},8,["label"])):Pe("",!0)]),_:1},8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),NNe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 15 15"};function DNe(t,e){return D(),Z("svg",NNe,e[0]||(e[0]=[ne("path",{fill:"currentColor",d:"M1.417 11.667h1.916v.833H0V9.167h.833v1.916l2.5-2.5.584.584zm9.666 0-2.5-2.5.584-.584 2.5 2.5V9.167h.833V12.5H9.167v-.833zM1.417.833l2.5 2.5-.584.584-2.5-2.5v1.916H0V0h3.333v.833zm9.666 0H9.167V0H12.5v3.333h-.833V1.417l-2.5 2.5-.584-.584z"},null,-1)]))}const RL={render:DNe},FNe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 512 512"};function BNe(t,e){return D(),Z("svg",FNe,e[0]||(e[0]=[ne("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"m434.8 137.65-149.36-68.1c-16.19-7.4-42.69-7.4-58.88 0L77.3 137.65c-17.6 8-17.6 21.09 0 29.09l148 67.5c16.89 7.7 44.69 7.7 61.58 0l148-67.5c17.52-8 17.52-21.1-.08-29.09M160 308.52l-82.7 37.11c-17.6 8-17.6 21.1 0 29.1l148 67.5c16.89 7.69 44.69 7.69 61.58 0l148-67.5c17.6-8 17.6-21.1 0-29.1l-79.94-38.47"},null,-1),ne("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"m160 204.48-82.8 37.16c-17.6 8-17.6 21.1 0 29.1l148 67.49c16.89 7.7 44.69 7.7 61.58 0l148-67.49c17.7-8 17.7-21.1.1-29.1L352 204.48"},null,-1)]))}const UNe={render:BNe},zNe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function $Ne(t,e){return D(),Z("svg",zNe,e[0]||(e[0]=[ne("path",{d:"m15.08 12.854.002-.002V5.59c0-.422-.652-.414-.652 0v3.466c0 .938-1.482.95-1.482 0v-4.83c0-.414-.638-.414-.638 0h-.014v4.83c.014.95-1.482.95-1.482 0V3.444c0-.42-.638-.414-.638 0v5.612c0 .95-1.494.95-1.494 0V4.232c0-.408-.64-.42-.64 0v6.756c0 .802-1.094 1.088-1.494.388q-.39-.669-.776-1.338c-.338-.482-1.1-.15-.794.38l.978 1.698.02.04q.829 1.418 1.658 2.834c.19.3.422.578.666.802h-.006c.672.61 1.528.964 2.418 1.052.888.06 1.792-.124 2.56-.612q.45-.285.816-.68a4 4 0 0 0 .734-1.204c.176-.482.258-.97.258-1.494m-.91-8.608-.004-.002c.958-.38 2.058.244 2.058 1.346v7.266c0 .652-.108 1.29-.332 1.894a4.8 4.8 0 0 1-.964 1.576 5.9 5.9 0 0 1-1.046.884c-.978.612-2.146.862-3.26.774a5.34 5.34 0 0 1-3.098-1.352 5.4 5.4 0 0 1-.87-1.034l-1.672-2.88-.012-.028-.978-1.706c-.59-1.018.068-2.186 1.156-2.336.536-.074 1.126.116 1.562.72.026.028.04.062.054.096q.061.11.122.218V4.234c0-1.176 1.244-1.788 2.202-1.278.42-1.278 2.378-1.264 2.792-.014.972-.51 2.222.102 2.222 1.284v.06z"},null,-1)]))}const VNe={render:$Ne},HNe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function GNe(t,e){return D(),Z("svg",HNe,e[0]||(e[0]=[ne("path",{fill:"currentColor",d:"M10.438 15.298h.002l4.86-4.86-9.722-4.86zM18 10l-3.434 3.434 3.2 3.2-1.132 1.132-3.2-3.2L10 18 2.4 2.4z"},null,-1)]))}const WNe={render:GNe},jNe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function KNe(t,e){return D(),Z("svg",jNe,e[0]||(e[0]=[ne("path",{fill:"currentColor",d:"M15.083 14.808a7 7 0 0 0 1.909-4.825 7.001 7.001 0 1 0-2.167 5.083c.092-.083.175-.174.258-.258m1.259.592 2.575 2.575-.942.942-2.575-2.575a8.334 8.334 0 0 1-11.525-.692 8.326 8.326 0 0 1 .233-11.542C7.267.942 12.367.842 15.65 3.875s3.592 8.117.692 11.525m-3.55-2.608V7.208H7.208v5.584zM5.875 5.875h8.25v8.25h-8.25z"},null,-1)]))}const qNe={render:KNe},YNe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function XNe(t,e){return D(),Z("svg",YNe,e[0]||(e[0]=[ne("path",{fill:"currentColor",d:"m9.333 14.125-3.458-3.458v3.458zm4.792-3.458-3.458 3.458h3.458zm-3.458-4.792 3.458 3.458V5.875zM5.875 9.333l3.458-3.458H5.875zm9.208 5.475a7 7 0 0 0 1.909-4.825 7.001 7.001 0 1 0-2.167 5.083c.092-.083.175-.174.258-.258m1.259.592 2.575 2.575-.942.942-2.575-2.575c-3.408 2.9-8.492 2.591-11.525-.692S.942 7.275 4.108 4.108C7.267.942 12.367.842 15.65 3.875s3.592 8.117.692 11.525"},null,-1)]))}const ZNe={render:XNe},JNe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function QNe(t,e){return D(),Z("svg",JNe,e[0]||(e[0]=[ne("path",{d:"M9.5 9.54h1v1h-1z"},null,-1)]))}const eDe={render:QNe},tDe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function nDe(t,e){return D(),Z("svg",tDe)}const rDe={render:nDe},sDe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function iDe(t,e){return D(),Z("svg",sDe,e[0]||(e[0]=[ne("path",{d:"M2 9.5h16v1H2z"},null,-1),ne("path",{d:"M9.5 2h1v16h-1z"},null,-1)]))}const oDe={render:iDe},aDe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function lDe(t,e){return D(),Z("svg",aDe,e[0]||(e[0]=[ne("path",{d:"m2.146 2.851.707-.707 14.998 14.998-.707.707z"},null,-1),ne("path",{d:"M2.146 17.149 17.144 2.15l.707.707L2.853 17.856z"},null,-1)]))}const cDe={render:lDe},uDe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function dDe(t,e){return D(),Z("svg",uDe,e[0]||(e[0]=[ne("path",{d:"M9.5 2.04h1v8h-1z"},null,-1)]))}const hDe={render:dDe},fDe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function pDe(t,e){return D(),Z("svg",fDe,e[0]||(e[0]=[ne("path",{d:"M9.5 9.54h1v1h-1z"},null,-1),ne("path",{d:"M10 3a7 7 0 1 1-7 7 7 7 0 0 1 7-7m0-1a8 8 0 1 0 8 8 8 8 0 0 0-8-8"},null,-1)]))}const mDe={render:pDe},gDe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function vDe(t,e){return D(),Z("svg",gDe,e[0]||(e[0]=[ne("path",{d:"M10 3a7 7 0 1 1-7 7 7 7 0 0 1 7-7m0-1a8 8 0 1 0 8 8 8 8 0 0 0-8-8"},null,-1)]))}const yDe={render:vDe},bDe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function _De(t,e){return D(),Z("svg",bDe,e[0]||(e[0]=[ne("path",{d:"M3 9.5h14v1H3z"},null,-1),ne("path",{d:"M9.5 3h1v14h-1z"},null,-1),ne("path",{d:"M10 3a7 7 0 1 1-7 7 7 7 0 0 1 7-7m0-1a8 8 0 1 0 8 8 8 8 0 0 0-8-8"},null,-1)]))}const wDe={render:_De},xDe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function SDe(t,e){return D(),Z("svg",xDe,e[0]||(e[0]=[ne("path",{d:"m2.146 2.851.707-.707 14.998 14.998-.707.707z"},null,-1),ne("path",{d:"M2.146 17.149 17.144 2.15l.707.707L2.853 17.856z"},null,-1),ne("path",{d:"M10 3a7 7 0 1 1-7 7 7 7 0 0 1 7-7m0-1a8 8 0 1 0 8 8 8 8 0 0 0-8-8"},null,-1)]))}const EDe={render:SDe},CDe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function TDe(t,e){return D(),Z("svg",CDe,e[0]||(e[0]=[ne("path",{d:"M9.5 5.04h1v5h-1z"},null,-1),ne("path",{d:"M10 3a7 7 0 1 1-7 7 7 7 0 0 1 7-7m0-1a8 8 0 1 0 8 8 8 8 0 0 0-8-8"},null,-1)]))}const MDe={render:TDe},ADe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function kDe(t,e){return D(),Z("svg",ADe,e[0]||(e[0]=[ne("path",{d:"M9.5 9.54h1v1h-1z"},null,-1),ne("path",{d:"M17 3v14H3V3zm1-1H2v16h16z"},null,-1)]))}const IDe={render:kDe},PDe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function RDe(t,e){return D(),Z("svg",PDe,e[0]||(e[0]=[ne("path",{d:"M17 3v14H3V3zm1-1H2v16h16z"},null,-1)]))}const LDe={render:RDe},ODe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function NDe(t,e){return D(),Z("svg",ODe,e[0]||(e[0]=[ne("path",{d:"M17 3.08v14H3v-14zm1-1H2v16h16z"},null,-1),ne("path",{d:"M3 9.58h14v1H3z"},null,-1),ne("path",{d:"M9.5 3.08h1v14h-1z"},null,-1)]))}const DDe={render:NDe},FDe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function BDe(t,e){return D(),Z("svg",FDe,e[0]||(e[0]=[ne("path",{d:"M17 3.08v14H3v-14zm1-1H2v16h16z"},null,-1),ne("path",{d:"m2.146 2.851.707-.707 14.998 14.998-.707.707z"},null,-1),ne("path",{d:"M2.146 17.149 17.144 2.15l.707.707L2.853 17.856z"},null,-1)]))}const UDe={render:BDe},zDe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function $De(t,e){return D(),Z("svg",zDe,e[0]||(e[0]=[ne("path",{d:"M17 3.08v14H3v-14zm1-1H2v16h16z"},null,-1),ne("path",{d:"M9.5 6.04h1v5h-1z"},null,-1)]))}const VDe={render:$De},HDe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function GDe(t,e){return D(),Z("svg",HDe,e[0]||(e[0]=[ne("path",{d:"M17 3.08v14H3v-14zm1-1H2v16h16z"},null,-1),ne("path",{d:"M9.5 9.54h1v1h-1z"},null,-1),ne("path",{d:"M10 4a6 6 0 1 1-6 6 6 6 0 0 1 6-6m0-1a7 7 0 1 0 7 7 7 7 0 0 0-7-7"},null,-1)]))}const WDe={render:GDe},jDe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function KDe(t,e){return D(),Z("svg",jDe,e[0]||(e[0]=[ne("path",{d:"M17 3.08v14H3v-14zm1-1H2v16h16z"},null,-1),ne("path",{d:"M10 4a6 6 0 1 1-6 6 6 6 0 0 1 6-6m0-1a7 7 0 1 0 7 7 7 7 0 0 0-7-7"},null,-1)]))}const qDe={render:KDe},YDe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function XDe(t,e){return D(),Z("svg",YDe,e[0]||(e[0]=[ne("path",{d:"M17 3v14H3V3zm1-1H2v16h16z"},null,-1),ne("path",{d:"M3.88 9.6h12.25v.88H3.88z"},null,-1),ne("path",{d:"M9.56 3.91h.88v12.25h-.88z"},null,-1),ne("path",{d:"M10 4a6 6 0 1 1-6 6 6 6 0 0 1 6-6m0-1a7 7 0 1 0 7 7 7 7 0 0 0-7-7"},null,-1)]))}const ZDe={render:XDe},JDe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function QDe(t,e){return D(),Z("svg",JDe,e[0]||(e[0]=[ne("path",{d:"m2.146 2.851.707-.707 14.998 14.998-.707.707z"},null,-1),ne("path",{d:"M2.146 17.149 17.144 2.15l.707.707L2.853 17.856z"},null,-1),ne("path",{d:"M17 3v14H3V3zm1-1H2v16h16z"},null,-1),ne("path",{d:"M10 4a6 6 0 1 1-6 6 6 6 0 0 1 6-6m0-1a7 7 0 1 0 7 7 7 7 0 0 0-7-7"},null,-1)]))}const e6e={render:QDe},t6e={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20"};function n6e(t,e){return D(),Z("svg",t6e,e[0]||(e[0]=[ne("path",{d:"M17 3v14H3V3zm1-1H2v16h16z"},null,-1),ne("path",{d:"M9.5 5.04h1v5h-1z"},null,-1),ne("path",{d:"M10 4a6 6 0 1 1-6 6 6 6 0 0 1 6-6m0-1a7 7 0 1 0 7 7 7 7 0 0 0-7-7"},null,-1)]))}const r6e={render:n6e},s6e=de({__name:"MlPointStyleDlg",setup(t){const{t:e}=si(),n=kNe(fr.instance),r=H(!0),s=H(0),i=[[{id:0,icon:eDe},{id:1,icon:rDe},{id:2,icon:oDe},{id:3,icon:cDe},{id:4,icon:hDe}],[{id:32,icon:mDe},{id:33,icon:yDe},{id:34,icon:wDe},{id:35,icon:EDe},{id:36,icon:MDe}],[{id:64,icon:IDe},{id:65,icon:LDe},{id:66,icon:DDe},{id:67,icon:UDe},{id:68,icon:VDe}],[{id:96,icon:WDe},{id:97,icon:qDe},{id:98,icon:ZDe},{id:99,icon:e6e},{id:100,icon:r6e}]],o=()=>{n.pdmode&&(s.value=n.pdmode)};o();const a=(d,h)=>i[d][h].id==s.value?"primary":null,l=(d,h)=>{s.value=i[d][h].id},c=()=>{fr.instance.curDocument.database.pdmode=s.value},u=()=>{o()};return(d,h)=>{const f=Xt("el-button"),m=Xt("el-col"),v=Xt("el-row");return D(),Le(v$,{title:p(e)("dialog.pointStyleDlg.title"),width:400,modelValue:r.value,"onUpdate:modelValue":h[0]||(h[0]=y=>r.value=y),name:"PointStyleDlg",onOk:c,onCancel:u},{default:me(()=>[(D(),Z(xt,null,_n(i,(y,g)=>ae(v,{key:g,style:{"margin-top":"10px"},gutter:6,justify:"space-between"},{default:me(()=>[(D(!0),Z(xt,null,_n(y,(S,_)=>(D(),Le(m,{key:_,span:4},{default:me(()=>[ae(f,{icon:S.icon,type:a(g,_),onClick:w=>l(g,_),style:{"font-size":"25px"}},null,8,["icon","type","onClick"])]),_:2},1024))),128))]),_:2},1024)),64))]),_:1},8,["title","modelValue"])}}});(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".ml-dropdown-icon[data-v-3fc33b5d],.ml-dropdown-icon[data-v-3fc33b5d]:hover{outline:none;border:none}.ml-status-bar[data-v-d6a59cf0]{position:fixed;bottom:0;left:0;right:0;height:30px;display:flex;justify-content:space-between;align-items:center;background-color:var(--el-fill-color);box-sizing:border-box;border:1px solid var(--el-border-color)}.ml-status-bar-left[data-v-d6a59cf0],.ml-status-bar-right[data-v-d6a59cf0]{display:flex;align-items:center}.ml-status-bar-left[data-v-d6a59cf0]>*{margin-right:10px}.ml-status-bar-right[data-v-d6a59cf0]>*{margin-left:10px}.ml-vertical-toolbar-button-group[data-v-3eed2087]{display:flex;flex-direction:column}.ml-horizontal-toolbar-button-group[data-v-3eed2087]{display:flex;flex-direction:row}.ml-toolbar-button[data-v-3eed2087]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:5px}.ml-toolbar-button-text[data-v-3eed2087]{margin-left:0;margin-top:5px}.ml-tool-palette-dialog[data-v-11a64c54]{cursor:default;width:300px;min-width:var(--collapsed-width);position:fixed;box-sizing:border-box;border:1px solid var(--el-border-color)}.ml-tool-palette-dialog-icon[data-v-11a64c54]{border-bottom:1px solid var(--el-border-color)}.ml-tool-palette-dialog-layout[data-v-11a64c54]{display:flex;height:100%}.ml-tool-palette-title-bar[data-v-11a64c54]{width:var(--collapsed-width);display:flex;justify-content:left;align-items:center;cursor:move;writing-mode:vertical-rl;text-align:center;background-color:var(--el-fill-color)}.ml-tool-palette-title[data-v-11a64c54]{pointer-events:none;margin-top:10px;margin-bottom:10px;font-size:small;-webkit-user-select:none;user-select:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ml-tool-palette-content[data-v-11a64c54]{-webkit-user-select:none;user-select:none;flex-grow:1;display:flex;justify-content:space-around;background-color:var(--el-fill-color);overflow:hidden}.ml-tool-palette-dialog-layout.left .ml-tool-palette-title-bar[data-v-11a64c54]{order:1}.ml-tool-palette-dialog-layout.left .ml-tool-palette-content[data-v-11a64c54],.ml-tool-palette-dialog-layout.right .ml-tool-palette-title-bar[data-v-11a64c54]{order:2}.ml-tool-palette-dialog-layout.right .ml-tool-palette-content[data-v-11a64c54]{order:1}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const i6e={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 1024 1024"},o6e=ne("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.59 30.59 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.59 30.59 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0"},null,-1),a6e=[o6e];function l6e(t,e){return D(),Z("svg",i6e,[...a6e])}const LL={render:l6e},c6e={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 1024 1024"},u6e=ne("path",{fill:"currentColor",d:"M340.864 149.312a30.59 30.59 0 0 0 0 42.752L652.736 512 340.864 831.872a30.59 30.59 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1),d6e=[u6e];function h6e(t,e){return D(),Z("svg",c6e,[...d6e])}const OL={render:h6e},f6e=de({__name:"MlCollapse",props:up({size:{default:18},reverse:{type:Boolean,default:!1}},{modelValue:{default:!0},modelModifiers:{}}),emits:up(["change"],["update:modelValue"]),setup(t,{emit:e}){const n=t,r=AT(t,"modelValue"),s=e,i=R(()=>n.reverse?r.value?LL:OL:r.value?OL:LL),o=R(()=>`${n.size}px`),a=()=>{s("change",r.value),r.value=!r.value};return(l,c)=>{const u=Et;return D(),Le(u,{size:o.value,onClick:a},{default:me(()=>[(D(),Le(mn(i.value)))]),_:1},8,["size"])}}}),p6e=t=>(aF("data-v-3fc33b5d"),t=t(),lF(),t),m6e=p6e(()=>ne("svg",{preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em","data-v-63d067da":""},[ne("path",{fill:"currentColor",d:"m18.5 10l4.4 11h-2.155l-1.201-3h-4.09l-1.199 3h-2.154L16.5 10h2zM10 2v2h6v2h-1.968a18.222 18.222 0 0 1-3.62 6.301a14.864 14.864 0 0 0 2.336 1.707l-.751 1.878A17.015 17.015 0 0 1 9 13.725a16.676 16.676 0 0 1-6.201 3.548l-.536-1.929a14.7 14.7 0 0 0 5.327-3.042A18.078 18.078 0 0 1 4.767 8h2.24A16.032 16.032 0 0 0 9 10.877a16.165 16.165 0 0 0 2.91-4.876L2 6V4h6V2h2zm7.5 10.885L16.253 16h2.492L17.5 12.885z"})],-1)),g6e=de({__name:"MlDropdown",props:{icon:{},items:{},current:{default:void 0}},emits:{click:null},setup(t,{emit:e}){const n=t,r=e,s=R(()=>n.items.filter(o=>o.name!==n.current)),i=o=>{r("click",o)};return(o,a)=>{const l=Et,c=c7,u=u7,d=l7;return D(),Le(d,{onCommand:i},{dropdown:me(()=>[ae(u,null,{default:me(()=>[(D(!0),Z(xt,null,_n(s.value,h=>(D(),Le(c,{key:h.text,command:h.name},{default:me(()=>[rn(tt(h.text),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:me(()=>[ae(l,{size:"30",class:"ml-dropdown-icon"},{default:me(()=>[m6e]),_:1})]),_:1})}}}),F_=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},v6e=F_(g6e,[["__scopeId","data-v-3fc33b5d"]]),y6e='<svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" width="1.2em" height="1.2em" data-v-63d067da=""><path fill="currentColor" d="m18.5 10l4.4 11h-2.155l-1.201-3h-4.09l-1.199 3h-2.154L16.5 10h2zM10 2v2h6v2h-1.968a18.222 18.222 0 0 1-3.62 6.301a14.864 14.864 0 0 0 2.336 1.707l-.751 1.878A17.015 17.015 0 0 1 9 13.725a16.676 16.676 0 0 1-6.201 3.548l-.536-1.929a14.7 14.7 0 0 0 5.327-3.042A18.078 18.078 0 0 1 4.767 8h2.24A16.032 16.032 0 0 0 9 10.877a16.165 16.165 0 0 0 2.91-4.876L2 6V4h6V2h2zm7.5 10.885L16.253 16h2.492L17.5 12.885z"></path></svg>',b6e=de({__name:"MlLanguage",props:{languages:{},current:{}},emits:{click:null},setup(t,{emit:e}){const n=t,r=e,s=i=>{r("click",i)};return(i,o)=>(D(),Le(v6e,{icon:y6e,items:n.languages,current:n.current,onClick:s},null,8,["items","current"]))}}),_6e={},w6e={class:"ml-status-bar"},x6e={class:"ml-status-bar-left"},S6e={class:"ml-status-bar-right"};function E6e(t,e){return D(),Z("div",w6e,[ne("div",x6e,[Ae(t.$slots,"left",{},void 0,!0)]),ne("div",S6e,[Ae(t.$slots,"right",{},void 0,!0)])])}const C6e=F_(_6e,[["render",E6e],["__scopeId","data-v-d6a59cf0"]]),T6e={key:0,class:"ml-toolbar-button-text"},M6e=de({__name:"MlToolBar",props:{items:{},size:{default:"large"},direction:{}},emits:{click:null},setup(t,{emit:e}){const n=t,r=e,s=R(()=>n.direction==="vertical"?"ml-vertical-toolbar-button-group":"ml-horizontal-toolbar-button-group"),i=R(()=>n.size==="small"?20:30),o=R(()=>{switch(n.size){case"small":return 30;case"medium":return 50}return 70}),a=u=>u.description?u.description:u.text,l=R(()=>n.size==="large"),c=u=>{r("click",u)};return(u,d)=>{const h=Et,f=Ss,m=ri,v=dM;return D(),Le(v,{class:U(s.value)},{default:me(()=>[(D(!0),Z(xt,null,_n(u.items,(y,g)=>(D(),Le(m,{key:y.text,content:a(y),"hide-after":0},{default:me(()=>[(D(),Le(f,{class:"ml-toolbar-button",style:Pt({width:o.value+"px",height:o.value+"px"}),key:g,onClick:S=>c(y.command)},{default:me(()=>[ne("div",null,[ae(h,{size:i.value},{default:me(()=>[(D(),Le(mn(y.icon)))]),_:2},1032,["size"]),l.value?(D(),Z("div",T6e,tt(y.text),1)):Pe("",!0)])]),_:2},1032,["style","onClick"]))]),_:2},1032,["content"]))),128))]),_:1},8,["class"])}}}),A6e=F_(M6e,[["__scopeId","data-v-3eed2087"]]),NL=20;function k6e(t,e,n){const r=H(!1),s=l=>{if(n.value&&t.value){const c=t.value.getBoundingClientRect(),u=l.clientX<c.left||l.clientX>c.right||l.clientY<c.top||l.clientY>c.bottom;r.value=!u}},i=()=>{n.value&&(r.value=!0)},o=()=>{e.value&&e.value.addEventListener("mousemove",i),t.value&&t.value.addEventListener("mousemove",i)},a=()=>{e.value&&e.value.removeEventListener("mousemove",i),t.value&&t.value.removeEventListener("mousemove",i)};return Zt(()=>{window.addEventListener("mousemove",s)}),yo(()=>{window.removeEventListener("mousemove",s)}),Be(n,l=>{l&&(r.value=!1)}),Be(t,l=>{l?o():a()}),{autoOpened:r}}function I6e(t,e,n){const r=H(!1),s=H(null),i=H(null),o={x:0,y:0},a=R(()=>s.value==null||i.value==null?{x:0,y:0}:{x:s.value.x-i.value.x,y:s.value.y-i.value.y}),l=()=>{if(t.value){const m=t.value.getBoundingClientRect();i.value={x:m.left,y:m.top},s.value={x:m.left,y:m.top}}},c=()=>{t.value&&t.value.addEventListener("mousedown",d)},u=()=>{t.value&&t.value.removeEventListener("mousedown",d)},d=m=>{if(t.value!=null){if(e&&e.value){const v=e.value.getBoundingClientRect();if(m.clientX<v.left||m.clientX>v.right||m.clientY<v.top||m.clientY>v.bottom)return}r.value=!0,o.x=m.clientX,o.y=m.clientY,l(),document.addEventListener("mousemove",h),document.addEventListener("mouseup",f)}},h=m=>{if(r.value&&i.value&&s.value){const v=window.innerWidth,y=window.innerHeight,g=t.value,S=g.getBoundingClientRect(),_=S.width,w=S.height,E=i.value.x+(m.clientX-o.x),C=i.value.y+(m.clientY-o.y);s.value.x=Math.max(n?n.value.offset.value.left:0,E);const T=v-_;s.value.x=Math.min(n?T-n.value.offset.value.right:T,s.value.x),s.value.y=Math.max(n?n.value.offset.value.top:0,Math.min(C,y-w));const I=y-w;s.value.y=Math.min(n?I-n.value.offset.value.bottom:I,s.value.y),g.style.left=s.value.x+"px",g.style.top=s.value.y+"px"}},f=()=>{r.value=!1,document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",f)};return Zt(()=>{t.value&&(l(),c())}),yo(()=>{t.value&&t.value.removeEventListener("mousedown",d)}),Be(t,m=>{m?(l(),c()):u()}),{isDragging:r,movement:a,position:s}}function P6e(t,e,n){const r=H(!1),s=H("left"),{isDragging:i,movement:o,position:a}=I6e(t,e,n);return Be(o,l=>{if(l&&t.value){const c=t.value.getBoundingClientRect();c.left<=n.value.offset.value.left?(s.value="left",r.value=!0):window.innerWidth-c.left-c.width<=n.value.offset.value.right?(s.value="right",r.value=!0):r.value=!1}}),{docked:r,orientation:s,isDragging:i,movement:o,position:a}}function R6e(t,e,n,r){const s=H(null),i=H(null),o=H(null),a=H(null);return Be(t,(l,c)=>{s.value=c}),Be(e,(l,c)=>{i.value=c}),Be(n,(l,c)=>{o.value=c}),Be(r,(l,c)=>{a.value=c}),{lastLeft:s,lastTop:i,lastWidth:o,lastHeight:a}}function L6e(t,e,n,r){const s=H(t.value.width),i=H(t.value.left),o=R(()=>t.value.width),a=R(()=>t.value.left),l=R(()=>n.value?n.value.x:null);return Be([o,a],([c,u])=>{(s.value==null||i.value==null||e.value)&&(s.value=c,i.value=u)}),Be(l,c=>{r.value&&n.value&&(i.value=c)}),{left:i,width:s}}function O6e(t,e=H({left:0,right:0,top:0,bottom:0})){const n=H({});let r=!1;const s=()=>{if(!r&&t.value){const i=t.value.getBoundingClientRect();n.value.left=Math.max(i.left,e.value.left),n.value.top=Math.max(i.top,e.value.top),n.value.width=i.width,n.value.height=i.height,r=!0}};return Zt(()=>{t.value&&s()}),Be(t,i=>{i&&s()}),{isIntialized:r,initialRect:n}}function N6e(t,e=H(!1),n=H(!1),r=H({left:0,right:0,top:0,bottom:0}),s={width:20,height:40}){const{initialRect:i}=O6e(t,r),o=H(!1);let a=0,l=0,c=0,u=0,d=0;const h=5,f=H(null),m=_=>{if(!(!t.value||e.value))if(o.value){const w=_.clientX-u,E=_.clientY-d;if(f.value==="left"||f.value==="left-bottom-corner"){const C=l-w;C>s.width&&(i.value.width=C,i.value.left=a+w,t.value.style.left=i.value.left+"px",t.value.style.width=i.value.width+"px")}if(f.value==="right"||f.value==="right-bottom-corner"){const C=l+w;C>s.width&&(i.value.width=C,t.value.style.width=i.value.width+"px")}if(f.value==="bottom"||f.value==="left-bottom-corner"||f.value==="right-bottom-corner"){const C=c+E;C>s.height&&(i.value.height=C,t.value.style.height=i.value.height+"px")}}else{const w=t.value.getBoundingClientRect(),E=_.clientX-w.left,C=_.clientY-w.top,T=E<=h,I=E>=w.width-h,k=C>=w.height-h;T&&k&&n.value?(t.value.style.cursor="nesw-resize",f.value="left-bottom-corner"):I&&k&&!n.value?(t.value.style.cursor="nwse-resize",f.value="right-bottom-corner"):T&&n.value?(t.value.style.cursor="ew-resize",f.value="left"):I&&!n.value?(t.value.style.cursor="ew-resize",f.value="right"):k?(t.value.style.cursor="ns-resize",f.value="bottom"):(t.value.style.cursor="",f.value=null)}},v=_=>{if(!t.value||!f.value)return;const w=t.value.getBoundingClientRect();u=_.clientX,d=_.clientY,l=w.width,c=w.height,a=w.left,i.value.width=l,i.value.height=c,i.value.left=w.left,i.value.top=w.top,o.value=!0,document.addEventListener("mousemove",m),document.addEventListener("mouseup",y)},y=()=>{o.value=!1,f.value=null,t.value&&(t.value.style.cursor=""),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",y)},g=()=>{t.value&&(t.value.removeEventListener("mousedown",v),t.value.removeEventListener("mousemove",m)),document.removeEventListener("mouseup",y)},S=()=>{t.value&&(t.value.addEventListener("mousedown",v),t.value.addEventListener("mousemove",m))};return Zt(()=>{t.value&&S()}),Xn(()=>{g()}),Be(t,_=>{_?S():g()}),{rect:i,isResizing:o}}function D6e(t,e,n,r){const s=()=>{if(t.value){const l=t.value;e.value?l.style.transition="width 0.3s ease-out, left 0.3s ease-out":l.style.transition="width 0.3s ease"}},i=()=>{t.value&&(t.value.style.transition="")},o=()=>{t.value&&t.value.removeEventListener("transitionend",i)},a=()=>{t.value&&t.value.addEventListener("transitionend",i)};Zt(()=>{t.value&&t.value.addEventListener("transitionend",i)}),Xn(()=>{t.value&&t.value.removeEventListener("transitionend",i)}),Be(t,l=>{l?a():o()}),Be(n,()=>{s()}),Be(r,()=>{s()})}function F6e(t,e,n,r){const s=H(window.innerWidth),i=H(window.innerHeight),{docked:o,orientation:a,movement:l,position:c,isDragging:u}=P6e(t,e,r),d=R(()=>a.value==="right"),{rect:h,isResizing:f}=N6e(t,n,d,r.value.offset),{width:m,left:v}=L6e(h,f,c,u),{lastTop:y,lastHeight:g}=R6e(R(()=>h.value.left),R(()=>h.value.top),R(()=>h.value.width),R(()=>h.value.height)),{autoOpened:S}=k6e(t,e,n);D6e(t,d,n,S);const _=T=>{if(t.value){const I=t.value.getBoundingClientRect(),k=I.left+T;if(d.value){h.value.left=k;const M=window.innerWidth-I.width-I.left;I.left<=0&&M>=0&&T<0&&(h.value.left=Math.max(0,k)),window.innerWidth-I.width<=0&&(h.value.left=window.innerWidth-I.width)}else I.left+I.width>=window.innerWidth&&T<0&&(h.value.left=Math.max(0,k))}},w=()=>{const T=window.innerWidth-s.value;s.value=window.innerWidth,i.value=window.innerHeight,_(T)};Zt(()=>{window.addEventListener("resize",w)}),yo(()=>{window.removeEventListener("resize",w)});const E=T=>{T?(h.value.width=NL,d.value&&v.value&&m.value&&(h.value.left=v.value+m.value-NL)):(h.value.width=m.value,d.value&&v.value&&m.value&&(h.value.left=v.value))},C=()=>{o.value?(h.value.top=r.value.offset.value.top,h.value.height=window.innerHeight-r.value.offset.value.top-r.value.offset.value.bottom):(h.value.top=y.value,h.value.height=g.value)};return Be(o,()=>{C()}),Be(n,T=>{E(T)}),Be(S,T=>{n.value&&!u.value&&E(!T)}),Be(l,T=>{if(T&&t.value){const I=t.value.getBoundingClientRect();h.value.left=I.left,h.value.top=I.top}}),{rect:h,orientation:a,reversed:d}}const B6e=t=>(aF("data-v-11a64c54"),t=t(),lF(),t),U6e=B6e(()=>ne("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M764.288 214.592L512 466.88L259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512L214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})],-1)),z6e={class:"ml-tool-palette-title"},$6e={class:"ml-tool-palette-content"},V6e=de({__name:"MlToolPalette",props:up({title:{default:""},leftOffset:{default:0},rightOffset:{default:0},topOffset:{default:0},bottomOffset:{default:0}},{modelValue:{default:!0},modelModifiers:{}}),emits:up(["close"],["update:modelValue"]),setup(t,{emit:e}){const n=t,r=AT(t,"modelValue"),s=e,i=H(!1),o=H(null),a=H(null),l=R(()=>({offset:H({left:n.leftOffset,right:n.rightOffset,top:n.topOffset,bottom:n.bottomOffset})})),{rect:c,orientation:u,reversed:d}=F6e(a,o,i,l),h=R(()=>({left:`${c.value.left}px`,top:`${c.value.top}px`,width:`${c.value.width}px`,height:`${c.value.height}px`})),f=R(()=>d.value?{borderLeft:"1px solid var(--el-border-color)",borderRight:null}:{borderLeft:null,borderRight:"1px solid var(--el-border-color)"}),m=()=>{r.value=!1;const v=a.value;s("close",{x:v?v.clientLeft:0,y:v?v.clientTop:0})};return(v,y)=>{const g=Et;return r.value?(D(),Z("div",{key:0,ref_key:"toolPaletteElement",ref:a,style:Pt([h.value]),class:"ml-tool-palette-dialog"},[ne("div",{class:U(["ml-tool-palette-dialog-layout",p(u)])},[ne("div",{ref_key:"titleBarElement",ref:o,class:"ml-tool-palette-title-bar",style:Pt(f.value)},[ae(g,{size:18,class:"ml-tool-palette-dialog-icon",onClick:m},{default:me(()=>[U6e]),_:1}),ae(f6e,{class:"ml-tool-palette-dialog-icon",modelValue:i.value,"onUpdate:modelValue":y[0]||(y[0]=S=>i.value=S),reverse:p(d)},null,8,["modelValue","reverse"]),ne("span",z6e,tt(n.title),1)],4),ne("div",$6e,[Ae(v.$slots,"default",{},void 0,!0)])],2)],4)):Pe("",!0)}}}),H6e=F_(V6e,[["__scopeId","data-v-11a64c54"]]),G6e={class:"ml-layer-list-cell"},W6e={class:"ml-layer-list-cell"},j6e=de({__name:"MlLayerList",props:{editor:{}},setup(t){const{t:e}=si(),n=t,r=fNe(n.editor),s=H(),i=H([]),o=l=>{i.value=l},a=l=>{const c=n.editor.curDocument.database.tables.layerTable.getAt(l.name);c&&(c.isOff=!l.isOn)};return(l,c)=>{const u=Xt("el-table-column"),d=Xt("el-checkbox"),h=Xt("el-tag");return D(),Le(p(s9),{ref_key:"multipleTableRef",ref:s,data:p(r),class:"ml-layer-list",onSelectionChange:o},{default:me(()=>[ae(u,{type:"selection",width:"40"}),ae(u,{property:"name",label:p(e)("main.toolPalette.layerManager.layerList.name"),width:"120",sortable:"","show-overflow-tooltip":""},null,8,["label"]),ae(u,{property:"isOn",label:p(e)("main.toolPalette.layerManager.layerList.on"),width:"50"},{default:me(f=>[ne("div",G6e,[ae(d,{modelValue:f.row.isOn,"onUpdate:modelValue":m=>f.row.isOn=m,onChange:m=>a(f.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),_:1},8,["label"]),ae(u,{property:"color",label:p(e)("main.toolPalette.layerManager.layerList.color"),width:"70"},{default:me(f=>[ne("div",W6e,[ae(h,{color:f.row.color,class:"ml-layer-list-color"},null,8,["color"])])]),_:1},8,["label"])]),_:1},8,["data"])}}}),K6e={class:"ml-layer-list-wrapper"},q6e=de({__name:"MlLayerManager",props:{editor:{}},setup(t){const e=t;return(n,r)=>(D(),Le(p(H6e),{class:"ml-layer-manager",modelValue:p(zd).dialogs.layerManager,"onUpdate:modelValue":r[0]||(r[0]=s=>p(zd).dialogs.layerManager=s),title:"Layers","bottom-offset":30},{default:me(()=>[ne("div",K6e,[ae(j6e,{editor:e.editor},null,8,["editor"])])]),_:1},8,["modelValue"]))}}),Y6e=ca(q6e,[["__scopeId","data-v-d49ba2cb"]]),X6e={class:"autocomplete-container"},Z6e=de({__name:"MlCommandLine",setup(t){const{t:e}=si(),n=D_(),r=cNe(),s=H(""),i=H(""),o=(c,u)=>{const d=c?r.filter(h=>h.commandName.startsWith(c.toLowerCase())):r;u(d)},a=()=>{s.value&&(fr.instance.sendStringToExecute(s.value),i.value=s.value,s.value="")},l=(c,u)=>`${u}: ${CNe(c,u)}`;return(c,u)=>(D(),Z("div",X6e,[p(n).isShowCommandLine?(D(),Le(p(HU),{key:0,modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=d=>s.value=d),"value-key":"commandName",clearable:"","fetch-suggestions":o,placeholder:p(e)("main.commandLine.prompt"),debounce:300,"trigger-on-focus":"","fit-input-width":!1,onSelect:a,onKeydown:cr(a,["enter"]),class:"autocomplete-input"},{default:me(({item:d})=>[ne("div",null,tt(l(d.groupName,d.commandName)),1)]),prepend:me(()=>[rn(tt(`> ${i.value}`),1)]),_:1},8,["modelValue","placeholder"])):Pe("",!0)]))}}),J6e=ca(Z6e,[["__scopeId","data-v-082845cb"]]),Q6e=de({__name:"MlEntityInfo",setup(t){JF(h=>({"2d5cc4ca":o.value,"11fa7d7e":a.value}));const{t:e}=si(),n=H(!1),r=H(-1),s=H(-1),i=H(null),o=R(()=>r.value+"px"),a=R(()=>s.value+"px"),l=R(()=>{const h=fr.instance.curDocument.database;if(i.value){const f=h.tables.blockTable.modelSpace.getIdAt(i.value);if(f)return{type:TNe(f),color:MNe(f.color.toString()),layer:f.layer,lineType:f.lineType}}return{type:"",color:"",layer:"",lineType:""}}),c=R(()=>n.value&&l.value.type!=""),u=h=>{i.value=h.id,r.value=h.x,s.value=h.y,n.value=!0},d=()=>{n.value=!1};return Zt(()=>{const h=fr.instance.curView.events;h.hover.addEventListener(u),h.unhover.addEventListener(d)}),yo(()=>{const h=fr.instance.curView.events;h.hover.removeEventListener(u),h.unhover.removeEventListener(d)}),(h,f)=>{const m=Xt("el-text"),v=Xt("el-col"),y=Xt("el-row"),g=Xt("el-card");return c.value?(D(),Le(g,{key:0,class:"ml-entity-info"},{default:me(()=>[ae(y,{class:"ml-entity-info-text"},{default:me(()=>[ae(v,{span:24},{default:me(()=>[ae(m,{size:"small",class:"ml-entity-info-title"},{default:me(()=>[rn(tt(l.value.type),1)]),_:1})]),_:1})]),_:1}),ae(y,{class:"ml-entity-info-text"},{default:me(()=>[ae(v,{span:10},{default:me(()=>[ae(m,{size:"small"},{default:me(()=>[rn(tt(p(e)("main.entityInfo.color")),1)]),_:1})]),_:1}),ae(v,{span:14},{default:me(()=>[ae(m,{size:"small"},{default:me(()=>[rn(tt(l.value.color),1)]),_:1})]),_:1})]),_:1}),ae(y,{class:"ml-entity-info-text"},{default:me(()=>[ae(v,{span:10},{default:me(()=>[ae(m,{size:"small"},{default:me(()=>[rn(tt(p(e)("main.entityInfo.layer")),1)]),_:1})]),_:1}),ae(v,{span:14},{default:me(()=>[ae(m,{size:"small"},{default:me(()=>[rn(tt(l.value.layer),1)]),_:1})]),_:1})]),_:1}),ae(y,{class:"ml-entity-info-text"},{default:me(()=>[ae(v,{span:10},{default:me(()=>[ae(m,{size:"small"},{default:me(()=>[rn(tt(p(e)("main.entityInfo.lineType")),1)]),_:1})]),_:1}),ae(v,{span:14},{default:me(()=>[ae(m,{size:"small"},{default:me(()=>[rn(tt(l.value.lineType),1)]),_:1})]),_:1})]),_:1})]),_:1})):Pe("",!0)}}}),e5e=ca(Q6e,[["__scopeId","data-v-6a67bbe7"]]),t5e=de({__name:"MlLanguageSelector",props:{currentLocale:{default:void 0}},setup(t){const e=t,{effectiveLocale:n,setLocale:r}=y$(e.currentLocale),s=Ln([{name:"en",text:"English"},{name:"zh",text:""}]),i=o=>{(o==="en"||o==="zh")&&r(o)};return(o,a)=>(D(),Le(p(b6e),{class:"ml-language-selector",languages:s,current:p(n),onClick:i},null,8,["languages","current"]))}}),n5e=ca(t5e,[["__scopeId","data-v-1b9f7bc0"]]);/*! Element Plus Icons Vue v2.3.1 */var r5e=de({name:"Check",__name:"check",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),ky=r5e,s5e=de({name:"Menu",__name:"menu",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M160 448a32 32 0 0 1-32-32V160.064a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V416a32 32 0 0 1-32 32zm448 0a32 32 0 0 1-32-32V160.064a32 32 0 0 1 32-32h255.936a32 32 0 0 1 32 32V416a32 32 0 0 1-32 32zM160 896a32 32 0 0 1-32-32V608a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32v256a32 32 0 0 1-32 32zm448 0a32 32 0 0 1-32-32V608a32 32 0 0 1 32-32h255.936a32 32 0 0 1 32 32v256a32 32 0 0 1-32 32z"})]))}}),i5e=s5e,o5e=de({name:"Moon",__name:"moon",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M240.448 240.448a384 384 0 1 0 559.424 525.696 448 448 0 0 1-542.016-542.08 390.592 390.592 0 0 0-17.408 16.384zm181.056 362.048a384 384 0 0 0 525.632 16.384A448 448 0 1 1 405.056 76.8a384 384 0 0 0 16.448 525.696"})]))}}),a5e=o5e,l5e=de({name:"Operation",__name:"operation",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M389.44 768a96.064 96.064 0 0 1 181.12 0H896v64H570.56a96.064 96.064 0 0 1-181.12 0H128v-64zm192-288a96.064 96.064 0 0 1 181.12 0H896v64H762.56a96.064 96.064 0 0 1-181.12 0H128v-64zm-320-288a96.064 96.064 0 0 1 181.12 0H896v64H442.56a96.064 96.064 0 0 1-181.12 0H128v-64z"})]))}}),c5e=l5e,u5e=de({name:"Setting",__name:"setting",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M600.704 64a32 32 0 0 1 30.464 22.208l35.2 109.376c14.784 7.232 28.928 15.36 42.432 24.512l112.384-24.192a32 32 0 0 1 34.432 15.36L944.32 364.8a32 32 0 0 1-4.032 37.504l-77.12 85.12a357.12 357.12 0 0 1 0 49.024l77.12 85.248a32 32 0 0 1 4.032 37.504l-88.704 153.6a32 32 0 0 1-34.432 15.296L708.8 803.904c-13.44 9.088-27.648 17.28-42.368 24.512l-35.264 109.376A32 32 0 0 1 600.704 960H423.296a32 32 0 0 1-30.464-22.208L357.696 828.48a351.616 351.616 0 0 1-42.56-24.64l-112.32 24.256a32 32 0 0 1-34.432-15.36L79.68 659.2a32 32 0 0 1 4.032-37.504l77.12-85.248a357.12 357.12 0 0 1 0-48.896l-77.12-85.248A32 32 0 0 1 79.68 364.8l88.704-153.6a32 32 0 0 1 34.432-15.296l112.32 24.256c13.568-9.152 27.776-17.408 42.56-24.64l35.2-109.312A32 32 0 0 1 423.232 64H600.64zm-23.424 64H446.72l-36.352 113.088-24.512 11.968a294.113 294.113 0 0 0-34.816 20.096l-22.656 15.36-116.224-25.088-65.28 113.152 79.68 88.192-1.92 27.136a293.12 293.12 0 0 0 0 40.192l1.92 27.136-79.808 88.192 65.344 113.152 116.224-25.024 22.656 15.296a294.113 294.113 0 0 0 34.816 20.096l24.512 11.968L446.72 896h130.688l36.48-113.152 24.448-11.904a288.282 288.282 0 0 0 34.752-20.096l22.592-15.296 116.288 25.024 65.28-113.152-79.744-88.192 1.92-27.136a293.12 293.12 0 0 0 0-40.256l-1.92-27.136 79.808-88.128-65.344-113.152-116.288 24.96-22.592-15.232a287.616 287.616 0 0 0-34.752-20.096l-24.448-11.904L577.344 128zM512 320a192 192 0 1 1 0 384 192 192 0 0 1 0-384m0 64a128 128 0 1 0 0 256 128 128 0 0 0 0-256"})]))}}),d5e=u5e,h5e=de({name:"Sunny",__name:"sunny",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M512 704a192 192 0 1 0 0-384 192 192 0 0 0 0 384m0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512m0-704a32 32 0 0 1 32 32v64a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 768a32 32 0 0 1 32 32v64a32 32 0 1 1-64 0v-64a32 32 0 0 1 32-32M195.2 195.2a32 32 0 0 1 45.248 0l45.248 45.248a32 32 0 1 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm543.104 543.104a32 32 0 0 1 45.248 0l45.248 45.248a32 32 0 0 1-45.248 45.248l-45.248-45.248a32 32 0 0 1 0-45.248M64 512a32 32 0 0 1 32-32h64a32 32 0 0 1 0 64H96a32 32 0 0 1-32-32m768 0a32 32 0 0 1 32-32h64a32 32 0 1 1 0 64h-64a32 32 0 0 1-32-32M195.2 828.8a32 32 0 0 1 0-45.248l45.248-45.248a32 32 0 0 1 45.248 45.248L240.448 828.8a32 32 0 0 1-45.248 0zm543.104-543.104a32 32 0 0 1 0-45.248l45.248-45.248a32 32 0 0 1 45.248 45.248l-45.248 45.248a32 32 0 0 1-45.248 0"})]))}}),f5e=h5e,p5e=de({name:"Warning",__name:"warning",setup(t){return(e,n)=>(D(),Z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ne("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 832a384 384 0 0 0 0-768 384 384 0 0 0 0 768m48-176a48 48 0 1 1-96 0 48 48 0 0 1 96 0m-48-464a32 32 0 0 1 32 32v288a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"})]))}}),m5e=p5e;const g5e=de({__name:"MlMainMenu",setup(t){const{t:e}=si(),n=r=>{r==="Convert"?new m5().tirgger(fr.instance.context):r==="QNew"?new v5().tirgger(fr.instance.context):r==="Open"&&new g5().tirgger(fr.instance.context)};return(r,s)=>{const i=Xt("el-icon"),o=Xt("el-dropdown-item"),a=Xt("el-dropdown-menu"),l=Xt("el-dropdown");return D(),Le(l,{"aria-hidden":"false",class:"ml-main-menu-container",onCommand:n},{dropdown:me(()=>[ae(a,null,{default:me(()=>[ae(o,{command:"QNew"},{default:me(()=>[rn(tt(p(e)("main.mainMenu.new")),1)]),_:1}),ae(o,{command:"Open"},{default:me(()=>[rn(tt(p(e)("main.mainMenu.open")),1)]),_:1})]),_:1})]),default:me(()=>[ae(i,{class:"ml-main-menu-icon",size:"30"},{default:me(()=>[ae(p(i5e))]),_:1})]),_:1})}}}),v5e=ca(g5e,[["__scopeId","data-v-8c0c738e"]]),y5e={key:0,class:"ml-vertical-toolbar-container"},b5e=de({__name:"MlToolBars",setup(t){const{t:e}=si(),n=D_(),r=R(()=>[{icon:WNe,text:e("main.verticalToolbar.select.text"),command:"select",description:e("main.verticalToolbar.select.description")},{icon:VNe,text:e("main.verticalToolbar.pan.text"),command:"pan",description:e("main.verticalToolbar.pan.description")},{icon:ZNe,text:e("main.verticalToolbar.zoomToExtent.text"),command:"zoom",description:e("main.verticalToolbar.zoomToExtent.description")},{icon:qNe,text:e("main.verticalToolbar.zoomToBox.text"),command:"zoomw",description:e("main.verticalToolbar.zoomToBox.description")},{icon:UNe,text:e("main.verticalToolbar.layer.text"),command:"la",description:e("main.verticalToolbar.layer.description")}]),s=i=>{fr.instance.sendStringToExecute(i)};return(i,o)=>p(n).isShowToolbar?(D(),Z("div",y5e,[ae(p(A6e),{items:r.value,size:"small",direction:"vertical",onClick:s},null,8,["items"])])):Pe("",!0)}}),_5e=de({__name:"MlFullScreenButton",setup(t){const{t:e}=si(),{isFullscreen:n,toggle:r}=Fhe(),s=R(()=>({onIcon:RL,offIcon:RL,onTooltip:e("main.statusBar.fullScreen.on"),offTooltip:e("main.statusBar.fullScreen.off")})),i=R(()=>!n.value);return(o,a)=>(D(),Le(p(_$),{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=l=>i.value=l),data:s.value,onClick:p(r)},null,8,["modelValue","data","onClick"]))}}),w5e=de({__name:"MlPointStyleButton",setup(t){const{t:e}=si(),n=()=>{fr.instance.sendStringToExecute("pttype")};return(r,s)=>{const i=Xt("el-button"),o=Xt("el-tooltip");return D(),Le(o,{content:p(e)("main.statusBar.pointStyle.tooltip"),"hide-after":0},{default:me(()=>[ae(i,{class:"ml-point-style-button",icon:p(c5e),onClick:s[0]||(s[0]=a=>n())},null,8,["icon"])]),_:1},8,["content"])}}}),x5e=ca(w5e,[["__scopeId","data-v-29692d7d"]]),S5e={key:0,class:"ml-progress"},E5e=de({__name:"MlProgress",setup(t){const{t:e}=si(),n=H(0),r=H(!1),s=o=>{if(o.stage==="CONVERSION"){const a=qE.service({lock:!0});if(o.subStage){const l=ANe(o.subStage);a.setText(l)}n.value=o.percentage,n.value<100?r.value=!0:(r.value=!1,a.close(),fr.instance.curView.zoomToFit())}else if(o.stage==="FETCH_FILE"){const a=qE.service({lock:!0});a.setText(e("main.message.fetchingDrawingFile")),n.value=o.percentage,n.value<100?r.value=!0:(r.value=!1,a.close())}},i=o=>`${o.toFixed(0)}%`;return Zt(()=>{ji.on("open-file-progress",s)}),yo(()=>{ji.off("open-file-progress",s)}),(o,a)=>r.value?(D(),Z("div",S5e,[ae(p(NM),{"text-inside":!0,"stroke-width":20,percentage:n.value,format:i},null,8,["percentage"])])):Pe("",!0)}}),C5e=ca(E5e,[["__scopeId","data-v-c4edb83e"]]),T5e=de({__name:"MlSettingButton",setup(t){const{t:e}=si(),n=D_(),r=s=>{s=="isShowCoordinate"?(n.isShowCoordinate=!n.isShowCoordinate,Xo.instance.isShowCoordinate=n.isShowCoordinate):s=="isShowCommandLine"?(n.isShowCommandLine=!n.isShowCommandLine,Xo.instance.isShowCommandLine=n.isShowCommandLine):s=="isShowToolbar"?(n.isShowToolbar=!n.isShowToolbar,Xo.instance.isShowToolbar=n.isShowToolbar):s=="isShowStats"&&(n.isShowStats=!n.isShowStats,Xo.instance.isShowStats=n.isShowStats)};return(s,i)=>{const o=Xt("el-button"),a=Xt("el-dropdown-item"),l=Xt("el-dropdown-menu"),c=Xt("el-dropdown"),u=Xt("el-tooltip");return D(),Le(u,{content:p(e)("main.statusBar.setting.tooltip"),"hide-after":0},{default:me(()=>[ae(c,{trigger:"click",onCommand:r},{dropdown:me(()=>[ae(l,null,{default:me(()=>[ae(a,{icon:p(n).isShowStats?p(ky):"",command:"isShowStats"},{default:me(()=>[rn(tt(p(e)("main.statusBar.setting.stats")),1)]),_:1},8,["icon"]),ae(a,{icon:p(n).isShowCommandLine?p(ky):"",command:"isShowCommandLine"},{default:me(()=>[rn(tt(p(e)("main.statusBar.setting.commandLine")),1)]),_:1},8,["icon"]),ae(a,{icon:p(n).isShowCoordinate?p(ky):"",command:"isShowCoordinate"},{default:me(()=>[rn(tt(p(e)("main.statusBar.setting.coordinate")),1)]),_:1},8,["icon"]),ae(a,{icon:p(n).isShowToolbar?p(ky):"",command:"isShowToolbar"},{default:me(()=>[rn(tt(p(e)("main.statusBar.setting.toolbar")),1)]),_:1},8,["icon"])]),_:1})]),default:me(()=>[ae(o,{class:"ml-setting-button",icon:p(d5e)},null,8,["icon"])]),_:1})]),_:1},8,["content"])}}}),M5e=ca(T5e,[["__scopeId","data-v-666f03a3"]]),A5e=de({__name:"MlThemeButton",setup(t){const{t:e}=si(),n=R(()=>({onIcon:f5e,offIcon:a5e,onTooltip:e("main.statusBar.theme.light"),offTooltip:e("main.statusBar.theme.dark")}));return(r,s)=>(D(),Le(p(_$),{modelValue:p(gb),"onUpdate:modelValue":s[0]||(s[0]=i=>yr(gb)?gb.value=i:null),data:n.value,onClick:s[1]||(s[1]=i=>p(dNe)())},null,8,["modelValue","data"]))}}),k5e=de({__name:"MlWarningButton",setup(t){const e=()=>{fr.instance.sendStringToExecute("md")},{fonts:n,images:r}=b$(),s=R(()=>r.size>0||n.size>0);return(i,o)=>{const a=Xt("el-button");return s.value?(D(),Le(a,{key:0,class:"ml-warning-button",type:"warning",icon:p(m5e),onClick:o[0]||(o[0]=l=>e())},null,8,["icon"])):Pe("",!0)}}}),I5e=ca(k5e,[["__scopeId","data-v-3411a3ec"]]),P5e=de({__name:"MlStatusBar",setup(t){const{text:e}=uNe(fr.instance.curView),n=pNe(fr.instance),r=D_(),s=i=>{Dp().layoutManager.setCurrentLayoutBtrId(i.blockTableRecordId)};return(i,o)=>{const a=Xt("el-button"),l=Xt("el-button-group");return D(),Le(p(C6e),{class:"ml-status-bar"},{left:me(()=>[ae(l,{class:"ml-status-bar-left-button-group"},{default:me(()=>[(D(!0),Z(xt,null,_n(p(n),c=>(D(),Le(a,{class:"ml-status-bar-layout-button",key:c.name,type:c.isActive?"primary":"",onClick:u=>s(c)},{default:me(()=>[rn(tt(c.name),1)]),_:2},1032,["type","onClick"]))),128))]),_:1})]),right:me(()=>[ae(C5e),ae(l,{class:"ml-status-bar-right-button-group"},{default:me(()=>[p(r).isShowCoordinate?(D(),Le(a,{key:0,class:"ml-status-bar-current-pos"},{default:me(()=>[rn(tt(p(e)),1)]),_:1})):Pe("",!0),ae(I5e),ae(A5e),ae(_5e),ae(x5e),ae(M5e)]),_:1})]),_:1})}}}),R5e=ca(P5e,[["__scopeId","data-v-ee6f13c4"]]),L5e={key:0,class:"ml-cad-viewer-container"},O5e={class:"ml-file-name"},N5e=de({__name:"MlCadViewer",props:{locale:{default:"default"},url:{default:void 0},localFile:{default:void 0},background:{default:void 0}},setup(t){const e=t,{t:n}=si(),{effectiveLocale:r,elementPlusLocale:s}=y$(e.locale),i=H(),o=H(null),a=R(()=>o.value),l=async(d,h)=>{const f={minimumChunkSize:1e3};await fr.instance.openDocument(d,h,f),zd.fileName=d},c=async d=>{try{const h={minimumChunkSize:1e3};await fr.instance.openUrl(d,h);const f=d.split("/").pop();zd.fileName=f??""}catch(h){console.error("Failed to open file from URL:",h),xd({message:n("main.message.failedToOpenFile",{fileName:d}),grouping:!0,type:"error",showClose:!0})}},u=async d=>{var h;try{const f=(h=d.name.split(".").pop())==null?void 0:h.toLowerCase(),m=new FileReader;if(f==="dxf")m.readAsText(d);else if(f==="dwg")m.readAsArrayBuffer(d);else throw new Error(`Unsupported file type: ${f}`);const v=await new Promise((g,S)=>{m.onload=_=>{var w;const E=(w=_.target)==null?void 0:w.result;E?g(E):S(new Error("Failed to read file content"))},m.onerror=()=>S(new Error("Failed to read file"))}),y={minimumChunkSize:1e3};await fr.instance.openDocument(d.name,v,y),zd.fileName=d.name}catch(f){console.error("Failed to open local file:",f),xd({message:n("main.message.failedToOpenFile",{fileName:d.name}),grouping:!0,type:"error",showClose:!0})}};return Be(()=>e.url,async d=>{d&&c(d)}),Be(()=>e.localFile,async d=>{d&&u(d)}),Be(()=>e.background,d=>{d!=null&&(fr.instance.curView.backgroundColor=d)}),Zt(async()=>{i.value&&(B5e(i.value),F5e(),o.value=fr.instance),e.url?c(e.url):e.localFile&&u(e.localFile),e.background!=null&&(fr.instance.curView.backgroundColor=e.background)}),ji.on("message",d=>{xd({message:d.message,grouping:!0,type:d.type,showClose:!0})}),ji.on("font-not-loaded",d=>{xd({message:n("main.message.fontNotLoaded",{fontName:d.fontName,url:d.url}),grouping:!0,type:"error",showClose:!0})}),ji.on("failed-to-get-avaiable-fonts",d=>{xd({message:n("main.message.failedToGetAvaiableFonts",{url:d.url}),grouping:!0,type:"error",showClose:!0})}),ji.on("failed-to-open-file",d=>{xd({message:n("main.message.failedToOpenFile",{fileName:d.fileName}),grouping:!0,type:"error",showClose:!0})}),(d,h)=>{const f=Xt("el-config-provider");return D(),Z(xt,null,[ne("canvas",{ref_key:"canvasRef",ref:i,class:"ml-cad-canvas"},null,512),o.value?(D(),Z("div",L5e,[ae(f,{locale:p(s)},{default:me(()=>[ne("header",null,[ae(p(v5e)),ae(p(n5e),{"current-locale":p(r)},null,8,["current-locale"])]),ne("main",null,[ne("div",O5e,tt(p(zd).fileName),1),ae(p(b5e)),ae(p(Y6e),{editor:a.value},null,8,["editor"]),ae(p(INe))]),ne("footer",null,[ae(p(J6e)),ae(p(R5e))]),ae(p(RNe),{onFileRead:l}),ae(p(e5e))]),_:1},8,["locale"])])):Pe("",!0)],64)}}}),D5e=()=>{ei.instance.addCommand(ei.SYSTEMT_COMMAND_GROUP_NAME,"log","log",new z5e),ei.instance.addCommand(ei.SYSTEMT_COMMAND_GROUP_NAME,"la","la",new U5e),ei.instance.addCommand(ei.SYSTEMT_COMMAND_GROUP_NAME,"md","md",new $5e),ei.instance.addCommand(ei.SYSTEMT_COMMAND_GROUP_NAME,"pttype","pttype",new V5e)},F5e=()=>{const{registerDialog:t}=Hv();t({name:"ReplacementDlg",component:Oa(ONe),props:{}}),t({name:"PointStyleDlg",component:Oa(s6e),props:{}})},B5e=t=>{fr.createInstance(t),Xce(),D5e(),fr.instance.loadDefaultFonts()},zd=Ln({fileName:"",dialogs:{layerManager:!1}});class U5e extends Wa{execute(e){zd.dialogs.layerManager=!0}}class z5e extends Wa{execute(e){this.printSelectionSet(e),this.printStats(e),this.printPerformanceData()}printSelectionSet(e){const n=e.doc.database.tables.blockTable.modelSpace;e.view.selectionSet.ids.forEach(r=>{const s=n.getIdAt(r);s&&console.log(s)})}printStats(e){const n=e.view.stats.layouts;console.log("Geometry information in current drawing:");for(let r=0;r<n.length;++r){console.group(`Layout: ${r}`);const s=n[r],i=[0,0,0,0,0,0],o=[0,0,0,0,0,0],a=s.layers.map(l=>(i[0]=l.line.indexed.geometrySize/1024,i[1]=l.line.nonIndexed.geometrySize/1024,i[2]=l.mesh.indexed.geometrySize/1024,i[3]=l.mesh.nonIndexed.geometrySize/1024,i[4]=l.point.indexed.geometrySize/1024,i[5]=l.point.nonIndexed.geometrySize/1024,o[0]+=i[0],o[1]+=i[1],o[2]+=i[2],o[3]+=i[3],o[4]+=i[4],o[5]+=i[5],{name:l.name,"idx line (KB)":i[0].toFixed(1),"line (KB)":i[1].toFixed(1),"idx mesh (KB)":i[2].toFixed(1),"mesh (KB)":i[3].toFixed(1),"idx point (KB)":i[4].toFixed(1),"point (KB)":i[5].toFixed(1),"total geo (KB)":(l.summary.totalGeometrySize/1024).toFixed(1),"total mapping (KB)":(l.summary.totalMappingSize/1024).toFixed(1)}));a.push({name:"total","idx line (KB)":o[0].toFixed(1),"line (KB)":o[1].toFixed(1),"idx mesh (KB)":o[2].toFixed(1),"mesh (KB)":o[3].toFixed(1),"idx point (KB)":o[4].toFixed(1),"point (KB)":o[5].toFixed(1),"total geo (KB)":(s.summary.totalSize.geometry/1024).toFixed(1),"total mapping (KB)":(s.summary.totalSize.mapping/1024).toFixed(1)}),console.table(a),console.groupEnd()}}printPerformanceData(){XE.getInstance().printAll()}}class $5e extends Wa{execute(e){const{toggleDialog:n}=Hv();n("ReplacementDlg",!0)}}class V5e extends Wa{execute(e){const{toggleDialog:n}=Hv();n("PointStyleDlg",!0)}}const H5e=de({__name:"App",setup(t){return Xo.instance.isShowCommandLine=!1,(e,n)=>(D(),Le(p(N5e),{locale:"en",url:"https://cdn.jsdelivr.net/gh/mlight-lee/cad-data/data/anteen.dwg"}))}}),G5e=()=>{const t=oB(H5e);t.use(uh),t.use(sNe),t.mount("#app");const e=document.getElementById("loader");e&&(e.style.display="none")};G5e();
